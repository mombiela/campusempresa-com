<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interfaz con Servicios del Sistema</title>

    <link rel="alternate" href="https://campusempresa.com/vms/interfacing-with-system-services" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/vms/interfacing-with-system-services" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/vms/interfacing-with-system-services" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/vms/interfacing-with-system-services" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/vms/interfacing-with-system-services" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-dcl-scripting-techniques'>&#x25C4;Técnicas Avanzadas de Scripting en DCL</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Interfaz con Servicios del Sistema</a>
	</div>
	<div class='col-4 text-end'>
					<a href='using-lexical-functions'>Uso de Funciones Léxicas &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>La interfaz con los servicios del sistema en OpenVMS es una habilidad crucial para los desarrolladores que trabajan en este sistema operativo. Los servicios del sistema proporcionan una forma de interactuar con el hardware subyacente y los recursos del sistema, permitiendo tareas como la manipulación de archivos, el control de procesos y la comunicación entre procesos.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Servicios del Sistema</strong>: Funciones proporcionadas por el sistema operativo OpenVMS para realizar varias operaciones de bajo nivel.</li>
<li><strong>Convenciones de Llamada</strong>: La forma específica en que se llaman las funciones y se pasan los parámetros en OpenVMS.</li>
<li><strong>Códigos de Estado</strong>: Valores de retorno de los servicios del sistema que indican éxito o fracaso.</li>
<li><strong>Descriptores</strong>: Estructuras de datos utilizadas para describir el formato y la ubicación de los datos.</li>
</ul>
</div><h1>Servicios Básicos del Sistema</h1>
<h2>Introducción a los Servicios del Sistema</h2>
<div class='content'><p>Los servicios del sistema en OpenVMS se invocan utilizando una convención de llamada específica. Por lo general, están prefijados con <code>SYS$</code> y están diseñados para ser utilizados desde varios lenguajes de programación, incluidos C y Fortran.</p>
</div><h2>Ejemplo: SYS$GETJPI</h2>
<div class='content'><p>El servicio del sistema <code>SYS$GETJPI</code> recupera información sobre un proceso. Aquí hay un ejemplo simple en C:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxkZXNjcmlwLmg+CiNpbmNsdWRlIDxqcGlkZWYuaD4KI2luY2x1ZGUgPHNzZGVmLmg+CiNpbmNsdWRlIDxzdGFybGV0Lmg+CgppbnQgbWFpbigpIHsKICAgIHVuc2lnbmVkIGxvbmcgc3RhdHVzOwogICAgdW5zaWduZWQgbG9uZyBwaWQgPSAwOyAvLyAwIHNpZ25pZmljYSBwcm9jZXNvIGFjdHVhbAogICAgdW5zaWduZWQgbG9uZyBpdGVtID0gSlBJJF9QSUQ7IC8vIEPDs2RpZ28gZGUgw610ZW0gcGFyYSBJRCBkZSBwcm9jZXNvCiAgICB1bnNpZ25lZCBsb25nIHZhbHVlOwogICAgc3RydWN0IF9nZW5lcmljXzY0IGl0ZW1saXN0WzJdOwoKICAgIGl0ZW1saXN0WzBdLmxlbmd0aCA9IHNpemVvZih2YWx1ZSk7CiAgICBpdGVtbGlzdFswXS5jb2RlID0gaXRlbTsKICAgIGl0ZW1saXN0WzBdLmJ1ZmZlciA9ICZ2YWx1ZTsKICAgIGl0ZW1saXN0WzBdLnJldHVybl9sZW5ndGggPSAwOwogICAgaXRlbWxpc3RbMV0ubGVuZ3RoID0gMDsgLy8gRmluIGRlIGxhIGxpc3RhCgogICAgc3RhdHVzID0gU1lTJEdFVEpQSVcoMCwgJnBpZCwgMCwgaXRlbWxpc3QsIDAsIDAsIDApOwoKICAgIGlmIChzdGF0dXMgPT0gU1MkX05PUk1BTCkgewogICAgICAgIHByaW50ZigiSUQgZGVsIFByb2Nlc286ICVsdVxuIiwgdmFsdWUpOwogICAgfSBlbHNlIHsKICAgICAgICBwcmludGYoIkVycm9yOiAlbHVcbiIsIHN0YXR1cyk7CiAgICB9CgogICAgcmV0dXJuIDA7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;descrip.h&gt;
#include &lt;jpidef.h&gt;
#include &lt;ssdef.h&gt;
#include &lt;starlet.h&gt;

int main() {
    unsigned long status;
    unsigned long pid = 0; // 0 significa proceso actual
    unsigned long item = JPI$_PID; // C&oacute;digo de &iacute;tem para ID de proceso
    unsigned long value;
    struct _generic_64 itemlist[2];

    itemlist[0].length = sizeof(value);
    itemlist[0].code = item;
    itemlist[0].buffer = &amp;value;
    itemlist[0].return_length = 0;
    itemlist[1].length = 0; // Fin de la lista

    status = SYS$GETJPIW(0, &amp;pid, 0, itemlist, 0, 0, 0);

    if (status == SS$_NORMAL) {
        printf(&quot;ID del Proceso: %lu\n&quot;, value);
    } else {
        printf(&quot;Error: %lu\n&quot;, status);
    }

    return 0;
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>Encabezados</strong>: Incluir encabezados necesarios para descriptores, definiciones de servicios del sistema y códigos de estado.</li>
<li><strong>PID</strong>: ID del proceso, donde <code>0</code> indica el proceso actual.</li>
<li><strong>Código de Ítem</strong>: Especifica qué información recuperar, en este caso, el ID del proceso.</li>
<li><strong>Lista de Ítems</strong>: Una matriz de estructuras que describen los ítems a recuperar.</li>
<li><strong>SYS$GETJPIW</strong>: La llamada al servicio del sistema, donde <code>W</code> indica que espera la finalización.</li>
</ul>
</div><h1>Servicios Avanzados del Sistema</h1>
<h2>Control de Procesos</h2>
<div class='content'><p>El uso avanzado de los servicios del sistema incluye el control de procesos, como crear, suspender o terminar procesos.</p>
</div><h2>Ejemplo: SYS$CREPRC</h2>
<div class='content'><p>El servicio del sistema <code>SYS$CREPRC</code> crea un nuevo proceso. Aquí hay un ejemplo:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxkZXNjcmlwLmg+CiNpbmNsdWRlIDxwcmNkZWYuaD4KI2luY2x1ZGUgPHNzZGVmLmg+CiNpbmNsdWRlIDxzdGFybGV0Lmg+CgppbnQgbWFpbigpIHsKICAgIHVuc2lnbmVkIGxvbmcgc3RhdHVzOwogICAgc3RydWN0IGRzYyRkZXNjcmlwdG9yX3MgaW1hZ2UgPSB7MH07CiAgICBzdHJ1Y3QgZHNjJGRlc2NyaXB0b3JfcyBuYW1lID0gezB9OwogICAgdW5zaWduZWQgbG9uZyBwaWQ7CgogICAgaW1hZ2UuZHNjJHdfbGVuZ3RoID0gc3RybGVuKCJTWVMkU1lTVEVNOkxPR0lOT1VULkVYRSIpOwogICAgaW1hZ2UuZHNjJGFfcG9pbnRlciA9ICJTWVMkU1lTVEVNOkxPR0lOT1VULkVYRSI7CiAgICBpbWFnZS5kc2MkYl9kdHlwZSA9IERTQyRLX0RUWVBFX1Q7CiAgICBpbWFnZS5kc2MkYl9jbGFzcyA9IERTQyRLX0NMQVNTX1M7CgogICAgc3RhdHVzID0gU1lTJENSRVBSQygmcGlkLCAmbmFtZSwgJmltYWdlLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwKTsKCiAgICBpZiAoc3RhdHVzID09IFNTJF9OT1JNQUwpIHsKICAgICAgICBwcmludGYoIlByb2Nlc28gY3JlYWRvIGNvbiBQSUQ6ICVsdVxuIiwgcGlkKTsKICAgIH0gZWxzZSB7CiAgICAgICAgcHJpbnRmKCJFcnJvcjogJWx1XG4iLCBzdGF0dXMpOwogICAgfQoKICAgIHJldHVybiAwOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;descrip.h&gt;
#include &lt;prcdef.h&gt;
#include &lt;ssdef.h&gt;
#include &lt;starlet.h&gt;

int main() {
    unsigned long status;
    struct dsc$descriptor_s image = {0};
    struct dsc$descriptor_s name = {0};
    unsigned long pid;

    image.dsc$w_length = strlen(&quot;SYS$SYSTEM:LOGINOUT.EXE&quot;);
    image.dsc$a_pointer = &quot;SYS$SYSTEM:LOGINOUT.EXE&quot;;
    image.dsc$b_dtype = DSC$K_DTYPE_T;
    image.dsc$b_class = DSC$K_CLASS_S;

    status = SYS$CREPRC(&amp;pid, &amp;name, &amp;image, 0, 0, 0, 0, 0, 0, 0, 0);

    if (status == SS$_NORMAL) {
        printf(&quot;Proceso creado con PID: %lu\n&quot;, pid);
    } else {
        printf(&quot;Error: %lu\n&quot;, status);
    }

    return 0;
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>Descriptor de Imagen</strong>: Describe la imagen ejecutable a ejecutar.</li>
<li><strong>Descriptor de Nombre</strong>: Describe el nombre del proceso (opcional).</li>
<li><strong>SYS$CREPRC</strong>: La llamada al servicio del sistema para crear un nuevo proceso.</li>
</ul>
</div><h1>Manejo de Errores</h1>
<h2>Códigos de Estado</h2>
<div class='content'><p>Los servicios del sistema devuelven códigos de estado que deben ser verificados para asegurar que la operación fue exitosa. Los códigos de estado comunes incluyen:</p>
<ul>
<li><code>SS$_NORMAL</code>: Operación completada con éxito.</li>
<li><code>SS$_BADPARAM</code>: Parámetro inválido.</li>
<li><code>SS$_NOPRIV</code>: Privilegios insuficientes.</li>
</ul>
</div><h2>Ejemplo: Verificación de Códigos de Estado</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aWYgKHN0YXR1cyAhPSBTUyRfTk9STUFMKSB7CiAgICBwcmludGYoIkVycm9yOiAlbHVcbiIsIHN0YXR1cyk7CiAgICAvLyBNYW5lamFyIGVsIGVycm9yIGFwcm9waWFkYW1lbnRlCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>if (status != SS$_NORMAL) {
    printf(&quot;Error: %lu\n&quot;, status);
    // Manejar el error apropiadamente
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>La interfaz con los servicios del sistema en OpenVMS permite a los desarrolladores realizar una amplia gama de operaciones de bajo nivel esenciales para la programación del sistema. Entender cómo llamar a estos servicios, manejar descriptores y verificar códigos de estado es fundamental para un desarrollo efectivo en OpenVMS. Al dominar estos conceptos, los desarrolladores pueden aprovechar todo el poder del sistema operativo OpenVMS.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-dcl-scripting-techniques'>&#x25C4;Técnicas Avanzadas de Scripting en DCL</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Interfaz con Servicios del Sistema</a>
	</div>
	<div class='col-4 text-end'>
					<a href='using-lexical-functions'>Uso de Funciones Léxicas &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
