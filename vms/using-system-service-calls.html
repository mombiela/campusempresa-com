<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uso de Llamadas a Servicios del Sistema</title>

    <link rel="alternate" href="https://campusempresa.com/vms/using-system-service-calls" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/vms/using-system-service-calls" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/vms/using-system-service-calls" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/vms/using-system-service-calls" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/vms/using-system-service-calls" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-openvms-system-services'>&#x25C4;Introducción a los Servicios del Sistema OpenVMS</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Uso de Llamadas a Servicios del Sistema</a>
	</div>
	<div class='col-4 text-end'>
					<a href='interprocess-communication'>Comunicación entre Procesos &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a las Llamadas a Servicios del Sistema</h1>
<div class='content'><p>Las llamadas a servicios del sistema son fundamentales para interactuar con el sistema operativo OpenVMS. Proporcionan una forma para que los programas soliciten servicios del sistema operativo, como operaciones de archivos, control de procesos y comunicación entre procesos.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Llamada a Servicio del Sistema</strong>: Una función proporcionada por el sistema operativo que puede ser invocada por programas de usuario.</li>
<li><strong>Convención de Llamada</strong>: El método por el cual se llaman los servicios del sistema, incluyendo cómo se pasan los parámetros y cómo se devuelven los resultados.</li>
<li><strong>Códigos de Estado</strong>: Códigos devueltos por los servicios del sistema para indicar éxito o fracaso.</li>
</ul>
</div><h1>Llamadas Básicas a Servicios del Sistema</h1>
<div class='content'><p>Los programadores principiantes deben comenzar entendiendo cómo hacer llamadas básicas a servicios del sistema y manejar sus respuestas.</p>
</div><h2>Ejemplo: Mostrando un Mensaje</h2>
<div class='content'><p>El siguiente ejemplo demuestra cómo usar el servicio del sistema <code>SYS$PUTMSG</code> para mostrar un mensaje.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGRlc2NyaXAuaD4KI2luY2x1ZGUgPHNzZGVmLmg+CiNpbmNsdWRlIDxzdHNkZWYuaD4KI2luY2x1ZGUgPHN0YXJsZXQuaD4KCmludCBtYWluKCkgewogICAgLy8gRGVmaW5pciBlbCBtZW5zYWplIGEgbW9zdHJhcgogICAgY2hhciBtZXNzYWdlW10gPSAiwqFIb2xhLCBPcGVuVk1TISI7CiAgICAKICAgIC8vIENyZWFyIHVuIGRlc2NyaXB0b3IgcGFyYSBlbCBtZW5zYWplCiAgICBzdHJ1Y3QgZHNjJGRlc2NyaXB0b3JfcyBtc2dfZGVzYzsKICAgIG1zZ19kZXNjLmRzYyR3X2xlbmd0aCA9IHNpemVvZihtZXNzYWdlKSAtIDE7CiAgICBtc2dfZGVzYy5kc2MkYV9wb2ludGVyID0gbWVzc2FnZTsKICAgIG1zZ19kZXNjLmRzYyRiX2R0eXBlID0gRFNDJEtfRFRZUEVfVDsKICAgIG1zZ19kZXNjLmRzYyRiX2NsYXNzID0gRFNDJEtfQ0xBU1NfUzsKCiAgICAvLyBMbGFtYXIgYWwgc2VydmljaW8gZGVsIHNpc3RlbWEgU1lTJFBVVE1TRwogICAgdW5zaWduZWQgbG9uZyBzdGF0dXMgPSBTWVMkUFVUTVNHKCZtc2dfZGVzYyk7CgogICAgLy8gVmVyaWZpY2FyIGVsIGPDs2RpZ28gZGUgZXN0YWRvCiAgICBpZiAoISRWTVNfU1RBVFVTX1NVQ0NFU1Moc3RhdHVzKSkgewogICAgICAgIC8vIE1hbmVqYXIgZXJyb3IKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICByZXR1cm4gMDsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;descrip.h&gt;
#include &lt;ssdef.h&gt;
#include &lt;stsdef.h&gt;
#include &lt;starlet.h&gt;

int main() {
    // Definir el mensaje a mostrar
    char message[] = &quot;&iexcl;Hola, OpenVMS!&quot;;
    
    // Crear un descriptor para el mensaje
    struct dsc$descriptor_s msg_desc;
    msg_desc.dsc$w_length = sizeof(message) - 1;
    msg_desc.dsc$a_pointer = message;
    msg_desc.dsc$b_dtype = DSC$K_DTYPE_T;
    msg_desc.dsc$b_class = DSC$K_CLASS_S;

    // Llamar al servicio del sistema SYS$PUTMSG
    unsigned long status = SYS$PUTMSG(&amp;msg_desc);

    // Verificar el c&oacute;digo de estado
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Manejar error
        return 1;
    }

    return 0;
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>Descriptor</strong>: Una estructura que describe el mensaje a mostrar.</li>
<li><strong>SYS$PUTMSG</strong>: La llamada al servicio del sistema utilizada para mostrar el mensaje.</li>
<li><strong>Verificación de Estado</strong>: Verifica si la llamada fue exitosa.</li>
</ul>
</div><h1>Llamadas Intermedias a Servicios del Sistema</h1>
<div class='content'><p>A nivel intermedio, los programadores deben aprender a realizar operaciones más complejas, como manejo de archivos y control de procesos.</p>
</div><h2>Ejemplo: Creando y Escribiendo en un Archivo</h2>
<div class='content'><p>El siguiente ejemplo demuestra cómo crear un archivo y escribir datos en él usando servicios del sistema.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGRlc2NyaXAuaD4KI2luY2x1ZGUgPHJtcy5oPgojaW5jbHVkZSA8c3NkZWYuaD4KI2luY2x1ZGUgPHN0YXJsZXQuaD4KCmludCBtYWluKCkgewogICAgLy8gRGVmaW5pciBlbCBub21icmUgZGVsIGFyY2hpdm8geSBlbCBjb250ZW5pZG8KICAgIGNoYXIgZmlsZW5hbWVbXSA9ICJURVNULkRBVCI7CiAgICBjaGFyIGNvbnRlbnRbXSA9ICJFc3RlIGVzIHVuIGFyY2hpdm8gZGUgcHJ1ZWJhLiI7CgogICAgLy8gQ3JlYXIgdW4gZGVzY3JpcHRvciBwYXJhIGVsIG5vbWJyZSBkZWwgYXJjaGl2bwogICAgc3RydWN0IGRzYyRkZXNjcmlwdG9yX3MgZmlsZV9kZXNjOwogICAgZmlsZV9kZXNjLmRzYyR3X2xlbmd0aCA9IHNpemVvZihmaWxlbmFtZSkgLSAxOwogICAgZmlsZV9kZXNjLmRzYyRhX3BvaW50ZXIgPSBmaWxlbmFtZTsKICAgIGZpbGVfZGVzYy5kc2MkYl9kdHlwZSA9IERTQyRLX0RUWVBFX1Q7CiAgICBmaWxlX2Rlc2MuZHNjJGJfY2xhc3MgPSBEU0MkS19DTEFTU19TOwoKICAgIC8vIENyZWFyIHVuIGJsb3F1ZSBkZSBhY2Nlc28gYWwgYXJjaGl2byAoRkFCKQogICAgc3RydWN0IEZBQiBmYWIgPSBjYyRybXNfZmFiOwogICAgZmFiLmZhYiRsX2ZuYSA9IGZpbGVfZGVzYy5kc2MkYV9wb2ludGVyOwogICAgZmFiLmZhYiRiX2ZucyA9IGZpbGVfZGVzYy5kc2Mkd19sZW5ndGg7CiAgICBmYWIuZmFiJGJfZmFjID0gRkFCJE1fUFVUOwogICAgZmFiLmZhYiRiX29yZyA9IEZBQiRDX1NFUTsKICAgIGZhYi5mYWIkYl9yZm0gPSBGQUIkQ19WQVI7CgogICAgLy8gQ3JlYXIgdW4gYmxvcXVlIGRlIGFjY2VzbyBhIHJlZ2lzdHJvcyAoUkFCKQogICAgc3RydWN0IFJBQiByYWIgPSBjYyRybXNfcmFiOwogICAgcmFiLnJhYiRsX2ZhYiA9ICZmYWI7CgogICAgLy8gQ3JlYXIgZWwgYXJjaGl2bwogICAgdW5zaWduZWQgbG9uZyBzdGF0dXMgPSBTWVMkQ1JFQVRFKCZmYWIpOwogICAgaWYgKCEkVk1TX1NUQVRVU19TVUNDRVNTKHN0YXR1cykpIHsKICAgICAgICAvLyBNYW5lamFyIGVycm9yCiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgLy8gRXNjcmliaXIgZW4gZWwgYXJjaGl2bwogICAgcmFiLnJhYiRsX3JiZiA9IGNvbnRlbnQ7CiAgICByYWIucmFiJHdfcnN6ID0gc2l6ZW9mKGNvbnRlbnQpIC0gMTsKICAgIHN0YXR1cyA9IFNZUyRQVVQoJnJhYik7CiAgICBpZiAoISRWTVNfU1RBVFVTX1NVQ0NFU1Moc3RhdHVzKSkgewogICAgICAgIC8vIE1hbmVqYXIgZXJyb3IKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICAvLyBDZXJyYXIgZWwgYXJjaGl2bwogICAgc3RhdHVzID0gU1lTJENMT1NFKCZmYWIpOwogICAgaWYgKCEkVk1TX1NUQVRVU19TVUNDRVNTKHN0YXR1cykpIHsKICAgICAgICAvLyBNYW5lamFyIGVycm9yCiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgcmV0dXJuIDA7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;descrip.h&gt;
#include &lt;rms.h&gt;
#include &lt;ssdef.h&gt;
#include &lt;starlet.h&gt;

int main() {
    // Definir el nombre del archivo y el contenido
    char filename[] = &quot;TEST.DAT&quot;;
    char content[] = &quot;Este es un archivo de prueba.&quot;;

    // Crear un descriptor para el nombre del archivo
    struct dsc$descriptor_s file_desc;
    file_desc.dsc$w_length = sizeof(filename) - 1;
    file_desc.dsc$a_pointer = filename;
    file_desc.dsc$b_dtype = DSC$K_DTYPE_T;
    file_desc.dsc$b_class = DSC$K_CLASS_S;

    // Crear un bloque de acceso al archivo (FAB)
    struct FAB fab = cc$rms_fab;
    fab.fab$l_fna = file_desc.dsc$a_pointer;
    fab.fab$b_fns = file_desc.dsc$w_length;
    fab.fab$b_fac = FAB$M_PUT;
    fab.fab$b_org = FAB$C_SEQ;
    fab.fab$b_rfm = FAB$C_VAR;

    // Crear un bloque de acceso a registros (RAB)
    struct RAB rab = cc$rms_rab;
    rab.rab$l_fab = &amp;fab;

    // Crear el archivo
    unsigned long status = SYS$CREATE(&amp;fab);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Manejar error
        return 1;
    }

    // Escribir en el archivo
    rab.rab$l_rbf = content;
    rab.rab$w_rsz = sizeof(content) - 1;
    status = SYS$PUT(&amp;rab);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Manejar error
        return 1;
    }

    // Cerrar el archivo
    status = SYS$CLOSE(&amp;fab);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Manejar error
        return 1;
    }

    return 0;
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>FAB (Bloque de Acceso al Archivo)</strong>: Define los atributos del archivo.</li>
<li><strong>RAB (Bloque de Acceso a Registros)</strong>: Define los atributos del registro.</li>
<li><strong>SYS$CREATE</strong>: Crea el archivo.</li>
<li><strong>SYS$PUT</strong>: Escribe datos en el archivo.</li>
<li><strong>SYS$CLOSE</strong>: Cierra el archivo.</li>
</ul>
</div><h1>Llamadas Avanzadas a Servicios del Sistema</h1>
<div class='content'><p>Los programadores avanzados deben ser capaces de manejar tareas complejas como la comunicación entre procesos y el control avanzado de procesos.</p>
</div><h2>Ejemplo: Comunicación entre Procesos Usando Buzones</h2>
<div class='content'><p>El siguiente ejemplo demuestra cómo usar buzones para la comunicación entre procesos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGRlc2NyaXAuaD4KI2luY2x1ZGUgPHNzZGVmLmg+CiNpbmNsdWRlIDxzdGFybGV0Lmg+CiNpbmNsdWRlIDxpb2RlZi5oPgoKaW50IG1haW4oKSB7CiAgICAvLyBEZWZpbmlyIGVsIG5vbWJyZSBkZWwgYnV6w7NuCiAgICBjaGFyIG1haWxib3hfbmFtZVtdID0gIk1CWDEiOwoKICAgIC8vIENyZWFyIHVuIGRlc2NyaXB0b3IgcGFyYSBlbCBub21icmUgZGVsIGJ1esOzbgogICAgc3RydWN0IGRzYyRkZXNjcmlwdG9yX3MgbWJ4X2Rlc2M7CiAgICBtYnhfZGVzYy5kc2Mkd19sZW5ndGggPSBzaXplb2YobWFpbGJveF9uYW1lKSAtIDE7CiAgICBtYnhfZGVzYy5kc2MkYV9wb2ludGVyID0gbWFpbGJveF9uYW1lOwogICAgbWJ4X2Rlc2MuZHNjJGJfZHR5cGUgPSBEU0MkS19EVFlQRV9UOwogICAgbWJ4X2Rlc2MuZHNjJGJfY2xhc3MgPSBEU0MkS19DTEFTU19TOwoKICAgIC8vIENyZWFyIGVsIGJ1esOzbgogICAgdW5zaWduZWQgc2hvcnQgbWJ4X2NoYW47CiAgICB1bnNpZ25lZCBsb25nIHN0YXR1cyA9IFNZUyRDUkVNQlgoMCwgJm1ieF9jaGFuLCAwLCAwLCAwLCAwLCAmbWJ4X2Rlc2MpOwogICAgaWYgKCEkVk1TX1NUQVRVU19TVUNDRVNTKHN0YXR1cykpIHsKICAgICAgICAvLyBNYW5lamFyIGVycm9yCiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgLy8gRXNjcmliaXIgdW4gbWVuc2FqZSBlbiBlbCBidXrDs24KICAgIGNoYXIgbWVzc2FnZVtdID0gIsKhSG9sYSBkZXNkZSBlbCBwcm9jZXNvISI7CiAgICBzdGF0dXMgPSBTWVMkUUlPVygwLCBtYnhfY2hhbiwgSU8kX1dSSVRFVkJMSywgMCwgMCwgMCwgbWVzc2FnZSwgc2l6ZW9mKG1lc3NhZ2UpIC0gMSwgMCwgMCwgMCwgMCk7CiAgICBpZiAoISRWTVNfU1RBVFVTX1NVQ0NFU1Moc3RhdHVzKSkgewogICAgICAgIC8vIE1hbmVqYXIgZXJyb3IKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICAvLyBDZXJyYXIgZWwgYnV6w7NuCiAgICBzdGF0dXMgPSBTWVMkREFTU0dOKG1ieF9jaGFuKTsKICAgIGlmICghJFZNU19TVEFUVVNfU1VDQ0VTUyhzdGF0dXMpKSB7CiAgICAgICAgLy8gTWFuZWphciBlcnJvcgogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIHJldHVybiAwOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;descrip.h&gt;
#include &lt;ssdef.h&gt;
#include &lt;starlet.h&gt;
#include &lt;iodef.h&gt;

int main() {
    // Definir el nombre del buz&oacute;n
    char mailbox_name[] = &quot;MBX1&quot;;

    // Crear un descriptor para el nombre del buz&oacute;n
    struct dsc$descriptor_s mbx_desc;
    mbx_desc.dsc$w_length = sizeof(mailbox_name) - 1;
    mbx_desc.dsc$a_pointer = mailbox_name;
    mbx_desc.dsc$b_dtype = DSC$K_DTYPE_T;
    mbx_desc.dsc$b_class = DSC$K_CLASS_S;

    // Crear el buz&oacute;n
    unsigned short mbx_chan;
    unsigned long status = SYS$CREMBX(0, &amp;mbx_chan, 0, 0, 0, 0, &amp;mbx_desc);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Manejar error
        return 1;
    }

    // Escribir un mensaje en el buz&oacute;n
    char message[] = &quot;&iexcl;Hola desde el proceso!&quot;;
    status = SYS$QIOW(0, mbx_chan, IO$_WRITEVBLK, 0, 0, 0, message, sizeof(message) - 1, 0, 0, 0, 0);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Manejar error
        return 1;
    }

    // Cerrar el buz&oacute;n
    status = SYS$DASSGN(mbx_chan);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Manejar error
        return 1;
    }

    return 0;
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>SYS$CREMBX</strong>: Crea un buzón.</li>
<li><strong>SYS$QIOW</strong>: Realiza operaciones de E/S en el buzón.</li>
<li><strong>SYS$DASSGN</strong>: Desasigna el canal del buzón.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Entender y usar las llamadas a servicios del sistema en OpenVMS es crucial para una programación de sistemas efectiva. Comenzar con llamadas básicas y progresar a operaciones más complejas permite a los programadores aprovechar al máximo el sistema operativo OpenVMS. Al dominar estos conceptos, puedes desarrollar aplicaciones robustas y eficientes que aprovechen las capacidades de OpenVMS.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-openvms-system-services'>&#x25C4;Introducción a los Servicios del Sistema OpenVMS</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Uso de Llamadas a Servicios del Sistema</a>
	</div>
	<div class='col-4 text-end'>
					<a href='interprocess-communication'>Comunicación entre Procesos &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
