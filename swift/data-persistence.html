<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Persistencia de Datos en Swift</title>

    <link rel="alternate" href="https://campusempresa.com/swift/data-persistence" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/swift/data-persistence" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/swift/data-persistence" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/swift/data-persistence" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/swift/data-persistence" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='networking-and-api-integration'>&#x25C4;Redes e Integración de API</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Persistencia de Datos en Swift</a>
	</div>
	<div class='col-4 text-end'>
					<a href='advanced-ui-techniques'>Técnicas Avanzadas de UI &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La persistencia de datos es un concepto crucial en el desarrollo de software, que permite a las aplicaciones guardar y recuperar datos entre sesiones. En Swift, hay varias formas de lograr la persistencia de datos, que van desde métodos simples hasta complejos. Este tema cubrirá desde las técnicas básicas hasta las avanzadas para la persistencia de datos en Swift.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>UserDefaults</strong>: Una forma simple de almacenar pequeñas piezas de datos.</li>
<li><strong>Sistema de Archivos</strong>: Almacenamiento de datos en archivos dentro del sandbox de la aplicación.</li>
<li><strong>Core Data</strong>: Un poderoso framework para gestionar gráficos de objetos y la persistencia de datos.</li>
<li><strong>SQLite</strong>: Un motor de base de datos ligero que se puede usar directamente.</li>
<li><strong>Keychain</strong>: Almacenamiento seguro para información sensible.</li>
</ul>
</div><h1>UserDefaults</h1>
<div class='content'><p>UserDefaults es una forma simple y eficiente de almacenar pequeñas cantidades de datos, como preferencias o configuraciones del usuario.</p>
</div><h2>Ejemplo</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gR3VhcmRhciBkYXRvcyBlbiBVc2VyRGVmYXVsdHMKbGV0IGRlZmF1bHRzID0gVXNlckRlZmF1bHRzLnN0YW5kYXJkCmRlZmF1bHRzLnNldCgiSm9obiBEb2UiLCBmb3JLZXk6ICJ1c2VybmFtZSIpCmRlZmF1bHRzLnNldCgyNSwgZm9yS2V5OiAiYWdlIikKCi8vIFJlY3VwZXJhciBkYXRvcyBkZSBVc2VyRGVmYXVsdHMKaWYgbGV0IHVzZXJuYW1lID0gZGVmYXVsdHMuc3RyaW5nKGZvcktleTogInVzZXJuYW1lIikgewogICAgcHJpbnQoIlVzZXJuYW1lOiBcKHVzZXJuYW1lKSIpCn0KbGV0IGFnZSA9IGRlZmF1bHRzLmludGVnZXIoZm9yS2V5OiAiYWdlIikKcHJpbnQoIkFnZTogXChhZ2UpIik="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Guardar datos en UserDefaults
let defaults = UserDefaults.standard
defaults.set(&quot;John Doe&quot;, forKey: &quot;username&quot;)
defaults.set(25, forKey: &quot;age&quot;)

// Recuperar datos de UserDefaults
if let username = defaults.string(forKey: &quot;username&quot;) {
    print(&quot;Username: \(username)&quot;)
}
let age = defaults.integer(forKey: &quot;age&quot;)
print(&quot;Age: \(age)&quot;)</pre></div><div class='content'></div><h1>Sistema de Archivos</h1>
<div class='content'><p>Almacenar datos en archivos es útil para conjuntos de datos más grandes o cuando necesitas gestionar archivos directamente.</p>
</div><h2>Ejemplo</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gT2J0ZW5lciBsYSBydXRhIGFsIGRpcmVjdG9yaW8gZGUgRG9jdW1lbnRvcwpsZXQgZmlsZU1hbmFnZXIgPSBGaWxlTWFuYWdlci5kZWZhdWx0CmxldCB1cmxzID0gZmlsZU1hbmFnZXIudXJscyhmb3I6IC5kb2N1bWVudERpcmVjdG9yeSwgaW46IC51c2VyRG9tYWluTWFzaykKaWYgbGV0IGRvY3VtZW50RGlyZWN0b3J5ID0gdXJscy5maXJzdCB7CiAgICBsZXQgZmlsZVVSTCA9IGRvY3VtZW50RGlyZWN0b3J5LmFwcGVuZGluZ1BhdGhDb21wb25lbnQoImV4YW1wbGUudHh0IikKICAgIAogICAgLy8gRXNjcmliaXIgZW4gdW4gYXJjaGl2bwogICAgbGV0IHRleHQgPSAiSGVsbG8sIFdvcmxkISIKICAgIGRvIHsKICAgICAgICB0cnkgdGV4dC53cml0ZSh0bzogZmlsZVVSTCwgYXRvbWljYWxseTogdHJ1ZSwgZW5jb2Rpbmc6IC51dGY4KQogICAgfSBjYXRjaCB7CiAgICAgICAgcHJpbnQoIkZhaWxlZCB0byB3cml0ZSB0byBmaWxlOiBcKGVycm9yKSIpCiAgICB9CiAgICAKICAgIC8vIExlZXIgZGUgdW4gYXJjaGl2bwogICAgZG8gewogICAgICAgIGxldCBzYXZlZFRleHQgPSB0cnkgU3RyaW5nKGNvbnRlbnRzT2Y6IGZpbGVVUkwsIGVuY29kaW5nOiAudXRmOCkKICAgICAgICBwcmludCgiU2F2ZWQgdGV4dDogXChzYXZlZFRleHQpIikKICAgIH0gY2F0Y2ggewogICAgICAgIHByaW50KCJGYWlsZWQgdG8gcmVhZCBmcm9tIGZpbGU6IFwoZXJyb3IpIikKICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Obtener la ruta al directorio de Documentos
let fileManager = FileManager.default
let urls = fileManager.urls(for: .documentDirectory, in: .userDomainMask)
if let documentDirectory = urls.first {
    let fileURL = documentDirectory.appendingPathComponent(&quot;example.txt&quot;)
    
    // Escribir en un archivo
    let text = &quot;Hello, World!&quot;
    do {
        try text.write(to: fileURL, atomically: true, encoding: .utf8)
    } catch {
        print(&quot;Failed to write to file: \(error)&quot;)
    }
    
    // Leer de un archivo
    do {
        let savedText = try String(contentsOf: fileURL, encoding: .utf8)
        print(&quot;Saved text: \(savedText)&quot;)
    } catch {
        print(&quot;Failed to read from file: \(error)&quot;)
    }
}</pre></div><div class='content'></div><h1>Core Data</h1>
<div class='content'><p>Core Data es un poderoso framework para gestionar gráficos de objetos complejos y la persistencia de datos. Proporciona una forma orientada a objetos para interactuar con una base de datos SQLite.</p>
</div><h2>Ejemplo</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IENvcmVEYXRhCmltcG9ydCBVSUtpdAoKLy8gQ29uZmlndXJhY2nDs24gZGVsIHN0YWNrIGRlIENvcmUgRGF0YQpjbGFzcyBDb3JlRGF0YVN0YWNrIHsKICAgIHN0YXRpYyBsZXQgc2hhcmVkID0gQ29yZURhdGFTdGFjaygpCiAgICBwcml2YXRlIGluaXQoKSB7fQogICAgCiAgICBsYXp5IHZhciBwZXJzaXN0ZW50Q29udGFpbmVyOiBOU1BlcnNpc3RlbnRDb250YWluZXIgPSB7CiAgICAgICAgbGV0IGNvbnRhaW5lciA9IE5TUGVyc2lzdGVudENvbnRhaW5lcihuYW1lOiAiTW9kZWwiKQogICAgICAgIGNvbnRhaW5lci5sb2FkUGVyc2lzdGVudFN0b3JlcyB7IChzdG9yZURlc2NyaXB0aW9uLCBlcnJvcikgaW4KICAgICAgICAgICAgaWYgbGV0IGVycm9yID0gZXJyb3IgYXMgTlNFcnJvcj8gewogICAgICAgICAgICAgICAgZmF0YWxFcnJvcigiVW5yZXNvbHZlZCBlcnJvciBcKGVycm9yKSwgXChlcnJvci51c2VySW5mbykiKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiBjb250YWluZXIKICAgIH0oKQogICAgCiAgICB2YXIgY29udGV4dDogTlNNYW5hZ2VkT2JqZWN0Q29udGV4dCB7CiAgICAgICAgcmV0dXJuIHBlcnNpc3RlbnRDb250YWluZXIudmlld0NvbnRleHQKICAgIH0KfQoKLy8gR3VhcmRhciBkYXRvcwpmdW5jIHNhdmVVc2VyKG5hbWU6IFN0cmluZywgYWdlOiBJbnQxNikgewogICAgbGV0IGNvbnRleHQgPSBDb3JlRGF0YVN0YWNrLnNoYXJlZC5jb250ZXh0CiAgICBsZXQgdXNlciA9IFVzZXIoY29udGV4dDogY29udGV4dCkKICAgIHVzZXIubmFtZSA9IG5hbWUKICAgIHVzZXIuYWdlID0gYWdlCiAgICAKICAgIGRvIHsKICAgICAgICB0cnkgY29udGV4dC5zYXZlKCkKICAgIH0gY2F0Y2ggewogICAgICAgIHByaW50KCJGYWlsZWQgdG8gc2F2ZSB1c2VyOiBcKGVycm9yKSIpCiAgICB9Cn0KCi8vIFJlY3VwZXJhciBkYXRvcwpmdW5jIGZldGNoVXNlcnMoKSAtPiBbVXNlcl0gewogICAgbGV0IGNvbnRleHQgPSBDb3JlRGF0YVN0YWNrLnNoYXJlZC5jb250ZXh0CiAgICBsZXQgZmV0Y2hSZXF1ZXN0OiBOU0ZldGNoUmVxdWVzdDxVc2VyPiA9IFVzZXIuZmV0Y2hSZXF1ZXN0KCkKICAgIAogICAgZG8gewogICAgICAgIGxldCB1c2VycyA9IHRyeSBjb250ZXh0LmZldGNoKGZldGNoUmVxdWVzdCkKICAgICAgICByZXR1cm4gdXNlcnMKICAgIH0gY2F0Y2ggewogICAgICAgIHByaW50KCJGYWlsZWQgdG8gZmV0Y2ggdXNlcnM6IFwoZXJyb3IpIikKICAgICAgICByZXR1cm4gW10KICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import CoreData
import UIKit

// Configuraci&oacute;n del stack de Core Data
class CoreDataStack {
    static let shared = CoreDataStack()
    private init() {}
    
    lazy var persistentContainer: NSPersistentContainer = {
        let container = NSPersistentContainer(name: &quot;Model&quot;)
        container.loadPersistentStores { (storeDescription, error) in
            if let error = error as NSError? {
                fatalError(&quot;Unresolved error \(error), \(error.userInfo)&quot;)
            }
        }
        return container
    }()
    
    var context: NSManagedObjectContext {
        return persistentContainer.viewContext
    }
}

// Guardar datos
func saveUser(name: String, age: Int16) {
    let context = CoreDataStack.shared.context
    let user = User(context: context)
    user.name = name
    user.age = age
    
    do {
        try context.save()
    } catch {
        print(&quot;Failed to save user: \(error)&quot;)
    }
}

// Recuperar datos
func fetchUsers() -&gt; [User] {
    let context = CoreDataStack.shared.context
    let fetchRequest: NSFetchRequest&lt;User&gt; = User.fetchRequest()
    
    do {
        let users = try context.fetch(fetchRequest)
        return users
    } catch {
        print(&quot;Failed to fetch users: \(error)&quot;)
        return []
    }
}</pre></div><div class='content'></div><h1>SQLite</h1>
<div class='content'><p>SQLite es una base de datos ligera basada en disco que se puede usar directamente en Swift.</p>
</div><h2>Ejemplo</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFNRTGl0ZTMKCi8vIEFicmlyIHVuYSBjb25leGnDs24gYSBsYSBiYXNlIGRlIGRhdG9zCnZhciBkYjogT3BhcXVlUG9pbnRlcj8KaWYgc3FsaXRlM19vcGVuKCJleGFtcGxlLnNxbGl0ZSIsICZkYikgIT0gU1FMSVRFX09LIHsKICAgIHByaW50KCJGYWlsZWQgdG8gb3BlbiBkYXRhYmFzZSIpCn0KCi8vIENyZWFyIHVuYSB0YWJsYQpsZXQgY3JlYXRlVGFibGVRdWVyeSA9ICJDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBVc2VycyAoaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULCBuYW1lIFRFWFQsIGFnZSBJTlRFR0VSKSIKaWYgc3FsaXRlM19leGVjKGRiLCBjcmVhdGVUYWJsZVF1ZXJ5LCBuaWwsIG5pbCwgbmlsKSAhPSBTUUxJVEVfT0sgewogICAgcHJpbnQoIkZhaWxlZCB0byBjcmVhdGUgdGFibGUiKQp9CgovLyBJbnNlcnRhciBkYXRvcwpsZXQgaW5zZXJ0UXVlcnkgPSAiSU5TRVJUIElOVE8gVXNlcnMgKG5hbWUsIGFnZSkgVkFMVUVTICgnSm9obiBEb2UnLCAyNSkiCmlmIHNxbGl0ZTNfZXhlYyhkYiwgaW5zZXJ0UXVlcnksIG5pbCwgbmlsLCBuaWwpICE9IFNRTElURV9PSyB7CiAgICBwcmludCgiRmFpbGVkIHRvIGluc2VydCBkYXRhIikKfQoKLy8gQ29uc3VsdGFyIGRhdG9zCmxldCBzZWxlY3RRdWVyeSA9ICJTRUxFQ1QgKiBGUk9NIFVzZXJzIgp2YXIgcXVlcnlTdGF0ZW1lbnQ6IE9wYXF1ZVBvaW50ZXI/CmlmIHNxbGl0ZTNfcHJlcGFyZV92MihkYiwgc2VsZWN0UXVlcnksIC0xLCAmcXVlcnlTdGF0ZW1lbnQsIG5pbCkgPT0gU1FMSVRFX09LIHsKICAgIHdoaWxlIHNxbGl0ZTNfc3RlcChxdWVyeVN0YXRlbWVudCkgPT0gU1FMSVRFX1JPVyB7CiAgICAgICAgbGV0IGlkID0gc3FsaXRlM19jb2x1bW5faW50KHF1ZXJ5U3RhdGVtZW50LCAwKQogICAgICAgIGxldCBuYW1lID0gU3RyaW5nKGNTdHJpbmc6IHNxbGl0ZTNfY29sdW1uX3RleHQocXVlcnlTdGF0ZW1lbnQsIDEpKQogICAgICAgIGxldCBhZ2UgPSBzcWxpdGUzX2NvbHVtbl9pbnQocXVlcnlTdGF0ZW1lbnQsIDIpCiAgICAgICAgcHJpbnQoIlVzZXI6IFwoaWQpLCBOYW1lOiBcKG5hbWUpLCBBZ2U6IFwoYWdlKSIpCiAgICB9Cn0gZWxzZSB7CiAgICBwcmludCgiRmFpbGVkIHRvIHF1ZXJ5IGRhdGEiKQp9CgovLyBDZXJyYXIgbGEgY29uZXhpw7NuIGEgbGEgYmFzZSBkZSBkYXRvcwpzcWxpdGUzX2Nsb3NlKGRiKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import SQLite3

// Abrir una conexi&oacute;n a la base de datos
var db: OpaquePointer?
if sqlite3_open(&quot;example.sqlite&quot;, &amp;db) != SQLITE_OK {
    print(&quot;Failed to open database&quot;)
}

// Crear una tabla
let createTableQuery = &quot;CREATE TABLE IF NOT EXISTS Users (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT, age INTEGER)&quot;
if sqlite3_exec(db, createTableQuery, nil, nil, nil) != SQLITE_OK {
    print(&quot;Failed to create table&quot;)
}

// Insertar datos
let insertQuery = &quot;INSERT INTO Users (name, age) VALUES ('John Doe', 25)&quot;
if sqlite3_exec(db, insertQuery, nil, nil, nil) != SQLITE_OK {
    print(&quot;Failed to insert data&quot;)
}

// Consultar datos
let selectQuery = &quot;SELECT * FROM Users&quot;
var queryStatement: OpaquePointer?
if sqlite3_prepare_v2(db, selectQuery, -1, &amp;queryStatement, nil) == SQLITE_OK {
    while sqlite3_step(queryStatement) == SQLITE_ROW {
        let id = sqlite3_column_int(queryStatement, 0)
        let name = String(cString: sqlite3_column_text(queryStatement, 1))
        let age = sqlite3_column_int(queryStatement, 2)
        print(&quot;User: \(id), Name: \(name), Age: \(age)&quot;)
    }
} else {
    print(&quot;Failed to query data&quot;)
}

// Cerrar la conexi&oacute;n a la base de datos
sqlite3_close(db)</pre></div><div class='content'></div><h1>Keychain</h1>
<div class='content'><p>Keychain se utiliza para almacenar de forma segura información sensible, como contraseñas o tokens.</p>
</div><h2>Ejemplo</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFNlY3VyaXR5CgovLyBHdWFyZGFyIGRhdG9zIGVuIEtleWNoYWluCmZ1bmMgc2F2ZVRvS2V5Y2hhaW4oYWNjb3VudDogU3RyaW5nLCBzZXJ2aWNlOiBTdHJpbmcsIGRhdGE6IERhdGEpIC0+IEJvb2wgewogICAgbGV0IHF1ZXJ5OiBbU3RyaW5nOiBBbnldID0gWwogICAgICAgIGtTZWNDbGFzcyBhcyBTdHJpbmc6IGtTZWNDbGFzc0dlbmVyaWNQYXNzd29yZCwKICAgICAgICBrU2VjQXR0ckFjY291bnQgYXMgU3RyaW5nOiBhY2NvdW50LAogICAgICAgIGtTZWNBdHRyU2VydmljZSBhcyBTdHJpbmc6IHNlcnZpY2UsCiAgICAgICAga1NlY1ZhbHVlRGF0YSBhcyBTdHJpbmc6IGRhdGEKICAgIF0KICAgIFNlY0l0ZW1EZWxldGUocXVlcnkgYXMgQ0ZEaWN0aW9uYXJ5KQogICAgbGV0IHN0YXR1cyA9IFNlY0l0ZW1BZGQocXVlcnkgYXMgQ0ZEaWN0aW9uYXJ5LCBuaWwpCiAgICByZXR1cm4gc3RhdHVzID09IGVyclNlY1N1Y2Nlc3MKfQoKLy8gUmVjdXBlcmFyIGRhdG9zIGRlIEtleWNoYWluCmZ1bmMgcmV0cmlldmVGcm9tS2V5Y2hhaW4oYWNjb3VudDogU3RyaW5nLCBzZXJ2aWNlOiBTdHJpbmcpIC0+IERhdGE/IHsKICAgIGxldCBxdWVyeTogW1N0cmluZzogQW55XSA9IFsKICAgICAgICBrU2VjQ2xhc3MgYXMgU3RyaW5nOiBrU2VjQ2xhc3NHZW5lcmljUGFzc3dvcmQsCiAgICAgICAga1NlY0F0dHJBY2NvdW50IGFzIFN0cmluZzogYWNjb3VudCwKICAgICAgICBrU2VjQXR0clNlcnZpY2UgYXMgU3RyaW5nOiBzZXJ2aWNlLAogICAgICAgIGtTZWNSZXR1cm5EYXRhIGFzIFN0cmluZzogdHJ1ZSwKICAgICAgICBrU2VjTWF0Y2hMaW1pdCBhcyBTdHJpbmc6IGtTZWNNYXRjaExpbWl0T25lCiAgICBdCiAgICB2YXIgZGF0YVR5cGVSZWY6IEFueU9iamVjdD8KICAgIGxldCBzdGF0dXMgPSBTZWNJdGVtQ29weU1hdGNoaW5nKHF1ZXJ5IGFzIENGRGljdGlvbmFyeSwgJmRhdGFUeXBlUmVmKQogICAgaWYgc3RhdHVzID09IGVyclNlY1N1Y2Nlc3MgewogICAgICAgIHJldHVybiBkYXRhVHlwZVJlZiBhcz8gRGF0YQogICAgfQogICAgcmV0dXJuIG5pbAp9CgovLyBFamVtcGxvIGRlIHVzbwpsZXQgYWNjb3VudCA9ICJ1c2VyQGV4YW1wbGUuY29tIgpsZXQgc2VydmljZSA9ICJjb20uZXhhbXBsZS5teWFwcCIKbGV0IHBhc3N3b3JkRGF0YSA9ICJwYXNzd29yZDEyMyIuZGF0YSh1c2luZzogLnV0ZjgpIQoKaWYgc2F2ZVRvS2V5Y2hhaW4oYWNjb3VudDogYWNjb3VudCwgc2VydmljZTogc2VydmljZSwgZGF0YTogcGFzc3dvcmREYXRhKSB7CiAgICBwcmludCgiUGFzc3dvcmQgc2F2ZWQgdG8gS2V5Y2hhaW4iKQp9CgppZiBsZXQgcmV0cmlldmVkRGF0YSA9IHJldHJpZXZlRnJvbUtleWNoYWluKGFjY291bnQ6IGFjY291bnQsIHNlcnZpY2U6IHNlcnZpY2UpLAogICBsZXQgcGFzc3dvcmQgPSBTdHJpbmcoZGF0YTogcmV0cmlldmVkRGF0YSwgZW5jb2Rpbmc6IC51dGY4KSB7CiAgICBwcmludCgiUmV0cmlldmVkIHBhc3N3b3JkOiBcKHBhc3N3b3JkKSIpCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import Security

// Guardar datos en Keychain
func saveToKeychain(account: String, service: String, data: Data) -&gt; Bool {
    let query: [String: Any] = [
        kSecClass as String: kSecClassGenericPassword,
        kSecAttrAccount as String: account,
        kSecAttrService as String: service,
        kSecValueData as String: data
    ]
    SecItemDelete(query as CFDictionary)
    let status = SecItemAdd(query as CFDictionary, nil)
    return status == errSecSuccess
}

// Recuperar datos de Keychain
func retrieveFromKeychain(account: String, service: String) -&gt; Data? {
    let query: [String: Any] = [
        kSecClass as String: kSecClassGenericPassword,
        kSecAttrAccount as String: account,
        kSecAttrService as String: service,
        kSecReturnData as String: true,
        kSecMatchLimit as String: kSecMatchLimitOne
    ]
    var dataTypeRef: AnyObject?
    let status = SecItemCopyMatching(query as CFDictionary, &amp;dataTypeRef)
    if status == errSecSuccess {
        return dataTypeRef as? Data
    }
    return nil
}

// Ejemplo de uso
let account = &quot;user@example.com&quot;
let service = &quot;com.example.myapp&quot;
let passwordData = &quot;password123&quot;.data(using: .utf8)!

if saveToKeychain(account: account, service: service, data: passwordData) {
    print(&quot;Password saved to Keychain&quot;)
}

if let retrievedData = retrieveFromKeychain(account: account, service: service),
   let password = String(data: retrievedData, encoding: .utf8) {
    print(&quot;Retrieved password: \(password)&quot;)
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>La persistencia de datos es un aspecto fundamental del desarrollo de aplicaciones, permitiendo que las aplicaciones retengan datos entre sesiones. Swift proporciona múltiples métodos para la persistencia de datos, cada uno adecuado para diferentes casos de uso:</p>
<ul>
<li><strong>UserDefaults</strong> para almacenamiento simple de clave-valor.</li>
<li><strong>Sistema de Archivos</strong> para la gestión directa de archivos.</li>
<li><strong>Core Data</strong> para modelos de datos complejos y gráficos de objetos.</li>
<li><strong>SQLite</strong> para necesidades de bases de datos ligeras.</li>
<li><strong>Keychain</strong> para almacenamiento seguro de información sensible.</li>
</ul>
<p>Al comprender y utilizar estos métodos, puedes asegurarte de que tus aplicaciones en Swift manejen los datos de manera eficiente y segura.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='networking-and-api-integration'>&#x25C4;Redes e Integración de API</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Persistencia de Datos en Swift</a>
	</div>
	<div class='col-4 text-end'>
					<a href='advanced-ui-techniques'>Técnicas Avanzadas de UI &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
