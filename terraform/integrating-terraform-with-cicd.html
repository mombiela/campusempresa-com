<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrando Terraform con CI/CD</title>

    <link rel="alternate" href="https://campusempresa.com/terraform/integrating-terraform-with-cicd" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/terraform/integrating-terraform-with-cicd" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/terraform/integrating-terraform-with-cicd" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/terraform/integrating-terraform-with-cicd" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/terraform/integrating-terraform-with-cicd" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='managing-aws-infrastructure'>&#x25C4;Gestionando Infraestructura de AWS</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integrando Terraform con CI/CD</a>
	</div>
	<div class='col-4 text-end'>
					<a href='monitoring-and-logging-with-terraform'>Monitoreo y Registro con Terraform &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>Integrar Terraform con pipelines de Integración Continua y Despliegue Continuo (CI/CD) puede mejorar significativamente la automatización, consistencia y fiabilidad de la gestión de tu infraestructura. Esta sección te guiará a través del proceso de integración de Terraform con herramientas populares de CI/CD, proporcionando ejemplos y ejercicios para solidificar tu comprensión.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>CI/CD</strong>: La Integración Continua (CI) es la práctica de integrar automáticamente cambios de código de múltiples contribuyentes en un repositorio compartido varias veces al día. El Despliegue Continuo (CD) es la práctica de desplegar automáticamente cada cambio que pasa todas las etapas de tu pipeline de producción.</li>
<li><strong>Terraform</strong>: Una herramienta de software de código abierto de infraestructura como código que proporciona un flujo de trabajo CLI consistente para gestionar cientos de servicios en la nube.</li>
<li><strong>Pipeline</strong>: Un conjunto de procesos automatizados que permiten a los desarrolladores y profesionales de DevOps compilar, construir y desplegar su código en sus entornos de producción.</li>
</ul>
</div><h1>Configuración de Terraform en un Pipeline de CI/CD</h1>
<h2>Prerrequisitos</h2>
<div class='content'><ul>
<li>Comprensión básica de Terraform y sus comandos.</li>
<li>Una herramienta de CI/CD (por ejemplo, GitHub Actions, GitLab CI, Jenkins, CircleCI).</li>
<li>Acceso a un proveedor de nube (por ejemplo, AWS, Azure, GCP).</li>
</ul>
</div><h2>Ejemplo: Integrando Terraform con GitHub Actions</h2>
<div class='content'><h4>Paso 1: Crear una Configuración de Terraform</h4>
<p>Crea un archivo de configuración simple de Terraform, <code>main.tf</code>, para aprovisionar un recurso. Por ejemplo, un bucket de AWS S3:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0KCnJlc291cmNlICJhd3NfczNfYnVja2V0IiAiZXhhbXBsZSIgewogIGJ1Y2tldCA9ICJteS11bmlxdWUtYnVja2V0LW5hbWUiCiAgYWNsICAgID0gInByaXZhdGUiCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

resource &quot;aws_s3_bucket&quot; &quot;example&quot; {
  bucket = &quot;my-unique-bucket-name&quot;
  acl    = &quot;private&quot;
}</pre></div><div class='content'><h4>Paso 2: Configurar el Workflow de GitHub Actions</h4>
<p>Crea un archivo de workflow de GitHub Actions, <code>.github/workflows/terraform.yml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmFtZTogJ1RlcnJhZm9ybSBDSS9DRCcKCm9uOgogIHB1c2g6CiAgICBicmFuY2hlczoKICAgICAgLSBtYWluCgpqb2JzOgogIHRlcnJhZm9ybToKICAgIHJ1bnMtb246IHVidW50dS1sYXRlc3QKCiAgICBzdGVwczoKICAgIC0gbmFtZTogQ2hlY2tvdXQgY29kZQogICAgICB1c2VzOiBhY3Rpb25zL2NoZWNrb3V0QHYyCgogICAgLSBuYW1lOiBTZXQgdXAgVGVycmFmb3JtCiAgICAgIHVzZXM6IGhhc2hpY29ycC9zZXR1cC10ZXJyYWZvcm1AdjEKCiAgICAtIG5hbWU6IFRlcnJhZm9ybSBJbml0CiAgICAgIHJ1bjogdGVycmFmb3JtIGluaXQKCiAgICAtIG5hbWU6IFRlcnJhZm9ybSBQbGFuCiAgICAgIHJ1bjogdGVycmFmb3JtIHBsYW4KCiAgICAtIG5hbWU6IFRlcnJhZm9ybSBBcHBseQogICAgICBpZjogZ2l0aHViLnJlZiA9PSAncmVmcy9oZWFkcy9tYWluJwogICAgICBydW46IHRlcnJhZm9ybSBhcHBseSAtYXV0by1hcHByb3Zl"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>name: 'Terraform CI/CD'

on:
  push:
    branches:
      - main

jobs:
  terraform:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Terraform
      uses: hashicorp/setup-terraform@v1

    - name: Terraform Init
      run: terraform init

    - name: Terraform Plan
      run: terraform plan

    - name: Terraform Apply
      if: github.ref == 'refs/heads/main'
      run: terraform apply -auto-approve</pre></div><div class='content'><h4>Explicación</h4>
<ul>
<li><strong>Checkout code</strong>: Usa la acción <code>actions/checkout@v2</code> para hacer checkout del repositorio.</li>
<li><strong>Set up Terraform</strong>: Usa la acción <code>hashicorp/setup-terraform@v1</code> para configurar Terraform.</li>
<li><strong>Terraform Init</strong>: Inicializa el directorio de trabajo de Terraform.</li>
<li><strong>Terraform Plan</strong>: Crea un plan de ejecución.</li>
<li><strong>Terraform Apply</strong>: Aplica los cambios necesarios para alcanzar el estado deseado de la configuración.</li>
</ul>
</div><h2>Ejemplo: Integrando Terraform con GitLab CI</h2>
<div class='content'><h4>Paso 1: Crear una Configuración de Terraform</h4>
<p>Usa el mismo archivo <code>main.tf</code> que en el ejemplo de GitHub Actions.</p>
<h4>Paso 2: Configurar el Pipeline de GitLab CI</h4>
<p>Crea un archivo de configuración de GitLab CI, <code>.gitlab-ci.yml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RhZ2VzOgogIC0gaW5pdAogIC0gcGxhbgogIC0gYXBwbHkKCnZhcmlhYmxlczoKICBURl9WRVJTSU9OOiAiMS4wLjAiCiAgVEZfV09SS0lOR19ESVI6ICIuIgoKYmVmb3JlX3NjcmlwdDoKICAtIGFwayBhZGQgLS1uby1jYWNoZSBjdXJsIHVuemlwCiAgLSBjdXJsIC1vIC90bXAvdGVycmFmb3JtLnppcCBodHRwczovL3JlbGVhc2VzLmhhc2hpY29ycC5jb20vdGVycmFmb3JtLyR7VEZfVkVSU0lPTn0vdGVycmFmb3JtXyR7VEZfVkVSU0lPTn1fbGludXhfYW1kNjQuemlwCiAgLSB1bnppcCAvdG1wL3RlcnJhZm9ybS56aXAgLWQgL3Vzci9sb2NhbC9iaW4vCgppbml0OgogIHN0YWdlOiBpbml0CiAgc2NyaXB0OgogICAgLSB0ZXJyYWZvcm0gaW5pdCAke1RGX1dPUktJTkdfRElSfQoKcGxhbjoKICBzdGFnZTogcGxhbgogIHNjcmlwdDoKICAgIC0gdGVycmFmb3JtIHBsYW4gJHtURl9XT1JLSU5HX0RJUn0KCmFwcGx5OgogIHN0YWdlOiBhcHBseQogIHNjcmlwdDoKICAgIC0gdGVycmFmb3JtIGFwcGx5IC1hdXRvLWFwcHJvdmUgJHtURl9XT1JLSU5HX0RJUn0KICB3aGVuOiBtYW51YWw="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>stages:
  - init
  - plan
  - apply

variables:
  TF_VERSION: &quot;1.0.0&quot;
  TF_WORKING_DIR: &quot;.&quot;

before_script:
  - apk add --no-cache curl unzip
  - curl -o /tmp/terraform.zip https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip
  - unzip /tmp/terraform.zip -d /usr/local/bin/

init:
  stage: init
  script:
    - terraform init ${TF_WORKING_DIR}

plan:
  stage: plan
  script:
    - terraform plan ${TF_WORKING_DIR}

apply:
  stage: apply
  script:
    - terraform apply -auto-approve ${TF_WORKING_DIR}
  when: manual</pre></div><div class='content'><h4>Explicación</h4>
<ul>
<li><strong>Stages</strong>: Define las etapas del pipeline (<code>init</code>, <code>plan</code>, <code>apply</code>).</li>
<li><strong>Variables</strong>: Establece la versión de Terraform y el directorio de trabajo.</li>
<li><strong>before_script</strong>: Instala Terraform.</li>
<li><strong>init</strong>: Inicializa el directorio de trabajo de Terraform.</li>
<li><strong>plan</strong>: Crea un plan de ejecución.</li>
<li><strong>apply</strong>: Aplica los cambios necesarios para alcanzar el estado deseado de la configuración. Esta etapa está configurada como <code>manual</code> para evitar el despliegue automático.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Integrar Terraform con pipelines de CI/CD automatiza el proceso de aprovisionamiento y gestión de infraestructura, asegurando consistencia y reduciendo el riesgo de error humano. Siguiendo los ejemplos proporcionados para GitHub Actions y GitLab CI, puedes configurar tus propios pipelines de CI/CD para gestionar tu infraestructura como código de manera eficiente. Practica estas integraciones con diferentes herramientas de CI/CD para obtener una comprensión más profunda y flexibilidad en la gestión de tu infraestructura.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='managing-aws-infrastructure'>&#x25C4;Gestionando Infraestructura de AWS</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integrando Terraform con CI/CD</a>
	</div>
	<div class='col-4 text-end'>
					<a href='monitoring-and-logging-with-terraform'>Monitoreo y Registro con Terraform &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
