<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entendiendo el Estado de Terraform</title>

    <link rel="alternate" href="https://campusempresa.com/terraform/understanding-terraform-state" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/terraform/understanding-terraform-state" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/terraform/understanding-terraform-state" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/terraform/understanding-terraform-state" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/terraform/understanding-terraform-state" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='terraform-commands'>&#x25C4;Comandos de Terraform: init, plan, apply y destroy</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Entendiendo el Estado de Terraform</a>
	</div>
	<div class='col-4 text-end'>
					<a href='managing-terraform-state'>Gestionando el Estado de Terraform &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>El estado de Terraform es un concepto crítico en Terraform que ayuda a gestionar tu infraestructura. Lleva un registro de los recursos que Terraform gestiona, mapea los recursos del mundo real a tu configuración y ayuda en la planificación y aplicación de cambios de manera eficiente.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Archivo de Estado</strong>: Un archivo JSON que Terraform usa para mapear los recursos definidos en tu configuración a recursos del mundo real.</li>
<li><strong>Backend</strong>: La ubicación donde se almacena el estado de Terraform. Puede ser local o remoto (por ejemplo, AWS S3, Azure Blob Storage).</li>
<li><strong>Bloqueo de Estado</strong>: Un mecanismo para prevenir operaciones concurrentes que podrían corromper el archivo de estado.</li>
<li><strong>Comandos de Gestión de Estado</strong>: Comandos como <code>terraform state list</code>, <code>terraform state show</code>, <code>terraform state mv</code>, etc., que ayudan a gestionar el archivo de estado.</li>
</ul>
</div><h1>Archivo de Estado</h1>
<div class='content'><p>El archivo de estado es un archivo JSON que Terraform usa para llevar un registro de los recursos que gestiona. Por defecto, este archivo se llama <code>terraform.tfstate</code> y se almacena en el directorio de trabajo actual.</p>
</div><h2>Ejemplo de Archivo de Estado</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJ2ZXJzaW9uIjogNCwKICAidGVycmFmb3JtX3ZlcnNpb24iOiAiMS4wLjAiLAogICJyZXNvdXJjZXMiOiBbCiAgICB7CiAgICAgICJtb2RlIjogIm1hbmFnZWQiLAogICAgICAidHlwZSI6ICJhd3NfaW5zdGFuY2UiLAogICAgICAibmFtZSI6ICJleGFtcGxlIiwKICAgICAgInByb3ZpZGVyIjogInByb3ZpZGVyW1wicmVnaXN0cnkudGVycmFmb3JtLmlvL2hhc2hpY29ycC9hd3NcIl0iLAogICAgICAiaW5zdGFuY2VzIjogWwogICAgICAgIHsKICAgICAgICAgICJzY2hlbWFfdmVyc2lvbiI6IDEsCiAgICAgICAgICAiYXR0cmlidXRlcyI6IHsKICAgICAgICAgICAgImlkIjogImktMTIzNDU2Nzg5MGFiY2RlZjAiLAogICAgICAgICAgICAiYW1pIjogImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIsCiAgICAgICAgICAgICJpbnN0YW5jZV90eXBlIjogInQyLm1pY3JvIiwKICAgICAgICAgICAgInRhZ3MiOiB7CiAgICAgICAgICAgICAgIk5hbWUiOiAiZXhhbXBsZS1pbnN0YW5jZSIKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgXQogICAgfQogIF0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;version&quot;: 4,
  &quot;terraform_version&quot;: &quot;1.0.0&quot;,
  &quot;resources&quot;: [
    {
      &quot;mode&quot;: &quot;managed&quot;,
      &quot;type&quot;: &quot;aws_instance&quot;,
      &quot;name&quot;: &quot;example&quot;,
      &quot;provider&quot;: &quot;provider[\&quot;registry.terraform.io/hashicorp/aws\&quot;]&quot;,
      &quot;instances&quot;: [
        {
          &quot;schema_version&quot;: 1,
          &quot;attributes&quot;: {
            &quot;id&quot;: &quot;i-1234567890abcdef0&quot;,
            &quot;ami&quot;: &quot;ami-0c55b159cbfafe1f0&quot;,
            &quot;instance_type&quot;: &quot;t2.micro&quot;,
            &quot;tags&quot;: {
              &quot;Name&quot;: &quot;example-instance&quot;
            }
          }
        }
      ]
    }
  ]
}</pre></div><div class='content'><p>En este ejemplo, el archivo de estado lleva un registro de una instancia de AWS EC2 con atributos específicos como <code>id</code>, <code>ami</code> y <code>instance_type</code>.</p>
</div><h1>Backend</h1>
<div class='content'><p>El backend es donde se almacena el archivo de estado. Terraform soporta varios backends, incluyendo opciones de almacenamiento local y remoto.</p>
</div><h2>Backend Local</h2>
<div class='content'><p>Por defecto, Terraform usa un backend local, que almacena el archivo de estado en el directorio de trabajo actual.</p>
</div><h2>Backend Remoto</h2>
<div class='content'><p>Los backends remotos almacenan el archivo de estado en una ubicación remota, lo cual es útil para la colaboración y el bloqueo de estado.</p>
<h4>Ejemplo: Configurando un Backend S3</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIHsKICBiYWNrZW5kICJzMyIgewogICAgYnVja2V0ICAgICAgICAgPSAibXktdGVycmFmb3JtLXN0YXRlIgogICAga2V5ICAgICAgICAgICAgPSAicGF0aC90by9teS9rZXkiCiAgICByZWdpb24gICAgICAgICA9ICJ1cy13ZXN0LTIiCiAgICBkeW5hbW9kYl90YWJsZSA9ICJ0ZXJyYWZvcm0tbG9jayIKICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform {
  backend &quot;s3&quot; {
    bucket         = &quot;my-terraform-state&quot;
    key            = &quot;path/to/my/key&quot;
    region         = &quot;us-west-2&quot;
    dynamodb_table = &quot;terraform-lock&quot;
  }
}</pre></div><div class='content'><p>En este ejemplo, el archivo de estado se almacena en un bucket de S3, y DynamoDB se usa para el bloqueo de estado.</p>
</div><h1>Bloqueo de Estado</h1>
<div class='content'><p>El bloqueo de estado previene operaciones concurrentes que podrían corromper el archivo de estado. Al usar backends remotos como S3 con DynamoDB, Terraform maneja automáticamente el bloqueo de estado.</p>
</div><h1>Comandos de Gestión de Estado</h1>
<div class='content'><p>Terraform proporciona varios comandos para gestionar el archivo de estado:</p>
<ul>
<li><code>terraform state list</code>: Lista todos los recursos en el archivo de estado.</li>
<li><code>terraform state show &lt;resource&gt;</code>: Muestra información detallada sobre un recurso específico.</li>
<li><code>terraform state mv &lt;source&gt; &lt;destination&gt;</code>: Mueve un recurso a una nueva dirección.</li>
<li><code>terraform state rm &lt;resource&gt;</code>: Elimina un recurso del archivo de estado.</li>
</ul>
</div><h2>Ejemplo: Listando Recursos</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCB0ZXJyYWZvcm0gc3RhdGUgbGlzdAphd3NfaW5zdGFuY2UuZXhhbXBsZQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ terraform state list
aws_instance.example</pre></div><div class='content'><p>Este comando lista todos los recursos en el archivo de estado, mostrando que hay un recurso <code>aws_instance</code> llamado <code>example</code>.</p>
</div><h2>Ejemplo: Mostrando Detalles del Recurso</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCB0ZXJyYWZvcm0gc3RhdGUgc2hvdyBhd3NfaW5zdGFuY2UuZXhhbXBsZQojIGF3c19pbnN0YW5jZS5leGFtcGxlOgpyZXNvdXJjZSAiYXdzX2luc3RhbmNlIiAiZXhhbXBsZSIgewogICAgYW1pICAgICAgICAgICAgICAgICAgICAgICAgID0gImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIKICAgIGlkICAgICAgICAgICAgICAgICAgICAgICAgICA9ICJpLTEyMzQ1Njc4OTBhYmNkZWYwIgogICAgaW5zdGFuY2VfdHlwZSAgICAgICAgICAgICAgID0gInQyLm1pY3JvIgogICAgdGFncyAgICAgICAgICAgICAgICAgICAgICAgID0gewogICAgICAgICJOYW1lIiA9ICJleGFtcGxlLWluc3RhbmNlIgogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ terraform state show aws_instance.example
# aws_instance.example:
resource &quot;aws_instance&quot; &quot;example&quot; {
    ami                         = &quot;ami-0c55b159cbfafe1f0&quot;
    id                          = &quot;i-1234567890abcdef0&quot;
    instance_type               = &quot;t2.micro&quot;
    tags                        = {
        &quot;Name&quot; = &quot;example-instance&quot;
    }
}</pre></div><div class='content'><p>Este comando muestra información detallada sobre el recurso <code>aws_instance.example</code>.</p>
</div><h1>Conclusión</h1>
<div class='content'><p>Entender el estado de Terraform es crucial para gestionar tu infraestructura de manera eficiente. El archivo de estado lleva un registro de los recursos, el backend determina dónde se almacena el archivo de estado, y el bloqueo de estado asegura operaciones concurrentes seguras. Al dominar los comandos de gestión de estado, puedes gestionar y solucionar problemas de tus configuraciones de Terraform de manera efectiva.</p>
<p>En la siguiente sección, profundizaremos en técnicas avanzadas de gestión de estado y mejores prácticas.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='terraform-commands'>&#x25C4;Comandos de Terraform: init, plan, apply y destroy</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Entendiendo el Estado de Terraform</a>
	</div>
	<div class='col-4 text-end'>
					<a href='managing-terraform-state'>Gestionando el Estado de Terraform &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
