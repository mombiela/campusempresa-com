<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autenticación y Autorización en PHP</title>

    <link rel="alternate" href="https://campusempresa.com/php/authentication-and-authorization" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/php/authentication-and-authorization" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/php/authentication-and-authorization" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/php/authentication-and-authorization" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/php/authentication-and-authorization" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='using-https'>&#x25C4;Uso de HTTPS</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Autenticación y Autorización en PHP</a>
	</div>
	<div class='col-4 text-end'>
					<a href='coding-standards'>Estándares de Codificación &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>La autenticación y la autorización son componentes críticos de la seguridad de las aplicaciones web. La autenticación verifica la identidad de un usuario, mientras que la autorización determina lo que un usuario autenticado está permitido hacer. Esta sección te guiará desde los conceptos básicos hasta los avanzados de la implementación de autenticación y autorización en PHP.</p>
</div><h1>Autenticación</h1>
<div class='content'></div><h2>¿Qué es la Autenticación?</h2>
<div class='content'><ul>
<li><strong>Definición</strong>: El proceso de verificar la identidad de un usuario.</li>
<li><strong>Métodos Comunes</strong>: Nombre de usuario y contraseña, OAuth, JWT (JSON Web Tokens).</li>
</ul>
</div><h2>Autenticación Básica con PHP</h2>
<div class='content'><h4>Ejemplo: Sistema de Inicio de Sesión Simple</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKc2Vzc2lvbl9zdGFydCgpOwoKJHVzZXJzID0gWwogICAgJ2FkbWluJyA9PiAncGFzc3dvcmQxMjMnLAogICAgJ3VzZXInID0+ICd1c2VycGFzcycKXTsKCmlmICgkX1NFUlZFUlsnUkVRVUVTVF9NRVRIT0QnXSA9PSAnUE9TVCcpIHsKICAgICR1c2VybmFtZSA9ICRfUE9TVFsndXNlcm5hbWUnXTsKICAgICRwYXNzd29yZCA9ICRfUE9TVFsncGFzc3dvcmQnXTsKCiAgICBpZiAoaXNzZXQoJHVzZXJzWyR1c2VybmFtZV0pICYmICR1c2Vyc1skdXNlcm5hbWVdID09ICRwYXNzd29yZCkgewogICAgICAgICRfU0VTU0lPTlsndXNlcm5hbWUnXSA9ICR1c2VybmFtZTsKICAgICAgICBlY2hvICLCoUluaWNpbyBkZSBzZXNpw7NuIGV4aXRvc28hIEJpZW52ZW5pZG8sICIgLiAkdXNlcm5hbWU7CiAgICB9IGVsc2UgewogICAgICAgIGVjaG8gIk5vbWJyZSBkZSB1c3VhcmlvIG8gY29udHJhc2XDsWEgaW52w6FsaWRvcy4iOwogICAgfQp9Cj8+Cgo8Zm9ybSBtZXRob2Q9InBvc3QiPgogICAgTm9tYnJlIGRlIHVzdWFyaW86IDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJ1c2VybmFtZSIgcmVxdWlyZWQ+CiAgICBDb250cmFzZcOxYTogPGlucHV0IHR5cGU9InBhc3N3b3JkIiBuYW1lPSJwYXNzd29yZCIgcmVxdWlyZWQ+CiAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCI+SW5pY2lhciBzZXNpw7NuPC9idXR0b24+CjwvZm9ybT4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
session_start();

$users = [
    'admin' =&gt; 'password123',
    'user' =&gt; 'userpass'
];

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $username = $_POST['username'];
    $password = $_POST['password'];

    if (isset($users[$username]) &amp;&amp; $users[$username] == $password) {
        $_SESSION['username'] = $username;
        echo &quot;&iexcl;Inicio de sesi&oacute;n exitoso! Bienvenido, &quot; . $username;
    } else {
        echo &quot;Nombre de usuario o contrase&ntilde;a inv&aacute;lidos.&quot;;
    }
}
?&gt;

&lt;form method=&quot;post&quot;&gt;
    Nombre de usuario: &lt;input type=&quot;text&quot; name=&quot;username&quot; required&gt;
    Contrase&ntilde;a: &lt;input type=&quot;password&quot; name=&quot;password&quot; required&gt;
    &lt;button type=&quot;submit&quot;&gt;Iniciar sesi&oacute;n&lt;/button&gt;
&lt;/form&gt;</pre></div><div class='content'></div><h2>Almacenamiento Seguro de Contraseñas</h2>
<div class='content'><ul>
<li><strong>Hashing</strong>: Usa <code>password_hash()</code> para hashear contraseñas antes de almacenarlas.</li>
<li><strong>Verificación</strong>: Usa <code>password_verify()</code> para verificar la contraseña hasheada.</li>
</ul>
<h4>Ejemplo: Almacenamiento y Verificación de Contraseñas</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHBhc3N3b3JkID0gJ3VzZXJwYXNzJzsKJGhhc2hlZFBhc3N3b3JkID0gcGFzc3dvcmRfaGFzaCgkcGFzc3dvcmQsIFBBU1NXT1JEX0RFRkFVTFQpOwoKZWNobyAiQ29udHJhc2XDsWEgSGFzaGVhZGE6ICIgLiAkaGFzaGVkUGFzc3dvcmQgLiAiPGJyPiI7CgppZiAocGFzc3dvcmRfdmVyaWZ5KCRwYXNzd29yZCwgJGhhc2hlZFBhc3N3b3JkKSkgewogICAgZWNobyAiwqFDb250cmFzZcOxYSB2w6FsaWRhISI7Cn0gZWxzZSB7CiAgICBlY2hvICJDb250cmFzZcOxYSBpbnbDoWxpZGEuIjsKfQo/Pg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$password = 'userpass';
$hashedPassword = password_hash($password, PASSWORD_DEFAULT);

echo &quot;Contrase&ntilde;a Hasheada: &quot; . $hashedPassword . &quot;&lt;br&gt;&quot;;

if (password_verify($password, $hashedPassword)) {
    echo &quot;&iexcl;Contrase&ntilde;a v&aacute;lida!&quot;;
} else {
    echo &quot;Contrase&ntilde;a inv&aacute;lida.&quot;;
}
?&gt;</pre></div><div class='content'></div><h1>Autorización</h1>
<div class='content'></div><h2>¿Qué es la Autorización?</h2>
<div class='content'><ul>
<li><strong>Definición</strong>: El proceso de determinar lo que un usuario autenticado está permitido hacer.</li>
<li><strong>Métodos Comunes</strong>: Control de acceso basado en roles (RBAC), permisos.</li>
</ul>
</div><h2>Control de Acceso Basado en Roles (RBAC)</h2>
<div class='content'><ul>
<li><strong>Roles</strong>: Definir roles como 'admin', 'editor', 'viewer'.</li>
<li><strong>Permisos</strong>: Asignar permisos a roles.</li>
</ul>
<h4>Ejemplo: Implementación de RBAC</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKc2Vzc2lvbl9zdGFydCgpOwoKJHJvbGVzID0gWwogICAgJ2FkbWluJyA9PiBbJ2NyZWF0ZScsICdlZGl0JywgJ2RlbGV0ZScsICd2aWV3J10sCiAgICAnZWRpdG9yJyA9PiBbJ2VkaXQnLCAndmlldyddLAogICAgJ3ZpZXdlcicgPT4gWyd2aWV3J10KXTsKCmZ1bmN0aW9uIGNoZWNrUGVybWlzc2lvbigkcm9sZSwgJHBlcm1pc3Npb24pIHsKICAgIGdsb2JhbCAkcm9sZXM7CiAgICByZXR1cm4gaW5fYXJyYXkoJHBlcm1pc3Npb24sICRyb2xlc1skcm9sZV0pOwp9CgokX1NFU1NJT05bJ3JvbGUnXSA9ICdlZGl0b3InOwoKaWYgKGNoZWNrUGVybWlzc2lvbigkX1NFU1NJT05bJ3JvbGUnXSwgJ2RlbGV0ZScpKSB7CiAgICBlY2hvICJQZXJtaXNvIGNvbmNlZGlkbyBwYXJhIGVsaW1pbmFyLiI7Cn0gZWxzZSB7CiAgICBlY2hvICJQZXJtaXNvIGRlbmVnYWRvIHBhcmEgZWxpbWluYXIuIjsKfQo/Pg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
session_start();

$roles = [
    'admin' =&gt; ['create', 'edit', 'delete', 'view'],
    'editor' =&gt; ['edit', 'view'],
    'viewer' =&gt; ['view']
];

function checkPermission($role, $permission) {
    global $roles;
    return in_array($permission, $roles[$role]);
}

$_SESSION['role'] = 'editor';

if (checkPermission($_SESSION['role'], 'delete')) {
    echo &quot;Permiso concedido para eliminar.&quot;;
} else {
    echo &quot;Permiso denegado para eliminar.&quot;;
}
?&gt;</pre></div><div class='content'></div><h1>Autenticación y Autorización Avanzadas</h1>
<div class='content'></div><h2>Uso de OAuth para Autenticación</h2>
<div class='content'><ul>
<li><strong>OAuth</strong>: Un estándar abierto para la delegación de acceso comúnmente utilizado para la autenticación basada en tokens.</li>
<li><strong>Proveedores</strong>: Google, Facebook, GitHub.</li>
</ul>
<h4>Ejemplo: OAuth con Google (Descripción Conceptual)</h4>
<ol>
<li><strong>Registrar Aplicación</strong>: Registra tu aplicación con Google para obtener el ID de cliente y el secreto de cliente.</li>
<li><strong>Redirigir a Google</strong>: Redirige a los usuarios a Google para la autenticación.</li>
<li><strong>Manejar la Respuesta</strong>: Maneja la respuesta de Google y recupera el token de acceso.</li>
<li><strong>Obtener Datos del Usuario</strong>: Usa el token de acceso para obtener datos del usuario desde Google.</li>
</ol>
</div><h2>JSON Web Tokens (JWT)</h2>
<div class='content'><ul>
<li><strong>JWT</strong>: Un medio compacto y seguro para representar reclamaciones que se transfieren entre dos partes.</li>
<li><strong>Estructura</strong>: Encabezado, Carga útil, Firma.</li>
</ul>
<h4>Ejemplo: Generación y Verificación de JWT</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKcmVxdWlyZSAndmVuZG9yL2F1dG9sb2FkLnBocCc7CnVzZSBcRmlyZWJhc2VcSldUXEpXVDsKCiRrZXkgPSAiZXhhbXBsZV9rZXkiOwokcGF5bG9hZCA9IFsKICAgICdpc3MnID0+ICJodHRwOi8vZXhhbXBsZS5vcmciLAogICAgJ2F1ZCcgPT4gImh0dHA6Ly9leGFtcGxlLmNvbSIsCiAgICAnaWF0JyA9PiAxMzU2OTk5NTI0LAogICAgJ25iZicgPT4gMTM1NzAwMDAwMApdOwoKJGp3dCA9IEpXVDo6ZW5jb2RlKCRwYXlsb2FkLCAka2V5KTsKZWNobyAiSldUOiAiIC4gJGp3dCAuICI8YnI+IjsKCiRkZWNvZGVkID0gSldUOjpkZWNvZGUoJGp3dCwgJGtleSwgYXJyYXkoJ0hTMjU2JykpOwpwcmludF9yKCRkZWNvZGVkKTsKPz4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
require 'vendor/autoload.php';
use \Firebase\JWT\JWT;

$key = &quot;example_key&quot;;
$payload = [
    'iss' =&gt; &quot;http://example.org&quot;,
    'aud' =&gt; &quot;http://example.com&quot;,
    'iat' =&gt; 1356999524,
    'nbf' =&gt; 1357000000
];

$jwt = JWT::encode($payload, $key);
echo &quot;JWT: &quot; . $jwt . &quot;&lt;br&gt;&quot;;

$decoded = JWT::decode($jwt, $key, array('HS256'));
print_r($decoded);
?&gt;</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>La autenticación y la autorización son esenciales para asegurar las aplicaciones web. Esta sección cubrió los conceptos básicos de la implementación de autenticación y autorización en PHP, desde sistemas de inicio de sesión simples hasta métodos avanzados como OAuth y JWT. Al comprender y aplicar estos conceptos, puedes asegurar que tus aplicaciones sean tanto seguras como fáciles de usar.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='using-https'>&#x25C4;Uso de HTTPS</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Autenticación y Autorización en PHP</a>
	</div>
	<div class='col-4 text-end'>
					<a href='coding-standards'>Estándares de Codificación &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
