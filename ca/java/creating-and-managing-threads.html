<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creació i Gestió de Fils</title>

    <link rel="alternate" href="https://campusempresa.com/es/java/creating-and-managing-threads" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/java/creating-and-managing-threads" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/java/creating-and-managing-threads" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/java/creating-and-managing-threads" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció als Fils</h1>
<div class='content'><p>Els fils permeten que un programa operi de manera més eficient fent múltiples coses al mateix temps. Són particularment útils en Java per realitzar tasques en segon pla, millorar el rendiment i gestionar esdeveniments asíncrons.</p>
<ul>
<li><strong>Definició</strong>: Un fil és un procés lleuger que pot executar-se concurrentment amb altres fils dins del mateix programa.</li>
<li><strong>Casos d'ús</strong>: Tasques en segon pla, processament en paral·lel, gestió de múltiples sol·licituds de clients en un servidor, etc.</li>
</ul>
</div><h1>Creació de Fils en Java</h1>
<div class='content'><p>Hi ha dues maneres principals de crear un fil en Java:</p>
<ol>
<li><strong>Extenent la classe <code>Thread</code></strong></li>
<li><strong>Implementant la interfície <code>Runnable</code></strong></li>
</ol>
</div><h2>Extenent la Classe `Thread`</h2>
<div class='content'><p>Per crear un fil extenent la classe <code>Thread</code>, has de seguir aquests passos:</p>
<ol>
<li>Extendre la classe <code>Thread</code>.</li>
<li>Sobreescriure el mètode <code>run()</code>.</li>
<li>Crear una instància de la teva classe i cridar el mètode <code>start()</code>.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTXlUaHJlYWQgZXh0ZW5kcyBUaHJlYWQgewogICAgcHVibGljIHZvaWQgcnVuKCkgewogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiRWwgZmlsIHMnZXN0w6AgZXhlY3V0YW50LiIpOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKICAgICAgICBNeVRocmVhZCB0aHJlYWQgPSBuZXcgTXlUaHJlYWQoKTsKICAgICAgICB0aHJlYWQuc3RhcnQoKTsgLy8gQWl4w7IgY3JpZGFyw6AgZWwgbcOodG9kZSBydW4oKQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class MyThread extends Thread {
    public void run() {
        System.out.println(&quot;El fil s'est&agrave; executant.&quot;);
    }

    public static void main(String[] args) {
        MyThread thread = new MyThread();
        thread.start(); // Aix&ograve; cridar&agrave; el m&egrave;tode run()
    }
}</pre></div><div class='content'></div><h2>Implementant la Interfície `Runnable`</h2>
<div class='content'><p>Per crear un fil implementant la interfície <code>Runnable</code>, segueix aquests passos:</p>
<ol>
<li>Implementar la interfície <code>Runnable</code>.</li>
<li>Sobreescriure el mètode <code>run()</code>.</li>
<li>Crear una instància de la classe <code>Thread</code>, passant el teu objecte <code>Runnable</code> al seu constructor.</li>
<li>Cridar el mètode <code>start()</code> a la instància de <code>Thread</code>.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTXlSdW5uYWJsZSBpbXBsZW1lbnRzIFJ1bm5hYmxlIHsKICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkVsIGZpbCBzJ2VzdMOgIGV4ZWN1dGFudC4iKTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgTXlSdW5uYWJsZSBteVJ1bm5hYmxlID0gbmV3IE15UnVubmFibGUoKTsKICAgICAgICBUaHJlYWQgdGhyZWFkID0gbmV3IFRocmVhZChteVJ1bm5hYmxlKTsKICAgICAgICB0aHJlYWQuc3RhcnQoKTsgLy8gQWl4w7IgY3JpZGFyw6AgZWwgbcOodG9kZSBydW4oKQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class MyRunnable implements Runnable {
    public void run() {
        System.out.println(&quot;El fil s'est&agrave; executant.&quot;);
    }

    public static void main(String[] args) {
        MyRunnable myRunnable = new MyRunnable();
        Thread thread = new Thread(myRunnable);
        thread.start(); // Aix&ograve; cridar&agrave; el m&egrave;tode run()
    }
}</pre></div><div class='content'></div><h1>Gestió de Fils</h1>
<div class='content'><p>La gestió de fils implica controlar la seva execució i assegurar-se que s'executin eficientment sense conflictes.</p>
</div><h2>Cicle de Vida del Fil</h2>
<div class='content'><p>Un fil pot estar en un dels següents estats:</p>
<ul>
<li><strong>Nou</strong>: Quan un fil és creat però encara no ha començat.</li>
<li><strong>Runnable</strong>: Quan el fil està llest per executar-se i esperant temps de CPU.</li>
<li><strong>Bloquejat/Esperant</strong>: Quan el fil està esperant un recurs o un altre fil per realitzar una tasca.</li>
<li><strong>Esperant amb Temps</strong>: Quan el fil està esperant per un període especificat.</li>
<li><strong>Terminat</strong>: Quan el fil ha acabat d'executar-se.</li>
</ul>
</div><h2>Mètodes del Fil</h2>
<div class='content'><p>Alguns mètodes importants per gestionar fils inclouen:</p>
<ul>
<li><code>start()</code>: Comença l'execució del fil.</li>
<li><code>sleep(long millis)</code>: Fa que el fil dormi durant el nombre especificat de mil·lisegons.</li>
<li><code>join()</code>: Espera que el fil mori.</li>
<li><code>interrupt()</code>: Interromp el fil.</li>
<li><code>isAlive()</code>: Comprova si el fil encara està executant-se.</li>
</ul>
</div><h2>Exemple: Usant `sleep` i `join`</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTXlSdW5uYWJsZSBpbXBsZW1lbnRzIFJ1bm5hYmxlIHsKICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDU7IGkrKykgewogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkZpbDogIiArIGkpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgVGhyZWFkLnNsZWVwKDEwMDApOyAvLyBEb3JtaXIgZHVyYW50IDEgc2Vnb24KICAgICAgICAgICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJGaWwgaW50ZXJyb21wdXQuIik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIFRocmVhZCB0aHJlYWQgPSBuZXcgVGhyZWFkKG5ldyBNeVJ1bm5hYmxlKCkpOwogICAgICAgIHRocmVhZC5zdGFydCgpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHRocmVhZC5qb2luKCk7IC8vIEVzcGVyYXIgcXVlIGVsIGZpbCBhY2FiaQogICAgICAgIH0gY2F0Y2ggKEludGVycnVwdGVkRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJGaWwgcHJpbmNpcGFsIGludGVycm9tcHV0LiIpOwogICAgICAgIH0KICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkZpbCBwcmluY2lwYWwgYWNhYmF0LiIpOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class MyRunnable implements Runnable {
    public void run() {
        for (int i = 0; i &lt; 5; i++) {
            System.out.println(&quot;Fil: &quot; + i);
            try {
                Thread.sleep(1000); // Dormir durant 1 segon
            } catch (InterruptedException e) {
                System.out.println(&quot;Fil interromput.&quot;);
            }
        }
    }

    public static void main(String[] args) {
        Thread thread = new Thread(new MyRunnable());
        thread.start();
        try {
            thread.join(); // Esperar que el fil acabi
        } catch (InterruptedException e) {
            System.out.println(&quot;Fil principal interromput.&quot;);
        }
        System.out.println(&quot;Fil principal acabat.&quot;);
    }
}</pre></div><div class='content'></div><h1>Sincronització</h1>
<div class='content'><p>Quan múltiples fils accedeixen a recursos compartits, la sincronització és crucial per evitar inconsistències de dades.</p>
</div><h2>Mètodes Sincronitzats</h2>
<div class='content'><p>Pots utilitzar la paraula clau <code>synchronized</code> per fer que els mètodes siguin segurs per a fils.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQ291bnRlciB7CiAgICBwcml2YXRlIGludCBjb3VudCA9IDA7CgogICAgcHVibGljIHN5bmNocm9uaXplZCB2b2lkIGluY3JlbWVudCgpIHsKICAgICAgICBjb3VudCsrOwogICAgfQoKICAgIHB1YmxpYyBpbnQgZ2V0Q291bnQoKSB7CiAgICAgICAgcmV0dXJuIGNvdW50OwogICAgfQp9CgpjbGFzcyBNeVJ1bm5hYmxlIGltcGxlbWVudHMgUnVubmFibGUgewogICAgcHJpdmF0ZSBDb3VudGVyIGNvdW50ZXI7CgogICAgcHVibGljIE15UnVubmFibGUoQ291bnRlciBjb3VudGVyKSB7CiAgICAgICAgdGhpcy5jb3VudGVyID0gY291bnRlcjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDAwOyBpKyspIHsKICAgICAgICAgICAgY291bnRlci5pbmNyZW1lbnQoKTsKICAgICAgICB9CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgdGhyb3dzIEludGVycnVwdGVkRXhjZXB0aW9uIHsKICAgICAgICBDb3VudGVyIGNvdW50ZXIgPSBuZXcgQ291bnRlcigpOwogICAgICAgIFRocmVhZCB0MSA9IG5ldyBUaHJlYWQobmV3IE15UnVubmFibGUoY291bnRlcikpOwogICAgICAgIFRocmVhZCB0MiA9IG5ldyBUaHJlYWQobmV3IE15UnVubmFibGUoY291bnRlcikpOwogICAgICAgIHQxLnN0YXJ0KCk7CiAgICAgICAgdDIuc3RhcnQoKTsKICAgICAgICB0MS5qb2luKCk7CiAgICAgICAgdDIuam9pbigpOwogICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiQ29tcHRlIGZpbmFsOiAiICsgY291bnRlci5nZXRDb3VudCgpKTsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Counter {
    private int count = 0;

    public synchronized void increment() {
        count++;
    }

    public int getCount() {
        return count;
    }
}

class MyRunnable implements Runnable {
    private Counter counter;

    public MyRunnable(Counter counter) {
        this.counter = counter;
    }

    public void run() {
        for (int i = 0; i &lt; 1000; i++) {
            counter.increment();
        }
    }

    public static void main(String[] args) throws InterruptedException {
        Counter counter = new Counter();
        Thread t1 = new Thread(new MyRunnable(counter));
        Thread t2 = new Thread(new MyRunnable(counter));
        t1.start();
        t2.start();
        t1.join();
        t2.join();
        System.out.println(&quot;Compte final: &quot; + counter.getCount());
    }
}</pre></div><div class='content'></div><h1>Gestió Avançada de Fils</h1>
<div class='content'><p>Per a una gestió més avançada de fils, Java proporciona el paquet <code>java.util.concurrent</code>, que inclou classes com <code>ExecutorService</code>, <code>Future</code> i <code>Callable</code>.</p>
</div><h2>Usant `ExecutorService`</h2>
<div class='content'><p>El framework <code>ExecutorService</code> simplifica la gestió de fils gestionant la creació de fils i la programació de tasques.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4ZWN1dG9yU2VydmljZTsKaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4ZWN1dG9yczsKCmNsYXNzIE15UnVubmFibGUgaW1wbGVtZW50cyBSdW5uYWJsZSB7CiAgICBwdWJsaWMgdm9pZCBydW4oKSB7CiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJFbCBmaWwgcydlc3TDoCBleGVjdXRhbnQuIik7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIEV4ZWN1dG9yU2VydmljZSBleGVjdXRvciA9IEV4ZWN1dG9ycy5uZXdGaXhlZFRocmVhZFBvb2woMik7CiAgICAgICAgZXhlY3V0b3Iuc3VibWl0KG5ldyBNeVJ1bm5hYmxlKCkpOwogICAgICAgIGV4ZWN1dG9yLnN1Ym1pdChuZXcgTXlSdW5uYWJsZSgpKTsKICAgICAgICBleGVjdXRvci5zaHV0ZG93bigpOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

class MyRunnable implements Runnable {
    public void run() {
        System.out.println(&quot;El fil s'est&agrave; executant.&quot;);
    }

    public static void main(String[] args) {
        ExecutorService executor = Executors.newFixedThreadPool(2);
        executor.submit(new MyRunnable());
        executor.submit(new MyRunnable());
        executor.shutdown();
    }
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Crear i gestionar fils en Java és essencial per construir aplicacions eficients i d'alt rendiment. Entenent els conceptes bàsics de la creació de fils, la sincronització i la gestió avançada de fils, pots desenvolupar programes robustos amb múltiples fils. Practica amb els exemples proporcionats i explora el paquet <code>java.util.concurrent</code> per a característiques més avançades.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
