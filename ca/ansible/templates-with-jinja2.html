<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://campusempresa.com/ansible/templates-with-jinja2" id="lnk_lang_es" data-lang="es">Castellano</a></b>
				|
				<b id="lit_lang_ca">Catala</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció a Jinja2</h1>
<div class='content'><p>Jinja2 és un motor de plantilles potent per a Python, que s'utilitza àmpliament en Ansible per generar contingut dinàmic. Entendre com utilitzar les plantilles Jinja2 és crucial per crear playbooks flexibles i reutilitzables.</p>
<ul>
<li><strong>Què és Jinja2?</strong>
<ul>
<li>Un motor de plantilles per a Python.</li>
<li>Permet incrustar expressions semblants a Python en fitxers estàtics.</li>
<li>S'utilitza en Ansible per crear configuracions dinàmiques.</li>
</ul>
</li>
</ul>
</div><h1>Sintaxi bàsica i ús</h1>
<div class='content'><p>Les plantilles Jinja2 utilitzen una combinació de delimitadors per distingir entre text estàtic i expressions dinàmiques.</p>
<ul>
<li><strong>Delimitadors:</strong>
<ul>
<li><code>{{ ... }}</code>: Expressió per imprimir el resultat.</li>
<li><code>{% ... %}</code>: Declaració per a la lògica (bucles, condicionals).</li>
<li><code>{# ... #}</code>: Comentari.</li>
</ul>
</li>
</ul>
</div><h2>Exemple: Substitució simple de variables</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2YXJzLnltbAp2YXJzOgogIGdyZWV0aW5nOiAiSG9sYSIKICBuYW1lOiAiTcOzbiIKCiMgdGVtcGxhdGUuajIKe3sgZ3JlZXRpbmcgfX0sIHt7IG5hbWUgfX0hCgojIHBsYXlib29rLnltbAotIGhvc3RzOiBsb2NhbGhvc3QKICB2YXJzX2ZpbGVzOgogICAgLSB2YXJzLnltbAogIHRhc2tzOgogICAgLSBuYW1lOiBSZW5kZXJpdHphciBwbGFudGlsbGEKICAgICAgdGVtcGxhdGU6CiAgICAgICAgc3JjOiB0ZW1wbGF0ZS5qMgogICAgICAgIGRlc3Q6IC90bXAvb3V0cHV0LnR4dA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># vars.yml
vars:
  greeting: &quot;Hola&quot;
  name: &quot;M&oacute;n&quot;

# template.j2
{{ greeting }}, {{ name }}!

# playbook.yml
- hosts: localhost
  vars_files:
    - vars.yml
  tasks:
    - name: Renderitzar plantilla
      template:
        src: template.j2
        dest: /tmp/output.txt</pre></div><div class='content'><p>Aquest exemple crearà un fitxer <code>/tmp/output.txt</code> amb el contingut <code>Hola, Món!</code>.</p>
</div><h1>Estructures de control</h1>
<div class='content'><p>Jinja2 admet diverses estructures de control com bucles i condicionals per crear plantilles més complexes.</p>
</div><h2>Condicionals</h2>
<div class='content'><p>Utilitza <code>{% if %}</code> per incloure lògica condicional a les teves plantilles.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2YXJzLnltbAp2YXJzOgogIHVzZXI6ICJhZG1pbiIKICBpc19hZG1pbjogdHJ1ZQoKIyB0ZW1wbGF0ZS5qMgp7JSBpZiBpc19hZG1pbiAlfQpCZW52aW5ndXQsIHt7IHVzZXIgfX0hIFRlbnMgcHJpdmlsZWdpcyBhZG1pbmlzdHJhdGl1cy4KeyUgZWxzZSAlfQpCZW52aW5ndXQsIHt7IHVzZXIgfX0hCnslIGVuZGlmICV9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># vars.yml
vars:
  user: &quot;admin&quot;
  is_admin: true

# template.j2
{% if is_admin %}
Benvingut, {{ user }}! Tens privilegis administratius.
{% else %}
Benvingut, {{ user }}!
{% endif %}</pre></div><div class='content'></div><h2>Bucles</h2>
<div class='content'><p>Utilitza <code>{% for %}</code> per iterar sobre llistes o diccionaris.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2YXJzLnltbAp2YXJzOgogIHVzZXJzOgogICAgLSBhbGljZQogICAgLSBib2IKICAgIC0gY2Fyb2wKCiMgdGVtcGxhdGUuajIKVXN1YXJpczoKeyUgZm9yIHVzZXIgaW4gdXNlcnMgJX0KLSB7eyB1c2VyIH19CnslIGVuZGZvciAlfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># vars.yml
vars:
  users:
    - alice
    - bob
    - carol

# template.j2
Usuaris:
{% for user in users %}
- {{ user }}
{% endfor %}</pre></div><div class='content'></div><h1>Filtres i funcions</h1>
<div class='content'><p>Jinja2 proporciona una varietat de filtres i funcions per manipular dades dins de les plantilles.</p>
</div><h2>Filtres comuns</h2>
<div class='content'><ul>
<li><code>default</code>: Proporciona un valor per defecte si la variable no està definida.</li>
<li><code>upper</code>: Converteix una cadena a majúscules.</li>
<li><code>lower</code>: Converteix una cadena a minúscules.</li>
<li><code>replace</code>: Substitueix parts d'una cadena.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2YXJzLnltbAp2YXJzOgogIG5hbWU6ICJBbnNpYmxlIgogIGRlc2NyaXB0aW9uOiAiRWluYSBkZSBHZXN0acOzIGRlIENvbmZpZ3VyYWNpw7MiCgojIHRlbXBsYXRlLmoyCk5vbToge3sgbmFtZSB8IHVwcGVyIH19CkRlc2NyaXBjacOzOiB7eyBkZXNjcmlwdGlvbiB8IHJlcGxhY2UoIkdlc3Rpw7MiLCAiQXV0b21hdGl0emFjacOzIikgfX0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># vars.yml
vars:
  name: &quot;Ansible&quot;
  description: &quot;Eina de Gesti&oacute; de Configuraci&oacute;&quot;

# template.j2
Nom: {{ name | upper }}
Descripci&oacute;: {{ description | replace(&quot;Gesti&oacute;&quot;, &quot;Automatitzaci&oacute;&quot;) }}</pre></div><div class='content'></div><h2>Filtres personalitzats</h2>
<div class='content'><p>També pots crear filtres personalitzats en Ansible utilitzant Python.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBmaWx0ZXJfcGx1Z2lucy9teV9maWx0ZXJzLnB5CmRlZiByZXZlcnNlX3N0cmluZyh2YWx1ZSk6CiAgICByZXR1cm4gdmFsdWVbOjotMV0KCmNsYXNzIEZpbHRlck1vZHVsZShvYmplY3QpOgogICAgZGVmIGZpbHRlcnMoc2VsZik6CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgJ3JldmVyc2UnOiByZXZlcnNlX3N0cmluZwogICAgICAgIH0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># filter_plugins/my_filters.py
def reverse_string(value):
    return value[::-1]

class FilterModule(object):
    def filters(self):
        return {
            'reverse': reverse_string
        }</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2YXJzLnltbAp2YXJzOgogIHdvcmQ6ICJBbnNpYmxlIgoKIyB0ZW1wbGF0ZS5qMgpJbnZlcnRpdDoge3sgd29yZCB8IHJldmVyc2UgfX0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># vars.yml
vars:
  word: &quot;Ansible&quot;

# template.j2
Invertit: {{ word | reverse }}</pre></div><div class='content'></div><h1>Exemples pràctics</h1>
<h2>Generació de fitxers de configuració</h2>
<div class='content'><p>Les plantilles s'utilitzen sovint per generar fitxers de configuració dinàmicament.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2YXJzLnltbAp2YXJzOgogIHNlcnZlcl9uYW1lOiAiZXhhbXBsZS5jb20iCiAgZG9jdW1lbnRfcm9vdDogIi92YXIvd3d3L2h0bWwiCgojIHRlbXBsYXRlLmoyIChuZ2lueC5jb25mKQpzZXJ2ZXIgewogICAgbGlzdGVuIDgwOwogICAgc2VydmVyX25hbWUge3sgc2VydmVyX25hbWUgfX07CiAgICByb290IHt7IGRvY3VtZW50X3Jvb3QgfX07Cn0KCiMgcGxheWJvb2sueW1sCi0gaG9zdHM6IHdlYnNlcnZlcnMKICB2YXJzX2ZpbGVzOgogICAgLSB2YXJzLnltbAogIHRhc2tzOgogICAgLSBuYW1lOiBEZXNwbGVnYXIgY29uZmlndXJhY2nDsyBuZ2lueAogICAgICB0ZW1wbGF0ZToKICAgICAgICBzcmM6IG5naW54LmNvbmYuajIKICAgICAgICBkZXN0OiAvZXRjL25naW54L3NpdGVzLWF2YWlsYWJsZS9kZWZhdWx0CiAgICAgIG5vdGlmeTogcmVzdGFydCBuZ2lueA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># vars.yml
vars:
  server_name: &quot;example.com&quot;
  document_root: &quot;/var/www/html&quot;

# template.j2 (nginx.conf)
server {
    listen 80;
    server_name {{ server_name }};
    root {{ document_root }};
}

# playbook.yml
- hosts: webservers
  vars_files:
    - vars.yml
  tasks:
    - name: Desplegar configuraci&oacute; nginx
      template:
        src: nginx.conf.j2
        dest: /etc/nginx/sites-available/default
      notify: restart nginx</pre></div><div class='content'></div><h2>Plantilles de correu electrònic</h2>
<div class='content'><p>També pots utilitzar Jinja2 per crear contingut de correu electrònic dinàmic.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2YXJzLnltbAp2YXJzOgogIHJlY2lwaWVudDogInVzZXJAZXhhbXBsZS5jb20iCiAgc3ViamVjdDogIkJlbnZpbmd1dCBhbCBub3N0cmUgc2VydmVpIgogIGJvZHk6ICJHcsOgY2llcyBwZXIgcmVnaXN0cmFyLXRlISIKCiMgdGVtcGxhdGUuajIgKGVtYWlsLnR4dCkKUGVyIGE6IHt7IHJlY2lwaWVudCB9fQpBc3N1bXB0ZToge3sgc3ViamVjdCB9fQoKe3sgYm9keSB9fQoKIyBwbGF5Ym9vay55bWwKLSBob3N0czogbG9jYWxob3N0CiAgdmFyc19maWxlczoKICAgIC0gdmFycy55bWwKICB0YXNrczoKICAgIC0gbmFtZTogR2VuZXJhciBjb250aW5ndXQgZGUgY29ycmV1IGVsZWN0csOybmljCiAgICAgIHRlbXBsYXRlOgogICAgICAgIHNyYzogZW1haWwudHh0LmoyCiAgICAgICAgZGVzdDogL3RtcC9lbWFpbC50eHQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># vars.yml
vars:
  recipient: &quot;user@example.com&quot;
  subject: &quot;Benvingut al nostre servei&quot;
  body: &quot;Gr&agrave;cies per registrar-te!&quot;

# template.j2 (email.txt)
Per a: {{ recipient }}
Assumpte: {{ subject }}

{{ body }}

# playbook.yml
- hosts: localhost
  vars_files:
    - vars.yml
  tasks:
    - name: Generar contingut de correu electr&ograve;nic
      template:
        src: email.txt.j2
        dest: /tmp/email.txt</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Les plantilles Jinja2 són una eina potent en Ansible per crear configuracions dinàmiques i flexibles. En dominar la sintaxi bàsica, les estructures de control, els filtres i les aplicacions pràctiques, pots millorar significativament les capacitats dels teus playbooks d'Ansible. Practica creant i utilitzant plantilles per convertir-te en un expert en l'ús de Jinja2 dins dels teus fluxos de treball d'automatització.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
