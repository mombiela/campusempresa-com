<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dataflow a Google Cloud Platform (GCP)</title>

    <link rel="alternate" href="https://campusempresa.com/es/gcp/dataflow" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/gcp/dataflow" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/gcp/dataflow" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/gcp/dataflow" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='bigquery'>&#x25C4;BigQuery</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Dataflow a Google Cloud Platform (GCP)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='dataproc'>Dataproc &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció a Dataflow</h1>
<div class='content'><p>Google Cloud Dataflow és un servei totalment gestionat per al processament de fluxos i lots de grans conjunts de dades. Permet als desenvolupadors crear canals de processament de dades que poden gestionar tant dades en temps real com històriques.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Pipeline</strong>: Una sèrie de passos de processament de dades.</li>
<li><strong>PCollection</strong>: Un conjunt de dades distribuït que representa les dades que s'estan processant.</li>
<li><strong>Transform</strong>: Operacions que processen dades en PCollections.</li>
<li><strong>Runner</strong>: El motor d'execució per al pipeline.</li>
</ul>
</div><h1>Configuració de Dataflow</h1>
<div class='content'><p>Abans de començar a utilitzar Dataflow, cal configurar el teu entorn GCP.</p>
</div><h2>Passos per Configurar</h2>
<div class='content'><ol>
<li><strong>Crear un Projecte GCP</strong>: Ves a la Consola GCP i crea un nou projecte.</li>
<li><strong>Habilitar l'API de Dataflow</strong>: A la biblioteca d'API, habilita l'API de Dataflow.</li>
<li><strong>Instal·lar Google Cloud SDK</strong>: Descarrega i instal·la el SDK per interactuar amb els serveis de GCP des de la teva màquina local.</li>
<li><strong>Configurar l'Autenticació</strong>: Autentica el teu SDK utilitzant <code>gcloud auth login</code>.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb25maWd1cmEgZWwgdGV1IHByb2plY3RlCmdjbG91ZCBjb25maWcgc2V0IHByb2plY3QgW1BST0pFQ1RfSURdCgojIEhhYmlsaXRhIGwnQVBJIGRlIERhdGFmbG93CmdjbG91ZCBzZXJ2aWNlcyBlbmFibGUgZGF0YWZsb3cuZ29vZ2xlYXBpcy5jb20="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Configura el teu projecte
gcloud config set project [PROJECT_ID]

# Habilita l'API de Dataflow
gcloud services enable dataflow.googleapis.com</pre></div><div class='content'></div><h1>Construcció d'un Pipeline de Dataflow</h1>
<div class='content'><p>Un pipeline de Dataflow es compon de tres parts principals: lectura de dades, transformació de dades i escriptura de dades.</p>
</div><h2>Exemple: Pipeline de Comptatge de Paraules</h2>
<div class='content'><p>Creem un simple pipeline de comptatge de paraules.</p>
<h4>Pas 1: Llegir Dades</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFwYWNoZV9iZWFtIGFzIGJlYW0KZnJvbSBhcGFjaGVfYmVhbS5vcHRpb25zLnBpcGVsaW5lX29wdGlvbnMgaW1wb3J0IFBpcGVsaW5lT3B0aW9ucwoKIyBEZWZpbmVpeCBsZXMgb3BjaW9ucyBkZWwgcGlwZWxpbmUKb3B0aW9ucyA9IFBpcGVsaW5lT3B0aW9ucygpCgojIENyZWEgZWwgcGlwZWxpbmUKcCA9IGJlYW0uUGlwZWxpbmUob3B0aW9ucz1vcHRpb25zKQoKIyBMbGVnZWl4IGRhZGVzIGQndW4gZml0eGVyIGRlIHRleHQKbGluZXMgPSBwIHwgJ1JlYWQnID4+IGJlYW0uaW8uUmVhZEZyb21UZXh0KCdnczovL3lvdXItYnVja2V0L2lucHV0LnR4dCcp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import apache_beam as beam
from apache_beam.options.pipeline_options import PipelineOptions

# Defineix les opcions del pipeline
options = PipelineOptions()

# Crea el pipeline
p = beam.Pipeline(options=options)

# Llegeix dades d'un fitxer de text
lines = p | 'Read' &gt;&gt; beam.io.ReadFromText('gs://your-bucket/input.txt')</pre></div><div class='content'><h4>Pas 2: Transformar Dades</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBEaXZpZGVpeCBsZXMgbMOtbmllcyBlbiBwYXJhdWxlcwp3b3JkcyA9IGxpbmVzIHwgJ1NwbGl0JyA+PiBiZWFtLkZsYXRNYXAobGFtYmRhIHg6IHguc3BsaXQoKSkKCiMgQ29tcHRhIGxlcyBvY3VycsOobmNpZXMgZGUgY2FkYSBwYXJhdWxhCndvcmRfY291bnRzID0gd29yZHMgfCAnQ291bnQnID4+IGJlYW0uY29tYmluZXJzLkNvdW50LlBlckVsZW1lbnQoKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Divideix les l&iacute;nies en paraules
words = lines | 'Split' &gt;&gt; beam.FlatMap(lambda x: x.split())

# Compta les ocurr&egrave;ncies de cada paraula
word_counts = words | 'Count' &gt;&gt; beam.combiners.Count.PerElement()</pre></div><div class='content'><h4>Pas 3: Escriure Dades</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFc2NyaXUgZWxzIGNvbXB0YXRnZXMgZGUgcGFyYXVsZXMgYSB1biBmaXR4ZXIgZGUgdGV4dAp3b3JkX2NvdW50cyB8ICdXcml0ZScgPj4gYmVhbS5pby5Xcml0ZVRvVGV4dCgnZ3M6Ly95b3VyLWJ1Y2tldC9vdXRwdXQudHh0JykKCiMgRXhlY3V0YSBlbCBwaXBlbGluZQpwLnJ1bigpLndhaXRfdW50aWxfZmluaXNoKCk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Escriu els comptatges de paraules a un fitxer de text
word_counts | 'Write' &gt;&gt; beam.io.WriteToText('gs://your-bucket/output.txt')

# Executa el pipeline
p.run().wait_until_finish()</pre></div><div class='content'></div><h1>Funcionalitats Avançades de Dataflow</h1>
<div class='content'><p>A mesura que et familiaritzis amb Dataflow, pots aprofitar funcionalitats avançades per optimitzar i escalar els teus pipelines.</p>
</div><h2>Finestratge</h2>
<div class='content'><p>El finestratge et permet dividir les teves dades en trossos basats en el temps per al processament.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFwYWNoZV9iZWFtLnRyYW5zZm9ybXMud2luZG93IGFzIHdpbmRvdwoKIyBBcGxpY2EgZmluZXN0cmF0Z2UgYSBsYSBQQ29sbGVjdGlvbgp3aW5kb3dlZF93b3JkcyA9IHdvcmRzIHwgJ1dpbmRvdycgPj4gYmVhbS5XaW5kb3dJbnRvKHdpbmRvdy5GaXhlZFdpbmRvd3MoNjApKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import apache_beam.transforms.window as window

# Aplica finestratge a la PCollection
windowed_words = words | 'Window' &gt;&gt; beam.WindowInto(window.FixedWindows(60))</pre></div><div class='content'></div><h2>Triggers</h2>
<div class='content'><p>Els triggers determinen quan s'emeten els resultats d'un càlcul finestrat.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHJpZ2dlcmVkX2NvdW50cyA9IHdpbmRvd2VkX3dvcmRzIHwgJ1RyaWdnZXInID4+IGJlYW0uY29tYmluZXJzLkNvdW50LlBlckVsZW1lbnQoKS53aXRoX3RyaWdnZXIoCiAgICB0cmlnZ2VyLkFmdGVyUHJvY2Vzc2luZ1RpbWUoMTApLAogICAgYWNjdW11bGF0aW9uX21vZGU9dHJpZ2dlci5BY2N1bXVsYXRpb25Nb2RlLkRJU0NBUkRJTkcp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>triggered_counts = windowed_words | 'Trigger' &gt;&gt; beam.combiners.Count.PerElement().with_trigger(
    trigger.AfterProcessingTime(10),
    accumulation_mode=trigger.AccumulationMode.DISCARDING)</pre></div><div class='content'></div><h2>Entrades Laterals</h2>
<div class='content'><p>Les entrades laterals et permeten passar dades addicionals a una transformació.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhIHVuYSBlbnRyYWRhIGxhdGVyYWwKc2lkZV9pbnB1dCA9IHAgfCAnQ3JlYXRlIFNpZGUgSW5wdXQnID4+IGJlYW0uQ3JlYXRlKFsxLCAyLCAzXSkKCiMgVXRpbGl0emEgbCdlbnRyYWRhIGxhdGVyYWwgZW4gdW5hIHRyYW5zZm9ybWFjacOzCm1haW5faW5wdXQgfCAnV2l0aCBTaWRlIElucHV0JyA+PiBiZWFtLk1hcChsYW1iZGEgeCwgc2lkZTogeCArIHN1bShzaWRlKSwgYmVhbS5wdmFsdWUuQXNMaXN0KHNpZGVfaW5wdXQpKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Crea una entrada lateral
side_input = p | 'Create Side Input' &gt;&gt; beam.Create([1, 2, 3])

# Utilitza l'entrada lateral en una transformaci&oacute;
main_input | 'With Side Input' &gt;&gt; beam.Map(lambda x, side: x + sum(side), beam.pvalue.AsList(side_input))</pre></div><div class='content'></div><h1>Monitorització i Depuració</h1>
<div class='content'><p>Dataflow proporciona eines per monitoritzar i depurar els teus pipelines.</p>
</div><h2>Monitorització</h2>
<div class='content'><ul>
<li><strong>Consola de Dataflow</strong>: Veure l'estat del treball, registres i mètriques.</li>
<li><strong>Stackdriver Logging</strong>: Recollir i analitzar registres dels teus treballs de Dataflow.</li>
</ul>
</div><h2>Depuració</h2>
<div class='content'><ul>
<li><strong>Gràfic del Pipeline</strong>: Visualitzar l'estructura del pipeline.</li>
<li><strong>Informe d'Errors</strong>: Identificar i corregir errors en el teu pipeline.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Google Cloud Dataflow és una eina potent per processar grans conjunts de dades tant en modes de lot com de flux. Comprenent els seus conceptes bàsics, configurant el teu entorn i construint pipelines, pots gestionar eficientment tasques complexes de processament de dades. A mesura que avancis, aprofitar funcionalitats com el finestratge, triggers i entrades laterals t'ajudarà a optimitzar i escalar els teus pipelines. Les eines de monitorització i depuració asseguren que els teus pipelines funcionin de manera suau i eficient.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='bigquery'>&#x25C4;BigQuery</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Dataflow a Google Cloud Platform (GCP)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='dataproc'>Dataproc &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
