<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://campusempresa.com/assembly/inline-assembly-in-high-level-languages" id="lnk_lang_es" data-lang="es">Castellano</a></b>
				|
				<b id="lit_lang_ca">Catala</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>El codi inline permet als programadors incrustar instruccions en llenguatge assemblador directament dins del codi d'un llenguatge d'alt nivell. Això pot ser útil per optimitzar seccions de codi crítiques per al rendiment, accedir directament al maquinari o utilitzar instruccions específiques del processador que no estan disponibles en el llenguatge d'alt nivell.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Codi Inline</strong>: Incrustar codi assemblador dins d'un llenguatge d'alt nivell.</li>
<li><strong>Optimització del Rendiment</strong>: Utilitzar codi inline per optimitzar seccions de codi crítiques.</li>
<li><strong>Accés al Maquinari</strong>: Interactuar directament amb components de maquinari.</li>
<li><strong>Instruccions Específiques del Processador</strong>: Utilitzar instruccions especials proporcionades per la CPU.</li>
</ul>
</div><h1>Codi Inline en C/C++</h1>
<div class='content'><p>C i C++ són llenguatges d'alt nivell populars que suporten codi inline. La sintaxi i l'ús poden variar entre compiladors, però ens centrarem en GCC (GNU Compiler Collection) ja que és àmpliament utilitzat.</p>
</div><h2>Sintaxi Bàsica</h2>
<div class='content'><p>En GCC, el codi inline es escriu utilitzant la paraula clau <code>asm</code>. Aquí hi ha un exemple senzill:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgppbnQgbWFpbigpIHsKICAgIGludCBhID0gMTAsIGIgPSAyMCwgcmVzdWx0OwoKICAgIGFzbSAoImFkZGwgJSVlYngsICUlZWF4OyIKICAgICAgICAgOiAiPWEiIChyZXN1bHQpCiAgICAgICAgIDogImEiIChhKSwgImIiIChiKQogICAgKTsKCiAgICBwcmludGYoIlJlc3VsdDogJWRcbiIsIHJlc3VsdCk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

int main() {
    int a = 10, b = 20, result;

    asm (&quot;addl %%ebx, %%eax;&quot;
         : &quot;=a&quot; (result)
         : &quot;a&quot; (a), &quot;b&quot; (b)
    );

    printf(&quot;Result: %d\n&quot;, result);
    return 0;
}</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>Paraula Clau <code>asm</code></strong>: Utilitzada per introduir codi inline.</li>
<li><strong>Codi Assemblador</strong>: <code>&quot;addl %%ebx, %%eax;&quot;</code> suma els valors en els registres <code>ebx</code> i <code>eax</code>.</li>
<li><strong>Operands de Sortida</strong>: <code>: &quot;=a&quot; (result)</code> especifica que el resultat es guardarà en el registre <code>eax</code> i després s'assignarà a la variable <code>result</code>.</li>
<li><strong>Operands d'Entrada</strong>: <code>: &quot;a&quot; (a), &quot;b&quot; (b)</code> especifica que els valors de <code>a</code> i <code>b</code> es carregaran en els registres <code>eax</code> i <code>ebx</code>, respectivament.</li>
</ul>
</div><h2>Restriccions</h2>
<div class='content'><p>Les restriccions s'utilitzen per especificar com els operands es mapegen als registres. Aquí hi ha algunes restriccions comunes:</p>
<ul>
<li><strong><code>&quot;r&quot;</code></strong>: Qualsevol registre de propòsit general.</li>
<li><strong><code>&quot;m&quot;</code></strong>: Operand de memòria.</li>
<li><strong><code>&quot;i&quot;</code></strong>: Valor immediat.</li>
</ul>
</div><h2>Exemple amb Restriccions</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgppbnQgbWFpbigpIHsKICAgIGludCBhID0gMTAsIGIgPSAyMCwgcmVzdWx0OwoKICAgIGFzbSAoImFkZGwgJTIsICUwOyIKICAgICAgICAgOiAiPXIiIChyZXN1bHQpCiAgICAgICAgIDogIjAiIChhKSwgInIiIChiKQogICAgKTsKCiAgICBwcmludGYoIlJlc3VsdDogJWRcbiIsIHJlc3VsdCk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

int main() {
    int a = 10, b = 20, result;

    asm (&quot;addl %2, %0;&quot;
         : &quot;=r&quot; (result)
         : &quot;0&quot; (a), &quot;r&quot; (b)
    );

    printf(&quot;Result: %d\n&quot;, result);
    return 0;
}</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong><code>&quot;=r&quot;</code></strong>: El resultat es guardarà en qualsevol registre de propòsit general.</li>
<li><strong><code>&quot;0&quot;</code></strong>: El primer operand d'entrada (<code>a</code>) estarà en el mateix registre que l'operand de sortida.</li>
<li><strong><code>&quot;r&quot;</code></strong>: El segon operand d'entrada (<code>b</code>) pot estar en qualsevol registre de propòsit general.</li>
</ul>
</div><h1>Codi Inline en Altres Llenguatges</h1>
<div class='content'><p>Tot i que C/C++ són els llenguatges més comuns per al codi inline, altres llenguatges també ho suporten en diferents graus.</p>
</div><h2>Codi Inline en Rust</h2>
<div class='content'><p>Rust suporta codi inline a través de la macro <code>asm!</code> (actualment inestable i requereix versions nocturnes).</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyFbZmVhdHVyZShhc20pXQoKZm4gbWFpbigpIHsKICAgIGxldCBhOiBpMzIgPSAxMDsKICAgIGxldCBiOiBpMzIgPSAyMDsKICAgIGxldCByZXN1bHQ6IGkzMjsKCiAgICB1bnNhZmUgewogICAgICAgIGFzbSEoCiAgICAgICAgICAgICJhZGQgezB9LCB7MX0iLAogICAgICAgICAgICBpbm91dChyZWcpIGEgPT4gcmVzdWx0LAogICAgICAgICAgICBpbihyZWcpIGIKICAgICAgICApOwogICAgfQoKICAgIHByaW50bG4hKCJSZXN1bHQ6IHt9IiwgcmVzdWx0KTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#![feature(asm)]

fn main() {
    let a: i32 = 10;
    let b: i32 = 20;
    let result: i32;

    unsafe {
        asm!(
            &quot;add {0}, {1}&quot;,
            inout(reg) a =&gt; result,
            in(reg) b
        );
    }

    println!(&quot;Result: {}&quot;, result);
}</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>Macro <code>asm!</code></strong>: Utilitzada per escriure codi inline en Rust.</li>
<li><strong><code>inout(reg)</code></strong>: Especifica un operand d'entrada/sortida en un registre de propòsit general.</li>
<li><strong><code>in(reg)</code></strong>: Especifica un operand d'entrada en un registre de propòsit general.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>El codi inline proporciona una eina poderosa per optimitzar codi crític per al rendiment, accedir directament al maquinari i utilitzar instruccions específiques del processador. Tot i que introdueix complexitat i possibles problemes de portabilitat, pot ser inavaluable en certes situacions. Entendre la sintaxi i les restriccions del codi inline en llenguatges d'alt nivell com C/C++ i Rust pot ajudar-te a aprofitar aquesta eina de manera efectiva.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
