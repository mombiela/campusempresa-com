<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionar les Respostes de l'API</title>

    <link rel="alternate" href="https://campusempresa.com/es/reactnative/handling-api-responses" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/reactnative/handling-api-responses" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/reactnative/handling-api-responses" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/reactnative/handling-api-responses" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>Gestionar les respostes de l'API és un aspecte crucial per construir aplicacions robustes i fàcils d'usar en React Native. Aquest tema et guiarà des dels conceptes bàsics de com obtenir dades d'una API fins a tècniques més avançades per gestionar i mostrar aquestes dades de manera eficient.</p>
</div><h1>Introducció a les Respostes de l'API</h1>
<div class='content'><p>Les API (Interfícies de Programació d'Aplicacions) permeten que la teva aplicació es comuniqui amb serveis externs. Quan fas una sol·licitud a una API, reps una resposta, que has de gestionar adequadament a la teva aplicació.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Mètodes HTTP</strong>: GET, POST, PUT, DELETE</li>
<li><strong>Codis d'Estat</strong>: 200 (OK), 404 (No Trobat), 500 (Error Intern del Servidor), etc.</li>
<li><strong>JSON</strong>: Format comú per a respostes d'API</li>
<li><strong>Programació Asíncrona</strong>: Usant <code>async/await</code> i Promeses</li>
</ul>
</div><h1>Obtenir Dades d'una API</h1>
<div class='content'></div><h2>Usant l'API Fetch</h2>
<div class='content'><p>L'API Fetch és una API de JavaScript integrada per fer sol·licituds de xarxa. És simple d'usar i funciona bé amb React Native.</p>
<h4>Exemple: Obtenir Dades amb l'API Fetch</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IFZpZXcsIFRleHQsIEFjdGl2aXR5SW5kaWNhdG9yLCBGbGF0TGlzdCB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7Cgpjb25zdCBBcHAgPSAoKSA9PiB7CiAgY29uc3QgW2RhdGEsIHNldERhdGFdID0gdXNlU3RhdGUoW10pOwogIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpOwoKICB1c2VFZmZlY3QoKCkgPT4gewogICAgZmV0Y2goJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cycpCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgLnRoZW4oanNvbiA9PiB7CiAgICAgICAgc2V0RGF0YShqc29uKTsKICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTsKICAgICAgfSkKICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTsKICAgICAgfSk7CiAgfSwgW10pOwoKICBpZiAobG9hZGluZykgewogICAgcmV0dXJuIDxBY3Rpdml0eUluZGljYXRvciBzaXplPSJsYXJnZSIgY29sb3I9IiMwMDAwZmYiIC8+OwogIH0KCiAgcmV0dXJuICgKICAgIDxWaWV3PgogICAgICA8RmxhdExpc3QKICAgICAgICBkYXRhPXtkYXRhfQogICAgICAgIGtleUV4dHJhY3Rvcj17aXRlbSA9PiBpdGVtLmlkLnRvU3RyaW5nKCl9CiAgICAgICAgcmVuZGVySXRlbT17KHsgaXRlbSB9KSA9PiAoCiAgICAgICAgICA8Vmlldz4KICAgICAgICAgICAgPFRleHQ+e2l0ZW0udGl0bGV9PC9UZXh0PgogICAgICAgICAgICA8VGV4dD57aXRlbS5ib2R5fTwvVGV4dD4KICAgICAgICAgIDwvVmlldz4KICAgICAgICApfQogICAgICAvPgogICAgPC9WaWV3PgogICk7Cn07CgpleHBvcnQgZGVmYXVsdCBBcHA7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React, { useEffect, useState } from 'react';
import { View, Text, ActivityIndicator, FlatList } from 'react-native';

const App = () =&gt; {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() =&gt; {
    fetch('https://jsonplaceholder.typicode.com/posts')
      .then(response =&gt; response.json())
      .then(json =&gt; {
        setData(json);
        setLoading(false);
      })
      .catch(error =&gt; {
        console.error(error);
        setLoading(false);
      });
  }, []);

  if (loading) {
    return &lt;ActivityIndicator size=&quot;large&quot; color=&quot;#0000ff&quot; /&gt;;
  }

  return (
    &lt;View&gt;
      &lt;FlatList
        data={data}
        keyExtractor={item =&gt; item.id.toString()}
        renderItem={({ item }) =&gt; (
          &lt;View&gt;
            &lt;Text&gt;{item.title}&lt;/Text&gt;
            &lt;Text&gt;{item.body}&lt;/Text&gt;
          &lt;/View&gt;
        )}
      /&gt;
    &lt;/View&gt;
  );
};

export default App;</pre></div><div class='content'></div><h2>Usant Axios</h2>
<div class='content'><p>Axios és una biblioteca popular per fer sol·licituds HTTP. Proporciona una API més potent i flexible en comparació amb l'API Fetch.</p>
<h4>Exemple: Obtenir Dades amb Axios</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IFZpZXcsIFRleHQsIEFjdGl2aXR5SW5kaWNhdG9yLCBGbGF0TGlzdCB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7Cgpjb25zdCBBcHAgPSAoKSA9PiB7CiAgY29uc3QgW2RhdGEsIHNldERhdGFdID0gdXNlU3RhdGUoW10pOwogIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpOwoKICB1c2VFZmZlY3QoKCkgPT4gewogICAgYXhpb3MuZ2V0KCdodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vcG9zdHMnKQogICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgc2V0RGF0YShyZXNwb25zZS5kYXRhKTsKICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTsKICAgICAgfSkKICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICBzZXRMb2FkaW5nKGZhbHNlKTsKICAgICAgfSk7CiAgfSwgW10pOwoKICBpZiAobG9hZGluZykgewogICAgcmV0dXJuIDxBY3Rpdml0eUluZGljYXRvciBzaXplPSJsYXJnZSIgY29sb3I9IiMwMDAwZmYiIC8+OwogIH0KCiAgcmV0dXJuICgKICAgIDxWaWV3PgogICAgICA8RmxhdExpc3QKICAgICAgICBkYXRhPXtkYXRhfQogICAgICAgIGtleUV4dHJhY3Rvcj17aXRlbSA9PiBpdGVtLmlkLnRvU3RyaW5nKCl9CiAgICAgICAgcmVuZGVySXRlbT17KHsgaXRlbSB9KSA9PiAoCiAgICAgICAgICA8Vmlldz4KICAgICAgICAgICAgPFRleHQ+e2l0ZW0udGl0bGV9PC9UZXh0PgogICAgICAgICAgICA8VGV4dD57aXRlbS5ib2R5fTwvVGV4dD4KICAgICAgICAgIDwvVmlldz4KICAgICAgICApfQogICAgICAvPgogICAgPC9WaWV3PgogICk7Cn07CgpleHBvcnQgZGVmYXVsdCBBcHA7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React, { useEffect, useState } from 'react';
import { View, Text, ActivityIndicator, FlatList } from 'react-native';
import axios from 'axios';

const App = () =&gt; {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() =&gt; {
    axios.get('https://jsonplaceholder.typicode.com/posts')
      .then(response =&gt; {
        setData(response.data);
        setLoading(false);
      })
      .catch(error =&gt; {
        console.error(error);
        setLoading(false);
      });
  }, []);

  if (loading) {
    return &lt;ActivityIndicator size=&quot;large&quot; color=&quot;#0000ff&quot; /&gt;;
  }

  return (
    &lt;View&gt;
      &lt;FlatList
        data={data}
        keyExtractor={item =&gt; item.id.toString()}
        renderItem={({ item }) =&gt; (
          &lt;View&gt;
            &lt;Text&gt;{item.title}&lt;/Text&gt;
            &lt;Text&gt;{item.body}&lt;/Text&gt;
          &lt;/View&gt;
        )}
      /&gt;
    &lt;/View&gt;
  );
};

export default App;</pre></div><div class='content'></div><h1>Gestionar Errors</h1>
<div class='content'><p>Una correcta gestió d'errors és essencial per proporcionar una bona experiència d'usuari i per depurar problemes de manera efectiva.</p>
</div><h2>Exemple: Gestió d'Errors amb l'API Fetch</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlRWZmZWN0KCgpID0+IHsKICBmZXRjaCgnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3Bvc3RzJykKICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignTGEgcmVzcG9zdGEgZGUgbGEgeGFyeGEgbm8gdmEgc2VyIGNvcnJlY3RhJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgIH0pCiAgICAudGhlbihqc29uID0+IHsKICAgICAgc2V0RGF0YShqc29uKTsKICAgICAgc2V0TG9hZGluZyhmYWxzZSk7CiAgICB9KQogICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgY29uc29sZS5lcnJvcignSGkgdmEgaGF2ZXIgdW4gcHJvYmxlbWEgYW1iIGwnb3BlcmFjacOzIGRlIGZldGNoOicsIGVycm9yKTsKICAgICAgc2V0TG9hZGluZyhmYWxzZSk7CiAgICB9KTsKfSwgW10pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>useEffect(() =&gt; {
  fetch('https://jsonplaceholder.typicode.com/posts')
    .then(response =&gt; {
      if (!response.ok) {
        throw new Error('La resposta de la xarxa no va ser correcta');
      }
      return response.json();
    })
    .then(json =&gt; {
      setData(json);
      setLoading(false);
    })
    .catch(error =&gt; {
      console.error('Hi va haver un problema amb l'operaci&oacute; de fetch:', error);
      setLoading(false);
    });
}, []);</pre></div><div class='content'></div><h2>Exemple: Gestió d'Errors amb Axios</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlRWZmZWN0KCgpID0+IHsKICBheGlvcy5nZXQoJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cycpCiAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIHNldERhdGEocmVzcG9uc2UuZGF0YSk7CiAgICAgIHNldExvYWRpbmcoZmFsc2UpOwogICAgfSkKICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ0hpIHZhIGhhdmVyIHVuIHByb2JsZW1hIGFtYiBsYSBzb2zCt2xpY2l0dWQgZCdheGlvczonLCBlcnJvcik7CiAgICAgIHNldExvYWRpbmcoZmFsc2UpOwogICAgfSk7Cn0sIFtdKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>useEffect(() =&gt; {
  axios.get('https://jsonplaceholder.typicode.com/posts')
    .then(response =&gt; {
      setData(response.data);
      setLoading(false);
    })
    .catch(error =&gt; {
      console.error('Hi va haver un problema amb la sol&middot;licitud d'axios:', error);
      setLoading(false);
    });
}, []);</pre></div><div class='content'></div><h1>Tècniques Avançades</h1>
<div class='content'></div><h2>Usant Async/Await</h2>
<div class='content'><p>La sintaxi async/await fa que el codi asíncron sembli i es comporti més com el codi síncron, cosa que és més fàcil de llegir i depurar.</p>
<h4>Exemple: Obtenir Dades amb Async/Await</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlRWZmZWN0KCgpID0+IHsKICBjb25zdCBmZXRjaERhdGEgPSBhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vcG9zdHMnKTsKICAgICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignTGEgcmVzcG9zdGEgZGUgbGEgeGFyeGEgbm8gdmEgc2VyIGNvcnJlY3RhJyk7CiAgICAgIH0KICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgc2V0RGF0YShqc29uKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ0hpIHZhIGhhdmVyIHVuIHByb2JsZW1hIGFtYiBsJ29wZXJhY2nDsyBkZSBmZXRjaDonLCBlcnJvcik7CiAgICB9IGZpbmFsbHkgewogICAgICBzZXRMb2FkaW5nKGZhbHNlKTsKICAgIH0KICB9OwoKICBmZXRjaERhdGEoKTsKfSwgW10pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>useEffect(() =&gt; {
  const fetchData = async () =&gt; {
    try {
      const response = await fetch('https://jsonplaceholder.typicode.com/posts');
      if (!response.ok) {
        throw new Error('La resposta de la xarxa no va ser correcta');
      }
      const json = await response.json();
      setData(json);
    } catch (error) {
      console.error('Hi va haver un problema amb l'operaci&oacute; de fetch:', error);
    } finally {
      setLoading(false);
    }
  };

  fetchData();
}, []);</pre></div><div class='content'></div><h2>Usant Axios amb Async/Await</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlRWZmZWN0KCgpID0+IHsKICBjb25zdCBmZXRjaERhdGEgPSBhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3Bvc3RzJyk7CiAgICAgIHNldERhdGEocmVzcG9uc2UuZGF0YSk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICBjb25zb2xlLmVycm9yKCdIaSB2YSBoYXZlciB1biBwcm9ibGVtYSBhbWIgbGEgc29swrdsaWNpdHVkIGQnYXhpb3M6JywgZXJyb3IpOwogICAgfSBmaW5hbGx5IHsKICAgICAgc2V0TG9hZGluZyhmYWxzZSk7CiAgICB9CiAgfTsKCiAgZmV0Y2hEYXRhKCk7Cn0sIFtdKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>useEffect(() =&gt; {
  const fetchData = async () =&gt; {
    try {
      const response = await axios.get('https://jsonplaceholder.typicode.com/posts');
      setData(response.data);
    } catch (error) {
      console.error('Hi va haver un problema amb la sol&middot;licitud d'axios:', error);
    } finally {
      setLoading(false);
    }
  };

  fetchData();
}, []);</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>Gestionar les respostes de l'API en React Native implica entendre els mètodes HTTP, els codis d'estat i JSON. Pots usar l'API Fetch o Axios per fer sol·licituds de xarxa. Una correcta gestió d'errors i l'ús de la sintaxi async/await poden ajudar a fer que el teu codi sigui més llegible i robust. En dominar aquestes tècniques, podràs construir aplicacions més fiables i fàcils d'usar.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
