<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducció al Mocking</title>

    <link rel="alternate" href="https://campusempresa.com/es/junit/introduction-to-mocking" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/junit/introduction-to-mocking" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/junit/introduction-to-mocking" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/junit/introduction-to-mocking" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Què és el Mocking?</h1>
<div class='content'><p>El Mocking és una tècnica utilitzada en les proves unitàries per simular el comportament d'objectes reals i complexos. Això et permet aïllar el codi que estàs provant i centrar-te en la seva funcionalitat sense preocupar-te per les dependències.</p>
<ul>
<li><strong>Propòsit</strong>: Provar una unitat de codi en aïllament.</li>
<li><strong>Beneficis</strong>:
<ul>
<li><strong>Aïllament</strong>: Provar només el codi en qüestió.</li>
<li><strong>Velocitat</strong>: Proves més ràpides ja que no s'invoquen dependències externes.</li>
<li><strong>Control</strong>: Simular diversos escenaris i casos límit.</li>
</ul>
</li>
</ul>
</div><h1>Per què utilitzar Mocking en JUnit?</h1>
<div class='content'><p>JUnit és un marc de proves popular per a Java. El Mocking en JUnit ajuda a:</p>
<ul>
<li>Aïllar la unitat de codi que s'està provant.</li>
<li>Simular diferents comportaments de les dependències.</li>
<li>Assegurar que les proves siguin fiables i repetibles.</li>
</ul>
</div><h1>Frameworks de Mocking</h1>
<div class='content'><p>Diversos frameworks es poden utilitzar per al Mocking en JUnit, incloent:</p>
<ul>
<li><strong>Mockito</strong>: El framework de mocking més utilitzat.</li>
<li><strong>EasyMock</strong>: Una altra opció popular, encara que menys utilitzada que Mockito.</li>
<li><strong>JMock</strong>: Un framework més antic, menys utilitzat avui en dia.</li>
</ul>
</div><h1>Configuració de Mockito</h1>
<div class='content'><p>Per utilitzar Mockito amb JUnit, has d'afegir la dependència de Mockito al teu projecte.</p>
</div><h2>Dependència de Maven</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcubW9ja2l0bzwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPm1vY2tpdG8tY29yZTwvYXJ0aWZhY3RJZD4KICAgIDx2ZXJzaW9uPjQuMC4wPC92ZXJzaW9uPgogICAgPHNjb3BlPnRlc3Q8L3Njb3BlPgo8L2RlcGVuZGVuY3k+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependency&gt;
    &lt;groupId&gt;org.mockito&lt;/groupId&gt;
    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
    &lt;version&gt;4.0.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'></div><h2>Dependència de Gradle</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVzdEltcGxlbWVudGF0aW9uICdvcmcubW9ja2l0bzptb2NraXRvLWNvcmU6NC4wLjAn"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>testImplementation 'org.mockito:mockito-core:4.0.0'</pre></div><div class='content'></div><h1>Exemple bàsic de Mocking</h1>
<div class='content'><p>Comencem amb un exemple senzill per entendre com funciona el mocking.</p>
</div><h2>Escenari d'Exemple</h2>
<div class='content'><p>Suposem que tenim una classe <code>UserService</code> que depèn d'un <code>UserRepository</code> per obtenir dades d'usuari.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlIHsKICAgIHByaXZhdGUgVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnk7CgogICAgcHVibGljIFVzZXJTZXJ2aWNlKFVzZXJSZXBvc2l0b3J5IHVzZXJSZXBvc2l0b3J5KSB7CiAgICAgICAgdGhpcy51c2VyUmVwb3NpdG9yeSA9IHVzZXJSZXBvc2l0b3J5OwogICAgfQoKICAgIHB1YmxpYyBVc2VyIGdldFVzZXJCeUlkKGludCBpZCkgewogICAgICAgIHJldHVybiB1c2VyUmVwb3NpdG9yeS5maW5kQnlJZChpZCk7CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class UserService {
    private UserRepository userRepository;

    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public User getUserById(int id) {
        return userRepository.findById(id);
    }
}</pre></div><div class='content'></div><h2>Creació d'un Mock</h2>
<div class='content'><p>Crearem un mock de <code>UserRepository</code> per provar <code>UserService</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHN0YXRpYyBvcmcubW9ja2l0by5Nb2NraXRvLio7CmltcG9ydCBvcmcuanVuaXQuanVwaXRlci5hcGkuVGVzdDsKaW1wb3J0IHN0YXRpYyBvcmcuanVuaXQuanVwaXRlci5hcGkuQXNzZXJ0aW9ucy4qOwoKcHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlVGVzdCB7CgogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RHZXRVc2VyQnlJZCgpIHsKICAgICAgICAvLyBDcmVhciB1biBtb2NrIGRlIFVzZXJSZXBvc2l0b3J5CiAgICAgICAgVXNlclJlcG9zaXRvcnkgbW9ja1JlcG9zaXRvcnkgPSBtb2NrKFVzZXJSZXBvc2l0b3J5LmNsYXNzKTsKCiAgICAgICAgLy8gRGVmaW5pciBlbCBjb21wb3J0YW1lbnQgZGVsIG1vY2sKICAgICAgICBVc2VyIG1vY2tVc2VyID0gbmV3IFVzZXIoMSwgIkpvaG4gRG9lIik7CiAgICAgICAgd2hlbihtb2NrUmVwb3NpdG9yeS5maW5kQnlJZCgxKSkudGhlblJldHVybihtb2NrVXNlcik7CgogICAgICAgIC8vIEluamVjdGFyIGVsIG1vY2sgYSBVc2VyU2VydmljZQogICAgICAgIFVzZXJTZXJ2aWNlIHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKG1vY2tSZXBvc2l0b3J5KTsKCiAgICAgICAgLy8gQ3JpZGFyIGVsIG3DqHRvZGUgYSBwcm92YXIKICAgICAgICBVc2VyIHVzZXIgPSB1c2VyU2VydmljZS5nZXRVc2VyQnlJZCgxKTsKCiAgICAgICAgLy8gVmVyaWZpY2FyIGVsIHJlc3VsdGF0CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJKb2huIERvZSIsIHVzZXIuZ2V0TmFtZSgpKTsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import static org.mockito.Mockito.*;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

public class UserServiceTest {

    @Test
    public void testGetUserById() {
        // Crear un mock de UserRepository
        UserRepository mockRepository = mock(UserRepository.class);

        // Definir el comportament del mock
        User mockUser = new User(1, &quot;John Doe&quot;);
        when(mockRepository.findById(1)).thenReturn(mockUser);

        // Injectar el mock a UserService
        UserService userService = new UserService(mockRepository);

        // Cridar el m&egrave;tode a provar
        User user = userService.getUserById(1);

        // Verificar el resultat
        assertEquals(&quot;John Doe&quot;, user.getName());
    }
}</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>Creació d'un Mock</strong>: <code>mock(UserRepository.class)</code> crea un objecte mock de <code>UserRepository</code>.</li>
<li><strong>Definició del Comportament</strong>: <code>when(mockRepository.findById(1)).thenReturn(mockUser)</code> especifica que quan es cridi <code>findById(1)</code> en el mock, hauria de retornar <code>mockUser</code>.</li>
<li><strong>Injecció del Mock</strong>: El mock es passa al constructor de <code>UserService</code>.</li>
<li><strong>Verificació del Resultat</strong>: La prova comprova si l'usuari retornat té el nom esperat.</li>
</ul>
</div><h1>Tècniques avançades de Mocking</h1>
<h2>Verificació d'Interaccions</h2>
<div class='content'><p>Pots verificar si s'han cridat certs mètodes en el mock.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmVyaWZ5KG1vY2tSZXBvc2l0b3J5KS5maW5kQnlJZCgxKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>verify(mockRepository).findById(1);</pre></div><div class='content'></div><h2>Stubbing de Mètodes Void</h2>
<div class='content'><p>Per a mètodes que retornen <code>void</code>, pots utilitzar <code>doNothing()</code>, <code>doThrow()</code>, etc.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9Ob3RoaW5nKCkud2hlbihtb2NrUmVwb3NpdG9yeSkuZGVsZXRlQnlJZCgxKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>doNothing().when(mockRepository).deleteById(1);</pre></div><div class='content'></div><h2>Argument Matchers</h2>
<div class='content'><p>Mockito proporciona matchers per especificar una coincidència flexible d'arguments.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("d2hlbihtb2NrUmVwb3NpdG9yeS5maW5kQnlJZChhbnlJbnQoKSkpLnRoZW5SZXR1cm4obW9ja1VzZXIpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>when(mockRepository.findById(anyInt())).thenReturn(mockUser);</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>El Mocking és una tècnica poderosa en les proves unitàries que et permet aïllar el codi sota prova simulant les dependències. Utilitzant frameworks com Mockito amb JUnit, pots crear mocks, definir el seu comportament i verificar interaccions per assegurar-te que el teu codi funciona com s'espera. Això ajuda a escriure proves fiables, ràpides i mantenibles.</p>
<p>Dominant el mocking, pots millorar significativament la qualitat de les teves proves unitàries i, conseqüentment, la robustesa del teu codi.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
