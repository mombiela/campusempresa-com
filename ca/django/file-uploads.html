<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carregues de Fitxers a Django</title>

    <link rel="alternate" href="https://campusempresa.com/es/django/file-uploads" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/django/file-uploads" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/django/file-uploads" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/django/file-uploads" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='signals'>&#x25C4;Senyalitzacions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Carregues de Fitxers a Django</a>
	</div>
	<div class='col-4 text-end'>
					<a href='caching'>Caché &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>Les carregues de fitxers són una característica comuna en aplicacions web, permetent als usuaris carregar fitxers com imatges, documents i vídeos. A Django, gestionar les carregues de fitxers és senzill gràcies al seu suport integrat. Aquesta secció et guiarà a través del procés d'implementar carregues de fitxers en una aplicació Django, des de la configuració bàsica fins a configuracions avançades.</p>
</div><h1>Configurant el Teu Projecte Django</h1>
<div class='content'><p>Abans de submergir-te en les carregues de fitxers, assegura't de tenir un projecte Django configurat. Si no, crea'n un utilitzant les següents comandes:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGphbmdvLWFkbWluIHN0YXJ0cHJvamVjdCBteXByb2plY3QKY2QgbXlwcm9qZWN0CnB5dGhvbiBtYW5hZ2UucHkgc3RhcnRhcHAgbXlhcHA="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>django-admin startproject myproject
cd myproject
python manage.py startapp myapp</pre></div><div class='content'><p>Afegeix <code>myapp</code> a la llista <code>INSTALLED_APPS</code> a <code>myproject/settings.py</code>.</p>
</div><h1>Configurant Fitxers de Mitjans</h1>
<div class='content'><p>Django requereix una mica de configuració per gestionar fitxers de mitjans (fitxers carregats). Afegeix les següents configuracions a <code>myproject/settings.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzZXR0aW5ncy5weQoKTUVESUFfVVJMID0gJy9tZWRpYS8nCk1FRElBX1JPT1QgPSBCQVNFX0RJUiAvICdtZWRpYSc="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># settings.py

MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'</pre></div><div class='content'><ul>
<li><code>MEDIA_URL</code>: La URL que serveix els fitxers de mitjans.</li>
<li><code>MEDIA_ROOT</code>: El camí del sistema de fitxers on es guarden els fitxers carregats.</li>
</ul>
</div><h1>Creant un Model per a les Carregues de Fitxers</h1>
<div class='content'><p>Crea un model per gestionar les carregues de fitxers a <code>myapp/models.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBtb2RlbHMucHkKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtb2RlbHMKCmNsYXNzIERvY3VtZW50KG1vZGVscy5Nb2RlbCk6CiAgICB0aXRsZSA9IG1vZGVscy5DaGFyRmllbGQobWF4X2xlbmd0aD0xMDApCiAgICB1cGxvYWRlZF9maWxlID0gbW9kZWxzLkZpbGVGaWVsZCh1cGxvYWRfdG89J2RvY3VtZW50cy8nKQogICAgdXBsb2FkZWRfYXQgPSBtb2RlbHMuRGF0ZVRpbWVGaWVsZChhdXRvX25vd19hZGQ9VHJ1ZSk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># models.py

from django.db import models

class Document(models.Model):
    title = models.CharField(max_length=100)
    uploaded_file = models.FileField(upload_to='documents/')
    uploaded_at = models.DateTimeField(auto_now_add=True)</pre></div><div class='content'><ul>
<li><code>title</code>: Un títol simple per al fitxer carregat.</li>
<li><code>uploaded_file</code>: El camp de fitxer on es guarda el fitxer carregat.</li>
<li><code>uploaded_at</code>: La marca de temps quan es va carregar el fitxer.</li>
</ul>
<p>Executa les següents comandes per crear i aplicar les migracions:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0aG9uIG1hbmFnZS5weSBtYWtlbWlncmF0aW9ucwpweXRob24gbWFuYWdlLnB5IG1pZ3JhdGU="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>python manage.py makemigrations
python manage.py migrate</pre></div><div class='content'></div><h1>Creant un Formulari per a les Carregues de Fitxers</h1>
<div class='content'><p>Crea un formulari per gestionar les carregues de fitxers a <code>myapp/forms.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBmb3Jtcy5weQoKZnJvbSBkamFuZ28gaW1wb3J0IGZvcm1zCmZyb20gLm1vZGVscyBpbXBvcnQgRG9jdW1lbnQKCmNsYXNzIERvY3VtZW50Rm9ybShmb3Jtcy5Nb2RlbEZvcm0pOgogICAgY2xhc3MgTWV0YToKICAgICAgICBtb2RlbCA9IERvY3VtZW50CiAgICAgICAgZmllbGRzID0gWyd0aXRsZScsICd1cGxvYWRlZF9maWxlJ10="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># forms.py

from django import forms
from .models import Document

class DocumentForm(forms.ModelForm):
    class Meta:
        model = Document
        fields = ['title', 'uploaded_file']</pre></div><div class='content'></div><h1>Gestionant les Carregues de Fitxers a les Vistes</h1>
<div class='content'><p>Crea una vista per gestionar el procés de càrrega de fitxers a <code>myapp/views.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2aWV3cy5weQoKZnJvbSBkamFuZ28uc2hvcnRjdXRzIGltcG9ydCByZW5kZXIsIHJlZGlyZWN0CmZyb20gLmZvcm1zIGltcG9ydCBEb2N1bWVudEZvcm0KZnJvbSAubW9kZWxzIGltcG9ydCBEb2N1bWVudAoKZGVmIHVwbG9hZF9maWxlKHJlcXVlc3QpOgogICAgaWYgcmVxdWVzdC5tZXRob2QgPT0gJ1BPU1QnOgogICAgICAgIGZvcm0gPSBEb2N1bWVudEZvcm0ocmVxdWVzdC5QT1NULCByZXF1ZXN0LkZJTEVTKQogICAgICAgIGlmIGZvcm0uaXNfdmFsaWQoKToKICAgICAgICAgICAgZm9ybS5zYXZlKCkKICAgICAgICAgICAgcmV0dXJuIHJlZGlyZWN0KCdmaWxlX3VwbG9hZF9zdWNjZXNzJykKICAgIGVsc2U6CiAgICAgICAgZm9ybSA9IERvY3VtZW50Rm9ybSgpCiAgICByZXR1cm4gcmVuZGVyKHJlcXVlc3QsICd1cGxvYWQuaHRtbCcsIHsnZm9ybSc6IGZvcm19KQoKZGVmIGZpbGVfdXBsb2FkX3N1Y2Nlc3MocmVxdWVzdCk6CiAgICByZXR1cm4gcmVuZGVyKHJlcXVlc3QsICd1cGxvYWRfc3VjY2Vzcy5odG1sJyk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># views.py

from django.shortcuts import render, redirect
from .forms import DocumentForm
from .models import Document

def upload_file(request):
    if request.method == 'POST':
        form = DocumentForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return redirect('file_upload_success')
    else:
        form = DocumentForm()
    return render(request, 'upload.html', {'form': form})

def file_upload_success(request):
    return render(request, 'upload_success.html')</pre></div><div class='content'><ul>
<li><code>upload_file</code>: Gestiona les sol·licituds GET i POST per a les carregues de fitxers.</li>
<li><code>file_upload_success</code>: Una vista simple per mostrar un missatge d'èxit després de carregar un fitxer.</li>
</ul>
</div><h1>Creant Plantilles</h1>
<div class='content'><p>Crea plantilles per renderitzar el formulari de càrrega de fitxers i el missatge d'èxit.</p>
</div><h2>`upload.html`</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSB1cGxvYWQuaHRtbCAtLT4KCjwhRE9DVFlQRSBodG1sPgo8aHRtbD4KPGhlYWQ+CiAgICA8dGl0bGU+Q2FycmVnYXIgRml0eGVyPC90aXRsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxoMT5DYXJyZWdhciBGaXR4ZXI8L2gxPgogICAgPGZvcm0gbWV0aG9kPSJwb3N0IiBlbmN0eXBlPSJtdWx0aXBhcnQvZm9ybS1kYXRhIj4KICAgICAgICB7JSBjc3JmX3Rva2VuICV9CiAgICAgICAge3sgZm9ybS5hc19wIH19CiAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiPkNhcnJlZ2FyPC9idXR0b24+CiAgICA8L2Zvcm0+CjwvYm9keT4KPC9odG1sPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- upload.html --&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Carregar Fitxer&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Carregar Fitxer&lt;/h1&gt;
    &lt;form method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
        {% csrf_token %}
        {{ form.as_p }}
        &lt;button type=&quot;submit&quot;&gt;Carregar&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h2>`upload_success.html`</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSB1cGxvYWRfc3VjY2Vzcy5odG1sIC0tPgoKPCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT5Dw6BycmVnYSBFeGl0b3NhPC90aXRsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxoMT5GaXR4ZXIgQ2FycmVnYXQgYW1iIMOIeGl0ITwvaDE+CjwvYm9keT4KPC9odG1sPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- upload_success.html --&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;C&agrave;rrega Exitosa&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Fitxer Carregat amb &Egrave;xit!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h1>Configurant URLs</h1>
<div class='content'><p>Afegeix patrons d'URL per gestionar les vistes de càrrega de fitxers a <code>myapp/urls.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB1cmxzLnB5Cgpmcm9tIGRqYW5nby51cmxzIGltcG9ydCBwYXRoCmZyb20gLiBpbXBvcnQgdmlld3MKCnVybHBhdHRlcm5zID0gWwogICAgcGF0aCgndXBsb2FkLycsIHZpZXdzLnVwbG9hZF9maWxlLCBuYW1lPSd1cGxvYWRfZmlsZScpLAogICAgcGF0aCgndXBsb2FkL3N1Y2Nlc3MvJywgdmlld3MuZmlsZV91cGxvYWRfc3VjY2VzcywgbmFtZT0nZmlsZV91cGxvYWRfc3VjY2VzcycpLApd"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># urls.py

from django.urls import path
from . import views

urlpatterns = [
    path('upload/', views.upload_file, name='upload_file'),
    path('upload/success/', views.file_upload_success, name='file_upload_success'),
]</pre></div><div class='content'><p>Inclou aquestes URLs al <code>urls.py</code> del projecte principal i configura el servei de fitxers de mitjans durant el desenvolupament:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBteXByb2plY3QvdXJscy5weQoKZnJvbSBkamFuZ28uY29uZiBpbXBvcnQgc2V0dGluZ3MKZnJvbSBkamFuZ28uY29uZi51cmxzLnN0YXRpYyBpbXBvcnQgc3RhdGljCmZyb20gZGphbmdvLmNvbnRyaWIgaW1wb3J0IGFkbWluCmZyb20gZGphbmdvLnVybHMgaW1wb3J0IHBhdGgsIGluY2x1ZGUKCnVybHBhdHRlcm5zID0gWwogICAgcGF0aCgnYWRtaW4vJywgYWRtaW4uc2l0ZS51cmxzKSwKICAgIHBhdGgoJ215YXBwLycsIGluY2x1ZGUoJ215YXBwLnVybHMnKSksCl0KCmlmIHNldHRpbmdzLkRFQlVHOgogICAgdXJscGF0dGVybnMgKz0gc3RhdGljKHNldHRpbmdzLk1FRElBX1VSTCwgZG9jdW1lbnRfcm9vdD1zZXR0aW5ncy5NRURJQV9ST09UKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># myproject/urls.py

from django.conf import settings
from django.conf.urls.static import static
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('myapp/', include('myapp.urls')),
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>En aquesta secció, has après com implementar carregues de fitxers en una aplicació Django. Hem cobert:</p>
<ul>
<li>Configurant fitxers de mitjans a les configuracions de Django.</li>
<li>Creant un model per emmagatzemar fitxers carregats.</li>
<li>Construint un formulari per gestionar les carregues de fitxers.</li>
<li>Escriure vistes per processar les carregues de fitxers.</li>
<li>Creant plantilles per renderitzar el formulari de càrrega i el missatge d'èxit.</li>
<li>Configurant URLs per gestionar les sol·licituds de càrrega de fitxers.</li>
</ul>
<p>Amb aquests passos, ara pots gestionar les carregues de fitxers a les teves aplicacions Django, proporcionant una característica robusta i fàcil d'usar per als teus usuaris.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='signals'>&#x25C4;Senyalitzacions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Carregues de Fitxers a Django</a>
	</div>
	<div class='col-4 text-end'>
					<a href='caching'>Caché &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
