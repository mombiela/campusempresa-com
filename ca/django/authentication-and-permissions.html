<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autenticació i Permisos</title>

    <link rel="alternate" href="https://campusempresa.com/es/django/authentication-and-permissions" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/django/authentication-and-permissions" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/django/authentication-and-permissions" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/django/authentication-and-permissions" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='viewsets-and-routers'>&#x25C4;ViewSets i Routers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Autenticació i Permisos</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-blog-application'>Construint una Aplicació de Blog &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En aquesta secció, explorarem com Django gestiona l'autenticació i els permisos. L'autenticació és el procés de verificar la identitat d'un usuari, mentre que els permisos determinen què pot fer un usuari autenticat. Cobrirem els següents temes:</p>
<ul>
<li>Sistema d'autenticació integrat de Django</li>
<li>Model d'usuari i gestió d'usuaris</li>
<li>Permisos i autorització</li>
<li>Personalització de l'autenticació i els permisos</li>
</ul>
</div><h1>Sistema d'Autenticació Integrat de Django</h1>
<div class='content'><p>Django proporciona un sistema d'autenticació robust i flexible de manera predeterminada. Això inclou l'inici de sessió d'usuaris, tancament de sessió, gestió de contrasenyes, i més.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Model d'Usuari</strong>: Representa un usuari en el sistema.</li>
<li><strong>Autenticació</strong>: Verificar la identitat d'un usuari.</li>
<li><strong>Autorització</strong>: Determinar què pot fer un usuari autenticat.</li>
<li><strong>Sessions</strong>: Mecanisme per mantenir l'estat de l'usuari entre sol·licituds.</li>
</ul>
</div><h2>Configuració Bàsica</h2>
<div class='content'><p>Per utilitzar el sistema d'autenticació de Django, assegura't que <code>django.contrib.auth</code> i <code>django.contrib.contenttypes</code> estan inclosos en la teva configuració <code>INSTALLED_APPS</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzZXR0aW5ncy5weQpJTlNUQUxMRURfQVBQUyA9IFsKICAgIC4uLgogICAgJ2RqYW5nby5jb250cmliLmF1dGgnLAogICAgJ2RqYW5nby5jb250cmliLmNvbnRlbnR0eXBlcycsCiAgICAuLi4KXQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># settings.py
INSTALLED_APPS = [
    ...
    'django.contrib.auth',
    'django.contrib.contenttypes',
    ...
]</pre></div><div class='content'></div><h1>Model d'Usuari i Gestió d'Usuaris</h1>
<div class='content'></div><h2>Creació i Gestió d'Usuaris</h2>
<div class='content'><p>Django proporciona un model <code>User</code> per defecte que es pot utilitzar per crear i gestionar usuaris.</p>
<h4>Creació d'un Usuari</h4>
<p>Pots crear un usuari utilitzant la shell de Django o dins de les teves vistes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVdGlsaXR6YW50IGxhIHNoZWxsIGRlIERqYW5nbwpmcm9tIGRqYW5nby5jb250cmliLmF1dGgubW9kZWxzIGltcG9ydCBVc2VyCgp1c2VyID0gVXNlci5vYmplY3RzLmNyZWF0ZV91c2VyKCdqb2huJywgJ2pvaG5AZXhhbXBsZS5jb20nLCAncGFzc3dvcmQxMjMnKQp1c2VyLnNhdmUoKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Utilitzant la shell de Django
from django.contrib.auth.models import User

user = User.objects.create_user('john', 'john@example.com', 'password123')
user.save()</pre></div><div class='content'><h4>Autenticació d'un Usuari</h4>
<p>Per autenticar un usuari, utilitza la funció <code>authenticate</code> i després inicia la sessió amb la funció <code>login</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28uY29udHJpYi5hdXRoIGltcG9ydCBhdXRoZW50aWNhdGUsIGxvZ2luCgpkZWYgbXlfdmlldyhyZXF1ZXN0KToKICAgIHVzZXJuYW1lID0gcmVxdWVzdC5QT1NUWyd1c2VybmFtZSddCiAgICBwYXNzd29yZCA9IHJlcXVlc3QuUE9TVFsncGFzc3dvcmQnXQogICAgdXNlciA9IGF1dGhlbnRpY2F0ZShyZXF1ZXN0LCB1c2VybmFtZT11c2VybmFtZSwgcGFzc3dvcmQ9cGFzc3dvcmQpCiAgICBpZiB1c2VyIGlzIG5vdCBOb25lOgogICAgICAgIGxvZ2luKHJlcXVlc3QsIHVzZXIpCiAgICAgICAgIyBSZWRpcmlnaXIgYSB1bmEgcMOgZ2luYSBkJ8OoeGl0LgogICAgZWxzZToKICAgICAgICAjIFJldG9ybmFyIHVuIG1pc3NhdGdlIGQnZXJyb3IgZGUgJ2luaWNpIGRlIHNlc3Npw7MgaW52w6BsaWQnLg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.contrib.auth import authenticate, login

def my_view(request):
    username = request.POST['username']
    password = request.POST['password']
    user = authenticate(request, username=username, password=password)
    if user is not None:
        login(request, user)
        # Redirigir a una p&agrave;gina d'&egrave;xit.
    else:
        # Retornar un missatge d'error de 'inici de sessi&oacute; inv&agrave;lid'.</pre></div><div class='content'></div><h2>Gestió d'Usuaris a l'Administració</h2>
<div class='content'><p>La interfície d'administració de Django proporciona una manera convenient de gestionar usuaris. Assegura't d'haver creat un superusuari per accedir a la interfície d'administració.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0aG9uIG1hbmFnZS5weSBjcmVhdGVzdXBlcnVzZXI="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>python manage.py createsuperuser</pre></div><div class='content'></div><h1>Permisos i Autorització</h1>
<div class='content'></div><h2>Permisos Integrats</h2>
<div class='content'><p>Django proporciona una manera senzilla de gestionar permisos utilitzant els models <code>User</code> i <code>Group</code>.</p>
<h4>Permisos per Defecte</h4>
<p>Cada model a Django obté automàticament tres permisos: afegir, canviar i eliminar.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb21wcm92YWNpw7MgZGUgcGVybWlzb3MKdXNlci5oYXNfcGVybSgnYXBwX2xhYmVsLmFkZF9tb2RlbG5hbWUnKQp1c2VyLmhhc19wZXJtKCdhcHBfbGFiZWwuY2hhbmdlX21vZGVsbmFtZScpCnVzZXIuaGFzX3Blcm0oJ2FwcF9sYWJlbC5kZWxldGVfbW9kZWxuYW1lJyk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Comprovaci&oacute; de permisos
user.has_perm('app_label.add_modelname')
user.has_perm('app_label.change_modelname')
user.has_perm('app_label.delete_modelname')</pre></div><div class='content'></div><h2>Permisos Personalitzats</h2>
<div class='content'><p>Pots definir permisos personalitzats en els teus models.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBtb2RlbHMucHkKZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1vZGVscwoKY2xhc3MgTXlNb2RlbChtb2RlbHMuTW9kZWwpOgogICAgLi4uCiAgICBjbGFzcyBNZXRhOgogICAgICAgIHBlcm1pc3Npb25zID0gWwogICAgICAgICAgICAoImNhbl9wdWJsaXNoIiwgIlBvdCBwdWJsaWNhciBlbnRyYWRlcyIpLAogICAgICAgIF0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># models.py
from django.db import models

class MyModel(models.Model):
    ...
    class Meta:
        permissions = [
            (&quot;can_publish&quot;, &quot;Pot publicar entrades&quot;),
        ]</pre></div><div class='content'></div><h2>Ús de Permisos en Vistes</h2>
<div class='content'><p>Pots utilitzar el decorador <code>permission_required</code> per restringir l'accés a vistes basant-se en permisos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28uY29udHJpYi5hdXRoLmRlY29yYXRvcnMgaW1wb3J0IHBlcm1pc3Npb25fcmVxdWlyZWQKCkBwZXJtaXNzaW9uX3JlcXVpcmVkKCdhcHBfbGFiZWwuY2FuX3B1Ymxpc2gnKQpkZWYgbXlfdmlldyhyZXF1ZXN0KToKICAgIC4uLg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.contrib.auth.decorators import permission_required

@permission_required('app_label.can_publish')
def my_view(request):
    ...</pre></div><div class='content'></div><h1>Personalització de l'Autenticació i els Permisos</h1>
<div class='content'></div><h2>Model d'Usuari Personalitzat</h2>
<div class='content'><p>Per a requisits d'usuari més complexos, pots crear un model d'usuari personalitzat.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBtb2RlbHMucHkKZnJvbSBkamFuZ28uY29udHJpYi5hdXRoLm1vZGVscyBpbXBvcnQgQWJzdHJhY3RVc2VyCgpjbGFzcyBDdXN0b21Vc2VyKEFic3RyYWN0VXNlcik6CiAgICAjIEFmZWdlaXggY2FtcHMgYWRkaWNpb25hbHMgYXF1w60KICAgIGJpbyA9IG1vZGVscy5UZXh0RmllbGQoYmxhbms9VHJ1ZSwgbnVsbD1UcnVlKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># models.py
from django.contrib.auth.models import AbstractUser

class CustomUser(AbstractUser):
    # Afegeix camps addicionals aqu&iacute;
    bio = models.TextField(blank=True, null=True)</pre></div><div class='content'></div><h2>Backends d'Autenticació Personalitzats</h2>
<div class='content'><p>Pots crear backends d'autenticació personalitzats per implementar lògica d'autenticació personalitzada.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBiYWNrZW5kcy5weQpmcm9tIGRqYW5nby5jb250cmliLmF1dGguYmFja2VuZHMgaW1wb3J0IEJhc2VCYWNrZW5kCmZyb20gZGphbmdvLmNvbnRyaWIuYXV0aC5tb2RlbHMgaW1wb3J0IFVzZXIKCmNsYXNzIEVtYWlsQmFja2VuZChCYXNlQmFja2VuZCk6CiAgICBkZWYgYXV0aGVudGljYXRlKHNlbGYsIHJlcXVlc3QsIHVzZXJuYW1lPU5vbmUsIHBhc3N3b3JkPU5vbmUsICoqa3dhcmdzKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHVzZXIgPSBVc2VyLm9iamVjdHMuZ2V0KGVtYWlsPXVzZXJuYW1lKQogICAgICAgICAgICBpZiB1c2VyLmNoZWNrX3Bhc3N3b3JkKHBhc3N3b3JkKToKICAgICAgICAgICAgICAgIHJldHVybiB1c2VyCiAgICAgICAgZXhjZXB0IFVzZXIuRG9lc05vdEV4aXN0OgogICAgICAgICAgICByZXR1cm4gTm9uZQoKICAgIGRlZiBnZXRfdXNlcihzZWxmLCB1c2VyX2lkKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIHJldHVybiBVc2VyLm9iamVjdHMuZ2V0KHBrPXVzZXJfaWQpCiAgICAgICAgZXhjZXB0IFVzZXIuRG9lc05vdEV4aXN0OgogICAgICAgICAgICByZXR1cm4gTm9uZQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># backends.py
from django.contrib.auth.backends import BaseBackend
from django.contrib.auth.models import User

class EmailBackend(BaseBackend):
    def authenticate(self, request, username=None, password=None, **kwargs):
        try:
            user = User.objects.get(email=username)
            if user.check_password(password):
                return user
        except User.DoesNotExist:
            return None

    def get_user(self, user_id):
        try:
            return User.objects.get(pk=user_id)
        except User.DoesNotExist:
            return None</pre></div><div class='content'></div><h2>Ús de Backends Personalitzats</h2>
<div class='content'><p>Afegeix el teu backend personalitzat a la configuració <code>AUTHENTICATION_BACKENDS</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzZXR0aW5ncy5weQpBVVRIRU5USUNBVElPTl9CQUNLRU5EUyA9IFsKICAgICdkamFuZ28uY29udHJpYi5hdXRoLmJhY2tlbmRzLk1vZGVsQmFja2VuZCcsICAjIHBlciBkZWZlY3RlCiAgICAncGF0aC50by5FbWFpbEJhY2tlbmQnLApd"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># settings.py
AUTHENTICATION_BACKENDS = [
    'django.contrib.auth.backends.ModelBackend',  # per defecte
    'path.to.EmailBackend',
]</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>El sistema d'autenticació i permisos de Django és potent i flexible, permetent-te gestionar l'autenticació i autorització d'usuaris amb facilitat. Entenent les característiques integrades i aprenent a personalitzar-les, pots implementar mesures de seguretat robustes en les teves aplicacions Django.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='viewsets-and-routers'>&#x25C4;ViewSets i Routers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Autenticació i Permisos</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-blog-application'>Construint una Aplicació de Blog &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
