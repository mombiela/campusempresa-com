<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formularis de Model</title>

    <link rel="alternate" href="https://campusempresa.com/es/django/model-forms" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/django/model-forms" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/django/model-forms" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/django/model-forms" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='form-validation'>&#x25C4;Validació de Formularis</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Formularis de Model</a>
	</div>
	<div class='col-4 text-end'>
					<a href='advanced-form-handling'>Gestió Avançada de Formularis &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció als Formularis de Model</h1>
<div class='content'><p>Els Formularis de Model a Django proporcionen una manera de crear formularis directament a partir dels teus models. Això assegura que els camps del formulari corresponen als camps del model, reduint la redundància i els errors potencials.</p>
<ul>
<li><strong>Formularis de Model</strong>: Formularis que es generen automàticament a partir dels models de Django.</li>
<li><strong>Avantatges</strong>:
<ul>
<li>Redueix la duplicació de codi.</li>
<li>Assegura la consistència entre el formulari i el model.</li>
<li>Simplifica la validació del formulari.</li>
</ul>
</li>
</ul>
</div><h1>Creació d'un Formulari de Model</h1>
<div class='content'><p>Per crear un Formulari de Model, necessites definir una classe de formulari que hereti de <code>forms.ModelForm</code> i especificar el model que hauria d'utilitzar.</p>
</div><h2>Exemple de Model</h2>
<div class='content'><p>Primer, definim un model senzill:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1vZGVscwoKY2xhc3MgQm9vayhtb2RlbHMuTW9kZWwpOgogICAgdGl0bGUgPSBtb2RlbHMuQ2hhckZpZWxkKG1heF9sZW5ndGg9MTAwKQogICAgYXV0aG9yID0gbW9kZWxzLkNoYXJGaWVsZChtYXhfbGVuZ3RoPTEwMCkKICAgIHB1Ymxpc2hlZF9kYXRlID0gbW9kZWxzLkRhdGVGaWVsZCgpCiAgICBpc2JuID0gbW9kZWxzLkNoYXJGaWVsZChtYXhfbGVuZ3RoPTEzKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.db import models

class Book(models.Model):
    title = models.CharField(max_length=100)
    author = models.CharField(max_length=100)
    published_date = models.DateField()
    isbn = models.CharField(max_length=13)</pre></div><div class='content'></div><h2>Exemple de Formulari de Model</h2>
<div class='content'><p>Ara, creem un Formulari de Model per al model <code>Book</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28gaW1wb3J0IGZvcm1zCmZyb20gLm1vZGVscyBpbXBvcnQgQm9vawoKY2xhc3MgQm9va0Zvcm0oZm9ybXMuTW9kZWxGb3JtKToKICAgIGNsYXNzIE1ldGE6CiAgICAgICAgbW9kZWwgPSBCb29rCiAgICAgICAgZmllbGRzID0gWyd0aXRsZScsICdhdXRob3InLCAncHVibGlzaGVkX2RhdGUnLCAnaXNibidd"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django import forms
from .models import Book

class BookForm(forms.ModelForm):
    class Meta:
        model = Book
        fields = ['title', 'author', 'published_date', 'isbn']</pre></div><div class='content'><ul>
<li><strong>Classe Meta</strong>: La classe <code>Meta</code> s'utilitza per especificar el model i els camps que haurien d'estar inclosos en el formulari.</li>
</ul>
</div><h1>Ús dels Formularis de Model en Vistes</h1>
<div class='content'><p>Per utilitzar el Formulari de Model en una vista, necessites instanciar el formulari i gestionar l'enviament del formulari.</p>
</div><h2>Exemple de Vista</h2>
<div class='content'><p>Aquí tens un exemple de vista per gestionar la creació d'un nou llibre:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28uc2hvcnRjdXRzIGltcG9ydCByZW5kZXIsIHJlZGlyZWN0CmZyb20gLmZvcm1zIGltcG9ydCBCb29rRm9ybQoKZGVmIGNyZWF0ZV9ib29rKHJlcXVlc3QpOgogICAgaWYgcmVxdWVzdC5tZXRob2QgPT0gJ1BPU1QnOgogICAgICAgIGZvcm0gPSBCb29rRm9ybShyZXF1ZXN0LlBPU1QpCiAgICAgICAgaWYgZm9ybS5pc192YWxpZCgpOgogICAgICAgICAgICBmb3JtLnNhdmUoKQogICAgICAgICAgICByZXR1cm4gcmVkaXJlY3QoJ2Jvb2tfbGlzdCcpCiAgICBlbHNlOgogICAgICAgIGZvcm0gPSBCb29rRm9ybSgpCiAgICByZXR1cm4gcmVuZGVyKHJlcXVlc3QsICdjcmVhdGVfYm9vay5odG1sJywgeydmb3JtJzogZm9ybX0p"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.shortcuts import render, redirect
from .forms import BookForm

def create_book(request):
    if request.method == 'POST':
        form = BookForm(request.POST)
        if form.is_valid():
            form.save()
            return redirect('book_list')
    else:
        form = BookForm()
    return render(request, 'create_book.html', {'form': form})</pre></div><div class='content'><ul>
<li><strong>Gestió de Peticions POST</strong>: El formulari s'instancia amb les dades de <code>request.POST</code> per gestionar els enviaments del formulari.</li>
<li><strong>Validació del Formulari</strong>: <code>form.is_valid()</code> comprova si les dades del formulari són vàlides.</li>
<li><strong>Desament del Formulari</strong>: <code>form.save()</code> desa les dades del formulari a la base de dades.</li>
</ul>
</div><h2>Exemple de Plantilla</h2>
<div class='content'><p>Aquí tens una plantilla senzilla per renderitzar el formulari:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSBjcmVhdGVfYm9vay5odG1sIC0tPgo8IURPQ1RZUEUgaHRtbD4KPGh0bWw+CjxoZWFkPgogICAgPHRpdGxlPkNyZWF0ZSBCb29rPC90aXRsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxoMT5DcmVhdGUgYSBOZXcgQm9vazwvaDE+CiAgICA8Zm9ybSBtZXRob2Q9InBvc3QiPgogICAgICAgIHslIGNzcmZfdG9rZW4gJX0KICAgICAgICB7eyBmb3JtLmFzX3AgfX0KICAgICAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCI+U2F2ZTwvYnV0dG9uPgogICAgPC9mb3JtPgo8L2JvZHk+CjwvaHRtbD4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- create_book.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Create Book&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Create a New Book&lt;/h1&gt;
    &lt;form method=&quot;post&quot;&gt;
        {% csrf_token %}
        {{ form.as_p }}
        &lt;button type=&quot;submit&quot;&gt;Save&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'><ul>
<li><strong>Token CSRF</strong>: <code>{% csrf_token %}</code> és necessari per raons de seguretat.</li>
<li><strong>Renderització del Formulari</strong>: <code>{{ form.as_p }}</code> renderitza els camps del formulari com a paràgrafs.</li>
</ul>
</div><h1>Personalització dels Formularis de Model</h1>
<div class='content'><p>Pots personalitzar els camps i widgets en un Formulari de Model per adaptar-los millor a les teves necessitats.</p>
</div><h2>Personalització de Widgets</h2>
<div class='content'><p>Per personalitzar els widgets utilitzats per als camps del formulari, pots especificar-los a la classe <code>Meta</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQm9va0Zvcm0oZm9ybXMuTW9kZWxGb3JtKToKICAgIGNsYXNzIE1ldGE6CiAgICAgICAgbW9kZWwgPSBCb29rCiAgICAgICAgZmllbGRzID0gWyd0aXRsZScsICdhdXRob3InLCAncHVibGlzaGVkX2RhdGUnLCAnaXNibiddCiAgICAgICAgd2lkZ2V0cyA9IHsKICAgICAgICAgICAgJ3B1Ymxpc2hlZF9kYXRlJzogZm9ybXMuRGF0ZUlucHV0KGF0dHJzPXsndHlwZSc6ICdkYXRlJ30pLAogICAgICAgIH0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class BookForm(forms.ModelForm):
    class Meta:
        model = Book
        fields = ['title', 'author', 'published_date', 'isbn']
        widgets = {
            'published_date': forms.DateInput(attrs={'type': 'date'}),
        }</pre></div><div class='content'></div><h2>Afegint Validació Personalitzada</h2>
<div class='content'><p>Pots afegir mètodes de validació personalitzats al teu Formulari de Model:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQm9va0Zvcm0oZm9ybXMuTW9kZWxGb3JtKToKICAgIGNsYXNzIE1ldGE6CiAgICAgICAgbW9kZWwgPSBCb29rCiAgICAgICAgZmllbGRzID0gWyd0aXRsZScsICdhdXRob3InLCAncHVibGlzaGVkX2RhdGUnLCAnaXNibiddCgogICAgZGVmIGNsZWFuX2lzYm4oc2VsZik6CiAgICAgICAgaXNibiA9IHNlbGYuY2xlYW5lZF9kYXRhLmdldCgnaXNibicpCiAgICAgICAgaWYgbGVuKGlzYm4pICE9IDEzOgogICAgICAgICAgICByYWlzZSBmb3Jtcy5WYWxpZGF0aW9uRXJyb3IoIklTQk4gbXVzdCBiZSAxMyBjaGFyYWN0ZXJzIGxvbmcuIikKICAgICAgICByZXR1cm4gaXNibg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class BookForm(forms.ModelForm):
    class Meta:
        model = Book
        fields = ['title', 'author', 'published_date', 'isbn']

    def clean_isbn(self):
        isbn = self.cleaned_data.get('isbn')
        if len(isbn) != 13:
            raise forms.ValidationError(&quot;ISBN must be 13 characters long.&quot;)
        return isbn</pre></div><div class='content'><ul>
<li><strong>Mètode de Validació Personalitzada</strong>: <code>clean_isbn</code> valida el camp <code>isbn</code>.</li>
</ul>
</div><h1>Ús Avançat</h1>
<div class='content'><p>Per a casos d'ús més avançats, pots sobreescriure el mètode <code>save</code> o utilitzar formsets.</p>
</div><h2>Sobreescrivint el Mètode Save</h2>
<div class='content'><p>Pots sobreescriure el mètode <code>save</code> per personalitzar com es desen les dades del formulari:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQm9va0Zvcm0oZm9ybXMuTW9kZWxGb3JtKToKICAgIGNsYXNzIE1ldGE6CiAgICAgICAgbW9kZWwgPSBCb29rCiAgICAgICAgZmllbGRzID0gWyd0aXRsZScsICdhdXRob3InLCAncHVibGlzaGVkX2RhdGUnLCAnaXNibiddCgogICAgZGVmIHNhdmUoc2VsZiwgY29tbWl0PVRydWUpOgogICAgICAgIGJvb2sgPSBzdXBlcigpLnNhdmUoY29tbWl0PUZhbHNlKQogICAgICAgICMgQWZlZ2VpeCBsYSBsw7JnaWNhIGRlIGRlc2FtZW50IHBlcnNvbmFsaXR6YWRhIGFxdcOtCiAgICAgICAgaWYgY29tbWl0OgogICAgICAgICAgICBib29rLnNhdmUoKQogICAgICAgIHJldHVybiBib29r"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class BookForm(forms.ModelForm):
    class Meta:
        model = Book
        fields = ['title', 'author', 'published_date', 'isbn']

    def save(self, commit=True):
        book = super().save(commit=False)
        # Afegeix la l&ograve;gica de desament personalitzada aqu&iacute;
        if commit:
            book.save()
        return book</pre></div><div class='content'></div><h2>Ús de Formsets</h2>
<div class='content'><p>Els formsets et permeten gestionar múltiples instàncies d'un formulari en una sola pàgina.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28uZm9ybXMgaW1wb3J0IG1vZGVsZm9ybXNldF9mYWN0b3J5CmZyb20gLm1vZGVscyBpbXBvcnQgQm9vawoKQm9va0Zvcm1TZXQgPSBtb2RlbGZvcm1zZXRfZmFjdG9yeShCb29rLCBmaWVsZHM9KCd0aXRsZScsICdhdXRob3InLCAncHVibGlzaGVkX2RhdGUnLCAnaXNibicpKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.forms import modelformset_factory
from .models import Book

BookFormSet = modelformset_factory(Book, fields=('title', 'author', 'published_date', 'isbn'))</pre></div><div class='content'><ul>
<li><strong>Formsets</strong>: <code>modelformset_factory</code> crea un formset per al model <code>Book</code>.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Els Formularis de Model a Django proporcionen una manera poderosa de crear formularis que estan estretament lligats als teus models. Ajuden a reduir la redundància, assegurar la consistència i simplificar la validació del formulari. Entenent com crear, personalitzar i utilitzar els Formularis de Model, pots gestionar eficientment les dades del formulari en les teves aplicacions Django.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='form-validation'>&#x25C4;Validació de Formularis</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Formularis de Model</a>
	</div>
	<div class='col-4 text-end'>
					<a href='advanced-form-handling'>Gestió Avançada de Formularis &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
