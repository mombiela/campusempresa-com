<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ViewSets i Routers</title>

    <link rel="alternate" href="https://campusempresa.com/es/django/viewsets-and-routers" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/django/viewsets-and-routers" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/django/viewsets-and-routers" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/django/viewsets-and-routers" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='serializers'>&#x25C4;Serialitzadors</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">ViewSets i Routers</a>
	</div>
	<div class='col-4 text-end'>
					<a href='authentication-and-permissions'>Autenticació i Permisos &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En aquesta secció, explorarem els ViewSets i Routers de Django, que són eines potents proporcionades pel Django REST framework (DRF) per simplificar la creació d'APIs RESTful. Al final d'aquesta secció, entendràs com utilitzar ViewSets i Routers per agilitzar el teu procés de desenvolupament d'API.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>ViewSets</strong>: Un ViewSet és una classe que combina la lògica de múltiples vistes en una sola classe. Això ajuda a reduir la redundància i fa que el codi sigui més mantenible.</li>
<li><strong>Routers</strong>: Els Routers generen automàticament patrons d'URL per als ViewSets, reduint la necessitat de definir manualment les configuracions d'URL.</li>
</ul>
</div><h1>ViewSets</h1>
<div class='content'></div><h2>Què és un ViewSet?</h2>
<div class='content'><p>Un ViewSet és un tipus de vista basada en classes que proporciona accions com <code>list</code>, <code>create</code>, <code>retrieve</code>, <code>update</code> i <code>destroy</code>. En lloc de definir aquestes accions per separat, pots definir-les en una sola classe.</p>
</div><h2>Exemple d'un ViewSet Simple</h2>
<div class='content'><p>Creem un ViewSet simple per a un model <code>Book</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBtb2RlbHMucHkKZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1vZGVscwoKY2xhc3MgQm9vayhtb2RlbHMuTW9kZWwpOgogICAgdGl0bGUgPSBtb2RlbHMuQ2hhckZpZWxkKG1heGxlbmd0aD0xMDApCiAgICBhdXRob3IgPSBtb2RlbHMuQ2hhckZpZWxkKG1heGxlbmd0aD0xMDApCiAgICBwdWJsaXNoZWRfZGF0ZSA9IG1vZGVscy5EYXRlRmllbGQoKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiBzZWxmLnRpdGxl"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># models.py
from django.db import models

class Book(models.Model):
    title = models.CharField(maxlength=100)
    author = models.CharField(maxlength=100)
    published_date = models.DateField()

    def __str__(self):
        return self.title</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzZXJpYWxpemVycy5weQpmcm9tIHJlc3RfZnJhbWV3b3JrIGltcG9ydCBzZXJpYWxpemVycwpmcm9tIC5tb2RlbHMgaW1wb3J0IEJvb2sKCmNsYXNzIEJvb2tTZXJpYWxpemVyKHNlcmlhbGl6ZXJzLk1vZGVsU2VyaWFsaXplcik6CiAgICBjbGFzcyBNZXRhOgogICAgICAgIG1vZGVsID0gQm9vawogICAgICAgIGZpZWxkcyA9ICdfX2FsbF9fJw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># serializers.py
from rest_framework import serializers
from .models import Book

class BookSerializer(serializers.ModelSerializer):
    class Meta:
        model = Book
        fields = '__all__'</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2aWV3cy5weQpmcm9tIHJlc3RfZnJhbWV3b3JrIGltcG9ydCB2aWV3c2V0cwpmcm9tIC5tb2RlbHMgaW1wb3J0IEJvb2sKZnJvbSAuc2VyaWFsaXplcnMgaW1wb3J0IEJvb2tTZXJpYWxpemVyCgpjbGFzcyBCb29rVmlld1NldCh2aWV3c2V0cy5Nb2RlbFZpZXdTZXQpOgogICAgcXVlcnlzZXQgPSBCb29rLm9iamVjdHMuYWxsKCkKICAgIHNlcmlhbGl6ZXJfY2xhc3MgPSBCb29rU2VyaWFsaXplcg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># views.py
from rest_framework import viewsets
from .models import Book
from .serializers import BookSerializer

class BookViewSet(viewsets.ModelViewSet):
    queryset = Book.objects.all()
    serializer_class = BookSerializer</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>Model</strong>: Defineix el model <code>Book</code> amb els camps <code>title</code>, <code>author</code> i <code>published_date</code>.</li>
<li><strong>Serializer</strong>: Converteix les instàncies del model <code>Book</code> a JSON i viceversa.</li>
<li><strong>ViewSet</strong>: Combina la lògica per llistar, crear, recuperar, actualitzar i eliminar instàncies de <code>Book</code>.</li>
</ul>
</div><h1>Routers</h1>
<div class='content'></div><h2>Què és un Router?</h2>
<div class='content'><p>Un Router genera automàticament patrons d'URL per als ViewSets. Això elimina la necessitat de definir manualment les configuracions d'URL per a cada vista.</p>
</div><h2>Exemple d'un Router Simple</h2>
<div class='content'><p>Configurem un router per al nostre <code>BookViewSet</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB1cmxzLnB5CmZyb20gZGphbmdvLnVybHMgaW1wb3J0IHBhdGgsIGluY2x1ZGUKZnJvbSByZXN0X2ZyYW1ld29yay5yb3V0ZXJzIGltcG9ydCBEZWZhdWx0Um91dGVyCmZyb20gLnZpZXdzIGltcG9ydCBCb29rVmlld1NldAoKcm91dGVyID0gRGVmYXVsdFJvdXRlcigpCnJvdXRlci5yZWdpc3RlcihyJ2Jvb2tzJywgQm9va1ZpZXdTZXQpCgp1cmxwYXR0ZXJucyA9IFsKICAgIHBhdGgoJycsIGluY2x1ZGUocm91dGVyLnVybHMpKSwKXQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># urls.py
from django.urls import path, include
from rest_framework.routers import DefaultRouter
from .views import BookViewSet

router = DefaultRouter()
router.register(r'books', BookViewSet)

urlpatterns = [
    path('', include(router.urls)),
]</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>DefaultRouter</strong>: Un router integrat que genera automàticament patrons d'URL.</li>
<li><strong>register</strong>: Registra el <code>BookViewSet</code> amb el router, associant-lo amb el prefix d'URL <code>books</code>.</li>
<li><strong>urlpatterns</strong>: Inclou les URLs generades pel router en la configuració d'URL del projecte.</li>
</ul>
</div><h1>Ús Avançat</h1>
<div class='content'></div><h2>Personalitzar ViewSets</h2>
<div class='content'><p>Pots personalitzar el comportament dels ViewSets sobreescrivint mètodes o afegint-ne de nous.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2aWV3cy5weQpmcm9tIHJlc3RfZnJhbWV3b3JrIGltcG9ydCB2aWV3c2V0cwpmcm9tIHJlc3RfZnJhbWV3b3JrLnJlc3BvbnNlIGltcG9ydCBSZXNwb25zZQpmcm9tIC5tb2RlbHMgaW1wb3J0IEJvb2sKZnJvbSAuc2VyaWFsaXplcnMgaW1wb3J0IEJvb2tTZXJpYWxpemVyCgpjbGFzcyBCb29rVmlld1NldCh2aWV3c2V0cy5Nb2RlbFZpZXdTZXQpOgogICAgcXVlcnlzZXQgPSBCb29rLm9iamVjdHMuYWxsKCkKICAgIHNlcmlhbGl6ZXJfY2xhc3MgPSBCb29rU2VyaWFsaXplcgoKICAgIGRlZiBsaXN0KHNlbGYsIHJlcXVlc3QpOgogICAgICAgIHF1ZXJ5c2V0ID0gQm9vay5vYmplY3RzLmZpbHRlcihwdWJsaXNoZWRfZGF0ZV9feWVhcj0yMDIzKQogICAgICAgIHNlcmlhbGl6ZXIgPSBCb29rU2VyaWFsaXplcihxdWVyeXNldCwgbWFueT1UcnVlKQogICAgICAgIHJldHVybiBSZXNwb25zZShzZXJpYWxpemVyLmRhdGEp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># views.py
from rest_framework import viewsets
from rest_framework.response import Response
from .models import Book
from .serializers import BookSerializer

class BookViewSet(viewsets.ModelViewSet):
    queryset = Book.objects.all()
    serializer_class = BookSerializer

    def list(self, request):
        queryset = Book.objects.filter(published_date__year=2023)
        serializer = BookSerializer(queryset, many=True)
        return Response(serializer.data)</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>Sobreescriure el mètode <code>list</code></strong>: Personalitza l'acció <code>list</code> per filtrar llibres publicats l'any 2023.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>En aquesta secció, hem cobert els conceptes bàsics i l'ús avançat dels ViewSets i Routers en el Django REST framework. Els ViewSets ajuden a consolidar la lògica de les vistes, fent el codi més mantenible, mentre que els Routers automatitzen la generació de patrons d'URL, simplificant el procés de configuració d'URL. En dominar aquestes eines, pots agilitzar significativament el teu flux de treball de desenvolupament d'API en Django.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='serializers'>&#x25C4;Serialitzadors</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">ViewSets i Routers</a>
	</div>
	<div class='col-4 text-end'>
					<a href='authentication-and-permissions'>Autenticació i Permisos &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
