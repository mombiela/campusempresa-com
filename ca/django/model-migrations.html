<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Migracions de Models</title>

    <link rel="alternate" href="https://campusempresa.com/es/django/model-migrations" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/django/model-migrations" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/django/model-migrations" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/django/model-migrations" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció a les Migracions de Models</h1>
<div class='content'><p>Les migracions de models a Django són una manera de propagar els canvis que fas als teus models (afegir un camp, eliminar un model, etc.) al teu esquema de base de dades. Això és una part crucial del sistema ORM (Object-Relational Mapping) de Django.</p>
<ul>
<li><strong>Què són les Migracions?</strong>
<ul>
<li>Les migracions són la manera de Django de propagar els canvis que fas als teus models al teu esquema de base de dades.</li>
<li>Estan dissenyades per ser majoritàriament automàtiques, però hauràs de saber quan crear-les i aplicar-les.</li>
</ul>
</li>
</ul>
</div><h1>Creació de Migracions</h1>
<div class='content'><p>Quan fas canvis als teus models, necessites crear migracions per reflectir aquests canvis a la teva base de dades.</p>
<ul>
<li>
<p><strong>Creació d'una Migració</strong></p>
<ul>
<li>Utilitza la comanda <code>makemigrations</code> per crear noves migracions basades en els canvis que has fet als teus models.</li>
<li>Exemple:
<pre><code class="language-bash">python manage.py makemigrations
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Entenent el Fitxer de Migració</strong></p>
<ul>
<li>Django crearà un nou fitxer al directori <code>migrations</code> de la teva aplicació.</li>
<li>Exemple d'un fitxer de migració:
<pre><code class="language-python"># Generated by Django 3.2 on 2023-10-01 12:34

from django.db import migrations, models

class Migration(migrations.Migration):

    dependencies = [
        ('myapp', '0001_initial'),
    ]

    operations = [
        migrations.AddField(
            model_name='mymodel',
            name='new_field',
            field=models.CharField(max_length=100, default=''),
        ),
    ]
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Aplicació de Migracions</h1>
<div class='content'><p>Un cop creades les migracions, necessites aplicar-les a la teva base de dades.</p>
<ul>
<li>
<p><strong>Aplicació de Migracions</strong></p>
<ul>
<li>Utilitza la comanda <code>migrate</code> per aplicar les migracions.</li>
<li>Exemple:
<pre><code class="language-bash">python manage.py migrate
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Comprovació de l'Estat de les Migracions</strong></p>
<ul>
<li>Pots comprovar quines migracions s'han aplicat i quines estan pendents.</li>
<li>Exemple:
<pre><code class="language-bash">python manage.py showmigrations
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Desfer Migracions</h1>
<div class='content'><p>De vegades, pot ser necessari desfer una migració.</p>
<ul>
<li><strong>Desfer Migracions</strong>
<ul>
<li>Utilitza la comanda <code>migrate</code> amb un nom de migració específic per tornar a aquesta migració.</li>
<li>Exemple:
<pre><code class="language-bash">python manage.py migrate myapp 0001
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Operacions Avançades de Migració</h1>
<div class='content'><p>Per a operacions de base de dades més complexes, pot ser necessari escriure migracions personalitzades.</p>
<ul>
<li><strong>Migracions Personalitzades</strong>
<ul>
<li>Pots escriure operacions personalitzades als teus fitxers de migració.</li>
<li>Exemple:
<pre><code class="language-python">from django.db import migrations, models

def forwards_func(apps, schema_editor):
    # Codi d'operació personalitzada aquí
    pass

def backwards_func(apps, schema_editor):
    # Codi d'operació personalitzada aquí
    pass

class Migration(migrations.Migration):

    dependencies = [
        ('myapp', '0002_auto_20231001_1234'),
    ]

    operations = [
        migrations.RunPython(forwards_func, backwards_func),
    ]
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Millors Pràctiques per a les Migracions</h1>
<div class='content'><ul>
<li><strong>Mantingues les Migracions Petites i Gestionables</strong>
<ul>
<li>Fes canvis petits i incrementals als teus models i crea migracions freqüentment.</li>
</ul>
</li>
<li><strong>Prova les Migracions</strong>
<ul>
<li>Prova sempre les teves migracions en un entorn de desenvolupament abans d'aplicar-les a producció.</li>
</ul>
</li>
<li><strong>Control de Versions</strong>
<ul>
<li>Inclou els fitxers de migració al teu sistema de control de versions per mantenir un registre dels canvis.</li>
</ul>
</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Les migracions de models són una característica poderosa de Django que t'ajuden a gestionar els canvis al teu esquema de base de dades d'una manera controlada i sistemàtica. Entenent com crear, aplicar i gestionar les migracions, pots assegurar-te que el teu esquema de base de dades evoluciona de manera suau al costat del teu codi d'aplicació.</p>
<ul>
<li><strong>Punts Clau:</strong>
<ul>
<li>Utilitza <code>makemigrations</code> per crear migracions.</li>
<li>Utilitza <code>migrate</code> per aplicar migracions.</li>
<li>Entén com desfer i escriure migracions personalitzades.</li>
<li>Segueix les millors pràctiques per mantenir un flux de treball de migració saludable.</li>
</ul>
</li>
</ul>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
