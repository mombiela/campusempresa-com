<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Senyals a Django</title>

    <link rel="alternate" href="https://campusempresa.com/es/django/signals" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/django/signals" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/django/signals" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/django/signals" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='middleware'>&#x25C4;Middleware</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Senyals a Django</a>
	</div>
	<div class='col-4 text-end'>
					<a href='file-uploads'>Càrrega de Fitxers &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció als Senyals</h1>
<div class='content'><p>Els senyals de Django són una característica potent que permet a les aplicacions desacoblades ser notificades quan certes accions ocorren en altres parts del framework. Proporcionen una manera d'executar codi basat en certs esdeveniments que succeeixen a l'aplicació Django.</p>
<ul>
<li><strong>Definició</strong>: Els senyals són una manera de permetre que les aplicacions desacoblades siguin notificades quan ocorren certs esdeveniments.</li>
<li><strong>Usos</strong>: Els senyals sovint s'utilitzen per realitzar accions com enviar notificacions, actualitzar models relacionats o registrar activitats.</li>
</ul>
</div><h1>Conceptes Bàsics</h1>
<div class='content'><p>Abans d'entrar en la implementació, és important entendre alguns conceptes bàsics relacionats amb els senyals de Django.</p>
<ul>
<li><strong>Emissor</strong>: L'emissor és el model o classe que envia el senyal.</li>
<li><strong>Receptor</strong>: El receptor és la funció o mètode que es crida quan s'envia el senyal.</li>
<li><strong>Senyal</strong>: El senyal en si és una instància de la classe <code>Signal</code>.</li>
</ul>
</div><h1>Senyals Integrats</h1>
<div class='content'><p>Django ve amb diversos senyals integrats que pots utilitzar immediatament.</p>
<ul>
<li><strong>pre_save</strong>: S'envia abans que es cridi el mètode <code>save()</code> d'un model.</li>
<li><strong>post_save</strong>: S'envia després que es cridi el mètode <code>save()</code> d'un model.</li>
<li><strong>pre_delete</strong>: S'envia abans que es cridi el mètode <code>delete()</code> d'un model.</li>
<li><strong>post_delete</strong>: S'envia després que es cridi el mètode <code>delete()</code> d'un model.</li>
</ul>
</div><h1>Crear i Connectar Senyals</h1>
<div class='content'><p>Per crear i connectar senyals, has de seguir aquests passos:</p>
<ol>
<li><strong>Definir el Senyal</strong>: Crear una instància de la classe <code>Signal</code>.</li>
<li><strong>Crear la Funció Receptora</strong>: Definir la funció que gestionarà el senyal.</li>
<li><strong>Connectar el Senyal al Receptor</strong>: Utilitzar el mètode <code>connect()</code> per enllaçar el senyal al receptor.</li>
</ol>
</div><h2>Exemple: Utilitzant el Senyal `post_save`</h2>
<div class='content'><p>Creem un exemple senzill on enviem un correu electrònic de benvinguda a un usuari després que es registri.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzaWduYWxzLnB5CmZyb20gZGphbmdvLmRiLm1vZGVscy5zaWduYWxzIGltcG9ydCBwb3N0X3NhdmUKZnJvbSBkamFuZ28uZGlzcGF0Y2ggaW1wb3J0IHJlY2VpdmVyCmZyb20gZGphbmdvLmNvcmUubWFpbCBpbXBvcnQgc2VuZF9tYWlsCmZyb20gZGphbmdvLmNvbnRyaWIuYXV0aC5tb2RlbHMgaW1wb3J0IFVzZXIKCkByZWNlaXZlcihwb3N0X3NhdmUsIHNlbmRlcj1Vc2VyKQpkZWYgc2VuZF93ZWxjb21lX2VtYWlsKHNlbmRlciwgaW5zdGFuY2UsIGNyZWF0ZWQsICoqa3dhcmdzKToKICAgIGlmIGNyZWF0ZWQ6CiAgICAgICAgc2VuZF9tYWlsKAogICAgICAgICAgICAnV2VsY29tZSEnLAogICAgICAgICAgICAnVGhhbmtzIGZvciBzaWduaW5nIHVwIGZvciBvdXIgd2Vic2l0ZS4nLAogICAgICAgICAgICAnZnJvbUBleGFtcGxlLmNvbScsCiAgICAgICAgICAgIFtpbnN0YW5jZS5lbWFpbF0sCiAgICAgICAgICAgIGZhaWxfc2lsZW50bHk9RmFsc2UsCiAgICAgICAgKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># signals.py
from django.db.models.signals import post_save
from django.dispatch import receiver
from django.core.mail import send_mail
from django.contrib.auth.models import User

@receiver(post_save, sender=User)
def send_welcome_email(sender, instance, created, **kwargs):
    if created:
        send_mail(
            'Welcome!',
            'Thanks for signing up for our website.',
            'from@example.com',
            [instance.email],
            fail_silently=False,
        )</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>@receiver(post_save, sender=User)</strong>: Aquest decorador connecta la funció <code>send_welcome_email</code> al senyal <code>post_save</code> del model <code>User</code>.</li>
<li><strong>instance</strong>: La instància del model que s'ha guardat.</li>
<li><strong>created</strong>: Un booleà que indica si s'ha creat un nou registre.</li>
</ul>
</div><h1>Senyals Personalitzats</h1>
<div class='content'><p>També pots crear els teus propis senyals personalitzats.</p>
</div><h2>Exemple: Senyal Personalitzat</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzaWduYWxzLnB5CmZyb20gZGphbmdvLmRpc3BhdGNoIGltcG9ydCBTaWduYWwsIHJlY2VpdmVyCgojIERlZmluaXIgdW4gc2VueWFsIHBlcnNvbmFsaXR6YXQKdXNlcl9sb2dnZWRfaW4gPSBTaWduYWwocHJvdmlkaW5nX2FyZ3M9WyJ1c2VyIiwgInRpbWVzdGFtcCJdKQoKIyBDcmVhciB1bmEgZnVuY2nDsyByZWNlcHRvcmEKQHJlY2VpdmVyKHVzZXJfbG9nZ2VkX2luKQpkZWYgbG9nX3VzZXJfbG9naW4oc2VuZGVyLCAqKmt3YXJncyk6CiAgICB1c2VyID0ga3dhcmdzWyd1c2VyJ10KICAgIHRpbWVzdGFtcCA9IGt3YXJnc1sndGltZXN0YW1wJ10KICAgIHByaW50KGYiVXNlciB7dXNlcn0gbG9nZ2VkIGluIGF0IHt0aW1lc3RhbXB9IikKCiMgRW4gYWxndW4gbGxvYyBkZWwgdGV1IGNvZGksIGVudmlhciBlbCBzZW55YWwKdXNlcl9sb2dnZWRfaW4uc2VuZChzZW5kZXI9Tm9uZSwgdXNlcj0nam9obl9kb2UnLCB0aW1lc3RhbXA9JzIwMjMtMTAtMDEgMTI6MDA6MDAnKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># signals.py
from django.dispatch import Signal, receiver

# Definir un senyal personalitzat
user_logged_in = Signal(providing_args=[&quot;user&quot;, &quot;timestamp&quot;])

# Crear una funci&oacute; receptora
@receiver(user_logged_in)
def log_user_login(sender, **kwargs):
    user = kwargs['user']
    timestamp = kwargs['timestamp']
    print(f&quot;User {user} logged in at {timestamp}&quot;)

# En algun lloc del teu codi, enviar el senyal
user_logged_in.send(sender=None, user='john_doe', timestamp='2023-10-01 12:00:00')</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>user_logged_in = Signal(providing_args=[&quot;user&quot;, &quot;timestamp&quot;])</strong>: Això crea un senyal personalitzat que espera arguments <code>user</code> i <code>timestamp</code>.</li>
<li><strong>@receiver(user_logged_in)</strong>: Aquest decorador connecta la funció <code>log_user_login</code> al senyal <code>user_logged_in</code>.</li>
<li><strong>user_logged_in.send()</strong>: Això envia el senyal amb els arguments especificats.</li>
</ul>
</div><h1>Millors Pràctiques</h1>
<div class='content'><ul>
<li><strong>Evitar Importacions Circulars</strong>: Col·loca els gestors de senyals en un fitxer separat (per exemple, <code>signals.py</code>) i importa'ls al fitxer <code>apps.py</code> de la teva aplicació.</li>
<li><strong>Utilitzar Referències Febles</strong>: Per defecte, Django utilitza referències febles per connectar senyals, cosa que ajuda a prevenir fuites de memòria.</li>
<li><strong>Mantenir els Gestors de Senyals Simples</strong>: Els gestors de senyals haurien de ser simples i ràpids per evitar colls d'ampolla de rendiment.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Els senyals de Django són una eina potent per desacoblar diferents parts de la teva aplicació i reaccionar a esdeveniments d'una manera neta i eficient. Entenent i utilitzant tant els senyals integrats com els personalitzats, pots crear aplicacions Django més modulars i mantenibles. Recorda seguir les millors pràctiques per assegurar que els teus gestors de senyals siguin eficients i evitar problemes comuns com les importacions circulars.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='middleware'>&#x25C4;Middleware</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Senyals a Django</a>
	</div>
	<div class='col-4 text-end'>
					<a href='file-uploads'>Càrrega de Fitxers &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
