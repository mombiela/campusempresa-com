<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proves de Widgets a Flutter</title>

    <link rel="alternate" href="https://campusempresa.com/es/dart/widget-testing-in-flutter" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/dart/widget-testing-in-flutter" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/dart/widget-testing-in-flutter" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/dart/widget-testing-in-flutter" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Proves Unitàries</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proves de Widgets a Flutter</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integration-testing'>Proves d'Integració &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció a les Proves de Widgets</h1>
<div class='content'><p>Les proves de widgets són una part crucial per assegurar que les teves aplicacions Flutter funcionin com s'espera. Et permeten verificar el comportament dels widgets individuals i les seves interaccions dins de l'aplicació. Aquesta secció cobrirà els conceptes bàsics de les proves de widgets, incloent per què són importants i com començar.</p>
<ul>
<li><strong>Per què Proves de Widgets?</strong>
<ul>
<li>Assegura que els components de la UI es comportin com s'espera.</li>
<li>Ajuda a detectar errors al començament del cicle de desenvolupament.</li>
<li>Facilita la refactorització proporcionant una xarxa de seguretat.</li>
</ul>
</li>
</ul>
</div><h1>Configuració del Teu Entorn</h1>
<div class='content'><p>Abans de poder començar a escriure proves de widgets, has de configurar el teu entorn de desenvolupament.</p>
<ul>
<li><strong>Dependències</strong>
<ul>
<li>Afegeix el paquet <code>flutter_test</code> al teu fitxer <code>pubspec.yaml</code>:
<pre><code class="language-yaml">dev_dependencies:
  flutter_test:
    sdk: flutter
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Escriure la Teva Primera Prova de Widget</h1>
<div class='content'><p>Escrivim una prova de widget senzilla per entendre els conceptes bàsics.</p>
<ul>
<li><strong>Exemple: Provant una Aplicació de Comptador Simple</strong>
<ul>
<li>Crea un nou fitxer al directori <code>test</code>, per exemple, <code>counter_test.dart</code>.</li>
<li>Escriu el següent codi de prova:
<pre><code class="language-dart">import 'package:flutter/material.dart';
import 'package:flutter_test/flutter_test.dart';
import 'package:your_app/main.dart'; // Ajusta la importació al teu fitxer principal de l'aplicació

void main() {
  testWidgets('Prova de fum d'increment del comptador', (WidgetTester tester) async {
    // Construeix la nostra aplicació i activa un frame.
    await tester.pumpWidget(MyApp());

    // Verifica que el nostre comptador comenci a 0.
    expect(find.text('0'), findsOneWidget);
    expect(find.text('1'), findsNothing);

    // Toca la icona '+' i activa un frame.
    await tester.tap(find.byIcon(Icons.add));
    await tester.pump();

    // Verifica que el nostre comptador hagi incrementat.
    expect(find.text('0'), findsNothing);
    expect(find.text('1'), findsOneWidget);
  });
}
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong><code>testWidgets</code></strong>: Aquesta funció s'utilitza per definir una prova de widget.</li>
<li><strong><code>WidgetTester</code></strong>: Proporciona mètodes per interactuar amb widgets en l'entorn de prova.</li>
<li><strong><code>pumpWidget</code></strong>: Construeix l'arbre de widgets.</li>
<li><strong><code>expect</code></strong>: Afirma que una condició és certa.</li>
<li><strong><code>find</code></strong>: Localitza widgets en l'arbre de widgets.</li>
</ul>
</div><h1>Tècniques Avançades de Proves de Widgets</h1>
<div class='content'><p>Un cop et sentis còmode amb les proves de widgets bàsiques, pots explorar tècniques més avançades.</p>
<ul>
<li>
<p><strong>Provant Operacions Asíncrones</strong></p>
<ul>
<li>Exemple: Provant un widget que obté dades d'una API.
<pre><code class="language-dart">testWidgets('Obtenir dades i mostrar', (WidgetTester tester) async {
  await tester.pumpWidget(MyApp());

  // Inicialment, s'hauria de mostrar un indicador de càrrega.
  expect(find.byType(CircularProgressIndicator), findsOneWidget);

  // Simula un retard per obtenir dades.
  await tester.pumpAndSettle(Duration(seconds: 2));

  // Verifica que les dades es mostrin després d'obtenir-les.
  expect(find.text('Dades Obtingudes'), findsOneWidget);
});
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Simulant Dependències</strong></p>
<ul>
<li>Utilitza paquets com <code>mockito</code> per simular dependències i controlar el seu comportament durant les proves.
<pre><code class="language-dart">import 'package:mockito/mockito.dart';
import 'package:your_app/services/api_service.dart';

class MockApiService extends Mock implements ApiService {}

void main() {
  testWidgets('Prova de servei API simulat', (WidgetTester tester) async {
    final mockApiService = MockApiService();
    when(mockApiService.fetchData()).thenAnswer((_) async =&gt; 'Dades Simulades');

    await tester.pumpWidget(MyApp(apiService: mockApiService));

    // Verifica que es mostrin les dades simulades.
    expect(find.text('Dades Simulades'), findsOneWidget);
  });
}
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Millors Pràctiques per a les Proves de Widgets</h1>
<div class='content'><ul>
<li><strong>Mantingues les Proves Petites i Focalitzades</strong>
<ul>
<li>Prova una cosa a la vegada per fer més fàcil identificar problemes.</li>
</ul>
</li>
<li><strong>Utilitza Noms de Proves Significatius</strong>
<ul>
<li>Descriu clarament què està verificant la prova.</li>
</ul>
</li>
<li><strong>Executa les Proves Freqüentment</strong>
<ul>
<li>Integra les proves en el teu flux de treball de desenvolupament per detectar problemes aviat.</li>
</ul>
</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Les proves de widgets a Flutter són una eina poderosa per assegurar que la UI de la teva aplicació es comporti com s'espera. Començant amb proves senzilles i incorporant gradualment tècniques més avançades, pots construir una suite robusta de proves que proporcionin confiança en la qualitat de la teva aplicació. Recorda seguir les millors pràctiques per mantenir una base de codi de proves neta i efectiva.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Proves Unitàries</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proves de Widgets a Flutter</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integration-testing'>Proves d'Integració &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
