<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://campusempresa.com/kafka/kafka-performance-tuning" id="lnk_lang_es" data-lang="es">Castellano</a></b>
				|
				<b id="lit_lang_ca">Catala</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>L'optimització del rendiment de Kafka és essencial per assegurar que el teu clúster de Kafka operi de manera eficient i pugui gestionar el rendiment i la latència requerits. Aquest tema cobrirà diversos aspectes de l'optimització del rendiment, incloent-hi configuracions del broker, optimitzacions del productor i consumidor, i eines de monitoratge.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Rendiment</strong>: La quantitat de dades processades per Kafka en un període de temps determinat.</li>
<li><strong>Latència</strong>: El temps que triga un missatge a viatjar del productor al consumidor.</li>
<li><strong>Broker</strong>: Un servidor de Kafka que emmagatzema i serveix missatges.</li>
<li><strong>Productor</strong>: Una aplicació que envia missatges a Kafka.</li>
<li><strong>Consumidor</strong>: Una aplicació que llegeix missatges de Kafka.</li>
</ul>
</div><h1>Configuracions del Broker</h1>
<div class='content'><p>Optimitzar les configuracions del broker és crucial per millorar el rendiment de Kafka. Aquí hi ha algunes configuracions clau a considerar:</p>
<ul>
<li><strong>num.network.threads</strong>: Nombre de fils que gestionen les sol·licituds de xarxa.</li>
<li><strong>num.io.threads</strong>: Nombre de fils que gestionen les operacions d'E/S de disc.</li>
<li><strong>socket.send.buffer.bytes</strong>: Mida del buffer d'enviament TCP.</li>
<li><strong>socket.receive.buffer.bytes</strong>: Mida del buffer de recepció TCP.</li>
<li><strong>log.segment.bytes</strong>: Mida d'un únic fitxer de segment de registre.</li>
<li><strong>log.retention.hours</strong>: Temps per retenir un segment de registre abans de la seva eliminació.</li>
</ul>
</div><h2>Exemple de Configuració</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnVtLm5ldHdvcmsudGhyZWFkcz0zCm51bS5pby50aHJlYWRzPTgKc29ja2V0LnNlbmQuYnVmZmVyLmJ5dGVzPTEwMjQwMApzb2NrZXQucmVjZWl2ZS5idWZmZXIuYnl0ZXM9MTAyNDAwCmxvZy5zZWdtZW50LmJ5dGVzPTEwNzM3NDE4MjQKbG9nLnJldGVudGlvbi5ob3Vycz0xNjg="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>num.network.threads=3
num.io.threads=8
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
log.segment.bytes=1073741824
log.retention.hours=168</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><code>num.network.threads=3</code>: Assigna tres fils per gestionar les sol·licituds de xarxa.</li>
<li><code>num.io.threads=8</code>: Assigna vuit fils per gestionar les operacions d'E/S de disc.</li>
<li><code>socket.send.buffer.bytes=102400</code>: Estableix la mida del buffer d'enviament TCP a 100 KB.</li>
<li><code>socket.receive.buffer.bytes=102400</code>: Estableix la mida del buffer de recepció TCP a 100 KB.</li>
<li><code>log.segment.bytes=1073741824</code>: Estableix la mida del segment de registre a 1 GB.</li>
<li><code>log.retention.hours=168</code>: Reté els segments de registre durant 7 dies (168 hores).</li>
</ul>
</div><h1>Optimitzacions del Productor</h1>
<div class='content'><p>Els productors juguen un paper significatiu en el rendiment de Kafka. Aquí hi ha algunes configuracions per optimitzar el rendiment del productor:</p>
<ul>
<li><strong>batch.size</strong>: Mida del lot per enviar missatges.</li>
<li><strong>linger.ms</strong>: Temps d'espera abans d'enviar un lot.</li>
<li><strong>compression.type</strong>: Tipus de compressió a utilitzar (cap, gzip, snappy, lz4, zstd).</li>
<li><strong>acks</strong>: Nombre de reconeixements que el productor requereix (0, 1, tots).</li>
</ul>
</div><h2>Exemple de Configuració</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YmF0Y2guc2l6ZT0xNjM4NApsaW5nZXIubXM9NQpjb21wcmVzc2lvbi50eXBlPXNuYXBweQphY2tzPTE="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>batch.size=16384
linger.ms=5
compression.type=snappy
acks=1</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><code>batch.size=16384</code>: Estableix la mida del lot a 16 KB.</li>
<li><code>linger.ms=5</code>: Espera 5 mil·lisegons abans d'enviar un lot.</li>
<li><code>compression.type=snappy</code>: Utilitza la compressió Snappy per als missatges.</li>
<li><code>acks=1</code>: Requereix reconeixement només del líder.</li>
</ul>
</div><h1>Optimitzacions del Consumidor</h1>
<div class='content'><p>Els consumidors també necessiten ser optimitzats per a un millor rendiment. Les configuracions clau inclouen:</p>
<ul>
<li><strong>fetch.min.bytes</strong>: Quantitat mínima de dades que el servidor hauria de retornar per a una sol·licitud de recuperació.</li>
<li><strong>fetch.max.wait.ms</strong>: Temps màxim que el servidor bloquejarà abans de respondre a una sol·licitud de recuperació.</li>
<li><strong>max.partition.fetch.bytes</strong>: Dades màximes per partició que el servidor retornarà.</li>
</ul>
</div><h2>Exemple de Configuració</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmV0Y2gubWluLmJ5dGVzPTEKZmV0Y2gubWF4LndhaXQubXM9NTAwCm1heC5wYXJ0aXRpb24uZmV0Y2guYnl0ZXM9MTA0ODU3Ng=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>fetch.min.bytes=1
fetch.max.wait.ms=500
max.partition.fetch.bytes=1048576</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><code>fetch.min.bytes=1</code>: Estableix la quantitat mínima de dades a 1 byte.</li>
<li><code>fetch.max.wait.ms=500</code>: Espera fins a 500 mil·lisegons abans de respondre a una sol·licitud de recuperació.</li>
<li><code>max.partition.fetch.bytes=1048576</code>: Estableix les dades màximes per partició a 1 MB.</li>
</ul>
</div><h1>Eines de Monitoratge</h1>
<div class='content'><p>Monitoritzar el rendiment de Kafka és essencial per identificar colls d'ampolla i assegurar una operació òptima. Les eines clau inclouen:</p>
<ul>
<li><strong>Kafka Manager</strong>: Una eina basada en web per gestionar i monitoritzar clústers de Kafka.</li>
<li><strong>Prometheus i Grafana</strong>: Eines de codi obert per monitoritzar i visualitzar mètriques.</li>
<li><strong>JMX (Java Management Extensions)</strong>: Utilitzat per monitoritzar les mètriques de Kafka.</li>
</ul>
</div><h2>Exemple: Utilitzant Prometheus i Grafana</h2>
<div class='content'><ol>
<li><strong>Instal·la Prometheus</strong>: Segueix la guia d'instal·lació al <a href="https://prometheus.io/docs/introduction/first_steps/">lloc web de Prometheus</a>.</li>
<li><strong>Instal·la Grafana</strong>: Segueix la guia d'instal·lació al <a href="https://grafana.com/docs/grafana/latest/getting-started/getting-started-prometheus/">lloc web de Grafana</a>.</li>
<li><strong>Configura l'Exportador JMX de Kafka</strong>: Afegeix l'exportador JMX als teus brokers de Kafka per exposar mètriques.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBwcm9tZXRoZXVzLnltbApzY3JhcGVfY29uZmlnczoKICAtIGpvYl9uYW1lOiAna2Fma2EnCiAgICBzdGF0aWNfY29uZmlnczoKICAgICAgLSB0YXJnZXRzOiBbJ2xvY2FsaG9zdDo3MDcxJ10="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># prometheus.yml
scrape_configs:
  - job_name: 'kafka'
    static_configs:
      - targets: ['localhost:7071']</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>Prometheus</strong>: Recull mètriques dels brokers de Kafka.</li>
<li><strong>Grafana</strong>: Visualitza les mètriques recollides.</li>
<li><strong>Exportador JMX</strong>: Exposa les mètriques de Kafka perquè Prometheus les pugui recollir.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>L'optimització del rendiment de Kafka implica optimitzar les configuracions del broker, els paràmetres del productor i del consumidor, i utilitzar eines de monitoratge per assegurar una operació eficient. Ajustant acuradament aquests paràmetres i monitoritzant contínuament el sistema, pots aconseguir un rendiment i una latència òptims per al teu clúster de Kafka.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
