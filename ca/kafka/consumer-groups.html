<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grups de Consumidors</title>

    <link rel="alternate" href="https://campusempresa.com/es/kafka/consumer-groups" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/kafka/consumer-groups" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/kafka/consumer-groups" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/kafka/consumer-groups" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='consuming-messages'>&#x25C4; Consumir missatges</a></div><div class='col-6 text-end'><a href='offset-management'>Gestió d'offsets &#x25BA;</a></div></div><div class='content'><p>En aquesta secció, explorarem el concepte de Grups de Consumidors en Apache Kafka. Entendre els Grups de Consumidors és crucial per consumir eficientment missatges dels temes de Kafka, especialment en un entorn distribuït.</p>
</div><h1>Què són els Grups de Consumidors?</h1>
<div class='content'><ul>
<li><strong>Definició</strong>: Un Grup de Consumidors és un grup de consumidors que treballen junts per consumir missatges dels temes de Kafka.</li>
<li><strong>Propòsit</strong>: Permeten el processament paral·lel de missatges i proporcionen tolerància a fallades.</li>
<li><strong>Concepte Clau</strong>: Cada missatge en una partició del tema és consumit per només un consumidor del grup.</li>
</ul>
</div><h1>Com Funcionen els Grups de Consumidors</h1>
<div class='content'><ul>
<li><strong>Assignació de Particions</strong>: Kafka divideix les particions d'un tema entre els consumidors d'un grup. Cada partició és consumida per només un consumidor del grup.</li>
<li><strong>Reequilibri</strong>: Quan un consumidor s'uneix o deixa el grup, Kafka reasigna les particions entre els consumidors restants.</li>
<li><strong>Gestió d'Offsets</strong>: Kafka fa un seguiment de l'offset de cada partició per a cada grup de consumidors, assegurant que els missatges no es reprocessin.</li>
</ul>
</div><h2>Exemple: Grup de Consumidors amb Dos Consumidors</h2>
<div class='content'><p>Considerem un tema amb quatre particions (P0, P1, P2, P3) i un grup de consumidors amb dos consumidors (C1, C2).</p>
<ul>
<li>
<p><strong>Assignació Inicial</strong>:</p>
<ul>
<li>C1: P0, P1</li>
<li>C2: P2, P3</li>
</ul>
</li>
<li>
<p><strong>Després que C1 Marxi</strong>:</p>
<ul>
<li>C2: P0, P1, P2, P3</li>
</ul>
</li>
</ul>
</div><h1>Crear i Gestionar Grups de Consumidors</h1>
<div class='content'></div><h2>Crear un Grup de Consumidors</h2>
<div class='content'><p>Per crear un grup de consumidors, simplement inicies múltiples instàncies de consumidors amb el mateix ID de grup.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UHJvcGVydGllcyBwcm9wcyA9IG5ldyBQcm9wZXJ0aWVzKCk7CnByb3BzLnB1dCgiYm9vdHN0cmFwLnNlcnZlcnMiLCAibG9jYWxob3N0OjkwOTIiKTsKcHJvcHMucHV0KCJncm91cC5pZCIsICJteS1ncm91cCIpOwpwcm9wcy5wdXQoImtleS5kZXNlcmlhbGl6ZXIiLCAib3JnLmFwYWNoZS5rYWZrYS5jb21tb24uc2VyaWFsaXphdGlvbi5TdHJpbmdEZXNlcmlhbGl6ZXIiKTsKcHJvcHMucHV0KCJ2YWx1ZS5kZXNlcmlhbGl6ZXIiLCAib3JnLmFwYWNoZS5rYWZrYS5jb21tb24uc2VyaWFsaXphdGlvbi5TdHJpbmdEZXNlcmlhbGl6ZXIiKTsKCkthZmthQ29uc3VtZXI8U3RyaW5nLCBTdHJpbmc+IGNvbnN1bWVyID0gbmV3IEthZmthQ29uc3VtZXI8Pihwcm9wcyk7CmNvbnN1bWVyLnN1YnNjcmliZShBcnJheXMuYXNMaXN0KCJteS10b3BpYyIpKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Properties props = new Properties();
props.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);
props.put(&quot;group.id&quot;, &quot;my-group&quot;);
props.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);
props.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);

KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(props);
consumer.subscribe(Arrays.asList(&quot;my-topic&quot;));</pre></div><div class='content'></div><h2>Gestionar Offsets</h2>
<div class='content'><p>Kafka gestiona automàticament els offsets per als grups de consumidors, però també pots comprometre offsets manualment.</p>
<ul>
<li>
<p><strong>Compromís Automàtic d'Offsets</strong>:</p>
<pre><code class="language-java">props.put(&quot;enable.auto.commit&quot;, &quot;true&quot;);
props.put(&quot;auto.commit.interval.ms&quot;, &quot;1000&quot;);
</code></pre>
</li>
<li>
<p><strong>Compromís Manual d'Offsets</strong>:</p>
<pre><code class="language-java">props.put(&quot;enable.auto.commit&quot;, &quot;false&quot;);

// Després de processar els registres
consumer.commitSync();
</code></pre>
</li>
</ul>
</div><h2>Reequilibri</h2>
<div class='content'><p>El reequilibri ocorre quan:</p>
<ul>
<li>Un nou consumidor s'uneix al grup.</li>
<li>Un consumidor existent deixa el grup.</li>
<li>Es modifiquen les particions d'un tema.</li>
</ul>
<p>El reequilibri assegura que totes les particions estiguin assignades als consumidors, però pot interrompre temporalment el processament de missatges.</p>
</div><h1>Monitoritzar Grups de Consumidors</h1>
<div class='content'><p>Kafka proporciona eines per monitoritzar els grups de consumidors:</p>
<ul>
<li>
<p><strong>Comanda de Grup de Consumidors de Kafka</strong>:</p>
<pre><code class="language-sh">kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group
</code></pre>
</li>
<li>
<p><strong>Mètriques</strong>: Kafka exposa diverses mètriques relacionades amb els grups de consumidors, com el retard, que es poden monitoritzar utilitzant JMX o altres eines de monitorització.</p>
</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Els Grups de Consumidors són un concepte fonamental en Kafka que permeten un consum escalable i tolerant a fallades de missatges. Distribuint les particions entre múltiples consumidors, permeten el processament paral·lel i asseguren que cada missatge sigui processat per només un consumidor del grup. Entendre com crear, gestionar i monitoritzar els grups de consumidors és essencial per construir aplicacions robustes basades en Kafka.</p>
</div><div class='row navigation'><div class='col-6'><a href='consuming-messages'>&#x25C4; Consumir missatges</a></div><div class='col-6 text-end'><a href='offset-management'>Gestió d'offsets &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
