<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://campusempresa.com/procesamiento_datos_masivos/caso-estudio-1" id="lnk_lang_es" data-lang="es">Castellano</a></b>
				|
				<b id="lit_lang_ca">Catala</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En aquest cas d'estudi, explorarem com analitzar grans volums de logs generats per sistemes informàtics. Els logs són registres detallats d'esdeveniments que ocorren en un sistema i són essencials per al monitoratge, la depuració i la seguretat. Aprendrem a processar i extreure informació valuosa d'aquestes dades utilitzant eines i tècniques de processament de dades massives.</p>
</div><h1>Objectius</h1>
<div class='content'><ul>
<li>Comprendre la importància dels logs en el monitoratge i la depuració de sistemes.</li>
<li>Aprendre a preprocessar i netejar dades de logs.</li>
<li>Utilitzar eines de processament de dades massives per analitzar logs.</li>
<li>Extreure informació valuosa i generar informes a partir dels logs.</li>
</ul>
</div><h1>Eines i Tecnologies</h1>
<div class='content'><ul>
<li><strong>Apache Hadoop</strong>: Per a l'emmagatzematge i processament distribuït de grans volums de dades.</li>
<li><strong>Apache Spark</strong>: Per al processament ràpid i en memòria de dades massives.</li>
<li><strong>Python</strong>: Per a la manipulació i anàlisi de dades.</li>
<li><strong>Logstash</strong>: Per a la ingesta i transformació de logs.</li>
<li><strong>Kibana</strong>: Per a la visualització de dades de logs.</li>
</ul>
</div><h1>Dataset</h1>
<div class='content'><p>El dataset utilitzat en aquest cas d'estudi consisteix en logs d'accés web generats per un servidor web Apache. Cada línia del log conté informació sobre una sol·licitud HTTP, incloent l'adreça IP del client, la data i hora de la sol·licitud, el mètode HTTP, el recurs sol·licitat, el codi d'estat HTTP, i la mida de la resposta.</p>
<p>Exemple d'una línia de log:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("MTI3LjAuMC4xIC0gLSBbMTAvT2N0LzIwMjM6MTM6NTU6MzYgLTA3MDBdICJHRVQgL2luZGV4Lmh0bWwgSFRUUC8xLjEiIDIwMCAyMzI2"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>127.0.0.1 - - [10/Oct/2023:13:55:36 -0700] &quot;GET /index.html HTTP/1.1&quot; 200 2326</pre></div><div class='content'></div><h1>Preprocessament de Dades</h1>
<div class='content'><p>Abans d'analitzar els logs, és necessari preprocessar les dades per netejar-les i estructurar-les adequadament.</p>
</div><h2>Passos de Preprocessament</h2>
<div class='content'><ol>
<li><strong>Eliminar línies corruptes</strong>: Filtrar línies que no segueixin el format esperat.</li>
<li><strong>Parsejar línies de log</strong>: Extreure camps rellevants de cada línia.</li>
<li><strong>Convertir tipus de dades</strong>: Assegurar-se que cada camp tingui el tipus de dada correcte (per exemple, convertir dates a objectes datetime).</li>
</ol>
<p>Exemple de codi en Python per preprocessar logs:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHJlCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCgpsb2dfcGF0dGVybiA9IHJlLmNvbXBpbGUoCiAgICByJyg/UDxpcD5cZCtcLlxkK1wuXGQrXC5cZCspIC0gLSBcWyg/UDxkYXRldGltZT5bXlxdXSspXF0gIig/UDxtZXRob2Q+XHcrKSAoP1A8cmVzb3VyY2U+W15cc10rKSBIVFRQL1xkXC5cZCIgKD9QPHN0YXR1cz5cZCspICg/UDxzaXplPlxkKyknCikKCmRlZiBwYXJzZV9sb2dfbGluZShsaW5lKToKICAgIG1hdGNoID0gbG9nX3BhdHRlcm4ubWF0Y2gobGluZSkKICAgIHNpIG1hdGNoOgogICAgICAgIGRhdGEgPSBtYXRjaC5ncm91cGRpY3QoKQogICAgICAgIGRhdGFbJ2RhdGV0aW1lJ10gPSBkYXRldGltZS5zdHJwdGltZShkYXRhWydkYXRldGltZSddLCAnJWQvJWIvJVk6JUg6JU06JVMgJXonKQogICAgICAgIGRhdGFbJ3N0YXR1cyddID0gaW50KGRhdGFbJ3N0YXR1cyddKQogICAgICAgIGRhdGFbJ3NpemUnXSA9IGludChkYXRhWydzaXplJ10pCiAgICAgICAgcmV0dXJuIGRhdGEKICAgIHJldHVybiBOb25lCgojIEV4ZW1wbGUgZCfDunMKbG9nX2xpbmUgPSAnMTI3LjAuMC4xIC0gLSBbMTAvT2N0LzIwMjM6MTM6NTU6MzYgLTA3MDBdICJHRVQgL2luZGV4Lmh0bWwgSFRUUC8xLjEiIDIwMCAyMzI2JwpwYXJzZWRfbG9nID0gcGFyc2VfbG9nX2xpbmUobG9nX2xpbmUpCnByaW50KHBhcnNlZF9sb2cp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import re
from datetime import datetime

log_pattern = re.compile(
    r'(?P&lt;ip&gt;\d+\.\d+\.\d+\.\d+) - - \[(?P&lt;datetime&gt;[^\]]+)\] &quot;(?P&lt;method&gt;\w+) (?P&lt;resource&gt;[^\s]+) HTTP/\d\.\d&quot; (?P&lt;status&gt;\d+) (?P&lt;size&gt;\d+)'
)

def parse_log_line(line):
    match = log_pattern.match(line)
    si match:
        data = match.groupdict()
        data['datetime'] = datetime.strptime(data['datetime'], '%d/%b/%Y:%H:%M:%S %z')
        data['status'] = int(data['status'])
        data['size'] = int(data['size'])
        return data
    return None

# Exemple d'&uacute;s
log_line = '127.0.0.1 - - [10/Oct/2023:13:55:36 -0700] &quot;GET /index.html HTTP/1.1&quot; 200 2326'
parsed_log = parse_log_line(log_line)
print(parsed_log)</pre></div><div class='content'></div><h1>Anàlisi de Logs</h1>
<div class='content'><p>Un cop preprocessades les dades, podem procedir amb l'anàlisi. Utilitzarem Apache Spark per realitzar anàlisis distribuïdes i obtenir insights dels logs.</p>
</div><h2>Exemples d'Anàlisi</h2>
<div class='content'><ul>
<li><strong>Comptar el nombre de sol·licituds per IP</strong>: Identificar les IPs que realitzen més sol·licituds.</li>
<li><strong>Distribució de codis d'estat HTTP</strong>: Analitzar la freqüència de diferents codis d'estat (200, 404, 500, etc.).</li>
<li><strong>Recursos més sol·licitats</strong>: Determinar quins són els recursos més accedits en el servidor.</li>
</ul>
<p>Exemple de codi en PySpark per comptar sol·licituds per IP:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBweXNwYXJrLnNxbCBpbXBvcnQgU3BhcmtTZXNzaW9uCmZyb20gcHlzcGFyay5zcWwuZnVuY3Rpb25zIGltcG9ydCBjb2wKCiMgQ3JlYXIgdW5hIHNlc3Npw7MgZGUgU3BhcmsKc3BhcmsgPSBTcGFya1Nlc3Npb24uYnVpbGRlci5hcHBOYW1lKCJMb2dBbmFseXNpcyIpLmdldE9yQ3JlYXRlKCkKCiMgQ2FycmVnYXIgZWxzIGxvZ3MgcHJlcHJvY2Vzc2F0cyBlbiB1biBEYXRhRnJhbWUKbG9nc19kZiA9IHNwYXJrLnJlYWQuanNvbigicGF0aC90by9wcmVwcm9jZXNzZWRfbG9ncy5qc29uIikKCiMgQ29tcHRhciBlbCBub21icmUgZGUgc29swrdsaWNpdHVkcyBwZXIgSVAKaXBfY291bnRzID0gbG9nc19kZi5ncm91cEJ5KCJpcCIpLmNvdW50KCkub3JkZXJCeShjb2woImNvdW50IikuZGVzYygpKQoKIyBNb3N0cmFyIGVscyByZXN1bHRhdHMKaXBfY291bnRzLnNob3coKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from pyspark.sql import SparkSession
from pyspark.sql.functions import col

# Crear una sessi&oacute; de Spark
spark = SparkSession.builder.appName(&quot;LogAnalysis&quot;).getOrCreate()

# Carregar els logs preprocessats en un DataFrame
logs_df = spark.read.json(&quot;path/to/preprocessed_logs.json&quot;)

# Comptar el nombre de sol&middot;licituds per IP
ip_counts = logs_df.groupBy(&quot;ip&quot;).count().orderBy(col(&quot;count&quot;).desc())

# Mostrar els resultats
ip_counts.show()</pre></div><div class='content'></div><h1>Visualització de Dades</h1>
<div class='content'><p>Per visualitzar els resultats de l'anàlisi, utilitzarem Kibana. Kibana permet crear dashboards interactius que faciliten la interpretació de les dades.</p>
</div><h2>Exemples de Visualitzacions</h2>
<div class='content'><ul>
<li><strong>Gràfic de barres</strong>: Nombre de sol·licituds per IP.</li>
<li><strong>Gràfic de pastís</strong>: Distribució de codis d'estat HTTP.</li>
<li><strong>Gràfic de línies</strong>: Tendència de sol·licituds al llarg del temps.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>En aquest cas d'estudi, hem après a analitzar logs d'accés web utilitzant eines de processament de dades massives. Des del preprocessament de dades fins a l'anàlisi i la visualització, cada pas és crucial per extreure informació valuosa dels logs. Aquestes habilitats són essencials per a qualsevol professional que treballi amb grans volums de dades i necessiti monitorar i depurar sistemes de manera efectiva.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
