<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treballant amb Blocs</title>

    <link rel="alternate" href="https://campusempresa.com/es/objective_c/working-with-blocks" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/objective_c/working-with-blocks" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/objective_c/working-with-blocks" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/objective_c/working-with-blocks" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='switch-statements'>&#x25C4;Declaracions Switch</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Treballant amb Blocs</a>
	</div>
	<div class='col-4 text-end'>
					<a href='defining-and-calling-functions'>Definició i Crida de Funcions &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció als Blocs</h1>
<div class='content'><p>Els blocs són una característica potent en Objective-C que permeten crear i passar fragments de codi. Són similars als closures o lambdas en altres llenguatges de programació. Els blocs poden capturar i emmagatzemar referències a variables i constants del context circumdant.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Definició</strong>: Un bloc és un fragment de codi que es pot executar més tard.</li>
<li><strong>Sintaxi</strong>: Els blocs tenen una sintaxi distintiva que inclou el caràcter <code>^</code>.</li>
<li><strong>Captura de Variables</strong>: Els blocs poden capturar i modificar variables del seu àmbit circumdant.</li>
<li><strong>Tipus de Blocs</strong>: Els blocs es poden utilitzar com a variables locals, propietats o paràmetres de mètodes.</li>
</ul>
</div><h1>Sintaxi Bàsica i Ús</h1>
<h2>Definint i Utilitzant Blocs</h2>
<div class='content'><p>Per definir un bloc, s'utilitza el caràcter <code>^</code> seguit d'un parell de claus <code>{}</code> que contenen el codi a executar.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5laXggdW4gYmxvYyBxdWUgbm8gcHJlbiBwYXLDoG1ldHJlcyBpIHJldG9ybmEgdm9pZAp2b2lkIChec2ltcGxlQmxvY2spKHZvaWQpID0gXnsKICAgIE5TTG9nKEAiQXF1ZXN0IMOpcyB1biBibG9jIHNpbXBsZSEiKTsKfTsKCi8vIEV4ZWN1dGEgZWwgYmxvYwpzaW1wbGVCbG9jaygpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Defineix un bloc que no pren par&agrave;metres i retorna void
void (^simpleBlock)(void) = ^{
    NSLog(@&quot;Aquest &eacute;s un bloc simple!&quot;);
};

// Executa el bloc
simpleBlock();</pre></div><div class='content'></div><h2>Blocs amb Paràmetres i Valors de Retorn</h2>
<div class='content'><p>Els blocs també poden prendre paràmetres i retornar valors. La sintaxi per a això és similar a la definició d'una funció.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5laXggdW4gYmxvYyBxdWUgcHJlbiBkb3MgZW50ZXJzIGkgcmV0b3JuYSBsYSBzZXZhIHN1bWEKaW50IChec3VtQmxvY2spKGludCwgaW50KSA9IF4oaW50IGEsIGludCBiKSB7CiAgICByZXR1cm4gYSArIGI7Cn07CgovLyBFeGVjdXRhIGVsIGJsb2MKaW50IHJlc3VsdCA9IHN1bUJsb2NrKDMsIDQpOwpOU0xvZyhAIkxhIHN1bWEgw6lzICVkIiwgcmVzdWx0KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Defineix un bloc que pren dos enters i retorna la seva suma
int (^sumBlock)(int, int) = ^(int a, int b) {
    return a + b;
};

// Executa el bloc
int result = sumBlock(3, 4);
NSLog(@&quot;La suma &eacute;s %d&quot;, result);</pre></div><div class='content'></div><h1>Captura de Variables</h1>
<div class='content'><p>Els blocs poden capturar variables del seu àmbit circumdant. Per defecte, aquestes variables es capturen com a constants.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50IG11bHRpcGxpZXIgPSAzOwppbnQgKF5tdWx0aXBseUJsb2NrKShpbnQpID0gXihpbnQgbnVtKSB7CiAgICByZXR1cm4gbnVtICogbXVsdGlwbGllcjsKfTsKCmludCByZXN1bHQgPSBtdWx0aXBseUJsb2NrKDUpOwpOU0xvZyhAIkVsIHJlc3VsdGF0IMOpcyAlZCIsIHJlc3VsdCk7IC8vIFNvcnRpZGE6IEVsIHJlc3VsdGF0IMOpcyAxNQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int multiplier = 3;
int (^multiplyBlock)(int) = ^(int num) {
    return num * multiplier;
};

int result = multiplyBlock(5);
NSLog(@&quot;El resultat &eacute;s %d&quot;, result); // Sortida: El resultat &eacute;s 15</pre></div><div class='content'></div><h2>Modificant Variables Capturades</h2>
<div class='content'><p>Per modificar una variable capturada, cal utilitzar el tipus d'emmagatzematge <code>__block</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("X19ibG9jayBpbnQgY291bnRlciA9IDA7CnZvaWQgKF5pbmNyZW1lbnRCbG9jaykodm9pZCkgPSBeewogICAgY291bnRlcisrOwp9OwoKaW5jcmVtZW50QmxvY2soKTsKaW5jcmVtZW50QmxvY2soKTsKTlNMb2coQCJFbCBjb21wdGFkb3Igw6lzICVkIiwgY291bnRlcik7IC8vIFNvcnRpZGE6IEVsIGNvbXB0YWRvciDDqXMgMg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>__block int counter = 0;
void (^incrementBlock)(void) = ^{
    counter++;
};

incrementBlock();
incrementBlock();
NSLog(@&quot;El comptador &eacute;s %d&quot;, counter); // Sortida: El comptador &eacute;s 2</pre></div><div class='content'></div><h1>Blocs com a Paràmetres de Mètodes</h1>
<div class='content'><p>Els blocs es poden passar com a paràmetres a mètodes, cosa que és especialment útil per a funcions de callback.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSAodm9pZClwZXJmb3JtT3BlcmF0aW9uV2l0aENvbXBsZXRpb246KHZvaWQgKF4pKEJPT0wgc3VjY2VzcykpY29tcGxldGlvbiB7CiAgICAvLyBSZWFsaXR6YSBhbGd1bmEgb3BlcmFjacOzCiAgICBCT09MIG9wZXJhdGlvblN1Y2Nlc3MgPSBZRVM7CiAgICAKICAgIC8vIENyaWRhIGVsIGJsb2MgZGUgZmluYWxpdHphY2nDswogICAgc2kgKGNvbXBsZXRpb24pIHsKICAgICAgICBjb21wbGV0aW9uKG9wZXJhdGlvblN1Y2Nlc3MpOwogICAgfQp9CgovLyDDmnMKW3NlbGYgcGVyZm9ybU9wZXJhdGlvbldpdGhDb21wbGV0aW9uOl4oQk9PTCBzdWNjZXNzKSB7CiAgICBpZiAoc3VjY2VzcykgewogICAgICAgIE5TTG9nKEAiTCdvcGVyYWNpw7MgaGEgZXN0YXQgZXhpdG9zYSEiKTsKICAgIH0gZWxzZSB7CiAgICAgICAgTlNMb2coQCJMJ29wZXJhY2nDsyBoYSBmYWxsYXQuIik7CiAgICB9Cn1dOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- (void)performOperationWithCompletion:(void (^)(BOOL success))completion {
    // Realitza alguna operaci&oacute;
    BOOL operationSuccess = YES;
    
    // Crida el bloc de finalitzaci&oacute;
    si (completion) {
        completion(operationSuccess);
    }
}

// &Uacute;s
[self performOperationWithCompletion:^(BOOL success) {
    if (success) {
        NSLog(@&quot;L'operaci&oacute; ha estat exitosa!&quot;);
    } else {
        NSLog(@&quot;L'operaci&oacute; ha fallat.&quot;);
    }
}];</pre></div><div class='content'></div><h1>Blocs com a Propietats</h1>
<div class='content'><p>Els blocs també es poden emmagatzemar com a propietats en classes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBNeUNsYXNzIDogTlNPYmplY3QKQHByb3BlcnR5IChub25hdG9taWMsIGNvcHkpIHZvaWQgKF5jb21wbGV0aW9uSGFuZGxlcikoQk9PTCBzdWNjZXNzKTsKQGVuZAoKQGltcGxlbWVudGF0aW9uIE15Q2xhc3MKLSAodm9pZClzdGFydE9wZXJhdGlvbiB7CiAgICAvLyBSZWFsaXR6YSBhbGd1bmEgb3BlcmFjacOzCiAgICBCT09MIG9wZXJhdGlvblN1Y2Nlc3MgPSBZRVM7CiAgICAKICAgIC8vIENyaWRhIGVsIGdlc3RvciBkZSBmaW5hbGl0emFjacOzIHNpIGV4aXN0ZWl4CiAgICBzaSAoc2VsZi5jb21wbGV0aW9uSGFuZGxlcikgewogICAgICAgIHNlbGYuY29tcGxldGlvbkhhbmRsZXIob3BlcmF0aW9uU3VjY2Vzcyk7CiAgICB9Cn0KQGVuZAoKLy8gw5pzCk15Q2xhc3MgKm15T2JqZWN0ID0gW1tNeUNsYXNzIGFsbG9jXSBpbml0XTsKbXlPYmplY3QuY29tcGxldGlvbkhhbmRsZXIgPSBeKEJPT0wgc3VjY2VzcykgewogICAgaWYgKHN1Y2Nlc3MpIHsKICAgICAgICBOU0xvZyhAIkwnb3BlcmFjacOzIHMnaGEgY29tcGxldGF0IGFtYiDDqHhpdCEiKTsKICAgIH0gZWxzZSB7CiAgICAgICAgTlNMb2coQCJMJ29wZXJhY2nDsyBoYSBmYWxsYXQuIik7CiAgICB9Cn07CltteU9iamVjdCBzdGFydE9wZXJhdGlvbl07"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface MyClass : NSObject
@property (nonatomic, copy) void (^completionHandler)(BOOL success);
@end

@implementation MyClass
- (void)startOperation {
    // Realitza alguna operaci&oacute;
    BOOL operationSuccess = YES;
    
    // Crida el gestor de finalitzaci&oacute; si existeix
    si (self.completionHandler) {
        self.completionHandler(operationSuccess);
    }
}
@end

// &Uacute;s
MyClass *myObject = [[MyClass alloc] init];
myObject.completionHandler = ^(BOOL success) {
    if (success) {
        NSLog(@&quot;L'operaci&oacute; s'ha completat amb &egrave;xit!&quot;);
    } else {
        NSLog(@&quot;L'operaci&oacute; ha fallat.&quot;);
    }
};
[myObject startOperation];</pre></div><div class='content'></div><h1>Ús Avançat</h1>
<h2>Utilitzant Blocs amb Col·leccions</h2>
<div class='content'><p>Els blocs sovint s'utilitzen amb classes de col·lecció com <code>NSArray</code> i <code>NSDictionary</code> per a enumeració i filtratge.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TlNBcnJheSAqbnVtYmVycyA9IEBbQDEsIEAyLCBAMywgQDQsIEA1XTsKTlNBcnJheSAqc3F1YXJlZE51bWJlcnMgPSBbbnVtYmVycyBtYXBVc2luZ0Jsb2NrOl5pZChOU051bWJlciAqbnVtYmVyKSB7CiAgICByZXR1cm4gQChudW1iZXIuaW50VmFsdWUgKiBudW1iZXIuaW50VmFsdWUpOwp9XTsKCk5TTG9nKEAiTm9tYnJlcyBxdWFkcmF0czogJUAiLCBzcXVhcmVkTnVtYmVycyk7IC8vIFNvcnRpZGE6IE5vbWJyZXMgcXVhZHJhdHM6ICgxLCA0LCA5LCAxNiwgMjUp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NSArray *numbers = @[@1, @2, @3, @4, @5];
NSArray *squaredNumbers = [numbers mapUsingBlock:^id(NSNumber *number) {
    return @(number.intValue * number.intValue);
}];

NSLog(@&quot;Nombres quadrats: %@&quot;, squaredNumbers); // Sortida: Nombres quadrats: (1, 4, 9, 16, 25)</pre></div><div class='content'></div><h2>Comparant Blocs i Pointers de Funció</h2>
<div class='content'><p>Els blocs proporcionen una manera més moderna i flexible de gestionar callbacks en comparació amb els pointers de funció tradicionals.</p>
<p>| Característica   | Blocs                          | Pointers de Funció           |
|------------------|--------------------------------|------------------------------|
| Sintaxi          | Moderna, concisa               | Tradicional, extensa         |
| Captura d'Estat  | Pot capturar variables locals  | No pot capturar estat local  |
| Flexibilitat     | Pot ser utilitzat com a propietats, paràmetres, etc. | Limitat a callbacks de funció |</p>
</div><h1>Conclusió</h1>
<div class='content'><p>Els blocs en Objective-C són una característica versàtil i potent que permeten encapsular codi i passar-lo per l'aplicació. Poden capturar i modificar variables del seu context circumdant, cosa que els fa ideals per a callbacks, operacions asíncrones i més. Entendre com definir, utilitzar i passar blocs millorarà notablement les teves habilitats de programació en Objective-C.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='switch-statements'>&#x25C4;Declaracions Switch</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Treballant amb Blocs</a>
	</div>
	<div class='col-4 text-end'>
					<a href='defining-and-calling-functions'>Definició i Crida de Funcions &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
