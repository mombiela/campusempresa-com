<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multithreading i concurrència en Objective-C</title>

    <link rel="alternate" href="https://campusempresa.com/es/objective_c/multithreading-and-concurrency" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/objective_c/multithreading-and-concurrency" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/objective_c/multithreading-and-concurrency" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/objective_c/multithreading-and-concurrency" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='error-handling'>&#x25C4;Gestió d'Errors</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Multithreading i concurrència en Objective-C</a>
	</div>
	<div class='col-4 text-end'>
					<a href='networking'>Xarxes &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció a Multithreading i Concurrència</h1>
<div class='content'><ul>
<li><strong>Multithreading</strong>: La capacitat d'una CPU o un sol nucli en un processador multi-nucli per proporcionar múltiples fils d'execució simultàniament.</li>
<li><strong>Concurrència</strong>: L'execució de diverses seqüències d'instruccions al mateix temps.</li>
</ul>
</div><h1>Per què utilitzar Multithreading?</h1>
<div class='content'><ul>
<li><strong>Millora del rendiment</strong>: Utilitzar eficientment els recursos de la CPU realitzant múltiples operacions simultàniament.</li>
<li><strong>Responsivitat</strong>: Mantenir la interfície d'usuari responsiva realitzant tasques de llarga durada en segon pla.</li>
<li><strong>Compartició de recursos</strong>: Compartir recursos com la memòria i les dades entre múltiples fils.</li>
</ul>
</div><h1>Conceptes bàsics de Multithreading en Objective-C</h1>
<div class='content'><ul>
<li><strong>NSThread</strong>: Una manera bàsica de crear i gestionar fils.</li>
<li><strong>GCD (Grand Central Dispatch)</strong>: Una API d'alt nivell per gestionar operacions concurrents.</li>
<li><strong>NSOperationQueue</strong>: Una manera orientada a objectes de gestionar operacions.</li>
</ul>
</div><h2>Utilitzant NSThread</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYW50IGkgaW5pY2lhbnQgdW4gbm91IGZpbApOU1RocmVhZCAqbXlUaHJlYWQgPSBbW05TVGhyZWFkIGFsbG9jXSBpbml0V2l0aFRhcmdldDpzZWxmIHNlbGVjdG9yOkBzZWxlY3RvcihteVRocmVhZE1haW5NZXRob2QpIG9iamVjdDpuaWxdOwpbbXlUaHJlYWQgc3RhcnRdOwoKLy8gTcOodG9kZSBwcmluY2lwYWwgZGVsIGZpbAotICh2b2lkKW15VGhyZWFkTWFpbk1ldGhvZCB7CiAgICBAYXV0b3JlbGVhc2Vwb29sIHsKICAgICAgICAvLyBSZWFsaXR6YSBsYSB0ZXZhIHRhc2NhIGFxdcOtCiAgICAgICAgTlNMb2coQCJFbCBmaWwgZXN0w6AgZnVuY2lvbmFudCIpOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Creant i iniciant un nou fil
NSThread *myThread = [[NSThread alloc] initWithTarget:self selector:@selector(myThreadMainMethod) object:nil];
[myThread start];

// M&egrave;tode principal del fil
- (void)myThreadMainMethod {
    @autoreleasepool {
        // Realitza la teva tasca aqu&iacute;
        NSLog(@&quot;El fil est&agrave; funcionant&quot;);
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>NSThread</code> s'inicialitza amb un objectiu (self), un selector (mètode a executar) i un objecte opcional.</li>
<li>El mètode <code>start</code> comença l'execució del fil.</li>
<li>El mètode <code>myThreadMainMethod</code> conté el codi que s'executarà en el nou fil.</li>
</ul>
</li>
</ul>
</div><h2>Utilitzant GCD (Grand Central Dispatch)</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRW52aWFudCB1bmEgdGFzY2EgYSB1bmEgY3VhIGRlIHNlZ29uIHBsYQpkaXNwYXRjaF9hc3luYyhkaXNwYXRjaF9nZXRfZ2xvYmFsX3F1ZXVlKERJU1BBVENIX1FVRVVFX1BSSU9SSVRZX0RFRkFVTFQsIDApLCBeewogICAgLy8gUmVhbGl0emEgbGEgdGV2YSB0YXNjYSBkZSBzZWdvbiBwbGEgYXF1w60KICAgIE5TTG9nKEAiTGEgdGFzY2EgZGUgc2Vnb24gcGxhIGVzdMOgIGZ1bmNpb25hbnQiKTsKICAgIAogICAgLy8gQWN0dWFsaXR6YSBsYSBVSSBlbiBlbCBmaWwgcHJpbmNpcGFsCiAgICBkaXNwYXRjaF9hc3luYyhkaXNwYXRjaF9nZXRfbWFpbl9xdWV1ZSgpLCBeewogICAgICAgIC8vIFJlYWxpdHphIGxlcyBhY3R1YWxpdHphY2lvbnMgZGUgbGEgVUkgYXF1w60KICAgICAgICBOU0xvZyhAIlVJIGFjdHVhbGl0emFkYSBlbiBlbCBmaWwgcHJpbmNpcGFsIik7CiAgICB9KTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Enviant una tasca a una cua de segon pla
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // Realitza la teva tasca de segon pla aqu&iacute;
    NSLog(@&quot;La tasca de segon pla est&agrave; funcionant&quot;);
    
    // Actualitza la UI en el fil principal
    dispatch_async(dispatch_get_main_queue(), ^{
        // Realitza les actualitzacions de la UI aqu&iacute;
        NSLog(@&quot;UI actualitzada en el fil principal&quot;);
    });
});</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>dispatch_async</code> programa un bloc de codi per ser executat de manera asíncrona.</li>
<li><code>dispatch_get_global_queue</code> obté una cua concurrent global.</li>
<li><code>dispatch_get_main_queue</code> obté la cua principal, utilitzada per a actualitzacions de la UI.</li>
</ul>
</li>
</ul>
</div><h2>Utilitzant NSOperationQueue</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYW50IHVuYSBjdWEgZCdvcGVyYWNpb25zCk5TT3BlcmF0aW9uUXVldWUgKm9wZXJhdGlvblF1ZXVlID0gW1tOU09wZXJhdGlvblF1ZXVlIGFsbG9jXSBpbml0XTsKCi8vIENyZWFudCB1bmEgb3BlcmFjacOzCk5TQmxvY2tPcGVyYXRpb24gKm9wZXJhdGlvbiA9IFtOU0Jsb2NrT3BlcmF0aW9uIGJsb2NrT3BlcmF0aW9uV2l0aEJsb2NrOl57CiAgICAvLyBSZWFsaXR6YSBsYSB0ZXZhIHRhc2NhIGFxdcOtCiAgICBOU0xvZyhAIkwnb3BlcmFjacOzIGVzdMOgIGZ1bmNpb25hbnQiKTsKfV07CgovLyBBZmVnaW50IGwnb3BlcmFjacOzIGEgbGEgY3VhCltvcGVyYXRpb25RdWV1ZSBhZGRPcGVyYXRpb246b3BlcmF0aW9uXTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Creant una cua d'operacions
NSOperationQueue *operationQueue = [[NSOperationQueue alloc] init];

// Creant una operaci&oacute;
NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^{
    // Realitza la teva tasca aqu&iacute;
    NSLog(@&quot;L'operaci&oacute; est&agrave; funcionant&quot;);
}];

// Afegint l'operaci&oacute; a la cua
[operationQueue addOperation:operation];</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>NSOperationQueue</code> gestiona una cua d'objectes <code>NSOperation</code>.</li>
<li><code>NSBlockOperation</code> és una subclasse concreta de <code>NSOperation</code> que executa un bloc de codi.</li>
<li><code>addOperation</code> afegeix l'operació a la cua per a la seva execució.</li>
</ul>
</li>
</ul>
</div><h1>Conceptes avançats</h1>
<div class='content'><ul>
<li><strong>Sincronització de fils</strong>: Assegurar que múltiples fils puguin accedir a recursos compartits sense conflictes.</li>
<li><strong>Deadlock</strong>: Una situació on dos o més fils estan bloquejats per sempre, esperant-se mútuament.</li>
<li><strong>Condició de carrera</strong>: Una condició on el resultat depèn de la seqüència o el temps d'esdeveniments incontrolables.</li>
</ul>
</div><h2>Sincronització de fils amb @synchronized</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSAodm9pZCljcml0aWNhbFNlY3Rpb24gewogICAgQHN5bmNocm9uaXplZChzZWxmKSB7CiAgICAgICAgLy8gQ29kaSBxdWUgYWNjZWRlaXggYSByZWN1cnNvcyBjb21wYXJ0aXRzCiAgICAgICAgTlNMb2coQCJBY2NlZGludCBhIHJlY3VycyBjb21wYXJ0aXQiKTsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- (void)criticalSection {
    @synchronized(self) {
        // Codi que accedeix a recursos compartits
        NSLog(@&quot;Accedint a recurs compartit&quot;);
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>@synchronized</code> assegura que només un fil pot executar el bloc de codi al mateix temps.</li>
</ul>
</li>
</ul>
</div><h2>Evitant Deadlocks</h2>
<div class='content'><ul>
<li><strong>Millors pràctiques</strong>:
<ul>
<li>Sempre adquirir bloquejos en un ordre consistent.</li>
<li>Evitar bloquejos niats quan sigui possible.</li>
<li>Utilitzar mecanismes de temps d'espera.</li>
</ul>
</li>
</ul>
</div><h2>Gestionant condicions de carrera</h2>
<div class='content'><ul>
<li><strong>Propietats atòmiques</strong>: Assegurar que una propietat s'accedeix de manera segura en fils.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QHByb3BlcnR5IChhdG9taWMsIHN0cm9uZykgTlNTdHJpbmcgKnNoYXJlZFN0cmluZzs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@property (atomic, strong) NSString *sharedString;</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>atomic</code> assegura que la propietat s'accedeix de manera segura en fils, prevenint condicions de carrera.</li>
</ul>
</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Multithreading i concurrència són eines poderoses en Objective-C que poden millorar significativament el rendiment i la responsivitat de les teves aplicacions. Entenent i utilitzant <code>NSThread</code>, GCD, i <code>NSOperationQueue</code>, pots gestionar eficientment tasques concurrents. Sempre tingues en compte la sincronització de fils, els deadlocks i les condicions de carrera per assegurar que les teves aplicacions multithreaded funcionin sense problemes.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='error-handling'>&#x25C4;Gestió d'Errors</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Multithreading i concurrència en Objective-C</a>
	</div>
	<div class='col-4 text-end'>
					<a href='networking'>Xarxes &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
