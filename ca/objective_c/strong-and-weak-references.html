<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Referències Fortes i Febles</title>

    <link rel="alternate" href="https://campusempresa.com/es/objective_c/strong-and-weak-references" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/objective_c/strong-and-weak-references" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/objective_c/strong-and-weak-references" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/objective_c/strong-and-weak-references" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='manual-retain-release'>&#x25C4;Retenció i Alliberament Manual</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Referències Fortes i Febles</a>
	</div>
	<div class='col-4 text-end'>
					<a href='strings-and-text'>Cadenes de Text &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En Objective-C, la gestió de memòria és crucial per crear aplicacions eficients i sense errors. Entendre les referències fortes i febles és essencial per gestionar els cicles de vida dels objectes i evitar fuites de memòria o cicles de retenció. Aquesta secció cobrirà els conceptes de referències fortes i febles, les seves diferències i com utilitzar-les efectivament en el teu codi.</p>
</div><h1>Referències Fortes</h1>
<div class='content'><p>Una referència forta és el tipus de referència per defecte en Objective-C. Quan crees una referència forta a un objecte, augmenta el recompte de retenció de l'objecte, assegurant que l'objecte es mantingui en memòria mentre la referència existeixi.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Recompte de Retenció</strong>: El nombre de referències fortes a un objecte.</li>
<li><strong>Propietat</strong>: Una referència forta implica propietat de l'objecte, és a dir, l'objecte no serà desalocat mentre hi hagi almenys una referència forta a ell.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBNeUNsYXNzIDogTlNPYmplY3QKQHByb3BlcnR5IChzdHJvbmcsIG5vbmF0b21pYykgTlNTdHJpbmcgKm5hbWU7CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBNeUNsYXNzCkBlbmQKCmludCBtYWluKGludCBhcmdjLCBjb25zdCBjaGFyICogYXJndltdKSB7CiAgICBAYXV0b3JlbGVhc2Vwb29sIHsKICAgICAgICBNeUNsYXNzICpteU9iamVjdCA9IFtbTXlDbGFzcyBhbGxvY10gaW5pdF07CiAgICAgICAgbXlPYmplY3QubmFtZSA9IEAiT2JqZWN0aXZlLUMiOwogICAgICAgIC8vIG15T2JqZWN0IHTDqSB1bmEgcmVmZXLDqG5jaWEgZm9ydGEgYSBsJ29iamVjdGUgTlNTdHJpbmcgIk9iamVjdGl2ZS1DIgogICAgfQogICAgLy8gTCdvYmplY3RlIE5TU3RyaW5nICJPYmplY3RpdmUtQyIgc2Vyw6AgZGVzYWxvY2F0IGFxdcOtIHNpIG5vIGV4aXN0ZWl4ZW4gYWx0cmVzIHJlZmVyw6huY2llcyBmb3J0ZXMKICAgIHJldHVybiAwOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface MyClass : NSObject
@property (strong, nonatomic) NSString *name;
@end

@implementation MyClass
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        MyClass *myObject = [[MyClass alloc] init];
        myObject.name = @&quot;Objective-C&quot;;
        // myObject t&eacute; una refer&egrave;ncia forta a l'objecte NSString &quot;Objective-C&quot;
    }
    // L'objecte NSString &quot;Objective-C&quot; ser&agrave; desalocat aqu&iacute; si no existeixen altres refer&egrave;ncies fortes
    return 0;
}</pre></div><div class='content'><p>En aquest exemple, <code>myObject</code> té una referència forta a l'objecte <code>NSString</code> &quot;Objective-C&quot;. Mentre <code>myObject</code> existeixi, l'objecte <code>NSString</code> no serà desalocat.</p>
</div><h1>Referències Febles</h1>
<div class='content'><p>Una referència feble no augmenta el recompte de retenció d'un objecte. Permet referenciar un objecte sense prendre'n la propietat. Les referències febles es fan servir típicament per evitar cicles de retenció, especialment en patrons de delegació i relacions pare-fill.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>No-propietat</strong>: Una referència feble no implica propietat, és a dir, l'objecte pot ser desalocat fins i tot si existeixen referències febles a ell.</li>
<li><strong>Assignació Automàtica a Nil</strong>: Quan l'objecte al qual apunta una referència feble és desalocat, la referència feble es configura automàticament a <code>nil</code>.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBNeUNsYXNzIDogTlNPYmplY3QKQHByb3BlcnR5ICh3ZWFrLCBub25hdG9taWMpIGlkIGRlbGVnYXRlOwpAZW5kCgpAaW1wbGVtZW50YXRpb24gTXlDbGFzcwpAZW5kCgpAaW50ZXJmYWNlIE15RGVsZWdhdGUgOiBOU09iamVjdApAZW5kCgpAaW1wbGVtZW50YXRpb24gTXlEZWxlZ2F0ZQpAZW5kCgppbnQgbWFpbihpbnQgYXJnYywgY29uc3QgY2hhciAqIGFyZ3ZbXSkgewogICAgQGF1dG9yZWxlYXNlcG9vbCB7CiAgICAgICAgTXlDbGFzcyAqbXlPYmplY3QgPSBbW015Q2xhc3MgYWxsb2NdIGluaXRdOwogICAgICAgIE15RGVsZWdhdGUgKm15RGVsZWdhdGUgPSBbW015RGVsZWdhdGUgYWxsb2NdIGluaXRdOwogICAgICAgIG15T2JqZWN0LmRlbGVnYXRlID0gbXlEZWxlZ2F0ZTsKICAgICAgICAvLyBteU9iamVjdCB0w6kgdW5hIHJlZmVyw6huY2lhIGZlYmxlIGEgbXlEZWxlZ2F0ZQogICAgfQogICAgLy8gbXlEZWxlZ2F0ZSBzZXLDoCBkZXNhbG9jYXQgYXF1w60sIGkgbXlPYmplY3QuZGVsZWdhdGUgc2Vyw6AgY29uZmlndXJhdCBhIG5pbAogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface MyClass : NSObject
@property (weak, nonatomic) id delegate;
@end

@implementation MyClass
@end

@interface MyDelegate : NSObject
@end

@implementation MyDelegate
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        MyClass *myObject = [[MyClass alloc] init];
        MyDelegate *myDelegate = [[MyDelegate alloc] init];
        myObject.delegate = myDelegate;
        // myObject t&eacute; una refer&egrave;ncia feble a myDelegate
    }
    // myDelegate ser&agrave; desalocat aqu&iacute;, i myObject.delegate ser&agrave; configurat a nil
    return 0;
}</pre></div><div class='content'><p>En aquest exemple, <code>myObject</code> té una referència feble a <code>myDelegate</code>. Quan <code>myDelegate</code> és desalocat, <code>myObject.delegate</code> es configura automàticament a <code>nil</code>.</p>
</div><h1>Comparació entre Referències Fortes i Febles</h1>
<div class='content'><p>| Característica           | Referència Forta | Referència Feble |
|--------------------------|------------------|------------------|
| Augmenta el Recompte de Retenció | Sí               | No               |
| Implica Propietat        | Sí               | No               |
| Evita la Desalocació     | Sí               | No               |
| Assignació Automàtica a Nil | No               | Sí               |</p>
</div><h1>Casos Pràctics</h1>
<div class='content'><ul>
<li><strong>Referències Fortes</strong>: Utilitza referències fortes per a propietats i variables on necessitis assegurar que l'objecte romangui en memòria mentre la referència existeixi.</li>
<li><strong>Referències Febles</strong>: Utilitza referències febles per evitar cicles de retenció, particularment en patrons de delegació, relacions pare-fill i quan es referencien objectes que no s'han de retenir.</li>
</ul>
</div><h2>Exemple de Cicle de Retenció</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBQYXJlbnQgOiBOU09iamVjdApAcHJvcGVydHkgKHN0cm9uZywgbm9uYXRvbWljKSBDaGlsZCAqY2hpbGQ7CkBlbmQKCkBpbnRlcmZhY2UgQ2hpbGQgOiBOU09iamVjdApAcHJvcGVydHkgKHN0cm9uZywgbm9uYXRvbWljKSBQYXJlbnQgKnBhcmVudDsKQGVuZAoKQGltcGxlbWVudGF0aW9uIFBhcmVudApAZW5kCgpAaW1wbGVtZW50YXRpb24gQ2hpbGQKQGVuZAoKaW50IG1haW4oaW50IGFyZ2MsIGNvbnN0IGNoYXIgKiBhcmd2W10pIHsKICAgIEBhdXRvcmVsZWFzZXBvb2wgewogICAgICAgIFBhcmVudCAqcGFyZW50ID0gW1tQYXJlbnQgYWxsb2NdIGluaXRdOwogICAgICAgIENoaWxkICpjaGlsZCA9IFtbQ2hpbGQgYWxsb2NdIGluaXRdOwogICAgICAgIHBhcmVudC5jaGlsZCA9IGNoaWxkOwogICAgICAgIGNoaWxkLnBhcmVudCA9IHBhcmVudDsKICAgICAgICAvLyBBaXjDsiBjcmVhIHVuIGNpY2xlIGRlIHJldGVuY2nDsywgamEgcXVlIGFtYmTDs3Mgb2JqZWN0ZXMgZXMgcmVmZXJlbmNpZW4gZm9ydGFtZW50IGVudHJlIGVsbHMKICAgIH0KICAgIC8vIE5pIHBhcmVudCBuaSBjaGlsZCBzZXJhbiBkZXNhbG9jYXRzIGEgY2F1c2EgZGVsIGNpY2xlIGRlIHJldGVuY2nDswogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface Parent : NSObject
@property (strong, nonatomic) Child *child;
@end

@interface Child : NSObject
@property (strong, nonatomic) Parent *parent;
@end

@implementation Parent
@end

@implementation Child
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Parent *parent = [[Parent alloc] init];
        Child *child = [[Child alloc] init];
        parent.child = child;
        child.parent = parent;
        // Aix&ograve; crea un cicle de retenci&oacute;, ja que ambd&oacute;s objectes es referencien fortament entre ells
    }
    // Ni parent ni child seran desalocats a causa del cicle de retenci&oacute;
    return 0;
}</pre></div><div class='content'></div><h2>Resolució del Cicle de Retenció amb Referència Feble</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBQYXJlbnQgOiBOU09iamVjdApAcHJvcGVydHkgKHN0cm9uZywgbm9uYXRvbWljKSBDaGlsZCAqY2hpbGQ7CkBlbmQKCkBpbnRlcmZhY2UgQ2hpbGQgOiBOU09iamVjdApAcHJvcGVydHkgKHdlYWssIG5vbmF0b21pYykgUGFyZW50ICpwYXJlbnQ7CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBQYXJlbnQKQGVuZAoKQGltcGxlbWVudGF0aW9uIENoaWxkCkBlbmQKCmludCBtYWluKGludCBhcmdjLCBjb25zdCBjaGFyICogYXJndltdKSB7CiAgICBAYXV0b3JlbGVhc2Vwb29sIHsKICAgICAgICBQYXJlbnQgKnBhcmVudCA9IFtbUGFyZW50IGFsbG9jXSBpbml0XTsKICAgICAgICBDaGlsZCAqY2hpbGQgPSBbW0NoaWxkIGFsbG9jXSBpbml0XTsKICAgICAgICBwYXJlbnQuY2hpbGQgPSBjaGlsZDsKICAgICAgICBjaGlsZC5wYXJlbnQgPSBwYXJlbnQ7CiAgICAgICAgLy8gTm8gaGkgaGEgY2ljbGUgZGUgcmV0ZW5jacOzLCBqYSBxdWUgY2hpbGQucGFyZW50IMOpcyB1bmEgcmVmZXLDqG5jaWEgZmVibGUKICAgIH0KICAgIC8vIFRhbnQgcGFyZW50IGNvbSBjaGlsZCBzZXJhbiBkZXNhbG9jYXRzIGFxdcOtCiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface Parent : NSObject
@property (strong, nonatomic) Child *child;
@end

@interface Child : NSObject
@property (weak, nonatomic) Parent *parent;
@end

@implementation Parent
@end

@implementation Child
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Parent *parent = [[Parent alloc] init];
        Child *child = [[Child alloc] init];
        parent.child = child;
        child.parent = parent;
        // No hi ha cicle de retenci&oacute;, ja que child.parent &eacute;s una refer&egrave;ncia feble
    }
    // Tant parent com child seran desalocats aqu&iacute;
    return 0;
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Entendre i utilitzar correctament les referències fortes i febles és fonamental per a una gestió efectiva de la memòria en Objective-C. Les referències fortes asseguren que els objectes romanguin en memòria, mentre que les referències febles ajuden a evitar cicles de retenció i ús innecessari de memòria. Aplicant aquests conceptes, pots crear aplicacions més eficients i fiables.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='manual-retain-release'>&#x25C4;Retenció i Alliberament Manual</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Referències Fortes i Febles</a>
	</div>
	<div class='col-4 text-end'>
					<a href='strings-and-text'>Cadenes de Text &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
