<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaccions</title>

    <link rel="alternate" href="https://campusempresa.com/es/sql/transactions" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/sql/transactions" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/sql/transactions" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/sql/transactions" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='views'>&#x25C4; Vistes</a></div><div class='col-6 text-end'><a href='error-handling'>Gestió d'errors &#x25BA;</a></div></div><div class='content'></div><h1>Introducció a les Transaccions</h1>
<div class='content'><p>Les transaccions en SQL són un concepte fonamental que garanteix la integritat i consistència de les dades dins d'una base de dades. Una transacció és una seqüència d'una o més operacions SQL tractades com una única unitat de treball. Aquestes operacions han de tenir èxit totes o fallar totes, mantenint la base de dades en un estat consistent.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Atomicitat</strong>: Garanteix que totes les operacions dins d'una transacció es completin; si no, la transacció s'aborta.</li>
<li><strong>Consistència</strong>: Garanteix que una transacció porta la base de dades d'un estat vàlid a un altre.</li>
<li><strong>Aïllament</strong>: Garanteix que les transaccions es processen de manera segura i independent al mateix temps sense interferències.</li>
<li><strong>Durabilitat</strong>: Garanteix que una vegada que una transacció ha estat compromesa, romandrà així, fins i tot en cas de fallada del sistema.</li>
</ul>
</div><h1>Comandes Bàsiques de Transacció</h1>
<h2>Iniciant una Transacció</h2>
<div class='content'><p>Per començar una transacció, s'utilitza la sentència <code>BEGIN TRANSACTION</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;</pre></div><div class='content'></div><h2>Comprometent una Transacció</h2>
<div class='content'><p>Per guardar els canvis fets durant la transacció, s'utilitza la sentència <code>COMMIT</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q09NTUlUOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>COMMIT;</pre></div><div class='content'></div><h2>Desfent una Transacció</h2>
<div class='content'><p>Per desfer els canvis fets durant la transacció, s'utilitza la sentència <code>ROLLBACK</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Uk9MTEJBQ0s7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ROLLBACK;</pre></div><div class='content'></div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047CgpVUERBVEUgYWNjb3VudHMKU0VUIGJhbGFuY2UgPSBiYWxhbmNlIC0gMTAwCldIRVJFIGFjY291bnRfaWQgPSAxOwoKVVBEQVRFIGFjY291bnRzClNFVCBiYWxhbmNlID0gYmFsYW5jZSArIDEwMApXSEVSRSBhY2NvdW50X2lkID0gMjsKCkNPTU1JVDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;

UPDATE accounts
SET balance = balance - 100
WHERE account_id = 1;

UPDATE accounts
SET balance = balance + 100
WHERE account_id = 2;

COMMIT;</pre></div><div class='content'><p>En aquest exemple, es transfereixen diners d'un compte a un altre. Si alguna part d'aquesta transacció falla, es pot utilitzar la comanda <code>ROLLBACK</code> per desfer tots els canvis.</p>
</div><h1>Gestió Avançada de Transaccions</h1>
<h2>Punts de Restauració</h2>
<div class='content'><p>Els punts de restauració permeten establir punts intermedis dins d'una transacció als quals es pot tornar més tard sense afectar tota la transacció.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0FWRVBPSU5UIHNhdmVwb2ludF9uYW1lOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SAVEPOINT savepoint_name;</pre></div><div class='content'></div><h2>Desfent fins a un Punt de Restauració</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Uk9MTEJBQ0sgVE8gc2F2ZXBvaW50X25hbWU7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ROLLBACK TO savepoint_name;</pre></div><div class='content'></div><h2>Alliberant un Punt de Restauració</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UkVMRUFTRSBTQVZFUE9JTlQgc2F2ZXBvaW50X25hbWU7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>RELEASE SAVEPOINT savepoint_name;</pre></div><div class='content'></div><h2>Exemple amb Punts de Restauració</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047CgpVUERBVEUgYWNjb3VudHMKU0VUIGJhbGFuY2UgPSBiYWxhbmNlIC0gMTAwCldIRVJFIGFjY291bnRfaWQgPSAxOwoKU0FWRVBPSU5UIHNwMTsKClVQREFURSBhY2NvdW50cwpTRVQgYmFsYW5jZSA9IGJhbGFuY2UgKyAxMDAKV0hFUkUgYWNjb3VudF9pZCA9IDI7CgotLSBBbGd1bmEgY29zYSB2YSBtYWxhbWVudCwgZGVzZmVtIGZpbnMgYWwgcHVudCBkZSByZXN0YXVyYWNpw7MKUk9MTEJBQ0sgVE8gc3AxOwoKLS0gQ29udGludWVtIGFtYiBhbHRyZXMgb3BlcmFjaW9ucwpVUERBVEUgYWNjb3VudHMKU0VUIGJhbGFuY2UgPSBiYWxhbmNlICsgNTAKV0hFUkUgYWNjb3VudF9pZCA9IDM7CgpDT01NSVQ7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;

UPDATE accounts
SET balance = balance - 100
WHERE account_id = 1;

SAVEPOINT sp1;

UPDATE accounts
SET balance = balance + 100
WHERE account_id = 2;

-- Alguna cosa va malament, desfem fins al punt de restauraci&oacute;
ROLLBACK TO sp1;

-- Continuem amb altres operacions
UPDATE accounts
SET balance = balance + 50
WHERE account_id = 3;

COMMIT;</pre></div><div class='content'><p>En aquest exemple, si la segona actualització falla, la transacció es desfà fins al punt de restauració <code>sp1</code>, i les operacions posteriors poden continuar.</p>
</div><h1>Nivells d'Aïllament</h1>
<div class='content'><p>Els nivells d'aïllament defineixen el grau en què les operacions d'una transacció estan aïllades de les d'altres transaccions. L'estàndard SQL defineix quatre nivells d'aïllament:</p>
<p>| Nivell d'Aïllament | Descripció |
|--------------------|------------|
| Read Uncommitted   | Permet lectures brutes, on una transacció pot llegir dades modificades per una altra transacció no compromesa. |
| Read Committed     | Evita lectures brutes, garantint que una transacció només pot llegir dades compromeses. |
| Repeatable Read    | Evita lectures brutes i no repetibles, garantint que si una transacció llegeix una fila, llegirà el mateix valor si la torna a llegir. |
| Serializable       | El nivell d'aïllament més alt, garantint un aïllament complet d'altres transaccions, evitant lectures brutes, no repetibles i lectures fantasma. |</p>
</div><h2>Establint Nivells d'Aïllament</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VUIFRSQU5TQUNUSU9OIElTT0xBVElPTiBMRVZFTCBSRUFEIENPTU1JVFRFRDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SET TRANSACTION ISOLATION LEVEL READ COMMITTED;</pre></div><div class='content'></div><h2>Exemple amb Nivells d'Aïllament</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VUIFRSQU5TQUNUSU9OIElTT0xBVElPTiBMRVZFTCBTRVJJQUxJWkFCTEU7CgpCRUdJTiBUUkFOU0FDVElPTjsKCi0tIE9wZXJhY2lvbnMgYXF1w60KCkNPTU1JVDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

BEGIN TRANSACTION;

-- Operacions aqu&iacute;

COMMIT;</pre></div><div class='content'><p>En aquest exemple, la transacció es configura al nivell d'aïllament més alt, garantint un aïllament complet d'altres transaccions.</p>
</div><h1>Conclusió</h1>
<div class='content'><p>Les transaccions són essencials per mantenir la integritat i consistència de les dades en bases de dades SQL. Entenent i utilitzant les transaccions de manera efectiva, pots garantir que les teves operacions de base de dades siguin fiables i segures. Conceptes clau com l'atomicitat, consistència, aïllament i durabilitat (ACID) formen la base de la gestió de transaccions. Funcionalitats avançades com els punts de restauració i els nivells d'aïllament proporcionen control i flexibilitat addicionals, permetent una gestió de transaccions més sofisticada.</p>
</div><div class='row navigation'><div class='col-6'><a href='views'>&#x25C4; Vistes</a></div><div class='col-6 text-end'><a href='error-handling'>Gestió d'errors &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
