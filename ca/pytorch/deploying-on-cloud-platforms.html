<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desplegament en Plataformes Cloud</title>

    <link rel="alternate" href="https://campusempresa.com/es/pytorch/deploying-on-cloud-platforms" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/pytorch/deploying-on-cloud-platforms" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/pytorch/deploying-on-cloud-platforms" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/pytorch/deploying-on-cloud-platforms" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='optimizing-for-inference'>&#x25C4; Optimització per a Inferència</a></div><div class='col-6 text-end'><a href='image-classification-project'>Projecte de Classificació d'Imatges &#x25BA;</a></div></div><div class='content'><p>Desplegar models de PyTorch en plataformes cloud és una habilitat crucial per fer que les teves aplicacions d'aprenentatge automàtic siguin accessibles i escalables. Aquesta secció et guiarà a través del procés de desplegar models de PyTorch en plataformes cloud populars, cobrint tant temes per a principiants com avançats.</p>
</div><h1>Introducció al Desplegament en el Núvol</h1>
<div class='content'><ul>
<li>
<p><strong>Què és el Desplegament en el Núvol?</strong></p>
<ul>
<li>El desplegament en el núvol implica allotjar la teva aplicació o model en un proveïdor de serveis cloud, fent-lo accessible a través d'internet.</li>
<li>Els beneficis inclouen escalabilitat, fiabilitat i facilitat d'accés.</li>
</ul>
</li>
<li>
<p><strong>Plataformes Cloud Populars</strong></p>
<ul>
<li>Amazon Web Services (AWS)</li>
<li>Google Cloud Platform (GCP)</li>
<li>Microsoft Azure</li>
</ul>
</li>
</ul>
</div><h1>Configurant el Teu Entorn</h1>
<div class='content'><p>Abans de desplegar el teu model de PyTorch, necessites configurar el teu entorn en la plataforma cloud escollida.</p>
</div><h2>Configuració d'AWS</h2>
<div class='content'><ul>
<li>
<p><strong>Crear un Compte d'AWS</strong></p>
<ul>
<li>Registra't per a un compte d'AWS a <a href="https://aws.amazon.com/">aws.amazon.com</a>.</li>
</ul>
</li>
<li>
<p><strong>Configurar Rols IAM</strong></p>
<ul>
<li>Crea rols IAM per gestionar permisos de manera segura.</li>
</ul>
</li>
<li>
<p><strong>Llançar una Instància EC2</strong></p>
<ul>
<li>Tria un tipus d'instància adequat (per exemple, t2.micro per a aplicacions petites).</li>
<li>Configura grups de seguretat per permetre l'accés SSH i HTTP/HTTPS.</li>
</ul>
</li>
</ul>
</div><h2>Configuració de GCP</h2>
<div class='content'><ul>
<li>
<p><strong>Crear un Compte de GCP</strong></p>
<ul>
<li>Registra't per a un compte de GCP a <a href="https://cloud.google.com/">cloud.google.com</a>.</li>
</ul>
</li>
<li>
<p><strong>Configurar Rols IAM</strong></p>
<ul>
<li>Crea rols IAM per gestionar permisos de manera segura.</li>
</ul>
</li>
<li>
<p><strong>Llançar una Instància de Compute Engine</strong></p>
<ul>
<li>Tria un tipus de màquina adequat (per exemple, n1-standard-1 per a aplicacions petites).</li>
<li>Configura regles de tallafocs per permetre l'accés SSH i HTTP/HTTPS.</li>
</ul>
</li>
</ul>
</div><h2>Configuració d'Azure</h2>
<div class='content'><ul>
<li>
<p><strong>Crear un Compte d'Azure</strong></p>
<ul>
<li>Registra't per a un compte d'Azure a <a href="https://azure.microsoft.com/">azure.microsoft.com</a>.</li>
</ul>
</li>
<li>
<p><strong>Configurar Rols IAM</strong></p>
<ul>
<li>Crea rols IAM per gestionar permisos de manera segura.</li>
</ul>
</li>
<li>
<p><strong>Llançar una Màquina Virtual</strong></p>
<ul>
<li>Tria una mida de VM adequada (per exemple, B1s per a aplicacions petites).</li>
<li>Configura grups de seguretat de xarxa per permetre l'accés SSH i HTTP/HTTPS.</li>
</ul>
</li>
</ul>
</div><h1>Desplegant un Model de PyTorch</h1>
<div class='content'></div><h2>Preparant el Teu Model</h2>
<div class='content'><ul>
<li>
<p><strong>Desant el Model</strong></p>
<ul>
<li>Desa el teu model de PyTorch entrenat utilitzant <code>torch.save()</code>.</li>
</ul>
<pre><code class="language-python">import torch
import torchvision.models as models

model = models.resnet18(pretrained=True)
torch.save(model.state_dict(), 'model.pth')
</code></pre>
</li>
<li>
<p><strong>Carregant el Model</strong></p>
<ul>
<li>Carrega el model en el teu script de desplegament.</li>
</ul>
<pre><code class="language-python">model = models.resnet18()
model.load_state_dict(torch.load('model.pth'))
model.eval()
</code></pre>
</li>
</ul>
</div><h2>Creant una API amb Flask</h2>
<div class='content'><ul>
<li>
<p><strong>Configurant Flask</strong></p>
<ul>
<li>Instal·la Flask utilitzant pip.</li>
</ul>
<pre><code class="language-bash">pip install flask
</code></pre>
</li>
<li>
<p><strong>Creant l'API</strong></p>
<ul>
<li>Crea una API simple amb Flask per servir el teu model.</li>
</ul>
<pre><code class="language-python">from flask import Flask, request, jsonify
import torch
import torchvision.transforms as transforms
from PIL import Image

app = Flask(__name__)

model = models.resnet18()
model.load_state_dict(torch.load('model.pth'))
model.eval()

def transform_image(image_bytes):
    my_transforms = transforms.Compose([transforms.Resize(255),
                                        transforms.CenterCrop(224),
                                        transforms.ToTensor(),
                                        transforms.Normalize(
                                            [0.485, 0.456, 0.406], 
                                            [0.229, 0.224, 0.225])])
    image = Image.open(io.BytesIO(image_bytes))
    return my_transforms(image).unsqueeze(0)

@app.route('/predict', methods=['POST'])
def predict():
    if request.method == 'POST':
        file = request.files['file']
        img_bytes = file.read()
        tensor = transform_image(img_bytes)
        outputs = model(tensor)
        _, y_hat = outputs.max(1)
        return jsonify({'prediction': y_hat.item()})

if __name__ == '__main__':
    app.run()
</code></pre>
</li>
</ul>
</div><h2>Desplegant l'API de Flask</h2>
<div class='content'><h4>AWS</h4>
<ul>
<li>
<p><strong>Utilitzant Elastic Beanstalk</strong></p>
<ul>
<li>Empaqueta la teva aplicació de Flask.</li>
<li>Desplega utilitzant Elastic Beanstalk CLI.</li>
</ul>
<pre><code class="language-bash">eb init -p python-3.7 my-flask-app
eb create my-flask-env
</code></pre>
</li>
</ul>
<h4>GCP</h4>
<ul>
<li>
<p><strong>Utilitzant Google App Engine</strong></p>
<ul>
<li>Crea un fitxer <code>app.yaml</code> per a la configuració.</li>
<li>Desplega utilitzant el gcloud CLI.</li>
</ul>
<pre><code class="language-yaml">runtime: python37
</code></pre>
<pre><code class="language-bash">gcloud app deploy
</code></pre>
</li>
</ul>
<h4>Azure</h4>
<ul>
<li>
<p><strong>Utilitzant Azure App Service</strong></p>
<ul>
<li>Crea un pla de servei d'aplicacions.</li>
<li>Desplega utilitzant l'Azure CLI.</li>
</ul>
<pre><code class="language-bash">az webapp up --name my-flask-app --resource-group myResourceGroup --plan myAppServicePlan
</code></pre>
</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Desplegar models de PyTorch en plataformes cloud implica diversos passos, des de configurar el teu entorn fins a crear i desplegar una API amb Flask. Seguint aquesta guia, hauràs de poder desplegar els teus models en AWS, GCP o Azure, fent-los accessibles i escalables. Aquesta habilitat és essencial per portar les teves aplicacions d'aprenentatge automàtic a producció i fer-les disponibles per a usuaris de tot el món.</p>
</div><div class='row navigation'><div class='col-6'><a href='optimizing-for-inference'>&#x25C4; Optimització per a Inferència</a></div><div class='col-6 text-end'><a href='image-classification-project'>Projecte de Classificació d'Imatges &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
