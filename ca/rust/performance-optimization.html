<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimització del Rendiment en Rust</title>

    <link rel="alternate" href="https://campusempresa.com/es/rust/performance-optimization" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/rust/performance-optimization" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/rust/performance-optimization" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/rust/performance-optimization" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='common-design-patterns'>&#x25C4;Patrons de Disseny Comuns</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Optimització del Rendiment en Rust</a>
	</div>
	<div class='col-4 text-end'>
					<a href='contributing-to-open-source'>Contribuir a Codi Obert &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció a l'Optimització del Rendiment</h1>
<div class='content'><p>L'optimització del rendiment és un aspecte crucial del desenvolupament de programari, especialment en la programació de sistemes on Rust excel·leix. Aquesta secció cobrirà els conceptes bàsics de per què el rendiment importa i com les característiques de Rust poden ajudar-te a escriure codi eficient.</p>
<ul>
<li><strong>Per què el Rendiment Importa</strong>: Execució de codi més ràpida, ús reduït de recursos i millora de l'experiència de l'usuari.</li>
<li><strong>Avantatges de Rust</strong>: Abstraccions de cost zero, model de propietat i concurrència segura.</li>
</ul>
</div><h1>Perfilat i Benchmarking</h1>
<div class='content'><p>Abans d'optimitzar, és essencial identificar els colls d'ampolla en el teu codi. El perfilat i el benchmarking són eines que t'ajuden a entendre on el teu programa passa la major part del seu temps.</p>
<ul>
<li><strong>Perfilat</strong>: Utilitza eines com <code>cargo-flamegraph</code> i <code>perf</code> per visualitzar el rendiment.</li>
<li><strong>Benchmarking</strong>: Utilitza el crate <code>criterion</code> per mesurar i comparar el rendiment de diferents fragments de codi.</li>
</ul>
</div><h2>Exemple: Benchmarking Bàsic amb Criterion</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIGNyaXRlcmlvbjo6e2JsYWNrX2JveCwgY3JpdGVyaW9uX2dyb3VwLCBjcml0ZXJpb25fbWFpbiwgQ3JpdGVyaW9ufTsKCmZuIGZpYm9uYWNjaShuOiB1NjQpIC0+IHU2NCB7CiAgICBtYXRjaCBuIHsKICAgICAgICAwID0+IDAsCiAgICAgICAgMSA9PiAxLAogICAgICAgIF8gPT4gZmlib25hY2NpKG4gLSAxKSArIGZpYm9uYWNjaShuIC0gMiksCiAgICB9Cn0KCmZuIGNyaXRlcmlvbl9iZW5jaG1hcmsoYzogJm11dCBDcml0ZXJpb24pIHsKICAgIGMuYmVuY2hfZnVuY3Rpb24oImZpYiAyMCIsIHxifCBiLml0ZXIofHwgZmlib25hY2NpKGJsYWNrX2JveCgyMCkpKSk7Cn0KCmNyaXRlcmlvbl9ncm91cCEoYmVuY2hlcywgY3JpdGVyaW9uX2JlbmNobWFyayk7CmNyaXRlcmlvbl9tYWluIShiZW5jaGVzKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use criterion::{black_box, criterion_group, criterion_main, Criterion};

fn fibonacci(n: u64) -&gt; u64 {
    match n {
        0 =&gt; 0,
        1 =&gt; 1,
        _ =&gt; fibonacci(n - 1) + fibonacci(n - 2),
    }
}

fn criterion_benchmark(c: &amp;mut Criterion) {
    c.bench_function(&quot;fib 20&quot;, |b| b.iter(|| fibonacci(black_box(20))));
}

criterion_group!(benches, criterion_benchmark);
criterion_main!(benches);</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: Aquest codi fa un benchmark de la funció <code>fibonacci</code> per <code>n = 20</code>. La funció <code>black_box</code> s'utilitza per evitar que el compilador optimitzi la crida a la funció.</li>
</ul>
</div><h1>Gestió de Memòria</h1>
<div class='content'><p>Una gestió eficient de la memòria és clau per al rendiment. El model de propietat de Rust ajuda a gestionar la memòria sense un col·lector d'escombraries, però encara hi ha millors pràctiques a seguir.</p>
<ul>
<li><strong>Pila vs Heap</strong>: Entén la diferència i quan utilitzar cadascun.</li>
<li><strong>Evitar Assignacions Innecessàries</strong>: Utilitza l'assignació a la pila quan sigui possible i prefereix <code>Vec</code> sobre <code>Box&lt;[T]&gt;</code> per a arrays dinàmics.</li>
<li><strong>Ús de Slices i Referències</strong>: Minimitza les còpies utilitzant slices (<code>&amp;[T]</code>) i referències (<code>&amp;T</code>).</li>
</ul>
</div><h2>Exemple: Ús Eficient de Vectors</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zm4gbWFpbigpIHsKICAgIGxldCBtdXQgdmVjID0gVmVjOjp3aXRoX2NhcGFjaXR5KDEwKTsKICAgIGZvciBpIGluIDAuLjEwIHsKICAgICAgICB2ZWMucHVzaChpKTsKICAgIH0KICAgIHByaW50bG4hKCJ7Oj99IiwgdmVjKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>fn main() {
    let mut vec = Vec::with_capacity(10);
    for i in 0..10 {
        vec.push(i);
    }
    println!(&quot;{:?}&quot;, vec);
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: Preassignar capacitat per al vector evita múltiples real·locacions, millorant el rendiment.</li>
</ul>
</div><h1>Concurrència i Paral·lelisme</h1>
<div class='content'><p>El model de concurrència de Rust, basat en la propietat i el préstec, assegura la seguretat dels fils sense una penalització de rendiment.</p>
<ul>
<li><strong>Fils</strong>: Utilitza el mòdul <code>std::thread</code> per crear i gestionar fils.</li>
<li><strong>Crate Rayon</strong>: Simplifica el paral·lelisme proporcionant iteradors paral·lels.</li>
</ul>
</div><h2>Exemple: Iteració Paral·lela amb Rayon</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHJheW9uOjpwcmVsdWRlOjoqOwoKZm4gbWFpbigpIHsKICAgIGxldCB2OiBWZWM8aTMyPiA9ICgxLi4xMDAwKS5jb2xsZWN0KCk7CiAgICBsZXQgc3VtOiBpMzIgPSB2LnBhcl9pdGVyKCkuc3VtKCk7CiAgICBwcmludGxuISgiU3VtOiB7fSIsIHN1bSk7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use rayon::prelude::*;

fn main() {
    let v: Vec&lt;i32&gt; = (1..1000).collect();
    let sum: i32 = v.par_iter().sum();
    println!(&quot;Sum: {}&quot;, sum);
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: El mètode <code>par_iter</code> del crate <code>rayon</code> permet la iteració paral·lela, fent que el càlcul de la suma sigui més ràpid en processadors multi-nucli.</li>
</ul>
</div><h1>Optimització d'Algorismes i Estructures de Dades</h1>
<div class='content'><p>Escollir l'algorisme i l'estructura de dades adequats pot tenir un impacte significatiu en el rendiment.</p>
<ul>
<li><strong>Complexitat d'Algorismes</strong>: Entén la notació Big O i prefereix algorismes amb menor complexitat temporal.</li>
<li><strong>Estructures de Dades</strong>: Utilitza estructures de dades adequades com <code>HashMap</code>, <code>BTreeMap</code>, <code>Vec</code> i <code>LinkedList</code> segons el cas d'ús.</li>
</ul>
</div><h2>Exemple: Ús de HashMap per a Cerca Ràpida</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0ZDo6Y29sbGVjdGlvbnM6Okhhc2hNYXA7CgpmbiBtYWluKCkgewogICAgbGV0IG11dCBzY29yZXMgPSBIYXNoTWFwOjpuZXcoKTsKICAgIHNjb3Jlcy5pbnNlcnQoIkFsaWNlIiwgNTApOwogICAgc2NvcmVzLmluc2VydCgiQm9iIiwgMzApOwoKICAgIGlmIGxldCBTb21lKHNjb3JlKSA9IHNjb3Jlcy5nZXQoIkFsaWNlIikgewogICAgICAgIHByaW50bG4hKCJBbGljZSdzIHNjb3JlOiB7fSIsIHNjb3JlKTsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use std::collections::HashMap;

fn main() {
    let mut scores = HashMap::new();
    scores.insert(&quot;Alice&quot;, 50);
    scores.insert(&quot;Bob&quot;, 30);

    if let Some(score) = scores.get(&quot;Alice&quot;) {
        println!(&quot;Alice's score: {}&quot;, score);
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: <code>HashMap</code> proporciona una complexitat temporal mitjana de O(1) per a cerques, fent-lo eficient per a escenaris que requereixen accés ràpid.</li>
</ul>
</div><h1>Resum</h1>
<div class='content'><p>L'optimització del rendiment en Rust implica una combinació de perfilat, gestió eficient de la memòria, aprofitament de la concurrència i l'elecció dels algorismes i estructures de dades adequats. Entenent i aplicant aquests principis, pots escriure programes en Rust que siguin segurs i ràpids.</p>
<ul>
<li><strong>Perfilat i Benchmarking</strong>: Identifica colls d'ampolla abans d'optimitzar.</li>
<li><strong>Gestió de Memòria</strong>: Utilitza el model de propietat de Rust per gestionar la memòria de manera eficient.</li>
<li><strong>Concurrència i Paral·lelisme</strong>: Utilitza el model de concurrència de Rust i biblioteques com Rayon.</li>
<li><strong>Algorismes i Estructures de Dades</strong>: Escull les eines adequades per a la tasca per assegurar un rendiment òptim.</li>
</ul>
<p>Seguint aquestes directrius, pots aprofitar tot el potencial de Rust per crear aplicacions d'alt rendiment.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='common-design-patterns'>&#x25C4;Patrons de Disseny Comuns</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Optimització del Rendiment en Rust</a>
	</div>
	<div class='col-4 text-end'>
					<a href='contributing-to-open-source'>Contribuir a Codi Obert &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
