<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducció a la Programació Asíncrona en Rust</title>

    <link rel="alternate" href="https://campusempresa.com/es/rust/introduction-to-async-programming" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/rust/introduction-to-async-programming" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/rust/introduction-to-async-programming" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/rust/introduction-to-async-programming" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='shared-state'>&#x25C4;Estat Compartit</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Introducció a la Programació Asíncrona en Rust</a>
	</div>
	<div class='col-4 text-end'>
					<a href='futures-and-async-await'>Futures i Async/Await &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Visió General</h1>
<div class='content'><p>La programació asíncrona permet a un programa realitzar tasques de manera concurrent, millorant l'eficiència i la capacitat de resposta. El model de programació asíncrona de Rust es basa en les paraules clau <code>async</code> i <code>await</code>, proporcionant una manera d'escriure codi asíncron que és tant eficient com fàcil d'entendre.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Concurrència vs. Paral·lelisme</strong>: La concurrència implica múltiples tasques fent progressos, mentre que el paral·lelisme implica múltiples tasques executant-se al mateix temps.</li>
<li><strong>Futures</strong>: Un future és un valor que representa una computació que potser encara no ha finalitzat.</li>
<li><strong>Async/Await</strong>: Paraules clau utilitzades per definir i treballar amb funcions asíncrones.</li>
<li><strong>Executors</strong>: Components que executen tasques asíncrones fins a la seva finalització.</li>
</ul>
</div><h1>Futures</h1>
<div class='content'><p>En Rust, un future és una abstracció per a un valor que potser encara no està disponible. Els futures són centrals en el model de programació asíncrona de Rust.</p>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0ZDo6ZnV0dXJlOjpGdXR1cmU7CgpmbiBteV9mdXR1cmUoKSAtPiBpbXBsIEZ1dHVyZTxPdXRwdXQgPSB1MzI+IHsKICAgIGFzeW5jIHsKICAgICAgICA0MgogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use std::future::Future;

fn my_future() -&gt; impl Future&lt;Output = u32&gt; {
    async {
        42
    }
}</pre></div><div class='content'><p>En aquest exemple, <code>my_future</code> és una funció asíncrona que retorna un future. El future eventualment es resoldrà amb el valor <code>42</code>.</p>
</div><h1>Async i Await</h1>
<div class='content'><p>La paraula clau <code>async</code> s'utilitza per definir una funció asíncrona, i la paraula clau <code>await</code> s'utilitza per esperar que un future es completi.</p>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZm4gZmV0Y2hfZGF0YSgpIC0+IHUzMiB7CiAgICA0Mgp9Cgphc3luYyBmbiBwcm9jZXNzX2RhdGEoKSB7CiAgICBsZXQgZGF0YSA9IGZldGNoX2RhdGEoKS5hd2FpdDsKICAgIHByaW50bG4hKCJEYXRhOiB7fSIsIGRhdGEpOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async fn fetch_data() -&gt; u32 {
    42
}

async fn process_data() {
    let data = fetch_data().await;
    println!(&quot;Data: {}&quot;, data);
}</pre></div><div class='content'><p>Aquí, <code>fetch_data</code> és una funció asíncrona que retorna un future. En <code>process_data</code>, la paraula clau <code>await</code> s'utilitza per esperar que <code>fetch_data</code> es completi abans d'imprimir el resultat.</p>
</div><h1>Executors</h1>
<div class='content'><p>Els executors són responsables d'executar tasques asíncrones. L'executor més utilitzat en Rust és <code>tokio</code>.</p>
</div><h2>Exemple amb Tokio</h2>
<div class='content'><p>Primer, afegeix <code>tokio</code> al teu <code>Cargo.toml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("W2RlcGVuZGVuY2llc10KdG9raW8gPSB7IHZlcnNpb24gPSAiMSIsIGZlYXR1cmVzID0gWyJmdWxsIl0gfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>[dependencies]
tokio = { version = &quot;1&quot;, features = [&quot;full&quot;] }</pre></div><div class='content'><p>Després, utilitza <code>tokio</code> per executar les teves funcions asíncrones:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHRva2lvOjpydW50aW1lOjpSdW50aW1lOwoKYXN5bmMgZm4gZmV0Y2hfZGF0YSgpIC0+IHUzMiB7CiAgICA0Mgp9CgpmbiBtYWluKCkgewogICAgbGV0IHJ0ID0gUnVudGltZTo6bmV3KCkudW53cmFwKCk7CiAgICBydC5ibG9ja19vbihhc3luYyB7CiAgICAgICAgbGV0IGRhdGEgPSBmZXRjaF9kYXRhKCkuYXdhaXQ7CiAgICAgICAgcHJpbnRsbiEoIkRhdGE6IHt9IiwgZGF0YSk7CiAgICB9KTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use tokio::runtime::Runtime;

async fn fetch_data() -&gt; u32 {
    42
}

fn main() {
    let rt = Runtime::new().unwrap();
    rt.block_on(async {
        let data = fetch_data().await;
        println!(&quot;Data: {}&quot;, data);
    });
}</pre></div><div class='content'><p>En aquest exemple, es crea un runtime de Tokio, i el mètode <code>block_on</code> s'utilitza per executar el codi asíncron.</p>
</div><h1>Comparació de Codi Síncron i Asíncron</h1>
<div class='content'><p>| Codi Síncron | Codi Asíncron |
|--------------|---------------|
| Bloqueja el fil fins que l'operació es completa. | Permet que altres tasques s'executin mentre s'espera que l'operació es completi. |
| Més fàcil d'escriure i entendre per a tasques simples. | Més eficient per a operacions d'entrada/sortida i d'alta latència. |</p>
</div><h2>Exemple Síncron</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zm4gZmV0Y2hfZGF0YSgpIC0+IHUzMiB7CiAgICA0Mgp9CgpmbiBtYWluKCkgewogICAgbGV0IGRhdGEgPSBmZXRjaF9kYXRhKCk7CiAgICBwcmludGxuISgiRGF0YToge30iLCBkYXRhKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>fn fetch_data() -&gt; u32 {
    42
}

fn main() {
    let data = fetch_data();
    println!(&quot;Data: {}&quot;, data);
}</pre></div><div class='content'></div><h2>Exemple Asíncron</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZm4gZmV0Y2hfZGF0YSgpIC0+IHUzMiB7CiAgICA0Mgp9CgojW3Rva2lvOjptYWluXQphc3luYyBmbiBtYWluKCkgewogICAgbGV0IGRhdGEgPSBmZXRjaF9kYXRhKCkuYXdhaXQ7CiAgICBwcmludGxuISgiRGF0YToge30iLCBkYXRhKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async fn fetch_data() -&gt; u32 {
    42
}

#[tokio::main]
async fn main() {
    let data = fetch_data().await;
    println!(&quot;Data: {}&quot;, data);
}</pre></div><div class='content'></div><h1>Exercicis</h1>
<div class='content'><ol>
<li><strong>Funció Asíncrona Bàsica</strong>: Escriu una funció asíncrona que retorni una cadena després d'un retard utilitzant <code>tokio::time::sleep</code>.</li>
<li><strong>Enllaçar Futures</strong>: Crea dues funcions asíncrones i enllaça-les utilitzant <code>.await</code>.</li>
<li><strong>Gestió d'Errors</strong>: Modifica una funció asíncrona per retornar un <code>Result</code> i gestiona l'error en la funció que la crida.</li>
</ol>
</div><h2>Exercici 1: Funció Asíncrona Bàsica</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHRva2lvOjp0aW1lOjp7c2xlZXAsIER1cmF0aW9ufTsKCmFzeW5jIGZuIGRlbGF5ZWRfbWVzc2FnZSgpIC0+IFN0cmluZyB7CiAgICBzbGVlcChEdXJhdGlvbjo6ZnJvbV9zZWNzKDIpKS5hd2FpdDsKICAgICJIZWxsbywgd29ybGQhIi50b19zdHJpbmcoKQp9CgojW3Rva2lvOjptYWluXQphc3luYyBmbiBtYWluKCkgewogICAgbGV0IG1lc3NhZ2UgPSBkZWxheWVkX21lc3NhZ2UoKS5hd2FpdDsKICAgIHByaW50bG4hKCJ7fSIsIG1lc3NhZ2UpOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use tokio::time::{sleep, Duration};

async fn delayed_message() -&gt; String {
    sleep(Duration::from_secs(2)).await;
    &quot;Hello, world!&quot;.to_string()
}

#[tokio::main]
async fn main() {
    let message = delayed_message().await;
    println!(&quot;{}&quot;, message);
}</pre></div><div class='content'></div><h2>Exercici 2: Enllaçar Futures</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZm4gZmlyc3RfdGFzaygpIC0+IHUzMiB7CiAgICAxMAp9Cgphc3luYyBmbiBzZWNvbmRfdGFzayhpbnB1dDogdTMyKSAtPiB1MzIgewogICAgaW5wdXQgKiAyCn0KCiNbdG9raW86Om1haW5dCmFzeW5jIGZuIG1haW4oKSB7CiAgICBsZXQgcmVzdWx0ID0gZmlyc3RfdGFzaygpLmF3YWl0OwogICAgbGV0IGZpbmFsX3Jlc3VsdCA9IHNlY29uZF90YXNrKHJlc3VsdCkuYXdhaXQ7CiAgICBwcmludGxuISgiRmluYWwgcmVzdWx0OiB7fSIsIGZpbmFsX3Jlc3VsdCk7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async fn first_task() -&gt; u32 {
    10
}

async fn second_task(input: u32) -&gt; u32 {
    input * 2
}

#[tokio::main]
async fn main() {
    let result = first_task().await;
    let final_result = second_task(result).await;
    println!(&quot;Final result: {}&quot;, final_result);
}</pre></div><div class='content'></div><h2>Exercici 3: Gestió d'Errors</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0ZDo6ZXJyb3I6OkVycm9yOwoKYXN5bmMgZm4gbWlnaHRfZmFpbChzdWNjZXNzOiBib29sKSAtPiBSZXN1bHQ8dTMyLCBCb3g8ZHluIEVycm9yPj4gewogICAgaWYgc3VjY2VzcyB7CiAgICAgICAgT2soNDIpCiAgICB9IGVsc2UgewogICAgICAgIEVycigiU29tZXRoaW5nIHdlbnQgd3JvbmciLmludG8oKSkKICAgIH0KfQoKI1t0b2tpbzo6bWFpbl0KYXN5bmMgZm4gbWFpbigpIHsKICAgIG1hdGNoIG1pZ2h0X2ZhaWwodHJ1ZSkuYXdhaXQgewogICAgICAgIE9rKHZhbHVlKSA9PiBwcmludGxuISgiU3VjY2Vzczoge30iLCB2YWx1ZSksCiAgICAgICAgRXJyKGUpID0+IHByaW50bG4hKCJFcnJvcjoge30iLCBlKSwKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use std::error::Error;

async fn might_fail(success: bool) -&gt; Result&lt;u32, Box&lt;dyn Error&gt;&gt; {
    if success {
        Ok(42)
    } else {
        Err(&quot;Something went wrong&quot;.into())
    }
}

#[tokio::main]
async fn main() {
    match might_fail(true).await {
        Ok(value) =&gt; println!(&quot;Success: {}&quot;, value),
        Err(e) =&gt; println!(&quot;Error: {}&quot;, e),
    }
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>La programació asíncrona en Rust permet aplicacions eficients i responsives, especialment quan es tracta de tasques d'entrada/sortida. Entenent i utilitzant futures, async/await, i executors, pots escriure codi en Rust potent i eficient. Practica amb els exercicis proporcionats per solidificar la teva comprensió i convertir-te en un expert en el model de programació asíncrona de Rust.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='shared-state'>&#x25C4;Estat Compartit</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Introducció a la Programació Asíncrona en Rust</a>
	</div>
	<div class='col-4 text-end'>
					<a href='futures-and-async-await'>Futures i Async/Await &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
