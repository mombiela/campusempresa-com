<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microserveis i Cloud amb F#</title>

    <link rel="alternate" href="https://campusempresa.com/es/fsharp/microservices-and-cloud" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/fsharp/microservices-and-cloud" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/fsharp/microservices-and-cloud" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/fsharp/microservices-and-cloud" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='mobile-development'>&#x25C4;Desenvolupament Mòbil</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Microserveis i Cloud amb F#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='code-organization'>Organització del Codi i Mòduls &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció als Microserveis</h1>
<div class='content'><p>L'arquitectura de microserveis és un patró de disseny on una aplicació de programari està composta per serveis petits i independents que es comuniquen a través d'APIs ben definides. Cada servei està enfocat en una funció empresarial específica i es pot desenvolupar, desplegar i escalar de manera independent.</p>
<ul>
<li><strong>Conceptes Clau:</strong>
<ul>
<li><strong>Independència del Servei:</strong> Cada microservei opera de manera independent.</li>
<li><strong>Comunicació per API:</strong> Els serveis es comuniquen mitjançant APIs, sovint utilitzant HTTP/REST o cues de missatges.</li>
<li><strong>Escalabilitat:</strong> Cada servei es pot escalar de manera independent segons la demanda.</li>
<li><strong>Resiliència:</strong> El fracàs en un servei no afecta necessàriament els altres.</li>
</ul>
</li>
</ul>
</div><h1>Introducció al Cloud Computing</h1>
<div class='content'><p>El cloud computing proporciona lliurament sota demanda de recursos informàtics a través d'internet. Permet una gestió de recursos escalable i flexible, ideal per als microserveis.</p>
<ul>
<li><strong>Conceptes Clau:</strong>
<ul>
<li><strong>Infraestructura com a Servei (IaaS):</strong> Proporciona recursos informàtics virtualitzats a través d'internet.</li>
<li><strong>Plataforma com a Servei (PaaS):</strong> Proporciona una plataforma que permet als clients desenvolupar, executar i gestionar aplicacions.</li>
<li><strong>Programari com a Servei (SaaS):</strong> Lliura aplicacions de programari a través d'internet, amb una subscripció.</li>
</ul>
</li>
</ul>
</div><h1>Configuració del Teu Entorn</h1>
<div class='content'><p>Abans de submergir-te en els microserveis amb F#, assegura't de tenir les eines necessàries instal·lades.</p>
<ul>
<li><strong>Eines Necessàries:</strong>
<ul>
<li><strong>.NET SDK:</strong> El kit de desenvolupament de programari per construir aplicacions.</li>
<li><strong>Compilador F#:</strong> Part del .NET SDK.</li>
<li><strong>Docker:</strong> Per conteniritzar els microserveis.</li>
<li><strong>Kubernetes:</strong> Per orquestrar contenidors (opcional però recomanat per a usuaris avançats).</li>
</ul>
</li>
</ul>
</div><h2>Passos d'Instal·lació</h2>
<div class='content'><ol>
<li>
<p><strong>Instal·lar .NET SDK:</strong></p>
<pre><code class="language-bash">wget https://dotnet.microsoft.com/download/dotnet-core/scripts/v1/dotnet-install.sh
chmod +x dotnet-install.sh
./dotnet-install.sh
</code></pre>
</li>
<li>
<p><strong>Instal·lar Docker:</strong>
Segueix les instruccions al <a href="https://docs.docker.com/get-docker/">lloc web de Docker</a>.</p>
</li>
<li>
<p><strong>Instal·lar Kubernetes (Opcional):</strong>
Segueix les instruccions al <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">lloc web de Kubernetes</a>.</p>
</li>
</ol>
</div><h1>Construint un Microservei Simple en F#</h1>
<div class='content'><p>Comencem construint un microservei simple en F# que realitza operacions bàsiques CRUD.</p>
</div><h2>Pas 1: Crear un Nou Projecte F#</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG90bmV0IG5ldyBjb25zb2xlIC1sYW5nIEYjIC1vIFNpbXBsZU1pY3Jvc2VydmljZQpjZCBTaW1wbGVNaWNyb3NlcnZpY2U="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dotnet new console -lang F# -o SimpleMicroservice
cd SimpleMicroservice</pre></div><div class='content'></div><h2>Pas 2: Definir un Model de Dades Simple</h2>
<div class='content'><p>Crea un fitxer anomenat <code>Models.fs</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlIE1vZGVscwoKdHlwZSBJdGVtID0gewogICAgSWQ6IGludAogICAgTmFtZTogc3RyaW5nCiAgICBEZXNjcmlwdGlvbjogc3RyaW5nCn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module Models

type Item = {
    Id: int
    Name: string
    Description: string
}</pre></div><div class='content'></div><h2>Pas 3: Implementar Operacions CRUD</h2>
<div class='content'><p>Crea un fitxer anomenat <code>Service.fs</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlIFNlcnZpY2UKCm9wZW4gTW9kZWxzCgpsZXQgbXV0YWJsZSBpdGVtcyA9IFtdCgpsZXQgYWRkSXRlbSBpdGVtID0KICAgIGl0ZW1zIDwtIGl0ZW0gOjogaXRlbXMKCmxldCBnZXRJdGVtIGlkID0KICAgIGl0ZW1zIHw+IExpc3QudHJ5RmluZCAoZnVuIGl0ZW0gLT4gaXRlbS5JZCA9IGlkKQoKbGV0IHVwZGF0ZUl0ZW0gdXBkYXRlZEl0ZW0gPQogICAgaXRlbXMgPC0gaXRlbXMgfD4gTGlzdC5tYXAgKGZ1biBpdGVtIC0+IGlmIGl0ZW0uSWQgPSB1cGRhdGVkSXRlbS5JZCBsbGF2b3JzIHVwZGF0ZWRJdGVtIHNpbsOzIGl0ZW0pCgpsZXQgZGVsZXRlSXRlbSBpZCA9CiAgICBpdGVtcyA8LSBpdGVtcyB8PiBMaXN0LmZpbHRlciAoZnVuIGl0ZW0gLT4gaXRlbS5JZCA8PiBpZCk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module Service

open Models

let mutable items = []

let addItem item =
    items &lt;- item :: items

let getItem id =
    items |&gt; List.tryFind (fun item -&gt; item.Id = id)

let updateItem updatedItem =
    items &lt;- items |&gt; List.map (fun item -&gt; if item.Id = updatedItem.Id llavors updatedItem sin&oacute; item)

let deleteItem id =
    items &lt;- items |&gt; List.filter (fun item -&gt; item.Id &lt;&gt; id)</pre></div><div class='content'></div><h2>Pas 4: Crear una API REST</h2>
<div class='content'><p>Crea un fitxer anomenat <code>Program.fs</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3BlbiBTeXN0ZW0Kb3BlbiBHaXJhZmZlCm9wZW4gTWljcm9zb2Z0LkFzcE5ldENvcmUuQnVpbGRlcgpvcGVuIE1pY3Jvc29mdC5Bc3BOZXRDb3JlLkhvc3RpbmcKb3BlbiBNaWNyb3NvZnQuRXh0ZW5zaW9ucy5EZXBlbmRlbmN5SW5qZWN0aW9uCm9wZW4gTWljcm9zb2Z0LkV4dGVuc2lvbnMuSG9zdGluZwpvcGVuIFNlcnZpY2UKb3BlbiBNb2RlbHMKCmxldCB3ZWJBcHAgPQogICAgY2hvb3NlIFsKICAgICAgICBHRVQgPj0+IHJvdXRlICIvaXRlbXMiID49PiBqc29uIGl0ZW1zCiAgICAgICAgR0VUID49PiByb3V0ZWYgIi9pdGVtcy8laSIgKGZ1biBpZCAtPiBqc29uIChnZXRJdGVtIGlkKSkKICAgICAgICBQT1NUID49PiByb3V0ZSAiL2l0ZW1zIiA+PT4gYmluZEpzb248SXRlbT4gKGZ1biBpdGVtIC0+IGFkZEl0ZW0gaXRlbTsganNvbiBpdGVtKQogICAgICAgIFBVVCA+PT4gcm91dGVmICIvaXRlbXMvJWkiIChmdW4gaWQgLT4gYmluZEpzb248SXRlbT4gKGZ1biBpdGVtIC0+IHVwZGF0ZUl0ZW0geyBpdGVtIHdpdGggSWQgPSBpZCB9OyBqc29uIGl0ZW0pKQogICAgICAgIERFTEVURSA+PT4gcm91dGVmICIvaXRlbXMvJWkiIChmdW4gaWQgLT4gZGVsZXRlSXRlbSBpZDsganNvbiBpZCkKICAgIF0KCmxldCBjb25maWd1cmVBcHAgKGFwcDogSUFwcGxpY2F0aW9uQnVpbGRlcikgPQogICAgYXBwLlVzZUdpcmFmZmUgd2ViQXBwCgpsZXQgY29uZmlndXJlU2VydmljZXMgKHNlcnZpY2VzOiBJU2VydmljZUNvbGxlY3Rpb24pID0KICAgIHNlcnZpY2VzLkFkZEdpcmFmZmUoKSB8PiBpZ25vcmUKCls8RW50cnlQb2ludD5dCmxldCBtYWluIF8gPQogICAgSG9zdC5DcmVhdGVEZWZhdWx0QnVpbGRlcigpCiAgICAgICAgLkNvbmZpZ3VyZVdlYkhvc3REZWZhdWx0cyhmdW4gd2ViSG9zdEJ1aWxkZXIgLT4KICAgICAgICAgICAgd2ViSG9zdEJ1aWxkZXIKICAgICAgICAgICAgICAgIC5Db25maWd1cmUoY29uZmlndXJlQXBwKQogICAgICAgICAgICAgICAgLkNvbmZpZ3VyZVNlcnZpY2VzKGNvbmZpZ3VyZVNlcnZpY2VzKQogICAgICAgICAgICAgICAgLlVzZVVybHMoImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMCIpCiAgICAgICAgICAgICAgICB8PiBpZ25vcmUpCiAgICAgICAgLkJ1aWxkKCkKICAgICAgICAuUnVuKCkKICAgIDA="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>open System
open Giraffe
open Microsoft.AspNetCore.Builder
open Microsoft.AspNetCore.Hosting
open Microsoft.Extensions.DependencyInjection
open Microsoft.Extensions.Hosting
open Service
open Models

let webApp =
    choose [
        GET &gt;=&gt; route &quot;/items&quot; &gt;=&gt; json items
        GET &gt;=&gt; routef &quot;/items/%i&quot; (fun id -&gt; json (getItem id))
        POST &gt;=&gt; route &quot;/items&quot; &gt;=&gt; bindJson&lt;Item&gt; (fun item -&gt; addItem item; json item)
        PUT &gt;=&gt; routef &quot;/items/%i&quot; (fun id -&gt; bindJson&lt;Item&gt; (fun item -&gt; updateItem { item with Id = id }; json item))
        DELETE &gt;=&gt; routef &quot;/items/%i&quot; (fun id -&gt; deleteItem id; json id)
    ]

let configureApp (app: IApplicationBuilder) =
    app.UseGiraffe webApp

let configureServices (services: IServiceCollection) =
    services.AddGiraffe() |&gt; ignore

[&lt;EntryPoint&gt;]
let main _ =
    Host.CreateDefaultBuilder()
        .ConfigureWebHostDefaults(fun webHostBuilder -&gt;
            webHostBuilder
                .Configure(configureApp)
                .ConfigureServices(configureServices)
                .UseUrls(&quot;http://localhost:5000&quot;)
                |&gt; ignore)
        .Build()
        .Run()
    0</pre></div><div class='content'></div><h2>Pas 5: Executar el Microservei</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG90bmV0IHJ1bg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dotnet run</pre></div><div class='content'></div><h1>Desplegant al Cloud</h1>
<div class='content'><p>Desplegar microserveis al cloud implica conteniritzar l'aplicació i utilitzar serveis de cloud per gestionar-la i escalar-la.</p>
</div><h2>Pas 1: Crear un Dockerfile</h2>
<div class='content'><p>Crea un fitxer anomenat <code>Dockerfile</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RlJPTSBtY3IubWljcm9zb2Z0LmNvbS9kb3RuZXQvc2RrOjUuMCBBUyBidWlsZApXT1JLRElSIC9hcHAKQ09QWSAuIC4KUlVOIGRvdG5ldCBwdWJsaXNoIC1jIFJlbGVhc2UgLW8gb3V0CgpGUk9NIG1jci5taWNyb3NvZnQuY29tL2RvdG5ldC9hc3BuZXQ6NS4wCldPUktESVIgL2FwcApDT1BZIC0tZnJvbT1idWlsZCAvYXBwL291dCAuCkVOVFJZUE9JTlQgWyJkb3RuZXQiLCAiU2ltcGxlTWljcm9zZXJ2aWNlLmRsbCJd"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>FROM mcr.microsoft.com/dotnet/sdk:5.0 AS build
WORKDIR /app
COPY . .
RUN dotnet publish -c Release -o out

FROM mcr.microsoft.com/dotnet/aspnet:5.0
WORKDIR /app
COPY --from=build /app/out .
ENTRYPOINT [&quot;dotnet&quot;, &quot;SimpleMicroservice.dll&quot;]</pre></div><div class='content'></div><h2>Pas 2: Construir i Executar la Imatge Docker</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIGJ1aWxkIC10IHNpbXBsZW1pY3Jvc2VydmljZSAuCmRvY2tlciBydW4gLWQgLXAgNTAwMDo4MCBzaW1wbGVtaWNyb3NlcnZpY2U="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker build -t simplemicroservice .
docker run -d -p 5000:80 simplemicroservice</pre></div><div class='content'></div><h2>Pas 3: Desplegar a un Proveïdor de Cloud</h2>
<div class='content'><ul>
<li><strong>Azure:</strong> Utilitza Azure Container Instances o Azure Kubernetes Service.</li>
<li><strong>AWS:</strong> Utilitza Amazon ECS o Amazon EKS.</li>
<li><strong>Google Cloud:</strong> Utilitza Google Kubernetes Engine.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>En aquest tema, hem cobert els conceptes bàsics dels microserveis i el cloud computing, hem configurat un entorn per al desenvolupament amb F#, hem construït un microservei simple i l'hem conteniritzat per al seu desplegament al cloud. Aquesta base et permet explorar temes més avançats com el descobriment de serveis, l'equilibri de càrrega i el monitoratge en una arquitectura de microserveis.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='mobile-development'>&#x25C4;Desenvolupament Mòbil</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Microserveis i Cloud amb F#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='code-organization'>Organització del Codi i Mòduls &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
