<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geo-Search a Elasticsearch</title>

    <link rel="alternate" href="https://campusempresa.com/es/elasticsearch/geo-search" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/elasticsearch/geo-search" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/elasticsearch/geo-search" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/elasticsearch/geo-search" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>Geo-Search a Elasticsearch et permet realitzar consultes basades en dades geogràfiques. Això és particularment útil per a aplicacions que necessiten filtrar o ordenar dades per ubicació, com ara trobar restaurants, botigues o qualsevol altre servei basat en la ubicació.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Camp Geo-Point</strong>: Un tipus de camp a Elasticsearch utilitzat per emmagatzemar punts geogràfics (latitud i longitud).</li>
<li><strong>Camp Geo-Shape</strong>: Un tipus de camp utilitzat per emmagatzemar formes complexes com polígons, línies i cercles.</li>
<li><strong>Geo-Consultes</strong>: Consultes que et permeten filtrar o ordenar dades basades en criteris geogràfics.</li>
</ul>
</div><h1>Configuració de Camps Geo-Point</h1>
<div class='content'><p>Per realitzar geo-search, necessites definir un camp geo-point en el teu mapping d'índex.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIC9teV9pbmRleAp7CiAgIm1hcHBpbmdzIjogewogICAgInByb3BlcnRpZXMiOiB7CiAgICAgICJsb2NhdGlvbiI6IHsKICAgICAgICAidHlwZSI6ICJnZW9fcG9pbnQiCiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT /my_index
{
  &quot;mappings&quot;: {
    &quot;properties&quot;: {
      &quot;location&quot;: {
        &quot;type&quot;: &quot;geo_point&quot;
      }
    }
  }
}</pre></div><div class='content'></div><h1>Indexació de Documents amb Geo-Points</h1>
<div class='content'><p>Quan indexis documents, pots incloure dades geo-point en forma de latitud i longitud.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvbXlfaW5kZXgvX2RvYy8xCnsKICAibmFtZSI6ICJDZW50cmFsIFBhcmsiLAogICJsb2NhdGlvbiI6IHsKICAgICJsYXQiOiA0MC43ODUwOTEsCiAgICAibG9uIjogLTczLjk2ODI4NQogIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /my_index/_doc/1
{
  &quot;name&quot;: &quot;Central Park&quot;,
  &quot;location&quot;: {
    &quot;lat&quot;: 40.785091,
    &quot;lon&quot;: -73.968285
  }
}</pre></div><div class='content'></div><h1>Geo-Consultes Bàsiques</h1>
<div class='content'></div><h2>Consulta de Geo-Distància</h2>
<div class='content'><p>Troba documents dins d'una certa distància des d'un punt específic.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9teV9pbmRleC9fc2VhcmNoCnsKICAicXVlcnkiOiB7CiAgICAiZ2VvX2Rpc3RhbmNlIjogewogICAgICAiZGlzdGFuY2UiOiAiMTBrbSIsCiAgICAgICJsb2NhdGlvbiI6IHsKICAgICAgICAibGF0IjogNDAuNzg1MDkxLAogICAgICAgICJsb24iOiAtNzMuOTY4Mjg1CiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /my_index/_search
{
  &quot;query&quot;: {
    &quot;geo_distance&quot;: {
      &quot;distance&quot;: &quot;10km&quot;,
      &quot;location&quot;: {
        &quot;lat&quot;: 40.785091,
        &quot;lon&quot;: -73.968285
      }
    }
  }
}</pre></div><div class='content'></div><h2>Consulta de Geo-Bounding Box</h2>
<div class='content'><p>Troba documents dins d'una àrea rectangular especificada.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9teV9pbmRleC9fc2VhcmNoCnsKICAicXVlcnkiOiB7CiAgICAiZ2VvX2JvdW5kaW5nX2JveCI6IHsKICAgICAgImxvY2F0aW9uIjogewogICAgICAgICJ0b3BfbGVmdCI6IHsKICAgICAgICAgICJsYXQiOiA0MC45MTUyNTUsCiAgICAgICAgICAibG9uIjogLTc0LjI1OTA5CiAgICAgICAgfSwKICAgICAgICAiYm90dG9tX3JpZ2h0IjogewogICAgICAgICAgImxhdCI6IDQwLjQ5NjA0NCwKICAgICAgICAgICJsb24iOiAtNzMuNzAwMjcyCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /my_index/_search
{
  &quot;query&quot;: {
    &quot;geo_bounding_box&quot;: {
      &quot;location&quot;: {
        &quot;top_left&quot;: {
          &quot;lat&quot;: 40.915255,
          &quot;lon&quot;: -74.25909
        },
        &quot;bottom_right&quot;: {
          &quot;lat&quot;: 40.496044,
          &quot;lon&quot;: -73.700272
        }
      }
    }
  }
}</pre></div><div class='content'></div><h2>Consulta de Geo-Polígon</h2>
<div class='content'><p>Troba documents dins d'un polígon especificat.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9teV9pbmRleC9fc2VhcmNoCnsKICAicXVlcnkiOiB7CiAgICAiZ2VvX3BvbHlnb24iOiB7CiAgICAgICJsb2NhdGlvbiI6IHsKICAgICAgICAicG9pbnRzIjogWwogICAgICAgICAgeyJsYXQiOiA0MC45MTUyNTUsICJsb24iOiAtNzQuMjU5MDl9LAogICAgICAgICAgeyJsYXQiOiA0MC40OTYwNDQsICJsb24iOiAtNzQuMjU5MDl9LAogICAgICAgICAgeyJsYXQiOiA0MC40OTYwNDQsICJsb24iOiAtNzMuNzAwMjcyfSwKICAgICAgICAgIHsibGF0IjogNDAuOTE1MjU1LCAibG9uIjogLTczLjcwMDI3Mn0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /my_index/_search
{
  &quot;query&quot;: {
    &quot;geo_polygon&quot;: {
      &quot;location&quot;: {
        &quot;points&quot;: [
          {&quot;lat&quot;: 40.915255, &quot;lon&quot;: -74.25909},
          {&quot;lat&quot;: 40.496044, &quot;lon&quot;: -74.25909},
          {&quot;lat&quot;: 40.496044, &quot;lon&quot;: -73.700272},
          {&quot;lat&quot;: 40.915255, &quot;lon&quot;: -73.700272}
        ]
      }
    }
  }
}</pre></div><div class='content'></div><h1>Tècniques Avançades de Geo-Search</h1>
<div class='content'></div><h2>Ordenació per Distància</h2>
<div class='content'><p>Ordena els resultats de la cerca per la seva distància des d'un punt específic.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9teV9pbmRleC9fc2VhcmNoCnsKICAic29ydCI6IFsKICAgIHsKICAgICAgIl9nZW9fZGlzdGFuY2UiOiB7CiAgICAgICAgImxvY2F0aW9uIjogewogICAgICAgICAgImxhdCI6IDQwLjc4NTA5MSwKICAgICAgICAgICJsb24iOiAtNzMuOTY4Mjg1CiAgICAgICAgfSwKICAgICAgICAib3JkZXIiOiAiYXNjIiwKICAgICAgICAidW5pdCI6ICJrbSIKICAgICAgfQogICAgfQogIF0sCiAgInF1ZXJ5IjogewogICAgIm1hdGNoX2FsbCI6IHt9CiAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /my_index/_search
{
  &quot;sort&quot;: [
    {
      &quot;_geo_distance&quot;: {
        &quot;location&quot;: {
          &quot;lat&quot;: 40.785091,
          &quot;lon&quot;: -73.968285
        },
        &quot;order&quot;: &quot;asc&quot;,
        &quot;unit&quot;: &quot;km&quot;
      }
    }
  ],
  &quot;query&quot;: {
    &quot;match_all&quot;: {}
  }
}</pre></div><div class='content'></div><h2>Consultes de Geo-Shape</h2>
<div class='content'><p>Per a consultes geogràfiques més complexes, pots utilitzar camps i consultes geo-shape.</p>
<h4>Definició d'un Camp Geo-Shape</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIC9teV9pbmRleAp7CiAgIm1hcHBpbmdzIjogewogICAgInByb3BlcnRpZXMiOiB7CiAgICAgICJsb2NhdGlvbiI6IHsKICAgICAgICAidHlwZSI6ICJnZW9fc2hhcGUiCiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT /my_index
{
  &quot;mappings&quot;: {
    &quot;properties&quot;: {
      &quot;location&quot;: {
        &quot;type&quot;: &quot;geo_shape&quot;
      }
    }
  }
}</pre></div><div class='content'><h4>Indexació de Documents amb Geo-Shapes</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvbXlfaW5kZXgvX2RvYy8xCnsKICAibmFtZSI6ICJDZW50cmFsIFBhcmsiLAogICJsb2NhdGlvbiI6IHsKICAgICJ0eXBlIjogInBvbHlnb24iLAogICAgImNvb3JkaW5hdGVzIjogWwogICAgICBbCiAgICAgICAgWy03My45ODEsIDQwLjc2OF0sCiAgICAgICAgWy03My45NTgsIDQwLjc2OF0sCiAgICAgICAgWy03My45NTgsIDQwLjc4NV0sCiAgICAgICAgWy03My45ODEsIDQwLjc4NV0sCiAgICAgICAgWy03My45ODEsIDQwLjc2OF0KICAgICAgXQogICAgXQogIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /my_index/_doc/1
{
  &quot;name&quot;: &quot;Central Park&quot;,
  &quot;location&quot;: {
    &quot;type&quot;: &quot;polygon&quot;,
    &quot;coordinates&quot;: [
      [
        [-73.981, 40.768],
        [-73.958, 40.768],
        [-73.958, 40.785],
        [-73.981, 40.785],
        [-73.981, 40.768]
      ]
    ]
  }
}</pre></div><div class='content'><h4>Consulta de Geo-Shape</h4>
<p>Troba documents que intersecten amb una forma donada.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9teV9pbmRleC9fc2VhcmNoCnsKICAicXVlcnkiOiB7CiAgICAiZ2VvX3NoYXBlIjogewogICAgICAibG9jYXRpb24iOiB7CiAgICAgICAgInNoYXBlIjogewogICAgICAgICAgInR5cGUiOiAicG9seWdvbiIsCiAgICAgICAgICAiY29vcmRpbmF0ZXMiOiBbCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICBbLTczLjk4MSwgNDAuNzY4XSwKICAgICAgICAgICAgICBbLTczLjk1OCwgNDAuNzY4XSwKICAgICAgICAgICAgICBbLTczLjk1OCwgNDAuNzg1XSwKICAgICAgICAgICAgICBbLTczLjk4MSwgNDAuNzg1XSwKICAgICAgICAgICAgICBbLTczLjk4MSwgNDAuNzY4XQogICAgICAgICAgICBdCiAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgICAicmVsYXRpb24iOiAiaW50ZXJzZWN0cyIKICAgICAgfQogICAgfQogIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /my_index/_search
{
  &quot;query&quot;: {
    &quot;geo_shape&quot;: {
      &quot;location&quot;: {
        &quot;shape&quot;: {
          &quot;type&quot;: &quot;polygon&quot;,
          &quot;coordinates&quot;: [
            [
              [-73.981, 40.768],
              [-73.958, 40.768],
              [-73.958, 40.785],
              [-73.981, 40.785],
              [-73.981, 40.768]
            ]
          ]
        },
        &quot;relation&quot;: &quot;intersects&quot;
      }
    }
  }
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Geo-Search a Elasticsearch és una característica potent que et permet realitzar consultes geogràfiques complexes. Entenent com definir camps geo-point i geo-shape, i com utilitzar diverses geo-consultes, pots construir funcionalitats de cerca basades en la ubicació robustes en les teves aplicacions. Tant si estàs filtrant resultats dins d'una certa distància, una caixa delimitadora o un polígon, Elasticsearch proporciona les eines que necessites per gestionar dades geogràfiques de manera eficient.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
