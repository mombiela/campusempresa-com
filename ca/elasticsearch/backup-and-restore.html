<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://campusempresa.com/elasticsearch/backup-and-restore" id="lnk_lang_es" data-lang="es">Castellano</a></b>
				|
				<b id="lit_lang_ca">Catala</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>La còpia de seguretat i la restauració són operacions crítiques per mantenir la integritat i la disponibilitat de les dades a Elasticsearch. Aquesta secció cobrirà els conceptes fonamentals, eines i tècniques per realitzar còpies de seguretat i restauracions a Elasticsearch, des de nivells bàsics fins a avançats.</p>
</div><h1>Conceptes clau</h1>
<div class='content'><ul>
<li><strong>Instantània</strong>: Una instantània és una còpia de seguretat d'un índex o d'un clúster a Elasticsearch. Captura l'estat de les dades en un moment específic.</li>
<li><strong>Repositori</strong>: Un repositori és una ubicació d'emmagatzematge on es guarden les instantànies. Pot ser un sistema de fitxers compartit, Amazon S3, HDFS, etc.</li>
<li><strong>Restauració</strong>: El procés de recuperació de dades d'una instantània.</li>
</ul>
</div><h1>Configuració d'un repositori</h1>
<div class='content'><p>Abans de fer una instantània, cal configurar un repositori on es guardaran les instantànies.</p>
</div><h2>Exemple: Registrar un repositori de sistema de fitxers</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIC9fc25hcHNob3QvbXlfYmFja3VwCnsKICAidHlwZSI6ICJmcyIsCiAgInNldHRpbmdzIjogewogICAgImxvY2F0aW9uIjogIi9tb3VudC9iYWNrdXBzL215X2JhY2t1cCIKICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT /_snapshot/my_backup
{
  &quot;type&quot;: &quot;fs&quot;,
  &quot;settings&quot;: {
    &quot;location&quot;: &quot;/mount/backups/my_backup&quot;
  }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>PUT /_snapshot/my_backup</code>: Crea un nou repositori d'instantànies anomenat <code>my_backup</code>.</li>
<li><code>&quot;type&quot;: &quot;fs&quot;</code>: Especifica que el tipus de repositori és un sistema de fitxers.</li>
<li><code>&quot;location&quot;: &quot;/mount/backups/my_backup&quot;</code>: El camí on es guardaran les instantànies.</li>
</ul>
</li>
</ul>
</div><h1>Creació d'una instantània</h1>
<div class='content'><p>Un cop configurat el repositori, podeu crear una instantània dels vostres índexs.</p>
</div><h2>Exemple: Creació d'una instantània</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIC9fc25hcHNob3QvbXlfYmFja3VwL3NuYXBzaG90XzEKewogICJpbmRpY2VzIjogImluZGV4XzEsaW5kZXhfMiIsCiAgImlnbm9yZV91bmF2YWlsYWJsZSI6IHRydWUsCiAgImluY2x1ZGVfZ2xvYmFsX3N0YXRlIjogZmFsc2UKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT /_snapshot/my_backup/snapshot_1
{
  &quot;indices&quot;: &quot;index_1,index_2&quot;,
  &quot;ignore_unavailable&quot;: true,
  &quot;include_global_state&quot;: false
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>PUT /_snapshot/my_backup/snapshot_1</code>: Crea una instantània anomenada <code>snapshot_1</code> al repositori <code>my_backup</code>.</li>
<li><code>&quot;indices&quot;: &quot;index_1,index_2&quot;</code>: Especifica els índexs a incloure a la instantània.</li>
<li><code>&quot;ignore_unavailable&quot;: true</code>: Ignora els índexs que no estan disponibles en el moment de la instantània.</li>
<li><code>&quot;include_global_state&quot;: false</code>: Exclou l'estat del clúster de la instantània.</li>
</ul>
</li>
</ul>
</div><h1>Restauració d'una instantània</h1>
<div class='content'><p>Restaurar una instantània implica recuperar les dades d'una instantània de nou al clúster.</p>
</div><h2>Exemple: Restauració d'una instantània</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvX3NuYXBzaG90L215X2JhY2t1cC9zbmFwc2hvdF8xL19yZXN0b3JlCnsKICAiaW5kaWNlcyI6ICJpbmRleF8xIiwKICAiaWdub3JlX3VuYXZhaWxhYmxlIjogdHJ1ZSwKICAiaW5jbHVkZV9nbG9iYWxfc3RhdGUiOiBmYWxzZSwKICAicmVuYW1lX3BhdHRlcm4iOiAiaW5kZXhfKC4rKSIsCiAgInJlbmFtZV9yZXBsYWNlbWVudCI6ICJyZXN0b3JlZF9pbmRleF8kMSIKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /_snapshot/my_backup/snapshot_1/_restore
{
  &quot;indices&quot;: &quot;index_1&quot;,
  &quot;ignore_unavailable&quot;: true,
  &quot;include_global_state&quot;: false,
  &quot;rename_pattern&quot;: &quot;index_(.+)&quot;,
  &quot;rename_replacement&quot;: &quot;restored_index_$1&quot;
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>POST /_snapshot/my_backup/snapshot_1/_restore</code>: Inicia el procés de restauració per <code>snapshot_1</code> del repositori <code>my_backup</code>.</li>
<li><code>&quot;indices&quot;: &quot;index_1&quot;</code>: Especifica els índexs a restaurar.</li>
<li><code>&quot;ignore_unavailable&quot;: true</code>: Ignora els índexs que no estan disponibles a la instantània.</li>
<li><code>&quot;include_global_state&quot;: false</code>: Exclou l'estat del clúster de la restauració.</li>
<li><code>&quot;rename_pattern&quot;: &quot;index_(.+)&quot;</code>: Un patró regex per coincidir amb els noms dels índexs.</li>
<li><code>&quot;rename_replacement&quot;: &quot;restored_index_$1&quot;</code>: El patró de substitució per canviar el nom dels índexs restaurats.</li>
</ul>
</li>
</ul>
</div><h1>Temes avançats</h1>
<h2>Gestió del cicle de vida de les instantànies (SLM)</h2>
<div class='content'><p>SLM automatitza el procés de fer instantànies basades en una política definida.</p>
</div><h2>Exemple: Creació d'una política SLM</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIC9fc2xtL3BvbGljeS9kYWlseS1zbmFwc2hvdHMKewogICJzY2hlZHVsZSI6ICIwIDMwIDEgKiAqID8iLCAKICAibmFtZSI6ICI8ZGFpbHktc25hcC17bm93L2R9PiIsCiAgInJlcG9zaXRvcnkiOiAibXlfYmFja3VwIiwKICAiY29uZmlnIjogewogICAgImluZGljZXMiOiBbImluZGV4XzEiLCAiaW5kZXhfMiJdLAogICAgImlnbm9yZV91bmF2YWlsYWJsZSI6IGZhbHNlLAogICAgImluY2x1ZGVfZ2xvYmFsX3N0YXRlIjogdHJ1ZQogIH0sCiAgInJldGVudGlvbiI6IHsKICAgICJleHBpcmVfYWZ0ZXIiOiAiMzBkIiwKICAgICJtaW5fY291bnQiOiA1LAogICAgIm1heF9jb3VudCI6IDUwCiAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT /_slm/policy/daily-snapshots
{
  &quot;schedule&quot;: &quot;0 30 1 * * ?&quot;, 
  &quot;name&quot;: &quot;&lt;daily-snap-{now/d}&gt;&quot;,
  &quot;repository&quot;: &quot;my_backup&quot;,
  &quot;config&quot;: {
    &quot;indices&quot;: [&quot;index_1&quot;, &quot;index_2&quot;],
    &quot;ignore_unavailable&quot;: false,
    &quot;include_global_state&quot;: true
  },
  &quot;retention&quot;: {
    &quot;expire_after&quot;: &quot;30d&quot;,
    &quot;min_count&quot;: 5,
    &quot;max_count&quot;: 50
  }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>PUT /_slm/policy/daily-snapshots</code>: Crea una nova política SLM anomenada <code>daily-snapshots</code>.</li>
<li><code>&quot;schedule&quot;: &quot;0 30 1 * * ?&quot;</code>: Expressió cron per executar la política diàriament a la 1:30 AM.</li>
<li><code>&quot;name&quot;: &quot;&lt;daily-snap-{now/d}&gt;&quot;</code>: Patró de nom per a les instantànies.</li>
<li><code>&quot;repository&quot;: &quot;my_backup&quot;</code>: El repositori on es guardaran les instantànies.</li>
<li><code>&quot;config&quot;</code>: Configuració per a les instantànies.
<ul>
<li><code>&quot;indices&quot;: [&quot;index_1&quot;, &quot;index_2&quot;]</code>: Índexs a incloure a les instantànies.</li>
<li><code>&quot;ignore_unavailable&quot;: false</code>: No ignorar els índexs no disponibles.</li>
<li><code>&quot;include_global_state&quot;: true</code>: Incloure l'estat del clúster a les instantànies.</li>
</ul>
</li>
<li><code>&quot;retention&quot;</code>: Política de retenció per a les instantànies.
<ul>
<li><code>&quot;expire_after&quot;: &quot;30d&quot;</code>: Expirar instantànies més antigues de 30 dies.</li>
<li><code>&quot;min_count&quot;: 5</code>: Mantenir almenys 5 instantànies.</li>
<li><code>&quot;max_count&quot;: 50</code>: Mantenir com a màxim 50 instantànies.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Entendre com realitzar còpies de seguretat i restauracions a Elasticsearch és essencial per a la gestió de dades i la recuperació de desastres. Configurant repositoris, creant instantànies i restaurant dades, podeu assegurar la integritat i la disponibilitat de les vostres dades. Funcions avançades com la Gestió del cicle de vida de les instantànies (SLM) automatitzen i simplifiquen encara més aquests processos, facilitant el manteniment del vostre clúster Elasticsearch.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
