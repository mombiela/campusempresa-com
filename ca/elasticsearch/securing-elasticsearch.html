<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assegurar Elasticsearch</title>

    <link rel="alternate" href="https://campusempresa.com/es/elasticsearch/securing-elasticsearch" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/elasticsearch/securing-elasticsearch" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/elasticsearch/securing-elasticsearch" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/elasticsearch/securing-elasticsearch" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>Assegurar Elasticsearch és crucial per protegir les teves dades i assegurar que només els usuaris autoritzats tinguin accés al teu clúster. Aquest tema cobrirà diversos aspectes de l'assegurament d'Elasticsearch, des de l'autenticació bàsica fins a configuracions de seguretat avançades.</p>
</div><h1>Autenticació Bàsica</h1>
<div class='content'><p>L'autenticació bàsica és la forma més senzilla d'assegurar el teu clúster d'Elasticsearch. Implica configurar un nom d'usuari i una contrasenya per controlar l'accés.</p>
</div><h2>Configurar l'Autenticació Bàsica</h2>
<div class='content'><ol>
<li>
<p><strong>Instal·lar el Plugin X-Pack</strong>: X-Pack és un plugin que proporciona funcions de seguretat per a Elasticsearch.</p>
<pre><code class="language-sh">bin/elasticsearch-plugin install x-pack
</code></pre>
</li>
<li>
<p><strong>Configurar el Fitxer Elasticsearch.yml</strong>: Afegeix les següents línies al teu fitxer de configuració <code>elasticsearch.yml</code>.</p>
<pre><code class="language-yaml">xpack.security.enabled: true
</code></pre>
</li>
<li>
<p><strong>Iniciar Elasticsearch</strong>: Reinicia la teva instància d'Elasticsearch per aplicar els canvis.</p>
<pre><code class="language-sh">bin/elasticsearch
</code></pre>
</li>
<li>
<p><strong>Configurar Usuaris Integrats</strong>: Utilitza l'eina <code>elasticsearch-setup-passwords</code> per configurar les contrasenyes dels usuaris integrats.</p>
<pre><code class="language-sh">bin/elasticsearch-setup-passwords interactive
</code></pre>
</li>
<li>
<p><strong>Provar l'Autenticació</strong>: Utilitza <code>curl</code> per provar l'autenticació.</p>
<pre><code class="language-sh">curl -u elastic:your_password http://localhost:9200
</code></pre>
</li>
</ol>
</div><h1>Control d'Accés Basat en Rols (RBAC)</h1>
<div class='content'><p>RBAC et permet definir rols i assignar-los a usuaris, controlant quines accions poden realitzar i a quines dades poden accedir.</p>
</div><h2>Crear Rols</h2>
<div class='content'><ol>
<li>
<p><strong>Definir Rols en un Fitxer JSON</strong>: Crea un fitxer JSON per definir els rols.</p>
<pre><code class="language-json">{
  &quot;cluster&quot;: [&quot;all&quot;],
  &quot;indices&quot;: [
    {
      &quot;names&quot;: [&quot;*&quot;],
      &quot;privileges&quot;: [&quot;read&quot;, &quot;write&quot;]
    }
  ]
}
</code></pre>
</li>
<li>
<p><strong>Afegir Rols Utilitzant l'API de Rols</strong>: Utilitza l'API de Rols per afegir rols.</p>
<pre><code class="language-sh">curl -X POST &quot;localhost:9200/_security/role/my_role&quot; -H 'Content-Type: application/json' -d @role.json
</code></pre>
</li>
</ol>
</div><h2>Assignar Rols a Usuaris</h2>
<div class='content'><ol>
<li><strong>Crear un Usuari</strong>: Utilitza l'API d'Usuaris per crear un usuari i assignar-li un rol.
<pre><code class="language-sh">curl -X POST &quot;localhost:9200/_security/user/my_user&quot; -H 'Content-Type: application/json' -d '{
  &quot;password&quot; : &quot;password&quot;,
  &quot;roles&quot; : [ &quot;my_role&quot; ],
  &quot;full_name&quot; : &quot;User Name&quot;,
  &quot;email&quot; : &quot;user@example.com&quot;
}'
</code></pre>
</li>
</ol>
</div><h1>Seguretat de la Capa de Transport (TLS)</h1>
<div class='content'><p>TLS encripta la comunicació entre nodes d'Elasticsearch i entre clients i nodes, assegurant la integritat i la confidencialitat de les dades.</p>
</div><h2>Activar TLS</h2>
<div class='content'><ol>
<li>
<p><strong>Generar Certificats</strong>: Utilitza l'eina <code>elasticsearch-certutil</code> per generar certificats.</p>
<pre><code class="language-sh">bin/elasticsearch-certutil cert --ca
</code></pre>
</li>
<li>
<p><strong>Configurar Elasticsearch per TLS</strong>: Afegeix les següents línies al teu fitxer <code>elasticsearch.yml</code>.</p>
<pre><code class="language-yaml">xpack.security.transport.ssl.enabled: true
xpack.security.transport.ssl.verification_mode: certificate
xpack.security.transport.ssl.key: /path/to/your/node.key
xpack.security.transport.ssl.certificate: /path/to/your/node.crt
xpack.security.transport.ssl.certificate_authorities: [ &quot;/path/to/your/ca.crt&quot; ]
</code></pre>
</li>
<li>
<p><strong>Reiniciar Elasticsearch</strong>: Reinicia la teva instància d'Elasticsearch per aplicar els canvis.</p>
<pre><code class="language-sh">bin/elasticsearch
</code></pre>
</li>
</ol>
</div><h1>Auditoria</h1>
<div class='content'><p>L'auditoria t'ajuda a fer un seguiment de l'accés i els canvis al teu clúster d'Elasticsearch, proporcionant un rastre d'accions per a finalitats de seguretat i compliment.</p>
</div><h2>Activar l'Auditoria</h2>
<div class='content'><ol>
<li>
<p><strong>Configurar l'Auditoria en Elasticsearch.yml</strong>: Afegeix les següents línies al teu fitxer <code>elasticsearch.yml</code>.</p>
<pre><code class="language-yaml">xpack.security.audit.enabled: true
xpack.security.audit.outputs: [ index, logfile ]
</code></pre>
</li>
<li>
<p><strong>Revisar els Registres d'Auditoria</strong>: Els registres d'auditoria es guardaran en les ubicacions de sortida especificades, com un índex o un fitxer de registre.</p>
</li>
</ol>
</div><h1>Conclusió</h1>
<div class='content'><p>Assegurar Elasticsearch implica múltiples capes de protecció, incloent l'autenticació bàsica, el control d'accés basat en rols, la seguretat de la capa de transport i l'auditoria. Implementant aquestes mesures de seguretat, pots assegurar que el teu clúster d'Elasticsearch estigui protegit contra l'accés no autoritzat i les violacions de dades. Mantingues sempre les teves configuracions de seguretat actualitzades i revisa regularment les teves polítiques de seguretat per adaptar-te a noves amenaces.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
