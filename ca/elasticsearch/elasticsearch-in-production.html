<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elasticsearch en Producció</title>

    <link rel="alternate" href="https://campusempresa.com/es/elasticsearch/elasticsearch-in-production" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/elasticsearch/elasticsearch-in-production" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/elasticsearch/elasticsearch-in-production" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/elasticsearch/elasticsearch-in-production" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>Elasticsearch és un potent motor de cerca i analítica àmpliament utilitzat en entorns de producció. Aquesta secció cobrirà les millors pràctiques, tècniques d'optimització i consideracions per desplegar Elasticsearch en un entorn de producció.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Configuració del Clúster</strong>: Entendre com configurar i gestionar un clúster d'Elasticsearch.</li>
<li><strong>Gestió d'Índexs</strong>: Millors pràctiques per crear, gestionar i optimitzar índexs.</li>
<li><strong>Monitorització i Alertes</strong>: Eines i tècniques per monitoritzar la salut i el rendiment del teu clúster d'Elasticsearch.</li>
<li><strong>Seguretat</strong>: Implementar mesures de seguretat per protegir les teves dades.</li>
<li><strong>Còpia de Seguretat i Restauració</strong>: Estratègies per fer còpies de seguretat i restaurar les teves dades d'Elasticsearch.</li>
<li><strong>Escalabilitat</strong>: Tècniques per escalar el teu clúster d'Elasticsearch per gestionar una càrrega augmentada.</li>
</ul>
</div><h1>Configuració del Clúster</h1>
<div class='content'><p>Configurar un clúster d'Elasticsearch implica configurar múltiples nodes per treballar junts. Cada node pot tenir diferents rols com ara nodes mestres, de dades i d'ingestió.</p>
</div><h2>Exemple de Configuració</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBlbGFzdGljc2VhcmNoLnltbApjbHVzdGVyLm5hbWU6IG15LWNsdXN0ZXIKbm9kZS5uYW1lOiBub2RlLTEKbm9kZS5yb2xlczogW21hc3RlciwgZGF0YV0KbmV0d29yay5ob3N0OiAwLjAuMC4wCmRpc2NvdmVyeS5zZWVkX2hvc3RzOiBbIm5vZGUtMSIsICJub2RlLTIiLCAibm9kZS0zIl0KY2x1c3Rlci5pbml0aWFsX21hc3Rlcl9ub2RlczogWyJub2RlLTEiLCAibm9kZS0yIiwgIm5vZGUtMyJd"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># elasticsearch.yml
cluster.name: my-cluster
node.name: node-1
node.roles: [master, data]
network.host: 0.0.0.0
discovery.seed_hosts: [&quot;node-1&quot;, &quot;node-2&quot;, &quot;node-3&quot;]
cluster.initial_master_nodes: [&quot;node-1&quot;, &quot;node-2&quot;, &quot;node-3&quot;]</pre></div><div class='content'><ul>
<li><strong>cluster.name</strong>: El nom del teu clúster.</li>
<li><strong>node.name</strong>: El nom del node.</li>
<li><strong>node.roles</strong>: Rols assignats al node.</li>
<li><strong>network.host</strong>: Configuració de xarxa per al node.</li>
<li><strong>discovery.seed_hosts</strong>: Llista de nodes per descobrir.</li>
<li><strong>cluster.initial_master_nodes</strong>: Nodes mestres inicials per a la formació del clúster.</li>
</ul>
</div><h1>Gestió d'Índexs</h1>
<div class='content'><p>Una gestió adequada dels índexs és crucial per mantenir el rendiment i l'eficiència.</p>
</div><h2>Millors Pràctiques</h2>
<div class='content'><ul>
<li><strong>Fragmentació</strong>: Determinar el nombre òptim de fragments basat en la mida de les teves dades i patrons de consulta.</li>
<li><strong>Replicació</strong>: Utilitzar la replicació per assegurar la disponibilitat de les dades i la tolerància a fallades.</li>
<li><strong>Gestió del Cicle de Vida dels Índexs (ILM)</strong>: Automatitzar tasques de gestió d'índexs com ara rollover, reducció i eliminació.</li>
</ul>
</div><h2>Exemple de Política ILM</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJwb2xpY3kiOiB7CiAgICAicGhhc2VzIjogewogICAgICAiaG90IjogewogICAgICAgICJhY3Rpb25zIjogewogICAgICAgICAgInJvbGxvdmVyIjogewogICAgICAgICAgICAibWF4X3NpemUiOiAiNTBHQiIsCiAgICAgICAgICAgICJtYXhfYWdlIjogIjMwZCIKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgICJkZWxldGUiOiB7CiAgICAgICAgIm1pbl9hZ2UiOiAiOTBkIiwKICAgICAgICAiYWN0aW9ucyI6IHsKICAgICAgICAgICJkZWxldGUiOiB7fQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;policy&quot;: {
    &quot;phases&quot;: {
      &quot;hot&quot;: {
        &quot;actions&quot;: {
          &quot;rollover&quot;: {
            &quot;max_size&quot;: &quot;50GB&quot;,
            &quot;max_age&quot;: &quot;30d&quot;
          }
        }
      },
      &quot;delete&quot;: {
        &quot;min_age&quot;: &quot;90d&quot;,
        &quot;actions&quot;: {
          &quot;delete&quot;: {}
        }
      }
    }
  }
}</pre></div><div class='content'><ul>
<li><strong>fase calenta</strong>: Rollover de l'índex quan arriba a 50GB o 30 dies d'antiguitat.</li>
<li><strong>fase d'eliminació</strong>: Eliminar l'índex després de 90 dies.</li>
</ul>
</div><h1>Monitorització i Alertes</h1>
<div class='content'><p>Monitoritzar la salut i el rendiment del teu clúster d'Elasticsearch és essencial.</p>
</div><h2>Eines</h2>
<div class='content'><ul>
<li><strong>Monitorització d'Elasticsearch</strong>: Funcionalitats de monitorització integrades.</li>
<li><strong>Kibana</strong>: Visualitzar i analitzar mètriques del clúster.</li>
<li><strong>Prometheus i Grafana</strong>: Utilitzar aquestes eines per a una monitorització i alertes avançades.</li>
</ul>
</div><h2>Exemple de Configuració d'Alertes</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJ0cmlnZ2VyIjogewogICAgInNjaGVkdWxlIjogewogICAgICAiaW50ZXJ2YWwiOiAiMW0iCiAgICB9CiAgfSwKICAiaW5wdXQiOiB7CiAgICAic2VhcmNoIjogewogICAgICAicmVxdWVzdCI6IHsKICAgICAgICAiaW5kaWNlcyI6IFsibWV0cmljYmVhdC0qIl0sCiAgICAgICAgImJvZHkiOiB7CiAgICAgICAgICAicXVlcnkiOiB7CiAgICAgICAgICAgICJyYW5nZSI6IHsKICAgICAgICAgICAgICAidGltZXN0YW1wIjogewogICAgICAgICAgICAgICAgImd0ZSI6ICJub3ctMW0iCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICAiY29uZGl0aW9uIjogewogICAgImNvbXBhcmUiOiB7CiAgICAgICJjdHgucGF5bG9hZC5oaXRzLnRvdGFsIjogewogICAgICAgICJndCI6IDEwMDAKICAgICAgfQogICAgfQogIH0sCiAgImFjdGlvbnMiOiB7CiAgICAiZW1haWxfYWRtaW4iOiB7CiAgICAgICJlbWFpbCI6IHsKICAgICAgICAidG8iOiAiYWRtaW5AZXhhbXBsZS5jb20iLAogICAgICAgICJzdWJqZWN0IjogIkFsZXJ0YSBkZSBDw6BycmVnYSBBbHRhIGRlIENvbnN1bHRlcyIsCiAgICAgICAgImJvZHkiOiAiTGEgY8OgcnJlZ2EgZGUgY29uc3VsdGVzIGhhIHN1cGVyYXQgbGVzIDEwMDAgY29uc3VsdGVzIHBlciBtaW51dC4iCiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;trigger&quot;: {
    &quot;schedule&quot;: {
      &quot;interval&quot;: &quot;1m&quot;
    }
  },
  &quot;input&quot;: {
    &quot;search&quot;: {
      &quot;request&quot;: {
        &quot;indices&quot;: [&quot;metricbeat-*&quot;],
        &quot;body&quot;: {
          &quot;query&quot;: {
            &quot;range&quot;: {
              &quot;timestamp&quot;: {
                &quot;gte&quot;: &quot;now-1m&quot;
              }
            }
          }
        }
      }
    }
  },
  &quot;condition&quot;: {
    &quot;compare&quot;: {
      &quot;ctx.payload.hits.total&quot;: {
        &quot;gt&quot;: 1000
      }
    }
  },
  &quot;actions&quot;: {
    &quot;email_admin&quot;: {
      &quot;email&quot;: {
        &quot;to&quot;: &quot;admin@example.com&quot;,
        &quot;subject&quot;: &quot;Alerta de C&agrave;rrega Alta de Consultes&quot;,
        &quot;body&quot;: &quot;La c&agrave;rrega de consultes ha superat les 1000 consultes per minut.&quot;
      }
    }
  }
}</pre></div><div class='content'><ul>
<li><strong>trigger</strong>: Defineix el calendari per a l'alerta.</li>
<li><strong>input</strong>: Especifica la consulta de cerca per monitoritzar.</li>
<li><strong>condition</strong>: La condició que desencadena l'alerta.</li>
<li><strong>actions</strong>: Accions a prendre quan es compleix la condició.</li>
</ul>
</div><h1>Seguretat</h1>
<div class='content'><p>Assegurar el teu clúster d'Elasticsearch és crític per protegir les teves dades.</p>
</div><h2>Millors Pràctiques</h2>
<div class='content'><ul>
<li><strong>Autenticació i Autorització</strong>: Utilitzar funcionalitats de seguretat integrades o eines externes com LDAP.</li>
<li><strong>Xifratge</strong>: Xifrar les dades en repòs i en trànsit.</li>
<li><strong>Control d'Accés</strong>: Implementar control d'accés basat en rols (RBAC).</li>
</ul>
</div><h2>Exemple de Configuració de Seguretat</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBlbGFzdGljc2VhcmNoLnltbAp4cGFjay5zZWN1cml0eS5lbmFibGVkOiB0cnVlCnhwYWNrLnNlY3VyaXR5LnRyYW5zcG9ydC5zc2wuZW5hYmxlZDogdHJ1ZQp4cGFjay5zZWN1cml0eS50cmFuc3BvcnQuc3NsLnZlcmlmaWNhdGlvbl9tb2RlOiBjZXJ0aWZpY2F0ZQp4cGFjay5zZWN1cml0eS50cmFuc3BvcnQuc3NsLmtleTogL3BhdGgvdG8va2V5LnBlbQp4cGFjay5zZWN1cml0eS50cmFuc3BvcnQuc3NsLmNlcnRpZmljYXRlOiAvcGF0aC90by9jZXJ0LnBlbQp4cGFjay5zZWN1cml0eS50cmFuc3BvcnQuc3NsLmNlcnRpZmljYXRlX2F1dGhvcml0aWVzOiBbIi9wYXRoL3RvL2NhLnBlbSJd"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># elasticsearch.yml
xpack.security.enabled: true
xpack.security.transport.ssl.enabled: true
xpack.security.transport.ssl.verification_mode: certificate
xpack.security.transport.ssl.key: /path/to/key.pem
xpack.security.transport.ssl.certificate: /path/to/cert.pem
xpack.security.transport.ssl.certificate_authorities: [&quot;/path/to/ca.pem&quot;]</pre></div><div class='content'><ul>
<li><strong>xpack.security.enabled</strong>: Activar funcionalitats de seguretat.</li>
<li><strong>xpack.security.transport.ssl.enabled</strong>: Activar SSL per a la capa de transport.</li>
<li><strong>xpack.security.transport.ssl.verification_mode</strong>: Establir el mode de verificació.</li>
<li><strong>xpack.security.transport.ssl.key</strong>: Camí a la clau SSL.</li>
<li><strong>xpack.security.transport.ssl.certificate</strong>: Camí al certificat SSL.</li>
<li><strong>xpack.security.transport.ssl.certificate_authorities</strong>: Camí al certificat de l'autoritat de certificació.</li>
</ul>
</div><h1>Còpia de Seguretat i Restauració</h1>
<div class='content'><p>Les còpies de seguretat regulars són essencials per prevenir la pèrdua de dades.</p>
</div><h2>Estratègies</h2>
<div class='content'><ul>
<li><strong>Snapshot i Restauració</strong>: Utilitzar les funcionalitats de snapshot i restauració d'Elasticsearch.</li>
<li><strong>Còpies de Seguretat Automatitzades</strong>: Programar còpies de seguretat regulars utilitzant eines com Curator.</li>
</ul>
</div><h2>Exemple de Configuració de Snapshot</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIC9fc25hcHNob3QvbXlfYmFja3VwCnsKICAidHlwZSI6ICJmcyIsCiAgInNldHRpbmdzIjogewogICAgImxvY2F0aW9uIjogIi9tb3VudC9iYWNrdXBzL215X2JhY2t1cCIsCiAgICAiY29tcHJlc3MiOiB0cnVlCiAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT /_snapshot/my_backup
{
  &quot;type&quot;: &quot;fs&quot;,
  &quot;settings&quot;: {
    &quot;location&quot;: &quot;/mount/backups/my_backup&quot;,
    &quot;compress&quot;: true
  }
}</pre></div><div class='content'><ul>
<li><strong>type</strong>: Tipus de repositori de snapshot.</li>
<li><strong>settings</strong>: Configuració del repositori.</li>
</ul>
</div><h1>Escalabilitat</h1>
<div class='content'><p>Escalar el teu clúster d'Elasticsearch permet gestionar una càrrega augmentada.</p>
</div><h2>Tècniques</h2>
<div class='content'><ul>
<li><strong>Escalabilitat Horitzontal</strong>: Afegir més nodes al clúster.</li>
<li><strong>Escalabilitat Vertical</strong>: Augmentar els recursos (CPU, RAM) dels nodes existents.</li>
<li><strong>Reassignació de Fragments</strong>: Reassignar fragments per equilibrar la càrrega.</li>
</ul>
</div><h2>Exemple de Configuració d'Escalabilitat</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBlbGFzdGljc2VhcmNoLnltbApjbHVzdGVyLnJvdXRpbmcuYWxsb2NhdGlvbi5hd2FyZW5lc3MuYXR0cmlidXRlczogcmFja19pZApub2RlLmF0dHIucmFja19pZDogcmFja18x"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># elasticsearch.yml
cluster.routing.allocation.awareness.attributes: rack_id
node.attr.rack_id: rack_1</pre></div><div class='content'><ul>
<li><strong>cluster.routing.allocation.awareness.attributes</strong>: Atribut per a la consciència d'assignació de fragments.</li>
<li><strong>node.attr.rack_id</strong>: Atribut del node per a la consciència de rack.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Desplegar Elasticsearch en producció requereix una planificació i gestió acurades. Seguint les millors pràctiques per a la configuració del clúster, gestió d'índexs, monitorització, seguretat, còpia de seguretat i escalabilitat, pots assegurar que el teu desplegament d'Elasticsearch sigui robust, segur i eficient.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
