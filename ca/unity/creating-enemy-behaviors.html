<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creació de Comportaments d'Enemics</title>

    <link rel="alternate" href="https://campusempresa.com/es/unity/creating-enemy-behaviors" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/unity/creating-enemy-behaviors" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/unity/creating-enemy-behaviors" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/unity/creating-enemy-behaviors" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>Crear comportaments d'enemics a Unity és una habilitat fonamental per als desenvolupadors de jocs. Aquest tema et guiarà a través del procés des de nivells bàsics fins a avançats, cobrint el moviment bàsic, la presa de decisions d'IA i patrons de comportament complexos.</p>
</div><h1>Introducció als Comportaments d'Enemics</h1>
<div class='content'><p>Abans de submergir-nos en la codificació, és essencial entendre què són els comportaments d'enemics i per què són crucials en el desenvolupament de jocs.</p>
<ul>
<li><strong>Comportaments d'Enemics</strong>: Accions o patrons que segueixen els enemics en un joc, com patrullar, perseguir el jugador o atacar.</li>
<li><strong>Importància</strong>: Millora l'experiència de joc proporcionant desafiaments i fent el joc més atractiu.</li>
</ul>
</div><h1>Moviment Bàsic d'Enemics</h1>
<div class='content'><p>Començarem amb un moviment simple d'enemics, com patrullar entre punts.</p>
</div><h2>Patrullar Entre Punts</h2>
<div class='content'><ol>
<li><strong>Crear Punts de Referència</strong>: Definir punts entre els quals es mourà l'enemic.</li>
<li><strong>Moure's Cap als Punts de Referència</strong>: Utilitzar el component <code>Transform</code> de Unity per moure l'enemic.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgVW5pdHlFbmdpbmU7CgpwdWJsaWMgY2xhc3MgRW5lbXlQYXRyb2wgOiBNb25vQmVoYXZpb3VyCnsKICAgIHB1YmxpYyBUcmFuc2Zvcm1bXSB3YXlwb2ludHM7CiAgICBwdWJsaWMgZmxvYXQgc3BlZWQgPSAyZjsKICAgIHByaXZhdGUgaW50IGN1cnJlbnRXYXlwb2ludEluZGV4ID0gMDsKCiAgICB2b2lkIFVwZGF0ZSgpCiAgICB7CiAgICAgICAgaWYgKHdheXBvaW50cy5MZW5ndGggPT0gMCkgcmV0dXJuOwoKICAgICAgICBUcmFuc2Zvcm0gdGFyZ2V0V2F5cG9pbnQgPSB3YXlwb2ludHNbY3VycmVudFdheXBvaW50SW5kZXhdOwogICAgICAgIFZlY3RvcjMgZGlyZWN0aW9uID0gdGFyZ2V0V2F5cG9pbnQucG9zaXRpb24gLSB0cmFuc2Zvcm0ucG9zaXRpb247CiAgICAgICAgdHJhbnNmb3JtLnBvc2l0aW9uID0gVmVjdG9yMy5Nb3ZlVG93YXJkcyh0cmFuc2Zvcm0ucG9zaXRpb24sIHRhcmdldFdheXBvaW50LnBvc2l0aW9uLCBzcGVlZCAqIFRpbWUuZGVsdGFUaW1lKTsKCiAgICAgICAgaWYgKFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCB0YXJnZXRXYXlwb2ludC5wb3NpdGlvbikgPCAwLjFmKQogICAgICAgIHsKICAgICAgICAgICAgY3VycmVudFdheXBvaW50SW5kZXggPSAoY3VycmVudFdheXBvaW50SW5kZXggKyAxKSAlIHdheXBvaW50cy5MZW5ndGg7CiAgICAgICAgfQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using UnityEngine;

public class EnemyPatrol : MonoBehaviour
{
    public Transform[] waypoints;
    public float speed = 2f;
    private int currentWaypointIndex = 0;

    void Update()
    {
        if (waypoints.Length == 0) return;

        Transform targetWaypoint = waypoints[currentWaypointIndex];
        Vector3 direction = targetWaypoint.position - transform.position;
        transform.position = Vector3.MoveTowards(transform.position, targetWaypoint.position, speed * Time.deltaTime);

        if (Vector3.Distance(transform.position, targetWaypoint.position) &lt; 0.1f)
        {
            currentWaypointIndex = (currentWaypointIndex + 1) % waypoints.Length;
        }
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>waypoints</code>: Array de punts que l'enemic patrullarà.</li>
<li><code>speed</code>: Velocitat de l'enemic.</li>
<li><code>currentWaypointIndex</code>: Fa el seguiment del punt de referència actual.</li>
<li><code>Update()</code>: Mou l'enemic cap al punt de referència actual i actualitza l'índex del punt de referència quan l'enemic arriba a l'objectiu.</li>
</ul>
</li>
</ul>
</div><h1>Comportaments Intermedis d'Enemics</h1>
<div class='content'><p>A continuació, afegirem més complexitat introduint la detecció d'enemics i la persecució del jugador.</p>
</div><h2>Detectar el Jugador</h2>
<div class='content'><ol>
<li><strong>Camp de Visió</strong>: Definir el camp de visió de l'enemic per detectar el jugador.</li>
<li><strong>Mecanisme de Persecució</strong>: Implementar la lògica per perseguir el jugador quan sigui detectat.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgVW5pdHlFbmdpbmU7CgpwdWJsaWMgY2xhc3MgRW5lbXlDaGFzZSA6IE1vbm9CZWhhdmlvdXIKewogICAgcHVibGljIFRyYW5zZm9ybSBwbGF5ZXI7CiAgICBwdWJsaWMgZmxvYXQgZGV0ZWN0aW9uUmFuZ2UgPSA1ZjsKICAgIHB1YmxpYyBmbG9hdCBzcGVlZCA9IDNmOwoKICAgIHZvaWQgVXBkYXRlKCkKICAgIHsKICAgICAgICBmbG9hdCBkaXN0YW5jZVRvUGxheWVyID0gVmVjdG9yMy5EaXN0YW5jZSh0cmFuc2Zvcm0ucG9zaXRpb24sIHBsYXllci5wb3NpdGlvbik7CgogICAgICAgIGlmIChkaXN0YW5jZVRvUGxheWVyIDwgZGV0ZWN0aW9uUmFuZ2UpCiAgICAgICAgewogICAgICAgICAgICBWZWN0b3IzIGRpcmVjdGlvbiA9IChwbGF5ZXIucG9zaXRpb24gLSB0cmFuc2Zvcm0ucG9zaXRpb24pLm5vcm1hbGl6ZWQ7CiAgICAgICAgICAgIHRyYW5zZm9ybS5wb3NpdGlvbiArPSBkaXJlY3Rpb24gKiBzcGVlZCAqIFRpbWUuZGVsdGFUaW1lOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using UnityEngine;

public class EnemyChase : MonoBehaviour
{
    public Transform player;
    public float detectionRange = 5f;
    public float speed = 3f;

    void Update()
    {
        float distanceToPlayer = Vector3.Distance(transform.position, player.position);

        if (distanceToPlayer &lt; detectionRange)
        {
            Vector3 direction = (player.position - transform.position).normalized;
            transform.position += direction * speed * Time.deltaTime;
        }
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>player</code>: Referència al transform del jugador.</li>
<li><code>detectionRange</code>: Distància dins de la qual l'enemic pot detectar el jugador.</li>
<li><code>Update()</code>: Comprova la distància al jugador i es mou cap al jugador si està dins del rang de detecció.</li>
</ul>
</li>
</ul>
</div><h1>Comportaments Avançats d'Enemics</h1>
<div class='content'><p>Per a comportaments avançats, implementarem màquines d'estats i patrons d'IA més complexos.</p>
</div><h2>Màquines d'Estats</h2>
<div class='content'><ol>
<li><strong>Definir Estats</strong>: Crear diferents estats per a l'enemic (per exemple, Inactiu, Patrullar, Perseguir, Atacar).</li>
<li><strong>Transicions d'Estat</strong>: Implementar la lògica per transitar entre estats basant-se en condicions.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgVW5pdHlFbmdpbmU7CgpwdWJsaWMgY2xhc3MgRW5lbXlBSSA6IE1vbm9CZWhhdmlvdXIKewogICAgcHJpdmF0ZSBlbnVtIFN0YXRlIHsgSWRsZSwgUGF0cm9sLCBDaGFzZSwgQXR0YWNrIH0KICAgIHByaXZhdGUgU3RhdGUgY3VycmVudFN0YXRlOwoKICAgIHB1YmxpYyBUcmFuc2Zvcm1bXSB3YXlwb2ludHM7CiAgICBwdWJsaWMgVHJhbnNmb3JtIHBsYXllcjsKICAgIHB1YmxpYyBmbG9hdCBkZXRlY3Rpb25SYW5nZSA9IDVmOwogICAgcHVibGljIGZsb2F0IGF0dGFja1JhbmdlID0gMWY7CiAgICBwdWJsaWMgZmxvYXQgc3BlZWQgPSAyZjsKICAgIHByaXZhdGUgaW50IGN1cnJlbnRXYXlwb2ludEluZGV4ID0gMDsKCiAgICB2b2lkIFN0YXJ0KCkKICAgIHsKICAgICAgICBjdXJyZW50U3RhdGUgPSBTdGF0ZS5QYXRyb2w7CiAgICB9CgogICAgdm9pZCBVcGRhdGUoKQogICAgewogICAgICAgIHN3aXRjaCAoY3VycmVudFN0YXRlKQogICAgICAgIHsKICAgICAgICAgICAgY2FzZSBTdGF0ZS5JZGxlOgogICAgICAgICAgICAgICAgLy8gQ29tcG9ydGFtZW50IGluYWN0aXUKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIFN0YXRlLlBhdHJvbDoKICAgICAgICAgICAgICAgIFBhdHJvbCgpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgU3RhdGUuQ2hhc2U6CiAgICAgICAgICAgICAgICBDaGFzZSgpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgU3RhdGUuQXR0YWNrOgogICAgICAgICAgICAgICAgQXR0YWNrKCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIENoZWNrVHJhbnNpdGlvbnMoKTsKICAgIH0KCiAgICB2b2lkIFBhdHJvbCgpCiAgICB7CiAgICAgICAgaWYgKHdheXBvaW50cy5MZW5ndGggPT0gMCkgcmV0dXJuOwoKICAgICAgICBUcmFuc2Zvcm0gdGFyZ2V0V2F5cG9pbnQgPSB3YXlwb2ludHNbY3VycmVudFdheXBvaW50SW5kZXhdOwogICAgICAgIFZlY3RvcjMgZGlyZWN0aW9uID0gdGFyZ2V0V2F5cG9pbnQucG9zaXRpb24gLSB0cmFuc2Zvcm0ucG9zaXRpb247CiAgICAgICAgdHJhbnNmb3JtLnBvc2l0aW9uID0gVmVjdG9yMy5Nb3ZlVG93YXJkcyh0cmFuc2Zvcm0ucG9zaXRpb24sIHRhcmdldFdheXBvaW50LnBvc2l0aW9uLCBzcGVlZCAqIFRpbWUuZGVsdGFUaW1lKTsKCiAgICAgICAgaWYgKFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCB0YXJnZXRXYXlwb2ludC5wb3NpdGlvbikgPCAwLjFmKQogICAgICAgIHsKICAgICAgICAgICAgY3VycmVudFdheXBvaW50SW5kZXggPSAoY3VycmVudFdheXBvaW50SW5kZXggKyAxKSAlIHdheXBvaW50cy5MZW5ndGg7CiAgICAgICAgfQogICAgfQoKICAgIHZvaWQgQ2hhc2UoKQogICAgewogICAgICAgIFZlY3RvcjMgZGlyZWN0aW9uID0gKHBsYXllci5wb3NpdGlvbiAtIHRyYW5zZm9ybS5wb3NpdGlvbikubm9ybWFsaXplZDsKICAgICAgICB0cmFuc2Zvcm0ucG9zaXRpb24gKz0gZGlyZWN0aW9uICogc3BlZWQgKiBUaW1lLmRlbHRhVGltZTsKICAgIH0KCiAgICB2b2lkIEF0dGFjaygpCiAgICB7CiAgICAgICAgLy8gQ29tcG9ydGFtZW50IGQnYXRhYwogICAgfQoKICAgIHZvaWQgQ2hlY2tUcmFuc2l0aW9ucygpCiAgICB7CiAgICAgICAgZmxvYXQgZGlzdGFuY2VUb1BsYXllciA9IFZlY3RvcjMuRGlzdGFuY2UodHJhbnNmb3JtLnBvc2l0aW9uLCBwbGF5ZXIucG9zaXRpb24pOwoKICAgICAgICBzd2l0Y2ggKGN1cnJlbnRTdGF0ZSkKICAgICAgICB7CiAgICAgICAgICAgIGNhc2UgU3RhdGUuSWRsZToKICAgICAgICAgICAgICAgIGlmIChkaXN0YW5jZVRvUGxheWVyIDwgZGV0ZWN0aW9uUmFuZ2UpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gU3RhdGUuQ2hhc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBTdGF0ZS5QYXRyb2w6CiAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VUb1BsYXllciA8IGRldGVjdGlvblJhbmdlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IFN0YXRlLkNoYXNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgU3RhdGUuQ2hhc2U6CiAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VUb1BsYXllciA8IGF0dGFja1JhbmdlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IFN0YXRlLkF0dGFjazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRpc3RhbmNlVG9QbGF5ZXIgPiBkZXRlY3Rpb25SYW5nZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBTdGF0ZS5QYXRyb2w7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSBTdGF0ZS5BdHRhY2s6CiAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2VUb1BsYXllciA+IGF0dGFja1JhbmdlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IFN0YXRlLkNoYXNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using UnityEngine;

public class EnemyAI : MonoBehaviour
{
    private enum State { Idle, Patrol, Chase, Attack }
    private State currentState;

    public Transform[] waypoints;
    public Transform player;
    public float detectionRange = 5f;
    public float attackRange = 1f;
    public float speed = 2f;
    private int currentWaypointIndex = 0;

    void Start()
    {
        currentState = State.Patrol;
    }

    void Update()
    {
        switch (currentState)
        {
            case State.Idle:
                // Comportament inactiu
                break;
            case State.Patrol:
                Patrol();
                break;
            case State.Chase:
                Chase();
                break;
            case State.Attack:
                Attack();
                break;
        }

        CheckTransitions();
    }

    void Patrol()
    {
        if (waypoints.Length == 0) return;

        Transform targetWaypoint = waypoints[currentWaypointIndex];
        Vector3 direction = targetWaypoint.position - transform.position;
        transform.position = Vector3.MoveTowards(transform.position, targetWaypoint.position, speed * Time.deltaTime);

        if (Vector3.Distance(transform.position, targetWaypoint.position) &lt; 0.1f)
        {
            currentWaypointIndex = (currentWaypointIndex + 1) % waypoints.Length;
        }
    }

    void Chase()
    {
        Vector3 direction = (player.position - transform.position).normalized;
        transform.position += direction * speed * Time.deltaTime;
    }

    void Attack()
    {
        // Comportament d'atac
    }

    void CheckTransitions()
    {
        float distanceToPlayer = Vector3.Distance(transform.position, player.position);

        switch (currentState)
        {
            case State.Idle:
                if (distanceToPlayer &lt; detectionRange)
                {
                    currentState = State.Chase;
                }
                break;
            case State.Patrol:
                if (distanceToPlayer &lt; detectionRange)
                {
                    currentState = State.Chase;
                }
                break;
            case State.Chase:
                if (distanceToPlayer &lt; attackRange)
                {
                    currentState = State.Attack;
                }
                else if (distanceToPlayer &gt; detectionRange)
                {
                    currentState = State.Patrol;
                }
                break;
            case State.Attack:
                if (distanceToPlayer &gt; attackRange)
                {
                    currentState = State.Chase;
                }
                break;
        }
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>State</code>: Enum que representa diferents estats.</li>
<li><code>currentState</code>: Fa el seguiment de l'estat actual de l'enemic.</li>
<li><code>Update()</code>: Executa el comportament basat en l'estat actual i comprova les transicions d'estat.</li>
<li><code>Patrol()</code>, <code>Chase()</code>, <code>Attack()</code>: Mètodes que defineixen els comportaments per a cada estat.</li>
<li><code>CheckTransitions()</code>: Lògica per transitar entre estats basant-se en condicions.</li>
</ul>
</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Crear comportaments d'enemics a Unity implica entendre el moviment bàsic, els mecanismes de detecció i els patrons d'IA avançats. Començant amb patrulles simples i afegint gradualment complexitat amb màquines d'estats, pots crear comportaments d'enemics atractius i desafiants per als teus jocs. Practica aquests conceptes i experimenta amb diferents comportaments per millorar les teves habilitats en el desenvolupament de jocs.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
