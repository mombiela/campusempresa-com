<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistemes de Partícules en OpenGL</title>

    <link rel="alternate" href="https://campusempresa.com/es/open_gl/particle-systems" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/open_gl/particle-systems" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/open_gl/particle-systems" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/open_gl/particle-systems" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>Els sistemes de partícules són una tècnica utilitzada en gràfics per ordinador per simular fenòmens difusos, que d'altra manera són molt difícils de reproduir amb tècniques de renderització convencionals. Els exemples inclouen foc, fum, pluja i explosions. Aquest tema et guiarà des dels conceptes bàsics fins als avançats de la implementació de sistemes de partícules en OpenGL.</p>
</div><h1>Introducció als Sistemes de Partícules</h1>
<div class='content'><ul>
<li><strong>Definició</strong>: Un sistema de partícules és una col·lecció de moltes petites partícules que juntes representen un objecte difús.</li>
<li><strong>Aplicacions</strong>: Utilitzat per simular fenòmens naturals com foc, fum, pluja, neu i explosions.</li>
</ul>
</div><h1>Conceptes Bàsics</h1>
<div class='content'></div><h2>Partícules</h2>
<div class='content'><ul>
<li><strong>Partícula</strong>: La unitat més petita en un sistema de partícules. Cada partícula té propietats com posició, velocitat, color i durada de vida.</li>
<li><strong>Emissor</strong>: La font des de la qual es generen les partícules. Controla la taxa i les propietats inicials de les partícules.</li>
</ul>
</div><h2>Propietats de les Partícules</h2>
<div class='content'><ul>
<li><strong>Posició</strong>: La ubicació de la partícula en l'espai 3D.</li>
<li><strong>Velocitat</strong>: La velocitat i direcció de la partícula.</li>
<li><strong>Color</strong>: El color de la partícula, que pot canviar amb el temps.</li>
<li><strong>Durada de vida</strong>: La durada durant la qual la partícula existeix abans de desaparèixer.</li>
</ul>
</div><h1>Configuració d'un Sistema de Partícules Bàsic</h1>
<div class='content'></div><h2>Inicialització d'OpenGL</h2>
<div class='content'><p>Abans de crear un sistema de partícules, assegura't de tenir una configuració bàsica d'OpenGL. Aquí tens una inicialització simple:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPEdML2dsZXcuaD4KI2luY2x1ZGUgPEdMRlcvZ2xmdzMuaD4KCmludCBtYWluKCkgewogICAgaWYgKCFnbGZ3SW5pdCgpKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgfQoKICAgIEdMRld3aW5kb3cqIHdpbmRvdyA9IGdsZndDcmVhdGVXaW5kb3coODAwLCA2MDAsICJQYXJ0aWNsZSBTeXN0ZW0iLCBOVUxMLCBOVUxMKTsKICAgIGlmICghd2luZG93KSB7CiAgICAgICAgZ2xmd1Rlcm1pbmF0ZSgpOwogICAgICAgIHJldHVybiAtMTsKICAgIH0KCiAgICBnbGZ3TWFrZUNvbnRleHRDdXJyZW50KHdpbmRvdyk7CiAgICBnbGV3SW5pdCgpOwoKICAgIHdoaWxlICghZ2xmd1dpbmRvd1Nob3VsZENsb3NlKHdpbmRvdykpIHsKICAgICAgICBnbENsZWFyKEdMX0NPTE9SX0JVRkZFUl9CSVQgfCBHTF9ERVBUSF9CVUZGRVJfQklUKTsKCiAgICAgICAgLy8gUmVuZGVyIHBhcnRpY2xlcyBoZXJlCgogICAgICAgIGdsZndTd2FwQnVmZmVycyh3aW5kb3cpOwogICAgICAgIGdsZndQb2xsRXZlbnRzKCk7CiAgICB9CgogICAgZ2xmd0Rlc3Ryb3lXaW5kb3cod2luZG93KTsKICAgIGdsZndUZXJtaW5hdGUoKTsKICAgIHJldHVybiAwOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;GL/glew.h&gt;
#include &lt;GLFW/glfw3.h&gt;

int main() {
    if (!glfwInit()) {
        return -1;
    }

    GLFWwindow* window = glfwCreateWindow(800, 600, &quot;Particle System&quot;, NULL, NULL);
    if (!window) {
        glfwTerminate();
        return -1;
    }

    glfwMakeContextCurrent(window);
    glewInit();

    while (!glfwWindowShouldClose(window)) {
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        // Render particles here

        glfwSwapBuffers(window);
        glfwPollEvents();
    }

    glfwDestroyWindow(window);
    glfwTerminate();
    return 0;
}</pre></div><div class='content'></div><h2>Creació d'una Estructura de Partícules</h2>
<div class='content'><p>Defineix una estructura per mantenir les propietats de les partícules:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IFBhcnRpY2xlIHsKICAgIGZsb2F0IHBvc2l0aW9uWzNdOwogICAgZmxvYXQgdmVsb2NpdHlbM107CiAgICBmbG9hdCBjb2xvcls0XTsKICAgIGZsb2F0IGxpZmVzcGFuOwp9Ow=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct Particle {
    float position[3];
    float velocity[3];
    float color[4];
    float lifespan;
};</pre></div><div class='content'></div><h2>Generació de Partícules</h2>
<div class='content'><p>Crea una funció emissora per generar partícules:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHZlY3Rvcj4KI2luY2x1ZGUgPGNzdGRsaWI+CgpzdGQ6OnZlY3RvcjxQYXJ0aWNsZT4gcGFydGljbGVzOwoKdm9pZCBlbWl0UGFydGljbGVzKGludCBjb3VudCkgewogICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7CiAgICAgICAgUGFydGljbGUgcDsKICAgICAgICBwLnBvc2l0aW9uWzBdID0gMC4wZjsKICAgICAgICBwLnBvc2l0aW9uWzFdID0gMC4wZjsKICAgICAgICBwLnBvc2l0aW9uWzJdID0gMC4wZjsKICAgICAgICBwLnZlbG9jaXR5WzBdID0gKGZsb2F0KHJhbmQoKSkgLyBSQU5EX01BWCkgKiAyLjBmIC0gMS4wZjsKICAgICAgICBwLnZlbG9jaXR5WzFdID0gKGZsb2F0KHJhbmQoKSkgLyBSQU5EX01BWCkgKiAyLjBmIC0gMS4wZjsKICAgICAgICBwLnZlbG9jaXR5WzJdID0gKGZsb2F0KHJhbmQoKSkgLyBSQU5EX01BWCkgKiAyLjBmIC0gMS4wZjsKICAgICAgICBwLmNvbG9yWzBdID0gMS4wZjsKICAgICAgICBwLmNvbG9yWzFdID0gMS4wZjsKICAgICAgICBwLmNvbG9yWzJdID0gMS4wZjsKICAgICAgICBwLmNvbG9yWzNdID0gMS4wZjsKICAgICAgICBwLmxpZmVzcGFuID0gNS4wZjsKICAgICAgICBwYXJ0aWNsZXMucHVzaF9iYWNrKHApOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;vector&gt;
#include &lt;cstdlib&gt;

std::vector&lt;Particle&gt; particles;

void emitParticles(int count) {
    for (int i = 0; i &lt; count; ++i) {
        Particle p;
        p.position[0] = 0.0f;
        p.position[1] = 0.0f;
        p.position[2] = 0.0f;
        p.velocity[0] = (float(rand()) / RAND_MAX) * 2.0f - 1.0f;
        p.velocity[1] = (float(rand()) / RAND_MAX) * 2.0f - 1.0f;
        p.velocity[2] = (float(rand()) / RAND_MAX) * 2.0f - 1.0f;
        p.color[0] = 1.0f;
        p.color[1] = 1.0f;
        p.color[2] = 1.0f;
        p.color[3] = 1.0f;
        p.lifespan = 5.0f;
        particles.push_back(p);
    }
}</pre></div><div class='content'></div><h2>Actualització de les Partícules</h2>
<div class='content'><p>Actualitza les propietats de les partícules amb el temps:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCB1cGRhdGVQYXJ0aWNsZXMoZmxvYXQgZGVsdGFUaW1lKSB7CiAgICBmb3IgKGF1dG8mIHAgOiBwYXJ0aWNsZXMpIHsKICAgICAgICBwLnBvc2l0aW9uWzBdICs9IHAudmVsb2NpdHlbMF0gKiBkZWx0YVRpbWU7CiAgICAgICAgcC5wb3NpdGlvblsxXSArPSBwLnZlbG9jaXR5WzFdICogZGVsdGFUaW1lOwogICAgICAgIHAucG9zaXRpb25bMl0gKz0gcC52ZWxvY2l0eVsyXSAqIGRlbHRhVGltZTsKICAgICAgICBwLmxpZmVzcGFuIC09IGRlbHRhVGltZTsKICAgIH0KCiAgICAvLyBFbGltaW5hIGxlcyBwYXJ0w61jdWxlcyBtb3J0ZXMKICAgIHBhcnRpY2xlcy5lcmFzZShzdGQ6OnJlbW92ZV9pZihwYXJ0aWNsZXMuYmVnaW4oKSwgcGFydGljbGVzLmVuZCgpLAogICAgICAgIFtdKFBhcnRpY2xlJiBwKSB7IHJldHVybiBwLmxpZmVzcGFuIDw9IDAuMGY7IH0pLCBwYXJ0aWNsZXMuZW5kKCkpOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void updateParticles(float deltaTime) {
    for (auto&amp; p : particles) {
        p.position[0] += p.velocity[0] * deltaTime;
        p.position[1] += p.velocity[1] * deltaTime;
        p.position[2] += p.velocity[2] * deltaTime;
        p.lifespan -= deltaTime;
    }

    // Elimina les part&iacute;cules mortes
    particles.erase(std::remove_if(particles.begin(), particles.end(),
        [](Particle&amp; p) { return p.lifespan &lt;= 0.0f; }), particles.end());
}</pre></div><div class='content'></div><h2>Renderització de les Partícules</h2>
<div class='content'><p>Renderitza les partícules utilitzant OpenGL:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCByZW5kZXJQYXJ0aWNsZXMoKSB7CiAgICBnbEJlZ2luKEdMX1BPSU5UUyk7CiAgICBmb3IgKGNvbnN0IGF1dG8mIHAgOiBwYXJ0aWNsZXMpIHsKICAgICAgICBnbENvbG9yNGZ2KHAuY29sb3IpOwogICAgICAgIGdsVmVydGV4M2Z2KHAucG9zaXRpb24pOwogICAgfQogICAgZ2xFbmQoKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void renderParticles() {
    glBegin(GL_POINTS);
    for (const auto&amp; p : particles) {
        glColor4fv(p.color);
        glVertex3fv(p.position);
    }
    glEnd();
}</pre></div><div class='content'></div><h2>Integració en el Bucle Principal</h2>
<div class='content'><p>Integra l'emissió, l'actualització i la renderització de partícules en el bucle principal:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50IG1haW4oKSB7CiAgICAvLyBDb2RpIGQnaW5pY2lhbGl0emFjacOzLi4uCgogICAgd2hpbGUgKCFnbGZ3V2luZG93U2hvdWxkQ2xvc2Uod2luZG93KSkgewogICAgICAgIGZsb2F0IGRlbHRhVGltZSA9IDAuMDE2ZjsgLy8gU3Vwb3NhIHVuIHBhcyBkZSB0ZW1wcyBmaXggcGVyIHNpbXBsaWNpdGF0CgogICAgICAgIGdsQ2xlYXIoR0xfQ09MT1JfQlVGRkVSX0JJVCB8IEdMX0RFUFRIX0JVRkZFUl9CSVQpOwoKICAgICAgICBlbWl0UGFydGljbGVzKDEwKTsgLy8gRW1pc3Npw7MgZGUgMTAgcGFydMOtY3VsZXMgcGVyIGZvdG9ncmFtYQogICAgICAgIHVwZGF0ZVBhcnRpY2xlcyhkZWx0YVRpbWUpOwogICAgICAgIHJlbmRlclBhcnRpY2xlcygpOwoKICAgICAgICBnbGZ3U3dhcEJ1ZmZlcnMod2luZG93KTsKICAgICAgICBnbGZ3UG9sbEV2ZW50cygpOwogICAgfQoKICAgIC8vIENvZGkgZGUgbmV0ZWphLi4uCgogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int main() {
    // Codi d'inicialitzaci&oacute;...

    while (!glfwWindowShouldClose(window)) {
        float deltaTime = 0.016f; // Suposa un pas de temps fix per simplicitat

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        emitParticles(10); // Emissi&oacute; de 10 part&iacute;cules per fotograma
        updateParticles(deltaTime);
        renderParticles();

        glfwSwapBuffers(window);
        glfwPollEvents();
    }

    // Codi de neteja...

    return 0;
}</pre></div><div class='content'></div><h1>Tècniques Avançades de Sistemes de Partícules</h1>
<div class='content'></div><h2>Partícules Texturitzades</h2>
<div class='content'><ul>
<li><strong>Mapatge de Textures</strong>: Aplica textures a les partícules per crear efectes més realistes.</li>
<li><strong>Billboarding</strong>: Assegura que les partícules sempre mirin cap a la càmera.</li>
</ul>
</div><h2>Integració de Física</h2>
<div class='content'><ul>
<li><strong>Gravetat</strong>: Aplica força gravitatòria a les partícules.</li>
<li><strong>Detecció de Col·lisions</strong>: Detecta i respon a col·lisions amb altres objectes.</li>
</ul>
</div><h2>Shaders per a Sistemes de Partícules</h2>
<div class='content'><ul>
<li><strong>Vertex Shaders</strong>: Gestionen les transformacions de les partícules.</li>
<li><strong>Fragment Shaders</strong>: Gestionen la coloració i texturització de les partícules.</li>
</ul>
</div><h2>Optimització del Rendiment</h2>
<div class='content'><ul>
<li><strong>Instancing</strong>: Utilitza renderització instanciada per dibuixar moltes partícules de manera eficient.</li>
<li><strong>Sistemes de Partícules Basats en GPU</strong>: Descarrega els càlculs de partícules a la GPU per obtenir un millor rendiment.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Els sistemes de partícules són una eina poderosa en gràfics per ordinador per simular fenòmens complexos i dinàmics. Comprenent els conceptes bàsics i integrant progressivament tècniques més avançades, pots crear efectes visualment impressionants en les teves aplicacions OpenGL. Practica implementant diferents tipus de sistemes de partícules i experimenta amb diverses propietats i optimitzacions.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
