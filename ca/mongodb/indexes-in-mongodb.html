<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Índexs a MongoDB</title>

    <link rel="alternate" href="https://campusempresa.com/es/mongodb/indexes-in-mongodb" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/mongodb/indexes-in-mongodb" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/mongodb/indexes-in-mongodb" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/mongodb/indexes-in-mongodb" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='index'></div><h2>Introducció als Índexs</h2>
<div class='index'><p>Els índexs són estructures de dades especials que emmagatzemen una petita porció del conjunt de dades de la col·lecció en una forma fàcil de recórrer. S'utilitzen per millorar la velocitat de les operacions de recuperació de dades en una base de dades a costa d'espai addicional i operacions d'escriptura.</p>
</div><h2>Conceptes Clau</h2>
<div class='index'><ul>
<li><strong>Índex</strong>: Una estructura de dades que millora la velocitat de recuperació de dades.</li>
<li><strong>Índex Per Defecte</strong>: MongoDB crea automàticament un índex en el camp <code>_id</code>.</li>
<li><strong>Índex Compost</strong>: Un índex en múltiples camps.</li>
<li><strong>Índex Únic</strong>: Assegura que els camps indexats no emmagatzemin valors duplicats.</li>
<li><strong>Índex Espars</strong>: Només indexa documents que contenen el camp indexat.</li>
<li><strong>Índex TTL</strong>: Elimina automàticament els documents després d'un cert període.</li>
</ul>
</div><h2>Creació d'Índexs</h2>
<div class='index'><p>Crear índexs a MongoDB es pot fer utilitzant el mètode <code>createIndex</code>.</p>
</div><h2>Índex de Camp Únic</h2>
<div class='index'><p>Un índex de camp únic es crea en un camp del document.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IGZpZWxkOiAxIH0p"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.collection.createIndex({ field: 1 })</pre></div><div class='index'><ul>
<li><code>1</code> especifica ordre ascendent.</li>
<li><code>-1</code> especifica ordre descendent.</li>
</ul>
<p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIudXNlcnMuY3JlYXRlSW5kZXgoeyBuYW1lOiAxIH0p"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.users.createIndex({ name: 1 })</pre></div><div class='index'><p>Això crea un índex ascendent en el camp <code>name</code> a la col·lecció <code>users</code>.</p>
</div><h2>Índex Compost</h2>
<div class='index'><p>Un índex compost es crea en múltiples camps.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IGZpZWxkMTogMSwgZmllbGQyOiAtMSB9KQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.collection.createIndex({ field1: 1, field2: -1 })</pre></div><div class='index'><p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIudXNlcnMuY3JlYXRlSW5kZXgoeyBuYW1lOiAxLCBhZ2U6IC0xIH0p"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.users.createIndex({ name: 1, age: -1 })</pre></div><div class='index'><p>Això crea un índex en el camp <code>name</code> en ordre ascendent i el camp <code>age</code> en ordre descendent.</p>
</div><h2>Índex Únic</h2>
<div class='index'><p>Un índex únic assegura que els camps indexats no emmagatzemin valors duplicats.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IGZpZWxkOiAxIH0sIHsgdW5pcXVlOiB0cnVlIH0p"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.collection.createIndex({ field: 1 }, { unique: true })</pre></div><div class='index'><p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIudXNlcnMuY3JlYXRlSW5kZXgoeyBlbWFpbDogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.users.createIndex({ email: 1 }, { unique: true })</pre></div><div class='index'><p>Això crea un índex únic en el camp <code>email</code> a la col·lecció <code>users</code>.</p>
</div><h2>Índex Espars</h2>
<div class='index'><p>Un índex espars només indexa documents que contenen el camp indexat.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IGZpZWxkOiAxIH0sIHsgc3BhcnNlOiB0cnVlIH0p"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.collection.createIndex({ field: 1 }, { sparse: true })</pre></div><div class='index'><p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIudXNlcnMuY3JlYXRlSW5kZXgoeyBuaWNrbmFtZTogMSB9LCB7IHNwYXJzZTogdHJ1ZSB9KQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.users.createIndex({ nickname: 1 }, { sparse: true })</pre></div><div class='index'><p>Això crea un índex espars en el camp <code>nickname</code> a la col·lecció <code>users</code>.</p>
</div><h2>Índex TTL</h2>
<div class='index'><p>Un índex TTL (Time-To-Live) elimina automàticament els documents després d'un cert període.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IGZpZWxkOiAxIH0sIHsgZXhwaXJlQWZ0ZXJTZWNvbmRzOiBzZWNvbmRzIH0p"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.collection.createIndex({ field: 1 }, { expireAfterSeconds: seconds })</pre></div><div class='index'><p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuc2Vzc2lvbnMuY3JlYXRlSW5kZXgoeyBjcmVhdGVkQXQ6IDEgfSwgeyBleHBpcmVBZnRlclNlY29uZHM6IDM2MDAgfSk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.sessions.createIndex({ createdAt: 1 }, { expireAfterSeconds: 3600 })</pre></div><div class='index'><p>Això crea un índex TTL en el camp <code>createdAt</code> a la col·lecció <code>sessions</code>, eliminant documents 1 hora (3600 segons) després de la seva creació.</p>
</div><h2>Gestió d'Índexs</h2>
<div class='index'><p>Pots veure, eliminar i analitzar índexs utilitzant diversos comandaments de MongoDB.</p>
</div><h2>Veure Índexs</h2>
<div class='index'><p>Per llistar tots els índexs en una col·lecció:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY29sbGVjdGlvbi5nZXRJbmRleGVzKCk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.collection.getIndexes()</pre></div><div class='index'><p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIudXNlcnMuZ2V0SW5kZXhlcygp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.users.getIndexes()</pre></div><div class='index'><p>Això llista tots els índexs a la col·lecció <code>users</code>.</p>
</div><h2>Eliminar Índexs</h2>
<div class='index'><p>Per eliminar un índex específic:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY29sbGVjdGlvbi5kcm9wSW5kZXgoImluZGV4TmFtZSIp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.collection.dropIndex(&quot;indexName&quot;)</pre></div><div class='index'><p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIudXNlcnMuZHJvcEluZGV4KCJuYW1lXzEiKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.users.dropIndex(&quot;name_1&quot;)</pre></div><div class='index'><p>Això elimina l'índex anomenat <code>name_1</code> a la col·lecció <code>users</code>.</p>
<p>Per eliminar tots els índexs en una col·lecció:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY29sbGVjdGlvbi5kcm9wSW5kZXhlcygp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.collection.dropIndexes()</pre></div><div class='index'><p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIudXNlcnMuZHJvcEluZGV4ZXMoKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.users.dropIndexes()</pre></div><div class='index'><p>Això elimina tots els índexs a la col·lecció <code>users</code>.</p>
</div><h2>Analitzar Índexs</h2>
<div class='index'><p>Per obtenir estadístiques sobre l'ús dels índexs:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY29sbGVjdGlvbi5zdGF0cygp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.collection.stats()</pre></div><div class='index'><p><strong>Exemple:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIudXNlcnMuc3RhdHMoKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.users.stats()</pre></div><div class='index'><p>Això proporciona estadístiques sobre la col·lecció <code>users</code>, incloent l'ús dels índexs.</p>
</div><h2>Conclusió</h2>
<div class='index'><p>Els índexs són una eina poderosa a MongoDB que poden millorar significativament el rendiment de les consultes. Entendre com crear i gestionar diferents tipus d'índexs, com ara índexs de camp únic, compostos, únics, esparsos i TTL, és crucial per optimitzar les operacions de la teva base de dades. Sempre considera els compromisos entre el rendiment de lectura i el rendiment d'escriptura, així com els requisits d'emmagatzematge addicional quan utilitzis índexs.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
