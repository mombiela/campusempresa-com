<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proves i Depuració</title>

    <link rel="alternate" href="https://campusempresa.com/es/mongodb/testing-and-debugging" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/mongodb/testing-and-debugging" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/mongodb/testing-and-debugging" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/mongodb/testing-and-debugging" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='implementing-features'>&#x25C4; Implementant Funcionalitats</a></div><div class='col-6 text-end'><a href='deploying-the-application'>Desplegant l'Aplicació &#x25BA;</a></div></div><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>Les proves i la depuració són aspectes crucials del treball amb qualsevol base de dades, incloent MongoDB. Aquesta secció et guiarà a través dels conceptes bàsics de les proves i la depuració d'aplicacions MongoDB, progressant cap a tècniques i eines més avançades.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Proves</strong>: El procés de verificar que les teves operacions MongoDB funcionen com s'espera.</li>
<li><strong>Depuració</strong>: El procés d'identificar i solucionar problemes en les teves operacions MongoDB.</li>
</ul>
</div><h1>Configuració d'un Entorn de Proves</h1>
<div class='content'><p>Abans de començar a fer proves, necessites un entorn controlat on puguis executar proves de manera segura sense afectar les teves dades de producció.</p>
<ul>
<li><strong>Utilitza una base de dades separada</strong>: Crea una base de dades separada per a finalitats de prova.</li>
<li><strong>Dades simulades</strong>: Utilitza dades simulades que s'assemblin a les teves dades de producció però que no continguin informació sensible.</li>
</ul>
</div><h2>Exemple: Creació d'una Base de Dades de Prova</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHRlc3REYXRhYmFzZQpkYi5jcmVhdGVDb2xsZWN0aW9uKCJ0ZXN0Q29sbGVjdGlvbiIp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use testDatabase
db.createCollection(&quot;testCollection&quot;)</pre></div><div class='content'></div><h1>Escriure Proves</h1>
<div class='content'><p>Escriure proves implica crear scripts que realitzin operacions a les teves col·leccions MongoDB i verifiquin els resultats.</p>
</div><h2>Exemple Bàsic de Prova</h2>
<div class='content'><p>Aquí tens un exemple senzill utilitzant JavaScript i la shell de MongoDB per provar una operació d'inserció:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29ubmVjdGEndCBhIGxhIGJhc2UgZGUgZGFkZXMgZGUgcHJvdmEKdXNlIHRlc3REYXRhYmFzZQoKLy8gSW5zZXJlaXggdW4gZG9jdW1lbnQgYSBsYSB0ZXN0Q29sbGVjdGlvbgpkYi50ZXN0Q29sbGVjdGlvbi5pbnNlcnRPbmUoeyBuYW1lOiAiQWxpY2UiLCBhZ2U6IDMwIH0pCgovLyBWZXJpZmljYSBxdWUgZWwgZG9jdW1lbnQgaGEgZXN0YXQgaW5zZXJpdApjb25zdCByZXN1bHQgPSBkYi50ZXN0Q29sbGVjdGlvbi5maW5kT25lKHsgbmFtZTogIkFsaWNlIiB9KQppZiAocmVzdWx0ICYmIHJlc3VsdC5hZ2UgPT09IDMwKSB7CiAgICBwcmludCgiUHJvdmEgc3VwZXJhZGEhIikKfSBlbHNlIHsKICAgIHByaW50KCJQcm92YSBmYWxsaWRhISIpCn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Connecta't a la base de dades de prova
use testDatabase

// Insereix un document a la testCollection
db.testCollection.insertOne({ name: &quot;Alice&quot;, age: 30 })

// Verifica que el document ha estat inserit
const result = db.testCollection.findOne({ name: &quot;Alice&quot; })
if (result &amp;&amp; result.age === 30) {
    print(&quot;Prova superada!&quot;)
} else {
    print(&quot;Prova fallida!&quot;)
}</pre></div><div class='content'></div><h1>Proves Automatitzades</h1>
<div class='content'><p>Els marcs de proves automatitzades poden ajudar-te a executar proves de manera més eficient. Els marcs populars inclouen Mocha per a aplicacions Node.js.</p>
</div><h2>Exemple: Utilitzant Mocha per a Proves</h2>
<div class='content'><p>Primer, instal·la Mocha i el controlador MongoDB per a Node.js:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgbW9jaGEgbW9uZ29kYiAtLXNhdmUtZGV2"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install mocha mongodb --save-dev</pre></div><div class='content'><p>Després, crea un fitxer de prova <code>test.js</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBNb25nb0NsaWVudCB9ID0gcmVxdWlyZSgnbW9uZ29kYicpOwpjb25zdCBhc3NlcnQgPSByZXF1aXJlKCdhc3NlcnQnKTsKCmRlc2NyaWJlKCdQcm92ZXMgTW9uZ29EQicsIGZ1bmN0aW9uKCkgewogICAgbGV0IGNsaWVudDsKICAgIGxldCBkYjsKCiAgICBiZWZvcmUoYXN5bmMgZnVuY3Rpb24oKSB7CiAgICAgICAgY2xpZW50ID0gYXdhaXQgTW9uZ29DbGllbnQuY29ubmVjdCgnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNycsIHsgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLCB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSk7CiAgICAgICAgZGIgPSBjbGllbnQuZGIoJ3Rlc3REYXRhYmFzZScpOwogICAgfSk7CgogICAgYWZ0ZXIoYXN5bmMgZnVuY3Rpb24oKSB7CiAgICAgICAgYXdhaXQgY2xpZW50LmNsb3NlKCk7CiAgICB9KTsKCiAgICBpdCgnaGF1cmlhIGRcJ2luc2VyaXIgdW4gZG9jdW1lbnQnLCBhc3luYyBmdW5jdGlvbigpIHsKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCd0ZXN0Q29sbGVjdGlvbicpLmluc2VydE9uZSh7IG5hbWU6ICdCb2InLCBhZ2U6IDI1IH0pOwogICAgICAgIGFzc2VydC5zdHJpY3RFcXVhbChyZXN1bHQuaW5zZXJ0ZWRDb3VudCwgMSk7CiAgICB9KTsKCiAgICBpdCgnaGF1cmlhIGRlIHRyb2JhciB1biBkb2N1bWVudCcsIGFzeW5jIGZ1bmN0aW9uKCkgewogICAgICAgIGNvbnN0IGRvYyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ3Rlc3RDb2xsZWN0aW9uJykuZmluZE9uZSh7IG5hbWU6ICdCb2InIH0pOwogICAgICAgIGFzc2VydC5zdHJpY3RFcXVhbChkb2MuYWdlLCAyNSk7CiAgICB9KTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { MongoClient } = require('mongodb');
const assert = require('assert');

describe('Proves MongoDB', function() {
    let client;
    let db;

    before(async function() {
        client = await MongoClient.connect('mongodb://localhost:27017', { useNewUrlParser: true, useUnifiedTopology: true });
        db = client.db('testDatabase');
    });

    after(async function() {
        await client.close();
    });

    it('hauria d\'inserir un document', async function() {
        const result = await db.collection('testCollection').insertOne({ name: 'Bob', age: 25 });
        assert.strictEqual(result.insertedCount, 1);
    });

    it('hauria de trobar un document', async function() {
        const doc = await db.collection('testCollection').findOne({ name: 'Bob' });
        assert.strictEqual(doc.age, 25);
    });
});</pre></div><div class='content'><p>Executa les proves utilitzant Mocha:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnB4IG1vY2hhIHRlc3QuanM="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npx mocha test.js</pre></div><div class='content'></div><h1>Tècniques de Depuració</h1>
<div class='content'><p>La depuració implica identificar i solucionar problemes en les teves operacions MongoDB. Aquí tens algunes tècniques comunes:</p>
<ul>
<li><strong>Registre</strong>: Afegeix registres a la teva aplicació per seguir les operacions i identificar on es produeixen els problemes.</li>
<li><strong>Registres de MongoDB</strong>: Revisa els registres del servidor MongoDB per trobar errors i advertències.</li>
<li><strong>Perfilat</strong>: Utilitza el perfilador integrat de MongoDB per analitzar consultes i operacions lentes.</li>
</ul>
</div><h2>Exemple: Activació del Perfilat</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuc2V0UHJvZmlsaW5nTGV2ZWwoMik="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.setProfilingLevel(2)</pre></div><div class='content'></div><h2>Exemple: Revisió de Registres</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGFpbCAtZiAvdmFyL2xvZy9tb25nb2RiL21vbmdvZC5sb2c="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>tail -f /var/log/mongodb/mongod.log</pre></div><div class='content'></div><h1>Problemes Comuns i Solucions</h1>
<div class='content'><ul>
<li><strong>Problemes de Connexió</strong>: Assegura't que el teu servidor MongoDB està en funcionament i accessible.</li>
<li><strong>Rendiment de Consultes</strong>: Utilitza índexs per optimitzar el rendiment de les consultes.</li>
<li><strong>Consistència de Dades</strong>: Assegura't que la teva aplicació gestiona correctament les transaccions per mantenir la consistència de les dades.</li>
</ul>
</div><h2>Exemple: Creació d'un Índex</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIudGVzdENvbGxlY3Rpb24uY3JlYXRlSW5kZXgoeyBuYW1lOiAxIH0p"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.testCollection.createIndex({ name: 1 })</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Les proves i la depuració són habilitats essencials per a qualsevol desenvolupador MongoDB. Configurant un entorn de proves adequat, escrivint proves automatitzades i emprant tècniques de depuració efectives, pots assegurar-te que les teves aplicacions MongoDB siguin fiables i rendibles. Recorda sempre monitoritzar els registres de MongoDB i utilitzar eines de perfilat per mantenir les teves operacions de base de dades funcionant sense problemes.</p>
</div><div class='row navigation'><div class='col-6'><a href='implementing-features'>&#x25C4; Implementant Funcionalitats</a></div><div class='col-6 text-end'><a href='deploying-the-application'>Desplegant l'Aplicació &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
