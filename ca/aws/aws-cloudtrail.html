<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS CloudTrail</title>

    <link rel="alternate" href="https://campusempresa.com/es/aws/aws-cloudtrail" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/aws/aws-cloudtrail" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/aws/aws-cloudtrail" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/aws/aws-cloudtrail" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='amazon-cloudwatch'>&#x25C4;Amazon CloudWatch</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">AWS CloudTrail</a>
	</div>
	<div class='col-4 text-end'>
					<a href='aws-config'>AWS Config &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció a AWS CloudTrail</h1>
<div class='content'><p>AWS CloudTrail és un servei que permet la governança, el compliment normatiu i l'auditoria operativa i de riscos del teu compte AWS. Amb CloudTrail, pots registrar, monitoritzar contínuament i conservar l'activitat del compte relacionada amb accions a tota la teva infraestructura AWS.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Esdeveniment</strong>: Un registre d'una activitat en el teu compte AWS. Els esdeveniments inclouen accions realitzades a la Consola de Gestió d'AWS, AWS SDKs, eines de línia de comandes i altres serveis d'AWS.</li>
<li><strong>Trail</strong>: Una configuració que permet la lliurament d'esdeveniments com a fitxers de registre a un bucket d'Amazon S3.</li>
<li><strong>Esdeveniments de Gestió</strong>: Proporcionen informació sobre operacions de gestió que es realitzen en recursos del teu compte AWS.</li>
<li><strong>Esdeveniments de Dades</strong>: Proporcionen informació sobre operacions de recursos realitzades en o dins d'un recurs.</li>
<li><strong>Esdeveniments d'Insights</strong>: Detecten activitat inusual en el teu compte AWS.</li>
</ul>
</div><h1>Configuració d'AWS CloudTrail</h1>
<h2>Creació d'un Trail</h2>
<div class='content'><ol>
<li>
<p><strong>Navegar a CloudTrail a la Consola de Gestió d'AWS</strong>:</p>
<ul>
<li>Ves a la Consola de Gestió d'AWS.</li>
<li>Cerca i selecciona &quot;CloudTrail&quot;.</li>
</ul>
</li>
<li>
<p><strong>Crear un Trail</strong>:</p>
<ul>
<li>Fes clic a &quot;Create trail&quot;.</li>
<li>Introdueix un nom per al teu trail.</li>
<li>Tria si vols aplicar el trail a totes les regions.</li>
<li>Especifica un bucket S3 per emmagatzemar els teus fitxers de registre.</li>
</ul>
</li>
<li>
<p><strong>Configurar els Paràmetres del Trail</strong>:</p>
<ul>
<li>Activa la validació de fitxers de registre.</li>
<li>Tria si vols habilitar CloudWatch Logs.</li>
<li>Especifica el grup de registres i el rol IAM per a CloudWatch Logs.</li>
</ul>
</li>
<li>
<p><strong>Revisar i Crear</strong>:</p>
<ul>
<li>Revisa els teus paràmetres.</li>
<li>Fes clic a &quot;Create trail&quot;.</li>
</ul>
</li>
</ol>
</div><h2>Exemple: Creació d'un Trail utilitzant AWS CLI</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNsb3VkdHJhaWwgY3JlYXRlLXRyYWlsIC0tbmFtZSBteS10cmFpbCAtLXMzLWJ1Y2tldC1uYW1lIG15LWJ1Y2tldCAtLWlzLW11bHRpLXJlZ2lvbi10cmFpbA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws cloudtrail create-trail --name my-trail --s3-bucket-name my-bucket --is-multi-region-trail</pre></div><div class='content'></div><h1>Visualització i Anàlisi dels Registres de CloudTrail</h1>
<h2>Accés als Registres a S3</h2>
<div class='content'><ul>
<li>Navega al bucket S3 especificat durant la creació del trail.</li>
<li>Navega pel bucket per trobar els fitxers de registre organitzats per any, mes, dia i hora.</li>
</ul>
</div><h2>Exemple: Visualització de Registres utilitzant AWS CLI</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIHMzIGxzIHMzOi8vbXktYnVja2V0L0FXU0xvZ3MvPGFjY291bnQtaWQ+L0Nsb3VkVHJhaWwv"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws s3 ls s3://my-bucket/AWSLogs/&lt;account-id&gt;/CloudTrail/</pre></div><div class='content'></div><h2>Anàlisi de Registres amb CloudWatch</h2>
<div class='content'><ul>
<li><strong>Habilitar la Integració amb CloudWatch Logs</strong>: Això es pot fer durant la creació del trail o editant un trail existent.</li>
<li><strong>Crear Mètriques i Alarmes</strong>: Utilitza CloudWatch per crear mètriques i establir alarmes basades en esdeveniments específics.</li>
</ul>
</div><h2>Exemple: Creació d'un Filtre de Mètriques</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGxvZ3MgcHV0LW1ldHJpYy1maWx0ZXIgXAogIC0tbG9nLWdyb3VwLW5hbWUgQ2xvdWRUcmFpbC9EZWZhdWx0TG9nR3JvdXAgXAogIC0tZmlsdGVyLW5hbWUgVW5hdXRob3JpemVkQVBJQ2FsbHMgXAogIC0tZmlsdGVyLXBhdHRlcm4gJ3sgKCQuZXJyb3JDb2RlID0gIipVbmF1dGhvcml6ZWRPcGVyYXRpb24iKSB8fCAoJC5lcnJvckNvZGUgPSAiQWNjZXNzRGVuaWVkKiIpIH0nIFwKICAtLW1ldHJpYy10cmFuc2Zvcm1hdGlvbnMgbWV0cmljTmFtZT1VbmF1dGhvcml6ZWRBUElDYWxscyxtZXRyaWNOYW1lc3BhY2U9Q2xvdWRUcmFpbE1ldHJpY3MsbWV0cmljVmFsdWU9MQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws logs put-metric-filter \
  --log-group-name CloudTrail/DefaultLogGroup \
  --filter-name UnauthorizedAPICalls \
  --filter-pattern '{ ($.errorCode = &quot;*UnauthorizedOperation&quot;) || ($.errorCode = &quot;AccessDenied*&quot;) }' \
  --metric-transformations metricName=UnauthorizedAPICalls,metricNamespace=CloudTrailMetrics,metricValue=1</pre></div><div class='content'></div><h1>Funcions Avançades de CloudTrail</h1>
<h2>CloudTrail Insights</h2>
<div class='content'><ul>
<li><strong>Detectar Anomalies</strong>: CloudTrail Insights t'ajuda a identificar activitat operativa inusual en el teu compte AWS.</li>
<li><strong>Habilitar Insights</strong>: Això es pot fer a través de la consola de CloudTrail editant un trail existent i habilitant Insights.</li>
</ul>
</div><h2>Exemple: Habilitació d'Insights utilitzant AWS CLI</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNsb3VkdHJhaWwgdXBkYXRlLXRyYWlsIC0tbmFtZSBteS10cmFpbCAtLWluc2lnaHQtc2VsZWN0b3JzICdbeyJJbnNpZ2h0VHlwZSI6ICJBcGlDYWxsUmF0ZUluc2lnaHQifV0n"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws cloudtrail update-trail --name my-trail --insight-selectors '[{&quot;InsightType&quot;: &quot;ApiCallRateInsight&quot;}]'</pre></div><div class='content'></div><h2>Integració amb AWS Lambda</h2>
<div class='content'><ul>
<li><strong>Automatitzar Respostes</strong>: Utilitza AWS Lambda per respondre automàticament a esdeveniments específics de CloudTrail.</li>
<li><strong>Exemple d'Ús</strong>: Activar una funció Lambda per desactivar un usuari IAM compromès.</li>
</ul>
</div><h2>Exemple: Activador de Funció Lambda</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJzb3VyY2UiOiBbImF3cy5jbG91ZHRyYWlsIl0sCiAgImRldGFpbC10eXBlIjogWyJBV1MgQVBJIENhbGwgdmlhIENsb3VkVHJhaWwiXSwKICAiZGV0YWlsIjogewogICAgImV2ZW50TmFtZSI6IFsiQ29uc29sZUxvZ2luIl0sCiAgICAiZXJyb3JDb2RlIjogWyJBY2Nlc3NEZW5pZWQiXQogIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;source&quot;: [&quot;aws.cloudtrail&quot;],
  &quot;detail-type&quot;: [&quot;AWS API Call via CloudTrail&quot;],
  &quot;detail&quot;: {
    &quot;eventName&quot;: [&quot;ConsoleLogin&quot;],
    &quot;errorCode&quot;: [&quot;AccessDenied&quot;]
  }
}</pre></div><div class='content'></div><h1>Millors Pràctiques</h1>
<div class='content'><ul>
<li><strong>Habilitar Trails Multi-Regió</strong>: Assegura't de capturar esdeveniments de totes les regions.</li>
<li><strong>Revisar Regularment els Registres</strong>: Revisa periòdicament els registres de CloudTrail per identificar qualsevol activitat inusual.</li>
<li><strong>Integrar amb CloudWatch</strong>: Utilitza CloudWatch per a la monitorització i alertes en temps real.</li>
<li><strong>Assegurar els Buckets S3</strong>: Assegura't que els buckets S3 que emmagatzemen els teus registres de CloudTrail estan degudament assegurats.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>AWS CloudTrail és una eina poderosa per monitoritzar i auditar l'activitat del teu compte AWS. Entenent els seus conceptes clau, configurant trails i aprofitant les funcions avançades, pots millorar la seguretat i el compliment normatiu del teu entorn AWS. Revisar regularment els registres i integrar amb altres serveis AWS com CloudWatch i Lambda pot ajudar-te a mantenir una infraestructura robusta i segura.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='amazon-cloudwatch'>&#x25C4;Amazon CloudWatch</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">AWS CloudTrail</a>
	</div>
	<div class='col-4 text-end'>
					<a href='aws-config'>AWS Config &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
