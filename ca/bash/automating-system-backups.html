<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatització de Còpies de Seguretat del Sistema</title>

    <link rel="alternate" href="https://campusempresa.com/es/bash/automating-system-backups" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/bash/automating-system-backups" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/bash/automating-system-backups" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/bash/automating-system-backups" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>Automatitzar les còpies de seguretat del sistema és una tasca crucial per garantir la integritat i disponibilitat de les dades. En aquesta secció, explorarem com utilitzar scripts Bash per automatitzar el procés de fer còpies de seguretat de fitxers i directoris. Això inclourà la creació de scripts de còpia de seguretat simples, la programació de còpies de seguretat utilitzant cron jobs i la gestió dels fitxers de còpia de seguretat.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Còpia de Seguretat</strong>: Una còpia de les dades emmagatzemada separadament de l'original per prevenir la pèrdua de dades.</li>
<li><strong>Automatització</strong>: Utilitzar scripts i tasques programades per realitzar còpies de seguretat sense intervenció manual.</li>
<li><strong>Cron Jobs</strong>: Tasques programades en sistemes operatius tipus Unix que executen scripts en moments especificats.</li>
</ul>
</div><h1>Creació d'un Script de Còpia de Seguretat Simple</h1>
<div class='content'><p>Per començar, creem un script Bash bàsic que copiï fitxers d'un directori a un altre.</p>
</div><h2>Exemple d'Script</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyEvYmluL2Jhc2gKCiMgRGVmaW5pciBlbHMgZGlyZWN0b3JpcyBkJ29yaWdlbiBpIGRlc3RpbmFjacOzClNPVVJDRV9ESVI9Ii9wYXRoL3RvL3NvdXJjZSIKREVTVF9ESVI9Ii9wYXRoL3RvL2Rlc3RpbmF0aW9uIgoKIyBDcmVhciB1bmEgbWFyY2EgZGUgdGVtcHMKVElNRVNUQU1QPSQoZGF0ZSArIiVZJW0lZCVIJU0lUyIpCgojIENyZWFyIHVuIGRpcmVjdG9yaSBkZSBjw7JwaWEgZGUgc2VndXJldGF0IGFtYiBsYSBtYXJjYSBkZSB0ZW1wcwpCQUNLVVBfRElSPSIke0RFU1RfRElSfS9iYWNrdXBfJHtUSU1FU1RBTVB9Igpta2RpciAtcCAiJEJBQ0tVUF9ESVIiCgojIENvcGlhciBmaXR4ZXJzIGRlbCBkaXJlY3RvcmkgZCdvcmlnZW4gYWwgZGlyZWN0b3JpIGRlIGPDsnBpYSBkZSBzZWd1cmV0YXQKY3AgLXIgIiRTT1VSQ0VfRElSIi8qICIkQkFDS1VQX0RJUiIKCiMgSW1wcmltaXIgdW4gbWlzc2F0Z2UgaW5kaWNhbnQgcXVlIGxhIGPDsnBpYSBkZSBzZWd1cmV0YXQgcydoYSBjb21wbGV0YXQKZWNobyAiQ8OycGlhIGRlIHNlZ3VyZXRhdCBjb21wbGV0YWRhIGFtYiDDqHhpdCBhIGxlcyAkVElNRVNUQU1QIg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#!/bin/bash

# Definir els directoris d'origen i destinaci&oacute;
SOURCE_DIR=&quot;/path/to/source&quot;
DEST_DIR=&quot;/path/to/destination&quot;

# Crear una marca de temps
TIMESTAMP=$(date +&quot;%Y%m%d%H%M%S&quot;)

# Crear un directori de c&ograve;pia de seguretat amb la marca de temps
BACKUP_DIR=&quot;${DEST_DIR}/backup_${TIMESTAMP}&quot;
mkdir -p &quot;$BACKUP_DIR&quot;

# Copiar fitxers del directori d'origen al directori de c&ograve;pia de seguretat
cp -r &quot;$SOURCE_DIR&quot;/* &quot;$BACKUP_DIR&quot;

# Imprimir un missatge indicant que la c&ograve;pia de seguretat s'ha completat
echo &quot;C&ograve;pia de seguretat completada amb &egrave;xit a les $TIMESTAMP&quot;</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><code>#!/bin/bash</code>: Línia shebang per especificar l'intèrpret de l'script.</li>
<li><code>SOURCE_DIR</code> i <code>DEST_DIR</code>: Variables per emmagatzemar els camins dels directoris d'origen i destinació.</li>
<li><code>TIMESTAMP</code>: Genera una marca de temps única per a cada còpia de seguretat.</li>
<li><code>BACKUP_DIR</code>: Combina el directori de destinació amb la marca de temps per crear un directori de còpia de seguretat únic.</li>
<li><code>mkdir -p &quot;$BACKUP_DIR&quot;</code>: Crea el directori de còpia de seguretat.</li>
<li><code>cp -r &quot;$SOURCE_DIR&quot;/* &quot;$BACKUP_DIR&quot;</code>: Copia tots els fitxers del directori d'origen al directori de còpia de seguretat.</li>
<li><code>echo &quot;Còpia de seguretat completada amb èxit a les $TIMESTAMP&quot;</code>: Imprimeix un missatge de confirmació.</li>
</ul>
</div><h1>Programació de Còpies de Seguretat amb Cron Jobs</h1>
<div class='content'><p>Per automatitzar l'execució del nostre script de còpia de seguretat, podem utilitzar cron jobs.</p>
</div><h2>Configuració d'un Cron Job</h2>
<div class='content'><ol>
<li>Obre l'editor de crontab:
<pre><code class="language-bash">crontab -e
</code></pre>
</li>
<li>Afegeix un nou cron job per executar l'script de còpia de seguretat diàriament a les 2 AM:
<pre><code class="language-bash">0 2 * * * /path/to/backup_script.sh
</code></pre>
</li>
</ol>
</div><h2>Explicació</h2>
<div class='content'><ul>
<li><code>0 2 * * *</code>: Expressió cron per executar l'script a les 2 AM cada dia.</li>
<li><code>/path/to/backup_script.sh</code>: Camí a l'script de còpia de seguretat.</li>
</ul>
</div><h1>Gestió dels Fitxers de Còpia de Seguretat</h1>
<div class='content'><p>Amb el temps, els fitxers de còpia de seguretat poden acumular-se i consumir un espai significatiu en disc. És important gestionar aquests fitxers eliminant les còpies de seguretat antigues.</p>
</div><h2>Exemple d'Script amb Neteja</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyEvYmluL2Jhc2gKCiMgRGVmaW5pciBlbHMgZGlyZWN0b3JpcyBkJ29yaWdlbiBpIGRlc3RpbmFjacOzClNPVVJDRV9ESVI9Ii9wYXRoL3RvL3NvdXJjZSIKREVTVF9ESVI9Ii9wYXRoL3RvL2Rlc3RpbmF0aW9uIgoKIyBDcmVhciB1bmEgbWFyY2EgZGUgdGVtcHMKVElNRVNUQU1QPSQoZGF0ZSArIiVZJW0lZCVIJU0lUyIpCgojIENyZWFyIHVuIGRpcmVjdG9yaSBkZSBjw7JwaWEgZGUgc2VndXJldGF0IGFtYiBsYSBtYXJjYSBkZSB0ZW1wcwpCQUNLVVBfRElSPSIke0RFU1RfRElSfS9iYWNrdXBfJHtUSU1FU1RBTVB9Igpta2RpciAtcCAiJEJBQ0tVUF9ESVIiCgojIENvcGlhciBmaXR4ZXJzIGRlbCBkaXJlY3RvcmkgZCdvcmlnZW4gYWwgZGlyZWN0b3JpIGRlIGPDsnBpYSBkZSBzZWd1cmV0YXQKY3AgLXIgIiRTT1VSQ0VfRElSIi8qICIkQkFDS1VQX0RJUiIKCiMgVHJvYmFyIGkgZWxpbWluYXIgY8OycGllcyBkZSBzZWd1cmV0YXQgbcOpcyBhbnRpZ3VlcyBkZSA3IGRpZXMKZmluZCAiJERFU1RfRElSIiAtdHlwZSBkIC1uYW1lICJiYWNrdXBfKiIgLW10aW1lICs3IC1leGVjIHJtIC1yZiB7fSBcOwoKIyBJbXByaW1pciB1biBtaXNzYXRnZSBpbmRpY2FudCBxdWUgbGEgY8OycGlhIGRlIHNlZ3VyZXRhdCBzJ2hhIGNvbXBsZXRhdAplY2hvICJDw7JwaWEgZGUgc2VndXJldGF0IGNvbXBsZXRhZGEgYW1iIMOoeGl0IGEgbGVzICRUSU1FU1RBTVAi"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#!/bin/bash

# Definir els directoris d'origen i destinaci&oacute;
SOURCE_DIR=&quot;/path/to/source&quot;
DEST_DIR=&quot;/path/to/destination&quot;

# Crear una marca de temps
TIMESTAMP=$(date +&quot;%Y%m%d%H%M%S&quot;)

# Crear un directori de c&ograve;pia de seguretat amb la marca de temps
BACKUP_DIR=&quot;${DEST_DIR}/backup_${TIMESTAMP}&quot;
mkdir -p &quot;$BACKUP_DIR&quot;

# Copiar fitxers del directori d'origen al directori de c&ograve;pia de seguretat
cp -r &quot;$SOURCE_DIR&quot;/* &quot;$BACKUP_DIR&quot;

# Trobar i eliminar c&ograve;pies de seguretat m&eacute;s antigues de 7 dies
find &quot;$DEST_DIR&quot; -type d -name &quot;backup_*&quot; -mtime +7 -exec rm -rf {} \;

# Imprimir un missatge indicant que la c&ograve;pia de seguretat s'ha completat
echo &quot;C&ograve;pia de seguretat completada amb &egrave;xit a les $TIMESTAMP&quot;</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><code>find &quot;$DEST_DIR&quot; -type d -name &quot;backup_*&quot; -mtime +7 -exec rm -rf {} \;</code>: Troba i elimina els directoris en el directori de destinació que són més antics de 7 dies.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Automatitzar les còpies de seguretat del sistema utilitzant scripts Bash i cron jobs assegura que les teves dades es facin còpies de seguretat regularment sense intervenció manual. Creant scripts simples, programant-los amb cron i gestionant les còpies de seguretat antigues, pots mantenir un sistema de còpia de seguretat fiable. Això no només estalvia temps, sinó que també proporciona tranquil·litat sabent que les teves dades estan segures.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
