<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unions en C</title>

    <link rel="alternate" href="https://campusempresa.com/es/c/unions" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/c/unions" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/c/unions" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/c/unions" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció a les Unions</h1>
<div class='content'><p>Les unions en C són un tipus de dada especial que permet emmagatzemar diferents tipus de dades en la mateixa ubicació de memòria. Són similars a les estructures però amb una diferència clau: mentre que les estructures assignen memòria separada per a cada membre, les unions utilitzen un únic espai de memòria compartit per a tots els seus membres.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Compartició de Memòria</strong>: Tots els membres d'una unió comparteixen la mateixa ubicació de memòria.</li>
<li><strong>Mida</strong>: La mida d'una unió està determinada per la mida del seu membre més gran.</li>
<li><strong>Accés</strong>: Només es pot accedir a un membre a la vegada, i modificar un membre afectarà els altres.</li>
</ul>
</div><h1>Definició i Ús de les Unions</h1>
<div class='content'><p>Per definir una unió, s'utilitza la paraula clau <code>union</code> seguida del nom de la unió i els seus membres.</p>
</div><h2>Sintaxi</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5pb24gTm9tVW5pbyB7CiAgICB0aXB1c0RlRGFkYTEgbWVtYnJlMTsKICAgIHRpcHVzRGVEYWRhMiBtZW1icmUyOwogICAgLy8gbcOpcyBtZW1icmVzCn07"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>union NomUnio {
    tipusDeDada1 membre1;
    tipusDeDada2 membre2;
    // m&eacute;s membres
};</pre></div><div class='content'></div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+Cgp1bmlvbiBEYWRlcyB7CiAgICBpbnQgaTsKICAgIGZsb2F0IGY7CiAgICBjaGFyIHN0clsyMF07Cn07CgppbnQgbWFpbigpIHsKICAgIHVuaW9uIERhZGVzIGRhZGVzOwoKICAgIGRhZGVzLmkgPSAxMDsKICAgIHByaW50ZigiZGFkZXMuaTogJWRcbiIsIGRhZGVzLmkpOwoKICAgIGRhZGVzLmYgPSAyMjAuNTsKICAgIHByaW50ZigiZGFkZXMuZjogJWZcbiIsIGRhZGVzLmYpOwoKICAgIHN0cmNweShkYWRlcy5zdHIsICJQcm9ncmFtYWNpw7MgZW4gQyIpOwogICAgcHJpbnRmKCJkYWRlcy5zdHI6ICVzXG4iLCBkYWRlcy5zdHIpOwoKICAgIHJldHVybiAwOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

union Dades {
    int i;
    float f;
    char str[20];
};

int main() {
    union Dades dades;

    dades.i = 10;
    printf(&quot;dades.i: %d\n&quot;, dades.i);

    dades.f = 220.5;
    printf(&quot;dades.f: %f\n&quot;, dades.f);

    strcpy(dades.str, &quot;Programaci&oacute; en C&quot;);
    printf(&quot;dades.str: %s\n&quot;, dades.str);

    return 0;
}</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>Superposició de Memòria</strong>: Quan <code>dades.i</code> es fixa a 10, ocupa la memòria compartida. Quan <code>dades.f</code> es fixa a 220.5, sobreescriu la memòria utilitzada per <code>dades.i</code>. Finalment, quan <code>dades.str</code> es fixa a &quot;Programació en C&quot;, sobreescriu la memòria utilitzada tant per <code>dades.i</code> com per <code>dades.f</code>.</li>
<li><strong>Sortida</strong>: Només l'últim valor assignat és vàlid. Accedir a altres membres després de fixar un nou valor pot portar a resultats inesperats.</li>
</ul>
</div><h1>Usos Pràctics</h1>
<div class='content'><p>Les unions són particularment útils en escenaris on necessites treballar amb diferents tipus de dades però només un tipus s'utilitza en un moment donat.</p>
</div><h2>Exemple: Gestió de Diferents Tipus de Dades</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgplbnVtIFRpcHVzRGVEYWRhIHsgRU5URVIsIEZMT1RBTlQsIENBREVOQSB9OwoKc3RydWN0IERhZGVzIHsKICAgIGVudW0gVGlwdXNEZURhZGEgdGlwdXM7CiAgICB1bmlvbiB7CiAgICAgICAgaW50IGk7CiAgICAgICAgZmxvYXQgZjsKICAgICAgICBjaGFyIHN0clsyMF07CiAgICB9IHZhbG9yOwp9OwoKdm9pZCBpbXByaW1pckRhZGVzKHN0cnVjdCBEYWRlcyBkYWRlcykgewogICAgc3dpdGNoIChkYWRlcy50aXB1cykgewogICAgICAgIGNhc2UgRU5URVI6CiAgICAgICAgICAgIHByaW50ZigiRW50ZXI6ICVkXG4iLCBkYWRlcy52YWxvci5pKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBGTE9UQU5UOgogICAgICAgICAgICBwcmludGYoIkZsb3RhbnQ6ICVmXG4iLCBkYWRlcy52YWxvci5mKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBDQURFTkE6CiAgICAgICAgICAgIHByaW50ZigiQ2FkZW5hOiAlc1xuIiwgZGFkZXMudmFsb3Iuc3RyKTsKICAgICAgICAgICAgYnJlYWs7CiAgICB9Cn0KCmludCBtYWluKCkgewogICAgc3RydWN0IERhZGVzIGRhZGVzMTsKICAgIGRhZGVzMS50aXB1cyA9IEVOVEVSOwogICAgZGFkZXMxLnZhbG9yLmkgPSAxMDsKICAgIGltcHJpbWlyRGFkZXMoZGFkZXMxKTsKCiAgICBzdHJ1Y3QgRGFkZXMgZGFkZXMyOwogICAgZGFkZXMyLnRpcHVzID0gRkxPVEFOVDsKICAgIGRhZGVzMi52YWxvci5mID0gMjIwLjU7CiAgICBpbXByaW1pckRhZGVzKGRhZGVzMik7CgogICAgc3RydWN0IERhZGVzIGRhZGVzMzsKICAgIGRhZGVzMy50aXB1cyA9IENBREVOQTsKICAgIHN0cmNweShkYWRlczMudmFsb3Iuc3RyLCAiUHJvZ3JhbWFjacOzIGVuIEMiKTsKICAgIGltcHJpbWlyRGFkZXMoZGFkZXMzKTsKCiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

enum TipusDeDada { ENTER, FLOTANT, CADENA };

struct Dades {
    enum TipusDeDada tipus;
    union {
        int i;
        float f;
        char str[20];
    } valor;
};

void imprimirDades(struct Dades dades) {
    switch (dades.tipus) {
        case ENTER:
            printf(&quot;Enter: %d\n&quot;, dades.valor.i);
            break;
        case FLOTANT:
            printf(&quot;Flotant: %f\n&quot;, dades.valor.f);
            break;
        case CADENA:
            printf(&quot;Cadena: %s\n&quot;, dades.valor.str);
            break;
    }
}

int main() {
    struct Dades dades1;
    dades1.tipus = ENTER;
    dades1.valor.i = 10;
    imprimirDades(dades1);

    struct Dades dades2;
    dades2.tipus = FLOTANT;
    dades2.valor.f = 220.5;
    imprimirDades(dades2);

    struct Dades dades3;
    dades3.tipus = CADENA;
    strcpy(dades3.valor.str, &quot;Programaci&oacute; en C&quot;);
    imprimirDades(dades3);

    return 0;
}</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>Enum per al Tipus</strong>: Un <code>enum</code> s'utilitza per fer un seguiment del tipus de dada actualment emmagatzemat a la unió.</li>
<li><strong>Sentència Switch</strong>: La funció <code>imprimirDades</code> utilitza una sentència switch per imprimir el tipus de dada correcte basant-se en el camp <code>tipus</code>.</li>
</ul>
</div><h1>Avantatges i Desavantatges</h1>
<h2>Avantatges</h2>
<div class='content'><ul>
<li><strong>Eficiència de Memòria</strong>: Les unions estalvien memòria compartint el mateix espai per a diferents membres.</li>
<li><strong>Flexibilitat</strong>: Proporcionen una manera de gestionar diferents tipus de dades en una sola variable.</li>
</ul>
</div><h2>Desavantatges</h2>
<div class='content'><ul>
<li><strong>Complexitat</strong>: Gestionar unions pot ser complex, especialment quan es fa un seguiment del membre actualment actiu.</li>
<li><strong>Corruptió de Dades</strong>: Accedir incorrectament a un membre pot portar a la corrupció de dades i comportament indefinit.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Les unions en C són una característica poderosa que permet un ús eficient de la memòria compartint el mateix espai de memòria entre diferents tipus de dades. Són particularment útils en escenaris on només es necessita un de diversos tipus de dades a la vegada. No obstant això, requereixen una gestió acurada per evitar la corrupció de dades i assegurar un comportament correcte del programa. Entendre les unions i el seu ús adequat és essencial per a la programació avançada en C i pot portar a un codi més eficient i flexible.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
