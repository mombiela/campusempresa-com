<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestió d'Errors en C</title>

    <link rel="alternate" href="https://campusempresa.com/es/c/error-handling" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/c/error-handling" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/c/error-handling" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/c/error-handling" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='commenting-and-documentation'>&#x25C4;Comentaris i Documentació</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Gestió d'Errors en C</a>
	</div>
	<div class='col-4 text-end'>
					<a href='modular-programming'>Programació Modular &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció a la Gestió d'Errors</h1>
<div class='content'><p>La gestió d'errors és un aspecte crític de la programació que assegura que el teu codi pugui manejar situacions inesperades i errors de manera elegant. En C, la gestió d'errors no és tan senzilla com en alguns llenguatges d'alt nivell, però és igualment important. Aquesta secció et guiarà des de tècniques bàsiques fins a tècniques avançades de gestió d'errors en C.</p>
</div><h1>Gestió d'Errors Bàsica</h1>
<h2>Ús de Valors de Retorn</h2>
<div class='content'><p>Una de les maneres més simples de gestionar errors en C és utilitzant els valors de retorn de les funcions.</p>
<ul>
<li><strong>Funcions de la Biblioteca Estàndard</strong>: Moltes funcions de la biblioteca estàndard retornen valors específics per indicar èxit o fracàs.</li>
<li><strong>Funcions Personalitzades</strong>: Pots dissenyar les teves pròpies funcions per retornar codis d'error.</li>
</ul>
<h4>Exemple: Comprovació de Valors de Retorn</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgppbnQgZGl2aWRlKGludCBhLCBpbnQgYiwgaW50ICpyZXN1bHQpIHsKICAgIGlmIChiID09IDApIHsKICAgICAgICByZXR1cm4gLTE7IC8vIENvZGkgZCdlcnJvciBwZXIgZGl2aXNpw7MgcGVyIHplcm8KICAgIH0KICAgICpyZXN1bHQgPSBhIC8gYjsKICAgIHJldHVybiAwOyAvLyDDiHhpdAp9CgppbnQgbWFpbigpIHsKICAgIGludCByZXN1bHQ7CiAgICBpbnQgc3RhdHVzID0gZGl2aWRlKDEwLCAwLCAmcmVzdWx0KTsKICAgIAogICAgaWYgKHN0YXR1cyAhPSAwKSB7CiAgICAgICAgcHJpbnRmKCJFcnJvcjogRGl2aXNpw7MgcGVyIHplcm9cbiIpOwogICAgfSBlbHNlIHsKICAgICAgICBwcmludGYoIlJlc3VsdGF0OiAlZFxuIiwgcmVzdWx0KTsKICAgIH0KICAgIAogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

int divide(int a, int b, int *result) {
    if (b == 0) {
        return -1; // Codi d'error per divisi&oacute; per zero
    }
    *result = a / b;
    return 0; // &Egrave;xit
}

int main() {
    int result;
    int status = divide(10, 0, &amp;result);
    
    if (status != 0) {
        printf(&quot;Error: Divisi&oacute; per zero\n&quot;);
    } else {
        printf(&quot;Resultat: %d\n&quot;, result);
    }
    
    return 0;
}</pre></div><div class='content'></div><h2>Ús de `errno`</h2>
<div class='content'><p>La variable <code>errno</code> s'utilitza en C per indicar condicions d'error per a moltes funcions de la biblioteca estàndard.</p>
<ul>
<li><strong>Fitxer de Capçalera</strong>: Inclou <code>&lt;errno.h&gt;</code> per utilitzar <code>errno</code>.</li>
<li><strong>Codis d'Error</strong>: Codis d'error estàndard com <code>EINVAL</code>, <code>ENOMEM</code>, etc.</li>
</ul>
<h4>Exemple: Ús de <code>errno</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxlcnJuby5oPgojaW5jbHVkZSA8c3RyaW5nLmg+CgppbnQgbWFpbigpIHsKICAgIEZJTEUgKmZpbGUgPSBmb3Blbigibm9uZXhpc3RlbnQudHh0IiwgInIiKTsKICAgIAogICAgaWYgKGZpbGUgPT0gTlVMTCkgewogICAgICAgIHByaW50ZigiRXJyb3Igb2JyaW50IGVsIGZpdHhlcjogJXNcbiIsIHN0cmVycm9yKGVycm5vKSk7CiAgICB9IGVsc2UgewogICAgICAgIGZjbG9zZShmaWxlKTsKICAgIH0KICAgIAogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;errno.h&gt;
#include &lt;string.h&gt;

int main() {
    FILE *file = fopen(&quot;nonexistent.txt&quot;, &quot;r&quot;);
    
    if (file == NULL) {
        printf(&quot;Error obrint el fitxer: %s\n&quot;, strerror(errno));
    } else {
        fclose(file);
    }
    
    return 0;
}</pre></div><div class='content'></div><h1>Gestió d'Errors Intermèdia</h1>
<h2>Codis d'Error Personalitzats</h2>
<div class='content'><p>Crear codis d'error personalitzats pot ajudar a fer que la teva gestió d'errors sigui més descriptiva i manejable.</p>
<ul>
<li><strong>Definir Codis d'Error</strong>: Utilitza <code>#define</code> per crear codis d'error personalitzats.</li>
<li><strong>Funcions de Gestió d'Errors</strong>: Crea funcions per gestionar i mostrar errors.</li>
</ul>
<h4>Exemple: Codis d'Error Personalitzats</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgojZGVmaW5lIFNVQ0NFU1MgMAojZGVmaW5lIEVSUk9SX0RJVklTSU9OX0JZX1pFUk8gMQojZGVmaW5lIEVSUk9SX05FR0FUSVZFX05VTUJFUiAyCgppbnQgZGl2aWRlKGludCBhLCBpbnQgYiwgaW50ICpyZXN1bHQpIHsKICAgIGlmIChiID09IDApIHsKICAgICAgICByZXR1cm4gRVJST1JfRElWSVNJT05fQllfWkVSTzsKICAgIH0KICAgICpyZXN1bHQgPSBhIC8gYjsKICAgIHJldHVybiBTVUNDRVNTOwp9Cgp2b2lkIGhhbmRsZV9lcnJvcihpbnQgZXJyb3JfY29kZSkgewogICAgc3dpdGNoIChlcnJvcl9jb2RlKSB7CiAgICAgICAgY2FzZSBFUlJPUl9ESVZJU0lPTl9CWV9aRVJPOgogICAgICAgICAgICBwcmludGYoIkVycm9yOiBEaXZpc2nDsyBwZXIgemVyb1xuIik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgRVJST1JfTkVHQVRJVkVfTlVNQkVSOgogICAgICAgICAgICBwcmludGYoIkVycm9yOiBOw7ptZXJvIG5lZ2F0aXVcbiIpOwogICAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICBwcmludGYoIkVycm9yIGRlc2NvbmVndXRcbiIpOwogICAgfQp9CgppbnQgbWFpbigpIHsKICAgIGludCByZXN1bHQ7CiAgICBpbnQgc3RhdHVzID0gZGl2aWRlKDEwLCAwLCAmcmVzdWx0KTsKICAgIAogICAgaWYgKHN0YXR1cyAhPSBTVUNDRVNTKSB7CiAgICAgICAgaGFuZGxlX2Vycm9yKHN0YXR1cyk7CiAgICB9IGVsc2UgewogICAgICAgIHByaW50ZigiUmVzdWx0YXQ6ICVkXG4iLCByZXN1bHQpOwogICAgfQogICAgCiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

#define SUCCESS 0
#define ERROR_DIVISION_BY_ZERO 1
#define ERROR_NEGATIVE_NUMBER 2

int divide(int a, int b, int *result) {
    if (b == 0) {
        return ERROR_DIVISION_BY_ZERO;
    }
    *result = a / b;
    return SUCCESS;
}

void handle_error(int error_code) {
    switch (error_code) {
        case ERROR_DIVISION_BY_ZERO:
            printf(&quot;Error: Divisi&oacute; per zero\n&quot;);
            break;
        case ERROR_NEGATIVE_NUMBER:
            printf(&quot;Error: N&uacute;mero negatiu\n&quot;);
            break;
        default:
            printf(&quot;Error desconegut\n&quot;);
    }
}

int main() {
    int result;
    int status = divide(10, 0, &amp;result);
    
    if (status != SUCCESS) {
        handle_error(status);
    } else {
        printf(&quot;Resultat: %d\n&quot;, result);
    }
    
    return 0;
}</pre></div><div class='content'></div><h1>Gestió d'Errors Avançada</h1>
<h2>Ús de `setjmp` i `longjmp`</h2>
<div class='content'><p>Per a una gestió d'errors més complexa, C proporciona <code>setjmp</code> i <code>longjmp</code> per a salts no locals.</p>
<ul>
<li><strong><code>setjmp</code></strong>: Desa l'entorn actual (context de la pila).</li>
<li><strong><code>longjmp</code></strong>: Restaura l'entorn desat, efectivament saltant enrere al punt on es va cridar <code>setjmp</code>.</li>
</ul>
<h4>Exemple: <code>setjmp</code> i <code>longjmp</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzZXRqbXAuaD4KCmptcF9idWYgYnVmOwoKdm9pZCBzZWNvbmQoKSB7CiAgICBwcmludGYoInNlY29uZFxuIik7IC8vIGltcHJpbWVpeAogICAgbG9uZ2ptcChidWYsIDEpOyAgICAvLyBzYWx0YSBlbnJlcmUgYWwgcHVudCBvbiBlcyB2YSBjcmlkYXIgc2V0am1wIC0gZmVudCBxdWUgc2V0am1wIGFyYSByZXRvcm5pIDEKfQoKdm9pZCBmaXJzdCgpIHsKICAgIHNlY29uZCgpOwogICAgcHJpbnRmKCJmaXJzdFxuIik7IC8vIG5vIHMnaW1wcmltZWl4Cn0KCmludCBtYWluKCkgewogICAgaWYgKHNldGptcChidWYpKSB7CiAgICAgICAgcHJpbnRmKCJtYWluXG4iKTsgLy8gaW1wcmltZWl4CiAgICB9IGVsc2UgewogICAgICAgIGZpcnN0KCk7ICAgICAgICAgIC8vIG5vIHJldG9ybmEKICAgIH0KICAgIAogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;setjmp.h&gt;

jmp_buf buf;

void second() {
    printf(&quot;second\n&quot;); // imprimeix
    longjmp(buf, 1);    // salta enrere al punt on es va cridar setjmp - fent que setjmp ara retorni 1
}

void first() {
    second();
    printf(&quot;first\n&quot;); // no s'imprimeix
}

int main() {
    if (setjmp(buf)) {
        printf(&quot;main\n&quot;); // imprimeix
    } else {
        first();          // no retorna
    }
    
    return 0;
}</pre></div><div class='content'></div><h2>Gestió d'Errors en Projectes Grans</h2>
<div class='content'><p>En projectes grans, la gestió d'errors pot esdevenir complexa. Aquí tens algunes millors pràctiques:</p>
<ul>
<li><strong>Gestió Centralitzada d'Errors</strong>: Utilitza un mecanisme centralitzat de gestió d'errors.</li>
<li><strong>Registre d'Errors</strong>: Implementa el registre d'errors per mantenir un seguiment dels errors.</li>
<li><strong>Codis d'Error Consistents</strong>: Mantingues la consistència en els codis d'error a tot el projecte.</li>
</ul>
</div><h1>Resum</h1>
<div class='content'><p>La gestió d'errors en C va des de comprovacions simples de valors de retorn fins a mecanismes més complexos com <code>setjmp</code> i <code>longjmp</code>. Entendre i implementar estratègies efectives de gestió d'errors és crucial per construir aplicacions robustes i fiables. Utilitzant valors de retorn, <code>errno</code>, codis d'error personalitzats i tècniques avançades, pots assegurar-te que els teus programes gestionin els errors de manera elegant i proporcionin retroalimentació significativa als usuaris i desenvolupadors.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='commenting-and-documentation'>&#x25C4;Comentaris i Documentació</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Gestió d'Errors en C</a>
	</div>
	<div class='col-4 text-end'>
					<a href='modular-programming'>Programació Modular &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
