<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arrays dinàmics en C</title>

    <link rel="alternate" href="https://campusempresa.com/es/c/dynamic-arrays" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/c/dynamic-arrays" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/c/dynamic-arrays" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/c/dynamic-arrays" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>Els arrays dinàmics són un concepte crucial en la programació en C, ja que permeten crear arrays la mida dels quals es pot determinar en temps d'execució. Aquesta flexibilitat és essencial per gestionar dades que poden canviar de mida durant l'execució d'un programa.</p>
</div><h1>Introducció als Arrays Dinàmics</h1>
<div class='content'><p>Els arrays dinàmics es diferencien dels arrays estàtics en què la seva mida no està fixada en temps de compilació. En canvi, la memòria per als arrays dinàmics s'assigna durant el temps d'execució utilitzant punters i funcions específiques de la biblioteca estàndard de C.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Arrays Estàtics</strong>: Arrays amb una mida fixa determinada en temps de compilació.</li>
<li><strong>Arrays Dinàmics</strong>: Arrays la mida dels quals es pot determinar i modificar en temps d'execució.</li>
<li><strong>Assignació de Memòria</strong>: Utilització de funcions com <code>malloc</code>, <code>calloc</code>, <code>realloc</code> i <code>free</code> per gestionar la memòria per als arrays dinàmics.</li>
</ul>
</div><h1>Funcions d'Assignació de Memòria</h1>
<div class='content'><p>Per treballar amb arrays dinàmics, cal entendre les següents funcions d'assignació de memòria:</p>
<ul>
<li><code>malloc</code>: Assigna un nombre especificat de bytes i retorna un punter al primer byte.</li>
<li><code>calloc</code>: Assigna memòria per a un array d'elements, els inicialitza a zero i retorna un punter a la memòria.</li>
<li><code>realloc</code>: Canvia la mida del bloc de memòria prèviament assignat.</li>
<li><code>free</code>: Desassigna la memòria prèviament assignada per <code>malloc</code>, <code>calloc</code> o <code>realloc</code>.</li>
</ul>
</div><h2>Exemple: Utilitzant `malloc` i `free`</h2>
<div class='content'><p>Aquí teniu un exemple senzill que demostra com crear i alliberar un array dinàmic utilitzant <code>malloc</code> i <code>free</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRsaWIuaD4KCmludCBtYWluKCkgewogICAgaW50IG47CiAgICBwcmludGYoIkVudGVyIHRoZSBudW1iZXIgb2YgZWxlbWVudHM6ICIpOwogICAgc2NhbmYoIiVkIiwgJm4pOwoKICAgIC8vIEFsbG9jYXRlIG1lbW9yeSBmb3IgbiBpbnRlZ2VycwogICAgaW50ICphcnIgPSAoaW50ICopbWFsbG9jKG4gKiBzaXplb2YoaW50KSk7CiAgICBpZiAoYXJyID09IE5VTEwpIHsKICAgICAgICBwcmludGYoIk1lbW9yeSBhbGxvY2F0aW9uIGZhaWxlZFxuIik7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgLy8gSW5pdGlhbGl6ZSBhbmQgcHJpbnQgdGhlIGFycmF5CiAgICBmb3IgKGludCBpID0gMDsgaSA8IG47IGkrKykgewogICAgICAgIGFycltpXSA9IGkgKyAxOwogICAgICAgIHByaW50ZigiJWQgIiwgYXJyW2ldKTsKICAgIH0KICAgIHByaW50ZigiXG4iKTsKCiAgICAvLyBGcmVlIHRoZSBhbGxvY2F0ZWQgbWVtb3J5CiAgICBmcmVlKGFycik7CgogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main() {
    int n;
    printf(&quot;Enter the number of elements: &quot;);
    scanf(&quot;%d&quot;, &amp;n);

    // Allocate memory for n integers
    int *arr = (int *)malloc(n * sizeof(int));
    if (arr == NULL) {
        printf(&quot;Memory allocation failed\n&quot;);
        return 1;
    }

    // Initialize and print the array
    for (int i = 0; i &lt; n; i++) {
        arr[i] = i + 1;
        printf(&quot;%d &quot;, arr[i]);
    }
    printf(&quot;\n&quot;);

    // Free the allocated memory
    free(arr);

    return 0;
}</pre></div><div class='content'></div><h2>Exemple: Utilitzant `calloc`</h2>
<div class='content'><p><code>calloc</code> és similar a <code>malloc</code> però inicialitza la memòria assignada a zero.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRsaWIuaD4KCmludCBtYWluKCkgewogICAgaW50IG47CiAgICBwcmludGYoIkVudGVyIHRoZSBudW1iZXIgb2YgZWxlbWVudHM6ICIpOwogICAgc2NhbmYoIiVkIiwgJm4pOwoKICAgIC8vIEFsbG9jYXRlIG1lbW9yeSBmb3IgbiBpbnRlZ2VycyBhbmQgaW5pdGlhbGl6ZSB0byB6ZXJvCiAgICBpbnQgKmFyciA9IChpbnQgKiljYWxsb2Mobiwgc2l6ZW9mKGludCkpOwogICAgaWYgKGFyciA9PSBOVUxMKSB7CiAgICAgICAgcHJpbnRmKCJNZW1vcnkgYWxsb2NhdGlvbiBmYWlsZWRcbiIpOwogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIC8vIFByaW50IHRoZSBhcnJheSAoYWxsIGVsZW1lbnRzIHNob3VsZCBiZSB6ZXJvKQogICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICBwcmludGYoIiVkICIsIGFycltpXSk7CiAgICB9CiAgICBwcmludGYoIlxuIik7CgogICAgLy8gRnJlZSB0aGUgYWxsb2NhdGVkIG1lbW9yeQogICAgZnJlZShhcnIpOwoKICAgIHJldHVybiAwOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main() {
    int n;
    printf(&quot;Enter the number of elements: &quot;);
    scanf(&quot;%d&quot;, &amp;n);

    // Allocate memory for n integers and initialize to zero
    int *arr = (int *)calloc(n, sizeof(int));
    if (arr == NULL) {
        printf(&quot;Memory allocation failed\n&quot;);
        return 1;
    }

    // Print the array (all elements should be zero)
    for (int i = 0; i &lt; n; i++) {
        printf(&quot;%d &quot;, arr[i]);
    }
    printf(&quot;\n&quot;);

    // Free the allocated memory
    free(arr);

    return 0;
}</pre></div><div class='content'></div><h2>Exemple: Utilitzant `realloc`</h2>
<div class='content'><p><code>realloc</code> permet redimensionar un array dinàmic existent.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRsaWIuaD4KCmludCBtYWluKCkgewogICAgaW50IG4sIG5ld19uOwogICAgcHJpbnRmKCJFbnRlciB0aGUgaW5pdGlhbCBudW1iZXIgb2YgZWxlbWVudHM6ICIpOwogICAgc2NhbmYoIiVkIiwgJm4pOwoKICAgIC8vIEFsbG9jYXRlIG1lbW9yeSBmb3IgbiBpbnRlZ2VycwogICAgaW50ICphcnIgPSAoaW50ICopbWFsbG9jKG4gKiBzaXplb2YoaW50KSk7CiAgICBpZiAoYXJyID09IE5VTEwpIHsKICAgICAgICBwcmludGYoIk1lbW9yeSBhbGxvY2F0aW9uIGZhaWxlZFxuIik7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgLy8gSW5pdGlhbGl6ZSB0aGUgYXJyYXkKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgYXJyW2ldID0gaSArIDE7CiAgICB9CgogICAgLy8gUmVzaXplIHRoZSBhcnJheQogICAgcHJpbnRmKCJFbnRlciB0aGUgbmV3IG51bWJlciBvZiBlbGVtZW50czogIik7CiAgICBzY2FuZigiJWQiLCAmbmV3X24pOwogICAgYXJyID0gKGludCAqKXJlYWxsb2MoYXJyLCBuZXdfbiAqIHNpemVvZihpbnQpKTsKICAgIGlmIChhcnIgPT0gTlVMTCkgewogICAgICAgIHByaW50ZigiTWVtb3J5IHJlYWxsb2NhdGlvbiBmYWlsZWRcbiIpOwogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIC8vIEluaXRpYWxpemUgbmV3IGVsZW1lbnRzIGlmIHRoZSBhcnJheSBoYXMgZ3Jvd24KICAgIGZvciAoaW50IGkgPSBuOyBpIDwgbmV3X247IGkrKykgewogICAgICAgIGFycltpXSA9IGkgKyAxOwogICAgfQoKICAgIC8vIFByaW50IHRoZSBhcnJheQogICAgZm9yIChpbnQgaSA9IDA7IGkgPCBuZXdfbjsgaSsrKSB7CiAgICAgICAgcHJpbnRmKCIlZCAiLCBhcnJbaV0pOwogICAgfQogICAgcHJpbnRmKCJcbiIpOwoKICAgIC8vIEZyZWUgdGhlIGFsbG9jYXRlZCBtZW1vcnkKICAgIGZyZWUoYXJyKTsKCiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

int main() {
    int n, new_n;
    printf(&quot;Enter the initial number of elements: &quot;);
    scanf(&quot;%d&quot;, &amp;n);

    // Allocate memory for n integers
    int *arr = (int *)malloc(n * sizeof(int));
    if (arr == NULL) {
        printf(&quot;Memory allocation failed\n&quot;);
        return 1;
    }

    // Initialize the array
    for (int i = 0; i &lt; n; i++) {
        arr[i] = i + 1;
    }

    // Resize the array
    printf(&quot;Enter the new number of elements: &quot;);
    scanf(&quot;%d&quot;, &amp;new_n);
    arr = (int *)realloc(arr, new_n * sizeof(int));
    if (arr == NULL) {
        printf(&quot;Memory reallocation failed\n&quot;);
        return 1;
    }

    // Initialize new elements if the array has grown
    for (int i = n; i &lt; new_n; i++) {
        arr[i] = i + 1;
    }

    // Print the array
    for (int i = 0; i &lt; new_n; i++) {
        printf(&quot;%d &quot;, arr[i]);
    }
    printf(&quot;\n&quot;);

    // Free the allocated memory
    free(arr);

    return 0;
}</pre></div><div class='content'></div><h1>Millors Pràctiques</h1>
<div class='content'><ul>
<li>Comproveu sempre si l'assignació de memòria ha estat exitosa verificant si el punter és <code>NULL</code>.</li>
<li>Allibereu la memòria assignada utilitzant <code>free</code> per evitar fuites de memòria.</li>
<li>Tingueu cura quan utilitzeu <code>realloc</code> ja que pot retornar <code>NULL</code> si la reallocació falla, cosa que pot provocar fuites de memòria si es perd el punter original.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Els arrays dinàmics proporcionen flexibilitat en la gestió de col·leccions de dades la mida de les quals pot canviar durant l'execució del programa. Entendre com utilitzar <code>malloc</code>, <code>calloc</code>, <code>realloc</code> i <code>free</code> és essencial per a una gestió efectiva de la memòria en C. Seguint les millors pràctiques, podeu evitar errors comuns com les fuites de memòria i les fallades de segmentació.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
