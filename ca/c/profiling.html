<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profiling en C</title>

    <link rel="alternate" href="https://campusempresa.com/es/c/profiling" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/c/profiling" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/c/profiling" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/c/profiling" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>El profiling és una tècnica essencial en el desenvolupament de programari que ajuda a identificar colls d'ampolla de rendiment en el teu codi. Comprenent on el teu programa passa la major part del temps, pots prendre decisions informades sobre on optimitzar per obtenir un millor rendiment.</p>
</div><h1>Què és el Profiling?</h1>
<div class='content'><p>El profiling és el procés de mesurar la complexitat espacial (memòria) i temporal d'un programa. Ajuda a identificar les parts del programa que consumeixen més recursos.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Colls d'Ampolla de Rendiment</strong>: Seccions de codi que ralenteixen significativament el programa.</li>
<li><strong>Hot Spots</strong>: Parts del codi que s'executen freqüentment i consumeixen molt de temps de CPU.</li>
<li><strong>Gràfic de Crides</strong>: Una representació visual de les crides a funcions en el programa.</li>
<li><strong>Instrumentació</strong>: Afegir codi per mesurar mètriques de rendiment.</li>
</ul>
</div><h1>Per què el Profiling és Important</h1>
<div class='content'><ul>
<li><strong>Optimització</strong>: Ajuda a optimitzar el codi centrant-se en les parts més intensives en recursos.</li>
<li><strong>Eficiència</strong>: Millora l'eficiència general del programa.</li>
<li><strong>Gestió de Recursos</strong>: Millor gestió dels recursos de CPU i memòria.</li>
</ul>
</div><h1>Eines per al Profiling en C</h1>
<div class='content'><p>Diverses eines es poden utilitzar per al profiling de programes en C:</p>
<ul>
<li><strong>gprof</strong>: Un profiler de GNU que ajuda a analitzar el rendiment del programa.</li>
<li><strong>Valgrind</strong>: Una eina per al depurament de memòria, detecció de fuites de memòria i profiling.</li>
<li><strong>perf</strong>: Una eina d'anàlisi de rendiment en Linux.</li>
</ul>
</div><h1>Ús de gprof per al Profiling</h1>
<div class='content'></div><h2>Instal·lació</h2>
<div class='content'><p>Per utilitzar <code>gprof</code>, has de tenir-lo instal·lat al teu sistema. En la majoria de distribucions de Linux, pots instal·lar-lo utilitzant:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhcHQtZ2V0IGluc3RhbGwgZ3Byb2Y="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo apt-get install gprof</pre></div><div class='content'></div><h2>Compilació amb Informació de Profiling</h2>
<div class='content'><p>Per fer el profiling d'un programa en C utilitzant <code>gprof</code>, has de compilar-lo amb el flag <code>-pg</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2NjIC1wZyAtbyBteV9wcm9ncmFtIG15X3Byb2dyYW0uYw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcc -pg -o my_program my_program.c</pre></div><div class='content'></div><h2>Execució del Programa</h2>
<div class='content'><p>Executa el teu programa compilat com de costum:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Li9teV9wcm9ncmFt"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>./my_program</pre></div><div class='content'><p>Això generarà un fitxer anomenat <code>gmon.out</code> en el directori actual, que conté les dades de profiling.</p>
</div><h2>Generació de l'Informe de Profiling</h2>
<div class='content'><p>Utilitza <code>gprof</code> per analitzar el fitxer <code>gmon.out</code> i generar un informe llegible per humans:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z3Byb2YgbXlfcHJvZ3JhbSBnbW9uLm91dCA+IGFuYWx5c2lzLnR4dA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gprof my_program gmon.out &gt; analysis.txt</pre></div><div class='content'></div><h2>Comprensió de l'Informe</h2>
<div class='content'><p>L'informe generat per <code>gprof</code> inclou:</p>
<ul>
<li><strong>Perfil Pla</strong>: Mostra el temps total passat en cada funció.</li>
<li><strong>Gràfic de Crides</strong>: Mostra la jerarquia de crides i el temps passat en cada funció.</li>
</ul>
</div><h2>Exemple</h2>
<div class='content'><p>Considera el següent programa simple en C:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+Cgp2b2lkIGZ1bmN0aW9uMSgpIHsKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMTAwMDAwMDsgaSsrKTsKfQoKdm9pZCBmdW5jdGlvbjIoKSB7CiAgICBmb3IgKGludCBpID0gMDsgaSA8IDIwMDAwMDA7IGkrKyk7Cn0KCmludCBtYWluKCkgewogICAgZnVuY3Rpb24xKCk7CiAgICBmdW5jdGlvbjIoKTsKICAgIHJldHVybiAwOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

void function1() {
    for (int i = 0; i &lt; 1000000; i++);
}

void function2() {
    for (int i = 0; i &lt; 2000000; i++);
}

int main() {
    function1();
    function2();
    return 0;
}</pre></div><div class='content'><p>Compila i fes el profiling d'aquest programa:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2NjIC1wZyAtbyBteV9wcm9ncmFtIG15X3Byb2dyYW0uYwouL215X3Byb2dyYW0KZ3Byb2YgbXlfcHJvZ3JhbSBnbW9uLm91dCA+IGFuYWx5c2lzLnR4dA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcc -pg -o my_program my_program.c
./my_program
gprof my_program gmon.out &gt; analysis.txt</pre></div><div class='content'><p>El fitxer <code>analysis.txt</code> et mostrarà quant de temps s'ha passat en <code>function1</code> i <code>function2</code>.</p>
</div><h1>Ús de Valgrind per al Profiling</h1>
<div class='content'><p>Valgrind és una altra eina poderosa que es pot utilitzar per al profiling, especialment per a problemes relacionats amb la memòria.</p>
</div><h2>Instal·lació</h2>
<div class='content'><p>Instal·la Valgrind utilitzant:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhcHQtZ2V0IGluc3RhbGwgdmFsZ3JpbmQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo apt-get install valgrind</pre></div><div class='content'></div><h2>Execució de Valgrind</h2>
<div class='content'><p>Executa el teu programa amb Valgrind per comprovar fuites de memòria i profiling:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFsZ3JpbmQgLS10b29sPWNhbGxncmluZCAuL215X3Byb2dyYW0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>valgrind --tool=callgrind ./my_program</pre></div><div class='content'><p>Això generarà un fitxer anomenat <code>callgrind.out.&lt;pid&gt;</code>.</p>
</div><h2>Anàlisi del Resultat</h2>
<div class='content'><p>Pots utilitzar <code>kcachegrind</code> per visualitzar el resultat:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhcHQtZ2V0IGluc3RhbGwga2NhY2hlZ3JpbmQKa2NhY2hlZ3JpbmQgY2FsbGdyaW5kLm91dC48cGlkPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo apt-get install kcachegrind
kcachegrind callgrind.out.&lt;pid&gt;</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>El profiling és un pas crucial en l'optimització de programes en C. Utilitzant eines com <code>gprof</code> i Valgrind, pots identificar colls d'ampolla de rendiment i problemes de memòria. El profiling ajuda a fer que els teus programes siguin més eficients i amigables amb els recursos. Sempre fes el profiling del teu codi abans i després de fer optimitzacions per assegurar-te que els teus canvis tenen l'efecte desitjat.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
