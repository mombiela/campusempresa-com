<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestió d'Excepcions en PL/SQL</title>

    <link rel="alternate" href="https://campusempresa.com/es/plsql/exception-handling" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/plsql/exception-handling" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/plsql/exception-handling" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/plsql/exception-handling" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='control-structures-loops'>&#x25C4; Estructures de Control: Bucles</a></div><div class='col-6 text-end'><a href='embedding-sql-plsql'>Incrustar SQL en PL/SQL &#x25BA;</a></div></div><div class='content'></div><h1>Introducció a la Gestió d'Excepcions</h1>
<div class='content'><p>La gestió d'excepcions en PL/SQL és un aspecte crític per escriure codi robust i lliure d'errors. Permet als desenvolupadors gestionar errors de manera elegant i assegurar-se que el programa pugui manejar situacions inesperades sense bloquejar-se.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Excepció</strong>: Una condició d'error durant l'execució d'un programa.</li>
<li><strong>Gestió d'Excepcions</strong>: El procés de respondre a l'aparició d'excepcions.</li>
<li><strong>Excepcions Predefinides</strong>: Excepcions estàndard proporcionades per PL/SQL.</li>
<li><strong>Excepcions Definides per l'Usuari</strong>: Excepcions personalitzades definides pel programador.</li>
</ul>
</div><h1>Tipus d'Excepcions</h1>
<div class='content'><p>PL/SQL admet dos tipus d'excepcions:</p>
<ol>
<li><strong>Excepcions Predefinides</strong></li>
<li><strong>Excepcions Definides per l'Usuari</strong></li>
</ol>
</div><h2>Excepcions Predefinides</h2>
<div class='content'><p>PL/SQL proporciona diverses excepcions predefinides que són automàticament generades pel motor d'execució. Algunes excepcions predefinides comunes inclouen:</p>
<p>| Nom de l'Excepció | Descripció |
|-------------------|------------|
| <code>NO_DATA_FOUND</code> | Generada quan una instrucció SELECT INTO no retorna cap fila. |
| <code>TOO_MANY_ROWS</code> | Generada quan una instrucció SELECT INTO retorna més d'una fila. |
| <code>ZERO_DIVIDE</code> | Generada quan es fa un intent de dividir un número per zero. |
| <code>INVALID_CURSOR</code> | Generada quan es fa un intent d'operació il·legal amb un cursor. |</p>
</div><h2>Excepcions Definides per l'Usuari</h2>
<div class='content'><p>Les excepcions definides per l'usuari són excepcions personalitzades que es poden definir en el codi PL/SQL. Aquestes excepcions són útils per gestionar condicions d'error específiques que no estan cobertes per les excepcions predefinides.</p>
</div><h1>Declaració i Generació d'Excepcions</h1>
<h2>Declaració d'Excepcions Definides per l'Usuari</h2>
<div class='content'><p>Per declarar una excepció definida per l'usuari, s'utilitza la paraula clau <code>EXCEPTION</code> en la secció declarativa d'un bloc PL/SQL.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogIG15X2N1c3RvbV9leGNlcHRpb24gRVhDRVBUSU9OOwpCRUdJTgogIC0tIEJsb2MgUEwvU1FMCkVORDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
  my_custom_exception EXCEPTION;
BEGIN
  -- Bloc PL/SQL
END;</pre></div><div class='content'></div><h2>Generació d'Excepcions</h2>
<div class='content'><p>Per generar una excepció, s'utilitza la instrucció <code>RAISE</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogIG15X2N1c3RvbV9leGNlcHRpb24gRVhDRVBUSU9OOwpCRUdJTgogIC0tIEFsZ3VuYSBjb25kaWNpw7MgYSBjb21wcm92YXIKICBJRiBzb21lX2NvbmRpdGlvbiBUSEVOCiAgICBSQUlTRSBteV9jdXN0b21fZXhjZXB0aW9uOwogIEVORCBJRjsKRVhDRVBUSU9OCiAgV0hFTiBteV9jdXN0b21fZXhjZXB0aW9uIFRIRU4KICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdFeGNlcGNpw7MgcGVyc29uYWxpdHphZGEgZ2VuZXJhZGEuJyk7CkVORDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
  my_custom_exception EXCEPTION;
BEGIN
  -- Alguna condici&oacute; a comprovar
  IF some_condition THEN
    RAISE my_custom_exception;
  END IF;
EXCEPTION
  WHEN my_custom_exception THEN
    DBMS_OUTPUT.PUT_LINE('Excepci&oacute; personalitzada generada.');
END;</pre></div><div class='content'></div><h1>Gestió d'Excepcions</h1>
<h2>Estructura de Gestió d'Excepcions</h2>
<div class='content'><p>La gestió d'excepcions en PL/SQL es fa utilitzant el bloc <code>EXCEPTION</code>, que segueix el bloc <code>BEGIN</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAtLSBCbG9jIFBML1NRTApFWENFUFRJT04KICBXSEVOIGV4Y2VwdGlvbl9uYW1lMSBUSEVOCiAgICAtLSBDb2RpIGRlIGdlc3Rpw7MgZCdleGNlcGNpb25zCiAgV0hFTiBleGNlcHRpb25fbmFtZTIgVEhFTgogICAgLS0gQ29kaSBkZSBnZXN0acOzIGQnZXhjZXBjaW9ucwogIFdIRU4gT1RIRVJTIFRIRU4KICAgIC0tIEdlc3Rpw7MgZGUgdG90ZXMgbGVzIGFsdHJlcyBleGNlcGNpb25zCkVORDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
  -- Bloc PL/SQL
EXCEPTION
  WHEN exception_name1 THEN
    -- Codi de gesti&oacute; d'excepcions
  WHEN exception_name2 THEN
    -- Codi de gesti&oacute; d'excepcions
  WHEN OTHERS THEN
    -- Gesti&oacute; de totes les altres excepcions
END;</pre></div><div class='content'></div><h2>Exemple: Gestió d'Excepcions Predefinides</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogIHZfbnVtYmVyIE5VTUJFUjsKQkVHSU4KICB2X251bWJlciA6PSAxMCAvIDA7IC0tIEFpeMOyIGdlbmVyYXLDoCBsJ2V4Y2VwY2nDsyBaRVJPX0RJVklERQpFWENFUFRJT04KICBXSEVOIFpFUk9fRElWSURFIFRIRU4KICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdObyBlcyBwb3QgZGl2aWRpciBwZXIgemVyby4nKTsKRU5EOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
  v_number NUMBER;
BEGIN
  v_number := 10 / 0; -- Aix&ograve; generar&agrave; l'excepci&oacute; ZERO_DIVIDE
EXCEPTION
  WHEN ZERO_DIVIDE THEN
    DBMS_OUTPUT.PUT_LINE('No es pot dividir per zero.');
END;</pre></div><div class='content'></div><h2>Exemple: Gestió d'Excepcions Definides per l'Usuari</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogIG15X2N1c3RvbV9leGNlcHRpb24gRVhDRVBUSU9OOwogIHZfbnVtYmVyIE5VTUJFUiA6PSAxMDsKQkVHSU4KICBJRiB2X251bWJlciA+IDUgVEhFTgogICAgUkFJU0UgbXlfY3VzdG9tX2V4Y2VwdGlvbjsKICBFTkQgSUY7CkVYQ0VQVElPTgogIFdIRU4gbXlfY3VzdG9tX2V4Y2VwdGlvbiBUSEVOCiAgICBEQk1TX09VVFBVVC5QVVRfTElORSgnRXhjZXBjacOzIHBlcnNvbmFsaXR6YWRhIGdlbmVyYWRhOiBFbCBuw7ptZXJvIMOpcyBtw6lzIGdyYW4gcXVlIDUuJyk7CkVORDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
  my_custom_exception EXCEPTION;
  v_number NUMBER := 10;
BEGIN
  IF v_number &gt; 5 THEN
    RAISE my_custom_exception;
  END IF;
EXCEPTION
  WHEN my_custom_exception THEN
    DBMS_OUTPUT.PUT_LINE('Excepci&oacute; personalitzada generada: El n&uacute;mero &eacute;s m&eacute;s gran que 5.');
END;</pre></div><div class='content'></div><h1>Gestió Avançada d'Excepcions</h1>
<h2>Propagació d'Excepcions</h2>
<div class='content'><p>Les excepcions es poden propagar a l'entorn de crida si no es gestionen en el bloc actual.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogIG15X2N1c3RvbV9leGNlcHRpb24gRVhDRVBUSU9OOwogIFBST0NFRFVSRSB0ZXN0X3Byb2MgSVMKICBCRUdJTgogICAgUkFJU0UgbXlfY3VzdG9tX2V4Y2VwdGlvbjsKICBFTkQ7CkJFR0lOCiAgdGVzdF9wcm9jOwpFWENFUFRJT04KICBXSEVOIG15X2N1c3RvbV9leGNlcHRpb24gVEhFTgogICAgREJNU19PVVRQVVQuUFVUX0xJTkUoJ0V4Y2VwY2nDsyBwcm9wYWdhZGEgZGVzIGRlbCBwcm9jZWRpbWVudC4nKTsKRU5EOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
  my_custom_exception EXCEPTION;
  PROCEDURE test_proc IS
  BEGIN
    RAISE my_custom_exception;
  END;
BEGIN
  test_proc;
EXCEPTION
  WHEN my_custom_exception THEN
    DBMS_OUTPUT.PUT_LINE('Excepci&oacute; propagada des del procediment.');
END;</pre></div><div class='content'></div><h2>Ús de PRAGMA EXCEPTION_INIT</h2>
<div class='content'><p>La directiva <code>PRAGMA EXCEPTION_INIT</code> associa una excepció definida per l'usuari amb un número d'error d'Oracle.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogIG15X2N1c3RvbV9leGNlcHRpb24gRVhDRVBUSU9OOwogIFBSQUdNQSBFWENFUFRJT05fSU5JVChteV9jdXN0b21fZXhjZXB0aW9uLCAtMjAwMDEpOwpCRUdJTgogIFJBSVNFX0FQUExJQ0FUSU9OX0VSUk9SKC0yMDAwMSwgJ01pc3NhdGdlIGQnZXJyb3IgcGVyc29uYWxpdHphdCcpOwpFWENFUFRJT04KICBXSEVOIG15X2N1c3RvbV9leGNlcHRpb24gVEhFTgogICAgREJNU19PVVRQVVQuUFVUX0xJTkUoJ0V4Y2VwY2nDsyBwZXJzb25hbGl0emFkYSBhdHJhcGFkYSBhbWIgZWwgbsO6bWVybyBkJ2Vycm9yIC0yMDAwMS4nKTsKRU5EOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
  my_custom_exception EXCEPTION;
  PRAGMA EXCEPTION_INIT(my_custom_exception, -20001);
BEGIN
  RAISE_APPLICATION_ERROR(-20001, 'Missatge d'error personalitzat');
EXCEPTION
  WHEN my_custom_exception THEN
    DBMS_OUTPUT.PUT_LINE('Excepci&oacute; personalitzada atrapada amb el n&uacute;mero d'error -20001.');
END;</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>La gestió d'excepcions en PL/SQL és essencial per crear aplicacions robustes i fiables. Comprenent i utilitzant les excepcions predefinides i definides per l'usuari, es poden gestionar errors de manera efectiva i assegurar-se que els programes puguin manejar situacions inesperades de manera elegant. Recorda sempre gestionar les excepcions quan sigui apropiat i propagar-les quan sigui necessari per mantenir un codi net i mantenible.</p>
</div><div class='row navigation'><div class='col-6'><a href='control-structures-loops'>&#x25C4; Estructures de Control: Bucles</a></div><div class='col-6 text-end'><a href='embedding-sql-plsql'>Incrustar SQL en PL/SQL &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
