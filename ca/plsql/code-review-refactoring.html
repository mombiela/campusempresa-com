<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revisió de Codi i Refactorització en PL/SQL</title>

    <link rel="alternate" href="https://campusempresa.com/es/plsql/code-review-refactoring" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/plsql/code-review-refactoring" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/plsql/code-review-refactoring" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/plsql/code-review-refactoring" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>La revisió de codi i la refactorització són pràctiques essencials en el desenvolupament de programari que asseguren la qualitat del codi, la mantenibilitat i el rendiment. En aquesta secció, explorarem la importància d'aquestes pràctiques en PL/SQL, proporcionarem pautes per dur a terme revisions de codi efectives i demostrarem tècniques per refactoritzar codi PL/SQL.</p>
</div><h1>Importància de la Revisió de Codi i la Refactorització</h1>
<div class='content'><ul>
<li><strong>Qualitat del Codi</strong>: Assegura que el codi s'adhereixi a les millors pràctiques i estàndards.</li>
<li><strong>Mantenibilitat</strong>: Fa que el codi sigui més fàcil d'entendre i modificar.</li>
<li><strong>Rendiment</strong>: Identifica i resol colls d'ampolla de rendiment.</li>
<li><strong>Detecció d'Errors</strong>: Detecta errors i problemes potencials a l'inici del procés de desenvolupament.</li>
<li><strong>Compartició de Coneixement</strong>: Facilita l'aprenentatge i la transferència de coneixement entre els membres de l'equip.</li>
</ul>
</div><h1>Realització de Revisions de Codi</h1>
<h2>Pautes per a Revisions de Codi Efectives</h2>
<div class='content'><ul>
<li><strong>Consistència</strong>: Assegura que el codi segueixi els estàndards de codificació del projecte.</li>
<li><strong>Llegibilitat</strong>: El codi ha de ser fàcil de llegir i entendre.</li>
<li><strong>Funcionalitat</strong>: Verifica que el codi funcioni com es pretén i compleixi els requisits.</li>
<li><strong>Rendiment</strong>: Comprova l'ús eficient dels recursos i el rendiment òptim.</li>
<li><strong>Seguretat</strong>: Identifica i aborda possibles vulnerabilitats de seguretat.</li>
</ul>
</div><h2>Llista de Verificació per a la Revisió de Codi</h2>
<div class='content'><ul>
<li><strong>Convencions de Nomenclatura</strong>: Estan les variables, procediments i funcions nomenats adequadament?</li>
<li><strong>Comentaris i Documentació</strong>: Està el codi adequadament comentat i documentat?</li>
<li><strong>Gestió d'Errors</strong>: Estan les excepcions i errors gestionats correctament?</li>
<li><strong>Optimització de SQL</strong>: Estan les consultes SQL optimitzades per al rendiment?</li>
<li><strong>Duplicació de Codi</strong>: Hi ha codi redundant o duplicat?</li>
</ul>
</div><h2>Exemple de Revisió de Codi</h2>
<div class='content'><p>Considera el següent procediment PL/SQL:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIE9SIFJFUExBQ0UgUFJPQ0VEVVJFIGNhbGN1bGF0ZV9ib251cyAoZW1wX2lkIElOIE5VTUJFUikgSVMKICB2X3NhbGFyeSBOVU1CRVI7CiAgdl9ib251cyBOVU1CRVI7CkJFR0lOCiAgU0VMRUNUIHNhbGFyeSBJTlRPIHZfc2FsYXJ5IEZST00gZW1wbG95ZWVzIFdIRVJFIGVtcGxveWVlX2lkID0gZW1wX2lkOwogIElGIHZfc2FsYXJ5IDwgNTAwMCBUSEVOCiAgICB2X2JvbnVzIDo9IHZfc2FsYXJ5ICogMC4xMDsKICBFTFNFCiAgICB2X2JvbnVzIDo9IHZfc2FsYXJ5ICogMC4wNTsKICBFTkQgSUY7CiAgVVBEQVRFIGVtcGxveWVlcyBTRVQgYm9udXMgPSB2X2JvbnVzIFdIRVJFIGVtcGxveWVlX2lkID0gZW1wX2lkOwpFTkQ7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE OR REPLACE PROCEDURE calculate_bonus (emp_id IN NUMBER) IS
  v_salary NUMBER;
  v_bonus NUMBER;
BEGIN
  SELECT salary INTO v_salary FROM employees WHERE employee_id = emp_id;
  IF v_salary &lt; 5000 THEN
    v_bonus := v_salary * 0.10;
  ELSE
    v_bonus := v_salary * 0.05;
  END IF;
  UPDATE employees SET bonus = v_bonus WHERE employee_id = emp_id;
END;</pre></div><div class='content'><p><strong>Punts de Revisió:</strong></p>
<ul>
<li><strong>Convencions de Nomenclatura</strong>: Els noms de les variables són clars i descriptius.</li>
<li><strong>Comentaris</strong>: El procediment manca de comentaris que expliquin el seu propòsit i lògica.</li>
<li><strong>Gestió d'Errors</strong>: No hi ha gestió d'excepcions en cas que la sentència <code>SELECT</code> falli.</li>
<li><strong>Optimització de SQL</strong>: Les sentències <code>SELECT</code> i <code>UPDATE</code> són senzilles, però hauríem d'assegurar-nos que s'utilitzen índexs en <code>employee_id</code>.</li>
</ul>
</div><h1>Refactorització de Codi PL/SQL</h1>
<h2>Tècniques Comunes de Refactorització</h2>
<div class='content'><ul>
<li><strong>Extreure Procediment</strong>: Descompon procediments grans en procediments més petits i reutilitzables.</li>
<li><strong>Renombrar Variables</strong>: Utilitza noms significatius per a les variables per millorar la llegibilitat.</li>
<li><strong>Eliminar Codi Redundant</strong>: Elimina codi duplicat o innecessari.</li>
<li><strong>Optimitzar Sentències SQL</strong>: Reescriu consultes SQL per a un millor rendiment.</li>
<li><strong>Afegir Gestió d'Errors</strong>: Implementa una gestió d'excepcions adequada.</li>
</ul>
</div><h2>Exemple de Refactorització</h2>
<div class='content'><p>Refactoritza l'exemple anterior per millorar la llegibilitat i afegir gestió d'errors:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIE9SIFJFUExBQ0UgUFJPQ0VEVVJFIGNhbGN1bGF0ZV9ib251cyAoZW1wX2lkIElOIE5VTUJFUikgSVMKICB2X3NhbGFyeSBOVU1CRVI7CiAgdl9ib251cyBOVU1CRVI7CgogIFBST0NFRFVSRSBnZXRfc2FsYXJ5KHBfZW1wX2lkIElOIE5VTUJFUiwgcF9zYWxhcnkgT1VUIE5VTUJFUikgSVMKICBCRUdJTgogICAgU0VMRUNUIHNhbGFyeSBJTlRPIHBfc2FsYXJ5IEZST00gZW1wbG95ZWVzIFdIRVJFIGVtcGxveWVlX2lkID0gcF9lbXBfaWQ7CiAgRVhDRVBUSU9OCiAgICBXSEVOIE5PX0RBVEFfRk9VTkQgVEhFTgogICAgICBwX3NhbGFyeSA6PSAwOwogIEVORCBnZXRfc2FsYXJ5OwoKICBQUk9DRURVUkUgdXBkYXRlX2JvbnVzKHBfZW1wX2lkIElOIE5VTUJFUiwgcF9ib251cyBJTiBOVU1CRVIpIElTCiAgQkVHSU4KICAgIFVQREFURSBlbXBsb3llZXMgU0VUIGJvbnVzID0gcF9ib251cyBXSEVSRSBlbXBsb3llZV9pZCA9IHBfZW1wX2lkOwogIEVORCB1cGRhdGVfYm9udXM7CgpCRUdJTgogIGdldF9zYWxhcnkoZW1wX2lkLCB2X3NhbGFyeSk7CiAgSUYgdl9zYWxhcnkgPCA1MDAwIFRIRU4KICAgIHZfYm9udXMgOj0gdl9zYWxhcnkgKiAwLjEwOwogIEVMU0UKICAgIHZfYm9udXMgOj0gdl9zYWxhcnkgKiAwLjA1OwogIEVORCBJRjsKICB1cGRhdGVfYm9udXMoZW1wX2lkLCB2X2JvbnVzKTsKRU5EOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE OR REPLACE PROCEDURE calculate_bonus (emp_id IN NUMBER) IS
  v_salary NUMBER;
  v_bonus NUMBER;

  PROCEDURE get_salary(p_emp_id IN NUMBER, p_salary OUT NUMBER) IS
  BEGIN
    SELECT salary INTO p_salary FROM employees WHERE employee_id = p_emp_id;
  EXCEPTION
    WHEN NO_DATA_FOUND THEN
      p_salary := 0;
  END get_salary;

  PROCEDURE update_bonus(p_emp_id IN NUMBER, p_bonus IN NUMBER) IS
  BEGIN
    UPDATE employees SET bonus = p_bonus WHERE employee_id = p_emp_id;
  END update_bonus;

BEGIN
  get_salary(emp_id, v_salary);
  IF v_salary &lt; 5000 THEN
    v_bonus := v_salary * 0.10;
  ELSE
    v_bonus := v_salary * 0.05;
  END IF;
  update_bonus(emp_id, v_bonus);
END;</pre></div><div class='content'><p><strong>Millores:</strong></p>
<ul>
<li><strong>Extreure Procediment</strong>: Els procediments <code>get_salary</code> i <code>update_bonus</code> encapsulen tasques específiques.</li>
<li><strong>Gestió d'Errors</strong>: El procediment <code>get_salary</code> inclou gestió d'excepcions per <code>NO_DATA_FOUND</code>.</li>
<li><strong>Llegibilitat</strong>: El procediment principal ara és més llegible i fàcil d'entendre.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>La revisió de codi i la refactorització són pràctiques crítiques per mantenir codi PL/SQL d'alta qualitat. Seguint pautes estructurades i emprant tècniques comunes de refactorització, els desenvolupadors poden assegurar-se que el seu codi és eficient, mantenible i lliure d'errors. Les revisions de codi regulars i la refactorització contínua contribueixen a la salut i rendiment general del codi, fomentant una cultura d'excel·lència i col·laboració dins dels equips de desenvolupament.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
