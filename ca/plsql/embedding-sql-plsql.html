<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://campusempresa.com/plsql/embedding-sql-plsql" id="lnk_lang_es" data-lang="es">Castellano</a></b>
				|
				<b id="lit_lang_ca">Catala</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>PL/SQL (Procedural Language/Structured Query Language) és l'extensió procedimental de SQL i la base de dades relacional d'Oracle Corporation. Combina el poder de manipulació de dades de SQL amb el poder de processament dels llenguatges procedimentals. En aquesta secció, explorarem com inserir sentències SQL dins del codi PL/SQL.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>SQL en PL/SQL</strong>: Inserir sentències SQL dins de blocs PL/SQL per realitzar operacions de base de dades.</li>
<li><strong>Sentències DML</strong>: Sentències del Llenguatge de Manipulació de Dades (DML) com <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code> i <code>DELETE</code>.</li>
<li><strong>Control de Transaccions</strong>: Utilitzar <code>COMMIT</code>, <code>ROLLBACK</code> i <code>SAVEPOINT</code> per gestionar transaccions.</li>
<li><strong>Cursors</strong>: Gestionar resultats de consultes utilitzant cursors implícits i explícits.</li>
</ul>
</div><h1>Inserir Sentències SQL</h1>
<div class='content'></div><h2>Sentència SELECT</h2>
<div class='content'><p>La sentència <code>SELECT</code> s'utilitza per obtenir dades de la base de dades. En PL/SQL, es pot utilitzar de dues maneres: directament en variables o utilitzant cursors.</p>
<h4>Exemple: SELECT INTO Variables</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogICAgdl9lbXBsb3llZV9uYW1lIFZBUkNIQVIyKDUwKTsKICAgIHZfZW1wbG95ZWVfc2FsYXJ5IE5VTUJFUjsKQkVHSU4KICAgIFNFTEVDVCBlbXBsb3llZV9uYW1lLCBzYWxhcnkKICAgIElOVE8gdl9lbXBsb3llZV9uYW1lLCB2X2VtcGxveWVlX3NhbGFyeQogICAgRlJPTSBlbXBsb3llZXMKICAgIFdIRVJFIGVtcGxveWVlX2lkID0gMTAxOwoKICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdFbXBsb3llZSBOYW1lOiAnIHx8IHZfZW1wbG95ZWVfbmFtZSk7CiAgICBEQk1TX09VVFBVVC5QVVRfTElORSgnRW1wbG95ZWUgU2FsYXJ5OiAnIHx8IHZfZW1wbG95ZWVfc2FsYXJ5KTsKRU5EOwov"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
    v_employee_name VARCHAR2(50);
    v_employee_salary NUMBER;
BEGIN
    SELECT employee_name, salary
    INTO v_employee_name, v_employee_salary
    FROM employees
    WHERE employee_id = 101;

    DBMS_OUTPUT.PUT_LINE('Employee Name: ' || v_employee_name);
    DBMS_OUTPUT.PUT_LINE('Employee Salary: ' || v_employee_salary);
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: Aquest bloc declara dues variables, <code>v_employee_name</code> i <code>v_employee_salary</code>, i obté el <code>employee_name</code> i el <code>salary</code> de l'empleat amb <code>employee_id</code> 101 en aquestes variables.</li>
</ul>
</div><h2>Sentència INSERT</h2>
<div class='content'><p>La sentència <code>INSERT</code> s'utilitza per afegir noves files a una taula.</p>
<h4>Exemple: Sentència INSERT</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAgIElOU0VSVCBJTlRPIGVtcGxveWVlcyAoZW1wbG95ZWVfaWQsIGVtcGxveWVlX25hbWUsIHNhbGFyeSkKICAgIFZBTFVFUyAoMTAyLCAnSm9obiBEb2UnLCA1MDAwMCk7CgogICAgQ09NTUlUOwpFTkQ7Ci8="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
    INSERT INTO employees (employee_id, employee_name, salary)
    VALUES (102, 'John Doe', 50000);

    COMMIT;
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: Aquest bloc insereix un nou registre d'empleat a la taula <code>employees</code> i confirma la transacció.</li>
</ul>
</div><h2>Sentència UPDATE</h2>
<div class='content'><p>La sentència <code>UPDATE</code> modifica dades existents en una taula.</p>
<h4>Exemple: Sentència UPDATE</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAgIFVQREFURSBlbXBsb3llZXMKICAgIFNFVCBzYWxhcnkgPSBzYWxhcnkgKiAxLjEKICAgIFdIRVJFIGVtcGxveWVlX2lkID0gMTAxOwoKICAgIENPTU1JVDsKRU5EOwov"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
    UPDATE employees
    SET salary = salary * 1.1
    WHERE employee_id = 101;

    COMMIT;
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: Aquest bloc actualitza el salari de l'empleat amb <code>employee_id</code> 101 augmentant-lo un 10% i confirma la transacció.</li>
</ul>
</div><h2>Sentència DELETE</h2>
<div class='content'><p>La sentència <code>DELETE</code> elimina files d'una taula.</p>
<h4>Exemple: Sentència DELETE</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAgIERFTEVURSBGUk9NIGVtcGxveWVlcwogICAgV0hFUkUgZW1wbG95ZWVfaWQgPSAxMDI7CgogICAgQ09NTUlUOwpFTkQ7Ci8="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
    DELETE FROM employees
    WHERE employee_id = 102;

    COMMIT;
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: Aquest bloc elimina el registre de l'empleat amb <code>employee_id</code> 102 de la taula <code>employees</code> i confirma la transacció.</li>
</ul>
</div><h1>Control de Transaccions</h1>
<div class='content'><p>Les sentències de control de transaccions gestionen els canvis realitzats per les sentències DML.</p>
</div><h2>COMMIT</h2>
<div class='content'><ul>
<li><strong>Propòsit</strong>: Guardar tots els canvis realitzats durant la transacció actual.</li>
<li><strong>Exemple</strong>: <code>COMMIT;</code></li>
</ul>
</div><h2>ROLLBACK</h2>
<div class='content'><ul>
<li><strong>Propòsit</strong>: Desfer tots els canvis realitzats durant la transacció actual.</li>
<li><strong>Exemple</strong>: <code>ROLLBACK;</code></li>
</ul>
</div><h2>SAVEPOINT</h2>
<div class='content'><ul>
<li><strong>Propòsit</strong>: Establir un punt dins d'una transacció al qual es pot tornar més tard.</li>
<li><strong>Exemple</strong>:</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAgIFNBVkVQT0lOVCBiZWZvcmVfdXBkYXRlOwoKICAgIFVQREFURSBlbXBsb3llZXMKICAgIFNFVCBzYWxhcnkgPSBzYWxhcnkgKiAxLjEKICAgIFdIRVJFIGVtcGxveWVlX2lkID0gMTAxOwoKICAgIFJPTExCQUNLIFRPIGJlZm9yZV91cGRhdGU7CkVORDsKLw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
    SAVEPOINT before_update;

    UPDATE employees
    SET salary = salary * 1.1
    WHERE employee_id = 101;

    ROLLBACK TO before_update;
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: Aquest bloc estableix un punt de salvaguarda abans d'actualitzar el salari i després torna a aquest punt de salvaguarda, desfer l'actualització.</li>
</ul>
</div><h1>Cursors</h1>
<div class='content'><p>Els cursors s'utilitzen per gestionar els resultats de les consultes fila per fila.</p>
</div><h2>Cursors Implícits</h2>
<div class='content'><ul>
<li><strong>Propòsit</strong>: Creats automàticament per Oracle quan una sentència <code>SELECT</code> retorna una sola fila.</li>
<li><strong>Exemple</strong>: L'exemple <code>SELECT INTO</code> anterior utilitza un cursor implícit.</li>
</ul>
</div><h2>Cursors Explícits</h2>
<div class='content'><ul>
<li><strong>Propòsit</strong>: Definits pel programador per a consultes que retornen múltiples files.</li>
<li><strong>Exemple</strong>:</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogICAgQ1VSU09SIGVtcF9jdXJzb3IgSVMKICAgICAgICBTRUxFQ1QgZW1wbG95ZWVfbmFtZSwgc2FsYXJ5CiAgICAgICAgRlJPTSBlbXBsb3llZXM7CiAgICB2X2VtcGxveWVlX25hbWUgZW1wbG95ZWVzLmVtcGxveWVlX25hbWUlVFlQRTsKICAgIHZfZW1wbG95ZWVfc2FsYXJ5IGVtcGxveWVlcy5zYWxhcnklVFlQRTsKQkVHSU4KICAgIE9QRU4gZW1wX2N1cnNvcjsKICAgIExPT1AKICAgICAgICBGRVRDSCBlbXBfY3Vyc29yIElOVE8gdl9lbXBsb3llZV9uYW1lLCB2X2VtcGxveWVlX3NhbGFyeTsKICAgICAgICBFWElUIFdIRU4gZW1wX2N1cnNvciVOT1RGT1VORDsKICAgICAgICBEQk1TX09VVFBVVC5QVVRfTElORSgnRW1wbG95ZWUgTmFtZTogJyB8fCB2X2VtcGxveWVlX25hbWUgfHwgJywgU2FsYXJ5OiAnIHx8IHZfZW1wbG95ZWVfc2FsYXJ5KTsKICAgIEVORCBMT09QOwogICAgQ0xPU0UgZW1wX2N1cnNvcjsKRU5EOwov"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
    CURSOR emp_cursor IS
        SELECT employee_name, salary
        FROM employees;
    v_employee_name employees.employee_name%TYPE;
    v_employee_salary employees.salary%TYPE;
BEGIN
    OPEN emp_cursor;
    LOOP
        FETCH emp_cursor INTO v_employee_name, v_employee_salary;
        EXIT WHEN emp_cursor%NOTFOUND;
        DBMS_OUTPUT.PUT_LINE('Employee Name: ' || v_employee_name || ', Salary: ' || v_employee_salary);
    END LOOP;
    CLOSE emp_cursor;
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: Aquest bloc declara un cursor explícit <code>emp_cursor</code> per seleccionar tots els noms i salaris dels empleats. Després obre el cursor, obté cada fila en un bucle i imprimeix els detalls de l'empleat fins que totes les files són processades.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Inserir SQL en PL/SQL permet aprofitar el poder de SQL dins del teu codi procedimental, permetent una manipulació de dades complexa i un control de transaccions. Entenent com utilitzar les sentències DML, el control de transaccions i els cursors, pots interactuar eficientment amb la base de dades i gestionar dades dins dels teus programes PL/SQL. Practica aquests conceptes amb diversos exemples per obtenir una comprensió més profunda i convertir-te en un expert en inserir SQL en PL/SQL.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
