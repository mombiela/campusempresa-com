<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Millors Pràctiques per al Maneig d'Errors</title>

    <link rel="alternate" href="https://campusempresa.com/es/plsql/error-handling-best-practices" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/plsql/error-handling-best-practices" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/plsql/error-handling-best-practices" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/plsql/error-handling-best-practices" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>El maneig d'errors és un aspecte crucial de la programació en PL/SQL. Un maneig d'errors adequat assegura que els teus programes puguin gestionar situacions inesperades de manera elegant i proporcionar retroalimentació significativa als usuaris. Aquest tema cobrirà les millors pràctiques per al maneig d'errors en PL/SQL, des de nivells bàsics fins a avançats.</p>
</div><h1>Introducció al Maneig d'Errors</h1>
<div class='content'><ul>
<li><strong>Definició</strong>: El maneig d'errors en PL/SQL implica detectar i gestionar errors que es produeixen durant l'execució d'un bloc PL/SQL.</li>
<li><strong>Tipus d'Errors</strong>:
<ul>
<li><strong>Errors de Sintaxi</strong>: Detectats en temps de compilació.</li>
<li><strong>Errors d'Execució</strong>: Detectats durant l'execució.</li>
<li><strong>Errors Lògics</strong>: Resulten d'una lògica incorrecta en el codi.</li>
</ul>
</li>
</ul>
</div><h1>Maneig Bàsic d'Errors amb EXCEPTION</h1>
<div class='content'><p>PL/SQL proporciona el bloc <code>EXCEPTION</code> per gestionar errors d'execució.</p>
</div><h2>Sintaxi</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAtLSBFbCB0ZXUgY29kaSBhcXXDrQpFWENFUFRJT04KICBXSEVOIGV4Y2VwdGlvbl9uYW1lIFRIRU4KICAgIC0tIENvZGkgZGUgbWFuZWlnIGQnZXJyb3JzIGFxdcOtCkVORDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
  -- El teu codi aqu&iacute;
EXCEPTION
  WHEN exception_name THEN
    -- Codi de maneig d'errors aqu&iacute;
END;</pre></div><div class='content'></div><h2>Exemple</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAtLSBJbnRlbnRhciBkaXZpZGlyIHBlciB6ZXJvCiAgREVDTEFSRQogICAgbnVtMSBOVU1CRVIgOj0gMTA7CiAgICBudW0yIE5VTUJFUiA6PSAwOwogICAgcmVzdWx0IE5VTUJFUjsKICBCRUdJTgogICAgcmVzdWx0IDo9IG51bTEgLyBudW0yOwogIEVYQ0VQVElPTgogICAgV0hFTiBaRVJPX0RJVklERSBUSEVOCiAgICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdFcnJvcjogRGl2aXNpw7MgcGVyIHplcm8uJyk7CiAgRU5EOwpFTkQ7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
  -- Intentar dividir per zero
  DECLARE
    num1 NUMBER := 10;
    num2 NUMBER := 0;
    result NUMBER;
  BEGIN
    result := num1 / num2;
  EXCEPTION
    WHEN ZERO_DIVIDE THEN
      DBMS_OUTPUT.PUT_LINE('Error: Divisi&oacute; per zero.');
  END;
END;</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: En aquest exemple, l'excepció <code>ZERO_DIVIDE</code> és capturada i es mostra un missatge.</li>
</ul>
</div><h1>Excepcions Predefinides Comunament Utilitzades</h1>
<div class='content'><ul>
<li><strong>NO_DATA_FOUND</strong>: Es produeix quan una instrucció SELECT INTO no retorna cap fila.</li>
<li><strong>TOO_MANY_ROWS</strong>: Es produeix quan una instrucció SELECT INTO retorna més d'una fila.</li>
<li><strong>INVALID_CURSOR</strong>: Es produeix quan s'intenta una operació il·legal amb un cursor.</li>
</ul>
</div><h2>Exemple</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICBERUNMQVJFCiAgICB2X25hbWUgVkFSQ0hBUjIoNTApOwogIEJFR0lOCiAgICBTRUxFQ1QgbmFtZSBJTlRPIHZfbmFtZSBGUk9NIGVtcGxveWVlcyBXSEVSRSBlbXBsb3llZV9pZCA9IDk5OTk7CiAgRVhDRVBUSU9OCiAgICBXSEVOIE5PX0RBVEFfRk9VTkQgVEhFTgogICAgICBEQk1TX09VVFBVVC5QVVRfTElORSgnRXJyb3I6IE5vIHMnaGEgdHJvYmF0IGNhcCBlbXBsZWF0IGFtYiBsJ0lEIDk5OTkuJyk7CiAgRU5EOwpFTkQ7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
  DECLARE
    v_name VARCHAR2(50);
  BEGIN
    SELECT name INTO v_name FROM employees WHERE employee_id = 9999;
  EXCEPTION
    WHEN NO_DATA_FOUND THEN
      DBMS_OUTPUT.PUT_LINE('Error: No s'ha trobat cap empleat amb l'ID 9999.');
  END;
END;</pre></div><div class='content'></div><h1>Excepcions Definides per l'Usuari</h1>
<div class='content'><p>Pots definir les teves pròpies excepcions utilitzant la paraula clau <code>EXCEPTION</code>.</p>
</div><h2>Sintaxi</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogIG15X2V4Y2VwdGlvbiBFWENFUFRJT047CkJFR0lOCiAgLS0gRWwgdGV1IGNvZGkgYXF1w60KICBSQUlTRSBteV9leGNlcHRpb247CkVYQ0VQVElPTgogIFdIRU4gbXlfZXhjZXB0aW9uIFRIRU4KICAgIC0tIENvZGkgZGUgbWFuZWlnIGQnZXJyb3JzIGFxdcOtCkVORDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
  my_exception EXCEPTION;
BEGIN
  -- El teu codi aqu&iacute;
  RAISE my_exception;
EXCEPTION
  WHEN my_exception THEN
    -- Codi de maneig d'errors aqu&iacute;
END;</pre></div><div class='content'></div><h2>Exemple</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogIGluc3VmZmljaWVudF9mdW5kcyBFWENFUFRJT047CiAgYmFsYW5jZSBOVU1CRVIgOj0gNTAwOwogIHdpdGhkcmF3YWxfYW1vdW50IE5VTUJFUiA6PSA2MDA7CkJFR0lOCiAgSUYgd2l0aGRyYXdhbF9hbW91bnQgPiBiYWxhbmNlIFRIRU4KICAgIFJBSVNFIGluc3VmZmljaWVudF9mdW5kczsKICBFTkQgSUY7CkVYQ0VQVElPTgogIFdIRU4gaW5zdWZmaWNpZW50X2Z1bmRzIFRIRU4KICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdFcnJvcjogRm9ucyBpbnN1ZmljaWVudHMuJyk7CkVORDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
  insufficient_funds EXCEPTION;
  balance NUMBER := 500;
  withdrawal_amount NUMBER := 600;
BEGIN
  IF withdrawal_amount &gt; balance THEN
    RAISE insufficient_funds;
  END IF;
EXCEPTION
  WHEN insufficient_funds THEN
    DBMS_OUTPUT.PUT_LINE('Error: Fons insuficients.');
END;</pre></div><div class='content'></div><h1>Tècniques Avançades de Maneig d'Errors</h1>
<div class='content'></div><h2>Utilitzant SQLCODE i SQLERRM</h2>
<div class='content'><ul>
<li><strong>SQLCODE</strong>: Retorna el número d'error.</li>
<li><strong>SQLERRM</strong>: Retorna el missatge d'error.</li>
</ul>
</div><h2>Exemple</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICBERUNMQVJFCiAgICBudW0xIE5VTUJFUiA6PSAxMDsKICAgIG51bTIgTlVNQkVSIDo9IDA7CiAgICByZXN1bHQgTlVNQkVSOwogIEJFR0lOCiAgICByZXN1bHQgOj0gbnVtMSAvIG51bTI7CiAgRVhDRVBUSU9OCiAgICBXSEVOIE9USEVSUyBUSEVOCiAgICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdDb2RpIGQnZXJyb3I6ICcgfHwgU1FMQ09ERSk7CiAgICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdNaXNzYXRnZSBkJ2Vycm9yOiAnIHx8IFNRTEVSUk0pOwogIEVORDsKRU5EOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
  DECLARE
    num1 NUMBER := 10;
    num2 NUMBER := 0;
    result NUMBER;
  BEGIN
    result := num1 / num2;
  EXCEPTION
    WHEN OTHERS THEN
      DBMS_OUTPUT.PUT_LINE('Codi d'error: ' || SQLCODE);
      DBMS_OUTPUT.PUT_LINE('Missatge d'error: ' || SQLERRM);
  END;
END;</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: La clàusula <code>WHEN OTHERS</code> captura totes les excepcions, i <code>SQLCODE</code> i <code>SQLERRM</code> proporcionen informació detallada sobre l'error.</li>
</ul>
</div><h2>Propagant Excepcions</h2>
<div class='content'><ul>
<li><strong>RAISE_APPLICATION_ERROR</strong>: Et permet propagar excepcions amb missatges d'error personalitzats.</li>
</ul>
</div><h2>Exemple</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIE9SIFJFUExBQ0UgUFJPQ0VEVVJFIGNoZWNrX2JhbGFuY2UocF9iYWxhbmNlIE5VTUJFUikgSVMKQkVHSU4KICBJRiBwX2JhbGFuY2UgPCAwIFRIRU4KICAgIFJBSVNFX0FQUExJQ0FUSU9OX0VSUk9SKC0yMDAwMSwgJ05vIGVzIHBlcm1ldCB1biBzYWxkbyBuZWdhdGl1LicpOwogIEVORCBJRjsKRU5EOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE OR REPLACE PROCEDURE check_balance(p_balance NUMBER) IS
BEGIN
  IF p_balance &lt; 0 THEN
    RAISE_APPLICATION_ERROR(-20001, 'No es permet un saldo negatiu.');
  END IF;
END;</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>: La procedura <code>RAISE_APPLICATION_ERROR</code> genera una excepció amb un codi d'error i un missatge personalitzat.</li>
</ul>
</div><h1>Millors Pràctiques</h1>
<div class='content'><ul>
<li><strong>Gestiona Sempre les Excepcions Conegudes</strong>: Assegura't de gestionar les excepcions que esperes que puguin ocórrer.</li>
<li><strong>Utilitza WHEN OTHERS amb Moderació</strong>: Evita utilitzar <code>WHEN OTHERS</code> sense un registre adequat o sense tornar a generar l'excepció.</li>
<li><strong>Registra els Errors</strong>: Utilitza mecanismes de registre per enregistrar els detalls dels errors per a la depuració i auditoria.</li>
<li><strong>Proporciona Missatges Significatius</strong>: Assegura't que els missatges d'error siguin clars i útils per a l'usuari final.</li>
<li><strong>Evita Fallades Silencioses</strong>: No suprimeixis excepcions sense gestionar-les adequadament.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Un maneig d'errors efectiu en PL/SQL és essencial per crear aplicacions robustes i fiables. Seguint les millors pràctiques com gestionar excepcions conegudes, utilitzar missatges d'error significatius i registrar errors, pots assegurar-te que els teus programes PL/SQL puguin gestionar situacions inesperades de manera elegant i proporcionar retroalimentació valuosa als usuaris.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
