<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Errors comuns i com evitar-los</title>

    <link rel="alternate" href="https://campusempresa.com/es/plsql/common-pitfalls" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/plsql/common-pitfalls" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/plsql/common-pitfalls" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/plsql/common-pitfalls" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='case-studies-examples'>&#x25C4; Estudis de Cas i Exemples</a></div><div class='col-6 text-end'><a href='preparing-plsql-certification'>Preparació per a la Certificació PL/SQL &#x25BA;</a></div></div><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En aquesta secció, explorarem errors comuns que els desenvolupadors troben quan treballen amb PL/SQL i proporcionarem estratègies per evitar-los. Entendre aquests errors t'ajudarà a escriure codi PL/SQL més eficient, mantenible i lliure d'errors.</p>
</div><h1>1. Ús de cursos implícits en lloc de cursos explícits</h1>
<div class='content'><p>Els cursos implícits són creats automàticament per Oracle per a sentències SQL individuals. Tot i que són convenients, poden portar a problemes de rendiment i menys control sobre el procés d'execució.</p>
<ul>
<li><strong>Error</strong>: Dependència excessiva dels cursos implícits pot portar a codi menys eficient.</li>
<li><strong>Solució</strong>: Utilitza cursos explícits per a millor control i rendiment.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gRXhlbXBsZSBkZSBjdXJzb3IgaW1wbMOtY2l0CkJFR0lOCiAgRk9SIHJlY29yZCBJTiAoU0VMRUNUICogRlJPTSBlbXBsb3llZXMpIExPT1AKICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKHJlY29yZC5maXJzdF9uYW1lKTsKICBFTkQgTE9PUDsKRU5EOwovCgotLSBFeGVtcGxlIGRlIGN1cnNvciBleHBsw61jaXQKREVDTEFSRQogIENVUlNPUiBlbXBfY3Vyc29yIElTIFNFTEVDVCAqIEZST00gZW1wbG95ZWVzOwogIGVtcF9yZWNvcmQgZW1wbG95ZWVzJVJPV1RZUEU7CkJFR0lOCiAgT1BFTiBlbXBfY3Vyc29yOwogIExPT1AKICAgIEZFVENIIGVtcF9jdXJzb3IgSU5UTyBlbXBfcmVjb3JkOwogICAgRVhJVCBXSEVOIGVtcF9jdXJzb3IlTk9URk9VTkQ7CiAgICBEQk1TX09VVFBVVC5QVVRfTElORShlbXBfcmVjb3JkLmZpcnN0X25hbWUpOwogIEVORCBMT09QOwogIENMT1NFIGVtcF9jdXJzb3I7CkVORDsKLw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Exemple de cursor impl&iacute;cit
BEGIN
  FOR record IN (SELECT * FROM employees) LOOP
    DBMS_OUTPUT.PUT_LINE(record.first_name);
  END LOOP;
END;
/

-- Exemple de cursor expl&iacute;cit
DECLARE
  CURSOR emp_cursor IS SELECT * FROM employees;
  emp_record employees%ROWTYPE;
BEGIN
  OPEN emp_cursor;
  LOOP
    FETCH emp_cursor INTO emp_record;
    EXIT WHEN emp_cursor%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE(emp_record.first_name);
  END LOOP;
  CLOSE emp_cursor;
END;
/</pre></div><div class='content'></div><h1>2. No gestionar les excepcions correctament</h1>
<div class='content'><p>Una gestió adequada de les excepcions és crucial per a programes PL/SQL robustos. Ignorar les excepcions o gestionar-les malament pot portar a comportaments inesperats i problemes difícils de depurar.</p>
<ul>
<li><strong>Error</strong>: Capturar excepcions sense una gestió o registre adequat.</li>
<li><strong>Solució</strong>: Utilitza gestors d'excepcions específics i assegura't de registrar i netejar adequadament.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gTWFsYSBnZXN0acOzIGQnZXhjZXBjaW9ucwpCRUdJTgogIC0tIEFsZ3VuYSBvcGVyYWNpw7MgcXVlIHBvdCBmYWxsYXIKICBERUxFVEUgRlJPTSBlbXBsb3llZXMgV0hFUkUgZW1wbG95ZWVfaWQgPSA5OTk5OwpFWENFUFRJT04KICBXSEVOIE9USEVSUyBUSEVOCiAgICBEQk1TX09VVFBVVC5QVVRfTElORSgnUydoYSBwcm9kdcOvdCB1biBlcnJvci4nKTsKRU5EOwovCgotLSBNaWxsb3JhIGVuIGxhIGdlc3Rpw7MgZCdleGNlcGNpb25zCkJFR0lOCiAgLS0gQWxndW5hIG9wZXJhY2nDsyBxdWUgcG90IGZhbGxhcgogIERFTEVURSBGUk9NIGVtcGxveWVlcyBXSEVSRSBlbXBsb3llZV9pZCA9IDk5OTk7CkVYQ0VQVElPTgogIFdIRU4gTk9fREFUQV9GT1VORCBUSEVOCiAgICBEQk1TX09VVFBVVC5QVVRfTElORSgnTm8gcydoYSB0cm9iYXQgY2FwIGVtcGxlYXQgYW1iIGwnSUQgZG9uYXQuJyk7CiAgV0hFTiBPVEhFUlMgVEhFTgogICAgREJNU19PVVRQVVQuUFVUX0xJTkUoJ1MnaGEgcHJvZHXDr3QgdW4gZXJyb3IgaW5lc3BlcmF0OiAnIHx8IFNRTEVSUk0pOwogICAgLS0gRXMgcG9kZW4gZmVyIHJlZ2lzdHJlcyBhZGRpY2lvbmFscyBvIG5ldGVqYSBhcXXDrQpFTkQ7Ci8="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Mala gesti&oacute; d'excepcions
BEGIN
  -- Alguna operaci&oacute; que pot fallar
  DELETE FROM employees WHERE employee_id = 9999;
EXCEPTION
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE('S'ha produ&iuml;t un error.');
END;
/

-- Millora en la gesti&oacute; d'excepcions
BEGIN
  -- Alguna operaci&oacute; que pot fallar
  DELETE FROM employees WHERE employee_id = 9999;
EXCEPTION
  WHEN NO_DATA_FOUND THEN
    DBMS_OUTPUT.PUT_LINE('No s'ha trobat cap empleat amb l'ID donat.');
  WHEN OTHERS THEN
    DBMS_OUTPUT.PUT_LINE('S'ha produ&iuml;t un error inesperat: ' || SQLERRM);
    -- Es poden fer registres addicionals o neteja aqu&iacute;
END;
/</pre></div><div class='content'></div><h1>3. Ús de construccions de bucles ineficients</h1>
<div class='content'><p>L'ús de construccions de bucles ineficients pot degradar el rendiment, especialment quan es treballa amb grans conjunts de dades.</p>
<ul>
<li><strong>Error</strong>: Ús de processament fila per fila (lentament) en lloc d'operacions basades en conjunts.</li>
<li><strong>Solució</strong>: Utilitza operacions massives i SQL basat en conjunts sempre que sigui possible.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gUHJvY2Vzc2FtZW50IGZpbGEgcGVyIGZpbGEgaW5lZmljaWVudApERUNMQVJFCiAgQ1VSU09SIGVtcF9jdXJzb3IgSVMgU0VMRUNUICogRlJPTSBlbXBsb3llZXM7CiAgZW1wX3JlY29yZCBlbXBsb3llZXMlUk9XVFlQRTsKQkVHSU4KICBPUEVOIGVtcF9jdXJzb3I7CiAgTE9PUAogICAgRkVUQ0ggZW1wX2N1cnNvciBJTlRPIGVtcF9yZWNvcmQ7CiAgICBFWElUIFdIRU4gZW1wX2N1cnNvciVOT1RGT1VORDsKICAgIFVQREFURSBlbXBsb3llZXMgU0VUIHNhbGFyeSA9IHNhbGFyeSAqIDEuMSBXSEVSRSBlbXBsb3llZV9pZCA9IGVtcF9yZWNvcmQuZW1wbG95ZWVfaWQ7CiAgRU5EIExPT1A7CiAgQ0xPU0UgZW1wX2N1cnNvcjsKRU5EOwovCgotLSBQcm9jZXNzYW1lbnQgbWFzc2l1IGVmaWNpZW50CkJFR0lOCiAgVVBEQVRFIGVtcGxveWVlcyBTRVQgc2FsYXJ5ID0gc2FsYXJ5ICogMS4xOwpFTkQ7Ci8="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Processament fila per fila ineficient
DECLARE
  CURSOR emp_cursor IS SELECT * FROM employees;
  emp_record employees%ROWTYPE;
BEGIN
  OPEN emp_cursor;
  LOOP
    FETCH emp_cursor INTO emp_record;
    EXIT WHEN emp_cursor%NOTFOUND;
    UPDATE employees SET salary = salary * 1.1 WHERE employee_id = emp_record.employee_id;
  END LOOP;
  CLOSE emp_cursor;
END;
/

-- Processament massiu eficient
BEGIN
  UPDATE employees SET salary = salary * 1.1;
END;
/</pre></div><div class='content'></div><h1>4. No utilitzar variables de vinculació</h1>
<div class='content'><p>Les variables de vinculació ajuden a reduir la sobrecàrrega de l'anàlisi i millorar el rendiment permetent la reutilització de sentències SQL.</p>
<ul>
<li><strong>Error</strong>: Codificar valors directament en les sentències SQL.</li>
<li><strong>Solució</strong>: Utilitza variables de vinculació per millorar el rendiment i la seguretat.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gU2Vuc2UgdmFyaWFibGVzIGRlIHZpbmN1bGFjacOzCkRFQ0xBUkUKICB2X2VtcGxveWVlX2lkIE5VTUJFUiA6PSAxMDE7CkJFR0lOCiAgRVhFQ1VURSBJTU1FRElBVEUgJ1VQREFURSBlbXBsb3llZXMgU0VUIHNhbGFyeSA9IHNhbGFyeSAqIDEuMSBXSEVSRSBlbXBsb3llZV9pZCA9ICcgfHwgdl9lbXBsb3llZV9pZDsKRU5EOwovCgotLSBBbWIgdmFyaWFibGVzIGRlIHZpbmN1bGFjacOzCkRFQ0xBUkUKICB2X2VtcGxveWVlX2lkIE5VTUJFUiA6PSAxMDE7CkJFR0lOCiAgRVhFQ1VURSBJTU1FRElBVEUgJ1VQREFURSBlbXBsb3llZXMgU0VUIHNhbGFyeSA9IHNhbGFyeSAqIDEuMSBXSEVSRSBlbXBsb3llZV9pZCA9IDppZCcgVVNJTkcgdl9lbXBsb3llZV9pZDsKRU5EOwov"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Sense variables de vinculaci&oacute;
DECLARE
  v_employee_id NUMBER := 101;
BEGIN
  EXECUTE IMMEDIATE 'UPDATE employees SET salary = salary * 1.1 WHERE employee_id = ' || v_employee_id;
END;
/

-- Amb variables de vinculaci&oacute;
DECLARE
  v_employee_id NUMBER := 101;
BEGIN
  EXECUTE IMMEDIATE 'UPDATE employees SET salary = salary * 1.1 WHERE employee_id = :id' USING v_employee_id;
END;
/</pre></div><div class='content'></div><h1>5. Ignorar la llegibilitat i mantenibilitat del codi</h1>
<div class='content'><p>Escriure codi que sigui difícil de llegir i mantenir pot portar a problemes a llarg termini, especialment en projectes grans.</p>
<ul>
<li><strong>Error</strong>: Escriure codi complex i il·legible.</li>
<li><strong>Solució</strong>: Segueix les millors pràctiques per a la llegibilitat del codi, com utilitzar noms de variables significatius, comentaris i formatació consistent.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gTWFsYSBsbGVnaWJpbGl0YXQKREVDTEFSRQogIHggTlVNQkVSIDo9IDEwMDsKICB5IE5VTUJFUiA6PSAyMDA7CkJFR0lOCiAgSUYgeCA+IHkgVEhFTgogICAgREJNU19PVVRQVVQuUFVUX0xJTkUoJ1ggw6lzIG3DqXMgZ3JhbicpOwogIEVMU0UKICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdZIMOpcyBtw6lzIGdyYW4nKTsKICBFTkQgSUY7CkVORDsKLwoKLS0gTWlsbG9yYSBlbiBsYSBsbGVnaWJpbGl0YXQKREVDTEFSRQogIGVtcGxveWVlX2NvdW50IE5VTUJFUiA6PSAxMDA7CiAgZGVwYXJ0bWVudF9jb3VudCBOVU1CRVIgOj0gMjAwOwpCRUdJTgogIElGIGVtcGxveWVlX2NvdW50ID4gZGVwYXJ0bWVudF9jb3VudCBUSEVOCiAgICBEQk1TX09VVFBVVC5QVVRfTElORSgnRWwgbm9tYnJlIGQnZW1wbGVhdHMgw6lzIG3DqXMgZ3JhbiBxdWUgZWwgbm9tYnJlIGRlIGRlcGFydGFtZW50cycpOwogIEVMU0UKICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdFbCBub21icmUgZGUgZGVwYXJ0YW1lbnRzIMOpcyBtw6lzIGdyYW4gcXVlIGVsIG5vbWJyZSBkJ2VtcGxlYXRzJyk7CiAgRU5EIElGOwpFTkQ7Ci8="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Mala llegibilitat
DECLARE
  x NUMBER := 100;
  y NUMBER := 200;
BEGIN
  IF x &gt; y THEN
    DBMS_OUTPUT.PUT_LINE('X &eacute;s m&eacute;s gran');
  ELSE
    DBMS_OUTPUT.PUT_LINE('Y &eacute;s m&eacute;s gran');
  END IF;
END;
/

-- Millora en la llegibilitat
DECLARE
  employee_count NUMBER := 100;
  department_count NUMBER := 200;
BEGIN
  IF employee_count &gt; department_count THEN
    DBMS_OUTPUT.PUT_LINE('El nombre d'empleats &eacute;s m&eacute;s gran que el nombre de departaments');
  ELSE
    DBMS_OUTPUT.PUT_LINE('El nombre de departaments &eacute;s m&eacute;s gran que el nombre d'empleats');
  END IF;
END;
/</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Sent conscient d'aquests errors comuns i implementant les solucions suggerides, pots escriure codi PL/SQL més eficient, mantenible i robust. Sempre esforça't per entendre els mecanismes subjacents de PL/SQL i segueix les millors pràctiques per evitar aquests errors comuns.</p>
</div><div class='row navigation'><div class='col-6'><a href='case-studies-examples'>&#x25C4; Estudis de Cas i Exemples</a></div><div class='col-6 text-end'><a href='preparing-plsql-certification'>Preparació per a la Certificació PL/SQL &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
