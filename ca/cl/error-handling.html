<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestió d'Errors en CL (Control Language)</title>

    <link rel="alternate" href="https://campusempresa.com/es/cl/error-handling" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/cl/error-handling" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/cl/error-handling" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/cl/error-handling" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='looping-constructs'>&#x25C4;Construccions de Bucle</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Gestió d'Errors en CL (Control Language)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='subroutines-procedures'>Subrutines i Procediments &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La gestió d'errors és un aspecte crucial de la programació en Control Language (CL) en sistemes IBM i. Una gestió d'errors adequada assegura que els teus programes puguin gestionar situacions inesperades de manera elegant i proporcionar retroalimentació significativa als usuaris. Aquest tema et guiarà des dels conceptes bàsics de la gestió d'errors en CL fins a tècniques més avançades.</p>
</div><h1>Introducció a la Gestió d'Errors</h1>
<div class='content'><p>La gestió d'errors en CL implica detectar i respondre als errors que es produeixen durant l'execució d'un programa CL. Això pot incloure errors del sistema, errors d'usuari o condicions inesperades.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Missatges d'Error</strong>: Missatges generats pel sistema quan es produeix un error.</li>
<li><strong>Comandes de Gestió de Missatges</strong>: Comandes utilitzades per gestionar missatges, com <code>MONMSG</code> (Monitor Message).</li>
<li><strong>Estructura de Dades d'Estat del Programa (PSDS)</strong>: Una estructura de dades que conté informació sobre l'estat del programa, incloent informació d'error.</li>
</ul>
</div><h1>Gestió Bàsica d'Errors</h1>
<div class='content'></div><h2>Ús de la Comanda MONMSG</h2>
<div class='content'><p>La comanda <code>MONMSG</code> s'utilitza per monitoritzar missatges específics i prendre accions quan es reben aquests missatges.</p>
<h4>Exemple</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICAvKiBJbnRlbnRhciBlbGltaW5hciB1biBmaXR4ZXIgKi8KICAgIERMVEYgRklMRShNWUxJQi9NWUZJTEUpCiAgICAvKiBNb25pdG9yaXR6YXIgZXJyb3IgZGUgZml0eGVyIG5vIHRyb2JhdCAqLwogICAgTU9OTVNHIE1TR0lEKENQRjIxMDUpIEVYRUMoRE8pCiAgICAgICAgLyogR2VzdGlvbmFyIGwnZXJyb3IgKi8KICAgICAgICBTTkRQR01NU0cgTVNHKCdGaXR4ZXIgbm8gdHJvYmF0LiBTaSB1cyBwbGF1LCBjb21wcm92YSBlbCBub20gZGVsIGZpdHhlci4nKQogICAgRU5ERE8KRU5EUEdN"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    /* Intentar eliminar un fitxer */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitoritzar error de fitxer no trobat */
    MONMSG MSGID(CPF2105) EXEC(DO)
        /* Gestionar l'error */
        SNDPGMMSG MSG('Fitxer no trobat. Si us plau, comprova el nom del fitxer.')
    ENDDO
ENDPGM</pre></div><div class='content'><p>En aquest exemple:</p>
<ul>
<li>La comanda <code>DLTF</code> intenta eliminar un fitxer.</li>
<li>La comanda <code>MONMSG</code> monitoritza el missatge <code>CPF2105</code>, que indica que el fitxer no s'ha trobat.</li>
<li>Si es rep el missatge, s'envia un missatge de programa per informar l'usuari.</li>
</ul>
</div><h1>Gestió Intermèdia d'Errors</h1>
<div class='content'></div><h2>Ús de Múltiples Comandes MONMSG</h2>
<div class='content'><p>Pots utilitzar múltiples comandes <code>MONMSG</code> per gestionar diferents errors de diferents maneres.</p>
<h4>Exemple</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICAvKiBJbnRlbnRhciBlbGltaW5hciB1biBmaXR4ZXIgKi8KICAgIERMVEYgRklMRShNWUxJQi9NWUZJTEUpCiAgICAvKiBNb25pdG9yaXR6YXIgZXJyb3IgZGUgZml0eGVyIG5vIHRyb2JhdCAqLwogICAgTU9OTVNHIE1TR0lEKENQRjIxMDUpIEVYRUMoRE8pCiAgICAgICAgU05EUEdNTVNHIE1TRygnRml0eGVyIG5vIHRyb2JhdC4gU2kgdXMgcGxhdSwgY29tcHJvdmEgZWwgbm9tIGRlbCBmaXR4ZXIuJykKICAgIEVORERPCiAgICAvKiBNb25pdG9yaXR6YXIgZXJyb3IgZGUgZml0eGVyIGVuIMO6cyAqLwogICAgTU9OTVNHIE1TR0lEKENQRjIxMTApIEVYRUMoRE8pCiAgICAgICAgU05EUEdNTVNHIE1TRygnRWwgZml0eGVyIGVzdMOgIGVuIMO6cyBhY3R1YWxtZW50LiBTaSB1cyBwbGF1LCBpbnRlbnRhLWhvIG3DqXMgdGFyZC4nKQogICAgRU5ERE8KRU5EUEdN"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    /* Intentar eliminar un fitxer */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitoritzar error de fitxer no trobat */
    MONMSG MSGID(CPF2105) EXEC(DO)
        SNDPGMMSG MSG('Fitxer no trobat. Si us plau, comprova el nom del fitxer.')
    ENDDO
    /* Monitoritzar error de fitxer en &uacute;s */
    MONMSG MSGID(CPF2110) EXEC(DO)
        SNDPGMMSG MSG('El fitxer est&agrave; en &uacute;s actualment. Si us plau, intenta-ho m&eacute;s tard.')
    ENDDO
ENDPGM</pre></div><div class='content'><p>En aquest exemple:</p>
<ul>
<li>Es fan servir dues comandes <code>MONMSG</code> per gestionar diferents missatges d'error (<code>CPF2105</code> i <code>CPF2110</code>).</li>
</ul>
</div><h2>Ús d'Identificadors de Missatges Genèrics</h2>
<div class='content'><p>Pots utilitzar identificadors de missatges genèrics per gestionar un rang d'errors relacionats.</p>
<h4>Exemple</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICAvKiBJbnRlbnRhciBlbGltaW5hciB1biBmaXR4ZXIgKi8KICAgIERMVEYgRklMRShNWUxJQi9NWUZJTEUpCiAgICAvKiBNb25pdG9yaXR6YXIgcXVhbHNldm9sIGVycm9yIENQRjIxeHggKi8KICAgIE1PTk1TRyBNU0dJRChDUEYyMSMjKSBFWEVDKERPKQogICAgICAgIFNORFBHTU1TRyBNU0coJ1MnaGEgcHJvZHXDr3QgdW4gZXJyb3IgZW4gZWxpbWluYXIgZWwgZml0eGVyLicpCiAgICBFTkRETwpFTkRQR00="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    /* Intentar eliminar un fitxer */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitoritzar qualsevol error CPF21xx */
    MONMSG MSGID(CPF21##) EXEC(DO)
        SNDPGMMSG MSG('S'ha produ&iuml;t un error en eliminar el fitxer.')
    ENDDO
ENDPGM</pre></div><div class='content'><p>En aquest exemple:</p>
<ul>
<li>La comanda <code>MONMSG</code> utilitza l'identificador de missatge genèric <code>CPF21##</code> per gestionar qualsevol error en el rang <code>CPF21xx</code>.</li>
</ul>
</div><h1>Gestió Avançada d'Errors</h1>
<div class='content'></div><h2>Ús de l'Estructura de Dades d'Estat del Programa (PSDS)</h2>
<div class='content'><p>El PSDS es pot utilitzar per obtenir informació detallada sobre l'error que s'ha produït.</p>
<h4>Exemple</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgJk1TR0lEICpDSEFSIDcKICAgIERDTCAmTVNHRFRBICpDSEFSIDI1NgogICAgRENMICZNU0dGICpDSEFSIDEwCgogICAgLyogRGVmaW5pciBlbCBQU0RTICovCiAgICBEQ0xGIEZJTEUoUVNZUy9RQURTUFBHTSkKCiAgICAvKiBJbnRlbnRhciBlbGltaW5hciB1biBmaXR4ZXIgKi8KICAgIERMVEYgRklMRShNWUxJQi9NWUZJTEUpCiAgICAvKiBNb25pdG9yaXR6YXIgcXVhbHNldm9sIGVycm9yICovCiAgICBNT05NU0cgTVNHSUQoQ1BGMDAwMCkgRVhFQyhETykKICAgICAgICAvKiBSZWN1cGVyYXIgbCdpZGVudGlmaWNhZG9yIGRlbCBtaXNzYXRnZSBpIGxlcyBkYWRlcyBkZWwgbWlzc2F0Z2UgKi8KICAgICAgICBSQ1ZNU0cgTVNHVFlQRSgqRElBRykgTVNHSUQoJk1TR0lEKSBNU0dEVEEoJk1TR0RUQSkgTVNHRigmTVNHRikKICAgICAgICAvKiBFbnZpYXIgdW4gbWlzc2F0Z2UgZGUgcHJvZ3JhbWEgYW1iIGVscyBkZXRhbGxzIGRlIGwnZXJyb3IgKi8KICAgICAgICBTTkRQR01NU0cgTVNHKCdFcnJvcjogJyAqQ0FUICZNU0dJRCAqQkNBVCAmTVNHRFRBKQogICAgRU5ERE8KRU5EUEdN"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL &amp;MSGID *CHAR 7
    DCL &amp;MSGDTA *CHAR 256
    DCL &amp;MSGF *CHAR 10

    /* Definir el PSDS */
    DCLF FILE(QSYS/QADSPPGM)

    /* Intentar eliminar un fitxer */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitoritzar qualsevol error */
    MONMSG MSGID(CPF0000) EXEC(DO)
        /* Recuperar l'identificador del missatge i les dades del missatge */
        RCVMSG MSGTYPE(*DIAG) MSGID(&amp;MSGID) MSGDTA(&amp;MSGDTA) MSGF(&amp;MSGF)
        /* Enviar un missatge de programa amb els detalls de l'error */
        SNDPGMMSG MSG('Error: ' *CAT &amp;MSGID *BCAT &amp;MSGDTA)
    ENDDO
ENDPGM</pre></div><div class='content'><p>En aquest exemple:</p>
<ul>
<li>El PSDS s'utilitza per recuperar informació detallada sobre l'error.</li>
<li>La comanda <code>RCVMSG</code> recupera l'identificador del missatge i les dades del missatge.</li>
<li>S'envia un missatge de programa amb els detalls de l'error.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>La gestió d'errors en CL és essencial per crear programes robustos i fàcils d'utilitzar. Utilitzant comandes com <code>MONMSG</code> i aprofitant el PSDS, pots gestionar efectivament els errors i proporcionar retroalimentació significativa als usuaris. A mesura que avancis, podràs crear mecanismes de gestió d'errors més sofisticats per cobrir una àmplia gamma d'escenaris. Recorda, una bona gestió d'errors no només millora la fiabilitat dels teus programes, sinó que també millora l'experiència de l'usuari.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='looping-constructs'>&#x25C4;Construccions de Bucle</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Gestió d'Errors en CL (Control Language)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='subroutines-procedures'>Subrutines i Procediments &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
