<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kotlin DSL (Domain-Specific Language)</title>

    <link rel="alternate" href="https://campusempresa.com/es/kotlin/kotlin-dsl" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/kotlin/kotlin-dsl" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/kotlin/kotlin-dsl" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/kotlin/kotlin-dsl" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció a Kotlin DSL</h1>
<div class='content'><p>Els DSLs (Domain-Specific Languages) de Kotlin són mini-llenguatges especialitzats creats amb Kotlin per resoldre problemes específics de manera més eficient. Aprofiten la sintaxi expressiva de Kotlin i els constructors tipus-segurs per crear codi llegible i mantenible.</p>
<ul>
<li><strong>Definició</strong>: Un DSL és un llenguatge especialitzat adaptat a un domini d'aplicació específic.</li>
<li><strong>Propòsit</strong>: Simplificar tasques complexes i millorar la llegibilitat i mantenibilitat del codi.</li>
<li><strong>Exemples</strong>: Scripts de construcció de Gradle, constructors d'HTML, constructors de consultes SQL.</li>
</ul>
</div><h1>Conceptes Clau dels DSLs de Kotlin</h1>
<div class='content'></div><h2>Constructors Tipus-Segurs</h2>
<div class='content'><p>Els constructors tipus-segurs són un patró comú en els DSLs de Kotlin que asseguren l'estructura correcta del DSL en temps de compilació.</p>
<ul>
<li><strong>Seguretat de Tipus</strong>: Assegura que el DSL s'utilitza correctament, reduint errors en temps d'execució.</li>
<li><strong>Constructors</strong>: Utilitzen lambdes amb receptor de Kotlin per crear estructures niades.</li>
</ul>
<h4>Exemple: Constructor d'HTML</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuIGh0bWwoaW5pdDogSFRNTC4oKSAtPiBVbml0KTogSFRNTCB7CiAgICB2YWwgaHRtbCA9IEhUTUwoKQogICAgaHRtbC5pbml0KCkKICAgIHJldHVybiBodG1sCn0KCmNsYXNzIEhUTUwgewogICAgcHJpdmF0ZSB2YWwgY2hpbGRyZW4gPSBtdXRhYmxlTGlzdE9mPEFueT4oKQoKICAgIGZ1biBib2R5KGluaXQ6IEJPRFkuKCkgLT4gVW5pdCkgewogICAgICAgIHZhbCBib2R5ID0gQk9EWSgpCiAgICAgICAgYm9keS5pbml0KCkKICAgICAgICBjaGlsZHJlbi5hZGQoYm9keSkKICAgIH0KCiAgICBvdmVycmlkZSBmdW4gdG9TdHJpbmcoKTogU3RyaW5nIHsKICAgICAgICByZXR1cm4gIjxodG1sPiR7Y2hpbGRyZW4uam9pblRvU3RyaW5nKCIiKX08L2h0bWw+IgogICAgfQp9CgpjbGFzcyBCT0RZIHsKICAgIHByaXZhdGUgdmFsIGNoaWxkcmVuID0gbXV0YWJsZUxpc3RPZjxTdHJpbmc+KCkKCiAgICBmdW4gcCh0ZXh0OiBTdHJpbmcpIHsKICAgICAgICBjaGlsZHJlbi5hZGQoIjxwPiR0ZXh0PC9wPiIpCiAgICB9CgogICAgb3ZlcnJpZGUgZnVuIHRvU3RyaW5nKCk6IFN0cmluZyB7CiAgICAgICAgcmV0dXJuICI8Ym9keT4ke2NoaWxkcmVuLmpvaW5Ub1N0cmluZygiIil9PC9ib2R5PiIKICAgIH0KfQoKLy8gw5pzCnZhbCBodG1sQ29udGVudCA9IGh0bWwgewogICAgYm9keSB7CiAgICAgICAgcCgiSG9sYSwgTcOzbiEiKQogICAgICAgIHAoIkVscyBEU0xzIGRlIEtvdGxpbiBzw7NuIHBvZGVyb3NvcyEiKQogICAgfQp9CgpwcmludGxuKGh0bWxDb250ZW50KQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>fun html(init: HTML.() -&gt; Unit): HTML {
    val html = HTML()
    html.init()
    return html
}

class HTML {
    private val children = mutableListOf&lt;Any&gt;()

    fun body(init: BODY.() -&gt; Unit) {
        val body = BODY()
        body.init()
        children.add(body)
    }

    override fun toString(): String {
        return &quot;&lt;html&gt;${children.joinToString(&quot;&quot;)}&lt;/html&gt;&quot;
    }
}

class BODY {
    private val children = mutableListOf&lt;String&gt;()

    fun p(text: String) {
        children.add(&quot;&lt;p&gt;$text&lt;/p&gt;&quot;)
    }

    override fun toString(): String {
        return &quot;&lt;body&gt;${children.joinToString(&quot;&quot;)}&lt;/body&gt;&quot;
    }
}

// &Uacute;s
val htmlContent = html {
    body {
        p(&quot;Hola, M&oacute;n!&quot;)
        p(&quot;Els DSLs de Kotlin s&oacute;n poderosos!&quot;)
    }
}

println(htmlContent)</pre></div><div class='content'></div><h2>Funcions d'Extensió</h2>
<div class='content'><p>Les funcions d'extensió permeten afegir nova funcionalitat a classes existents, cosa que és crucial per crear APIs fluides en DSLs.</p>
<ul>
<li><strong>Sintaxi</strong>: <code>fun NomDeClasse.nomDeFunció() { ... }</code></li>
<li><strong>Ús</strong>: Millora la llegibilitat i proporciona una manera natural d'extendre classes.</li>
</ul>
<h4>Exemple: Afegint Funcions a String</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuIFN0cmluZy5ib2xkKCk6IFN0cmluZyB7CiAgICByZXR1cm4gIjxiPiR0aGlzPC9iPiIKfQoKZnVuIFN0cmluZy5pdGFsaWMoKTogU3RyaW5nIHsKICAgIHJldHVybiAiPGk+JHRoaXM8L2k+Igp9CgovLyDDmnMKdmFsIHRleHQgPSAiS290bGluIi5ib2xkKCkuaXRhbGljKCkKcHJpbnRsbih0ZXh0KSAvLyBTb3J0aWRhOiA8aT48Yj5Lb3RsaW48L2I+PC9pPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>fun String.bold(): String {
    return &quot;&lt;b&gt;$this&lt;/b&gt;&quot;
}

fun String.italic(): String {
    return &quot;&lt;i&gt;$this&lt;/i&gt;&quot;
}

// &Uacute;s
val text = &quot;Kotlin&quot;.bold().italic()
println(text) // Sortida: &lt;i&gt;&lt;b&gt;Kotlin&lt;/b&gt;&lt;/i&gt;</pre></div><div class='content'></div><h2>Lambdes amb Receptor</h2>
<div class='content'><p>Les lambdes amb receptor permeten cridar mètodes sobre un objecte receptor implícit dins d'una expressió lambda, fent el DSL més concís i llegible.</p>
<ul>
<li><strong>Sintaxi</strong>: <code>NomDeClasse.() -&gt; Unit</code></li>
<li><strong>Ús</strong>: Utilitzat extensivament en constructors tipus-segurs.</li>
</ul>
<h4>Exemple: DSL de Configuració Personalitzada</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQ29uZmlndXJhdGlvbiB7CiAgICB2YXIgaG9zdDogU3RyaW5nID0gIiIKICAgIHZhciBwb3J0OiBJbnQgPSAwCgogICAgZnVuIGRhdGFiYXNlKGluaXQ6IERhdGFiYXNlLigpIC0+IFVuaXQpIHsKICAgICAgICB2YWwgZGIgPSBEYXRhYmFzZSgpCiAgICAgICAgZGIuaW5pdCgpCiAgICAgICAgcHJpbnRsbigiQmFzZSBkZSBkYWRlcyBjb25maWd1cmFkYSBhbWIgaG9zdDogJHtkYi5ob3N0fSwgcG9ydDogJHtkYi5wb3J0fSIpCiAgICB9Cn0KCmNsYXNzIERhdGFiYXNlIHsKICAgIHZhciBob3N0OiBTdHJpbmcgPSAiIgogICAgdmFyIHBvcnQ6IEludCA9IDAKfQoKLy8gw5pzCnZhbCBjb25maWcgPSBDb25maWd1cmF0aW9uKCkuYXBwbHkgewogICAgaG9zdCA9ICJsb2NhbGhvc3QiCiAgICBwb3J0ID0gODA4MAogICAgZGF0YWJhc2UgewogICAgICAgIGhvc3QgPSAiZGIubG9jYWwiCiAgICAgICAgcG9ydCA9IDU0MzIKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Configuration {
    var host: String = &quot;&quot;
    var port: Int = 0

    fun database(init: Database.() -&gt; Unit) {
        val db = Database()
        db.init()
        println(&quot;Base de dades configurada amb host: ${db.host}, port: ${db.port}&quot;)
    }
}

class Database {
    var host: String = &quot;&quot;
    var port: Int = 0
}

// &Uacute;s
val config = Configuration().apply {
    host = &quot;localhost&quot;
    port = 8080
    database {
        host = &quot;db.local&quot;
        port = 5432
    }
}</pre></div><div class='content'></div><h1>Tècniques Avançades de DSLs de Kotlin</h1>
<div class='content'></div><h2>Funcions Inline</h2>
<div class='content'><p>Les funcions inline poden millorar el rendiment reduint la sobrecàrrega de les crides a funcions, cosa que és particularment útil en DSLs.</p>
<ul>
<li><strong>Sintaxi</strong>: <code>inline fun nomDeFunció() { ... }</code></li>
<li><strong>Ús</strong>: Utilitzat per optimitzar funcions d'ordre superior.</li>
</ul>
<h4>Exemple: Funció Inline en DSL</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW5saW5lIGZ1biBidWlsZFN0cmluZyhidWlsZGVyQWN0aW9uOiBTdHJpbmdCdWlsZGVyLigpIC0+IFVuaXQpOiBTdHJpbmcgewogICAgdmFsIHNiID0gU3RyaW5nQnVpbGRlcigpCiAgICBzYi5idWlsZGVyQWN0aW9uKCkKICAgIHJldHVybiBzYi50b1N0cmluZygpCn0KCi8vIMOacwp2YWwgcmVzdWx0ID0gYnVpbGRTdHJpbmcgewogICAgYXBwZW5kKCJIb2xhLCAiKQogICAgYXBwZW5kKCJNw7NuISIpCn0KcHJpbnRsbihyZXN1bHQpIC8vIFNvcnRpZGE6IEhvbGEsIE3Ds24h"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>inline fun buildString(builderAction: StringBuilder.() -&gt; Unit): String {
    val sb = StringBuilder()
    sb.builderAction()
    return sb.toString()
}

// &Uacute;s
val result = buildString {
    append(&quot;Hola, &quot;)
    append(&quot;M&oacute;n!&quot;)
}
println(result) // Sortida: Hola, M&oacute;n!</pre></div><div class='content'></div><h2>Sobrecàrrega d'Operadors</h2>
<div class='content'><p>La sobrecàrrega d'operadors permet definir comportaments personalitzats per a operadors estàndard, fent el DSL més intuïtiu.</p>
<ul>
<li><strong>Sintaxi</strong>: <code>operator fun plus(other: Type): Type { ... }</code></li>
<li><strong>Ús</strong>: Millora l'expressivitat del DSL.</li>
</ul>
<h4>Exemple: DSL d'Aritmètica de Vectors</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGF0YSBjbGFzcyBWZWN0b3IodmFsIHg6IEludCwgdmFsIHk6IEludCkgewogICAgb3BlcmF0b3IgZnVuIHBsdXMob3RoZXI6IFZlY3Rvcik6IFZlY3RvciB7CiAgICAgICAgcmV0dXJuIFZlY3Rvcih4ICsgb3RoZXIueCwgeSArIG90aGVyLnkpCiAgICB9Cn0KCi8vIMOacwp2YWwgdjEgPSBWZWN0b3IoMSwgMikKdmFsIHYyID0gVmVjdG9yKDMsIDQpCnZhbCByZXN1bHQgPSB2MSArIHYyCnByaW50bG4ocmVzdWx0KSAvLyBTb3J0aWRhOiBWZWN0b3IoeD00LCB5PTYp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>data class Vector(val x: Int, val y: Int) {
    operator fun plus(other: Vector): Vector {
        return Vector(x + other.x, y + other.y)
    }
}

// &Uacute;s
val v1 = Vector(1, 2)
val v2 = Vector(3, 4)
val result = v1 + v2
println(result) // Sortida: Vector(x=4, y=6)</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Els DSLs de Kotlin proporcionen una manera poderosa de crear codi llegible, mantenible i tipus-segur per a dominis específics. Aprofitant constructors tipus-segurs, funcions d'extensió, lambdes amb receptor, funcions inline i sobrecàrrega d'operadors, pots crear DSLs expressius i eficients adaptats a les teves necessitats. A mesura que avances en Kotlin, dominar aquestes tècniques et permetrà construir APIs més sofisticades i fàcils d'utilitzar.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
