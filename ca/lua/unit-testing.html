<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proves Unitàries en Lua</title>

    <link rel="alternate" href="https://campusempresa.com/es/lua/unit-testing" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/lua/unit-testing" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/lua/unit-testing" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/lua/unit-testing" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='using-the-debug-library'>&#x25C4;Utilitzar la Biblioteca de Depuració</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proves Unitàries en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='profiling-lua-code'>Perfilat de Codi Lua &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Les proves unitàries són un aspecte crucial del desenvolupament de programari que assegura que les unitats individuals de codi funcionin com s'espera. En Lua, les proves unitàries es poden realitzar utilitzant diverses biblioteques i marcs de treball. Aquest tema et guiarà des dels conceptes bàsics fins als avançats de les proves unitàries en Lua.</p>
</div><h1>Introducció a les Proves Unitàries</h1>
<div class='content'><ul>
<li><strong>Definició</strong>: Les proves unitàries impliquen provar components o funcions individuals d'un programa per assegurar-se que funcionen correctament.</li>
<li><strong>Propòsit</strong>: Detectar errors aviat, facilitar la refactorització del codi i assegurar la fiabilitat del codi.</li>
<li><strong>Beneficis</strong>:
<ul>
<li>Detecció primerenca d'errors</li>
<li>Depuració simplificada</li>
<li>Millora de la qualitat del codi</li>
<li>Documentació del comportament del codi</li>
</ul>
</li>
</ul>
</div><h1>Configuració d'un Entorn de Proves Unitàries en Lua</h1>
<div class='content'><p>Per realitzar proves unitàries en Lua, necessites configurar un marc de proves. Un dels marcs més populars és <strong>LuaUnit</strong>.</p>
</div><h2>Instal·lant LuaUnit</h2>
<div class='content'><p>Pots instal·lar LuaUnit utilitzant LuaRocks, un gestor de paquets per a Lua.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bHVhcm9ja3MgaW5zdGFsbCBsdWF1bml0"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>luarocks install luaunit</pre></div><div class='content'></div><h2>Estructura Bàsica d'una Prova LuaUnit</h2>
<div class='content'><p>Una prova LuaUnit simple implica definir funcions de prova i executar-les utilitzant el marc LuaUnit.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gSW1wb3J0YXIgTHVhVW5pdApsb2NhbCBsdWF1bml0ID0gcmVxdWlyZSgnbHVhdW5pdCcpCgotLSBEZWZpbmlyIHVuYSBjbGFzc2UgZGUgcHJvdmEKVGVzdE1hdGggPSB7fQoKLS0gRGVmaW5pciB1bmEgZnVuY2nDsyBkZSBwcm92YQpmdW5jdGlvbiBUZXN0TWF0aDp0ZXN0QWRkaXRpb24oKQogICAgbG9jYWwgcmVzdWx0ID0gMSArIDEKICAgIGx1YXVuaXQuYXNzZXJ0RXF1YWxzKHJlc3VsdCwgMikKZW5kCgotLSBFeGVjdXRhciBsZXMgcHJvdmVzCm9zLmV4aXQobHVhdW5pdC5MdWFVbml0LnJ1bigpKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Importar LuaUnit
local luaunit = require('luaunit')

-- Definir una classe de prova
TestMath = {}

-- Definir una funci&oacute; de prova
function TestMath:testAddition()
    local result = 1 + 1
    luaunit.assertEquals(result, 2)
end

-- Executar les proves
os.exit(luaunit.LuaUnit.run())</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>require('luaunit')</code>: Importa la biblioteca LuaUnit.</li>
<li><code>TestMath</code>: Una taula que actua com una classe de prova.</li>
<li><code>TestMath:testAddition()</code>: Una funció de prova que comprova si 1 + 1 és igual a 2.</li>
<li><code>luaunit.assertEquals(result, 2)</code>: Assegura que el resultat és igual a 2.</li>
<li><code>os.exit(luaunit.LuaUnit.run())</code>: Executa totes les proves definides.</li>
</ul>
</li>
</ul>
</div><h1>Escriure Proves Unitàries</h1>
<div class='content'></div><h2>Funcions de Prova</h2>
<div class='content'><ul>
<li><strong>Convenció de Nomenclatura</strong>: Les funcions de prova haurien de començar amb <code>test</code> per ser reconegudes per LuaUnit.</li>
<li><strong>Afirmacions</strong>: LuaUnit proporciona diverses funcions d'afirmació per validar els resultats de les proves.</li>
</ul>
</div><h2>Afirmacions Comunes</h2>
<div class='content'><p>| Funció d'Afirmació          | Descripció                                      |
|-----------------------------|--------------------------------------------------|
| <code>luaunit.assertEquals(a, b)</code>| Assegura que <code>a</code> és igual a <code>b</code>.                 |
| <code>luaunit.assertNotEquals(a, b)</code> | Assegura que <code>a</code> no és igual a <code>b</code>.             |
| <code>luaunit.assertTrue(a)</code>     | Assegura que <code>a</code> és cert.                        |
| <code>luaunit.assertFalse(a)</code>    | Assegura que <code>a</code> és fals.                        |
| <code>luaunit.assertNil(a)</code>      | Assegura que <code>a</code> és nil.                         |
| <code>luaunit.assertNotNil(a)</code>   | Assegura que <code>a</code> no és nil.                      |</p>
</div><h2>Exemple: Provant una Funció Lua</h2>
<div class='content'><p>Escrivim una prova unitària per a una simple funció Lua que calcula el factorial d'un número.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gRnVuY2nDsyBmYWN0b3JpYWwKZnVuY3Rpb24gZmFjdG9yaWFsKG4pCiAgICBpZiBuID09IDAgdGhlbgogICAgICAgIHJldHVybiAxCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIG4gKiBmYWN0b3JpYWwobiAtIDEpCiAgICBlbmQKZW5kCgotLSBDbGFzc2UgZGUgcHJvdmEgcGVyIGEgbGEgZnVuY2nDsyBmYWN0b3JpYWwKVGVzdEZhY3RvcmlhbCA9IHt9CgpmdW5jdGlvbiBUZXN0RmFjdG9yaWFsOnRlc3RGYWN0b3JpYWxPZlplcm8oKQogICAgbHVhdW5pdC5hc3NlcnRFcXVhbHMoZmFjdG9yaWFsKDApLCAxKQplbmQKCmZ1bmN0aW9uIFRlc3RGYWN0b3JpYWw6dGVzdEZhY3RvcmlhbE9mRml2ZSgpCiAgICBsdWF1bml0LmFzc2VydEVxdWFscyhmYWN0b3JpYWwoNSksIDEyMCkKZW5kCgotLSBFeGVjdXRhciBsZXMgcHJvdmVzCm9zLmV4aXQobHVhdW5pdC5MdWFVbml0LnJ1bigpKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Funci&oacute; factorial
function factorial(n)
    if n == 0 then
        return 1
    else
        return n * factorial(n - 1)
    end
end

-- Classe de prova per a la funci&oacute; factorial
TestFactorial = {}

function TestFactorial:testFactorialOfZero()
    luaunit.assertEquals(factorial(0), 1)
end

function TestFactorial:testFactorialOfFive()
    luaunit.assertEquals(factorial(5), 120)
end

-- Executar les proves
os.exit(luaunit.LuaUnit.run())</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>factorial(n)</code>: Una funció recursiva per calcular el factorial de <code>n</code>.</li>
<li><code>TestFactorial:testFactorialOfZero()</code>: Prova si el factorial de 0 és 1.</li>
<li><code>TestFactorial:testFactorialOfFive()</code>: Prova si el factorial de 5 és 120.</li>
</ul>
</li>
</ul>
</div><h1>Conceptes Avançats de Proves Unitàries</h1>
<div class='content'></div><h2>Fixtures de Prova</h2>
<div class='content'><p>Els fixtures de prova s'utilitzen per configurar i desmuntar l'entorn abans i després de cada prova.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VGVzdEZpeHR1cmVFeGFtcGxlID0ge30KCmZ1bmN0aW9uIFRlc3RGaXh0dXJlRXhhbXBsZTpzZXRVcCgpCiAgICAtLSBDb2RpIHBlciBjb25maWd1cmFyIGwnZW50b3JuIGRlIHByb3ZhCiAgICBzZWxmLnZhbHVlID0gMTAKZW5kCgpmdW5jdGlvbiBUZXN0Rml4dHVyZUV4YW1wbGU6dGVhckRvd24oKQogICAgLS0gQ29kaSBwZXIgbmV0ZWphciBsJ2VudG9ybiBkZSBwcm92YQogICAgc2VsZi52YWx1ZSA9IG5pbAplbmQKCmZ1bmN0aW9uIFRlc3RGaXh0dXJlRXhhbXBsZTp0ZXN0VmFsdWUoKQogICAgbHVhdW5pdC5hc3NlcnRFcXVhbHMoc2VsZi52YWx1ZSwgMTApCmVuZAoKb3MuZXhpdChsdWF1bml0Lkx1YVVuaXQucnVuKCkp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>TestFixtureExample = {}

function TestFixtureExample:setUp()
    -- Codi per configurar l'entorn de prova
    self.value = 10
end

function TestFixtureExample:tearDown()
    -- Codi per netejar l'entorn de prova
    self.value = nil
end

function TestFixtureExample:testValue()
    luaunit.assertEquals(self.value, 10)
end

os.exit(luaunit.LuaUnit.run())</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>setUp()</code>: Inicialitza l'entorn de prova.</li>
<li><code>tearDown()</code>: Neteja l'entorn de prova.</li>
<li><code>testValue()</code>: Prova si el valor està configurat correctament.</li>
</ul>
</li>
</ul>
</div><h2>Mocking i Stubbing</h2>
<div class='content'><p>El mocking i el stubbing són tècniques utilitzades per simular el comportament d'objectes o funcions complexes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gRnVuY2nDsyBvcmlnaW5hbApmdW5jdGlvbiBmZXRjaERhdGEoKQogICAgLS0gU2ltdWxhciBsYSByZWN1cGVyYWNpw7MgZGUgZGFkZXMgZCd1bmEgYmFzZSBkZSBkYWRlcwogICAgcmV0dXJuICJyZWFsIGRhdGEiCmVuZAoKLS0gRnVuY2nDsyBtb2NrCmZ1bmN0aW9uIG1vY2tGZXRjaERhdGEoKQogICAgcmV0dXJuICJtb2NrIGRhdGEiCmVuZAoKLS0gQ2xhc3NlIGRlIHByb3ZhIHBlciBhIG1vY2tpbmcKVGVzdE1vY2tpbmcgPSB7fQoKZnVuY3Rpb24gVGVzdE1vY2tpbmc6dGVzdEZldGNoRGF0YSgpCiAgICAtLSBTdWJzdGl0dWlyIGZldGNoRGF0YSBwZXIgbW9ja0ZldGNoRGF0YQogICAgbG9jYWwgb3JpZ2luYWxGZXRjaERhdGEgPSBmZXRjaERhdGEKICAgIGZldGNoRGF0YSA9IG1vY2tGZXRjaERhdGEKCiAgICBsdWF1bml0LmFzc2VydEVxdWFscyhmZXRjaERhdGEoKSwgIm1vY2sgZGF0YSIpCgogICAgLS0gUmVzdGF1cmFyIGxhIGZ1bmNpw7Mgb3JpZ2luYWwKICAgIGZldGNoRGF0YSA9IG9yaWdpbmFsRmV0Y2hEYXRhCmVuZAoKb3MuZXhpdChsdWF1bml0Lkx1YVVuaXQucnVuKCkp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Funci&oacute; original
function fetchData()
    -- Simular la recuperaci&oacute; de dades d'una base de dades
    return &quot;real data&quot;
end

-- Funci&oacute; mock
function mockFetchData()
    return &quot;mock data&quot;
end

-- Classe de prova per a mocking
TestMocking = {}

function TestMocking:testFetchData()
    -- Substituir fetchData per mockFetchData
    local originalFetchData = fetchData
    fetchData = mockFetchData

    luaunit.assertEquals(fetchData(), &quot;mock data&quot;)

    -- Restaurar la funci&oacute; original
    fetchData = originalFetchData
end

os.exit(luaunit.LuaUnit.run())</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>mockFetchData()</code>: Una funció mock que retorna &quot;mock data&quot;.</li>
<li><code>TestMocking:testFetchData()</code>: Substitueix <code>fetchData</code> per <code>mockFetchData</code> i prova el comportament.</li>
</ul>
</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Les proves unitàries són una pràctica essencial en el desenvolupament de programari que ajuda a assegurar la fiabilitat i qualitat del codi. Utilitzant LuaUnit, pots escriure i executar proves per al teu codi Lua de manera eficient. Aquest tema ha cobert els conceptes bàsics de la configuració de LuaUnit, l'escriptura de proves simples i avançades, i l'ús de fixtures de prova i tècniques de mocking. Amb aquestes eines i tècniques, pots desenvolupar i mantenir aplicacions Lua robustes amb confiança.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='using-the-debug-library'>&#x25C4;Utilitzar la Biblioteca de Depuració</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proves Unitàries en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='profiling-lua-code'>Perfilat de Codi Lua &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
