<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestió d'Errors en Lua</title>

    <link rel="alternate" href="https://campusempresa.com/es/lua/error-handling" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/lua/error-handling" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/lua/error-handling" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/lua/error-handling" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='modules-and-packages'>&#x25C4;Mòduls i Paquets</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Gestió d'Errors en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-oop'>Introducció a la POO &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La gestió d'errors és un aspecte crucial de la programació que assegura que el teu codi pugui manejar situacions inesperades de manera elegant. En Lua, la gestió d'errors es maneja mitjançant una combinació de funcions i estructures de control. Aquesta secció et guiarà des dels conceptes bàsics fins a tècniques avançades en la gestió d'errors.</p>
</div><h1>Gestió Bàsica d'Errors</h1>
<div class='content'></div><h2>La Funció `error`</h2>
<div class='content'><ul>
<li>La funció <code>error</code> s'utilitza per generar un error en Lua.</li>
<li>Atura l'execució del programa i mostra un missatge d'error.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICBpZiBiID09IDAgdGhlbgogICAgICAgIGVycm9yKCJEaXZpc2nDsyBwZXIgemVybyEiKQogICAgZWxzZQogICAgICAgIHJldHVybiBhIC8gYgogICAgZW5kCmVuZAoKcHJpbnQoZGl2aWRlKDEwLCAyKSkgIC0tIFNvcnRpZGE6IDUKcHJpbnQoZGl2aWRlKDEwLCAwKSkgIC0tIEVycm9yOiBEaXZpc2nDsyBwZXIgemVybyE="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function divide(a, b)
    if b == 0 then
        error(&quot;Divisi&oacute; per zero!&quot;)
    else
        return a / b
    end
end

print(divide(10, 2))  -- Sortida: 5
print(divide(10, 0))  -- Error: Divisi&oacute; per zero!</pre></div><div class='content'></div><h2>La Funció `pcall`</h2>
<div class='content'><ul>
<li>La funció <code>pcall</code> (crida protegida) s'utilitza per cridar una funció en mode protegit.</li>
<li>Retorna un booleà indicant èxit o fracàs, seguit dels valors de retorn de la funció o del missatge d'error.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICBpZiBiID09IDAgdGhlbgogICAgICAgIGVycm9yKCJEaXZpc2nDsyBwZXIgemVybyEiKQogICAgZWxzZQogICAgICAgIHJldHVybiBhIC8gYgogICAgZW5kCmVuZAoKbG9jYWwgc3RhdHVzLCByZXN1bHQgPSBwY2FsbChkaXZpZGUsIDEwLCAyKQppZiBzdGF0dXMgdGhlbgogICAgcHJpbnQocmVzdWx0KSAgLS0gU29ydGlkYTogNQplbHNlCiAgICBwcmludCgiRXJyb3I6ICIgLi4gcmVzdWx0KQplbmQKCnN0YXR1cywgcmVzdWx0ID0gcGNhbGwoZGl2aWRlLCAxMCwgMCkKaWYgc3RhdHVzIHRoZW4KICAgIHByaW50KHJlc3VsdCkKZWxzZQogICAgcHJpbnQoIkVycm9yOiAiIC4uIHJlc3VsdCkgIC0tIFNvcnRpZGE6IEVycm9yOiBEaXZpc2nDsyBwZXIgemVybyEKZW5k"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function divide(a, b)
    if b == 0 then
        error(&quot;Divisi&oacute; per zero!&quot;)
    else
        return a / b
    end
end

local status, result = pcall(divide, 10, 2)
if status then
    print(result)  -- Sortida: 5
else
    print(&quot;Error: &quot; .. result)
end

status, result = pcall(divide, 10, 0)
if status then
    print(result)
else
    print(&quot;Error: &quot; .. result)  -- Sortida: Error: Divisi&oacute; per zero!
end</pre></div><div class='content'></div><h1>Gestió Intermèdia d'Errors</h1>
<div class='content'></div><h2>La Funció `xpcall`</h2>
<div class='content'><ul>
<li>La funció <code>xpcall</code> és similar a <code>pcall</code> però et permet especificar un gestor d'errors.</li>
<li>Això pot ser útil per registrar errors o realitzar tasques de neteja.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICBpZiBiID09IDAgdGhlbgogICAgICAgIGVycm9yKCJEaXZpc2nDsyBwZXIgemVybyEiKQogICAgZWxzZQogICAgICAgIHJldHVybiBhIC8gYgogICAgZW5kCmVuZAoKZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGVycikKICAgIHJldHVybiAiRXJyb3IgY2FwdHVyYXQ6ICIgLi4gZXJyCmVuZAoKbG9jYWwgc3RhdHVzLCByZXN1bHQgPSB4cGNhbGwoZGl2aWRlLCBlcnJvckhhbmRsZXIsIDEwLCAwKQppZiBzdGF0dXMgdGhlbgogICAgcHJpbnQocmVzdWx0KQplbHNlCiAgICBwcmludChyZXN1bHQpICAtLSBTb3J0aWRhOiBFcnJvciBjYXB0dXJhdDogRGl2aXNpw7MgcGVyIHplcm8hCmVuZA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function divide(a, b)
    if b == 0 then
        error(&quot;Divisi&oacute; per zero!&quot;)
    else
        return a / b
    end
end

function errorHandler(err)
    return &quot;Error capturat: &quot; .. err
end

local status, result = xpcall(divide, errorHandler, 10, 0)
if status then
    print(result)
else
    print(result)  -- Sortida: Error capturat: Divisi&oacute; per zero!
end</pre></div><div class='content'></div><h2>Missatges d'Error Personalitzats</h2>
<div class='content'><ul>
<li>Pots crear missatges d'error personalitzats per proporcionar més context sobre l'error.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gcmVhZEZpbGUoZmlsZW5hbWUpCiAgICBsb2NhbCBmaWxlLCBlcnIgPSBpby5vcGVuKGZpbGVuYW1lLCAiciIpCiAgICBpZiBub3QgZmlsZSB0aGVuCiAgICAgICAgZXJyb3IoIk5vIHMnaGEgcG9ndXQgb2JyaXIgZWwgZml0eGVyOiAiIC4uIGVycikKICAgIGVuZAogICAgLS0gTGxlZ2lyIGVsIGNvbnRpbmd1dCBkZWwgZml0eGVyCiAgICBsb2NhbCBjb250ZW50ID0gZmlsZTpyZWFkKCIqYSIpCiAgICBmaWxlOmNsb3NlKCkKICAgIHJldHVybiBjb250ZW50CmVuZAoKbG9jYWwgc3RhdHVzLCByZXN1bHQgPSBwY2FsbChyZWFkRmlsZSwgImluZXhpc3RlbnQudHh0IikKaWYgc3RhdHVzIHRoZW4KICAgIHByaW50KHJlc3VsdCkKZWxzZQogICAgcHJpbnQoIkVycm9yOiAiIC4uIHJlc3VsdCkgIC0tIFNvcnRpZGE6IEVycm9yOiBObyBzJ2hhIHBvZ3V0IG9icmlyIGVsIGZpdHhlcjogaW5leGlzdGVudC50eHQ6IE5vIHN1Y2ggZmlsZSBvciBkaXJlY3RvcnkKZW5k"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function readFile(filename)
    local file, err = io.open(filename, &quot;r&quot;)
    if not file then
        error(&quot;No s'ha pogut obrir el fitxer: &quot; .. err)
    end
    -- Llegir el contingut del fitxer
    local content = file:read(&quot;*a&quot;)
    file:close()
    return content
end

local status, result = pcall(readFile, &quot;inexistent.txt&quot;)
if status then
    print(result)
else
    print(&quot;Error: &quot; .. result)  -- Sortida: Error: No s'ha pogut obrir el fitxer: inexistent.txt: No such file or directory
end</pre></div><div class='content'></div><h1>Gestió Avançada d'Errors</h1>
<div class='content'></div><h2>Propagació d'Errors</h2>
<div class='content'><ul>
<li>Els errors es poden propagar cap amunt a la pila de crides utilitzant <code>error</code>.</li>
<li>Això permet que funcions de nivell superior gestionin errors generats per funcions de nivell inferior.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gcmVhZEZpbGUoZmlsZW5hbWUpCiAgICBsb2NhbCBmaWxlLCBlcnIgPSBpby5vcGVuKGZpbGVuYW1lLCAiciIpCiAgICBpZiBub3QgZmlsZSB0aGVuCiAgICAgICAgZXJyb3IoIk5vIHMnaGEgcG9ndXQgb2JyaXIgZWwgZml0eGVyOiAiIC4uIGVycikKICAgIGVuZAogICAgbG9jYWwgY29udGVudCA9IGZpbGU6cmVhZCgiKmEiKQogICAgZmlsZTpjbG9zZSgpCiAgICByZXR1cm4gY29udGVudAplbmQKCmZ1bmN0aW9uIHByb2Nlc3NGaWxlKGZpbGVuYW1lKQogICAgbG9jYWwgY29udGVudCA9IHJlYWRGaWxlKGZpbGVuYW1lKQogICAgLS0gUHJvY2Vzc2FyIGVsIGNvbnRpbmd1dCBkZWwgZml0eGVyCiAgICByZXR1cm4gY29udGVudAplbmQKCmxvY2FsIHN0YXR1cywgcmVzdWx0ID0gcGNhbGwocHJvY2Vzc0ZpbGUsICJpbmV4aXN0ZW50LnR4dCIpCmlmIHN0YXR1cyB0aGVuCiAgICBwcmludChyZXN1bHQpCmVsc2UKICAgIHByaW50KCJFcnJvcjogIiAuLiByZXN1bHQpICAtLSBTb3J0aWRhOiBFcnJvcjogTm8gcydoYSBwb2d1dCBvYnJpciBlbCBmaXR4ZXI6IGluZXhpc3RlbnQudHh0OiBObyBzdWNoIGZpbGUgb3IgZGlyZWN0b3J5CmVuZA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function readFile(filename)
    local file, err = io.open(filename, &quot;r&quot;)
    if not file then
        error(&quot;No s'ha pogut obrir el fitxer: &quot; .. err)
    end
    local content = file:read(&quot;*a&quot;)
    file:close()
    return content
end

function processFile(filename)
    local content = readFile(filename)
    -- Processar el contingut del fitxer
    return content
end

local status, result = pcall(processFile, &quot;inexistent.txt&quot;)
if status then
    print(result)
else
    print(&quot;Error: &quot; .. result)  -- Sortida: Error: No s'ha pogut obrir el fitxer: inexistent.txt: No such file or directory
end</pre></div><div class='content'></div><h2>Ús de Metataules per a la Gestió d'Errors</h2>
<div class='content'><ul>
<li>Les metataules es poden utilitzar per definir comportaments personalitzats per als errors.</li>
<li>Aquesta és una tècnica avançada que permet una gestió d'errors més flexible.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgRXJyb3JIYW5kbGVyID0ge30KRXJyb3JIYW5kbGVyLl9faW5kZXggPSBFcnJvckhhbmRsZXIKCmZ1bmN0aW9uIEVycm9ySGFuZGxlcjpuZXcoKQogICAgbG9jYWwgc2VsZiA9IHNldG1ldGF0YWJsZSh7fSwgRXJyb3JIYW5kbGVyKQogICAgcmV0dXJuIHNlbGYKZW5kCgpmdW5jdGlvbiBFcnJvckhhbmRsZXI6aGFuZGxlRXJyb3IoZXJyKQogICAgcHJpbnQoIkdlc3RvciBkJ0Vycm9ycyBQZXJzb25hbGl0emF0OiAiIC4uIGVycikKZW5kCgpsb2NhbCBoYW5kbGVyID0gRXJyb3JIYW5kbGVyOm5ldygpCgpmdW5jdGlvbiBkaXZpZGUoYSwgYikKICAgIGlmIGIgPT0gMCB0aGVuCiAgICAgICAgZXJyb3IoIkRpdmlzacOzIHBlciB6ZXJvISIpCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIGEgLyBiCiAgICBlbmQKZW5kCgpsb2NhbCBzdGF0dXMsIHJlc3VsdCA9IHhwY2FsbChkaXZpZGUsIGZ1bmN0aW9uKGVycikgaGFuZGxlcjpoYW5kbGVFcnJvcihlcnIpIGVuZCwgMTAsIDApCmlmIHN0YXR1cyB0aGVuCiAgICBwcmludChyZXN1bHQpCmVsc2UKICAgIHByaW50KCJHZXN0aW9uYXQgcGVsIGdlc3RvciBkJ2Vycm9ycyBwZXJzb25hbGl0emF0IikKZW5k"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local ErrorHandler = {}
ErrorHandler.__index = ErrorHandler

function ErrorHandler:new()
    local self = setmetatable({}, ErrorHandler)
    return self
end

function ErrorHandler:handleError(err)
    print(&quot;Gestor d'Errors Personalitzat: &quot; .. err)
end

local handler = ErrorHandler:new()

function divide(a, b)
    if b == 0 then
        error(&quot;Divisi&oacute; per zero!&quot;)
    else
        return a / b
    end
end

local status, result = xpcall(divide, function(err) handler:handleError(err) end, 10, 0)
if status then
    print(result)
else
    print(&quot;Gestionat pel gestor d'errors personalitzat&quot;)
end</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>La gestió d'errors en Lua va des de missatges d'error simples fins a tècniques avançades que impliquen gestors d'errors personalitzats i metataules. Entendre aquests conceptes és essencial per escriure codi robust i mantenible. En dominar la gestió d'errors, pots assegurar-te que els teus programes en Lua puguin manejar situacions inesperades de manera elegant i proporcionar retroalimentació significativa als usuaris o desenvolupadors.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='modules-and-packages'>&#x25C4;Mòduls i Paquets</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Gestió d'Errors en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-oop'>Introducció a la POO &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
