<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestió de Memòria en Lua</title>

    <link rel="alternate" href="https://campusempresa.com/es/lua/memory-management" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/lua/memory-management" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/lua/memory-management" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/lua/memory-management" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='profiling-lua-code'>&#x25C4;Perfilat de Codi Lua</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Gestió de Memòria en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='optimizing-code'>Optimització de Codi &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La gestió de memòria és un aspecte crucial de la programació, assegurant que la teva aplicació utilitzi la memòria de manera eficient i eviti fuites. En Lua, la gestió de memòria es maneja automàticament pel col·lector d'escombraries, però entendre com funciona pot ajudar-te a escriure codi més eficient i efectiu.</p>
</div><h1>Introducció a la Gestió de Memòria</h1>
<div class='content'><ul>
<li><strong>Gestió Automàtica de Memòria</strong>: Lua utilitza gestió automàtica de memòria, el que significa que maneja l'assignació i desassignació de memòria per tu.</li>
<li><strong>Col·lecció d'Escombraries</strong>: Lua empra un col·lector d'escombraries per recuperar memòria que ja no està en ús.</li>
</ul>
</div><h1>Entenent la Col·lecció d'Escombraries</h1>
<div class='content'><p>La col·lecció d'escombraries en Lua està dissenyada per ser eficient i poc intrusiva. Ajuda a prevenir fuites de memòria alliberant automàticament la memòria que ja no és accessible.</p>
<ul>
<li><strong>Algorisme de Marcatge i Escombrat</strong>: Lua utilitza un algorisme de col·lecció d'escombraries de marcatge i escombrat.
<ul>
<li><strong>Fase de Marcatge</strong>: El col·lector d'escombraries recorre tots els objectes accessibles i els marca.</li>
<li><strong>Fase d'Escombrat</strong>: Després recorre la memòria, recollint tots els objectes no marcats.</li>
</ul>
</li>
</ul>
</div><h2>Exemple: Col·lecció d'Escombraries Bàsica</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQ3JlYXIgdW5hIHRhdWxhIGkgYXNzaWduYXItbGEgYSB1bmEgdmFyaWFibGUKbG9jYWwgbXlUYWJsZSA9IHsxLCAyLCAzfQoKLS0gTGEgdGF1bGEgZXN0w6AgZW4gw7pzIGkgbm8gc2Vyw6AgcmVjb2xsaWRhCnByaW50KG15VGFibGVbMV0pICAtLSBTb3J0aWRhOiAxCgotLSBFbGltaW5hciBsYSByZWZlcsOobmNpYSBhIGxhIHRhdWxhCm15VGFibGUgPSBuaWwKCi0tIExhIHRhdWxhIGFyYSDDqXMgZWxlZ2libGUgcGVyIGEgbGEgY29swrdsZWNjacOzIGQnZXNjb21icmFyaWVzCmNvbGxlY3RnYXJiYWdlKCkgIC0tIEFjdGl2YXIgbWFudWFsbWVudCBsYSBjb2zCt2xlY2Npw7MgZCdlc2NvbWJyYXJpZXMgKG5vcm1hbG1lbnQgbm8gw6lzIG5lY2Vzc2FyaSk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Crear una taula i assignar-la a una variable
local myTable = {1, 2, 3}

-- La taula est&agrave; en &uacute;s i no ser&agrave; recollida
print(myTable[1])  -- Sortida: 1

-- Eliminar la refer&egrave;ncia a la taula
myTable = nil

-- La taula ara &eacute;s elegible per a la col&middot;lecci&oacute; d'escombraries
collectgarbage()  -- Activar manualment la col&middot;lecci&oacute; d'escombraries (normalment no &eacute;s necessari)</pre></div><div class='content'></div><h1>Gestionant la Memòria Eficientment</h1>
<div class='content'><p>Tot i que Lua maneja la majoria de les tasques de gestió de memòria, hi ha bones pràctiques que pots seguir per assegurar un ús eficient de la memòria.</p>
<ul>
<li><strong>Evitar Assignacions Innecessàries</strong>: Reutilitza taules i altres objectes quan sigui possible.</li>
<li><strong>Netejar Referències</strong>: Assigna variables a <code>nil</code> quan ja no siguin necessàries per fer-les elegibles per a la col·lecció d'escombraries.</li>
<li><strong>Utilitzar Variables Locals</strong>: Les variables locals es recullen més eficientment que les variables globals.</li>
</ul>
</div><h2>Exemple: Reutilitzant Taules</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gSW5lZmljaWVudDogQ3JlYXIgdW5hIG5vdmEgdGF1bGEgY2FkYSB2ZWdhZGEKZm9yIGkgPSAxLCAxMDAwIGRvCiAgICBsb2NhbCB0ZW1wVGFibGUgPSB7aSwgaSsxLCBpKzJ9CiAgICAtLSBGZXIgYWxndW5hIGNvc2EgYW1iIHRlbXBUYWJsZQplbmQKCi0tIEVmaWNpZW50OiBSZXV0aWxpdHphciB1bmEgc29sYSB0YXVsYQpsb2NhbCB0ZW1wVGFibGUgPSB7fQpmb3IgaSA9IDEsIDEwMDAgZG8KICAgIHRlbXBUYWJsZVsxXSwgdGVtcFRhYmxlWzJdLCB0ZW1wVGFibGVbM10gPSBpLCBpKzEsIGkrMgogICAgLS0gRmVyIGFsZ3VuYSBjb3NhIGFtYiB0ZW1wVGFibGUKZW5k"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Ineficient: Crear una nova taula cada vegada
for i = 1, 1000 do
    local tempTable = {i, i+1, i+2}
    -- Fer alguna cosa amb tempTable
end

-- Eficient: Reutilitzar una sola taula
local tempTable = {}
for i = 1, 1000 do
    tempTable[1], tempTable[2], tempTable[3] = i, i+1, i+2
    -- Fer alguna cosa amb tempTable
end</pre></div><div class='content'></div><h1>Tècniques Avançades de Gestió de Memòria</h1>
<div class='content'><p>Per a usuaris avançats, Lua proporciona més control sobre el col·lector d'escombraries i la gestió de memòria.</p>
<ul>
<li><strong>Funcions del Col·lector d'Escombraries</strong>: Lua proporciona diverses funcions per controlar el col·lector d'escombraries.
<ul>
<li><code>collectgarbage(&quot;collect&quot;)</code>: Realitzar un cicle complet de col·lecció d'escombraries.</li>
<li><code>collectgarbage(&quot;stop&quot;)</code>: Aturar el col·lector d'escombraries.</li>
<li><code>collectgarbage(&quot;restart&quot;)</code>: Reiniciar el col·lector d'escombraries.</li>
<li><code>collectgarbage(&quot;count&quot;)</code>: Obtenir l'ús actual de memòria en kilobytes.</li>
</ul>
</li>
</ul>
</div><h2>Exemple: Controlant el Col·lector d'Escombraries</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQXR1cmFyIGVsIGNvbMK3bGVjdG9yIGQnZXNjb21icmFyaWVzCmNvbGxlY3RnYXJiYWdlKCJzdG9wIikKCi0tIFJlYWxpdHphciBhbGd1bmVzIG9wZXJhY2lvbnMgaW50ZW5zaXZlcyBlbiBtZW3DsnJpYQpsb2NhbCBsYXJnZVRhYmxlID0ge30KZm9yIGkgPSAxLCAxMDAwMDAwIGRvCiAgICBsYXJnZVRhYmxlW2ldID0gaQplbmQKCi0tIEFjdGl2YXIgbWFudWFsbWVudCBsYSBjb2zCt2xlY2Npw7MgZCdlc2NvbWJyYXJpZXMKY29sbGVjdGdhcmJhZ2UoImNvbGxlY3QiKQoKLS0gUmVpbmljaWFyIGVsIGNvbMK3bGVjdG9yIGQnZXNjb21icmFyaWVzCmNvbGxlY3RnYXJiYWdlKCJyZXN0YXJ0Iik="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Aturar el col&middot;lector d'escombraries
collectgarbage(&quot;stop&quot;)

-- Realitzar algunes operacions intensives en mem&ograve;ria
local largeTable = {}
for i = 1, 1000000 do
    largeTable[i] = i
end

-- Activar manualment la col&middot;lecci&oacute; d'escombraries
collectgarbage(&quot;collect&quot;)

-- Reiniciar el col&middot;lector d'escombraries
collectgarbage(&quot;restart&quot;)</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>La gestió de memòria en Lua és en gran part automàtica, gràcies al seu eficient col·lector d'escombraries. Entenent com funciona la col·lecció d'escombraries i seguint les millors pràctiques, pots escriure codi Lua més eficient. Per a usuaris avançats, Lua proporciona funcions per controlar el col·lector d'escombraries, oferint un control més detallat sobre la gestió de memòria.</p>
<ul>
<li><strong>Punts Clau</strong>:
<ul>
<li>Lua utilitza gestió automàtica de memòria amb un col·lector d'escombraries de marcatge i escombrat.</li>
<li>Neteja referències i reutilitza objectes per gestionar la memòria eficientment.</li>
<li>Les funcions avançades permeten el control manual del col·lector d'escombraries.</li>
</ul>
</li>
</ul>
<p>Entendre aquests conceptes t'ajudarà a escriure programes Lua que siguin tant eficients com efectius, assegurant un ús òptim dels recursos de memòria.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='profiling-lua-code'>&#x25C4;Perfilat de Codi Lua</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Gestió de Memòria en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='optimizing-code'>Optimització de Codi &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
