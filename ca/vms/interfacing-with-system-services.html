<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interfície amb Serveis del Sistema</title>

    <link rel="alternate" href="https://campusempresa.com/es/vms/interfacing-with-system-services" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/vms/interfacing-with-system-services" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/vms/interfacing-with-system-services" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/vms/interfacing-with-system-services" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>Interfície amb serveis del sistema en OpenVMS és una habilitat crucial per als desenvolupadors que treballen en aquest sistema operatiu. Els serveis del sistema proporcionen una manera d'interactuar amb el maquinari subjacent i els recursos del sistema, permetent tasques com la manipulació de fitxers, el control de processos i la comunicació entre processos.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Serveis del Sistema</strong>: Funcions proporcionades pel sistema operatiu OpenVMS per realitzar diverses operacions de baix nivell.</li>
<li><strong>Convencions de Crida</strong>: La manera específica en què es criden les funcions i es passen els paràmetres en OpenVMS.</li>
<li><strong>Codis d'Estat</strong>: Valors de retorn dels serveis del sistema que indiquen èxit o fracàs.</li>
<li><strong>Descriptors</strong>: Estructures de dades utilitzades per descriure el format i la ubicació de les dades.</li>
</ul>
</div><h1>Serveis Bàsics del Sistema</h1>
<h2>Introducció als Serveis del Sistema</h2>
<div class='content'><p>Els serveis del sistema en OpenVMS es criden utilitzant una convenció de crida específica. Normalment estan prefixats amb <code>SYS$</code> i estan dissenyats per ser utilitzats des de diversos llenguatges de programació, incloent C i Fortran.</p>
</div><h2>Exemple: SYS$GETJPI</h2>
<div class='content'><p>El servei del sistema <code>SYS$GETJPI</code> recupera informació sobre un procés. Aquí hi ha un exemple senzill en C:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxkZXNjcmlwLmg+CiNpbmNsdWRlIDxqcGlkZWYuaD4KI2luY2x1ZGUgPHNzZGVmLmg+CiNpbmNsdWRlIDxzdGFybGV0Lmg+CgppbnQgbWFpbigpIHsKICAgIHVuc2lnbmVkIGxvbmcgc3RhdHVzOwogICAgdW5zaWduZWQgbG9uZyBwaWQgPSAwOyAvLyAwIHNpZ25pZmljYSBwcm9jw6lzIGFjdHVhbAogICAgdW5zaWduZWQgbG9uZyBpdGVtID0gSlBJJF9QSUQ7IC8vIENvZGkgZCdlbGVtZW50IHBlciBhIGwnSUQgZGVsIHByb2PDqXMKICAgIHVuc2lnbmVkIGxvbmcgdmFsdWU7CiAgICBzdHJ1Y3QgX2dlbmVyaWNfNjQgaXRlbWxpc3RbMl07CgogICAgaXRlbWxpc3RbMF0ubGVuZ3RoID0gc2l6ZW9mKHZhbHVlKTsKICAgIGl0ZW1saXN0WzBdLmNvZGUgPSBpdGVtOwogICAgaXRlbWxpc3RbMF0uYnVmZmVyID0gJnZhbHVlOwogICAgaXRlbWxpc3RbMF0ucmV0dXJuX2xlbmd0aCA9IDA7CiAgICBpdGVtbGlzdFsxXS5sZW5ndGggPSAwOyAvLyBGaW5hbCBkZSBsYSBsbGlzdGEKCiAgICBzdGF0dXMgPSBTWVMkR0VUSlBJVygwLCAmcGlkLCAwLCBpdGVtbGlzdCwgMCwgMCwgMCk7CgogICAgaWYgKHN0YXR1cyA9PSBTUyRfTk9STUFMKSB7CiAgICAgICAgcHJpbnRmKCJJRCBkZWwgcHJvY8OpczogJWx1XG4iLCB2YWx1ZSk7CiAgICB9IGVsc2UgewogICAgICAgIHByaW50ZigiRXJyb3I6ICVsdVxuIiwgc3RhdHVzKTsKICAgIH0KCiAgICByZXR1cm4gMDsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;descrip.h&gt;
#include &lt;jpidef.h&gt;
#include &lt;ssdef.h&gt;
#include &lt;starlet.h&gt;

int main() {
    unsigned long status;
    unsigned long pid = 0; // 0 significa proc&eacute;s actual
    unsigned long item = JPI$_PID; // Codi d'element per a l'ID del proc&eacute;s
    unsigned long value;
    struct _generic_64 itemlist[2];

    itemlist[0].length = sizeof(value);
    itemlist[0].code = item;
    itemlist[0].buffer = &amp;value;
    itemlist[0].return_length = 0;
    itemlist[1].length = 0; // Final de la llista

    status = SYS$GETJPIW(0, &amp;pid, 0, itemlist, 0, 0, 0);

    if (status == SS$_NORMAL) {
        printf(&quot;ID del proc&eacute;s: %lu\n&quot;, value);
    } else {
        printf(&quot;Error: %lu\n&quot;, status);
    }

    return 0;
}</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>Headers</strong>: Inclou els headers necessaris per a descriptors, definicions de serveis del sistema i codis d'estat.</li>
<li><strong>PID</strong>: Identificador del procés, on <code>0</code> indica el procés actual.</li>
<li><strong>Codi d'Element</strong>: Especifica quina informació recuperar, en aquest cas, l'ID del procés.</li>
<li><strong>Llista d'Elements</strong>: Una matriu d'estructures que descriuen els elements a recuperar.</li>
<li><strong>SYS$GETJPIW</strong>: La crida al servei del sistema, on <code>W</code> indica que espera la finalització.</li>
</ul>
</div><h1>Serveis Avançats del Sistema</h1>
<h2>Control de Processos</h2>
<div class='content'><p>L'ús avançat dels serveis del sistema inclou el control de processos, com ara crear, suspendre o finalitzar-los.</p>
</div><h2>Exemple: SYS$CREPRC</h2>
<div class='content'><p>El servei del sistema <code>SYS$CREPRC</code> crea un nou procés. Aquí hi ha un exemple:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxkZXNjcmlwLmg+CiNpbmNsdWRlIDxwcmNkZWYuaD4KI2luY2x1ZGUgPHNzZGVmLmg+CiNpbmNsdWRlIDxzdGFybGV0Lmg+CgppbnQgbWFpbigpIHsKICAgIHVuc2lnbmVkIGxvbmcgc3RhdHVzOwogICAgc3RydWN0IGRzYyRkZXNjcmlwdG9yX3MgaW1hZ2UgPSB7MH07CiAgICBzdHJ1Y3QgZHNjJGRlc2NyaXB0b3JfcyBuYW1lID0gezB9OwogICAgdW5zaWduZWQgbG9uZyBwaWQ7CgogICAgaW1hZ2UuZHNjJHdfbGVuZ3RoID0gc3RybGVuKCJTWVMkU1lTVEVNOkxPR0lOT1VULkVYRSIpOwogICAgaW1hZ2UuZHNjJGFfcG9pbnRlciA9ICJTWVMkU1lTVEVNOkxPR0lOT1VULkVYRSI7CiAgICBpbWFnZS5kc2MkYl9kdHlwZSA9IERTQyRLX0RUWVBFX1Q7CiAgICBpbWFnZS5kc2MkYl9jbGFzcyA9IERTQyRLX0NMQVNTX1M7CgogICAgc3RhdHVzID0gU1lTJENSRVBSQygmcGlkLCAmbmFtZSwgJmltYWdlLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwKTsKCiAgICBpZiAoc3RhdHVzID09IFNTJF9OT1JNQUwpIHsKICAgICAgICBwcmludGYoIlByb2PDqXMgY3JlYXQgYW1iIFBJRDogJWx1XG4iLCBwaWQpOwogICAgfSBlbHNlIHsKICAgICAgICBwcmludGYoIkVycm9yOiAlbHVcbiIsIHN0YXR1cyk7CiAgICB9CgogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;descrip.h&gt;
#include &lt;prcdef.h&gt;
#include &lt;ssdef.h&gt;
#include &lt;starlet.h&gt;

int main() {
    unsigned long status;
    struct dsc$descriptor_s image = {0};
    struct dsc$descriptor_s name = {0};
    unsigned long pid;

    image.dsc$w_length = strlen(&quot;SYS$SYSTEM:LOGINOUT.EXE&quot;);
    image.dsc$a_pointer = &quot;SYS$SYSTEM:LOGINOUT.EXE&quot;;
    image.dsc$b_dtype = DSC$K_DTYPE_T;
    image.dsc$b_class = DSC$K_CLASS_S;

    status = SYS$CREPRC(&amp;pid, &amp;name, &amp;image, 0, 0, 0, 0, 0, 0, 0, 0);

    if (status == SS$_NORMAL) {
        printf(&quot;Proc&eacute;s creat amb PID: %lu\n&quot;, pid);
    } else {
        printf(&quot;Error: %lu\n&quot;, status);
    }

    return 0;
}</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>Descriptor d'Imatge</strong>: Descriu la imatge executable a executar.</li>
<li><strong>Descriptor de Nom</strong>: Descriu el nom del procés (opcional).</li>
<li><strong>SYS$CREPRC</strong>: La crida al servei del sistema per crear un nou procés.</li>
</ul>
</div><h1>Gestió d'Errors</h1>
<h2>Codis d'Estat</h2>
<div class='content'><p>Els serveis del sistema retornen codis d'estat que cal comprovar per assegurar-se que l'operació ha estat exitosa. Els codis d'estat comuns inclouen:</p>
<ul>
<li><code>SS$_NORMAL</code>: L'operació s'ha completat amb èxit.</li>
<li><code>SS$_BADPARAM</code>: Paràmetre invàlid.</li>
<li><code>SS$_NOPRIV</code>: Privilegis insuficients.</li>
</ul>
</div><h2>Exemple: Comprovació de Codis d'Estat</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aWYgKHN0YXR1cyAhPSBTUyRfTk9STUFMKSB7CiAgICBwcmludGYoIkVycm9yOiAlbHVcbiIsIHN0YXR1cyk7CiAgICAvLyBHZXN0aW9uYXIgbCdlcnJvciBhZGVxdWFkYW1lbnQKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>if (status != SS$_NORMAL) {
    printf(&quot;Error: %lu\n&quot;, status);
    // Gestionar l'error adequadament
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Interfície amb serveis del sistema en OpenVMS permet als desenvolupadors realitzar una àmplia gamma d'operacions de baix nivell essencials per a la programació del sistema. Entendre com cridar aquests serveis, gestionar descriptors i comprovar codis d'estat és fonamental per a un desenvolupament efectiu en OpenVMS. En dominar aquests conceptes, els desenvolupadors poden aprofitar tot el potencial del sistema operatiu OpenVMS.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
