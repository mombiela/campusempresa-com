<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agrupació i Emmagatzematge en Memòria Cau en GraphQL</title>

    <link rel="alternate" href="https://campusempresa.com/es/graphql/batching-and-caching" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/graphql/batching-and-caching" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/graphql/batching-and-caching" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/graphql/batching-and-caching" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>L'agrupació i l'emmagatzematge en memòria cau són tècniques essencials en GraphQL per optimitzar el rendiment i reduir la càrrega del teu servidor. Aquesta secció cobrirà els conceptes bàsics d'aquestes tècniques, com implementar-les i les millors pràctiques per utilitzar-les de manera efectiva.</p>
</div><h1>Agrupació</h1>
<div class='content'></div><h2>Què és l'Agrupació?</h2>
<div class='content'><p>L'agrupació en GraphQL es refereix al procés de combinar múltiples sol·licituds en una sola sol·licitud per reduir el nombre de trucades de xarxa. Això és particularment útil quan es tracta de múltiples camps o consultes niades que d'una altra manera podrien resultar en múltiples viatges d'anada i tornada al servidor.</p>
</div><h2>Per què Utilitzar l'Agrupació?</h2>
<div class='content'><ul>
<li><strong>Millora del Rendiment</strong>: Redueix el nombre de sol·licituds de xarxa.</li>
<li><strong>Eficiència</strong>: Minimitza la sobrecàrrega associada amb múltiples sol·licituds.</li>
<li><strong>Optimització de Recursos</strong>: Millor utilització dels recursos del servidor.</li>
</ul>
</div><h2>Exemple d'Agrupació</h2>
<div class='content'><p>Considera un escenari on necessites obtenir detalls d'un usuari i les seves publicacions. Sense agrupació, això podria resultar en múltiples sol·licituds:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cXVlcnkgewogIHVzZXIoaWQ6ICIxIikgewogICAgaWQKICAgIG5hbWUKICB9CiAgcG9zdHModXNlcklkOiAiMSIpIHsKICAgIGlkCiAgICB0aXRsZQogIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>query {
  user(id: &quot;1&quot;) {
    id
    name
  }
  posts(userId: &quot;1&quot;) {
    id
    title
  }
}</pre></div><div class='content'><p>Amb agrupació, aquestes sol·licituds es poden combinar en una sola sol·licitud:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cXVlcnkgewogIHVzZXIoaWQ6ICIxIikgewogICAgaWQKICAgIG5hbWUKICAgIHBvc3RzIHsKICAgICAgaWQKICAgICAgdGl0bGUKICAgIH0KICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>query {
  user(id: &quot;1&quot;) {
    id
    name
    posts {
      id
      title
    }
  }
}</pre></div><div class='content'></div><h2>Implementació de l'Agrupació amb DataLoader</h2>
<div class='content'><p>DataLoader és una biblioteca popular per a l'agrupació i l'emmagatzematge en memòria cau en GraphQL.</p>
<h4>Instal·lació</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgZGF0YWxvYWRlcg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install dataloader</pre></div><div class='content'><h4>Ús Bàsic</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgRGF0YUxvYWRlciA9IHJlcXVpcmUoJ2RhdGFsb2FkZXInKTsKCi8vIENyZWFyIHVuYSBpbnN0w6BuY2lhIGRlIERhdGFMb2FkZXIKY29uc3QgdXNlckxvYWRlciA9IG5ldyBEYXRhTG9hZGVyKGFzeW5jIChrZXlzKSA9PiB7CiAgY29uc3QgdXNlcnMgPSBhd2FpdCBnZXRVc2Vyc0J5SWRzKGtleXMpOwogIHJldHVybiBrZXlzLm1hcChrZXkgPT4gdXNlcnMuZmluZCh1c2VyID0+IHVzZXIuaWQgPT09IGtleSkpOwp9KTsKCi8vIFV0aWxpdHphciBlbCBEYXRhTG9hZGVyIGVuIGVsIHRldSByZXNvbHV0b3IKY29uc3QgcmVzb2x2ZXJzID0gewogIFF1ZXJ5OiB7CiAgICB1c2VyOiAocGFyZW50LCBhcmdzKSA9PiB1c2VyTG9hZGVyLmxvYWQoYXJncy5pZCksCiAgfSwKfTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const DataLoader = require('dataloader');

// Crear una inst&agrave;ncia de DataLoader
const userLoader = new DataLoader(async (keys) =&gt; {
  const users = await getUsersByIds(keys);
  return keys.map(key =&gt; users.find(user =&gt; user.id === key));
});

// Utilitzar el DataLoader en el teu resolutor
const resolvers = {
  Query: {
    user: (parent, args) =&gt; userLoader.load(args.id),
  },
};</pre></div><div class='content'></div><h1>Emmagatzematge en Memòria Cau</h1>
<div class='content'></div><h2>Què és l'Emmagatzematge en Memòria Cau?</h2>
<div class='content'><p>L'emmagatzematge en memòria cau implica emmagatzemar els resultats d'operacions costoses perquè les sol·licituds posteriors es puguin servir més ràpidament. En GraphQL, l'emmagatzematge en memòria cau es pot aplicar a diversos nivells, incloent els resultats de les consultes, camps individuals i fins i tot a nivell de xarxa.</p>
</div><h2>Per què Utilitzar l'Emmagatzematge en Memòria Cau?</h2>
<div class='content'><ul>
<li><strong>Impuls del Rendiment</strong>: Redueix el temps necessari per obtenir dades.</li>
<li><strong>Reducció de la Càrrega</strong>: Disminueix el nombre de sol·licituds que arriben a la teva base de dades o serveis de backend.</li>
<li><strong>Eficiència de Costos</strong>: Minimitza l'ús de recursos i els costos operatius.</li>
</ul>
</div><h2>Tipus d'Emmagatzematge en Memòria Cau</h2>
<div class='content'><ul>
<li><strong>Emmagatzematge en Memòria</strong>: Emmagatzema dades en memòria per a un accés ràpid.</li>
<li><strong>Emmagatzematge Persistent</strong>: Emmagatzema dades en un emmagatzematge persistent com Redis o una base de dades.</li>
<li><strong>Emmagatzematge HTTP</strong>: Utilitza capçaleres HTTP per emmagatzemar respostes a nivell de xarxa.</li>
</ul>
</div><h2>Exemple d'Emmagatzematge en Memòria Cau amb Apollo Client</h2>
<div class='content'><p>Apollo Client proporciona suport integrat per emmagatzemar els resultats de les consultes.</p>
<h4>Instal·lació</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgQGFwb2xsby9jbGllbnQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install @apollo/client</pre></div><div class='content'><h4>Ús Bàsic</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQXBvbGxvQ2xpZW50LCBJbk1lbW9yeUNhY2hlLCBncWwgfSBmcm9tICdAYXBvbGxvL2NsaWVudCc7CgovLyBDcmVhciB1bmEgaW5zdMOgbmNpYSBkJ0Fwb2xsbyBDbGllbnQgYW1iIG1lbcOycmlhIGNhdSBlbiBtZW3DsnJpYQpjb25zdCBjbGllbnQgPSBuZXcgQXBvbGxvQ2xpZW50KHsKICB1cmk6ICdodHRwczovL3lvdXItZ3JhcGhxbC1lbmRwb2ludC5jb20vZ3JhcGhxbCcsCiAgY2FjaGU6IG5ldyBJbk1lbW9yeUNhY2hlKCksCn0pOwoKLy8gQ29uc3VsdGEgYW1iIGVtbWFnYXR6ZW1hdGdlIGVuIG1lbcOycmlhIGNhdQpjbGllbnQucXVlcnkoewogIHF1ZXJ5OiBncWxgCiAgICBxdWVyeSBHZXRVc2VyKCRpZDogSUQhKSB7CiAgICAgIHVzZXIoaWQ6ICRpZCkgewogICAgICAgIGlkCiAgICAgICAgbmFtZQogICAgICB9CiAgICB9CiAgYCwKICB2YXJpYWJsZXM6IHsgaWQ6ICcxJyB9LAp9KS50aGVuKHJlc3BvbnNlID0+IHsKICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ApolloClient, InMemoryCache, gql } from '@apollo/client';

// Crear una inst&agrave;ncia d'Apollo Client amb mem&ograve;ria cau en mem&ograve;ria
const client = new ApolloClient({
  uri: 'https://your-graphql-endpoint.com/graphql',
  cache: new InMemoryCache(),
});

// Consulta amb emmagatzematge en mem&ograve;ria cau
client.query({
  query: gql`
    query GetUser($id: ID!) {
      user(id: $id) {
        id
        name
      }
    }
  `,
  variables: { id: '1' },
}).then(response =&gt; {
  console.log(response.data);
});</pre></div><div class='content'></div><h2>Millors Pràctiques per a l'Emmagatzematge en Memòria Cau</h2>
<div class='content'><ul>
<li><strong>Invalidació de la Memòria Cau</strong>: Assegura't que la teva memòria cau s'invalidi quan les dades subjacents canviïn.</li>
<li><strong>Granularitat</strong>: Emmagatzema en memòria cau al nivell de granularitat adequat per equilibrar el rendiment i la frescor.</li>
<li><strong>TTL (Temps de Vida)</strong>: Estableix valors TTL adequats per assegurar-te que no es serveixin dades obsoletes.</li>
</ul>
</div><h1>Resum</h1>
<div class='content'><p>L'agrupació i l'emmagatzematge en memòria cau són tècniques poderoses per optimitzar el rendiment del teu servidor GraphQL. L'agrupació redueix el nombre de sol·licituds de xarxa combinant múltiples consultes, mentre que l'emmagatzematge en memòria cau emmagatzema els resultats d'operacions costoses per servir sol·licituds posteriors més ràpidament. Implementant aquestes tècniques, pots millorar significativament l'eficiència i la capacitat de resposta de les teves aplicacions GraphQL.</p>
<ul>
<li><strong>Agrupació</strong>: Utilitza biblioteques com DataLoader per agrupar sol·licituds de manera eficient.</li>
<li><strong>Emmagatzematge en Memòria Cau</strong>: Utilitza estratègies d'emmagatzematge en memòria cau per emmagatzemar i recuperar dades ràpidament.</li>
</ul>
<p>Entendre i implementar aquests conceptes t'ajudarà a construir aplicacions GraphQL escalables i amb alt rendiment.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
