<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Federació d'Esquemes</title>

    <link rel="alternate" href="https://campusempresa.com/es/graphql/schema-federation" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/graphql/schema-federation" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/graphql/schema-federation" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/graphql/schema-federation" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='custom-scalars'>&#x25C4;Escalars personalitzats</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Federació d'Esquemes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='graphql-and-serverless'>GraphQL i Serverless &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La Federació d'Esquemes és un tema avançat en GraphQL que et permet compondre múltiples serveis GraphQL en un únic gràfic unificat. Aquest enfocament és particularment útil per a grans organitzacions on diferents equips gestionen diferents parts de l'esquema. En aquest tema, cobrirem els conceptes bàsics de la Federació d'Esquemes, els seus beneficis i com implementar-la.</p>
</div><h1>Què és la Federació d'Esquemes?</h1>
<div class='content'><p>La Federació d'Esquemes és una tècnica que et permet dividir el teu esquema GraphQL en múltiples esquemes més petits que es poden gestionar de manera independent. Aquests esquemes més petits, coneguts com a &quot;subgràfics,&quot; es combinen després en un únic esquema federat.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Subgràfic</strong>: Un esquema GraphQL més petit i gestionat de manera independent.</li>
<li><strong>Passarel·la</strong>: Un servei que compon múltiples subgràfics en un únic esquema federat.</li>
<li><strong>Directives de Federació</strong>: Anotacions especials utilitzades per definir com es relacionen els subgràfics entre si.</li>
</ul>
</div><h1>Beneficis de la Federació d'Esquemes</h1>
<div class='content'><ul>
<li><strong>Escalabilitat</strong>: Permet que diferents equips treballin en diferents parts de l'esquema de manera independent.</li>
<li><strong>Modularitat</strong>: Facilita la gestió i manteniment d'esquemes grans dividint-los en peces més petites i manejables.</li>
<li><strong>Flexibilitat</strong>: Et permet evolucionar el teu esquema sense afectar tot el sistema.</li>
</ul>
</div><h1>Implementació de la Federació d'Esquemes</h1>
<div class='content'><p>Per implementar la Federació d'Esquemes, necessites configurar subgràfics i una passarel·la. Vegem els passos per aconseguir-ho.</p>
</div><h2>Pas 1: Definir Subgràfics</h2>
<div class='content'><p>Cada subgràfic és un servei GraphQL autònom. Aquí tens un exemple de dos subgràfics: <code>users</code> i <code>products</code>.</p>
<h4>Subgràfic d'Usuaris</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB1c2Vycy1zY2hlbWEuZ3JhcGhxbAp0eXBlIFVzZXIgQGtleShmaWVsZHM6ICJpZCIpIHsKICBpZDogSUQhCiAgbmFtZTogU3RyaW5nIQogIGVtYWlsOiBTdHJpbmchCn0KCnR5cGUgUXVlcnkgewogIG1lOiBVc2VyCiAgdXNlcihpZDogSUQhKTogVXNlcgp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># users-schema.graphql
type User @key(fields: &quot;id&quot;) {
  id: ID!
  name: String!
  email: String!
}

type Query {
  me: User
  user(id: ID!): User
}</pre></div><div class='content'><h4>Subgràfic de Productes</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBwcm9kdWN0cy1zY2hlbWEuZ3JhcGhxbAp0eXBlIFByb2R1Y3QgQGtleShmaWVsZHM6ICJpZCIpIHsKICBpZDogSUQhCiAgbmFtZTogU3RyaW5nIQogIHByaWNlOiBGbG9hdCEKfQoKdHlwZSBRdWVyeSB7CiAgcHJvZHVjdChpZDogSUQhKTogUHJvZHVjdAogIHByb2R1Y3RzOiBbUHJvZHVjdF0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># products-schema.graphql
type Product @key(fields: &quot;id&quot;) {
  id: ID!
  name: String!
  price: Float!
}

type Query {
  product(id: ID!): Product
  products: [Product]
}</pre></div><div class='content'></div><h2>Pas 2: Configurar la Passarel·la</h2>
<div class='content'><p>La passarel·la és responsable de compondre els subgràfics en un únic esquema federat.</p>
<h4>Configuració de la Passarel·la</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gaW5kZXguanMKY29uc3QgeyBBcG9sbG9TZXJ2ZXIgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXInKTsKY29uc3QgeyBBcG9sbG9HYXRld2F5IH0gPSByZXF1aXJlKCdAYXBvbGxvL2dhdGV3YXknKTsKCmNvbnN0IGdhdGV3YXkgPSBuZXcgQXBvbGxvR2F0ZXdheSh7CiAgc2VydmljZUxpc3Q6IFsKICAgIHsgbmFtZTogJ3VzZXJzJywgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo0MDAxJyB9LAogICAgeyBuYW1lOiAncHJvZHVjdHMnLCB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjQwMDInIH0sCiAgXSwKfSk7Cgpjb25zdCBzZXJ2ZXIgPSBuZXcgQXBvbGxvU2VydmVyKHsgZ2F0ZXdheSwgc3Vic2NyaXB0aW9uczogZmFsc2UgfSk7CgpzZXJ2ZXIubGlzdGVuKCkudGhlbigoeyB1cmwgfSkgPT4gewogIGNvbnNvbGUubG9nKGDwn5qAIFNlcnZlciByZWFkeSBhdCAke3VybH1gKTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// index.js
const { ApolloServer } = require('apollo-server');
const { ApolloGateway } = require('@apollo/gateway');

const gateway = new ApolloGateway({
  serviceList: [
    { name: 'users', url: 'http://localhost:4001' },
    { name: 'products', url: 'http://localhost:4002' },
  ],
});

const server = new ApolloServer({ gateway, subscriptions: false });

server.listen().then(({ url }) =&gt; {
  console.log(`🚀 Server ready at ${url}`);
});</pre></div><div class='content'></div><h2>Pas 3: Executar Serveis de Subgràfics</h2>
<div class='content'><p>Necessites executar cada servei de subgràfic de manera independent. Aquí tens un exemple de com executar el subgràfic <code>users</code>.</p>
<h4>Servidor del Subgràfic d'Usuaris</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gdXNlcnMtc2VydmVyLmpzCmNvbnN0IHsgQXBvbGxvU2VydmVyLCBncWwgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXInKTsKY29uc3QgeyBidWlsZEZlZGVyYXRlZFNjaGVtYSB9ID0gcmVxdWlyZSgnQGFwb2xsby9mZWRlcmF0aW9uJyk7Cgpjb25zdCB0eXBlRGVmcyA9IGdxbGAKICB0eXBlIFVzZXIgQGtleShmaWVsZHM6ICJpZCIpIHsKICAgIGlkOiBJRCEKICAgIG5hbWU6IFN0cmluZyEKICAgIGVtYWlsOiBTdHJpbmchCiAgfQoKICB0eXBlIFF1ZXJ5IHsKICAgIG1lOiBVc2VyCiAgICB1c2VyKGlkOiBJRCEpOiBVc2VyCiAgfQpgOwoKY29uc3QgcmVzb2x2ZXJzID0gewogIFF1ZXJ5OiB7CiAgICBtZTogKCkgPT4gKHsgaWQ6ICcxJywgbmFtZTogJ0pvaG4gRG9lJywgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyB9KSwKICAgIHVzZXI6IChfLCB7IGlkIH0pID0+ICh7IGlkLCBuYW1lOiAnSm9obiBEb2UnLCBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nIH0pLAogIH0sCiAgVXNlcjogewogICAgX19yZXNvbHZlUmVmZXJlbmNlOiAodXNlcikgPT4gKHsgaWQ6IHVzZXIuaWQsIG5hbWU6ICdKb2huIERvZScsIGVtYWlsOiAnam9obkBleGFtcGxlLmNvbScgfSksCiAgfSwKfTsKCmNvbnN0IHNlcnZlciA9IG5ldyBBcG9sbG9TZXJ2ZXIoewogIHNjaGVtYTogYnVpbGRGZWRlcmF0ZWRTY2hlbWEoW3sgdHlwZURlZnMsIHJlc29sdmVycyB9XSksCn0pOwoKc2VydmVyLmxpc3Rlbih7IHBvcnQ6IDQwMDEgfSkudGhlbigoeyB1cmwgfSkgPT4gewogIGNvbnNvbGUubG9nKGDwn5qAIFVzZXJzIHNlcnZpY2UgcmVhZHkgYXQgJHt1cmx9YCk7Cn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// users-server.js
const { ApolloServer, gql } = require('apollo-server');
const { buildFederatedSchema } = require('@apollo/federation');

const typeDefs = gql`
  type User @key(fields: &quot;id&quot;) {
    id: ID!
    name: String!
    email: String!
  }

  type Query {
    me: User
    user(id: ID!): User
  }
`;

const resolvers = {
  Query: {
    me: () =&gt; ({ id: '1', name: 'John Doe', email: 'john@example.com' }),
    user: (_, { id }) =&gt; ({ id, name: 'John Doe', email: 'john@example.com' }),
  },
  User: {
    __resolveReference: (user) =&gt; ({ id: user.id, name: 'John Doe', email: 'john@example.com' }),
  },
};

const server = new ApolloServer({
  schema: buildFederatedSchema([{ typeDefs, resolvers }]),
});

server.listen({ port: 4001 }).then(({ url }) =&gt; {
  console.log(`🚀 Users service ready at ${url}`);
});</pre></div><div class='content'><p>Repeteix passos similars per al subgràfic <code>products</code>.</p>
</div><h1>Conclusió</h1>
<div class='content'><p>La Federació d'Esquemes en GraphQL et permet gestionar esquemes grans de manera més efectiva dividint-los en subgràfics més petits i gestionats de manera independent. Aquest enfocament millora l'escalabilitat, la modularitat i la flexibilitat. Seguint els passos descrits en aquest tema, pots configurar un esquema federat que combini múltiples subgràfics en un únic gràfic unificat.</p>
<p>Entendre i implementar la Federació d'Esquemes pot millorar significativament la mantenibilitat i l'escalabilitat dels teus serveis GraphQL, especialment en aplicacions grans i complexes.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='custom-scalars'>&#x25C4;Escalars personalitzats</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Federació d'Esquemes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='graphql-and-serverless'>GraphQL i Serverless &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
