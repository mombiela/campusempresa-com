<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scalars personalitzats a GraphQL</title>

    <link rel="alternate" href="https://campusempresa.com/es/graphql/custom-scalars" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/graphql/custom-scalars" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/graphql/custom-scalars" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del dem√†</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/graphql/custom-scalars" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llic√®ncia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducci√≥ als Scalars</h1>
<div class='content'><p>A GraphQL, els scalars s√≥n els tipus de dades b√†sics que representen les fulles de la consulta. Els tipus de scalar per defecte proporcionats per GraphQL s√≥n:</p>
<ul>
<li><code>Int</code>: Un enter de 32 bits amb signe.</li>
<li><code>Float</code>: Un valor de punt flotant de doble precisi√≥ amb signe.</li>
<li><code>String</code>: Una seq√º√®ncia de car√†cters UTF-8.</li>
<li><code>Boolean</code>: Un valor veritable o fals.</li>
<li><code>ID</code>: Un identificador √∫nic, sovint utilitzat per tornar a obtenir un objecte o com a clau per a una mem√≤ria cau.</li>
</ul>
</div><h1>Per qu√® Scalars personalitzats?</h1>
<div class='content'><p>Tot i que els tipus de scalar per defecte cobreixen molts casos d'√∫s, hi ha escenaris on necessites tipus m√©s espec√≠fics. Per exemple:</p>
<ul>
<li>Dates i hores.</li>
<li>Adreces de correu electr√≤nic.</li>
<li>URLs.</li>
<li>L√≤gica de validaci√≥ personalitzada.</li>
</ul>
<p>Els scalars personalitzats et permeten definir els teus propis tipus de dades amb l√≤gica espec√≠fica de validaci√≥ i serialitzaci√≥.</p>
</div><h1>Definint Scalars personalitzats</h1>
<div class='content'><p>Per definir un scalar personalitzat, necessites:</p>
<ol>
<li>Definir el scalar al teu esquema GraphQL.</li>
<li>Implementar el comportament del scalar al teu codi del servidor.</li>
</ol>
</div><h2>Definici√≥ de l'Esquema</h2>
<div class='content'><p>Al teu esquema GraphQL, declares un scalar personalitzat utilitzant la paraula clau <code>scalar</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2NhbGFyIERhdGU="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>scalar Date</pre></div><div class='content'></div><h2>Implementant Scalars personalitzats</h2>
<div class='content'><p>La implementaci√≥ d'un scalar personalitzat implica definir com el scalar ha de ser analitzat i serialitzat. Aix√≤ t√≠picament inclou:</p>
<ul>
<li>Analitzar valors d'entrada de les consultes.</li>
<li>Serialitzar valors de sortida per a les respostes.</li>
<li>Analitzar valors de les variables.</li>
</ul>
<p>Aqu√≠ tens un exemple d'un scalar personalitzat <code>Date</code> en JavaScript utilitzant Apollo Server:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBHcmFwaFFMU2NhbGFyVHlwZSwgS2luZCB9ID0gcmVxdWlyZSgnZ3JhcGhxbCcpOwoKY29uc3QgRGF0ZVNjYWxhciA9IG5ldyBHcmFwaFFMU2NhbGFyVHlwZSh7CiAgbmFtZTogJ0RhdGUnLAogIGRlc2NyaXB0aW9uOiAnVW4gc2NhbGFyIHBlcnNvbmFsaXR6YXQgcGVyIGdlc3Rpb25hciB2YWxvcnMgZGUgZGF0YScsCiAgc2VyaWFsaXplKHZhbHVlKSB7CiAgICAvLyBDb252ZXJ0aXIgbGEgZGF0YSBzb3J0aW50IGEgY2FkZW5hIElTTyBwZXIgSlNPTgogICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRGF0ZSA/IHZhbHVlLnRvSVNPU3RyaW5nKCkgOiBudWxsOwogIH0sCiAgcGFyc2VWYWx1ZSh2YWx1ZSkgewogICAgLy8gQ29udmVydGlyIGxhIGNhZGVuYSBJU08gZW50cmFudCBhIGRhdGEKICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gbmV3IERhdGUodmFsdWUpIDogbnVsbDsKICB9LAogIHBhcnNlTGl0ZXJhbChhc3QpIHsKICAgIC8vIENvbnZlcnRpciBsYSBjYWRlbmEgQVNUIGNvZGlmaWNhZGEgYSBkYXRhCiAgICByZXR1cm4gYXN0LmtpbmQgPT09IEtpbmQuU1RSSU5HID8gbmV3IERhdGUoYXN0LnZhbHVlKSA6IG51bGw7CiAgfQp9KTsKCm1vZHVsZS5leHBvcnRzID0gRGF0ZVNjYWxhcjs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { GraphQLScalarType, Kind } = require('graphql');

const DateScalar = new GraphQLScalarType({
  name: 'Date',
  description: 'Un scalar personalitzat per gestionar valors de data',
  serialize(value) {
    // Convertir la data sortint a cadena ISO per JSON
    return value instanceof Date ? value.toISOString() : null;
  },
  parseValue(value) {
    // Convertir la cadena ISO entrant a data
    return typeof value === 'string' ? new Date(value) : null;
  },
  parseLiteral(ast) {
    // Convertir la cadena AST codificada a data
    return ast.kind === Kind.STRING ? new Date(ast.value) : null;
  }
});

module.exports = DateScalar;</pre></div><div class='content'></div><h2>Utilitzant Scalars personalitzats en Resolvers</h2>
<div class='content'><p>Despr√©s de definir i implementar el scalar personalitzat, necessites incloure'l a la configuraci√≥ del teu servidor GraphQL.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBBcG9sbG9TZXJ2ZXIsIGdxbCB9ID0gcmVxdWlyZSgnYXBvbGxvLXNlcnZlcicpOwpjb25zdCBEYXRlU2NhbGFyID0gcmVxdWlyZSgnLi9EYXRlU2NhbGFyJyk7Cgpjb25zdCB0eXBlRGVmcyA9IGdxbGAKICBzY2FsYXIgRGF0ZQoKICB0eXBlIEV2ZW50IHsKICAgIGlkOiBJRCEKICAgIG5hbWU6IFN0cmluZyEKICAgIGRhdGU6IERhdGUhCiAgfQoKICB0eXBlIFF1ZXJ5IHsKICAgIGV2ZW50czogW0V2ZW50IV0hCiAgfQpgOwoKY29uc3QgcmVzb2x2ZXJzID0gewogIERhdGU6IERhdGVTY2FsYXIsCiAgUXVlcnk6IHsKICAgIGV2ZW50czogKCkgPT4gWwogICAgICB7IGlkOiAnMScsIG5hbWU6ICdHcmFwaFFMIE1lZXR1cCcsIGRhdGU6IG5ldyBEYXRlKCkgfSwKICAgICAgeyBpZDogJzInLCBuYW1lOiAnQXBvbGxvIFdvcmtzaG9wJywgZGF0ZTogbmV3IERhdGUoKSB9CiAgICBdCiAgfQp9OwoKY29uc3Qgc2VydmVyID0gbmV3IEFwb2xsb1NlcnZlcih7IHR5cGVEZWZzLCByZXNvbHZlcnMgfSk7CgpzZXJ2ZXIubGlzdGVuKCkudGhlbigoeyB1cmwgfSkgPT4gewogIGNvbnNvbGUubG9nKGDwn5qAIFNlcnZlciByZWFkeSBhdCAke3VybH1gKTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { ApolloServer, gql } = require('apollo-server');
const DateScalar = require('./DateScalar');

const typeDefs = gql`
  scalar Date

  type Event {
    id: ID!
    name: String!
    date: Date!
  }

  type Query {
    events: [Event!]!
  }
`;

const resolvers = {
  Date: DateScalar,
  Query: {
    events: () =&gt; [
      { id: '1', name: 'GraphQL Meetup', date: new Date() },
      { id: '2', name: 'Apollo Workshop', date: new Date() }
    ]
  }
};

const server = new ApolloServer({ typeDefs, resolvers });

server.listen().then(({ url }) =&gt; {
  console.log(`üöÄ Server ready at ${url}`);
});</pre></div><div class='content'></div><h1>Casos d'√∫s comuns per a Scalars personalitzats</h1>
<div class='content'><ul>
<li><strong>Data/Hora</strong>: Gestionar valors de data i hora en un format estandarditzat.</li>
<li><strong>Correu electr√≤nic</strong>: Validar adreces de correu electr√≤nic.</li>
<li><strong>URL</strong>: Assegurar-se que una cadena √©s una URL v√†lida.</li>
<li><strong>JSON</strong>: Permetre objectes JSON arbitraris com a entrada/sortida.</li>
</ul>
</div><h1>Exemple: Scalar personalitzat de Correu electr√≤nic</h1>
<div class='content'><p>Aqu√≠ tens un exemple d'un scalar personalitzat <code>Email</code>:</p>
</div><h2>Definici√≥ de l'Esquema</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2NhbGFyIEVtYWls"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>scalar Email</pre></div><div class='content'></div><h2>Implementaci√≥</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBHcmFwaFFMU2NhbGFyVHlwZSwgS2luZCB9ID0gcmVxdWlyZSgnZ3JhcGhxbCcpOwpjb25zdCB7IGlzRW1haWwgfSA9IHJlcXVpcmUoJ3ZhbGlkYXRvcicpOwoKY29uc3QgRW1haWxTY2FsYXIgPSBuZXcgR3JhcGhRTFNjYWxhclR5cGUoewogIG5hbWU6ICdFbWFpbCcsCiAgZGVzY3JpcHRpb246ICdVbiBzY2FsYXIgcGVyc29uYWxpdHphdCBwZXIgZ2VzdGlvbmFyIGFkcmVjZXMgZGUgY29ycmV1IGVsZWN0csOybmljJywKICBzZXJpYWxpemUodmFsdWUpIHsKICAgIHJldHVybiB2YWx1ZTsKICB9LAogIHBhcnNlVmFsdWUodmFsdWUpIHsKICAgIGlmICghaXNFbWFpbCh2YWx1ZSkpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJBZHJlw6dhIGRlIGNvcnJldSBlbGVjdHLDsm5pYyBubyB2w6BsaWRhIik7CiAgICB9CiAgICByZXR1cm4gdmFsdWU7CiAgfSwKICBwYXJzZUxpdGVyYWwoYXN0KSB7CiAgICBpZiAoYXN0LmtpbmQgIT09IEtpbmQuU1RSSU5HIHx8ICFpc0VtYWlsKGFzdC52YWx1ZSkpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJBZHJlw6dhIGRlIGNvcnJldSBlbGVjdHLDsm5pYyBubyB2w6BsaWRhIik7CiAgICB9CiAgICByZXR1cm4gYXN0LnZhbHVlOwogIH0KfSk7Cgptb2R1bGUuZXhwb3J0cyA9IEVtYWlsU2NhbGFyOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { GraphQLScalarType, Kind } = require('graphql');
const { isEmail } = require('validator');

const EmailScalar = new GraphQLScalarType({
  name: 'Email',
  description: 'Un scalar personalitzat per gestionar adreces de correu electr&ograve;nic',
  serialize(value) {
    return value;
  },
  parseValue(value) {
    if (!isEmail(value)) {
      throw new Error(&quot;Adre&ccedil;a de correu electr&ograve;nic no v&agrave;lida&quot;);
    }
    return value;
  },
  parseLiteral(ast) {
    if (ast.kind !== Kind.STRING || !isEmail(ast.value)) {
      throw new Error(&quot;Adre&ccedil;a de correu electr&ograve;nic no v&agrave;lida&quot;);
    }
    return ast.value;
  }
});

module.exports = EmailScalar;</pre></div><div class='content'></div><h2>Utilitzant el Scalar de Correu electr√≤nic</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBBcG9sbG9TZXJ2ZXIsIGdxbCB9ID0gcmVxdWlyZSgnYXBvbGxvLXNlcnZlcicpOwpjb25zdCBFbWFpbFNjYWxhciA9IHJlcXVpcmUoJy4vRW1haWxTY2FsYXInKTsKCmNvbnN0IHR5cGVEZWZzID0gZ3FsYAogIHNjYWxhciBFbWFpbAoKICB0eXBlIFVzZXIgewogICAgaWQ6IElEIQogICAgbmFtZTogU3RyaW5nIQogICAgZW1haWw6IEVtYWlsIQogIH0KCiAgdHlwZSBRdWVyeSB7CiAgICB1c2VyczogW1VzZXIhXSEKICB9CmA7Cgpjb25zdCByZXNvbHZlcnMgPSB7CiAgRW1haWw6IEVtYWlsU2NhbGFyLAogIFF1ZXJ5OiB7CiAgICB1c2VyczogKCkgPT4gWwogICAgICB7IGlkOiAnMScsIG5hbWU6ICdBbGljZScsIGVtYWlsOiAnYWxpY2VAZXhhbXBsZS5jb20nIH0sCiAgICAgIHsgaWQ6ICcyJywgbmFtZTogJ0JvYicsIGVtYWlsOiAnYm9iQGV4YW1wbGUuY29tJyB9CiAgICBdCiAgfQp9OwoKY29uc3Qgc2VydmVyID0gbmV3IEFwb2xsb1NlcnZlcih7IHR5cGVEZWZzLCByZXNvbHZlcnMgfSk7CgpzZXJ2ZXIubGlzdGVuKCkudGhlbigoeyB1cmwgfSkgPT4gewogIGNvbnNvbGUubG9nKGDwn5qAIFNlcnZlciByZWFkeSBhdCAke3VybH1gKTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { ApolloServer, gql } = require('apollo-server');
const EmailScalar = require('./EmailScalar');

const typeDefs = gql`
  scalar Email

  type User {
    id: ID!
    name: String!
    email: Email!
  }

  type Query {
    users: [User!]!
  }
`;

const resolvers = {
  Email: EmailScalar,
  Query: {
    users: () =&gt; [
      { id: '1', name: 'Alice', email: 'alice@example.com' },
      { id: '2', name: 'Bob', email: 'bob@example.com' }
    ]
  }
};

const server = new ApolloServer({ typeDefs, resolvers });

server.listen().then(({ url }) =&gt; {
  console.log(`üöÄ Server ready at ${url}`);
});</pre></div><div class='content'></div><h1>Conclusi√≥</h1>
<div class='content'><p>Els scalars personalitzats a GraphQL proporcionen una manera poderosa d'ampliar els tipus b√†sics per adaptar-se a les necessitats espec√≠fiques de la teva aplicaci√≥. Definint i implementant scalars personalitzats, pots assegurar-te que les teves dades es validen i serialitzen correctament, conduint a aplicacions m√©s robustes i mantenibles. Tant si necessites gestionar dates, correus electr√≤nics, o qualsevol altre tipus de dades especialitzades, els scalars personalitzats ofereixen la flexibilitat per fer-ho de manera efectiva.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai est√† destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enlla√ßos en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gr√†cies per col¬∑laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experi√®ncia d'√∫s i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Ent√®s!</a>
    <a href="/ca/cookies">M√©s informaci√≥</a>
</div>	

	</div>    
</body>
</html>
