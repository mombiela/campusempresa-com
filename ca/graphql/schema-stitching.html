<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Composició d'Esquemes en GraphQL</title>

    <link rel="alternate" href="https://campusempresa.com/es/graphql/schema-stitching" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/graphql/schema-stitching" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/graphql/schema-stitching" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/graphql/schema-stitching" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='directives'>&#x25C4;Directives</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Composició d'Esquemes en GraphQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='batching-and-caching'>Agrupació i emmagatzematge en memòria cau &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La composició d'esquemes és una tècnica avançada de GraphQL que et permet combinar múltiples esquemes de GraphQL en un únic esquema unificat. Això és particularment útil per a arquitectures de microserveis o quan s'integren APIs de tercers.</p>
</div><h1>Què és la Composició d'Esquemes?</h1>
<div class='content'><p>La composició d'esquemes implica fusionar múltiples esquemes de GraphQL en un. Això es pot fer combinant les definicions de tipus i els resolutors de diferents esquemes, permetent-te consultar dades de múltiples fonts en una sola sol·licitud.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Esquemes</strong>: Esquemes individuals de GraphQL que defineixen tipus, consultes, mutacions i subscripcions.</li>
<li><strong>Resolutors</strong>: Funcions que resolen els valors per als camps del teu esquema.</li>
<li><strong>Composició</strong>: El procés de fusionar múltiples esquemes en un.</li>
</ul>
</div><h1>Per què Utilitzar la Composició d'Esquemes?</h1>
<div class='content'><ul>
<li><strong>Modularitat</strong>: Divideix la teva API de GraphQL en peces més petites i manejables.</li>
<li><strong>Reutilització</strong>: Reutilitza esquemes i resolutors existents en diferents projectes.</li>
<li><strong>Escalabilitat</strong>: Escala la teva aplicació distribuint la càrrega entre múltiples serveis.</li>
<li><strong>Integració</strong>: Integra fàcilment APIs de tercers en el teu esquema de GraphQL.</li>
</ul>
</div><h1>Exemple Bàsic</h1>
<div class='content'><p>Comencem amb un exemple senzill on tenim dos esquemes de GraphQL separats: un per a usuaris i un per a publicacions.</p>
</div><h2>Esquema d'Usuaris</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB1c2VyU2NoZW1hLmdyYXBocWwKdHlwZSBVc2VyIHsKICBpZDogSUQhCiAgbmFtZTogU3RyaW5nIQp9Cgp0eXBlIFF1ZXJ5IHsKICB1c2VyKGlkOiBJRCEpOiBVc2VyCn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># userSchema.graphql
type User {
  id: ID!
  name: String!
}

type Query {
  user(id: ID!): User
}</pre></div><div class='content'></div><h2>Esquema de Publicacions</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBwb3N0U2NoZW1hLmdyYXBocWwKdHlwZSBQb3N0IHsKICBpZDogSUQhCiAgdGl0bGU6IFN0cmluZyEKICBhdXRob3JJZDogSUQhCn0KCnR5cGUgUXVlcnkgewogIHBvc3QoaWQ6IElEISk6IFBvc3QKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># postSchema.graphql
type Post {
  id: ID!
  title: String!
  authorId: ID!
}

type Query {
  post(id: ID!): Post
}</pre></div><div class='content'></div><h2>Fusionant Esquemes</h2>
<div class='content'><p>Per compondre aquests esquemes, podem utilitzar una biblioteca com <code>graphql-tools</code> en JavaScript.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gaW5kZXguanMKY29uc3QgeyBtYWtlRXhlY3V0YWJsZVNjaGVtYSwgbWVyZ2VTY2hlbWFzIH0gPSByZXF1aXJlKCdncmFwaHFsLXRvb2xzJyk7CmNvbnN0IHsgQXBvbGxvU2VydmVyIH0gPSByZXF1aXJlKCdhcG9sbG8tc2VydmVyJyk7CgovLyBEZWZpbmVpeCBsZXMgZGVmaW5pY2lvbnMgZGUgdGlwdXMgaSByZXNvbHV0b3JzIHBlciBhIGwnZXNxdWVtYSBkJ3VzdWFyaXMKY29uc3QgdXNlclR5cGVEZWZzID0gYAogIHR5cGUgVXNlciB7CiAgICBpZDogSUQhCiAgICBuYW1lOiBTdHJpbmchCiAgfQoKICB0eXBlIFF1ZXJ5IHsKICAgIHVzZXIoaWQ6IElEISk6IFVzZXIKICB9CmA7Cgpjb25zdCB1c2VyUmVzb2x2ZXJzID0gewogIFF1ZXJ5OiB7CiAgICB1c2VyOiAoXywgeyBpZCB9KSA9PiAoeyBpZCwgbmFtZTogYFVzZXIgJHtpZH1gIH0pLAogIH0sCn07CgovLyBEZWZpbmVpeCBsZXMgZGVmaW5pY2lvbnMgZGUgdGlwdXMgaSByZXNvbHV0b3JzIHBlciBhIGwnZXNxdWVtYSBkZSBwdWJsaWNhY2lvbnMKY29uc3QgcG9zdFR5cGVEZWZzID0gYAogIHR5cGUgUG9zdCB7CiAgICBpZDogSUQhCiAgICB0aXRsZTogU3RyaW5nIQogICAgYXV0aG9ySWQ6IElEIQogIH0KCiAgdHlwZSBRdWVyeSB7CiAgICBwb3N0KGlkOiBJRCEpOiBQb3N0CiAgfQpgOwoKY29uc3QgcG9zdFJlc29sdmVycyA9IHsKICBRdWVyeTogewogICAgcG9zdDogKF8sIHsgaWQgfSkgPT4gKHsgaWQsIHRpdGxlOiBgUG9zdCAke2lkfWAsIGF1dGhvcklkOiBgVXNlciAke2lkfWAgfSksCiAgfSwKfTsKCi8vIENyZWEgZXNxdWVtZXMgZXhlY3V0YWJsZXMKY29uc3QgdXNlclNjaGVtYSA9IG1ha2VFeGVjdXRhYmxlU2NoZW1hKHsgdHlwZURlZnM6IHVzZXJUeXBlRGVmcywgcmVzb2x2ZXJzOiB1c2VyUmVzb2x2ZXJzIH0pOwpjb25zdCBwb3N0U2NoZW1hID0gbWFrZUV4ZWN1dGFibGVTY2hlbWEoeyB0eXBlRGVmczogcG9zdFR5cGVEZWZzLCByZXNvbHZlcnM6IHBvc3RSZXNvbHZlcnMgfSk7CgovLyBGdXNpb25hIGVzcXVlbWVzCmNvbnN0IHNjaGVtYSA9IG1lcmdlU2NoZW1hcyh7CiAgc2NoZW1hczogW3VzZXJTY2hlbWEsIHBvc3RTY2hlbWFdLAp9KTsKCi8vIENyZWEgQXBvbGxvIFNlcnZlcgpjb25zdCBzZXJ2ZXIgPSBuZXcgQXBvbGxvU2VydmVyKHsgc2NoZW1hIH0pOwoKc2VydmVyLmxpc3RlbigpLnRoZW4oKHsgdXJsIH0pID0+IHsKICBjb25zb2xlLmxvZyhgU2VydmVyIHJlYWR5IGF0ICR7dXJsfWApOwp9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// index.js
const { makeExecutableSchema, mergeSchemas } = require('graphql-tools');
const { ApolloServer } = require('apollo-server');

// Defineix les definicions de tipus i resolutors per a l'esquema d'usuaris
const userTypeDefs = `
  type User {
    id: ID!
    name: String!
  }

  type Query {
    user(id: ID!): User
  }
`;

const userResolvers = {
  Query: {
    user: (_, { id }) =&gt; ({ id, name: `User ${id}` }),
  },
};

// Defineix les definicions de tipus i resolutors per a l'esquema de publicacions
const postTypeDefs = `
  type Post {
    id: ID!
    title: String!
    authorId: ID!
  }

  type Query {
    post(id: ID!): Post
  }
`;

const postResolvers = {
  Query: {
    post: (_, { id }) =&gt; ({ id, title: `Post ${id}`, authorId: `User ${id}` }),
  },
};

// Crea esquemes executables
const userSchema = makeExecutableSchema({ typeDefs: userTypeDefs, resolvers: userResolvers });
const postSchema = makeExecutableSchema({ typeDefs: postTypeDefs, resolvers: postResolvers });

// Fusiona esquemes
const schema = mergeSchemas({
  schemas: [userSchema, postSchema],
});

// Crea Apollo Server
const server = new ApolloServer({ schema });

server.listen().then(({ url }) =&gt; {
  console.log(`Server ready at ${url}`);
});</pre></div><div class='content'></div><h1>Composició d'Esquemes Avançada</h1>
<div class='content'></div><h2>Afegint Relacions</h2>
<div class='content'><p>Per fer l'esquema compost més útil, pots afegir relacions entre tipus en diferents esquemes. Per exemple, enllaçant publicacions amb els seus autors.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeHTDqW4gZWwgdGlwdXMgVXNlciBwZXIgaW5jbG91cmUgcHVibGljYWNpb25zCmV4dGVuZCB0eXBlIFVzZXIgewogIHBvc3RzOiBbUG9zdF0KfQoKIyBFeHTDqW4gZWwgdGlwdXMgUG9zdCBwZXIgaW5jbG91cmUgbCdhdXRvcgpleHRlbmQgdHlwZSBQb3N0IHsKICBhdXRob3I6IFVzZXIKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Ext&eacute;n el tipus User per incloure publicacions
extend type User {
  posts: [Post]
}

# Ext&eacute;n el tipus Post per incloure l'autor
extend type Post {
  author: User
}</pre></div><div class='content'></div><h2>Resolutors per a Relacions</h2>
<div class='content'><p>Necessites afegir resolutors per gestionar aquestes relacions.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgdXNlclJlc29sdmVycyA9IHsKICBRdWVyeTogewogICAgdXNlcjogKF8sIHsgaWQgfSkgPT4gKHsgaWQsIG5hbWU6IGBVc2VyICR7aWR9YCB9KSwKICB9LAogIFVzZXI6IHsKICAgIHBvc3RzOiAodXNlcikgPT4gW3sgaWQ6IDEsIHRpdGxlOiAnUG9zdCAxJywgYXV0aG9ySWQ6IHVzZXIuaWQgfV0sCiAgfSwKfTsKCmNvbnN0IHBvc3RSZXNvbHZlcnMgPSB7CiAgUXVlcnk6IHsKICAgIHBvc3Q6IChfLCB7IGlkIH0pID0+ICh7IGlkLCB0aXRsZTogYFBvc3QgJHtpZH1gLCBhdXRob3JJZDogYFVzZXIgJHtpZH1gIH0pLAogIH0sCiAgUG9zdDogewogICAgYXV0aG9yOiAocG9zdCkgPT4gKHsgaWQ6IHBvc3QuYXV0aG9ySWQsIG5hbWU6IGBVc2VyICR7cG9zdC5hdXRob3JJZH1gIH0pLAogIH0sCn07"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const userResolvers = {
  Query: {
    user: (_, { id }) =&gt; ({ id, name: `User ${id}` }),
  },
  User: {
    posts: (user) =&gt; [{ id: 1, title: 'Post 1', authorId: user.id }],
  },
};

const postResolvers = {
  Query: {
    post: (_, { id }) =&gt; ({ id, title: `Post ${id}`, authorId: `User ${id}` }),
  },
  Post: {
    author: (post) =&gt; ({ id: post.authorId, name: `User ${post.authorId}` }),
  },
};</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>La composició d'esquemes és una tècnica poderosa en GraphQL que et permet:</p>
<ul>
<li>Combinar múltiples esquemes en un únic esquema unificat.</li>
<li>Millorar la modularitat, reutilització i escalabilitat de les teves APIs de GraphQL.</li>
<li>Integrar APIs de tercers sense problemes.</li>
</ul>
<p>Entenent i implementant la composició d'esquemes, pots construir arquitectures de GraphQL més flexibles i mantenibles, especialment en sistemes complexos o distribuïts.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='directives'>&#x25C4;Directives</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Composició d'Esquemes en GraphQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='batching-and-caching'>Agrupació i emmagatzematge en memòria cau &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
