<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multithreading en Delphi/Object Pascal</title>

    <link rel="alternate" href="https://campusempresa.com/es/delphi/multithreading" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/delphi/multithreading" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/delphi/multithreading" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/delphi/multithreading" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='database-access-with-delphi'>&#x25C4;Accés a Bases de Dades amb Delphi</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Multithreading en Delphi/Object Pascal</a>
	</div>
	<div class='col-4 text-end'>
					<a href='networking-and-internet-programming'>Programació de Xarxes i Internet &#x25BA;</a>
			</div>
</div>
<div class='content'><p>El multithreading és una característica poderosa en Delphi/Object Pascal que permet a un programa realitzar múltiples operacions simultàniament. Això pot millorar significativament el rendiment de les aplicacions, especialment aquelles que realitzen tasques que consumeixen molt de temps. Aquest tema et guiarà des dels conceptes bàsics del multithreading fins a conceptes avançats, amb explicacions clares, exemples i exercicis.</p>
</div><h1>Introducció al Multithreading</h1>
<div class='content'><ul>
<li><strong>Definició</strong>: El multithreading és la capacitat d'una CPU, o d'un sol nucli en un processador multi-nucli, de proporcionar múltiples fils d'execució simultàniament.</li>
<li><strong>Beneficis</strong>:
<ul>
<li>Millora la resposta de l'aplicació.</li>
<li>Millor utilització dels recursos de la CPU.</li>
<li>Rendiment millorat per a tasques concurrents.</li>
</ul>
</li>
</ul>
</div><h1>Conceptes Bàsics</h1>
<div class='content'></div><h2>Fils i Processos</h2>
<div class='content'><ul>
<li><strong>Procés</strong>: Un programa independent en execució, amb el seu propi espai de memòria.</li>
<li><strong>Fil</strong>: La unitat més petita d'execució dins d'un procés, compartint el mateix espai de memòria.</li>
</ul>
</div><h2>Creació de Fils en Delphi</h2>
<div class='content'><p>En Delphi, els fils es creen definint una classe que hereta de <code>TThread</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHlwZQogIFRNeVRocmVhZCA9IGNsYXNzKFRUaHJlYWQpCiAgcHJvdGVjdGVkCiAgICBwcm9jZWR1cmUgRXhlY3V0ZTsgb3ZlcnJpZGU7CiAgZW5kOwoKcHJvY2VkdXJlIFRNeVRocmVhZC5FeGVjdXRlOwpiZWdpbgogIC8vIEVsIGNvZGkgZGVsIGZpbCB2YSBhcXXDrQplbmQ7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>type
  TMyThread = class(TThread)
  protected
    procedure Execute; override;
  end;

procedure TMyThread.Execute;
begin
  // El codi del fil va aqu&iacute;
end;</pre></div><div class='content'></div><h2>Iniciar un Fil</h2>
<div class='content'><p>Per iniciar un fil, crea una instància de la classe del fil i crida el seu mètode <code>Start</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgTXlUaHJlYWQ6IFRNeVRocmVhZDsKYmVnaW4KICBNeVRocmVhZCA6PSBUTXlUaHJlYWQuQ3JlYXRlKFRydWUpOyAvLyBDcmVhciBzdXNww6hzCiAgTXlUaHJlYWQuU3RhcnQ7IC8vIEluaWNpYXIgZWwgZmlsCmVuZDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  MyThread: TMyThread;
begin
  MyThread := TMyThread.Create(True); // Crear susp&egrave;s
  MyThread.Start; // Iniciar el fil
end;</pre></div><div class='content'></div><h1>Sincronització</h1>
<div class='content'><p>Quan múltiples fils accedeixen a recursos compartits, la sincronització és crucial per evitar conflictes i assegurar la integritat de les dades.</p>
</div><h2>Seccions Crítiques</h2>
<div class='content'><p>Una secció crítica és una porció de codi que només un fil pot executar a la vegada.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgQ3JpdGljYWxTZWN0aW9uOiBUUlRMQ3JpdGljYWxTZWN0aW9uOwoKcHJvY2VkdXJlIFRNeVRocmVhZC5FeGVjdXRlOwpiZWdpbgogIEVudGVyQ3JpdGljYWxTZWN0aW9uKENyaXRpY2FsU2VjdGlvbik7CiAgdHJ5CiAgICAvLyBDb2RpIHF1ZSBhY2NlZGVpeCBhIHJlY3Vyc29zIGNvbXBhcnRpdHMKICBmaW5hbGx5CiAgICBMZWF2ZUNyaXRpY2FsU2VjdGlvbihDcml0aWNhbFNlY3Rpb24pOwogIGVuZDsKZW5kOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  CriticalSection: TRTLCriticalSection;

procedure TMyThread.Execute;
begin
  EnterCriticalSection(CriticalSection);
  try
    // Codi que accedeix a recursos compartits
  finally
    LeaveCriticalSection(CriticalSection);
  end;
end;</pre></div><div class='content'></div><h2>TMonitor</h2>
<div class='content'><p><code>TMonitor</code> proporciona un mecanisme de sincronització de nivell superior.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvY2VkdXJlIFRNeVRocmVhZC5FeGVjdXRlOwpiZWdpbgogIFRNb25pdG9yLkVudGVyKFNvbWVPYmplY3QpOwogIHRyeQogICAgLy8gQ29kaSBxdWUgYWNjZWRlaXggYSByZWN1cnNvcyBjb21wYXJ0aXRzCiAgZmluYWxseQogICAgVE1vbml0b3IuRXhpdChTb21lT2JqZWN0KTsKICBlbmQ7CmVuZDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>procedure TMyThread.Execute;
begin
  TMonitor.Enter(SomeObject);
  try
    // Codi que accedeix a recursos compartits
  finally
    TMonitor.Exit(SomeObject);
  end;
end;</pre></div><div class='content'></div><h1>Conceptes Avançats</h1>
<div class='content'></div><h2>Comunicació entre Fils</h2>
<div class='content'><p>Els fils sovint necessiten comunicar-se entre ells o amb el fil principal.</p>
<h4>Utilitzant Synchronize</h4>
<p><code>Synchronize</code> permet a un fil executar codi en el context del fil principal.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvY2VkdXJlIFRNeVRocmVhZC5FeGVjdXRlOwpiZWdpbgogIFN5bmNocm9uaXplKHByb2NlZHVyZQogIGJlZ2luCiAgICAvLyBDb2RpIHBlciBzZXIgZXhlY3V0YXQgZW4gZWwgZmlsIHByaW5jaXBhbAogIGVuZCk7CmVuZDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>procedure TMyThread.Execute;
begin
  Synchronize(procedure
  begin
    // Codi per ser executat en el fil principal
  end);
end;</pre></div><div class='content'><h4>Utilitzant TThread.Queue</h4>
<p><code>TThread.Queue</code> és una alternativa no bloquejant a <code>Synchronize</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvY2VkdXJlIFRNeVRocmVhZC5FeGVjdXRlOwpiZWdpbgogIFRUaHJlYWQuUXVldWUobmlsLCBwcm9jZWR1cmUKICBiZWdpbgogICAgLy8gQ29kaSBwZXIgc2VyIGV4ZWN1dGF0IGVuIGVsIGZpbCBwcmluY2lwYWwKICBlbmQpOwplbmQ7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>procedure TMyThread.Execute;
begin
  TThread.Queue(nil, procedure
  begin
    // Codi per ser executat en el fil principal
  end);
end;</pre></div><div class='content'></div><h2>Pools de Fils</h2>
<div class='content'><p>Un pool de fils és una col·lecció de fils treballadors que gestionen eficientment l'execució de tasques asíncrones.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlcwogIFN5c3RlbS5UaHJlYWRpbmc7Cgpwcm9jZWR1cmUgVXNlVGhyZWFkUG9vbDsKYmVnaW4KICBUVGFzay5SdW4ocHJvY2VkdXJlCiAgYmVnaW4KICAgIC8vIENvZGkgZGUgbGEgdGFzY2EgYXPDrW5jcm9uYQogIGVuZCk7CmVuZDs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>uses
  System.Threading;

procedure UseThreadPool;
begin
  TTask.Run(procedure
  begin
    // Codi de la tasca as&iacute;ncrona
  end);
end;</pre></div><div class='content'></div><h1>Exercicis</h1>
<div class='content'><ol>
<li><strong>Creació Bàsica de Fils</strong>: Crea un fil senzill que imprimeixi números de l'1 al 10 amb un retard.</li>
<li><strong>Sincronització</strong>: Modifica el fil anterior per imprimir números de manera sincronitzada per evitar conflictes.</li>
<li><strong>Comunicació entre Fils</strong>: Crea un fil que actualitzi una etiqueta en un formulari utilitzant <code>Synchronize</code> o <code>TThread.Queue</code>.</li>
<li><strong>Pool de Fils</strong>: Implementa una tasca utilitzant <code>TTask.Run</code> que realitzi un càlcul en segon pla i actualitzi la interfície d'usuari amb el resultat.</li>
</ol>
</div><h1>Resum</h1>
<div class='content'><p>El multithreading en Delphi/Object Pascal permet l'execució concurrent de codi, millorant el rendiment i la resposta de l'aplicació. Entenent els conceptes bàsics de la creació de fils, la sincronització i la comunicació, així com conceptes avançats com els pools de fils, pots aprofitar efectivament el multithreading en les teves aplicacions. Practica amb els exercicis proporcionats per solidificar la teva comprensió i millorar les teves habilitats.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='database-access-with-delphi'>&#x25C4;Accés a Bases de Dades amb Delphi</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Multithreading en Delphi/Object Pascal</a>
	</div>
	<div class='col-4 text-end'>
					<a href='networking-and-internet-programming'>Programació de Xarxes i Internet &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
