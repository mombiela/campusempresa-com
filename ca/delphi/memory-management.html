<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestió de Memòria en Delphi/Object Pascal</title>

    <link rel="alternate" href="https://campusempresa.com/es/delphi/memory-management" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/delphi/memory-management" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/delphi/memory-management" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/delphi/memory-management" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='performance-optimization'>&#x25C4;Optimització del Rendiment</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Gestió de Memòria en Delphi/Object Pascal</a>
	</div>
	<div class='col-4 text-end'>
					<a href='version-control-and-collaboration'>Control de Versions i Col·laboració &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La gestió de memòria és un aspecte crític de la programació, assegurant que les aplicacions funcionin de manera eficient i sense errors relacionats amb l'assignació i alliberament de memòria. En Delphi/Object Pascal, entendre com es gestiona la memòria pot ajudar-te a escriure codi més robust i eficient.</p>
</div><h1>Introducció a la Gestió de Memòria</h1>
<div class='content'><p>La gestió de memòria implica l'assignació, ús i alliberament de memòria durant l'execució d'un programa. En Delphi/Object Pascal, això es maneja a través de diversos mecanismes, incloent la gestió manual de memòria i la gestió automàtica de memòria.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Heap i Stack</strong>: La memòria en Delphi es divideix en l'stack i el heap.
<ul>
<li><strong>Stack</strong>: Utilitzat per a l'assignació estàtica de memòria, com ara variables locals.</li>
<li><strong>Heap</strong>: Utilitzat per a l'assignació dinàmica de memòria, com ara objectes i arrays dinàmics.</li>
</ul>
</li>
<li><strong>Punteres</strong>: Variables que contenen adreces de memòria, permetent la gestió dinàmica de memòria.</li>
<li><strong>Recollida d'escombraries</strong>: Delphi no té recollida d'escombraries automàtica com alguns altres llenguatges (per exemple, Java). En canvi, es basa en la gestió manual de memòria.</li>
<li><strong>Comptatge de referències</strong>: Utilitzat per gestionar la vida útil de certs tipus d'objectes, com ara cadenes i interfícies.</li>
</ul>
</div><h1>Gestió Manual de Memòria</h1>
<div class='content'><p>En Delphi, la gestió manual de memòria implica l'assignació i alliberament explícit de memòria. Això es fa típicament utilitzant punteres i els procediments <code>New</code>, <code>Dispose</code>, <code>GetMem</code> i <code>FreeMem</code>.</p>
</div><h2>Assignació i Alliberament de Memòria</h2>
<div class='content'><h4>Utilitzant Punteres</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgUDogXkludGVnZXI7CmJlZ2luCiAgTmV3KFApOyAgICAgIC8vIEFzc2lnbmFyIG1lbcOycmlhIHBlciBhIHVuIGVudGVyCiAgUF4gOj0gMTA7ICAgIC8vIEFzc2lnbmFyIHVuIHZhbG9yIGEgbGEgbWVtw7JyaWEgYXNzaWduYWRhCiAgRGlzcG9zZShQKTsgIC8vIEFsbGliZXJhciBsYSBtZW3DsnJpYSBhc3NpZ25hZGEKZW5kOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  P: ^Integer;
begin
  New(P);      // Assignar mem&ograve;ria per a un enter
  P^ := 10;    // Assignar un valor a la mem&ograve;ria assignada
  Dispose(P);  // Alliberar la mem&ograve;ria assignada
end;</pre></div><div class='content'><h4>Utilitzant <code>GetMem</code> i <code>FreeMem</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgUDogUG9pbnRlcjsKYmVnaW4KICBHZXRNZW0oUCwgU2l6ZU9mKEludGVnZXIpKTsgIC8vIEFzc2lnbmFyIG1lbcOycmlhIHBlciBhIHVuIGVudGVyCiAgSW50ZWdlcihQXikgOj0gMTA7ICAgICAgICAgICAvLyBBc3NpZ25hciB1biB2YWxvciBhIGxhIG1lbcOycmlhIGFzc2lnbmFkYQogIEZyZWVNZW0oUCk7ICAgICAgICAgICAgICAgICAgLy8gQWxsaWJlcmFyIGxhIG1lbcOycmlhIGFzc2lnbmFkYQplbmQ7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  P: Pointer;
begin
  GetMem(P, SizeOf(Integer));  // Assignar mem&ograve;ria per a un enter
  Integer(P^) := 10;           // Assignar un valor a la mem&ograve;ria assignada
  FreeMem(P);                  // Alliberar la mem&ograve;ria assignada
end;</pre></div><div class='content'></div><h1>Gestió Automàtica de Memòria</h1>
<div class='content'><p>Tot i que Delphi no té un recol·lector d'escombraries, proporciona algunes característiques de gestió automàtica de memòria, particularment a través del comptatge de referències per a certs tipus d'objectes.</p>
</div><h2>Comptatge de Referències</h2>
<div class='content'><p>El comptatge de referències s'utilitza per gestionar la vida útil de cadenes, arrays dinàmics i interfícies. Quan el comptatge de referències arriba a zero, la memòria s'allibera automàticament.</p>
<h4>Exemple amb Cadenes</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgUzEsIFMyOiBzdHJpbmc7CmJlZ2luCiAgUzEgOj0gJ0hvbGEnOwogIFMyIDo9IFMxOyAgLy8gUzIgYXJhIGZhIHJlZmVyw6huY2lhIGEgbGEgbWF0ZWl4YSBjYWRlbmEgcXVlIFMxCiAgLy8gUXVhbiBTMSBpIFMyIHN1cnRlbiBkZSBsJ8OgbWJpdCwgbGEgbWVtw7JyaWEgZGUgbGEgY2FkZW5hIHMnYWxsaWJlcmEKZW5kOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  S1, S2: string;
begin
  S1 := 'Hola';
  S2 := S1;  // S2 ara fa refer&egrave;ncia a la mateixa cadena que S1
  // Quan S1 i S2 surten de l'&agrave;mbit, la mem&ograve;ria de la cadena s'allibera
end;</pre></div><div class='content'><h4>Exemple amb Interfícies</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHlwZQogIElNeUludGVyZmFjZSA9IGludGVyZmFjZQogICAgcHJvY2VkdXJlIERvU29tZXRoaW5nOwogIGVuZDsKCiAgVE15T2JqZWN0ID0gY2xhc3MoVEludGVyZmFjZWRPYmplY3QsIElNeUludGVyZmFjZSkKICAgIHByb2NlZHVyZSBEb1NvbWV0aGluZzsKICBlbmQ7Cgpwcm9jZWR1cmUgVE15T2JqZWN0LkRvU29tZXRoaW5nOwpiZWdpbgogIC8vIEltcGxlbWVudGFjacOzCmVuZDsKCnZhcgogIEludGY6IElNeUludGVyZmFjZTsKYmVnaW4KICBJbnRmIDo9IFRNeU9iamVjdC5DcmVhdGU7ICAvLyBFbCBjb21wdGF0Z2UgZGUgcmVmZXLDqG5jaWVzIMOpcyAxCiAgSW50Zi5Eb1NvbWV0aGluZzsKICAvLyBRdWFuIEludGYgc3VydCBkZSBsJ8OgbWJpdCwgZWwgY29tcHRhdGdlIGRlIHJlZmVyw6huY2llcyBiYWl4YSBhIDAgaSBsJ29iamVjdGUgcydhbGxpYmVyYQplbmQ7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>type
  IMyInterface = interface
    procedure DoSomething;
  end;

  TMyObject = class(TInterfacedObject, IMyInterface)
    procedure DoSomething;
  end;

procedure TMyObject.DoSomething;
begin
  // Implementaci&oacute;
end;

var
  Intf: IMyInterface;
begin
  Intf := TMyObject.Create;  // El comptatge de refer&egrave;ncies &eacute;s 1
  Intf.DoSomething;
  // Quan Intf surt de l'&agrave;mbit, el comptatge de refer&egrave;ncies baixa a 0 i l'objecte s'allibera
end;</pre></div><div class='content'></div><h1>Millors Pràctiques</h1>
<div class='content'><ul>
<li><strong>Allibera sempre la memòria assignada dinàmicament</strong>: Assegura't que cada crida a <code>New</code> o <code>GetMem</code> tingui una crida corresponent a <code>Dispose</code> o <code>FreeMem</code>.</li>
<li><strong>Utilitza blocs <code>try...finally</code></strong>: Per assegurar que la memòria s'allibera fins i tot si es produeix una excepció.</li>
<li><strong>Prefereix la gestió automàtica de memòria</strong>: Quan sigui possible, utilitza cadenes, arrays dinàmics i interfícies per aprofitar el comptatge de referències.</li>
</ul>
</div><h2>Exemple de `try...finally`</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgUDogXkludGVnZXI7CmJlZ2luCiAgTmV3KFApOwogIHRyeQogICAgUF4gOj0gMTA7CiAgICAvLyBSZWFsaXR6YSBvcGVyYWNpb25zIGFtYiBQCiAgZmluYWxseQogICAgRGlzcG9zZShQKTsgIC8vIEFzc2VndXJhIHF1ZSBsYSBtZW3DsnJpYSBzJ2FsbGliZXJhIGZpbnMgaSB0b3Qgc2kgZXMgcHJvZHVlaXggdW5hIGV4Y2VwY2nDswogIGVuZDsKZW5kOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  P: ^Integer;
begin
  New(P);
  try
    P^ := 10;
    // Realitza operacions amb P
  finally
    Dispose(P);  // Assegura que la mem&ograve;ria s'allibera fins i tot si es produeix una excepci&oacute;
  end;
end;</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>La gestió de memòria en Delphi/Object Pascal requereix una bona comprensió tant de les tècniques manuals com automàtiques. Dominant les punteres, les funcions d'assignació de memòria i el comptatge de referències, pots escriure aplicacions eficients i lliures d'errors. Recorda sempre alliberar la memòria assignada i utilitzar blocs <code>try...finally</code> per gestionar les excepcions adequadament. Amb aquestes pràctiques, pots assegurar que les teves aplicacions gestionen la memòria de manera efectiva.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='performance-optimization'>&#x25C4;Optimització del Rendiment</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Gestió de Memòria en Delphi/Object Pascal</a>
	</div>
	<div class='col-4 text-end'>
					<a href='version-control-and-collaboration'>Control de Versions i Col·laboració &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
