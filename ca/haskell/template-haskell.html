<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Haskell</title>

    <link rel="alternate" href="https://campusempresa.com/es/haskell/template-haskell" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/haskell/template-haskell" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/haskell/template-haskell" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/haskell/template-haskell" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='foreign-function-interface'>&#x25C4;Interfície de Funcions Estrangeres (FFI)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Template Haskell</a>
	</div>
	<div class='col-4 text-end'>
					<a href='metaprogramming'>Metaprogramació &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Template Haskell és una eina potent de metaprogramació en Haskell que et permet generar i manipular codi Haskell programàticament. Aquest tema et guiarà a través dels conceptes bàsics de Template Haskell, els seus conceptes clau i exemples pràctics per ajudar-te a entendre i utilitzar aquesta característica de manera efectiva.</p>
</div><h1>Introducció a Template Haskell</h1>
<div class='content'><p>Template Haskell (TH) és una extensió de Haskell que permet la metaprogramació en temps de compilació. Et permet escriure codi que genera altre codi, cosa que pot ser molt útil per a tasques com:</p>
<ul>
<li>Generació de codi</li>
<li>Càlcul en temps de compilació</li>
<li>Implementació de llenguatges específics de domini</li>
<li>Optimització</li>
</ul>
<p>Per utilitzar Template Haskell, has d'habilitar l'extensió afegint la següent pragma a la part superior del teu fitxer Haskell:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}</pre></div><div class='content'></div><h1>Conceptes Clau</h1>
<div class='content'></div><h2>Quasi-Quotes</h2>
<div class='content'><p>Els quasi-quotes són una manera d'incloure fragments de codi dins del teu codi Haskell que seran processats per Template Haskell. Els quasi-quotes utilitzen una sintaxi especial per denotar codi que ha de ser tractat com una expressió de Template Haskell.</p>
<ul>
<li><strong>Quasi-Quotes d'Expressió</strong>: Denotats per <code>[| ... |]</code>, utilitzats per citar expressions.</li>
<li><strong>Quasi-Quotes de Patró</strong>: Denotats per <code>[p| ... |]</code>, utilitzats per citar patrons.</li>
<li><strong>Quasi-Quotes de Tipus</strong>: Denotats per <code>[t| ... |]</code>, utilitzats per citar tipus.</li>
<li><strong>Quasi-Quotes de Declaració</strong>: Denotats per <code>[d| ... |]</code>, utilitzats per citar declaracions.</li>
</ul>
<p>Exemple:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKbWFpbiA6OiBJTyAoKQptYWluID0gZG8KICBsZXQgZXhwciA9IFt8IDEgKyAyIHxdCiAgcHV0U3RyTG4gJCAiTCdleHByZXNzacOzIGNpdGFkYSDDqXM6ICIgKysgc2hvdyBleHBy"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

main :: IO ()
main = do
  let expr = [| 1 + 2 |]
  putStrLn $ &quot;L'expressi&oacute; citada &eacute;s: &quot; ++ show expr</pre></div><div class='content'></div><h2>Splicing</h2>
<div class='content'><p>El splicing és el procés d'inserir el resultat d'un càlcul de Template Haskell dins del teu codi. El splicing es denota amb <code>$</code> per a expressions i <code>$$</code> per a declaracions.</p>
<p>Exemple:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKbWFpbiA6OiBJTyAoKQptYWluID0gZG8KICBsZXQgZXhwciA9ICQoIFt8IDEgKyAyIHxdICkKICBwdXRTdHJMbiAkICJMJ2V4cHJlc3Npw7Mgc3BsaWNlZCBzJ2F2YWx1YSBhOiAiICsrIHNob3cgZXhwcg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

main :: IO ()
main = do
  let expr = $( [| 1 + 2 |] )
  putStrLn $ &quot;L'expressi&oacute; spliced s'avalua a: &quot; ++ show expr</pre></div><div class='content'></div><h2>Reification</h2>
<div class='content'><p>La reification és el procés de consultar el compilador per obtenir informació sobre un nom donat. Això pot ser útil per a la introspecció i la generació de codi basat en definicions existents.</p>
<p>Exemple:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKbWFpbiA6OiBJTyAoKQptYWluID0gZG8KICBpbmZvIDwtIHJlaWZ5ICdtYWluCiAgcHV0U3RyTG4gJCAiSW5mb3JtYWNpw7Mgc29icmUgJ21haW4nOiAiICsrIHNob3cgaW5mbw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

main :: IO ()
main = do
  info &lt;- reify 'main
  putStrLn $ &quot;Informaci&oacute; sobre 'main': &quot; ++ show info</pre></div><div class='content'></div><h2>Generació de Codi</h2>
<div class='content'><p>Template Haskell et permet generar codi programàticament utilitzant la seva API. Això pot ser particularment útil per crear codi boilerplate o implementar llenguatges específics de domini.</p>
<p>Exemple:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKZ2VuRnVuY3Rpb24gOjogUSBbRGVjXQpnZW5GdW5jdGlvbiA9IFtkfAogIGdlbmVyYXRlZEZ1bmN0aW9uIDo6IEludCAtPiBJbnQKICBnZW5lcmF0ZWRGdW5jdGlvbiB4ID0geCArIDEKICB8XQoKJChnZW5GdW5jdGlvbikKCm1haW4gOjogSU8gKCkKbWFpbiA9IHByaW50ICQgZ2VuZXJhdGVkRnVuY3Rpb24gNQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

genFunction :: Q [Dec]
genFunction = [d|
  generatedFunction :: Int -&gt; Int
  generatedFunction x = x + 1
  |]

$(genFunction)

main :: IO ()
main = print $ generatedFunction 5</pre></div><div class='content'></div><h1>Exemples Pràctics</h1>
<div class='content'></div><h2>Exemple 1: Càlcul en Temps de Compilació</h2>
<div class='content'><p>Template Haskell es pot utilitzar per realitzar càlculs en temps de compilació, que després es poden inserir al codi.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKZmFjdG9yaWFsIDo6IEludGVnZXIgLT4gSW50ZWdlcgpmYWN0b3JpYWwgMCA9IDEKZmFjdG9yaWFsIG4gPSBuICogZmFjdG9yaWFsIChuIC0gMSkKCmZhY3RvcmlhbFRIIDo6IEludGVnZXIgLT4gUSBFeHAKZmFjdG9yaWFsVEggbiA9IFt8IGZhY3RvcmlhbCBuIHxdCgptYWluIDo6IElPICgpCm1haW4gPSBkbwogIGxldCBmYWN0NSA9ICQoZmFjdG9yaWFsVEggNSkKICBwdXRTdHJMbiAkICJFbCBmYWN0b3JpYWwgZGUgNSDDqXM6ICIgKysgc2hvdyBmYWN0NQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

factorial :: Integer -&gt; Integer
factorial 0 = 1
factorial n = n * factorial (n - 1)

factorialTH :: Integer -&gt; Q Exp
factorialTH n = [| factorial n |]

main :: IO ()
main = do
  let fact5 = $(factorialTH 5)
  putStrLn $ &quot;El factorial de 5 &eacute;s: &quot; ++ show fact5</pre></div><div class='content'></div><h2>Exemple 2: Generació de Codi Boilerplate</h2>
<div class='content'><p>Template Haskell es pot utilitzar per generar codi boilerplate repetitiu, com ara instàncies per a tipus de dades.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKZGF0YSBNeURhdGEgPSBNeURhdGEgSW50IFN0cmluZwoKZGVyaXZlU2hvdyA6OiBOYW1lIC0+IFEgW0RlY10KZGVyaXZlU2hvdyBuYW1lID0gW2R8CiAgaW5zdGFuY2UgU2hvdyAkKGNvblQgbmFtZSkgd2hlcmUKICAgIHNob3cgKE15RGF0YSBpIHMpID0gIk15RGF0YSAiICsrIHNob3cgaSArKyAiICIgKysgc2hvdyBzCiAgfF0KCiQoZGVyaXZlU2hvdyAnJ015RGF0YSkKCm1haW4gOjogSU8gKCkKbWFpbiA9IHByaW50ICQgTXlEYXRhIDQyICJIb2xhIg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

data MyData = MyData Int String

deriveShow :: Name -&gt; Q [Dec]
deriveShow name = [d|
  instance Show $(conT name) where
    show (MyData i s) = &quot;MyData &quot; ++ show i ++ &quot; &quot; ++ show s
  |]

$(deriveShow ''MyData)

main :: IO ()
main = print $ MyData 42 &quot;Hola&quot;</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Template Haskell és una eina poderosa que pot millorar enormement la teva programació en Haskell permetent-te generar i manipular codi en temps de compilació. Entenent i utilitzant els quasi-quotes, el splicing, la reification i la generació de codi, pots escriure programes Haskell més eficients i mantenibles. Practica amb els exemples proporcionats i explora més per dominar Template Haskell i aprofitar tot el seu potencial en els teus projectes.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='foreign-function-interface'>&#x25C4;Interfície de Funcions Estrangeres (FFI)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Template Haskell</a>
	</div>
	<div class='col-4 text-end'>
					<a href='metaprogramming'>Metaprogramació &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
