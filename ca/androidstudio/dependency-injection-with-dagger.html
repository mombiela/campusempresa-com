<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Injecció de Dependències amb Dagger</title>

    <link rel="alternate" href="https://campusempresa.com/es/androidstudio/dependency-injection-with-dagger" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/androidstudio/dependency-injection-with-dagger" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/androidstudio/dependency-injection-with-dagger" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/androidstudio/dependency-injection-with-dagger" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='app-maintenance-and-updates'>&#x25C4; Manteniment i Actualitzacions de l'Aplicació</a></div><div class='col-6 text-end'><a href='using-jetpack-compose'>Utilitzant Jetpack Compose &#x25BA;</a></div></div><div class='content'></div><h1>Introducció a la Injecció de Dependències</h1>
<div class='content'><ul>
<li><strong>Definició</strong>: La Injecció de Dependències (DI) és un patró de disseny utilitzat per implementar IoC (Inversió de Control), permetent que una classe rebi les seves dependències d'una font externa en lloc de crear-les ella mateixa.</li>
<li><strong>Beneficis</strong>:
<ul>
<li>Millora de la modularitat del codi.</li>
<li>Proves i manteniment més fàcils.</li>
<li>Desacoblament de components.</li>
</ul>
</li>
</ul>
</div><h1>Introducció a Dagger</h1>
<div class='content'><ul>
<li><strong>Definició</strong>: Dagger és un framework d'injecció de dependències totalment estàtic i de temps de compilació per a Java, Kotlin i Android.</li>
<li><strong>Per què Dagger?</strong>:
<ul>
<li>Verificació de dependències en temps de compilació.</li>
<li>Eficiència de rendiment.</li>
<li>Simplifica la gestió de dependències en projectes grans.</li>
</ul>
</li>
</ul>
</div><h1>Configuració de Dagger a Android Studio</h1>
<div class='content'><ol>
<li><strong>Afegeix les dependències de Dagger</strong>:
<pre><code class="language-gradle">dependencies {
    implementation 'com.google.dagger:dagger:2.x'
    kapt 'com.google.dagger:dagger-compiler:2.x'
}
</code></pre>
</li>
<li><strong>Habilita el processament d'anotacions</strong>:
<pre><code class="language-gradle">android {
    ...
    kapt {
        generateStubs = true
    }
}
</code></pre>
</li>
</ol>
</div><h1>Conceptes Bàsics de Dagger</h1>
<div class='content'><ul>
<li><strong>Mòduls</strong>: Classes anotades amb <code>@Module</code> que proporcionen dependències.</li>
<li><strong>Components</strong>: Interfícies anotades amb <code>@Component</code> que actuen com a ponts entre mòduls i objectius d'injecció.</li>
<li><strong>Inject</strong>: Anotació utilitzada per sol·licitar dependències.</li>
</ul>
</div><h2>Exemple: Configuració Bàsica de Dagger</h2>
<div class='content'><ol>
<li><strong>Crea un Mòdul</strong>:
<pre><code class="language-java">@Module
public class NetworkModule {
    @Provides
    public Retrofit provideRetrofit() {
        return new Retrofit.Builder()
                .baseUrl(&quot;https://api.example.com&quot;)
                .build();
    }
}
</code></pre>
</li>
<li><strong>Crea un Component</strong>:
<pre><code class="language-java">@Component(modules = NetworkModule.class)
public interface AppComponent {
    void inject(MainActivity mainActivity);
}
</code></pre>
</li>
<li><strong>Injecció de Dependències</strong>:
<pre><code class="language-java">public class MainActivity extends AppCompatActivity {
    @Inject
    Retrofit retrofit;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        AppComponent appComponent = DaggerAppComponent.create();
        appComponent.inject(this);

        // Utilitza la instància de Retrofit injectada
    }
}
</code></pre>
</li>
</ol>
</div><h1>Conceptes Avançats de Dagger</h1>
<div class='content'><ul>
<li>
<p><strong>Scopes</strong>: Utilitzats per gestionar el cicle de vida de les dependències.</p>
<ul>
<li><strong>Singleton Scope</strong>: Assegura una única instància d'una dependència.
<pre><code class="language-java">@Module
public class AppModule {
    @Provides
    @Singleton
    public Context provideContext(Application application) {
        return application.getApplicationContext();
    }
}
</code></pre>
</li>
<li><strong>Custom Scopes</strong>: Defineix scopes personalitzats per a casos d'ús específics.
<pre><code class="language-java">@Scope
@Retention(RetentionPolicy.RUNTIME)
public @interface ActivityScope {}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Subcomponents</strong>: Permeten gràfics de dependències més granulars.</p>
<pre><code class="language-java">@Subcomponent
public interface ActivityComponent {
    void inject(MyActivity myActivity);
}
</code></pre>
</li>
<li>
<p><strong>Multibindings</strong>: Injecció de col·leccions de dependències.</p>
<pre><code class="language-java">@Module
public abstract class MultibindingsModule {
    @Binds
    @IntoMap
    @StringKey(&quot;example&quot;)
    abstract MyInterface bindExample(ExampleImpl impl);
}
</code></pre>
</li>
</ul>
</div><h1>Proves amb Dagger</h1>
<div class='content'><ul>
<li>
<p><strong>Proves Unitàries</strong>: Utilitza <code>@Inject</code> de Dagger per injectar mocks.</p>
<pre><code class="language-java">@RunWith(MockitoJUnitRunner.class)
public class MyTest {
    @Mock
    Retrofit retrofit;

    @Inject
    MyService myService;

    @Before
    public void setUp() {
        DaggerTestComponent.create().inject(this);
    }

    @Test
    public void testService() {
        // Prova utilitzant el mock Retrofit injectat
    }
}
</code></pre>
</li>
<li>
<p><strong>Proves amb Espresso</strong>: Utilitza Dagger per injectar dependències en proves d'interfície d'usuari.</p>
<pre><code class="language-java">@RunWith(AndroidJUnit4.class)
public class MyEspressoTest {
    @Rule
    public ActivityTestRule&lt;MainActivity&gt; activityRule = new ActivityTestRule&lt;&gt;(MainActivity.class);

    @Before
    public void setUp() {
        // Injecta dependències
    }

    @Test
    public void testUI() {
        // Realitza proves d'interfície d'usuari
    }
}
</code></pre>
</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><ul>
<li><strong>Resum</strong>:
<ul>
<li>Dagger simplifica la gestió de dependències en aplicacions Android.</li>
<li>Proporciona seguretat en temps de compilació i beneficis de rendiment.</li>
<li>Entendre mòduls, components i scopes és crucial per a un ús efectiu.</li>
<li>Funcions avançades com subcomponents i multibindings ofereixen eines poderoses per a gràfics de dependències complexos.</li>
<li>Dagger s'integra bé amb frameworks de proves, millorant la testabilitat de les aplicacions Android.</li>
</ul>
</li>
</ul>
<p>En dominar Dagger, pots escriure codi més net, més mantenible i testable, fent que les teves aplicacions Android siguin més robustes i escalables.</p>
</div><div class='row navigation'><div class='col-6'><a href='app-maintenance-and-updates'>&#x25C4; Manteniment i Actualitzacions de l'Aplicació</a></div><div class='col-6 text-end'><a href='using-jetpack-compose'>Utilitzant Jetpack Compose &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
