<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducció a la Xarxa</title>

    <link rel="alternate" href="https://campusempresa.com/es/androidstudio/introduction-to-networking" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/androidstudio/introduction-to-networking" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/androidstudio/introduction-to-networking" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/androidstudio/introduction-to-networking" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Visió General</h1>
<div class='content'><p>La xarxa és un aspecte crucial de les aplicacions modernes d'Android, permetent-les comunicar-se amb servidors, obtenir dades i interactuar amb serveis web. Aquesta secció et guiarà a través dels conceptes bàsics de la xarxa a Android Studio, des de fer sol·licituds HTTP senzilles fins a gestionar operacions de xarxa més complexes.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>HTTP i HTTPS</strong>: Protocols per a la comunicació de dades a través del web.</li>
<li><strong>APIs RESTful</strong>: Serveis web que segueixen els principis REST.</li>
<li><strong>JSON</strong>: Un format lleuger d'intercanvi de dades.</li>
<li><strong>XML</strong>: Un llenguatge de marques per a la representació de dades.</li>
<li><strong>Biblioteques</strong>: Eines com Retrofit, OkHttp i Volley que simplifiquen les operacions de xarxa.</li>
</ul>
</div><h1>Fer Sol·licituds HTTP</h1>
<h2>Utilitzant HttpURLConnection</h2>
<div class='content'><p>HttpURLConnection és una classe estàndard de Java per fer sol·licituds HTTP. A continuació es mostra un exemple senzill de fer una sol·licitud GET.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmEuaW8uQnVmZmVyZWRSZWFkZXI7CmltcG9ydCBqYXZhLmlvLklucHV0U3RyZWFtUmVhZGVyOwppbXBvcnQgamF2YS5uZXQuSHR0cFVSTENvbm5lY3Rpb247CmltcG9ydCBqYXZhLm5ldC5VUkw7CgpwdWJsaWMgY2xhc3MgTmV0d29ya1V0aWxzIHsKCiAgICBwdWJsaWMgc3RhdGljIFN0cmluZyBnZXRIdHRwUmVzcG9uc2UoU3RyaW5nIHVybFN0cmluZykgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwodXJsU3RyaW5nKTsKICAgICAgICBIdHRwVVJMQ29ubmVjdGlvbiB1cmxDb25uZWN0aW9uID0gKEh0dHBVUkxDb25uZWN0aW9uKSB1cmwub3BlbkNvbm5lY3Rpb24oKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBCdWZmZXJlZFJlYWRlciBpbiA9IG5ldyBCdWZmZXJlZFJlYWRlcihuZXcgSW5wdXRTdHJlYW1SZWFkZXIodXJsQ29ubmVjdGlvbi5nZXRJbnB1dFN0cmVhbSgpKSk7CiAgICAgICAgICAgIFN0cmluZyBpbnB1dExpbmU7CiAgICAgICAgICAgIFN0cmluZ0J1aWxkZXIgY29udGVudCA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgICAgIHdoaWxlICgoaW5wdXRMaW5lID0gaW4ucmVhZExpbmUoKSkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgY29udGVudC5hcHBlbmQoaW5wdXRMaW5lKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpbi5jbG9zZSgpOwogICAgICAgICAgICByZXR1cm4gY29udGVudC50b1N0cmluZygpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHVybENvbm5lY3Rpb24uZGlzY29ubmVjdCgpOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

public class NetworkUtils {

    public static String getHttpResponse(String urlString) throws Exception {
        URL url = new URL(urlString);
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));
            String inputLine;
            StringBuilder content = new StringBuilder();
            while ((inputLine = in.readLine()) != null) {
                content.append(inputLine);
            }
            in.close();
            return content.toString();
        } finally {
            urlConnection.disconnect();
        }
    }
}</pre></div><div class='content'><ul>
<li><strong>URL</strong>: Representa l'URL al qual es fa la sol·licitud.</li>
<li><strong>HttpURLConnection</strong>: Obre una connexió a l'URL.</li>
<li><strong>BufferedReader</strong>: Llegeix la resposta del flux d'entrada.</li>
</ul>
</div><h1>Analitzar Dades JSON</h1>
<div class='content'><p>La majoria dels serveis web retornen dades en format JSON. Aquí tens com analitzar dades JSON a Android.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5qc29uLkpTT05BcnJheTsKaW1wb3J0IG9yZy5qc29uLkpTT05PYmplY3Q7CgpwdWJsaWMgY2xhc3MgSnNvblBhcnNlciB7CgogICAgcHVibGljIHN0YXRpYyB2b2lkIHBhcnNlSnNvbihTdHJpbmcganNvblN0cmluZykgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIEpTT05PYmplY3QganNvbk9iamVjdCA9IG5ldyBKU09OT2JqZWN0KGpzb25TdHJpbmcpOwogICAgICAgICAgICBTdHJpbmcgbmFtZSA9IGpzb25PYmplY3QuZ2V0U3RyaW5nKCJuYW1lIik7CiAgICAgICAgICAgIGludCBhZ2UgPSBqc29uT2JqZWN0LmdldEludCgiYWdlIik7CiAgICAgICAgICAgIEpTT05BcnJheSBob2JiaWVzID0ganNvbk9iamVjdC5nZXRKU09OQXJyYXkoImhvYmJpZXMiKTsKCiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiTm9tOiAiICsgbmFtZSk7CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiRWRhdDogIiArIGFnZSk7CiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgaG9iYmllcy5sZW5ndGgoKTsgaSsrKSB7CiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIkFmaWNpw7M6ICIgKyBob2JiaWVzLmdldFN0cmluZyhpKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.json.JSONArray;
import org.json.JSONObject;

public class JsonParser {

    public static void parseJson(String jsonString) {
        try {
            JSONObject jsonObject = new JSONObject(jsonString);
            String name = jsonObject.getString(&quot;name&quot;);
            int age = jsonObject.getInt(&quot;age&quot;);
            JSONArray hobbies = jsonObject.getJSONArray(&quot;hobbies&quot;);

            System.out.println(&quot;Nom: &quot; + name);
            System.out.println(&quot;Edat: &quot; + age);
            for (int i = 0; i &lt; hobbies.length(); i++) {
                System.out.println(&quot;Afici&oacute;: &quot; + hobbies.getString(i));
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}</pre></div><div class='content'><ul>
<li><strong>JSONObject</strong>: Representa un objecte JSON.</li>
<li><strong>JSONArray</strong>: Representa una matriu JSON.</li>
<li><strong>getString()</strong> i <strong>getInt()</strong>: Mètodes per extreure dades del JSON.</li>
</ul>
</div><h1>Utilitzant Retrofit</h1>
<div class='content'><p>Retrofit és un client HTTP tipus segur per a Android i Java. Simplifica les operacions de xarxa i gestiona l'anàlisi de JSON automàticament.</p>
</div><h2>Configurar Retrofit</h2>
<div class='content'><ol>
<li>
<p>Afegeix la dependència de Retrofit al teu fitxer <code>build.gradle</code>:</p>
<pre><code class="language-gradle">implementation 'com.squareup.retrofit2:retrofit:2.9.0'
implementation 'com.squareup.retrofit2:converter-gson:2.9.0'
</code></pre>
</li>
<li>
<p>Defineix un model de dades:</p>
<pre><code class="language-java">public class User {
    private String name;
    private int age;
    private List&lt;String&gt; hobbies;

    // Getters i setters
}
</code></pre>
</li>
<li>
<p>Crea una interfície API:</p>
<pre><code class="language-java">import retrofit2.Call;
import retrofit2.http.GET;

public interface ApiService {
    @GET(&quot;users&quot;)
    Call&lt;List&lt;User&gt;&gt; getUsers();
}
</code></pre>
</li>
<li>
<p>Inicialitza Retrofit i fes una sol·licitud de xarxa:</p>
<pre><code class="language-java">import retrofit2.Retrofit;
import retrofit2.converter.gson.GsonConverterFactory;
import retrofit2.Call;
import retrofit2.Callback;
import retrofit2.Response;

public class NetworkClient {

    private static final String BASE_URL = &quot;https://api.example.com/&quot;;

    public static void fetchUsers() {
        Retrofit retrofit = new Retrofit.Builder()
                .baseUrl(BASE_URL)
                .addConverterFactory(GsonConverterFactory.create())
                .build();

        ApiService apiService = retrofit.create(ApiService.class);
        Call&lt;List&lt;User&gt;&gt; call = apiService.getUsers();

        call.enqueue(new Callback&lt;List&lt;User&gt;&gt;() {
            @Override
            public void onResponse(Call&lt;List&lt;User&gt;&gt; call, Response&lt;List&lt;User&gt;&gt; response) {
                if (response.isSuccessful()) {
                    List&lt;User&gt; users = response.body();
                    // Gestiona la llista d'usuaris
                }
            }

            @Override
            public void onFailure(Call&lt;List&lt;User&gt;&gt; call, Throwable t) {
                t.printStackTrace();
            }
        });
    }
}
</code></pre>
</li>
</ol>
<ul>
<li><strong>Retrofit.Builder()</strong>: Configura Retrofit amb l'URL base i una fàbrica de convertidors.</li>
<li><strong>ApiService</strong>: Interfície que defineix els punts finals.</li>
<li><strong>enqueue()</strong>: Envia la sol·licitud de manera asíncrona i notifica el callback de la seva resposta.</li>
</ul>
</div><h1>Gestió d'Errors</h1>
<div class='content'><p>Una gestió d'errors adequada és essencial per a una aplicació robusta. Retrofit proporciona suport integrat per gestionar errors.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2FsbC5lbnF1ZXVlKG5ldyBDYWxsYmFjazxMaXN0PFVzZXI+PigpIHsKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgb25SZXNwb25zZShDYWxsPExpc3Q8VXNlcj4+IGNhbGwsIFJlc3BvbnNlPExpc3Q8VXNlcj4+IHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmlzU3VjY2Vzc2Z1bCgpKSB7CiAgICAgICAgICAgIExpc3Q8VXNlcj4gdXNlcnMgPSByZXNwb25zZS5ib2R5KCk7CiAgICAgICAgICAgIC8vIEdlc3Rpb25hIGxhIGxsaXN0YSBkJ3VzdWFyaXMKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBHZXN0aW9uYSBsYSByZXNwb3N0YSBkJ2Vycm9yCiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiRXJyb3I6ICIgKyByZXNwb25zZS5lcnJvckJvZHkoKS5zdHJpbmcoKSk7CiAgICAgICAgfQogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgb25GYWlsdXJlKENhbGw8TGlzdDxVc2VyPj4gY2FsbCwgVGhyb3dhYmxlIHQpIHsKICAgICAgICB0LnByaW50U3RhY2tUcmFjZSgpOwogICAgfQp9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>call.enqueue(new Callback&lt;List&lt;User&gt;&gt;() {
    @Override
    public void onResponse(Call&lt;List&lt;User&gt;&gt; call, Response&lt;List&lt;User&gt;&gt; response) {
        if (response.isSuccessful()) {
            List&lt;User&gt; users = response.body();
            // Gestiona la llista d'usuaris
        } else {
            // Gestiona la resposta d'error
            System.out.println(&quot;Error: &quot; + response.errorBody().string());
        }
    }

    @Override
    public void onFailure(Call&lt;List&lt;User&gt;&gt; call, Throwable t) {
        t.printStackTrace();
    }
});</pre></div><div class='content'><ul>
<li><strong>response.isSuccessful()</strong>: Comprova si la resposta ha estat exitosa.</li>
<li><strong>response.errorBody()</strong>: Recupera el cos de l'error si la resposta no ha estat exitosa.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>La xarxa és una part fonamental del desenvolupament d'Android, permetent que les aplicacions interactuïn amb serveis web i obtinguin dades. Aquesta secció ha cobert els conceptes bàsics de fer sol·licituds HTTP, analitzar dades JSON i utilitzar Retrofit per a operacions de xarxa més avançades. En dominar aquests conceptes, estaràs ben preparat per construir aplicacions d'Android robustes i responsives que puguin comunicar-se eficaçment a través de la xarxa.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
