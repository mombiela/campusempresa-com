<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APIs i dades JSON en R</title>

    <link rel="alternate" href="https://campusempresa.com/es/r/apis-and-json-data" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/r/apis-and-json-data" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/r/apis-and-json-data" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/r/apis-and-json-data" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció a les APIs i JSON</h1>
<div class='content'><p>Les APIs (Application Programming Interfaces) permeten que diferents aplicacions de programari es comuniquin entre elles. JSON (JavaScript Object Notation) és un format lleuger d'intercanvi de dades que és fàcil de llegir i escriure per als humans, i fàcil de parsejar i generar per a les màquines.</p>
<ul>
<li><strong>API</strong>: Un conjunt de regles i protocols per construir i interactuar amb aplicacions de programari.</li>
<li><strong>JSON</strong>: Un format per estructurar dades, sovint utilitzat en APIs per intercanviar informació.</li>
</ul>
</div><h1>Fer sol·licituds d'API en R</h1>
<div class='content'><p>Per interactuar amb APIs en R, normalment s'utilitza el paquet <code>httr</code>, que proporciona funcions per enviar sol·licituds HTTP i gestionar respostes.</p>
</div><h2>Instal·lar i carregar el paquet `httr`</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW5zdGFsbC5wYWNrYWdlcygiaHR0ciIpCmxpYnJhcnkoaHR0cik="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>install.packages(&quot;httr&quot;)
library(httr)</pre></div><div class='content'></div><h2>Fer una sol·licitud GET</h2>
<div class='content'><p>Una sol·licitud GET recupera dades d'un punt final d'API.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGVtcGxlOiBSZWN1cGVyYXIgZGFkZXMgZCd1bmEgQVBJIHDDumJsaWNhCnVybCA8LSAiaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vZGF0YSIKcmVzcG9uc2UgPC0gR0VUKHVybCkKCiMgQ29tcHJvdmFyIGwnZXN0YXQgZGUgbGEgcmVzcG9zdGEKc3RhdHVzX2NvZGUocmVzcG9uc2Up"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Exemple: Recuperar dades d'una API p&uacute;blica
url &lt;- &quot;https://api.example.com/data&quot;
response &lt;- GET(url)

# Comprovar l'estat de la resposta
status_code(response)</pre></div><div class='content'></div><h2>Gestionar la resposta</h2>
<div class='content'><p>Després de fer una sol·licitud, cal gestionar la resposta, que sovint està en format JSON.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb252ZXJ0aXIgbGEgcmVzcG9zdGEgYSB0ZXh0CnJlc3BvbnNlX3RleHQgPC0gY29udGVudChyZXNwb25zZSwgInRleHQiKQoKIyBQYXJzZWphciBsZXMgZGFkZXMgSlNPTgpsaWJyYXJ5KGpzb25saXRlKQpkYXRhIDwtIGZyb21KU09OKHJlc3BvbnNlX3RleHQpCgojIFZldXJlIGxlcyBkYWRlcwpwcmludChkYXRhKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Convertir la resposta a text
response_text &lt;- content(response, &quot;text&quot;)

# Parsejar les dades JSON
library(jsonlite)
data &lt;- fromJSON(response_text)

# Veure les dades
print(data)</pre></div><div class='content'></div><h1>Treballar amb dades JSON</h1>
<div class='content'><p>El paquet <code>jsonlite</code> en R és comunament utilitzat per parsejar dades JSON.</p>
</div><h2>Instal·lar i carregar el paquet `jsonlite`</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW5zdGFsbC5wYWNrYWdlcygianNvbmxpdGUiKQpsaWJyYXJ5KGpzb25saXRlKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>install.packages(&quot;jsonlite&quot;)
library(jsonlite)</pre></div><div class='content'></div><h2>Parsejar dades JSON</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGVtcGxlIGRlIGRhZGVzIEpTT04KanNvbl9kYXRhIDwtICd7Im5hbWUiOiAiSm9obiIsICJhZ2UiOiAzMCwgImNpdHkiOiAiTmV3IFlvcmsifScKCiMgUGFyc2VqYXIgSlNPTiBhIHVuYSBsbGlzdGEKcGFyc2VkX2RhdGEgPC0gZnJvbUpTT04oanNvbl9kYXRhKQoKIyBBY2NlZGlyIGFscyBlbGVtZW50cwpuYW1lIDwtIHBhcnNlZF9kYXRhJG5hbWUKYWdlIDwtIHBhcnNlZF9kYXRhJGFnZQpjaXR5IDwtIHBhcnNlZF9kYXRhJGNpdHkKCnByaW50KHBhc3RlKCJOb206IiwgbmFtZSkpCnByaW50KHBhc3RlKCJFZGF0OiIsIGFnZSkpCnByaW50KHBhc3RlKCJDaXV0YXQ6IiwgY2l0eSkp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Exemple de dades JSON
json_data &lt;- '{&quot;name&quot;: &quot;John&quot;, &quot;age&quot;: 30, &quot;city&quot;: &quot;New York&quot;}'

# Parsejar JSON a una llista
parsed_data &lt;- fromJSON(json_data)

# Accedir als elements
name &lt;- parsed_data$name
age &lt;- parsed_data$age
city &lt;- parsed_data$city

print(paste(&quot;Nom:&quot;, name))
print(paste(&quot;Edat:&quot;, age))
print(paste(&quot;Ciutat:&quot;, city))</pre></div><div class='content'></div><h2>Convertir objectes R a JSON</h2>
<div class='content'><p>També es poden convertir objectes R a format JSON utilitzant la funció <code>toJSON</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhciB1bmEgbGxpc3RhIGVuIFIKcl9saXN0IDwtIGxpc3QobmFtZSA9ICJKYW5lIiwgYWdlID0gMjUsIGNpdHkgPSAiTG9zIEFuZ2VsZXMiKQoKIyBDb252ZXJ0aXIgbGEgbGxpc3RhIGEgSlNPTgpqc29uX291dHB1dCA8LSB0b0pTT04ocl9saXN0LCBwcmV0dHkgPSBUUlVFKQoKcHJpbnQoanNvbl9vdXRwdXQp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Crear una llista en R
r_list &lt;- list(name = &quot;Jane&quot;, age = 25, city = &quot;Los Angeles&quot;)

# Convertir la llista a JSON
json_output &lt;- toJSON(r_list, pretty = TRUE)

print(json_output)</pre></div><div class='content'></div><h1>Interaccions avançades amb API</h1>
<div class='content'><p>Per a interaccions més complexes, com ara sol·licituds POST o gestionar autenticació, es requereixen passos addicionals.</p>
</div><h2>Fer una sol·licitud POST</h2>
<div class='content'><p>Una sol·licitud POST envia dades a un punt final d'API.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGVtcGxlOiBFbnZpYXIgZGFkZXMgYSB1bmEgQVBJCnVybCA8LSAiaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vc3VibWl0Igpib2R5IDwtIGxpc3QobmFtZSA9ICJKYW5lIiwgYWdlID0gMjUsIGNpdHkgPSAiTG9zIEFuZ2VsZXMiKQoKcmVzcG9uc2UgPC0gUE9TVCh1cmwsIGJvZHkgPSBib2R5LCBlbmNvZGUgPSAianNvbiIpCgojIENvbXByb3ZhciBsJ2VzdGF0IGRlIGxhIHJlc3Bvc3RhCnN0YXR1c19jb2RlKHJlc3BvbnNlKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Exemple: Enviar dades a una API
url &lt;- &quot;https://api.example.com/submit&quot;
body &lt;- list(name = &quot;Jane&quot;, age = 25, city = &quot;Los Angeles&quot;)

response &lt;- POST(url, body = body, encode = &quot;json&quot;)

# Comprovar l'estat de la resposta
status_code(response)</pre></div><div class='content'></div><h2>Gestionar l'autenticació</h2>
<div class='content'><p>Algunes APIs requereixen autenticació, que es pot gestionar utilitzant capçaleres.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGVtcGxlOiBGZXIgdW5hIHNvbMK3bGljaXR1ZCBhdXRlbnRpY2FkYQp1cmwgPC0gImh0dHBzOi8vYXBpLmV4YW1wbGUuY29tL3Byb3RlY3RlZCIKYXBpX2tleSA8LSAieW91cl9hcGlfa2V5IgoKcmVzcG9uc2UgPC0gR0VUKHVybCwgYWRkX2hlYWRlcnMoQXV0aG9yaXphdGlvbiA9IHBhc3RlKCJCZWFyZXIiLCBhcGlfa2V5KSkpCgojIENvbXByb3ZhciBsJ2VzdGF0IGRlIGxhIHJlc3Bvc3RhCnN0YXR1c19jb2RlKHJlc3BvbnNlKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Exemple: Fer una sol&middot;licitud autenticada
url &lt;- &quot;https://api.example.com/protected&quot;
api_key &lt;- &quot;your_api_key&quot;

response &lt;- GET(url, add_headers(Authorization = paste(&quot;Bearer&quot;, api_key)))

# Comprovar l'estat de la resposta
status_code(response)</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>En aquest tema, hem cobert els conceptes bàsics d'interactuar amb APIs i gestionar dades JSON en R. Has après a:</p>
<ul>
<li>Fer sol·licituds GET i POST utilitzant el paquet <code>httr</code>.</li>
<li>Parsejar i generar dades JSON utilitzant el paquet <code>jsonlite</code>.</li>
<li>Gestionar l'autenticació per a sol·licituds d'API.</li>
</ul>
<p>Entendre aquests conceptes et permet integrar R amb diversos serveis web i APIs, permetent-te recuperar i manipular dades de fonts externes de manera eficient.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
