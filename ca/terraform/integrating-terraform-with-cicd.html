<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integració de Terraform amb CI/CD</title>

    <link rel="alternate" href="https://campusempresa.com/es/terraform/integrating-terraform-with-cicd" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/terraform/integrating-terraform-with-cicd" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/terraform/integrating-terraform-with-cicd" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/terraform/integrating-terraform-with-cicd" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='managing-aws-infrastructure'>&#x25C4; Gestionant Infraestructura AWS</a></div><div class='col-6 text-end'><a href='monitoring-and-logging-with-terraform'>Monitorització i Registre amb Terraform &#x25BA;</a></div></div><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>Integrar Terraform amb pipelines de Integració Contínua i Desplegament Continu (CI/CD) pot millorar significativament l'automatització, la consistència i la fiabilitat de la gestió de la teva infraestructura. Aquesta secció et guiarà a través del procés d'integració de Terraform amb eines populars de CI/CD, proporcionant exemples i exercicis per consolidar la teva comprensió.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>CI/CD</strong>: La Integració Contínua (CI) és la pràctica d'integrar automàticament els canvis de codi de múltiples contribuïdors en un repositori compartit diverses vegades al dia. El Desplegament Continu (CD) és la pràctica de desplegar automàticament cada canvi que passa totes les etapes de la teva pipeline de producció.</li>
<li><strong>Terraform</strong>: Una eina de codi obert d'infraestructura com a codi que proporciona un flux de treball CLI consistent per gestionar centenars de serveis al núvol.</li>
<li><strong>Pipeline</strong>: Un conjunt de processos automatitzats que permeten als desenvolupadors i professionals de DevOps compilar, construir i desplegar el seu codi als seus entorns de producció.</li>
</ul>
</div><h1>Configuració de Terraform en una Pipeline de CI/CD</h1>
<h2>Prerequisits</h2>
<div class='content'><ul>
<li>Comprensió bàsica de Terraform i les seves comandes.</li>
<li>Una eina de CI/CD (per exemple, GitHub Actions, GitLab CI, Jenkins, CircleCI).</li>
<li>Accés a un proveïdor de núvol (per exemple, AWS, Azure, GCP).</li>
</ul>
</div><h2>Exemple: Integració de Terraform amb GitHub Actions</h2>
<div class='content'><h4>Pas 1: Crear una Configuració de Terraform</h4>
<p>Crea un fitxer de configuració simple de Terraform, <code>main.tf</code>, per provisionar un recurs. Per exemple, un bucket S3 d'AWS:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0KCnJlc291cmNlICJhd3NfczNfYnVja2V0IiAiZXhhbXBsZSIgewogIGJ1Y2tldCA9ICJteS11bmlxdWUtYnVja2V0LW5hbWUiCiAgYWNsICAgID0gInByaXZhdGUiCn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

resource &quot;aws_s3_bucket&quot; &quot;example&quot; {
  bucket = &quot;my-unique-bucket-name&quot;
  acl    = &quot;private&quot;
}</pre></div><div class='content'><h4>Pas 2: Configurar el Workflow de GitHub Actions</h4>
<p>Crea un fitxer de workflow de GitHub Actions, <code>.github/workflows/terraform.yml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmFtZTogJ1RlcnJhZm9ybSBDSS9DRCcKCm9uOgogIHB1c2g6CiAgICBicmFuY2hlczoKICAgICAgLSBtYWluCgpqb2JzOgogIHRlcnJhZm9ybToKICAgIHJ1bnMtb246IHVidW50dS1sYXRlc3QKCiAgICBzdGVwczoKICAgIC0gbmFtZTogQ2hlY2tvdXQgY29kZQogICAgICB1c2VzOiBhY3Rpb25zL2NoZWNrb3V0QHYyCgogICAgLSBuYW1lOiBTZXQgdXAgVGVycmFmb3JtCiAgICAgIHVzZXM6IGhhc2hpY29ycC9zZXR1cC10ZXJyYWZvcm1AdjEKCiAgICAtIG5hbWU6IFRlcnJhZm9ybSBJbml0CiAgICAgIHJ1bjogdGVycmFmb3JtIGluaXQKCiAgICAtIG5hbWU6IFRlcnJhZm9ybSBQbGFuCiAgICAgIHJ1bjogdGVycmFmb3JtIHBsYW4KCiAgICAtIG5hbWU6IFRlcnJhZm9ybSBBcHBseQogICAgICBpZjogZ2l0aHViLnJlZiA9PSAncmVmcy9oZWFkcy9tYWluJwogICAgICBydW46IHRlcnJhZm9ybSBhcHBseSAtYXV0by1hcHByb3Zl"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>name: 'Terraform CI/CD'

on:
  push:
    branches:
      - main

jobs:
  terraform:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Terraform
      uses: hashicorp/setup-terraform@v1

    - name: Terraform Init
      run: terraform init

    - name: Terraform Plan
      run: terraform plan

    - name: Terraform Apply
      if: github.ref == 'refs/heads/main'
      run: terraform apply -auto-approve</pre></div><div class='content'><h4>Explicació</h4>
<ul>
<li><strong>Checkout code</strong>: Utilitza l'acció <code>actions/checkout@v2</code> per fer el checkout del repositori.</li>
<li><strong>Set up Terraform</strong>: Utilitza l'acció <code>hashicorp/setup-terraform@v1</code> per configurar Terraform.</li>
<li><strong>Terraform Init</strong>: Inicialitza el directori de treball de Terraform.</li>
<li><strong>Terraform Plan</strong>: Crea un pla d'execució.</li>
<li><strong>Terraform Apply</strong>: Aplica els canvis necessaris per arribar a l'estat desitjat de la configuració.</li>
</ul>
</div><h2>Exemple: Integració de Terraform amb GitLab CI</h2>
<div class='content'><h4>Pas 1: Crear una Configuració de Terraform</h4>
<p>Utilitza el mateix fitxer <code>main.tf</code> que en l'exemple de GitHub Actions.</p>
<h4>Pas 2: Configurar la Pipeline de GitLab CI</h4>
<p>Crea un fitxer de configuració de GitLab CI, <code>.gitlab-ci.yml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RhZ2VzOgogIC0gaW5pdAogIC0gcGxhbgogIC0gYXBwbHkKCnZhcmlhYmxlczoKICBURl9WRVJTSU9OOiAiMS4wLjAiCiAgVEZfV09SS0lOR19ESVI6ICIuIgoKYmVmb3JlX3NjcmlwdDoKICAtIGFwayBhZGQgLS1uby1jYWNoZSBjdXJsIHVuemlwCiAgLSBjdXJsIC1vIC90bXAvdGVycmFmb3JtLnppcCBodHRwczovL3JlbGVhc2VzLmhhc2hpY29ycC5jb20vdGVycmFmb3JtLyR7VEZfVkVSU0lPTn0vdGVycmFmb3JtXyR7VEZfVkVSU0lPTn1fbGludXhfYW1kNjQuemlwCiAgLSB1bnppcCAvdG1wL3RlcnJhZm9ybS56aXAgLWQgL3Vzci9sb2NhbC9iaW4vCgppbml0OgogIHN0YWdlOiBpbml0CiAgc2NyaXB0OgogICAgLSB0ZXJyYWZvcm0gaW5pdCAke1RGX1dPUktJTkdfRElSfQoKcGxhbjoKICBzdGFnZTogcGxhbgogIHNjcmlwdDoKICAgIC0gdGVycmFmb3JtIHBsYW4gJHtURl9XT1JLSU5HX0RJUn0KCmFwcGx5OgogIHN0YWdlOiBhcHBseQogIHNjcmlwdDoKICAgIC0gdGVycmFmb3JtIGFwcGx5IC1hdXRvLWFwcHJvdmUgJHtURl9XT1JLSU5HX0RJUn0KICB3aGVuOiBtYW51YWw="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>stages:
  - init
  - plan
  - apply

variables:
  TF_VERSION: &quot;1.0.0&quot;
  TF_WORKING_DIR: &quot;.&quot;

before_script:
  - apk add --no-cache curl unzip
  - curl -o /tmp/terraform.zip https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip
  - unzip /tmp/terraform.zip -d /usr/local/bin/

init:
  stage: init
  script:
    - terraform init ${TF_WORKING_DIR}

plan:
  stage: plan
  script:
    - terraform plan ${TF_WORKING_DIR}

apply:
  stage: apply
  script:
    - terraform apply -auto-approve ${TF_WORKING_DIR}
  when: manual</pre></div><div class='content'><h4>Explicació</h4>
<ul>
<li><strong>Stages</strong>: Defineix les etapes de la pipeline (<code>init</code>, <code>plan</code>, <code>apply</code>).</li>
<li><strong>Variables</strong>: Estableix la versió de Terraform i el directori de treball.</li>
<li><strong>before_script</strong>: Instal·la Terraform.</li>
<li><strong>init</strong>: Inicialitza el directori de treball de Terraform.</li>
<li><strong>plan</strong>: Crea un pla d'execució.</li>
<li><strong>apply</strong>: Aplica els canvis necessaris per arribar a l'estat desitjat de la configuració. Aquesta etapa està configurada com a <code>manual</code> per evitar el desplegament automàtic.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Integrar Terraform amb pipelines de CI/CD automatitza el procés de provisionament i gestió de la infraestructura, assegurant la consistència i reduint el risc d'errors humans. Seguint els exemples proporcionats per a GitHub Actions i GitLab CI, pots configurar les teves pròpies pipelines de CI/CD per gestionar la teva infraestructura com a codi de manera eficient. Practica aquestes integracions amb diferents eines de CI/CD per obtenir una comprensió més profunda i flexibilitat en la gestió de la teva infraestructura.</p>
</div><div class='row navigation'><div class='col-6'><a href='managing-aws-infrastructure'>&#x25C4; Gestionant Infraestructura AWS</a></div><div class='col-6 text-end'><a href='monitoring-and-logging-with-terraform'>Monitorització i Registre amb Terraform &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
