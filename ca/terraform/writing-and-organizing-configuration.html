<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escriptura i Organització de la Configuració</title>

    <link rel="alternate" href="https://campusempresa.com/es/terraform/writing-and-organizing-configuration" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/terraform/writing-and-organizing-configuration" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/terraform/writing-and-organizing-configuration" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/terraform/writing-and-organizing-configuration" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>Terraform és una eina de codi obert d'infraestructura com a codi (IaC) que et permet definir i provisionar la infraestructura del centre de dades utilitzant un llenguatge de configuració declaratiu. Escriure i organitzar la configuració de manera efectiva és crucial per gestionar la infraestructura a gran escala. Aquesta secció et guiarà a través dels conceptes bàsics d'escriure i organitzar els fitxers de configuració de Terraform, des de nivells bàsics fins a avançats.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Fitxers de Configuració</strong>: Els fitxers principals on s'escriu el codi de Terraform, típicament amb una extensió <code>.tf</code>.</li>
<li><strong>Mòduls</strong>: Paquets reutilitzables i autònoms de configuracions de Terraform.</li>
<li><strong>Fitxers d'Estat</strong>: Fitxers que fan un seguiment de l'estat actual de la infraestructura.</li>
<li><strong>Variables</strong>: Paràmetres que et permeten personalitzar configuracions sense codificar valors.</li>
<li><strong>Sortides</strong>: Valors que es retornen després de l'execució d'una configuració de Terraform.</li>
</ul>
</div><h1>Escriure Configuració Bàsica</h1>
<div class='content'></div><h2>Fitxer de Configuració Principal</h2>
<div class='content'><p>El fitxer de configuració principal normalment es diu <code>main.tf</code>. Aquí tens un exemple senzill per crear una instància EC2 d'AWS:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0KCnJlc291cmNlICJhd3NfaW5zdGFuY2UiICJleGFtcGxlIiB7CiAgYW1pICAgICAgICAgICA9ICJhbWktMGM1NWIxNTljYmZhZmUxZjAiCiAgaW5zdGFuY2VfdHlwZSA9ICJ0Mi5taWNybyIKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t2.micro&quot;
}</pre></div><div class='content'><ul>
<li><strong>Bloc de Proveïdor</strong>: Especifica el proveïdor (AWS en aquest cas) i la seva configuració.</li>
<li><strong>Bloc de Recurs</strong>: Defineix un recurs (una instància EC2) i les seves propietats.</li>
</ul>
</div><h2>Variables</h2>
<div class='content'><p>Les variables et permeten parametritzar les teves configuracions. Crea un fitxer <code>variables.tf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgInJlZ2lvbiIgewogIGRlc2NyaXB0aW9uID0gIkxhIHJlZ2nDsyBkJ0FXUyBvbiBkZXNwbGVnYXIiCiAgZGVmYXVsdCAgICAgPSAidXMtd2VzdC0yIgp9Cgp2YXJpYWJsZSAiaW5zdGFuY2VfdHlwZSIgewogIGRlc2NyaXB0aW9uID0gIlRpcHVzIGQnaW5zdMOgbmNpYSBFQzIiCiAgZGVmYXVsdCAgICAgPSAidDIubWljcm8iCn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;region&quot; {
  description = &quot;La regi&oacute; d'AWS on desplegar&quot;
  default     = &quot;us-west-2&quot;
}

variable &quot;instance_type&quot; {
  description = &quot;Tipus d'inst&agrave;ncia EC2&quot;
  default     = &quot;t2.micro&quot;
}</pre></div><div class='content'><p>Actualitza <code>main.tf</code> per utilitzar aquestes variables:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9IHZhci5yZWdpb24KfQoKcmVzb3VyY2UgImF3c19pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbWkgICAgICAgICAgID0gImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIKICBpbnN0YW5jZV90eXBlID0gdmFyLmluc3RhbmNlX3R5cGUKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = var.region
}

resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = var.instance_type
}</pre></div><div class='content'></div><h2>Sortides</h2>
<div class='content'><p>Les sortides et permeten extreure informació útil del teu estat de Terraform. Crea un fitxer <code>outputs.tf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3V0cHV0ICJpbnN0YW5jZV9pZCIgewogIGRlc2NyaXB0aW9uID0gIkwnSUQgZGUgbGEgaW5zdMOgbmNpYSBFQzIiCiAgdmFsdWUgICAgICAgPSBhd3NfaW5zdGFuY2UuZXhhbXBsZS5pZAp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>output &quot;instance_id&quot; {
  description = &quot;L'ID de la inst&agrave;ncia EC2&quot;
  value       = aws_instance.example.id
}</pre></div><div class='content'></div><h1>Organització de la Configuració</h1>
<div class='content'></div><h2>Estructura de Directoris</h2>
<div class='content'><p>Una estructura de directoris ben organitzada és essencial per gestionar configuracions complexes. Aquí tens una estructura recomanada:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvamVjdC8K4pSc4pSA4pSAIG1haW4udGYK4pSc4pSA4pSAIHZhcmlhYmxlcy50ZgrilJzilIDilIAgb3V0cHV0cy50ZgrilJzilIDilIAgbW9kdWxlcy8K4pSCICAg4pSU4pSA4pSAIGVjMl9pbnN0YW5jZS8K4pSCICAgICAgIOKUnOKUgOKUgCBtYWluLnRmCuKUgiAgICAgICDilJzilIDilIAgdmFyaWFibGVzLnRmCuKUgiAgICAgICDilJTilIDilIAgb3V0cHV0cy50ZgrilJTilIDilIAgZW52aXJvbm1lbnRzLwogICAg4pSc4pSA4pSAIGRldi8KICAgIOKUgiAgIOKUlOKUgOKUgCBtYWluLnRmCiAgICDilJTilIDilIAgcHJvZC8KICAgICAgICDilJTilIDilIAgbWFpbi50Zg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>project/
├── main.tf
├── variables.tf
├── outputs.tf
├── modules/
│   └── ec2_instance/
│       ├── main.tf
│       ├── variables.tf
│       └── outputs.tf
└── environments/
    ├── dev/
    │   └── main.tf
    └── prod/
        └── main.tf</pre></div><div class='content'></div><h2>Mòduls</h2>
<div class='content'><p>Els mòduls són components reutilitzables. Aquí tens un exemple de com crear i utilitzar un mòdul:</p>
<h4>Definició del Mòdul (<code>modules/ec2_instance/main.tf</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbWkgICAgICAgICAgID0gdmFyLmFtaQogIGluc3RhbmNlX3R5cGUgPSB2YXIuaW5zdGFuY2VfdHlwZQp9CgpvdXRwdXQgImluc3RhbmNlX2lkIiB7CiAgdmFsdWUgPSBhd3NfaW5zdGFuY2UuZXhhbXBsZS5pZAp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = var.ami
  instance_type = var.instance_type
}

output &quot;instance_id&quot; {
  value = aws_instance.example.id
}</pre></div><div class='content'><h4>Variables del Mòdul (<code>modules/ec2_instance/variables.tf</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgImFtaSIgewogIGRlc2NyaXB0aW9uID0gIkwnQU1JIGEgdXRpbGl0emFyIHBlciBhIGxhIGluc3TDoG5jaWEiCn0KCnZhcmlhYmxlICJpbnN0YW5jZV90eXBlIiB7CiAgZGVzY3JpcHRpb24gPSAiRWwgdGlwdXMgZCdpbnN0w6BuY2lhIGEgdXRpbGl0emFyIgp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;ami&quot; {
  description = &quot;L'AMI a utilitzar per a la inst&agrave;ncia&quot;
}

variable &quot;instance_type&quot; {
  description = &quot;El tipus d'inst&agrave;ncia a utilitzar&quot;
}</pre></div><div class='content'><h4>Utilització del Mòdul (<code>main.tf</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlICJlYzJfaW5zdGFuY2UiIHsKICBzb3VyY2UgICAgICAgID0gIi4vbW9kdWxlcy9lYzJfaW5zdGFuY2UiCiAgYW1pICAgICAgICAgICA9ICJhbWktMGM1NWIxNTljYmZhZmUxZjAiCiAgaW5zdGFuY2VfdHlwZSA9ICJ0Mi5taWNybyIKfQoKb3V0cHV0ICJpbnN0YW5jZV9pZCIgewogIHZhbHVlID0gbW9kdWxlLmVjMl9pbnN0YW5jZS5pbnN0YW5jZV9pZAp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module &quot;ec2_instance&quot; {
  source        = &quot;./modules/ec2_instance&quot;
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t2.micro&quot;
}

output &quot;instance_id&quot; {
  value = module.ec2_instance.instance_id
}</pre></div><div class='content'></div><h1>Configuració Avançada</h1>
<div class='content'></div><h2>Espais de Treball</h2>
<div class='content'><p>Els espais de treball et permeten gestionar múltiples entorns (per exemple, dev, prod) dins de la mateixa configuració.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIHdvcmtzcGFjZSBuZXcgZGV2CnRlcnJhZm9ybSB3b3Jrc3BhY2UgbmV3IHByb2Q="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform workspace new dev
terraform workspace new prod</pre></div><div class='content'></div><h2>Estat Remot</h2>
<div class='content'><p>Emmagatzemar fitxers d'estat remotament assegura que el teu estat sigui consistent i compartit entre els membres de l'equip.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIHsKICBiYWNrZW5kICJzMyIgewogICAgYnVja2V0ID0gIm15LXRlcnJhZm9ybS1zdGF0ZSIKICAgIGtleSAgICA9ICJnbG9iYWwvczMvdGVycmFmb3JtLnRmc3RhdGUiCiAgICByZWdpb24gPSAidXMtd2VzdC0yIgogIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform {
  backend &quot;s3&quot; {
    bucket = &quot;my-terraform-state&quot;
    key    = &quot;global/s3/terraform.tfstate&quot;
    region = &quot;us-west-2&quot;
  }
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Escriure i organitzar la configuració de Terraform de manera efectiva és crucial per gestionar la infraestructura de manera eficient. Entenent els conceptes bàsics dels fitxers de configuració, variables, sortides i mòduls, pots crear configuracions de Terraform reutilitzables i mantenibles. A mesura que avancis, aprofitar els espais de treball i l'emmagatzematge remot de l'estat t'ajudarà a gestionar entorns complexos i col·laborar amb el teu equip.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
