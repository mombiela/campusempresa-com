<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://campusempresa.com/terraform/understanding-terraform-state" id="lnk_lang_es" data-lang="es">Castellano</a></b>
				|
				<b id="lit_lang_ca">Catala</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>L'estat de Terraform és un concepte crític en Terraform que ajuda a gestionar la teva infraestructura. Manté un registre dels recursos que Terraform gestiona, mapant recursos del món real a la teva configuració, i ajuda a planificar i aplicar canvis de manera eficient.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Fitxer d'Estat</strong>: Un fitxer JSON que Terraform utilitza per mapar els recursos definits a la teva configuració amb els recursos del món real.</li>
<li><strong>Backend</strong>: La ubicació on es guarda l'estat de Terraform. Pot ser local o remot (per exemple, AWS S3, Azure Blob Storage).</li>
<li><strong>Bloqueig d'Estat</strong>: Un mecanisme per prevenir operacions concurrents que podrien corrompre el fitxer d'estat.</li>
<li><strong>Comandes de Gestió d'Estat</strong>: Comandes com <code>terraform state list</code>, <code>terraform state show</code>, <code>terraform state mv</code>, etc., que ajuden a gestionar el fitxer d'estat.</li>
</ul>
</div><h1>Fitxer d'Estat</h1>
<div class='content'><p>El fitxer d'estat és un fitxer JSON que Terraform utilitza per mantenir un registre dels recursos que gestiona. Per defecte, aquest fitxer es diu <code>terraform.tfstate</code> i es guarda al directori de treball actual.</p>
</div><h2>Exemple de Fitxer d'Estat</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJ2ZXJzaW9uIjogNCwKICAidGVycmFmb3JtX3ZlcnNpb24iOiAiMS4wLjAiLAogICJyZXNvdXJjZXMiOiBbCiAgICB7CiAgICAgICJtb2RlIjogIm1hbmFnZWQiLAogICAgICAidHlwZSI6ICJhd3NfaW5zdGFuY2UiLAogICAgICAibmFtZSI6ICJleGFtcGxlIiwKICAgICAgInByb3ZpZGVyIjogInByb3ZpZGVyW1wicmVnaXN0cnkudGVycmFmb3JtLmlvL2hhc2hpY29ycC9hd3NcIl0iLAogICAgICAiaW5zdGFuY2VzIjogWwogICAgICAgIHsKICAgICAgICAgICJzY2hlbWFfdmVyc2lvbiI6IDEsCiAgICAgICAgICAiYXR0cmlidXRlcyI6IHsKICAgICAgICAgICAgImlkIjogImktMTIzNDU2Nzg5MGFiY2RlZjAiLAogICAgICAgICAgICAiYW1pIjogImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIsCiAgICAgICAgICAgICJpbnN0YW5jZV90eXBlIjogInQyLm1pY3JvIiwKICAgICAgICAgICAgInRhZ3MiOiB7CiAgICAgICAgICAgICAgIk5hbWUiOiAiZXhhbXBsZS1pbnN0YW5jZSIKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgXQogICAgfQogIF0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;version&quot;: 4,
  &quot;terraform_version&quot;: &quot;1.0.0&quot;,
  &quot;resources&quot;: [
    {
      &quot;mode&quot;: &quot;managed&quot;,
      &quot;type&quot;: &quot;aws_instance&quot;,
      &quot;name&quot;: &quot;example&quot;,
      &quot;provider&quot;: &quot;provider[\&quot;registry.terraform.io/hashicorp/aws\&quot;]&quot;,
      &quot;instances&quot;: [
        {
          &quot;schema_version&quot;: 1,
          &quot;attributes&quot;: {
            &quot;id&quot;: &quot;i-1234567890abcdef0&quot;,
            &quot;ami&quot;: &quot;ami-0c55b159cbfafe1f0&quot;,
            &quot;instance_type&quot;: &quot;t2.micro&quot;,
            &quot;tags&quot;: {
              &quot;Name&quot;: &quot;example-instance&quot;
            }
          }
        }
      ]
    }
  ]
}</pre></div><div class='content'><p>En aquest exemple, el fitxer d'estat manté un registre d'una instància EC2 d'AWS amb atributs específics com <code>id</code>, <code>ami</code> i <code>instance_type</code>.</p>
</div><h1>Backend</h1>
<div class='content'><p>El backend és on es guarda el fitxer d'estat. Terraform suporta diversos backends, incloent opcions d'emmagatzematge local i remot.</p>
</div><h2>Backend Local</h2>
<div class='content'><p>Per defecte, Terraform utilitza un backend local, que guarda el fitxer d'estat al directori de treball actual.</p>
</div><h2>Backend Remot</h2>
<div class='content'><p>Els backends remots guarden el fitxer d'estat en una ubicació remota, cosa que és útil per a la col·laboració i el bloqueig d'estat.</p>
<h4>Exemple: Configurant un Backend S3</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIHsKICBiYWNrZW5kICJzMyIgewogICAgYnVja2V0ICAgICAgICAgPSAibXktdGVycmFmb3JtLXN0YXRlIgogICAga2V5ICAgICAgICAgICAgPSAicGF0aC90by9teS9rZXkiCiAgICByZWdpb24gICAgICAgICA9ICJ1cy13ZXN0LTIiCiAgICBkeW5hbW9kYl90YWJsZSA9ICJ0ZXJyYWZvcm0tbG9jayIKICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform {
  backend &quot;s3&quot; {
    bucket         = &quot;my-terraform-state&quot;
    key            = &quot;path/to/my/key&quot;
    region         = &quot;us-west-2&quot;
    dynamodb_table = &quot;terraform-lock&quot;
  }
}</pre></div><div class='content'><p>En aquest exemple, el fitxer d'estat es guarda en un bucket S3, i DynamoDB s'utilitza per al bloqueig d'estat.</p>
</div><h1>Bloqueig d'Estat</h1>
<div class='content'><p>El bloqueig d'estat prevé operacions concurrents que podrien corrompre el fitxer d'estat. Quan s'utilitzen backends remots com S3 amb DynamoDB, Terraform gestiona automàticament el bloqueig d'estat.</p>
</div><h1>Comandes de Gestió d'Estat</h1>
<div class='content'><p>Terraform proporciona diverses comandes per gestionar el fitxer d'estat:</p>
<ul>
<li><code>terraform state list</code>: Llista tots els recursos al fitxer d'estat.</li>
<li><code>terraform state show &lt;resource&gt;</code>: Mostra informació detallada sobre un recurs específic.</li>
<li><code>terraform state mv &lt;source&gt; &lt;destination&gt;</code>: Mou un recurs a una nova adreça.</li>
<li><code>terraform state rm &lt;resource&gt;</code>: Elimina un recurs del fitxer d'estat.</li>
</ul>
</div><h2>Exemple: Llistant Recursos</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCB0ZXJyYWZvcm0gc3RhdGUgbGlzdAphd3NfaW5zdGFuY2UuZXhhbXBsZQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ terraform state list
aws_instance.example</pre></div><div class='content'><p>Aquesta comanda llista tots els recursos al fitxer d'estat, mostrant que hi ha un recurs <code>aws_instance</code> anomenat <code>example</code>.</p>
</div><h2>Exemple: Mostrant Detalls del Recurs</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCB0ZXJyYWZvcm0gc3RhdGUgc2hvdyBhd3NfaW5zdGFuY2UuZXhhbXBsZQojIGF3c19pbnN0YW5jZS5leGFtcGxlOgpyZXNvdXJjZSAiYXdzX2luc3RhbmNlIiAiZXhhbXBsZSIgewogICAgYW1pICAgICAgICAgICAgICAgICAgICAgICAgID0gImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIKICAgIGlkICAgICAgICAgICAgICAgICAgICAgICAgICA9ICJpLTEyMzQ1Njc4OTBhYmNkZWYwIgogICAgaW5zdGFuY2VfdHlwZSAgICAgICAgICAgICAgID0gInQyLm1pY3JvIgogICAgdGFncyAgICAgICAgICAgICAgICAgICAgICAgID0gewogICAgICAgICJOYW1lIiA9ICJleGFtcGxlLWluc3RhbmNlIgogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ terraform state show aws_instance.example
# aws_instance.example:
resource &quot;aws_instance&quot; &quot;example&quot; {
    ami                         = &quot;ami-0c55b159cbfafe1f0&quot;
    id                          = &quot;i-1234567890abcdef0&quot;
    instance_type               = &quot;t2.micro&quot;
    tags                        = {
        &quot;Name&quot; = &quot;example-instance&quot;
    }
}</pre></div><div class='content'><p>Aquesta comanda mostra informació detallada sobre el recurs <code>aws_instance.example</code>.</p>
</div><h1>Conclusió</h1>
<div class='content'><p>Comprendre l'estat de Terraform és crucial per gestionar la teva infraestructura de manera eficient. El fitxer d'estat manté un registre dels recursos, el backend determina on es guarda el fitxer d'estat, i el bloqueig d'estat assegura operacions concurrents segures. Dominant les comandes de gestió d'estat, pots gestionar i solucionar problemes de les teves configuracions de Terraform de manera efectiva.</p>
<p>A la següent secció, aprofundirem en tècniques avançades de gestió d'estat i millors pràctiques.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
