<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrons de Disseny Comuns en Go</title>

    <link rel="alternate" href="https://campusempresa.com/es/go/common-design-patterns" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/go/common-design-patterns" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/go/common-design-patterns" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/go/common-design-patterns" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció als Patrons de Disseny</h1>
<div class='content'><p>Els patrons de disseny són solucions típiques a problemes comuns en el disseny de programari. Són com plànols que es poden personalitzar per resoldre un problema de disseny particular en el teu codi. En aquesta secció, explorarem alguns dels patrons de disseny més comuns utilitzats en Go (Golang).</p>
</div><h1>Patró Singleton</h1>
<div class='content'><p>El patró Singleton assegura que una classe només tingui una instància i proporciona un punt d'accés global a aquesta.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Instància Única</strong>: Només es crea una instància de la classe.</li>
<li><strong>Accés Global</strong>: La instància és accessible globalment.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAoJImZtdCIKCSJzeW5jIgopCgp0eXBlIHNpbmdsZXRvbiBzdHJ1Y3R7fQoKdmFyIGluc3RhbmNlICpzaW5nbGV0b24KdmFyIG9uY2Ugc3luYy5PbmNlCgpmdW5jIEdldEluc3RhbmNlKCkgKnNpbmdsZXRvbiB7CglvbmNlLkRvKGZ1bmMoKSB7CgkJaW5zdGFuY2UgPSAmc2luZ2xldG9ue30KCX0pCglyZXR1cm4gaW5zdGFuY2UKfQoKZnVuYyBtYWluKCkgewoJczEgOj0gR2V0SW5zdGFuY2UoKQoJczIgOj0gR2V0SW5zdGFuY2UoKQoKCWlmIHMxID09IHMyIHsKCQlmbXQuUHJpbnRsbigiQW1iZHVlcyBpbnN0w6BuY2llcyBzw7NuIGxhIG1hdGVpeGEiKQoJfSBlbHNlIHsKCQlmbXQuUHJpbnRsbigiTGVzIGluc3TDoG5jaWVzIHPDs24gZGlmZXJlbnRzIikKCX0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
	&quot;fmt&quot;
	&quot;sync&quot;
)

type singleton struct{}

var instance *singleton
var once sync.Once

func GetInstance() *singleton {
	once.Do(func() {
		instance = &amp;singleton{}
	})
	return instance
}

func main() {
	s1 := GetInstance()
	s2 := GetInstance()

	if s1 == s2 {
		fmt.Println(&quot;Ambdues inst&agrave;ncies s&oacute;n la mateixa&quot;)
	} else {
		fmt.Println(&quot;Les inst&agrave;ncies s&oacute;n diferents&quot;)
	}
}</pre></div><div class='content'><p>En aquest exemple, <code>sync.Once</code> assegura que la instància es creï només una vegada, fins i tot si múltiples goroutines intenten cridar <code>GetInstance()</code> simultàniament.</p>
</div><h1>Patró Factory</h1>
<div class='content'><p>El patró Factory proporciona una manera de crear objectes sense especificar la classe exacta de l'objecte que es crearà.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Mètode Factory</strong>: Un mètode que retorna una instància d'una classe.</li>
<li><strong>Desacoblament</strong>: El codi del client està desacoblat del codi de creació d'objectes.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgImZtdCIKCnR5cGUgQW5pbWFsIGludGVyZmFjZSB7CglTcGVhaygpIHN0cmluZwp9Cgp0eXBlIERvZyBzdHJ1Y3R7fQp0eXBlIENhdCBzdHJ1Y3R7fQoKZnVuYyAoZCBEb2cpIFNwZWFrKCkgc3RyaW5nIHsKCXJldHVybiAiV29vZiEiCn0KCmZ1bmMgKGMgQ2F0KSBTcGVhaygpIHN0cmluZyB7CglyZXR1cm4gIk1lb3chIgp9CgpmdW5jIEFuaW1hbEZhY3RvcnkoYW5pbWFsVHlwZSBzdHJpbmcpIEFuaW1hbCB7Cglzd2l0Y2ggYW5pbWFsVHlwZSB7CgljYXNlICJkb2ciOgoJCXJldHVybiBEb2d7fQoJY2FzZSAiY2F0IjoKCQlyZXR1cm4gQ2F0e30KCWRlZmF1bHQ6CgkJcmV0dXJuIG5pbAoJfQp9CgpmdW5jIG1haW4oKSB7Cglkb2cgOj0gQW5pbWFsRmFjdG9yeSgiZG9nIikKCWNhdCA6PSBBbmltYWxGYWN0b3J5KCJjYXQiKQoKCWZtdC5QcmludGxuKGRvZy5TcGVhaygpKSAvLyBPdXRwdXQ6IFdvb2YhCglmbXQuUHJpbnRsbihjYXQuU3BlYWsoKSkgLy8gT3V0cHV0OiBNZW93IQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import &quot;fmt&quot;

type Animal interface {
	Speak() string
}

type Dog struct{}
type Cat struct{}

func (d Dog) Speak() string {
	return &quot;Woof!&quot;
}

func (c Cat) Speak() string {
	return &quot;Meow!&quot;
}

func AnimalFactory(animalType string) Animal {
	switch animalType {
	case &quot;dog&quot;:
		return Dog{}
	case &quot;cat&quot;:
		return Cat{}
	default:
		return nil
	}
}

func main() {
	dog := AnimalFactory(&quot;dog&quot;)
	cat := AnimalFactory(&quot;cat&quot;)

	fmt.Println(dog.Speak()) // Output: Woof!
	fmt.Println(cat.Speak()) // Output: Meow!
}</pre></div><div class='content'><p>En aquest exemple, la funció <code>AnimalFactory</code> crea instàncies de <code>Dog</code> o <code>Cat</code> basant-se en la cadena d'entrada.</p>
</div><h1>Patró Observer</h1>
<div class='content'><p>El patró Observer defineix una dependència de un-a-molts entre objectes de manera que quan un objecte canvia d'estat, tots els seus dependents són notificats i actualitzats automàticament.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Subjecte</strong>: L'objecte que està sent observat.</li>
<li><strong>Observador</strong>: Els objectes que observen el subjecte.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgImZtdCIKCnR5cGUgT2JzZXJ2ZXIgaW50ZXJmYWNlIHsKCVVwZGF0ZShzdHJpbmcpCn0KCnR5cGUgU3ViamVjdCBpbnRlcmZhY2UgewoJUmVnaXN0ZXIoT2JzZXJ2ZXIpCglEZXJlZ2lzdGVyKE9ic2VydmVyKQoJTm90aWZ5QWxsKCkKfQoKdHlwZSBJdGVtIHN0cnVjdCB7CglvYnNlcnZlcnMgW11PYnNlcnZlcgoJbmFtZSAgICAgIHN0cmluZwoJaW5TdG9jayAgIGJvb2wKfQoKZnVuYyBOZXdJdGVtKG5hbWUgc3RyaW5nKSAqSXRlbSB7CglyZXR1cm4gJkl0ZW17CgkJbmFtZTogbmFtZSwKCX0KfQoKZnVuYyAoaSAqSXRlbSkgVXBkYXRlQXZhaWxhYmlsaXR5KCkgewoJZm10LlByaW50ZigiTCdhcnRpY2xlICVzIGVzdMOgIGFyYSBlbiBlc3RvY1xuIiwgaS5uYW1lKQoJaS5pblN0b2NrID0gdHJ1ZQoJaS5Ob3RpZnlBbGwoKQp9CgpmdW5jIChpICpJdGVtKSBSZWdpc3RlcihvIE9ic2VydmVyKSB7CglpLm9ic2VydmVycyA9IGFwcGVuZChpLm9ic2VydmVycywgbykKfQoKZnVuYyAoaSAqSXRlbSkgRGVyZWdpc3RlcihvIE9ic2VydmVyKSB7CglpLm9ic2VydmVycyA9IHJlbW92ZUZyb21TbGljZShpLm9ic2VydmVycywgbykKfQoKZnVuYyAoaSAqSXRlbSkgTm90aWZ5QWxsKCkgewoJZm9yIF8sIG9ic2VydmVyIDo9IHJhbmdlIGkub2JzZXJ2ZXJzIHsKCQlvYnNlcnZlci5VcGRhdGUoaS5uYW1lKQoJfQp9CgpmdW5jIHJlbW92ZUZyb21TbGljZShvYnNlcnZlcnMgW11PYnNlcnZlciwgb2JzZXJ2ZXJUb1JlbW92ZSBPYnNlcnZlcikgW11PYnNlcnZlciB7Cglmb3IgaSwgb2JzZXJ2ZXIgOj0gcmFuZ2Ugb2JzZXJ2ZXJzIHsKCQlpZiBvYnNlcnZlciA9PSBvYnNlcnZlclRvUmVtb3ZlIHsKCQkJcmV0dXJuIGFwcGVuZChvYnNlcnZlcnNbOmldLCBvYnNlcnZlcnNbaSsxOl0uLi4pCgkJfQoJfQoJcmV0dXJuIG9ic2VydmVycwp9Cgp0eXBlIEN1c3RvbWVyIHN0cnVjdCB7CglpZCBzdHJpbmcKfQoKZnVuYyAoYyAqQ3VzdG9tZXIpIFVwZGF0ZShpdGVtTmFtZSBzdHJpbmcpIHsKCWZtdC5QcmludGYoIkVudmlhbnQgY29ycmV1IGVsZWN0csOybmljIGFsIGNsaWVudCAlcyBwZXIgbCdhcnRpY2xlICVzXG4iLCBjLmlkLCBpdGVtTmFtZSkKfQoKZnVuYyBtYWluKCkgewoJc2hpcnRJdGVtIDo9IE5ld0l0ZW0oIlNhbWFycmV0YSBOaWtlIikKCWN1c3RvbWVyMSA6PSAmQ3VzdG9tZXJ7aWQ6ICJhYmNAZ21haWwuY29tIn0KCWN1c3RvbWVyMiA6PSAmQ3VzdG9tZXJ7aWQ6ICJ4eXpAZ21haWwuY29tIn0KCglzaGlydEl0ZW0uUmVnaXN0ZXIoY3VzdG9tZXIxKQoJc2hpcnRJdGVtLlJlZ2lzdGVyKGN1c3RvbWVyMikKCglzaGlydEl0ZW0uVXBkYXRlQXZhaWxhYmlsaXR5KCkKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import &quot;fmt&quot;

type Observer interface {
	Update(string)
}

type Subject interface {
	Register(Observer)
	Deregister(Observer)
	NotifyAll()
}

type Item struct {
	observers []Observer
	name      string
	inStock   bool
}

func NewItem(name string) *Item {
	return &amp;Item{
		name: name,
	}
}

func (i *Item) UpdateAvailability() {
	fmt.Printf(&quot;L'article %s est&agrave; ara en estoc\n&quot;, i.name)
	i.inStock = true
	i.NotifyAll()
}

func (i *Item) Register(o Observer) {
	i.observers = append(i.observers, o)
}

func (i *Item) Deregister(o Observer) {
	i.observers = removeFromSlice(i.observers, o)
}

func (i *Item) NotifyAll() {
	for _, observer := range i.observers {
		observer.Update(i.name)
	}
}

func removeFromSlice(observers []Observer, observerToRemove Observer) []Observer {
	for i, observer := range observers {
		if observer == observerToRemove {
			return append(observers[:i], observers[i+1:]...)
		}
	}
	return observers
}

type Customer struct {
	id string
}

func (c *Customer) Update(itemName string) {
	fmt.Printf(&quot;Enviant correu electr&ograve;nic al client %s per l'article %s\n&quot;, c.id, itemName)
}

func main() {
	shirtItem := NewItem(&quot;Samarreta Nike&quot;)
	customer1 := &amp;Customer{id: &quot;abc@gmail.com&quot;}
	customer2 := &amp;Customer{id: &quot;xyz@gmail.com&quot;}

	shirtItem.Register(customer1)
	shirtItem.Register(customer2)

	shirtItem.UpdateAvailability()
}</pre></div><div class='content'><p>En aquest exemple, <code>Item</code> és el subjecte que està sent observat, i <code>Customer</code> és l'observador que és notificat quan la disponibilitat de l'article canvia.</p>
</div><h1>Conclusió</h1>
<div class='content'><p>En aquesta secció, hem cobert alguns dels patrons de disseny més comuns en Go: Singleton, Factory, i Observer. Cadascun d'aquests patrons proporciona una manera diferent de resoldre problemes de disseny comuns, fent que el teu codi sigui més modular, flexible i mantenible. Entendre i implementar aquests patrons t'ajudarà a escriure millors programes en Go i et prepararà per a temes més avançats en el disseny de programari.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
