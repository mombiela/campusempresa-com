<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creant la teva primera aplicació DirectX</title>

    <link rel="alternate" href="https://campusempresa.com/es/direct_x/creating-your-first-directx-application" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/direct_x/creating-your-first-directx-application" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/direct_x/creating-your-first-directx-application" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/direct_x/creating-your-first-directx-application" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='understanding-the-directx-api'>&#x25C4; Comprendre l'API de DirectX</a></div><div class='col-6 text-end'><a href='introduction-to-direct3d'>Introducció a Direct3D &#x25BA;</a></div></div><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En aquesta secció, et guiarem a través del procés de creació de la teva primera aplicació DirectX. DirectX és una col·lecció d'APIs dissenyades per gestionar tasques relacionades amb multimèdia, especialment la programació de jocs i vídeo, en plataformes de Microsoft. Aquest tutorial està dirigit a principiants i cobrirà els conceptes bàsics de la configuració d'un projecte DirectX, la inicialització de DirectX i la renderització d'una escena simple.</p>
</div><h1>Prerequisits</h1>
<div class='content'><p>Abans de començar, assegura't de tenir el següent:</p>
<ul>
<li>Un sistema operatiu Windows.</li>
<li>Visual Studio instal·lat (preferiblement l'última versió).</li>
<li>Coneixements bàsics de programació en C++.</li>
</ul>
</div><h1>Configurant el projecte</h1>
<div class='content'><ol>
<li><strong>Obre Visual Studio</strong>: Llença Visual Studio i crea un nou projecte.</li>
<li><strong>Crea un nou projecte</strong>: Selecciona &quot;Create a new project&quot; i tria &quot;Windows Desktop Application&quot; de la llista de plantilles.</li>
<li><strong>Configura el teu projecte</strong>: Dona un nom al teu projecte (per exemple, <code>FirstDirectXApp</code>), tria una ubicació i fes clic a &quot;Create&quot;.</li>
</ol>
</div><h1>Inicialitzant DirectX</h1>
<div class='content'><p>Per començar a utilitzar DirectX, necessitem inicialitzar el dispositiu Direct3D i la cadena d'intercanvi. Això implica diversos passos:</p>
</div><h2>Incloent les capçaleres necessàries</h2>
<div class='content'><p>Primer, inclou les capçaleres DirectX necessàries al teu fitxer principal de l'aplicació:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHdpbmRvd3MuaD4KI2luY2x1ZGUgPGQzZDExLmg+CiNpbmNsdWRlIDxkM2Rjb21waWxlci5oPgojaW5jbHVkZSA8ZGlyZWN0eG1hdGguaD4KdXNpbmcgbmFtZXNwYWNlIERpcmVjdFg7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;windows.h&gt;
#include &lt;d3d11.h&gt;
#include &lt;d3dcompiler.h&gt;
#include &lt;directxmath.h&gt;
using namespace DirectX;</pre></div><div class='content'></div><h2>Creant el dispositiu Direct3D i la cadena d'intercanvi</h2>
<div class='content'><p>A continuació, necessitem crear el dispositiu Direct3D i la cadena d'intercanvi. Afegeix el següent codi al teu fitxer principal de l'aplicació:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SURYR0lTd2FwQ2hhaW4qIGdfU3dhcENoYWluID0gbnVsbHB0cjsKSUQzRDExRGV2aWNlKiBnX0RldmljZSA9IG51bGxwdHI7CklEM0QxMURldmljZUNvbnRleHQqIGdfRGV2aWNlQ29udGV4dCA9IG51bGxwdHI7CklEM0QxMVJlbmRlclRhcmdldFZpZXcqIGdfUmVuZGVyVGFyZ2V0VmlldyA9IG51bGxwdHI7CgpIUkVTVUxUIEluaXREM0QoSFdORCBoV25kKSB7CiAgICBEWEdJX1NXQVBfQ0hBSU5fREVTQyBzY2QgPSB7fTsKICAgIHNjZC5CdWZmZXJDb3VudCA9IDE7CiAgICBzY2QuQnVmZmVyRGVzYy5Gb3JtYXQgPSBEWEdJX0ZPUk1BVF9SOEc4QjhBOF9VTk9STTsKICAgIHNjZC5CdWZmZXJVc2FnZSA9IERYR0lfVVNBR0VfUkVOREVSX1RBUkdFVF9PVVRQVVQ7CiAgICBzY2QuT3V0cHV0V2luZG93ID0gaFduZDsKICAgIHNjZC5TYW1wbGVEZXNjLkNvdW50ID0gNDsKICAgIHNjZC5XaW5kb3dlZCA9IFRSVUU7CgogICAgSFJFU1VMVCBociA9IEQzRDExQ3JlYXRlRGV2aWNlQW5kU3dhcENoYWluKAogICAgICAgIG51bGxwdHIsCiAgICAgICAgRDNEX0RSSVZFUl9UWVBFX0hBUkRXQVJFLAogICAgICAgIG51bGxwdHIsCiAgICAgICAgMCwKICAgICAgICBudWxscHRyLAogICAgICAgIDAsCiAgICAgICAgRDNEMTFfU0RLX1ZFUlNJT04sCiAgICAgICAgJnNjZCwKICAgICAgICAmZ19Td2FwQ2hhaW4sCiAgICAgICAgJmdfRGV2aWNlLAogICAgICAgIG51bGxwdHIsCiAgICAgICAgJmdfRGV2aWNlQ29udGV4dAogICAgKTsKCiAgICBpZiAoRkFJTEVEKGhyKSkgewogICAgICAgIHJldHVybiBocjsKICAgIH0KCiAgICBJRDNEMTFUZXh0dXJlMkQqIHBCYWNrQnVmZmVyID0gbnVsbHB0cjsKICAgIGdfU3dhcENoYWluLT5HZXRCdWZmZXIoMCwgX191dWlkb2YoSUQzRDExVGV4dHVyZTJEKSwgKExQVk9JRCopJnBCYWNrQnVmZmVyKTsKICAgIGdfRGV2aWNlLT5DcmVhdGVSZW5kZXJUYXJnZXRWaWV3KHBCYWNrQnVmZmVyLCBudWxscHRyLCAmZ19SZW5kZXJUYXJnZXRWaWV3KTsKICAgIHBCYWNrQnVmZmVyLT5SZWxlYXNlKCk7CgogICAgZ19EZXZpY2VDb250ZXh0LT5PTVNldFJlbmRlclRhcmdldHMoMSwgJmdfUmVuZGVyVGFyZ2V0VmlldywgbnVsbHB0cik7CgogICAgcmV0dXJuIFNfT0s7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>IDXGISwapChain* g_SwapChain = nullptr;
ID3D11Device* g_Device = nullptr;
ID3D11DeviceContext* g_DeviceContext = nullptr;
ID3D11RenderTargetView* g_RenderTargetView = nullptr;

HRESULT InitD3D(HWND hWnd) {
    DXGI_SWAP_CHAIN_DESC scd = {};
    scd.BufferCount = 1;
    scd.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
    scd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;
    scd.OutputWindow = hWnd;
    scd.SampleDesc.Count = 4;
    scd.Windowed = TRUE;

    HRESULT hr = D3D11CreateDeviceAndSwapChain(
        nullptr,
        D3D_DRIVER_TYPE_HARDWARE,
        nullptr,
        0,
        nullptr,
        0,
        D3D11_SDK_VERSION,
        &amp;scd,
        &amp;g_SwapChain,
        &amp;g_Device,
        nullptr,
        &amp;g_DeviceContext
    );

    if (FAILED(hr)) {
        return hr;
    }

    ID3D11Texture2D* pBackBuffer = nullptr;
    g_SwapChain-&gt;GetBuffer(0, __uuidof(ID3D11Texture2D), (LPVOID*)&amp;pBackBuffer);
    g_Device-&gt;CreateRenderTargetView(pBackBuffer, nullptr, &amp;g_RenderTargetView);
    pBackBuffer-&gt;Release();

    g_DeviceContext-&gt;OMSetRenderTargets(1, &amp;g_RenderTargetView, nullptr);

    return S_OK;
}</pre></div><div class='content'></div><h2>Configurant la vista</h2>
<div class='content'><p>Configura la vista per coincidir amb les dimensions de la finestra:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBTZXRWaWV3cG9ydCgpIHsKICAgIEQzRDExX1ZJRVdQT1JUIHZwOwogICAgdnAuV2lkdGggPSA4MDAuMGY7CiAgICB2cC5IZWlnaHQgPSA2MDAuMGY7CiAgICB2cC5NaW5EZXB0aCA9IDAuMGY7CiAgICB2cC5NYXhEZXB0aCA9IDEuMGY7CiAgICB2cC5Ub3BMZWZ0WCA9IDAuMGY7CiAgICB2cC5Ub3BMZWZ0WSA9IDAuMGY7CiAgICBnX0RldmljZUNvbnRleHQtPlJTU2V0Vmlld3BvcnRzKDEsICZ2cCk7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void SetViewport() {
    D3D11_VIEWPORT vp;
    vp.Width = 800.0f;
    vp.Height = 600.0f;
    vp.MinDepth = 0.0f;
    vp.MaxDepth = 1.0f;
    vp.TopLeftX = 0.0f;
    vp.TopLeftY = 0.0f;
    g_DeviceContext-&gt;RSSetViewports(1, &amp;vp);
}</pre></div><div class='content'></div><h1>Renderitzant una escena simple</h1>
<div class='content'><p>Ara que hem inicialitzat Direct3D, anem a renderitzar una escena simple. Netejarem la pantalla amb un color sòlid.</p>
</div><h2>Netejant la pantalla</h2>
<div class='content'><p>Afegeix la següent funció per netejar la pantalla:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBSZW5kZXJGcmFtZSgpIHsKICAgIGZsb2F0IGNsZWFyQ29sb3JbNF0gPSB7IDAuMGYsIDAuMmYsIDAuNGYsIDEuMGYgfTsKICAgIGdfRGV2aWNlQ29udGV4dC0+Q2xlYXJSZW5kZXJUYXJnZXRWaWV3KGdfUmVuZGVyVGFyZ2V0VmlldywgY2xlYXJDb2xvcik7CiAgICBnX1N3YXBDaGFpbi0+UHJlc2VudCgwLCAwKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void RenderFrame() {
    float clearColor[4] = { 0.0f, 0.2f, 0.4f, 1.0f };
    g_DeviceContext-&gt;ClearRenderTargetView(g_RenderTargetView, clearColor);
    g_SwapChain-&gt;Present(0, 0);
}</pre></div><div class='content'></div><h2>Bucle principal</h2>
<div class='content'><p>A la teva funció <code>WinMain</code>, configura el bucle principal per renderitzar contínuament fotogrames:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50IFdJTkFQSSBXaW5NYWluKEhJTlNUQU5DRSBoSW5zdGFuY2UsIEhJTlNUQU5DRSBoUHJldkluc3RhbmNlLCBMUFNUUiBscENtZExpbmUsIGludCBuQ21kU2hvdykgewogICAgSFdORCBoV25kID0gQ3JlYXRlV2luZG93KC4uLik7IC8vIENyZWEgbGEgdGV2YSBmaW5lc3RyYSBhcXXDrQogICAgSW5pdEQzRChoV25kKTsKICAgIFNldFZpZXdwb3J0KCk7CgogICAgTVNHIG1zZyA9IHt9OwogICAgd2hpbGUgKG1zZy5tZXNzYWdlICE9IFdNX1FVSVQpIHsKICAgICAgICBpZiAoUGVla01lc3NhZ2UoJm1zZywgbnVsbHB0ciwgMCwgMCwgUE1fUkVNT1ZFKSkgewogICAgICAgICAgICBUcmFuc2xhdGVNZXNzYWdlKCZtc2cpOwogICAgICAgICAgICBEaXNwYXRjaE1lc3NhZ2UoJm1zZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgUmVuZGVyRnJhbWUoKTsKICAgICAgICB9CiAgICB9CgogICAgLy8gQ29kaSBkZSBuZXRlamEgYXF1w60KCiAgICByZXR1cm4gKGludCltc2cud1BhcmFtOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) {
    HWND hWnd = CreateWindow(...); // Crea la teva finestra aqu&iacute;
    InitD3D(hWnd);
    SetViewport();

    MSG msg = {};
    while (msg.message != WM_QUIT) {
        if (PeekMessage(&amp;msg, nullptr, 0, 0, PM_REMOVE)) {
            TranslateMessage(&amp;msg);
            DispatchMessage(&amp;msg);
        } else {
            RenderFrame();
        }
    }

    // Codi de neteja aqu&iacute;

    return (int)msg.wParam;
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Felicitats! Has creat la teva primera aplicació DirectX. En aquest tutorial, hem cobert:</p>
<ul>
<li>Configurar un projecte DirectX a Visual Studio.</li>
<li>Inicialitzar el dispositiu Direct3D i la cadena d'intercanvi.</li>
<li>Configurar la vista.</li>
<li>Renderitzar una escena simple netejant la pantalla amb un color sòlid.</li>
</ul>
<p>A les següents seccions, aprofundirem en temes més avançats com shaders, textures i transformacions 3D. Continua experimentant i feliç programació!</p>
</div><div class='row navigation'><div class='col-6'><a href='understanding-the-directx-api'>&#x25C4; Comprendre l'API de DirectX</a></div><div class='col-6 text-end'><a href='introduction-to-direct3d'>Introducció a Direct3D &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
