<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tècniques Avançades d'Ombrejat</title>

    <link rel="alternate" href="https://campusempresa.com/es/direct_x/advanced-shading-techniques" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/direct_x/advanced-shading-techniques" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/direct_x/advanced-shading-techniques" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/direct_x/advanced-shading-techniques" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='rendering-techniques'>&#x25C4;Tècniques de Renderització</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Tècniques Avançades d'Ombrejat</a>
	</div>
	<div class='col-4 text-end'>
					<a href='post-processing-effects'>Efectes de Postprocessament &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En aquesta secció, aprofundirem en tècniques avançades d'ombrejat utilitzant DirectX. L'ombrejat és un aspecte crucial per renderitzar gràfics realistes, i dominar aquestes tècniques millorarà significativament la qualitat visual de les teves aplicacions.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Shaders</strong>: Petits programes que s'executen a la GPU per controlar la pipeline de renderitzat.</li>
<li><strong>HLSL (High-Level Shading Language)</strong>: El llenguatge utilitzat per escriure shaders en DirectX.</li>
<li><strong>Models d'Il·luminació</strong>: Tècniques per simular la interacció de la llum amb les superfícies.</li>
<li><strong>Shadow Mapping</strong>: Tècnica per afegir ombres a una escena.</li>
<li><strong>Normal Mapping</strong>: Tècnica per afegir textures detallades sense augmentar el recompte de polígons.</li>
<li><strong>Parallax Mapping</strong>: Tècnica per crear una il·lusió de profunditat en les textures.</li>
<li><strong>Screen-Space Ambient Occlusion (SSAO)</strong>: Tècnica per simular ombres suaus en escletxes.</li>
</ul>
</div><h1>Shaders en DirectX</h1>
<div class='content'><p>Els shaders són essencials per crear efectes visuals avançats. Hi ha diversos tipus de shaders:</p>
<ul>
<li><strong>Vertex Shader</strong>: Processa els atributs de cada vèrtex.</li>
<li><strong>Pixel Shader</strong>: Determina el color de cada píxel.</li>
<li><strong>Geometry Shader</strong>: Processa primitives completes (com triangles).</li>
</ul>
</div><h2>Exemple: Vertex i Pixel Shader Bàsic</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gVmVydGV4IFNoYWRlcgpzdHJ1Y3QgVlNfSU5QVVQgewogICAgZmxvYXQ0IFBvcyA6IFBPU0lUSU9OOwogICAgZmxvYXQ0IENvbG9yIDogQ09MT1I7Cn07CgpzdHJ1Y3QgUFNfSU5QVVQgewogICAgZmxvYXQ0IFBvcyA6IFNWX1BPU0lUSU9OOwogICAgZmxvYXQ0IENvbG9yIDogQ09MT1I7Cn07CgpQU19JTlBVVCBWUyhWU19JTlBVVCBpbnB1dCkgewogICAgUFNfSU5QVVQgb3V0cHV0OwogICAgb3V0cHV0LlBvcyA9IGlucHV0LlBvczsKICAgIG91dHB1dC5Db2xvciA9IGlucHV0LkNvbG9yOwogICAgcmV0dXJuIG91dHB1dDsKfQoKLy8gUGl4ZWwgU2hhZGVyCmZsb2F0NCBQUyhQU19JTlBVVCBpbnB1dCkgOiBTVl9UYXJnZXQgewogICAgcmV0dXJuIGlucHV0LkNvbG9yOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Vertex Shader
struct VS_INPUT {
    float4 Pos : POSITION;
    float4 Color : COLOR;
};

struct PS_INPUT {
    float4 Pos : SV_POSITION;
    float4 Color : COLOR;
};

PS_INPUT VS(VS_INPUT input) {
    PS_INPUT output;
    output.Pos = input.Pos;
    output.Color = input.Color;
    return output;
}

// Pixel Shader
float4 PS(PS_INPUT input) : SV_Target {
    return input.Color;
}</pre></div><div class='content'><p>Aquest exemple demostra un vertex i pixel shader de pas simple. El vertex shader pren la posició i el color del vèrtex com a entrada i els passa al pixel shader, que després retorna el color.</p>
</div><h1>Models d'Il·luminació</h1>
<div class='content'><p>Els models d'il·luminació s'utilitzen per simular com la llum interactua amb les superfícies. Models comuns inclouen:</p>
<ul>
<li><strong>Il·luminació Phong</strong>: Simula reflexos especulars.</li>
<li><strong>Il·luminació Blinn-Phong</strong>: Una variació de Phong amb millor rendiment.</li>
<li><strong>PBR (Physically Based Rendering)</strong>: Simula propietats materials realistes.</li>
</ul>
</div><h2>Exemple: Il·luminació Blinn-Phong</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQ0IEJsaW5uUGhvbmdMaWdodGluZyhmbG9hdDMgbm9ybWFsLCBmbG9hdDMgbGlnaHREaXIsIGZsb2F0MyB2aWV3RGlyLCBmbG9hdDMgbGlnaHRDb2xvciwgZmxvYXQzIGFtYmllbnRDb2xvcikgewogICAgZmxvYXQzIGhhbGZWZWN0b3IgPSBub3JtYWxpemUobGlnaHREaXIgKyB2aWV3RGlyKTsKICAgIGZsb2F0IHNwZWN1bGFyID0gcG93KG1heChkb3Qobm9ybWFsLCBoYWxmVmVjdG9yKSwgMC4wKSwgMTYpOwogICAgZmxvYXQgZGlmZnVzZSA9IG1heChkb3Qobm9ybWFsLCBsaWdodERpciksIDAuMCk7CiAgICByZXR1cm4gZmxvYXQ0KGFtYmllbnRDb2xvciArIGxpZ2h0Q29sb3IgKiAoZGlmZnVzZSArIHNwZWN1bGFyKSwgMS4wKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float4 BlinnPhongLighting(float3 normal, float3 lightDir, float3 viewDir, float3 lightColor, float3 ambientColor) {
    float3 halfVector = normalize(lightDir + viewDir);
    float specular = pow(max(dot(normal, halfVector), 0.0), 16);
    float diffuse = max(dot(normal, lightDir), 0.0);
    return float4(ambientColor + lightColor * (diffuse + specular), 1.0);
}</pre></div><div class='content'><p>Aquesta funció calcula el model d'il·luminació Blinn-Phong, combinant components ambientals, difusos i especulars.</p>
</div><h1>Shadow Mapping</h1>
<div class='content'><p>El shadow mapping és una tècnica per afegir ombres a una escena renderitzant-la des de la perspectiva de la llum.</p>
</div><h2>Exemple: Passos del Shadow Mapping</h2>
<div class='content'><ol>
<li><strong>Renderitzar el Depth Map</strong>: Renderitzar l'escena des de la perspectiva de la llum i emmagatzemar la informació de profunditat.</li>
<li><strong>Càlcul de l'Ombra</strong>: Al pixel shader, comparar la profunditat del píxel actual amb el depth map per determinar si està en ombra.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ8OgbGN1bCBkZSBsJ09tYnJhIGFsIFBpeGVsIFNoYWRlcgpmbG9hdCBTaGFkb3dDYWxjdWxhdGlvbihmbG9hdDQgbGlnaHRTcGFjZVBvcywgVGV4dHVyZTJEIHNoYWRvd01hcCwgU2FtcGxlclN0YXRlIHNoYWRvd1NhbXBsZXIpIHsKICAgIGZsb2F0IHNoYWRvdyA9IDAuMDsKICAgIGZsb2F0MiB1diA9IGxpZ2h0U3BhY2VQb3MueHkgLyBsaWdodFNwYWNlUG9zLnc7CiAgICBmbG9hdCBkZXB0aCA9IGxpZ2h0U3BhY2VQb3MueiAvIGxpZ2h0U3BhY2VQb3MudzsKICAgIGZsb2F0IHNoYWRvd0RlcHRoID0gc2hhZG93TWFwLlNhbXBsZShzaGFkb3dTYW1wbGVyLCB1dikucjsKICAgIGlmIChkZXB0aCA+IHNoYWRvd0RlcHRoICsgMC4wMDUpIHsKICAgICAgICBzaGFkb3cgPSAxLjA7CiAgICB9CiAgICByZXR1cm4gc2hhZG93Owp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// C&agrave;lcul de l'Ombra al Pixel Shader
float ShadowCalculation(float4 lightSpacePos, Texture2D shadowMap, SamplerState shadowSampler) {
    float shadow = 0.0;
    float2 uv = lightSpacePos.xy / lightSpacePos.w;
    float depth = lightSpacePos.z / lightSpacePos.w;
    float shadowDepth = shadowMap.Sample(shadowSampler, uv).r;
    if (depth &gt; shadowDepth + 0.005) {
        shadow = 1.0;
    }
    return shadow;
}</pre></div><div class='content'><p>Aquesta funció comprova si un píxel està en ombra comparant la seva profunditat amb el shadow map.</p>
</div><h1>Normal Mapping</h1>
<div class='content'><p>El normal mapping afegeix textures detallades a les superfícies sense augmentar el recompte de polígons.</p>
</div><h2>Exemple: Normal Mapping</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQzIE5vcm1hbE1hcHBpbmcoZmxvYXQzIG5vcm1hbCwgZmxvYXQzIHRhbmdlbnQsIGZsb2F0MyBiaXRhbmdlbnQsIGZsb2F0MyBub3JtYWxNYXApIHsKICAgIGZsb2F0M3gzIFRCTiA9IGZsb2F0M3gzKHRhbmdlbnQsIGJpdGFuZ2VudCwgbm9ybWFsKTsKICAgIHJldHVybiBub3JtYWxpemUobXVsKG5vcm1hbE1hcCwgVEJOKSk7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float3 NormalMapping(float3 normal, float3 tangent, float3 bitangent, float3 normalMap) {
    float3x3 TBN = float3x3(tangent, bitangent, normal);
    return normalize(mul(normalMap, TBN));
}</pre></div><div class='content'><p>Aquesta funció transforma el normal map de l'espai tangent a l'espai mundial utilitzant la matriu TBN.</p>
</div><h1>Parallax Mapping</h1>
<div class='content'><p>El parallax mapping crea una il·lusió de profunditat en les textures desplaçant les coordenades de textura.</p>
</div><h2>Exemple: Parallax Mapping</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQyIFBhcmFsbGF4TWFwcGluZyhmbG9hdDIgdGV4Q29vcmRzLCBmbG9hdDMgdmlld0RpciwgZmxvYXQgaGVpZ2h0U2NhbGUsIFRleHR1cmUyRCBoZWlnaHRNYXAsIFNhbXBsZXJTdGF0ZSBzYW1wbGVyKSB7CiAgICBmbG9hdCBoZWlnaHQgPSBoZWlnaHRNYXAuU2FtcGxlKHNhbXBsZXIsIHRleENvb3JkcykucjsKICAgIGZsb2F0MiBvZmZzZXQgPSB2aWV3RGlyLnh5ICogKGhlaWdodCAqIGhlaWdodFNjYWxlKTsKICAgIHJldHVybiB0ZXhDb29yZHMgKyBvZmZzZXQ7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float2 ParallaxMapping(float2 texCoords, float3 viewDir, float heightScale, Texture2D heightMap, SamplerState sampler) {
    float height = heightMap.Sample(sampler, texCoords).r;
    float2 offset = viewDir.xy * (height * heightScale);
    return texCoords + offset;
}</pre></div><div class='content'><p>Aquesta funció desplaça les coordenades de textura basant-se en la direcció de visió i el height map per crear un efecte de parallax.</p>
</div><h1>Screen-Space Ambient Occlusion (SSAO)</h1>
<div class='content'><p>El SSAO simula ombres suaus en escletxes analitzant el depth buffer.</p>
</div><h2>Exemple: SSAO</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQgQ2FsY3VsYXRlU1NBTyhmbG9hdDMgcG9zLCBmbG9hdDMgbm9ybWFsLCBUZXh0dXJlMkQgZGVwdGhNYXAsIFNhbXBsZXJTdGF0ZSBzYW1wbGVyKSB7CiAgICBmbG9hdCBvY2NsdXNpb24gPSAwLjA7CiAgICBmb3IgKGludCBpID0gMDsgaSA8IDE2OyArK2kpIHsKICAgICAgICBmbG9hdDMgc2FtcGxlUG9zID0gcG9zICsgc2FtcGxlS2VybmVsW2ldICogcmFkaXVzOwogICAgICAgIGZsb2F0IHNhbXBsZURlcHRoID0gZGVwdGhNYXAuU2FtcGxlKHNhbXBsZXIsIHNhbXBsZVBvcy54eSkucjsKICAgICAgICBpZiAoc2FtcGxlRGVwdGggPCBzYW1wbGVQb3MueikgewogICAgICAgICAgICBvY2NsdXNpb24gKz0gMS4wOwogICAgICAgIH0KICAgIH0KICAgIHJldHVybiBvY2NsdXNpb24gLyAxNi4wOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float CalculateSSAO(float3 pos, float3 normal, Texture2D depthMap, SamplerState sampler) {
    float occlusion = 0.0;
    for (int i = 0; i &lt; 16; ++i) {
        float3 samplePos = pos + sampleKernel[i] * radius;
        float sampleDepth = depthMap.Sample(sampler, samplePos.xy).r;
        if (sampleDepth &lt; samplePos.z) {
            occlusion += 1.0;
        }
    }
    return occlusion / 16.0;
}</pre></div><div class='content'><p>Aquesta funció calcula l'oclusió ambiental mostrant el depth map al voltant del píxel actual.</p>
</div><h1>Conclusió</h1>
<div class='content'><p>Les tècniques avançades d'ombrejat en DirectX, com els models d'il·luminació, shadow mapping, normal mapping, parallax mapping i SSAO, són essencials per crear gràfics realistes i visualment atractius. Dominant aquestes tècniques, pots millorar significativament la qualitat de les teves aplicacions. Practica implementant aquestes tècniques i experimenta amb diferents paràmetres per veure els seus efectes en les teves escenes.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='rendering-techniques'>&#x25C4;Tècniques de Renderització</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Tècniques Avançades d'Ombrejat</a>
	</div>
	<div class='col-4 text-end'>
					<a href='post-processing-effects'>Efectes de Postprocessament &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
