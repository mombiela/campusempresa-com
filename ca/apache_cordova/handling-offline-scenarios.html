<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestió de Situacions Fora de Línia</title>

    <link rel="alternate" href="https://campusempresa.com/es/apache_cordova/handling-offline-scenarios" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/apache_cordova/handling-offline-scenarios" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/apache_cordova/handling-offline-scenarios" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/apache_cordova/handling-offline-scenarios" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>La gestió de situacions fora de línia és crucial per crear aplicacions mòbils robustes. En aquesta secció, explorarem com gestionar la funcionalitat fora de línia en aplicacions Apache Cordova, assegurant una experiència d'usuari fluida fins i tot quan no hi ha connexió a internet.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Detecció Fora de Línia</strong>: Identificar quan l'aplicació està fora de línia.</li>
<li><strong>Emmagatzematge de Dades</strong>: Emmagatzemar dades localment per ser utilitzades quan estigui fora de línia.</li>
<li><strong>Sincronització</strong>: Sincronitzar dades entre l'emmagatzematge local i el servidor quan es restableixi la connexió.</li>
<li><strong>Experiència d'Usuari</strong>: Informar els usuaris sobre l'estat fora de línia i proporcionar una experiència fluida.</li>
</ul>
</div><h1>Detecció Fora de Línia</h1>
<div class='content'><p>Per gestionar situacions fora de línia, el primer pas és detectar quan l'aplicació està fora de línia. Apache Cordova proporciona el plugin <code>cordova-plugin-network-information</code> per ajudar amb això.</p>
</div><h2>Instal·lació</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29yZG92YSBwbHVnaW4gYWRkIGNvcmRvdmEtcGx1Z2luLW5ldHdvcmstaW5mb3JtYXRpb24="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cordova plugin add cordova-plugin-network-information</pre></div><div class='content'></div><h2>Ús</h2>
<div class='content'><p>Pots utilitzar el plugin per comprovar l'estat de la xarxa i escoltar els canvis.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIHVwZGF0ZU5ldHdvcmtTdGF0dXMoKSB7CiAgICAgICAgdmFyIG5ldHdvcmtTdGF0ZSA9IG5hdmlnYXRvci5jb25uZWN0aW9uLnR5cGU7CiAgICAgICAgaWYgKG5ldHdvcmtTdGF0ZSA9PT0gQ29ubmVjdGlvbi5OT05FKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFc3TDoHMgZm9yYSBkZSBsw61uaWEiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygiRXN0w6BzIGVuIGzDrW5pYSIpOwogICAgICAgIH0KICAgIH0KCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJvZmZsaW5lIiwgdXBkYXRlTmV0d29ya1N0YXR1cywgZmFsc2UpOwogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigib25saW5lIiwgdXBkYXRlTmV0d29ya1N0YXR1cywgZmFsc2UpOwoKICAgIC8vIENvbXByb3ZhY2nDsyBpbmljaWFsCiAgICB1cGRhdGVOZXR3b3JrU3RhdHVzKCk7Cn0sIGZhbHNlKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, function() {
    function updateNetworkStatus() {
        var networkState = navigator.connection.type;
        if (networkState === Connection.NONE) {
            console.log(&quot;Est&agrave;s fora de l&iacute;nia&quot;);
        } else {
            console.log(&quot;Est&agrave;s en l&iacute;nia&quot;);
        }
    }

    document.addEventListener(&quot;offline&quot;, updateNetworkStatus, false);
    document.addEventListener(&quot;online&quot;, updateNetworkStatus, false);

    // Comprovaci&oacute; inicial
    updateNetworkStatus();
}, false);</pre></div><div class='content'></div><h1>Emmagatzematge de Dades</h1>
<div class='content'><p>Quan l'aplicació està fora de línia, necessites emmagatzemar dades localment. Pots utilitzar diverses opcions d'emmagatzematge com LocalStorage, IndexedDB o SQLite.</p>
</div><h2>Exemple de LocalStorage</h2>
<div class='content'><p>LocalStorage és fàcil d'utilitzar però té una capacitat d'emmagatzematge limitada.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVzYXIgZGFkZXMKbG9jYWxTdG9yYWdlLnNldEl0ZW0oImtleSIsICJ2YWx1ZSIpOwoKLy8gUmVjdXBlcmFyIGRhZGVzCnZhciB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJrZXkiKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Desar dades
localStorage.setItem(&quot;key&quot;, &quot;value&quot;);

// Recuperar dades
var value = localStorage.getItem(&quot;key&quot;);</pre></div><div class='content'></div><h2>Exemple de SQLite</h2>
<div class='content'><p>Per a necessitats d'emmagatzematge de dades més complexes, pots utilitzar el plugin <code>cordova-sqlite-storage</code>.</p>
<h4>Instal·lació</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29yZG92YSBwbHVnaW4gYWRkIGNvcmRvdmEtc3FsaXRlLXN0b3JhZ2U="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cordova plugin add cordova-sqlite-storage</pre></div><div class='content'><h4>Ús</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBmdW5jdGlvbigpIHsKICAgIHZhciBkYiA9IHdpbmRvdy5zcWxpdGVQbHVnaW4ub3BlbkRhdGFiYXNlKHtuYW1lOiAnbXkuZGInLCBsb2NhdGlvbjogJ2RlZmF1bHQnfSk7CgogICAgZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24odHgpIHsKICAgICAgICB0eC5leGVjdXRlU3FsKCdDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBNeVRhYmxlIChpZCBpbnRlZ2VyIHByaW1hcnkga2V5LCBkYXRhIHRleHQpJyk7CiAgICAgICAgdHguZXhlY3V0ZVNxbCgnSU5TRVJUIElOVE8gTXlUYWJsZSAoZGF0YSkgVkFMVUVTICg/KScsIFsnRGFkZXMgZGUgbW9zdHJhJ10pOwogICAgfSwgZnVuY3Rpb24oZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygnRVJST1IgZGUgdHJhbnNhY2Npw7M6ICcgKyBlcnJvci5tZXNzYWdlKTsKICAgIH0sIGZ1bmN0aW9uKCkgewogICAgICAgIGNvbnNvbGUubG9nKCdCYXNlIGRlIGRhZGVzIHBvYmxhZGEgY29ycmVjdGFtZW50Jyk7CiAgICB9KTsKfSwgZmFsc2UpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, function() {
    var db = window.sqlitePlugin.openDatabase({name: 'my.db', location: 'default'});

    db.transaction(function(tx) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS MyTable (id integer primary key, data text)');
        tx.executeSql('INSERT INTO MyTable (data) VALUES (?)', ['Dades de mostra']);
    }, function(error) {
        console.log('ERROR de transacci&oacute;: ' + error.message);
    }, function() {
        console.log('Base de dades poblada correctament');
    });
}, false);</pre></div><div class='content'></div><h1>Sincronització</h1>
<div class='content'><p>Un cop es restableixi la connexió, necessites sincronitzar les dades emmagatzemades localment amb el servidor.</p>
</div><h2>Exemple</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gc3luY0RhdGEoKSB7CiAgICB2YXIgbmV0d29ya1N0YXRlID0gbmF2aWdhdG9yLmNvbm5lY3Rpb24udHlwZTsKICAgIGlmIChuZXR3b3JrU3RhdGUgIT09IENvbm5lY3Rpb24uTk9ORSkgewogICAgICAgIC8vIFJlY3VwZXJhciBkYWRlcyBkZSBsJ2VtbWFnYXR6ZW1hdGdlIGxvY2FsCiAgICAgICAgdmFyIGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgia2V5Iik7CgogICAgICAgIC8vIEVudmlhciBkYWRlcyBhbCBzZXJ2aWRvcgogICAgICAgIGZldGNoKCdodHRwczovL2V4YW1wbGUuY29tL2FwaS9zeW5jJywgewogICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBkYXRhOiBkYXRhIH0pLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAudGhlbihkYXRhID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0RhZGVzIHNpbmNyb25pdHphZGVzIGNvcnJlY3RhbWVudDonLCBkYXRhKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gc2luY3Jvbml0emFyIGxlcyBkYWRlczonLCBlcnJvcik7CiAgICAgICAgfSk7CiAgICB9Cn0KCi8vIENyaWRhciBzeW5jRGF0YSBxdWFuIGwnYXBsaWNhY2nDsyB0b3JuaSBhIGVzdGFyIGVuIGzDrW5pYQpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJvbmxpbmUiLCBzeW5jRGF0YSwgZmFsc2UpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function syncData() {
    var networkState = navigator.connection.type;
    if (networkState !== Connection.NONE) {
        // Recuperar dades de l'emmagatzematge local
        var data = localStorage.getItem(&quot;key&quot;);

        // Enviar dades al servidor
        fetch('https://example.com/api/sync', {
            method: 'POST',
            body: JSON.stringify({ data: data }),
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(response =&gt; response.json())
        .then(data =&gt; {
            console.log('Dades sincronitzades correctament:', data);
        })
        .catch((error) =&gt; {
            console.error('Error en sincronitzar les dades:', error);
        });
    }
}

// Cridar syncData quan l'aplicaci&oacute; torni a estar en l&iacute;nia
document.addEventListener(&quot;online&quot;, syncData, false);</pre></div><div class='content'></div><h1>Experiència d'Usuari</h1>
<div class='content'><p>Informar els usuaris sobre l'estat fora de línia i proporcionar una experiència fluida és essencial.</p>
</div><h2>Exemple</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRpdiBpZD0ib2ZmbGluZU1lc3NhZ2UiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+CiAgICBBY3R1YWxtZW50IGVzdMOgcyBmb3JhIGRlIGzDrW5pYS4gQWxndW5lcyBmdW5jaW9ucyBwb2RlbiBubyBlc3RhciBkaXNwb25pYmxlcy4KPC9kaXY+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;div id=&quot;offlineMessage&quot; style=&quot;display: none;&quot;&gt;
    Actualment est&agrave;s fora de l&iacute;nia. Algunes funcions poden no estar disponibles.
&lt;/div&gt;</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIHVwZGF0ZU5ldHdvcmtTdGF0dXMoKSB7CiAgICAgICAgdmFyIG5ldHdvcmtTdGF0ZSA9IG5hdmlnYXRvci5jb25uZWN0aW9uLnR5cGU7CiAgICAgICAgdmFyIG9mZmxpbmVNZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9mZmxpbmVNZXNzYWdlIik7CiAgICAgICAgaWYgKG5ldHdvcmtTdGF0ZSA9PT0gQ29ubmVjdGlvbi5OT05FKSB7CiAgICAgICAgICAgIG9mZmxpbmVNZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9mZmxpbmVNZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfQogICAgfQoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm9mZmxpbmUiLCB1cGRhdGVOZXR3b3JrU3RhdHVzLCBmYWxzZSk7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJvbmxpbmUiLCB1cGRhdGVOZXR3b3JrU3RhdHVzLCBmYWxzZSk7CgogICAgLy8gQ29tcHJvdmFjacOzIGluaWNpYWwKICAgIHVwZGF0ZU5ldHdvcmtTdGF0dXMoKTsKfSwgZmFsc2UpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, function() {
    function updateNetworkStatus() {
        var networkState = navigator.connection.type;
        var offlineMessage = document.getElementById(&quot;offlineMessage&quot;);
        if (networkState === Connection.NONE) {
            offlineMessage.style.display = &quot;block&quot;;
        } else {
            offlineMessage.style.display = &quot;none&quot;;
        }
    }

    document.addEventListener(&quot;offline&quot;, updateNetworkStatus, false);
    document.addEventListener(&quot;online&quot;, updateNetworkStatus, false);

    // Comprovaci&oacute; inicial
    updateNetworkStatus();
}, false);</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>La gestió de situacions fora de línia en aplicacions Apache Cordova implica detectar l'estat fora de línia, emmagatzemar dades localment, sincronitzar les dades quan es restableixi la connexió i assegurar una experiència d'usuari fluida. Implementant aquestes estratègies, pots crear aplicacions robustes que funcionin eficaçment fins i tot sense una connexió a internet.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
