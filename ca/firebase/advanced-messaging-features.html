<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funcions Avançades de Missatgeria</title>

    <link rel="alternate" href="https://campusempresa.com/es/firebase/advanced-messaging-features" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/firebase/advanced-messaging-features" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/firebase/advanced-messaging-features" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/firebase/advanced-messaging-features" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>Firebase Cloud Messaging (FCM) és una eina potent per enviar notificacions i missatges als usuaris a través de diferents plataformes. En aquesta secció, explorarem funcions avançades de FCM que permeten estratègies de missatgeria més sofisticades.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Missatgeria per Temes</strong>: Et permet enviar missatges a múltiples dispositius que s'han subscrit a un tema en particular.</li>
<li><strong>Missatgeria de Grups de Dispositius</strong>: Permet enviar missatges a un grup de dispositius que pertanyen a un sol usuari.</li>
<li><strong>Prioritats de Missatges</strong>: Controla la velocitat de lliurament i les condicions dels missatges.</li>
<li><strong>Programació de Missatges</strong>: Programa missatges per ser enviats a una hora específica.</li>
<li><strong>Filtratge de Missatges</strong>: Filtra missatges basats en propietats o condicions dels usuaris.</li>
</ul>
</div><h1>Missatgeria per Temes</h1>
<div class='content'><p>La missatgeria per temes et permet enviar un missatge a múltiples dispositius que s'han subscrit a un tema en particular. Això és útil per emetre missatges a una gran audiència.</p>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gU3Vic2NyaXVyZSdzIGEgdW4gdGVtYQpmaXJlYmFzZS5tZXNzYWdpbmcoKS5zdWJzY3JpYmVUb1RvcGljKHRva2VuLCAibmV3cyIpOwoKLy8gRW52aWFyIHVuIG1pc3NhdGdlIGFsIHRlbWEKY29uc3QgbWVzc2FnZSA9IHsKICBub3RpZmljYXRpb246IHsKICAgIHRpdGxlOiAiTm90w61jaWVzIGQnw5psdGltYSBIb3JhIiwKICAgIGJvZHk6ICJOb3UgYXJ0aWNsZSBkaXNwb25pYmxlISIKICB9LAogIHRvcGljOiAibmV3cyIKfTsKCmFkbWluLm1lc3NhZ2luZygpLnNlbmQobWVzc2FnZSkKICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgIGNvbnNvbGUubG9nKCJNaXNzYXRnZSBlbnZpYXQgYW1iIMOoeGl0OiIsIHJlc3BvbnNlKTsKICB9KQogIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgIGNvbnNvbGUubG9nKCJFcnJvciBlbiBlbnZpYXIgZWwgbWlzc2F0Z2U6IiwgZXJyb3IpOwogIH0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Subscriure's a un tema
firebase.messaging().subscribeToTopic(token, &quot;news&quot;);

// Enviar un missatge al tema
const message = {
  notification: {
    title: &quot;Not&iacute;cies d'&Uacute;ltima Hora&quot;,
    body: &quot;Nou article disponible!&quot;
  },
  topic: &quot;news&quot;
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log(&quot;Missatge enviat amb &egrave;xit:&quot;, response);
  })
  .catch((error) =&gt; {
    console.log(&quot;Error en enviar el missatge:&quot;, error);
  });</pre></div><div class='content'><p>En aquest exemple, els dispositius es subscriuen al tema &quot;news&quot; i reben notificacions quan s'envia un nou missatge a aquest tema.</p>
</div><h1>Missatgeria de Grups de Dispositius</h1>
<div class='content'><p>La missatgeria de grups de dispositius et permet enviar un missatge a múltiples dispositius que pertanyen a un sol usuari. Això és útil per dirigir-se a tots els dispositius d'un usuari en particular.</p>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYXIgdW5hIGNsYXUgZGUgbm90aWZpY2FjacOzIHBlciBhIHVuIGdydXAgZGUgZGlzcG9zaXRpdXMKY29uc3Qgbm90aWZpY2F0aW9uS2V5ID0gInlvdXItbm90aWZpY2F0aW9uLWtleSI7CmNvbnN0IHJlZ2lzdHJhdGlvblRva2VucyA9IFsidG9rZW4xIiwgInRva2VuMiIsICJ0b2tlbjMiXTsKCmNvbnN0IG1lc3NhZ2UgPSB7CiAgbm90aWZpY2F0aW9uOiB7CiAgICB0aXRsZTogIkhvbGEgVXN1YXJpIiwKICAgIGJvZHk6ICJBcXVlc3Qgw6lzIHVuIG1pc3NhdGdlIHBlciBhIHRvdHMgZWxzIHRldXMgZGlzcG9zaXRpdXMuIgogIH0sCiAgbm90aWZpY2F0aW9uX2tleTogbm90aWZpY2F0aW9uS2V5Cn07CgphZG1pbi5tZXNzYWdpbmcoKS5zZW5kVG9EZXZpY2VHcm91cChub3RpZmljYXRpb25LZXksIG1lc3NhZ2UpCiAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBjb25zb2xlLmxvZygiTWlzc2F0Z2UgZW52aWF0IGFtYiDDqHhpdDoiLCByZXNwb25zZSk7CiAgfSkKICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICBjb25zb2xlLmxvZygiRXJyb3IgZW4gZW52aWFyIGVsIG1pc3NhdGdlOiIsIGVycm9yKTsKICB9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Crear una clau de notificaci&oacute; per a un grup de dispositius
const notificationKey = &quot;your-notification-key&quot;;
const registrationTokens = [&quot;token1&quot;, &quot;token2&quot;, &quot;token3&quot;];

const message = {
  notification: {
    title: &quot;Hola Usuari&quot;,
    body: &quot;Aquest &eacute;s un missatge per a tots els teus dispositius.&quot;
  },
  notification_key: notificationKey
};

admin.messaging().sendToDeviceGroup(notificationKey, message)
  .then((response) =&gt; {
    console.log(&quot;Missatge enviat amb &egrave;xit:&quot;, response);
  })
  .catch((error) =&gt; {
    console.log(&quot;Error en enviar el missatge:&quot;, error);
  });</pre></div><div class='content'><p>En aquest exemple, s'envia un missatge a tots els dispositius associats amb una clau de notificació en particular.</p>
</div><h1>Prioritats de Missatges</h1>
<div class='content'><p>FCM et permet establir la prioritat dels missatges per controlar la velocitat de lliurament i les condicions.</p>
</div><h2>Nivells de Prioritat</h2>
<div class='content'><ul>
<li><strong>Alta Prioritat</strong>: Els missatges es lliuren immediatament i desperten el dispositiu si és necessari.</li>
<li><strong>Prioritat Normal</strong>: Els missatges es lliuren quan el dispositiu està actiu.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbWVzc2FnZSA9IHsKICBub3RpZmljYXRpb246IHsKICAgIHRpdGxlOiAiQWN0dWFsaXR6YWNpw7MgVXJnZW50IiwKICAgIGJvZHk6ICJTaSB1cyBwbGF1LCBjb25zdWx0YSBsJ2FwbGljYWNpw7MgcGVyIG9idGVuaXIgaW5mb3JtYWNpw7MgaW1wb3J0YW50LiIKICB9LAogIGFuZHJvaWQ6IHsKICAgIHByaW9yaXR5OiAiaGlnaCIKICB9LAogIHRva2VuOiAidXNlci1kZXZpY2UtdG9rZW4iCn07CgphZG1pbi5tZXNzYWdpbmcoKS5zZW5kKG1lc3NhZ2UpCiAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBjb25zb2xlLmxvZygiTWlzc2F0Z2UgZCdhbHRhIHByaW9yaXRhdCBlbnZpYXQgYW1iIMOoeGl0OiIsIHJlc3BvbnNlKTsKICB9KQogIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgIGNvbnNvbGUubG9nKCJFcnJvciBlbiBlbnZpYXIgZWwgbWlzc2F0Z2U6IiwgZXJyb3IpOwogIH0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const message = {
  notification: {
    title: &quot;Actualitzaci&oacute; Urgent&quot;,
    body: &quot;Si us plau, consulta l'aplicaci&oacute; per obtenir informaci&oacute; important.&quot;
  },
  android: {
    priority: &quot;high&quot;
  },
  token: &quot;user-device-token&quot;
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log(&quot;Missatge d'alta prioritat enviat amb &egrave;xit:&quot;, response);
  })
  .catch((error) =&gt; {
    console.log(&quot;Error en enviar el missatge:&quot;, error);
  });</pre></div><div class='content'><p>En aquest exemple, s'envia un missatge d'alta prioritat a un dispositiu específic.</p>
</div><h1>Programació de Missatges</h1>
<div class='content'><p>Pots programar missatges per ser enviats a una hora específica utilitzant el paràmetre <code>sendAt</code>.</p>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbWVzc2FnZSA9IHsKICBub3RpZmljYXRpb246IHsKICAgIHRpdGxlOiAiTWlzc2F0Z2UgUHJvZ3JhbWF0IiwKICAgIGJvZHk6ICJBcXVlc3QgbWlzc2F0Z2UgaGEgZXN0YXQgcHJvZ3JhbWF0LiIKICB9LAogIGFuZHJvaWQ6IHsKICAgIHR0bDogMzYwMCAqIDEwMDAgIC8vIDEgaG9yYSBlbiBtaWzCt2xpc2Vnb25zCiAgfSwKICB0b2tlbjogInVzZXItZGV2aWNlLXRva2VuIgp9OwoKY29uc3Qgc2VuZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIDM2MDAgKiAxMDAwOyAvLyAxIGhvcmEgYSBwYXJ0aXIgZCdhcmEKCmFkbWluLm1lc3NhZ2luZygpLnNlbmQobWVzc2FnZSwgeyBzZW5kQXQ6IHNlbmRUaW1lIH0pCiAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBjb25zb2xlLmxvZygiTWlzc2F0Z2UgcHJvZ3JhbWF0IGFtYiDDqHhpdDoiLCByZXNwb25zZSk7CiAgfSkKICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICBjb25zb2xlLmxvZygiRXJyb3IgZW4gcHJvZ3JhbWFyIGVsIG1pc3NhdGdlOiIsIGVycm9yKTsKICB9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const message = {
  notification: {
    title: &quot;Missatge Programat&quot;,
    body: &quot;Aquest missatge ha estat programat.&quot;
  },
  android: {
    ttl: 3600 * 1000  // 1 hora en mil&middot;lisegons
  },
  token: &quot;user-device-token&quot;
};

const sendTime = new Date().getTime() + 3600 * 1000; // 1 hora a partir d'ara

admin.messaging().send(message, { sendAt: sendTime })
  .then((response) =&gt; {
    console.log(&quot;Missatge programat amb &egrave;xit:&quot;, response);
  })
  .catch((error) =&gt; {
    console.log(&quot;Error en programar el missatge:&quot;, error);
  });</pre></div><div class='content'><p>En aquest exemple, es programa un missatge per ser enviat 1 hora a partir del temps actual.</p>
</div><h1>Filtratge de Missatges</h1>
<div class='content'><p>El filtratge de missatges et permet enviar missatges basats en propietats o condicions dels usuaris.</p>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbWVzc2FnZSA9IHsKICBub3RpZmljYXRpb246IHsKICAgIHRpdGxlOiAiTWlzc2F0Z2UgRmlsdHJhdCIsCiAgICBib2R5OiAiQXF1ZXN0IG1pc3NhdGdlIMOpcyBub23DqXMgcGVyIGEgdXN1YXJpcyBwcmVtaXVtLiIKICB9LAogIGNvbmRpdGlvbjogIidwcmVtaXVtVXNlcicgaW4gdG9waWNzIgp9OwoKYWRtaW4ubWVzc2FnaW5nKCkuc2VuZChtZXNzYWdlKQogIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgY29uc29sZS5sb2coIk1pc3NhdGdlIGZpbHRyYXQgZW52aWF0IGFtYiDDqHhpdDoiLCByZXNwb25zZSk7CiAgfSkKICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICBjb25zb2xlLmxvZygiRXJyb3IgZW4gZW52aWFyIGVsIG1pc3NhdGdlOiIsIGVycm9yKTsKICB9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const message = {
  notification: {
    title: &quot;Missatge Filtrat&quot;,
    body: &quot;Aquest missatge &eacute;s nom&eacute;s per a usuaris premium.&quot;
  },
  condition: &quot;'premiumUser' in topics&quot;
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log(&quot;Missatge filtrat enviat amb &egrave;xit:&quot;, response);
  })
  .catch((error) =&gt; {
    console.log(&quot;Error en enviar el missatge:&quot;, error);
  });</pre></div><div class='content'><p>En aquest exemple, s'envia un missatge només als usuaris que estan subscrits al tema &quot;premiumUser&quot;.</p>
</div><h1>Conclusió</h1>
<div class='content'><p>Les funcions avançades de missatgeria en Firebase Cloud Messaging proporcionen eines potents per dirigir i lliurar missatges als usuaris. Utilitzant temes, grups de dispositius, prioritats de missatges, programació i filtratge, pots crear estratègies de missatgeria sofisticades que milloren el compromís i l'experiència de l'usuari.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
