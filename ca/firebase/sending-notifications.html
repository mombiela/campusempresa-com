<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enviament de notificacions</title>

    <link rel="alternate" href="https://campusempresa.com/es/firebase/sending-notifications" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/firebase/sending-notifications" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/firebase/sending-notifications" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/firebase/sending-notifications" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='setting-up-cloud-messaging'>&#x25C4; Configurar Cloud Messaging</a></div><div class='col-6 text-end'><a href='handling-notifications'>Gestionar Notificacions &#x25BA;</a></div></div><div class='content'></div><h1>Introducció a les notificacions de Firebase</h1>
<div class='content'><p>Firebase Notifications és un servei que et permet enviar notificacions als teus usuaris a través de diferents plataformes com Android, iOS i web. Utilitza Firebase Cloud Messaging (FCM) per lliurar missatges de manera fiable i eficient.</p>
</div><h2>Conceptes clau</h2>
<div class='content'><ul>
<li><strong>Firebase Cloud Messaging (FCM):</strong> Una solució de missatgeria multiplataforma que et permet enviar missatges de manera fiable i sense cost.</li>
<li><strong>Missatges de notificació:</strong> Missatges que són mostrats a l'usuari pel sistema.</li>
<li><strong>Missatges de dades:</strong> Missatges que són gestionats per l'aplicació client.</li>
</ul>
</div><h1>Configuració de les notificacions de Firebase</h1>
<div class='content'><p>Abans de poder enviar notificacions, has de configurar Firebase en el teu projecte.</p>
</div><h2>Passos per configurar Firebase</h2>
<div class='content'><ol>
<li>
<p><strong>Crear un projecte de Firebase:</strong></p>
<ul>
<li>Ves a la <a href="https://console.firebase.google.com/">Consola de Firebase</a>.</li>
<li>Fes clic a &quot;Afegeix projecte&quot; i segueix l'assistent de configuració.</li>
</ul>
</li>
<li>
<p><strong>Afegeix Firebase a la teva aplicació:</strong></p>
<ul>
<li>Per a Android, descarrega el fitxer <code>google-services.json</code> i col·loca'l al directori <code>app</code> de la teva aplicació.</li>
<li>Per a iOS, descarrega el fitxer <code>GoogleService-Info.plist</code> i afegeix-lo al teu projecte Xcode.</li>
</ul>
</li>
<li>
<p><strong>Afegeix el SDK de Firebase:</strong></p>
<ul>
<li>Per a Android, afegeix les següents dependències al teu fitxer <code>build.gradle</code>:
<pre><code class="language-gradle">implementation 'com.google.firebase:firebase-messaging:23.0.0'
</code></pre>
</li>
<li>Per a iOS, afegeix el següent al teu <code>Podfile</code>:
<pre><code class="language-ruby">pod 'Firebase/Messaging'
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h1>Enviament de notificacions</h1>
<div class='content'><p>Hi ha diverses maneres d'enviar notificacions utilitzant Firebase.</p>
</div><h2>Utilitzant la consola de Firebase</h2>
<div class='content'><ol>
<li>
<p><strong>Navega a la consola de Firebase:</strong></p>
<ul>
<li>Selecciona el teu projecte.</li>
<li>Ves a la secció &quot;Cloud Messaging&quot;.</li>
</ul>
</li>
<li>
<p><strong>Compon un missatge:</strong></p>
<ul>
<li>Fes clic a &quot;Envia el teu primer missatge&quot;.</li>
<li>Introdueix el títol i el text de la notificació.</li>
<li>Selecciona el destinatari (per exemple, aplicació, tema o segment d'usuari).</li>
</ul>
</li>
<li>
<p><strong>Envia el missatge:</strong></p>
<ul>
<li>Fes clic a &quot;Envia&quot;.</li>
</ul>
</li>
</ol>
</div><h2>Utilitzant el Firebase Admin SDK</h2>
<div class='content'><p>També pots enviar notificacions programàticament utilitzant el Firebase Admin SDK.</p>
<h4>Exemple: Enviament d'una notificació des d'un servidor Node.js</h4>
<ol>
<li>
<p><strong>Instal·la el Firebase Admin SDK:</strong></p>
<pre><code class="language-bash">npm install firebase-admin --save
</code></pre>
</li>
<li>
<p><strong>Inicialitza el SDK:</strong></p>
<pre><code class="language-javascript">const admin = require('firebase-admin');
const serviceAccount = require('path/to/serviceAccountKey.json');

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount)
});
</code></pre>
</li>
<li>
<p><strong>Envia una notificació:</strong></p>
<pre><code class="language-javascript">const message = {
  notification: {
    title: 'Hola Món',
    body: 'Aquesta és una notificació de Firebase!'
  },
  token: 'user-device-token'
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log('Missatge enviat amb èxit:', response);
  })
  .catch((error) =&gt; {
    console.log('Error en enviar el missatge:', error);
  });
</code></pre>
</li>
</ol>
</div><h1>Gestió de notificacions a l'aplicació</h1>
<div class='content'><p>Per gestionar les notificacions a la teva aplicació, has de configurar els listeners.</p>
</div><h2>Android</h2>
<div class='content'><ol>
<li>
<p><strong>Crea un servei per gestionar els missatges:</strong></p>
<pre><code class="language-java">public class MyFirebaseMessagingService extends FirebaseMessagingService {
  @Override
  public void onMessageReceived(RemoteMessage remoteMessage) {
    // Gestiona el missatge
    if (remoteMessage.getNotification() != null) {
      showNotification(remoteMessage.getNotification().getTitle(), remoteMessage.getNotification().getBody());
    }
  }

  private void showNotification(String title, String body) {
    NotificationCompat.Builder builder = new NotificationCompat.Builder(this, &quot;CHANNEL_ID&quot;)
        .setSmallIcon(R.drawable.notification_icon)
        .setContentTitle(title)
        .setContentText(body)
        .setPriority(NotificationCompat.PRIORITY_DEFAULT);

    NotificationManagerCompat notificationManager = NotificationManagerCompat.from(this);
    notificationManager.notify(0, builder.build());
  }
}
</code></pre>
</li>
<li>
<p><strong>Registra el servei a <code>AndroidManifest.xml</code>:</strong></p>
<pre><code class="language-xml">&lt;service android:name=&quot;.MyFirebaseMessagingService&quot;&gt;
  &lt;intent-filter&gt;
    &lt;action android:name=&quot;com.google.firebase.MESSAGING_EVENT&quot;/&gt;
  &lt;/intent-filter&gt;
&lt;/service&gt;
</code></pre>
</li>
</ol>
</div><h2>iOS</h2>
<div class='content'><ol>
<li>
<p><strong>Sol·licita permisos de notificació:</strong></p>
<pre><code class="language-swift">import UserNotifications

UNUserNotificationCenter.current().requestAuthorization(options: [.alert, .sound, .badge]) { granted, error in
  // Gestiona el permís concedit o l'error
}
</code></pre>
</li>
<li>
<p><strong>Gestiona les notificacions entrants:</strong></p>
<pre><code class="language-swift">import Firebase

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate, UNUserNotificationCenterDelegate, MessagingDelegate {
  func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {
    FirebaseApp.configure()
    UNUserNotificationCenter.current().delegate = self
    Messaging.messaging().delegate = self
    return true;
  }

  func messaging(_ messaging: Messaging, didReceive remoteMessage: MessagingRemoteMessage) {
    // Gestiona el missatge
  }

  func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -&gt; Void) {
    completionHandler([.alert, .sound, .badge])
  }
}
</code></pre>
</li>
</ol>
</div><h1>Temes avançats</h1>
<h2>Enviament de missatges de dades</h2>
<div class='content'><p>Els missatges de dades et permeten enviar parells clau-valor personalitzats a la teva aplicació.</p>
<h4>Exemple: Enviament d'un missatge de dades</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbWVzc2FnZSA9IHsKICBkYXRhOiB7CiAgICBrZXkxOiAndmFsdWUxJywKICAgIGtleTI6ICd2YWx1ZTInCiAgfSwKICB0b2tlbjogJ3VzZXItZGV2aWNlLXRva2VuJwp9OwoKYWRtaW4ubWVzc2FnaW5nKCkuc2VuZChtZXNzYWdlKQogIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgY29uc29sZS5sb2coJ01pc3NhdGdlIGVudmlhdCBhbWIgw6h4aXQ6JywgcmVzcG9uc2UpOwogIH0pCiAgLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5sb2coJ0Vycm9yIGVuIGVudmlhciBlbCBtaXNzYXRnZTonLCBlcnJvcik7CiAgfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const message = {
  data: {
    key1: 'value1',
    key2: 'value2'
  },
  token: 'user-device-token'
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log('Missatge enviat amb &egrave;xit:', response);
  })
  .catch((error) =&gt; {
    console.log('Error en enviar el missatge:', error);
  });</pre></div><div class='content'></div><h2>Missatgeria per temes</h2>
<div class='content'><p>La missatgeria per temes et permet enviar missatges a múltiples dispositius que s'han subscrit a un tema en particular.</p>
<h4>Exemple: Subscripció a un tema</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgdG9waWMgPSAnbmV3cyc7CgphZG1pbi5tZXNzYWdpbmcoKS5zdWJzY3JpYmVUb1RvcGljKFsndXNlci1kZXZpY2UtdG9rZW4nXSwgdG9waWMpCiAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBjb25zb2xlLmxvZygnU3Vic2NyaXQgYWwgdGVtYSBhbWIgw6h4aXQ6JywgcmVzcG9uc2UpOwogIH0pCiAgLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5sb2coJ0Vycm9yIGVuIHN1YnNjcml1cmUgYWwgdGVtYTonLCBlcnJvcik7CiAgfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const topic = 'news';

admin.messaging().subscribeToTopic(['user-device-token'], topic)
  .then((response) =&gt; {
    console.log('Subscrit al tema amb &egrave;xit:', response);
  })
  .catch((error) =&gt; {
    console.log('Error en subscriure al tema:', error);
  });</pre></div><div class='content'><h4>Exemple: Enviament d'un missatge a un tema</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbWVzc2FnZSA9IHsKICBub3RpZmljYXRpb246IHsKICAgIHRpdGxlOiAnw5psdGltZXMgTm90w61jaWVzJywKICAgIGJvZHk6ICdDb25zdWx0YSBsZXMgw7psdGltZXMgbm90w61jaWVzIScKICB9LAogIHRvcGljOiAnbmV3cycKfTsKCmFkbWluLm1lc3NhZ2luZygpLnNlbmQobWVzc2FnZSkKICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgIGNvbnNvbGUubG9nKCdNaXNzYXRnZSBlbnZpYXQgYW1iIMOoeGl0OicsIHJlc3BvbnNlKTsKICB9KQogIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgIGNvbnNvbGUubG9nKCdFcnJvciBlbiBlbnZpYXIgZWwgbWlzc2F0Z2U6JywgZXJyb3IpOwogIH0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const message = {
  notification: {
    title: '&Uacute;ltimes Not&iacute;cies',
    body: 'Consulta les &uacute;ltimes not&iacute;cies!'
  },
  topic: 'news'
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log('Missatge enviat amb &egrave;xit:', response);
  })
  .catch((error) =&gt; {
    console.log('Error en enviar el missatge:', error);
  });</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Les notificacions de Firebase proporcionen una manera potent i flexible per interactuar amb els teus usuaris. Tant si estàs enviant missatges de notificació simples com missatges de dades complexos, Firebase facilita la lliurament del teu contingut de manera fiable. Comprenent els conceptes bàsics i explorant temes avançats com els missatges de dades i la missatgeria per temes, pots crear un sistema de notificacions robust per a la teva aplicació.</p>
</div><div class='row navigation'><div class='col-6'><a href='setting-up-cloud-messaging'>&#x25C4; Configurar Cloud Messaging</a></div><div class='col-6 text-end'><a href='handling-notifications'>Gestionar Notificacions &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
