<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capacitats fora de línia</title>

    <link rel="alternate" href="https://campusempresa.com/es/firebase/offline-capabilities" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/firebase/offline-capabilities" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/firebase/offline-capabilities" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/firebase/offline-capabilities" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='realtime-database-security-rules'>&#x25C4;Regles de Seguretat de Realtime Database</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Capacitats fora de línia</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-firebase-storage'>Introducció a Firebase Storage &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Firebase proporciona capacitats robustes fora de línia que permeten que la teva aplicació segueixi sent funcional fins i tot quan el dispositiu no està connectat a internet. Aquesta característica és crucial per crear una experiència d'usuari fluida, especialment en àrees amb connectivitat de xarxa poc fiable. En aquesta secció, explorarem com Firebase gestiona les dades fora de línia i com pots implementar aquestes característiques a la teva aplicació.</p>
</div><h1>Conceptes clau</h1>
<div class='content'><ul>
<li><strong>Emmagatzematge local de dades</strong>: Firebase emmagatzema una còpia local de les teves dades, permetent operacions de lectura i escriptura fins i tot quan estàs fora de línia.</li>
<li><strong>Sincronització de dades</strong>: Els canvis fets mentre estàs fora de línia es sincronitzen amb el servidor de Firebase un cop el dispositiu es reconnecta a internet.</li>
<li><strong>Persistència</strong>: Firebase pot persistir dades al dispositiu a través de reinicis de l'aplicació.</li>
</ul>
</div><h1>Activació de les capacitats fora de línia</h1>
<div class='content'><p>Per activar les capacitats fora de línia a Firebase, has de configurar la teva Firebase Realtime Database o Firestore per donar suport a la persistència de dades fora de línia.</p>
</div><h2>Realtime Database</h2>
<div class='content'><p>Per a Firebase Realtime Database, pots activar la persistència fora de línia amb una sola línia de codi.</p>
<h4>Exemple</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQWN0aXZhciBsYSBwZXJzaXN0w6huY2lhIGZvcmEgZGUgbMOtbmlhCmZpcmViYXNlLmRhdGFiYXNlKCkuc2V0UGVyc2lzdGVuY2VFbmFibGVkKHRydWUpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Activar la persist&egrave;ncia fora de l&iacute;nia
firebase.database().setPersistenceEnabled(true);</pre></div><div class='content'><p>Aquesta comanda assegura que la teva aplicació emmagatzemarà dades localment i les sincronitzarà amb el servidor quan el dispositiu torni a estar en línia.</p>
</div><h2>Firestore</h2>
<div class='content'><p>Firestore requereix una configuració similar per activar la persistència fora de línia.</p>
<h4>Exemple</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQWN0aXZhciBsYSBwZXJzaXN0w6huY2lhIGZvcmEgZGUgbMOtbmlhCmZpcmViYXNlLmZpcmVzdG9yZSgpLmVuYWJsZVBlcnNpc3RlbmNlKCkKICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7CiAgICBpZiAoZXJyLmNvZGUgPT0gJ2ZhaWxlZC1wcmVjb25kaXRpb24nKSB7CiAgICAgIC8vIE3Dumx0aXBsZXMgcGVzdGFueWVzIG9iZXJ0ZXMsIGxhIHBlcnNpc3TDqG5jaWEgbm9tw6lzIGVzIHBvdCBhY3RpdmFyCiAgICAgIC8vIGVuIHVuYSBwZXN0YW55YSBhIGxhIHZlZ2FkYS4KICAgICAgY29uc29sZS5lcnJvcigiTGEgcGVyc2lzdMOobmNpYSBoYSBmYWxsYXQ6IE3Dumx0aXBsZXMgcGVzdGFueWVzIG9iZXJ0ZXMiKTsKICAgIH0gZWxzZSBpZiAoZXJyLmNvZGUgPT0gJ3VuaW1wbGVtZW50ZWQnKSB7CiAgICAgIC8vIEVsIG5hdmVnYWRvciBhY3R1YWwgbm8gc3Vwb3J0YSB0b3RlcyBsZXMKICAgICAgLy8gY2FyYWN0ZXLDrXN0aXF1ZXMgbmVjZXNzw6ByaWVzIHBlciBhY3RpdmFyIGxhIHBlcnNpc3TDqG5jaWEKICAgICAgY29uc29sZS5lcnJvcigiTGEgcGVyc2lzdMOobmNpYSBubyBlc3TDoCBkaXNwb25pYmxlIGVuIGFxdWVzdCBuYXZlZ2Fkb3IiKTsKICAgIH0KICB9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Activar la persist&egrave;ncia fora de l&iacute;nia
firebase.firestore().enablePersistence()
  .catch(function(err) {
    if (err.code == 'failed-precondition') {
      // M&uacute;ltiples pestanyes obertes, la persist&egrave;ncia nom&eacute;s es pot activar
      // en una pestanya a la vegada.
      console.error(&quot;La persist&egrave;ncia ha fallat: M&uacute;ltiples pestanyes obertes&quot;);
    } else if (err.code == 'unimplemented') {
      // El navegador actual no suporta totes les
      // caracter&iacute;stiques necess&agrave;ries per activar la persist&egrave;ncia
      console.error(&quot;La persist&egrave;ncia no est&agrave; disponible en aquest navegador&quot;);
    }
  });</pre></div><div class='content'><p>Aquest fragment de codi activa la persistència fora de línia i gestiona els possibles errors que podrien ocórrer si el navegador no suporta aquesta característica.</p>
</div><h1>Gestió de dades fora de línia</h1>
<div class='content'><p>Quan la teva aplicació està fora de línia, Firebase utilitzarà les dades emmagatzemades localment per servir les sol·licituds de lectura i escriptura. Aquí tens com pots gestionar les operacions de dades mentre estàs fora de línia.</p>
</div><h2>Lectura de dades</h2>
<div class='content'><p>Quan llegeixes dades, Firebase primer comprovarà la memòria cau local abans d'intentar obtenir-les del servidor.</p>
<h4>Exemple</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gTGVjdHVyYSBkZSBkYWRlcyBkZSBGaXJlc3RvcmUKZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbigndXNlcnMnKS5kb2MoJ3VzZXJfaWQnKQogIC5nZXQoKQogIC50aGVuKChkb2MpID0+IHsKICAgIGlmIChkb2MuZXhpc3RzKSB7CiAgICAgIGNvbnNvbGUubG9nKCJEYWRlcyBkZWwgZG9jdW1lbnQ6IiwgZG9jLmRhdGEoKSk7CiAgICB9IGVsc2UgewogICAgICBjb25zb2xlLmxvZygiTm8gZXhpc3RlaXggYXF1ZXN0IGRvY3VtZW50ISIpOwogICAgfQogIH0pLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5sb2coIkVycm9yIG9idGVuaW50IGVsIGRvY3VtZW50OiIsIGVycm9yKTsKICB9KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Lectura de dades de Firestore
firebase.firestore().collection('users').doc('user_id')
  .get()
  .then((doc) =&gt; {
    if (doc.exists) {
      console.log(&quot;Dades del document:&quot;, doc.data());
    } else {
      console.log(&quot;No existeix aquest document!&quot;);
    }
  }).catch((error) =&gt; {
    console.log(&quot;Error obtenint el document:&quot;, error);
  });</pre></div><div class='content'></div><h2>Escriptura de dades</h2>
<div class='content'><p>Quan escrius dades, Firebase posarà en cua les operacions d'escriptura i les executarà un cop el dispositiu torni a estar en línia.</p>
<h4>Exemple</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRXNjcmlwdHVyYSBkZSBkYWRlcyBhIEZpcmVzdG9yZQpmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCd1c2VycycpLmRvYygndXNlcl9pZCcpCiAgLnNldCh7CiAgICBuYW1lOiAiSm9obiBEb2UiLAogICAgZW1haWw6ICJqb2huLmRvZUBleGFtcGxlLmNvbSIKICB9KQogIC50aGVuKCgpID0+IHsKICAgIGNvbnNvbGUubG9nKCJEb2N1bWVudCBlc2NyaXQgYW1iIMOoeGl0ISIpOwogIH0pCiAgLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5lcnJvcigiRXJyb3IgZXNjcml2aW50IGVsIGRvY3VtZW50OiAiLCBlcnJvcik7CiAgfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Escriptura de dades a Firestore
firebase.firestore().collection('users').doc('user_id')
  .set({
    name: &quot;John Doe&quot;,
    email: &quot;john.doe@example.com&quot;
  })
  .then(() =&gt; {
    console.log(&quot;Document escrit amb &egrave;xit!&quot;);
  })
  .catch((error) =&gt; {
    console.error(&quot;Error escrivint el document: &quot;, error);
  });</pre></div><div class='content'></div><h1>Sincronització</h1>
<div class='content'><p>Un cop el dispositiu es reconnecta a internet, Firebase sincronitzarà automàticament les dades locals amb el servidor. Aquest procés assegura que qualsevol canvi fet mentre estaves fora de línia es reflecteixi a la base de dades del servidor.</p>
</div><h2>Resolució de conflictes</h2>
<div class='content'><p>Firebase gestiona la resolució de conflictes utilitzant l'estratègia de l'última escriptura guanya. Això significa que l'operació d'escriptura més recent sobreescriurà qualsevol dada anterior.</p>
</div><h1>Resum</h1>
<div class='content'><p>En aquesta secció, hem cobert els següents punts clau:</p>
<ul>
<li>Firebase proporciona capacitats fora de línia a través de l'emmagatzematge local de dades i la sincronització.</li>
<li>Activar la persistència fora de línia és senzill tant per a Realtime Database com per a Firestore.</li>
<li>Firebase gestiona les operacions de lectura i escriptura mentre estàs fora de línia utilitzant dades locals i cues.</li>
<li>La sincronització es produeix automàticament quan el dispositiu es reconnecta a internet, amb la resolució de conflictes gestionada per Firebase.</li>
</ul>
<p>Aprofitant les capacitats fora de línia de Firebase, pots assegurar-te que la teva aplicació segueixi sent funcional i proporcioni una experiència d'usuari fluida fins i tot en absència d'una connexió a internet estable.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='realtime-database-security-rules'>&#x25C4;Regles de Seguretat de Realtime Database</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Capacitats fora de línia</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-firebase-storage'>Introducció a Firebase Storage &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
