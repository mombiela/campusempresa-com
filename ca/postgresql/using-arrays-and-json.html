<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ús de Matrius i JSON a PostgreSQL</title>

    <link rel="alternate" href="https://campusempresa.com/es/postgresql/using-arrays-and-json" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/postgresql/using-arrays-and-json" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/postgresql/using-arrays-and-json" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/postgresql/using-arrays-and-json" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='understanding-data-types'>&#x25C4;Comprensió dels tipus de dades</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Ús de Matrius i JSON a PostgreSQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='date-and-time-functions'>Funcions de data i hora &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En aquesta secció, explorarem com utilitzar matrius i JSON a PostgreSQL. Les matrius i JSON són tipus de dades potents que et permeten emmagatzemar i manipular estructures de dades complexes dins de la teva base de dades. Entendre com utilitzar aquests tipus de dades de manera efectiva pot millorar enormement la teva capacitat per treballar amb PostgreSQL.</p>
</div><h1>Matrius a PostgreSQL</h1>
<div class='content'></div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Tipus de Dada Matriu</strong>: PostgreSQL suporta matrius de qualsevol tipus de dada integrat o definit per l'usuari.</li>
<li><strong>Declaració de Matrius</strong>: Les matrius es poden declarar utilitzant claudàtors <code>[]</code>.</li>
<li><strong>Funcions i Operadors de Matrius</strong>: PostgreSQL proporciona una varietat de funcions i operadors per treballar amb matrius.</li>
</ul>
</div><h2>Crear i Utilitzar Matrius</h2>
<div class='content'><p>Per crear una taula amb una columna de matriu:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIHN0dWRlbnRzICgKICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSwKICAgIG5hbWUgVkFSQ0hBUigxMDApLAogICAgZ3JhZGVzIElOVEVHRVJbXQopOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE students (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    grades INTEGER[]
);</pre></div><div class='content'><p>Inserir dades en una columna de matriu:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SU5TRVJUIElOVE8gc3R1ZGVudHMgKG5hbWUsIGdyYWRlcykgVkFMVUVTICgnQWxpY2UnLCAnezg1LCA5MCwgNzh9Jyk7CklOU0VSVCBJTlRPIHN0dWRlbnRzIChuYW1lLCBncmFkZXMpIFZBTFVFUyAoJ0JvYicsICd7ODgsIDkyLCA4MH0nKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>INSERT INTO students (name, grades) VALUES ('Alice', '{85, 90, 78}');
INSERT INTO students (name, grades) VALUES ('Bob', '{88, 92, 80}');</pre></div><div class='content'><p>Consultar dades d'una columna de matriu:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIG5hbWUsIGdyYWRlcyBGUk9NIHN0dWRlbnRzOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT name, grades FROM students;</pre></div><div class='content'></div><h2>Funcions i Operadors de Matrius</h2>
<div class='content'><ul>
<li>
<p><strong>Accedir a Elements de la Matriu</strong>: Utilitza la notació de subíndex per accedir als elements.</p>
<pre><code class="language-sql">SELECT grades[1] FROM students WHERE name = 'Alice'; -- Retorna 85
</code></pre>
</li>
<li>
<p><strong>Longitud de la Matriu</strong>: Utilitza la funció <code>array_length</code> per obtenir la longitud d'una matriu.</p>
<pre><code class="language-sql">SELECT array_length(grades, 1) FROM students WHERE name = 'Alice'; -- Retorna 3
</code></pre>
</li>
<li>
<p><strong>Afegir a la Matriu</strong>: Utilitza l'operador <code>||</code> per afegir elements a una matriu.</p>
<pre><code class="language-sql">UPDATE students SET grades = grades || 95 WHERE name = 'Alice';
</code></pre>
</li>
</ul>
</div><h1>JSON a PostgreSQL</h1>
<div class='content'></div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Tipus de Dada JSON</strong>: PostgreSQL suporta dos tipus de dades JSON: <code>json</code> i <code>jsonb</code>.
<ul>
<li><code>json</code>: Emmagatzema dades JSON com a text.</li>
<li><code>jsonb</code>: Emmagatzema dades JSON en un format binari per a un processament més ràpid.</li>
</ul>
</li>
<li><strong>Funcions i Operadors JSON</strong>: PostgreSQL proporciona un conjunt ric de funcions i operadors per treballar amb dades JSON.</li>
</ul>
</div><h2>Crear i Utilitzar JSON</h2>
<div class='content'><p>Per crear una taula amb una columna JSON:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIHByb2R1Y3RzICgKICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSwKICAgIG5hbWUgVkFSQ0hBUigxMDApLAogICAgYXR0cmlidXRlcyBKU09OQgopOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    attributes JSONB
);</pre></div><div class='content'><p>Inserir dades en una columna JSON:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SU5TRVJUIElOVE8gcHJvZHVjdHMgKG5hbWUsIGF0dHJpYnV0ZXMpIFZBTFVFUyAoJ0xhcHRvcCcsICd7ImJyYW5kIjogIkRlbGwiLCAicHJpY2UiOiAxMjAwfScpOwpJTlNFUlQgSU5UTyBwcm9kdWN0cyAobmFtZSwgYXR0cmlidXRlcykgVkFMVUVTICgnU21hcnRwaG9uZScsICd7ImJyYW5kIjogIlNhbXN1bmciLCAicHJpY2UiOiA4MDB9Jyk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>INSERT INTO products (name, attributes) VALUES ('Laptop', '{&quot;brand&quot;: &quot;Dell&quot;, &quot;price&quot;: 1200}');
INSERT INTO products (name, attributes) VALUES ('Smartphone', '{&quot;brand&quot;: &quot;Samsung&quot;, &quot;price&quot;: 800}');</pre></div><div class='content'><p>Consultar dades d'una columna JSON:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIG5hbWUsIGF0dHJpYnV0ZXMgRlJPTSBwcm9kdWN0czs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT name, attributes FROM products;</pre></div><div class='content'></div><h2>Funcions i Operadors JSON</h2>
<div class='content'><ul>
<li>
<p><strong>Accedir a Camps JSON</strong>: Utilitza els operadors <code>-&gt;</code> i <code>-&gt;&gt;</code> per accedir als camps JSON.</p>
<pre><code class="language-sql">SELECT attributes-&gt;'brand' FROM products WHERE name = 'Laptop'; -- Retorna &quot;Dell&quot;
SELECT attributes-&gt;&gt;'price' FROM products WHERE name = 'Laptop'; -- Retorna 1200
</code></pre>
</li>
<li>
<p><strong>Actualitzar Camps JSON</strong>: Utilitza la funció <code>jsonb_set</code> per actualitzar camps JSON.</p>
<pre><code class="language-sql">UPDATE products SET attributes = jsonb_set(attributes, '{price}', '1300') WHERE name = 'Laptop';
</code></pre>
</li>
<li>
<p><strong>Agregació JSON</strong>: Utilitza la funció <code>json_agg</code> per agregar resultats en una matriu JSON.</p>
<pre><code class="language-sql">SELECT json_agg(attributes) FROM products;
</code></pre>
</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Les matrius i JSON són tipus de dades versàtils a PostgreSQL que et permeten emmagatzemar i manipular estructures de dades complexes de manera eficient. Les matrius són útils per emmagatzemar llistes de dades homogènies, mentre que JSON és ideal per representar dades estructurades amb formats variables. Dominant l'ús de matrius i JSON, pots millorar la funcionalitat i el rendiment de la teva base de dades, fent que les teves aplicacions siguin més robustes i flexibles.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='understanding-data-types'>&#x25C4;Comprensió dels tipus de dades</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Ús de Matrius i JSON a PostgreSQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='date-and-time-functions'>Funcions de data i hora &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
