<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimització de Consultes en PostgreSQL</title>

    <link rel="alternate" href="https://campusempresa.com/es/postgresql/query-optimization" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/postgresql/query-optimization" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/postgresql/query-optimization" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/postgresql/query-optimization" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-and-managing-indexes'>&#x25C4;Creació i gestió d'índexs</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Optimització de Consultes en PostgreSQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='analyzing-query-performance'>Anàlisi del rendiment de les consultes &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció a l'Optimització de Consultes</h1>
<div class='content'><p>L'optimització de consultes és un aspecte crucial de la gestió de bases de dades que assegura que les teves consultes s'executin de manera eficient. En PostgreSQL, l'optimitzador de consultes juga un paper vital en determinar la manera més eficient d'executar una consulta.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Planificador de Consultes</strong>: El component de PostgreSQL que determina la manera més eficient d'executar una consulta.</li>
<li><strong>Pla d'Execució</strong>: L'estratègia escollida pel planificador de consultes per executar una consulta.</li>
<li><strong>Optimització Basada en Costos</strong>: PostgreSQL utilitza un optimitzador basat en costos que assigna un cost a diferents plans d'execució i escull el que té el cost més baix.</li>
<li><strong>Índexs</strong>: Estructures de dades que milloren la velocitat de les operacions de recuperació de dades en una taula de bases de dades.</li>
</ul>
</div><h1>Comprendre el Planificador de Consultes</h1>
<div class='content'><p>El planificador de consultes analitza diferents possibles plans d'execució i selecciona el que té el cost estimat més baix.</p>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVhQTEFJTiBTRUxFQ1QgKiBGUk9NIGVtcGxveWVlcyBXSEVSRSBkZXBhcnRtZW50ID0gJ1NhbGVzJzs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>EXPLAIN SELECT * FROM employees WHERE department = 'Sales';</pre></div><div class='content'><ul>
<li><code>EXPLAIN</code> s'utilitza per mostrar el pla d'execució d'una consulta sense executar-la realment.</li>
<li>La sortida mostrarà els passos que PostgreSQL prendrà per executar la consulta.</li>
</ul>
</div><h1>Utilitzar Índexs</h1>
<div class='content'><p>Els índexs són essencials per optimitzar el rendiment de les consultes. Permeten que la base de dades trobi files més ràpidament que escanejant tota la taula.</p>
</div><h2>Crear un Índex</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIElOREVYIGlkeF9kZXBhcnRtZW50IE9OIGVtcGxveWVlcyhkZXBhcnRtZW50KTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE INDEX idx_department ON employees(department);</pre></div><div class='content'><ul>
<li>Aquesta comanda crea un índex a la columna <code>department</code> de la taula <code>employees</code>.</li>
<li>Després de crear l'índex, les consultes que filtren per <code>department</code> seran més ràpides.</li>
</ul>
</div><h2>Exemple amb Índex</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVhQTEFJTiBTRUxFQ1QgKiBGUk9NIGVtcGxveWVlcyBXSEVSRSBkZXBhcnRtZW50ID0gJ1NhbGVzJzs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>EXPLAIN SELECT * FROM employees WHERE department = 'Sales';</pre></div><div class='content'><ul>
<li>Després de crear l'índex, el pla d'execució hauria de mostrar que s'està utilitzant l'índex.</li>
</ul>
</div><h1>Analitzar Plans d'Execució</h1>
<div class='content'><p>Comprendre la sortida de <code>EXPLAIN</code> és crucial per optimitzar les consultes.</p>
</div><h2>Exemple de Sortida</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U2VxIFNjYW4gb24gZW1wbG95ZWVzICAoY29zdD0wLjAwLi4zNS41MCByb3dzPTUgd2lkdGg9MTAwKQogIEZpbHRlcjogKGRlcGFydG1lbnQgPSAnU2FsZXMnOjp0ZXh0KQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Seq Scan on employees  (cost=0.00..35.50 rows=5 width=100)
  Filter: (department = 'Sales'::text)</pre></div><div class='content'><ul>
<li><strong>Seq Scan</strong>: Indica un escaneig seqüencial, el que significa que la base de dades està escanejant tota la taula.</li>
<li><strong>Cost</strong>: El cost estimat de la consulta. Els costos més baixos són millors.</li>
<li><strong>Rows</strong>: El nombre estimat de files que es retornaran.</li>
<li><strong>Width</strong>: L'amplada mitjana de les files en bytes.</li>
</ul>
</div><h2>Pla d'Execució Millorat amb Índex</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SW5kZXggU2NhbiB1c2luZyBpZHhfZGVwYXJ0bWVudCBvbiBlbXBsb3llZXMgIChjb3N0PTAuMTUuLjguMjAgcm93cz01IHdpZHRoPTEwMCkKICBJbmRleCBDb25kOiAoZGVwYXJ0bWVudCA9ICdTYWxlcyc6OnRleHQp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Index Scan using idx_department on employees  (cost=0.15..8.20 rows=5 width=100)
  Index Cond: (department = 'Sales'::text)</pre></div><div class='content'><ul>
<li><strong>Index Scan</strong>: Indica que s'està utilitzant l'índex, el que generalment és més ràpid que un escaneig seqüencial.</li>
</ul>
</div><h1>Optimitzar Unions</h1>
<div class='content'><p>Les unions poden ser operacions costoses, i optimitzar-les és crucial per al rendiment.</p>
</div><h2>Tipus d'Unions</h2>
<div class='content'><ul>
<li><strong>Unió de Bucle Imbricat</strong>: Adequada per a conjunts de dades petits.</li>
<li><strong>Unió de Hash</strong>: Eficient per a conjunts de dades més grans.</li>
<li><strong>Unió de Fusió</strong>: Útil quan ambdós conjunts de dades estan ordenats.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVhQTEFJTiBTRUxFQ1QgZS5uYW1lLCBkLm5hbWUgCkZST00gZW1wbG95ZWVzIGUgCkpPSU4gZGVwYXJ0bWVudHMgZCBPTiBlLmRlcGFydG1lbnRfaWQgPSBkLmlkOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>EXPLAIN SELECT e.name, d.name 
FROM employees e 
JOIN departments d ON e.department_id = d.id;</pre></div><div class='content'><ul>
<li>El pla d'execució mostrarà el tipus d'unió utilitzat i el seu cost.</li>
</ul>
</div><h1>Utilitzar `ANALYZE` per a Millors Estadístiques</h1>
<div class='content'><p>PostgreSQL utilitza estadístiques per prendre decisions sobre els plans d'execució. Mantenir aquestes estadístiques actualitzades és essencial.</p>
</div><h2>Executar `ANALYZE`</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QU5BTFlaRSBlbXBsb3llZXM7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ANALYZE employees;</pre></div><div class='content'><ul>
<li>Aquesta comanda actualitza les estadístiques per a la taula <code>employees</code>, ajudant el planificador de consultes a prendre millors decisions.</li>
</ul>
</div><h1>Tècniques Avançades d'Optimització de Consultes</h1>
<div class='content'><p>Per a usuaris avançats, hi ha diverses tècniques per optimitzar encara més les consultes.</p>
</div><h2>Particionament</h2>
<div class='content'><p>Particionar una taula gran en peces més petites i manejables pot millorar el rendiment.</p>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIGVtcGxveWVlc18yMDIzIFBBUlRJVElPTiBPRiBlbXBsb3llZXMgCkZPUiBWQUxVRVMgRlJPTSAoJzIwMjMtMDEtMDEnKSBUTyAoJzIwMjMtMTItMzEnKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE employees_2023 PARTITION OF employees 
FOR VALUES FROM ('2023-01-01') TO ('2023-12-31');</pre></div><div class='content'><ul>
<li>Aquesta comanda crea una partició per a la taula <code>employees</code> per a l'any 2023.</li>
</ul>
</div><h2>Utilitzar `VACUUM`</h2>
<div class='content'><p>Executar <code>VACUUM</code> regularment ajuda a recuperar emmagatzematge i actualitzar estadístiques.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VkFDVVVNIEZVTEwgZW1wbG95ZWVzOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>VACUUM FULL employees;</pre></div><div class='content'><ul>
<li>Aquesta comanda recupera emmagatzematge i actualitza estadístiques per a la taula <code>employees</code>.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>L'optimització de consultes en PostgreSQL implica comprendre i utilitzar el planificador de consultes, crear i utilitzar índexs, analitzar plans d'execució, optimitzar unions i mantenir estadístiques actualitzades. Seguint aquestes pràctiques, pots assegurar-te que les teves consultes s'executin de manera eficient, aprofitant al màxim les capacitats potents de PostgreSQL.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-and-managing-indexes'>&#x25C4;Creació i gestió d'índexs</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Optimització de Consultes en PostgreSQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='analyzing-query-performance'>Anàlisi del rendiment de les consultes &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
