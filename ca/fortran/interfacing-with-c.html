<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://campusempresa.com/fortran/interfacing-with-c" id="lnk_lang_es" data-lang="es">Castellano</a></b>
				|
				<b id="lit_lang_ca">Catala</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>Interfacing Fortran with C can be a powerful way to leverage the strengths of both languages. This section will guide you through the process of calling C functions from Fortran and vice versa, covering key concepts, providing examples, and offering exercises to solidify your understanding.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Interoperabilitat</strong>: La capacitat de Fortran i C per cridar les funcions de l'altre i compartir dades.</li>
<li><strong>Mòdul ISO_C_BINDING</strong>: Un mòdul de Fortran que proporciona les eines necessàries per a la interoperabilitat amb C.</li>
<li><strong>Atributs de Vinculació C</strong>: Atributs que especifiquen com les entitats de Fortran corresponen a les entitats de C.</li>
<li><strong>Mapeig de Tipus de Dades</strong>: Comprendre com els tipus de dades de Fortran es mapegen als tipus de dades de C.</li>
</ul>
</div><h1>Mòdul ISO_C_BINDING</h1>
<div class='content'><p>El mòdul <code>ISO_C_BINDING</code> és essencial per a la interoperabilitat entre Fortran i C. Proporciona constants amb nom i tipus derivats que ajuden a mapar els tipus de dades de Fortran als tipus de dades de C.</p>
</div><h2>Exemple: Utilitzant ISO_C_BINDING</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBjX2JpbmRpbmdfZXhhbXBsZQogIHVzZSBpc29fY19iaW5kaW5nCiAgaW1wbGljaXQgbm9uZQoKICBpbnRlZ2VyKGNfaW50KSA6OiBpCiAgcmVhbChjX2Zsb2F0KSA6OiB4CgogIGkgPSA0MgogIHggPSAzLjE0CgogIHByaW50ICosICdJbnRlZ2VyOicsIGkKICBwcmludCAqLCAnUmVhbDonLCB4CgplbmQgcHJvZ3JhbSBjX2JpbmRpbmdfZXhhbXBsZQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program c_binding_example
  use iso_c_binding
  implicit none

  integer(c_int) :: i
  real(c_float) :: x

  i = 42
  x = 3.14

  print *, 'Integer:', i
  print *, 'Real:', x

end program c_binding_example</pre></div><div class='content'><p>En aquest exemple, <code>c_int</code> i <code>c_float</code> són constants del mòdul <code>ISO_C_BINDING</code> que es mapegen als corresponents tipus de dades de C.</p>
</div><h1>Cridar Funcions de C des de Fortran</h1>
<div class='content'><p>Per cridar una funció de C des de Fortran, cal:</p>
<ol>
<li>Declarar la funció de C en Fortran utilitzant l'atribut <code>BIND(C)</code>.</li>
<li>Assegurar-se que els tipus de dades coincideixin entre Fortran i C.</li>
</ol>
</div><h2>Exemple: Cridar una Funció de C</h2>
<div class='content'><h4>Codi C (guardar com <code>c_function.c</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+Cgp2b2lkIHByaW50X21lc3NhZ2UoKSB7CiAgICBwcmludGYoIkhlbGxvIGZyb20gQyFcbiIpOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

void print_message() {
    printf(&quot;Hello from C!\n&quot;);
}</pre></div><div class='content'><h4>Codi Fortran (guardar com <code>call_c_function.f90</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBjYWxsX2NfZnVuY3Rpb24KICB1c2UgaXNvX2NfYmluZGluZwogIGltcGxpY2l0IG5vbmUKCiAgaW50ZXJmYWNlCiAgICBzdWJyb3V0aW5lIHByaW50X21lc3NhZ2UoKSBiaW5kKEMsIG5hbWU9InByaW50X21lc3NhZ2UiKQogICAgZW5kIHN1YnJvdXRpbmUgcHJpbnRfbWVzc2FnZQogIGVuZCBpbnRlcmZhY2UKCiAgY2FsbCBwcmludF9tZXNzYWdlKCkKCmVuZCBwcm9ncmFtIGNhbGxfY19mdW5jdGlvbg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program call_c_function
  use iso_c_binding
  implicit none

  interface
    subroutine print_message() bind(C, name=&quot;print_message&quot;)
    end subroutine print_message
  end interface

  call print_message()

end program call_c_function</pre></div><div class='content'><p>Per compilar i executar l'exemple anterior:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2NjIC1jIGNfZnVuY3Rpb24uYwpnZm9ydHJhbiBjYWxsX2NfZnVuY3Rpb24uZjkwIGNfZnVuY3Rpb24ubyAtbyBjYWxsX2NfZnVuY3Rpb24KLi9jYWxsX2NfZnVuY3Rpb24="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcc -c c_function.c
gfortran call_c_function.f90 c_function.o -o call_c_function
./call_c_function</pre></div><div class='content'></div><h1>Cridar Funcions de Fortran des de C</h1>
<div class='content'><p>Per cridar una funció de Fortran des de C, cal:</p>
<ol>
<li>Declarar la funció de Fortran amb l'atribut <code>BIND(C)</code>.</li>
<li>Assegurar-se que els tipus de dades coincideixin entre Fortran i C.</li>
</ol>
</div><h2>Exemple: Cridar una Funció de Fortran</h2>
<div class='content'><h4>Codi Fortran (guardar com <code>fortran_function.f90</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlIGZvcnRyYW5fbW9kdWxlCiAgdXNlIGlzb19jX2JpbmRpbmcKICBpbXBsaWNpdCBub25lCgpjb250YWlucwoKICBzdWJyb3V0aW5lIHByaW50X21lc3NhZ2UoKSBiaW5kKEMsIG5hbWU9InByaW50X21lc3NhZ2UiKQogICAgcHJpbnQgKiwgIkhlbGxvIGZyb20gRm9ydHJhbiEiCiAgZW5kIHN1YnJvdXRpbmUgcHJpbnRfbWVzc2FnZQoKZW5kIG1vZHVsZSBmb3J0cmFuX21vZHVsZQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module fortran_module
  use iso_c_binding
  implicit none

contains

  subroutine print_message() bind(C, name=&quot;print_message&quot;)
    print *, &quot;Hello from Fortran!&quot;
  end subroutine print_message

end module fortran_module</pre></div><div class='content'><h4>Codi C (guardar com <code>call_fortran_function.c</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+Cgp2b2lkIHByaW50X21lc3NhZ2UoKTsKCmludCBtYWluKCkgewogICAgcHJpbnRfbWVzc2FnZSgpOwogICAgcmV0dXJuIDA7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

void print_message();

int main() {
    print_message();
    return 0;
}</pre></div><div class='content'><p>Per compilar i executar l'exemple anterior:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2ZvcnRyYW4gLWMgZm9ydHJhbl9mdW5jdGlvbi5mOTAKZ2NjIGNhbGxfZm9ydHJhbl9mdW5jdGlvbi5jIGZvcnRyYW5fZnVuY3Rpb24ubyAtbyBjYWxsX2ZvcnRyYW5fZnVuY3Rpb24KLi9jYWxsX2ZvcnRyYW5fZnVuY3Rpb24="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gfortran -c fortran_function.f90
gcc call_fortran_function.c fortran_function.o -o call_fortran_function
./call_fortran_function</pre></div><div class='content'></div><h1>Mapeig de Tipus de Dades</h1>
<div class='content'><p>Comprendre com els tipus de dades de Fortran es mapegen als tipus de dades de C és crucial per a la interoperabilitat. La següent taula resumeix els mapeigs comuns:</p>
<p>| Tipus de Dades Fortran | Tipus de Dades C | Constant ISO_C_BINDING |
|------------------------|------------------|------------------------|
| INTEGER                | int              | <code>c_int</code>                |
| REAL                   | float            | <code>c_float</code>              |
| DOUBLE PRECISION       | double           | <code>c_double</code>             |
| CHARACTER              | char             | <code>c_char</code>               |
| LOGICAL                | _Bool            | <code>c_bool</code>               |</p>
</div><h1>Exercicis</h1>
<div class='content'><ol>
<li><strong>Crida de Funció Simple</strong>: Escriu un programa de Fortran que cridi una funció de C per sumar dos enters i retorni el resultat.</li>
<li><strong>Intercanvi de Dades</strong>: Crea un programa de Fortran que passi una matriu a una funció de C, que modifiqui la matriu, i després imprimeixi la matriu modificada en Fortran.</li>
<li><strong>Programa de Llenguatge Mixt</strong>: Desenvolupa una petita aplicació on Fortran gestioni els càlculs numèrics i C gestioni les operacions d'entrada/sortida.</li>
</ol>
</div><h1>Conclusió</h1>
<div class='content'><p>Interfacing Fortran with C allows you to combine the computational power of Fortran with the versatility of C. By understanding the <code>ISO_C_BINDING</code> module, data type mappings, and how to call functions between the two languages, you can create powerful, interoperable applications. Practice with the provided examples and exercises to solidify your understanding and enhance your programming skills.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
