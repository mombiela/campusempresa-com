<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://campusempresa.com/azure/monitoring-and-diagnostics" id="lnk_lang_es" data-lang="es">Castellano</a></b>
				|
				<b id="lit_lang_ca">Catala</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció</h1>
<div class='content'><p>El monitoratge i el diagnòstic són aspectes crucials de la gestió d'aplicacions i serveis a Azure. Aquest tema et guiarà a través dels conceptes bàsics de monitoratge i diagnòstic, progressant cap a tècniques avançades i eines disponibles a Azure.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Monitoratge</strong>: El procés de recollir, analitzar i utilitzar informació per fer un seguiment del rendiment i la salut de les aplicacions i serveis.</li>
<li><strong>Diagnòstic</strong>: El procés d'identificar i resoldre problemes dins de les aplicacions i serveis.</li>
</ul>
</div><h1>Nivell Principiant</h1>
<div class='content'></div><h2>Azure Monitor</h2>
<div class='content'><p>Azure Monitor és una solució integral per recollir, analitzar i actuar sobre la telemetria dels teus entorns al núvol i locals.</p>
<ul>
<li><strong>Mètriques</strong>: Dades numèriques que descriuen el rendiment dels teus recursos.</li>
<li><strong>Registres</strong>: Registres detallats d'esdeveniments i activitats.</li>
</ul>
<h4>Configuració d'Azure Monitor</h4>
<ol>
<li>
<p><strong>Crear un Espai de Treball de Log Analytics</strong>:</p>
<pre><code class="language-azurecli">az monitor log-analytics workspace create --resource-group MyResourceGroup --workspace-name MyWorkspace
</code></pre>
</li>
<li>
<p><strong>Activar la Configuració de Diagnòstic</strong>:</p>
<pre><code class="language-azurecli">az monitor diagnostic-settings create --resource MyResource --resource-group MyResourceGroup --workspace MyWorkspace --name MyDiagnosticSetting --logs '[{&quot;category&quot;: &quot;Administrative&quot;, &quot;enabled&quot;: true}]'
</code></pre>
</li>
</ol>
</div><h2>Application Insights</h2>
<div class='content'><p>Application Insights és un servei extensible de Gestió del Rendiment d'Aplicacions (APM) per a desenvolupadors web.</p>
<ul>
<li><strong>Dades de Telemetria</strong>: Inclouen taxes de sol·licituds, temps de resposta i taxes de fallades.</li>
<li><strong>Mapa d'Aplicacions</strong>: Representació visual dels components de la teva aplicació.</li>
</ul>
<h4>Configuració d'Application Insights</h4>
<ol>
<li>
<p><strong>Crear un Recurs d'Application Insights</strong>:</p>
<pre><code class="language-azurecli">az monitor app-insights component create --app MyApp --location eastus --resource-group MyResourceGroup --application-type web
</code></pre>
</li>
<li>
<p><strong>Afegir la Clau d'Instrumentació a la Teva Aplicació</strong>:</p>
<pre><code class="language-csharp">// En el codi de la teva aplicació
var telemetryClient = new TelemetryClient(new TelemetryConfiguration(&quot;your_instrumentation_key&quot;));
telemetryClient.TrackEvent(&quot;Application Started&quot;);
</code></pre>
</li>
</ol>
</div><h1>Nivell Intermedi</h1>
<div class='content'></div><h2>Log Analytics</h2>
<div class='content'><p>Log Analytics és una eina al portal d'Azure utilitzada per editar i executar consultes de registres a partir de dades recollides per Azure Monitor.</p>
<ul>
<li><strong>Llenguatge de Consulta Kusto (KQL)</strong>: Utilitzat per escriure consultes de registres.</li>
<li><strong>Workbooks</strong>: Informes personalitzables que visualitzen dades de registres.</li>
</ul>
<h4>Escriure Consultes Bàsiques en KQL</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gT2J0ZW5pciB0b3RzIGVscyByZWdpc3RyZXMgZGUgbGVzIMO6bHRpbWVzIDI0IGhvcmVzCkF6dXJlQWN0aXZpdHkKfCB3aGVyZSBUaW1lR2VuZXJhdGVkID4gYWdvKDI0aCk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Obtenir tots els registres de les &uacute;ltimes 24 hores
AzureActivity
| where TimeGenerated &gt; ago(24h)</pre></div><div class='content'></div><h2>Alertes</h2>
<div class='content'><p>Les alertes t'avisen de condicions crítiques i potencialment prenen accions correctives.</p>
<ul>
<li><strong>Alertes de Mètriques</strong>: Activades quan una mètrica supera un llindar.</li>
<li><strong>Alertes de Registres</strong>: Activades en funció dels resultats de la consulta de registres.</li>
</ul>
<h4>Crear una Alerta de Mètrica</h4>
<ol>
<li><strong>Crear una Regla d'Alerta</strong>:
<pre><code class="language-azurecli">az monitor metrics alert create --name MyAlertRule --resource-group MyResourceGroup --scopes /subscriptions/{subscription-id}/resourceGroups/{resource-group}/providers/Microsoft.Compute/virtualMachines/{vm-name} --condition &quot;avg Percentage CPU &gt; 80&quot; --window-size 5m --evaluation-frequency 1m --action-group MyActionGroup
</code></pre>
</li>
</ol>
</div><h1>Nivell Avançat</h1>
<div class='content'></div><h2>Diagnòstic Avançat amb Azure Monitor</h2>
<div class='content'><ul>
<li><strong>Mètriques Personalitzades</strong>: Definir i recollir mètriques personalitzades per a les teves aplicacions.</li>
<li><strong>Traçabilitat Distribuïda</strong>: Fer un seguiment del flux de sol·licituds entre serveis.</li>
</ul>
<h4>Implementació de Mètriques Personalitzades</h4>
<ol>
<li><strong>Definir Mètriques Personalitzades</strong>:
<pre><code class="language-csharp">var telemetryClient = new TelemetryClient();
telemetryClient.GetMetric(&quot;CustomMetric&quot;).TrackValue(42);
</code></pre>
</li>
</ol>
</div><h2>Monitoratge de Xarxa</h2>
<div class='content'><p>Azure Network Watcher proporciona eines per monitorar, diagnosticar i obtenir informació sobre el rendiment i la salut de la teva xarxa.</p>
<ul>
<li><strong>Monitor de Connexió</strong>: Monitoritza la connectivitat entre recursos d'Azure.</li>
<li><strong>Monitor de Rendiment de Xarxa</strong>: Monitoritza el rendiment de la xarxa i detecta problemes de xarxa.</li>
</ul>
<h4>Configuració de Network Watcher</h4>
<ol>
<li>
<p><strong>Activar Network Watcher</strong>:</p>
<pre><code class="language-azurecli">az network watcher configure --locations eastus --resource-group NetworkWatcherRG --enabled
</code></pre>
</li>
<li>
<p><strong>Crear un Monitor de Connexió</strong>:</p>
<pre><code class="language-azurecli">az network watcher connection-monitor create --name MyConnectionMonitor --resource-group NetworkWatcherRG --location eastus --source-resource /subscriptions/{subscription-id}/resourceGroups/{resource-group}/providers/Microsoft.Compute/virtualMachines/{vm-name} --dest-address www.example.com --dest-port 80
</code></pre>
</li>
</ol>
</div><h1>Conclusió</h1>
<div class='content'><p>El monitoratge i diagnòstic a Azure són essencials per mantenir la salut i el rendiment de les teves aplicacions i serveis. Començant amb eines bàsiques com Azure Monitor i Application Insights, pots progressar cap a tècniques més avançades com les mètriques personalitzades i el monitoratge de xarxa. Dominant aquestes eines, pots assegurar-te que les teves aplicacions funcionin de manera fluida i eficient, i resoldre ràpidament qualsevol problema que sorgeixi.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
