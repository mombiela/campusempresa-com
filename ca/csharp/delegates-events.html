<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delegats i Esdeveniments en C#</title>

    <link rel="alternate" href="https://campusempresa.com/es/csharp/delegates-events" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/csharp/delegates-events" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/csharp/delegates-events" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/csharp/delegates-events" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='generics'>&#x25C4;Generics</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Delegats i Esdeveniments en C#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='lambda-expressions'>Expressions Lambda &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Els delegats i els esdeveniments són conceptes fonamentals en C# que permeten als desenvolupadors escriure codi flexible i reutilitzable. Aquest tema et guiarà des dels conceptes bàsics dels delegats fins a l'ús avançat dels esdeveniments.</p>
</div><h1>Què són els Delegats?</h1>
<div class='content'><p>Els delegats són punters de funció tipus-segurs que permeten passar mètodes com a paràmetres. S'utilitzen per definir mètodes de devolució de trucada i implementar la gestió d'esdeveniments.</p>
</div><h2>Conceptes Clau dels Delegats</h2>
<div class='content'><ul>
<li><strong>Tipus-Segur</strong>: Els delegats asseguren que la signatura del mètode coincideixi amb la signatura del delegat.</li>
<li><strong>Multicast</strong>: Un delegat pot contenir referències a múltiples mètodes.</li>
<li><strong>Mètodes Anònims i Expressions Lambda</strong>: Simplifiquen l'ús dels delegats.</li>
</ul>
</div><h2>Sintaxi Bàsica dels Delegats</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVjbGFyYXIgdW4gZGVsZWdhdApwdWJsaWMgZGVsZWdhdGUgdm9pZCBNeURlbGVnYXRlKHN0cmluZyBtZXNzYWdlKTsKCi8vIE3DqHRvZGUgcXVlIGNvaW5jaWRlaXggYW1iIGxhIHNpZ25hdHVyYSBkZWwgZGVsZWdhdApwdWJsaWMgdm9pZCBTaG93TWVzc2FnZShzdHJpbmcgbWVzc2FnZSkKewogICAgQ29uc29sZS5Xcml0ZUxpbmUobWVzc2FnZSk7Cn0KCi8vIFV0aWxpdHphbnQgZWwgZGVsZWdhdApNeURlbGVnYXRlIGRlbCA9IFNob3dNZXNzYWdlOwpkZWwoIkhlbGxvLCBXb3JsZCEiKTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Declarar un delegat
public delegate void MyDelegate(string message);

// M&egrave;tode que coincideix amb la signatura del delegat
public void ShowMessage(string message)
{
    Console.WriteLine(message);
}

// Utilitzant el delegat
MyDelegate del = ShowMessage;
del(&quot;Hello, World!&quot;);</pre></div><div class='content'></div><h2>Exemple: Utilitzant Delegats</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwoKcHVibGljIGRlbGVnYXRlIGludCBNYXRoT3BlcmF0aW9uKGludCB4LCBpbnQgeSk7CgpwdWJsaWMgY2xhc3MgUHJvZ3JhbQp7CiAgICBwdWJsaWMgc3RhdGljIGludCBBZGQoaW50IHgsIGludCB5KQogICAgewogICAgICAgIHJldHVybiB4ICsgeTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIGludCBNdWx0aXBseShpbnQgeCwgaW50IHkpCiAgICB7CiAgICAgICAgcmV0dXJuIHggKiB5OwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBNYWluKCkKICAgIHsKICAgICAgICBNYXRoT3BlcmF0aW9uIGFkZE9wZXJhdGlvbiA9IEFkZDsKICAgICAgICBNYXRoT3BlcmF0aW9uIG11bHRpcGx5T3BlcmF0aW9uID0gTXVsdGlwbHk7CgogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJBZGRpdGlvbjogIiArIGFkZE9wZXJhdGlvbig1LCAzKSk7IC8vIE91dHB1dDogOAogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJNdWx0aXBsaWNhdGlvbjogIiArIG11bHRpcGx5T3BlcmF0aW9uKDUsIDMpKTsgLy8gT3V0cHV0OiAxNQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;

public delegate int MathOperation(int x, int y);

public class Program
{
    public static int Add(int x, int y)
    {
        return x + y;
    }

    public static int Multiply(int x, int y)
    {
        return x * y;
    }

    public static void Main()
    {
        MathOperation addOperation = Add;
        MathOperation multiplyOperation = Multiply;

        Console.WriteLine(&quot;Addition: &quot; + addOperation(5, 3)); // Output: 8
        Console.WriteLine(&quot;Multiplication: &quot; + multiplyOperation(5, 3)); // Output: 15
    }
}</pre></div><div class='content'></div><h1>Què són els Esdeveniments?</h1>
<div class='content'><p>Els esdeveniments són una manera perquè una classe notifiqui a altres classes o objectes quan ocorre alguna cosa d'interès. Es basen en delegats i proporcionen una manera més estructurada de gestionar notificacions.</p>
</div><h2>Conceptes Clau dels Esdeveniments</h2>
<div class='content'><ul>
<li><strong>Model Publisher-Subscriber</strong>: La classe que envia la notificació s'anomena publisher, i les classes que reben la notificació s'anomenen subscribers.</li>
<li><strong>Gestors d'Esdeveniments</strong>: Mètodes que gestionen l'esdeveniment, seguint típicament la convenció de <code>void MethodName(object sender, EventArgs e)</code>.</li>
</ul>
</div><h2>Sintaxi Bàsica dels Esdeveniments</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVjbGFyYXIgdW4gZGVsZWdhdCBwZXIgYSBsJ2VzZGV2ZW5pbWVudApwdWJsaWMgZGVsZWdhdGUgdm9pZCBOb3RpZnlFdmVudEhhbmRsZXIob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpOwoKLy8gRGVjbGFyYXIgdW4gZXNkZXZlbmltZW50IGJhc2F0IGVuIGVsIGRlbGVnYXQKcHVibGljIGV2ZW50IE5vdGlmeUV2ZW50SGFuZGxlciBOb3RpZnlFdmVudDsKCi8vIE3DqHRvZGUgcGVyIGFpeGVjYXIgbCdlc2RldmVuaW1lbnQKcHJvdGVjdGVkIHZpcnR1YWwgdm9pZCBPbk5vdGlmeUV2ZW50KCkKewogICAgaWYgKE5vdGlmeUV2ZW50ICE9IG51bGwpCiAgICB7CiAgICAgICAgTm90aWZ5RXZlbnQodGhpcywgRXZlbnRBcmdzLkVtcHR5KTsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Declarar un delegat per a l'esdeveniment
public delegate void NotifyEventHandler(object sender, EventArgs e);

// Declarar un esdeveniment basat en el delegat
public event NotifyEventHandler NotifyEvent;

// M&egrave;tode per aixecar l'esdeveniment
protected virtual void OnNotifyEvent()
{
    if (NotifyEvent != null)
    {
        NotifyEvent(this, EventArgs.Empty);
    }
}</pre></div><div class='content'></div><h2>Exemple: Utilitzant Esdeveniments</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwoKcHVibGljIGNsYXNzIFB1Ymxpc2hlcgp7CiAgICAvLyBEZWNsYXJhciBlbCBkZWxlZ2F0CiAgICBwdWJsaWMgZGVsZWdhdGUgdm9pZCBOb3RpZnlFdmVudEhhbmRsZXIob2JqZWN0IHNlbmRlciwgRXZlbnRBcmdzIGUpOwoKICAgIC8vIERlY2xhcmFyIGwnZXNkZXZlbmltZW50CiAgICBwdWJsaWMgZXZlbnQgTm90aWZ5RXZlbnRIYW5kbGVyIE5vdGlmeUV2ZW50OwoKICAgIC8vIE3DqHRvZGUgcGVyIGFpeGVjYXIgbCdlc2RldmVuaW1lbnQKICAgIHB1YmxpYyB2b2lkIFJhaXNlRXZlbnQoKQogICAgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJFdmVudCBpcyBhYm91dCB0byBiZSByYWlzZWQuIik7CiAgICAgICAgT25Ob3RpZnlFdmVudCgpOwogICAgfQoKICAgIHByb3RlY3RlZCB2aXJ0dWFsIHZvaWQgT25Ob3RpZnlFdmVudCgpCiAgICB7CiAgICAgICAgaWYgKE5vdGlmeUV2ZW50ICE9IG51bGwpCiAgICAgICAgewogICAgICAgICAgICBOb3RpZnlFdmVudCh0aGlzLCBFdmVudEFyZ3MuRW1wdHkpOwogICAgICAgIH0KICAgIH0KfQoKcHVibGljIGNsYXNzIFN1YnNjcmliZXIKewogICAgcHVibGljIHZvaWQgT25Ob3RpZnlFdmVudChvYmplY3Qgc2VuZGVyLCBFdmVudEFyZ3MgZSkKICAgIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiRXZlbnQgcmVjZWl2ZWQgYnkgU3Vic2NyaWJlci4iKTsKICAgIH0KfQoKcHVibGljIGNsYXNzIFByb2dyYW0KewogICAgcHVibGljIHN0YXRpYyB2b2lkIE1haW4oKQogICAgewogICAgICAgIFB1Ymxpc2hlciBwdWJsaXNoZXIgPSBuZXcgUHVibGlzaGVyKCk7CiAgICAgICAgU3Vic2NyaWJlciBzdWJzY3JpYmVyID0gbmV3IFN1YnNjcmliZXIoKTsKCiAgICAgICAgLy8gU3Vic2NyaXVyZSdzIGEgbCdlc2RldmVuaW1lbnQKICAgICAgICBwdWJsaXNoZXIuTm90aWZ5RXZlbnQgKz0gc3Vic2NyaWJlci5Pbk5vdGlmeUV2ZW50OwoKICAgICAgICAvLyBBaXhlY2FyIGwnZXNkZXZlbmltZW50CiAgICAgICAgcHVibGlzaGVyLlJhaXNlRXZlbnQoKTsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;

public class Publisher
{
    // Declarar el delegat
    public delegate void NotifyEventHandler(object sender, EventArgs e);

    // Declarar l'esdeveniment
    public event NotifyEventHandler NotifyEvent;

    // M&egrave;tode per aixecar l'esdeveniment
    public void RaiseEvent()
    {
        Console.WriteLine(&quot;Event is about to be raised.&quot;);
        OnNotifyEvent();
    }

    protected virtual void OnNotifyEvent()
    {
        if (NotifyEvent != null)
        {
            NotifyEvent(this, EventArgs.Empty);
        }
    }
}

public class Subscriber
{
    public void OnNotifyEvent(object sender, EventArgs e)
    {
        Console.WriteLine(&quot;Event received by Subscriber.&quot;);
    }
}

public class Program
{
    public static void Main()
    {
        Publisher publisher = new Publisher();
        Subscriber subscriber = new Subscriber();

        // Subscriure's a l'esdeveniment
        publisher.NotifyEvent += subscriber.OnNotifyEvent;

        // Aixecar l'esdeveniment
        publisher.RaiseEvent();
    }
}</pre></div><div class='content'></div><h1>Ús Avançat dels Delegats i Esdeveniments</h1>
<div class='content'></div><h2>Delegats Multicast</h2>
<div class='content'><p>Un delegat multicast pot contenir referències a més d'un mètode. Quan s'invoca el delegat, es criden tots els mètodes als quals fa referència.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGRlbGVnYXRlIHZvaWQgTXVsdGlEZWxlZ2F0ZSgpOwoKcHVibGljIGNsYXNzIFByb2dyYW0KewogICAgcHVibGljIHN0YXRpYyB2b2lkIE1ldGhvZDEoKQogICAgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJNZXRob2QxIGNhbGxlZC4iKTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgTWV0aG9kMigpCiAgICB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIk1ldGhvZDIgY2FsbGVkLiIpOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBNYWluKCkKICAgIHsKICAgICAgICBNdWx0aURlbGVnYXRlIGRlbCA9IE1ldGhvZDE7CiAgICAgICAgZGVsICs9IE1ldGhvZDI7CgogICAgICAgIGRlbCgpOyAvLyBPdXRwdXQ6IE1ldGhvZDEgY2FsbGVkLiBNZXRob2QyIGNhbGxlZC4KICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public delegate void MultiDelegate();

public class Program
{
    public static void Method1()
    {
        Console.WriteLine(&quot;Method1 called.&quot;);
    }

    public static void Method2()
    {
        Console.WriteLine(&quot;Method2 called.&quot;);
    }

    public static void Main()
    {
        MultiDelegate del = Method1;
        del += Method2;

        del(); // Output: Method1 called. Method2 called.
    }
}</pre></div><div class='content'></div><h2>Accessors d'Esdeveniments</h2>
<div class='content'><p>Els accessors d'esdeveniments personalitzats permeten més control sobre com es subscriuen i es desubscriuen els esdeveniments.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIEN1c3RvbUV2ZW50CnsKICAgIHByaXZhdGUgRXZlbnRIYW5kbGVyIF9teUV2ZW50OwoKICAgIHB1YmxpYyBldmVudCBFdmVudEhhbmRsZXIgTXlFdmVudAogICAgewogICAgICAgIGFkZAogICAgICAgIHsKICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIlN1YnNjcmliZXIgYWRkZWQuIik7CiAgICAgICAgICAgIF9teUV2ZW50ICs9IHZhbHVlOwogICAgICAgIH0KICAgICAgICByZW1vdmUKICAgICAgICB7CiAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJTdWJzY3JpYmVyIHJlbW92ZWQuIik7CiAgICAgICAgICAgIF9teUV2ZW50IC09IHZhbHVlOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgdm9pZCBSYWlzZUV2ZW50KCkKICAgIHsKICAgICAgICBfbXlFdmVudD8uSW52b2tlKHRoaXMsIEV2ZW50QXJncy5FbXB0eSk7CiAgICB9Cn0KCnB1YmxpYyBjbGFzcyBQcm9ncmFtCnsKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBNYWluKCkKICAgIHsKICAgICAgICBDdXN0b21FdmVudCBjdXN0b21FdmVudCA9IG5ldyBDdXN0b21FdmVudCgpOwogICAgICAgIEV2ZW50SGFuZGxlciBoYW5kbGVyID0gKHNlbmRlciwgZSkgPT4gQ29uc29sZS5Xcml0ZUxpbmUoIkV2ZW50IGhhbmRsZWQuIik7CgogICAgICAgIGN1c3RvbUV2ZW50Lk15RXZlbnQgKz0gaGFuZGxlcjsKICAgICAgICBjdXN0b21FdmVudC5SYWlzZUV2ZW50KCk7CgogICAgICAgIGN1c3RvbUV2ZW50Lk15RXZlbnQgLT0gaGFuZGxlcjsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class CustomEvent
{
    private EventHandler _myEvent;

    public event EventHandler MyEvent
    {
        add
        {
            Console.WriteLine(&quot;Subscriber added.&quot;);
            _myEvent += value;
        }
        remove
        {
            Console.WriteLine(&quot;Subscriber removed.&quot;);
            _myEvent -= value;
        }
    }

    public void RaiseEvent()
    {
        _myEvent?.Invoke(this, EventArgs.Empty);
    }
}

public class Program
{
    public static void Main()
    {
        CustomEvent customEvent = new CustomEvent();
        EventHandler handler = (sender, e) =&gt; Console.WriteLine(&quot;Event handled.&quot;);

        customEvent.MyEvent += handler;
        customEvent.RaiseEvent();

        customEvent.MyEvent -= handler;
    }
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Els delegats i els esdeveniments són característiques poderoses en C# que permeten codi flexible i mantenible. Els delegats permeten passar mètodes com a paràmetres, mentre que els esdeveniments proporcionen una manera estructurada de gestionar notificacions entre objectes. Entendre aquests conceptes és crucial per desenvolupar aplicacions robustes en C#. Practica utilitzant delegats i esdeveniments en diversos escenaris per convertir-te en un expert en el seu ús.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='generics'>&#x25C4;Generics</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Delegats i Esdeveniments en C#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='lambda-expressions'>Expressions Lambda &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
