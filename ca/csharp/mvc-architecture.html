<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arquitectura MVC en C#</title>

    <link rel="alternate" href="https://campusempresa.com/es/csharp/mvc-architecture" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/csharp/mvc-architecture" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/csharp/mvc-architecture" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/csharp/mvc-architecture" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció a l'Arquitectura MVC</h1>
<div class='content'><p>MVC (Model-View-Controller) és un patró de disseny que separa una aplicació en tres components principals: Model, Vista i Controlador. Aquesta separació ajuda a gestionar aplicacions complexes dividint les responsabilitats entre diferents parts de l'aplicació.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Model</strong>: Representa les dades i la lògica de negoci de l'aplicació. Gestiona directament les dades, la lògica i les regles de l'aplicació.</li>
<li><strong>Vista</strong>: Representa els components de la interfície d'usuari. Mostra les dades del Model a l'usuari i envia les ordres de l'usuari al Controlador.</li>
<li><strong>Controlador</strong>: Actua com a intermediari entre el Model i la Vista. Escolta les entrades de la Vista, les processa (utilitzant el Model) i retorna la sortida a la Vista.</li>
</ul>
</div><h1>Configuració d'un Projecte MVC en C#</h1>
<div class='content'><p>Per començar a treballar amb MVC en C#, cal configurar un projecte ASP.NET MVC. Aquests són els passos:</p>
<ol>
<li>Obre Visual Studio.</li>
<li>Crea un nou projecte.</li>
<li>Selecciona &quot;ASP.NET Core Web Application&quot;.</li>
<li>Tria la plantilla &quot;Web Application (Model-View-Controller)&quot;.</li>
</ol>
</div><h1>Comprensió dels Components</h1>
<div class='content'></div><h2>Model</h2>
<div class='content'><p>El Model representa les dades i les regles de negoci de l'aplicació. En C#, un Model és típicament una classe que conté propietats i mètodes per gestionar dades.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIFByb2R1Y3QKewogICAgcHVibGljIGludCBJZCB7IGdldDsgc2V0OyB9CiAgICBwdWJsaWMgc3RyaW5nIE5hbWUgeyBnZXQ7IHNldDsgfQogICAgcHVibGljIGRlY2ltYWwgUHJpY2UgeyBnZXQ7IHNldDsgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
}</pre></div><div class='content'></div><h2>Vista</h2>
<div class='content'><p>La Vista és responsable de mostrar les dades a l'usuari. En ASP.NET MVC, les Vistes són típicament fitxers Razor (.cshtml) que combinen HTML i codi C#.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QG1vZGVsIElFbnVtZXJhYmxlPFByb2R1Y3Q+Cgo8IURPQ1RZUEUgaHRtbD4KPGh0bWw+CjxoZWFkPgogICAgPHRpdGxlPkxsaXN0YSBkZSBQcm9kdWN0ZXM8L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGgxPlByb2R1Y3RlczwvaDE+CiAgICA8dWw+CiAgICAgICAgQGZvcmVhY2ggKHZhciBwcm9kdWN0IGluIE1vZGVsKQogICAgICAgIHsKICAgICAgICAgICAgPGxpPkBwcm9kdWN0Lk5hbWUgLSBAcHJvZHVjdC5QcmljZTwvbGk+CiAgICAgICAgfQogICAgPC91bD4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@model IEnumerable&lt;Product&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Llista de Productes&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Productes&lt;/h1&gt;
    &lt;ul&gt;
        @foreach (var product in Model)
        {
            &lt;li&gt;@product.Name - @product.Price&lt;/li&gt;
        }
    &lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h2>Controlador</h2>
<div class='content'><p>El Controlador gestiona les entrades i interaccions de l'usuari. Processa les entrades, interactua amb el Model i selecciona la Vista per renderitzar.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIFByb2R1Y3RDb250cm9sbGVyIDogQ29udHJvbGxlcgp7CiAgICBwdWJsaWMgSUFjdGlvblJlc3VsdCBJbmRleCgpCiAgICB7CiAgICAgICAgdmFyIHByb2R1Y3RzID0gbmV3IExpc3Q8UHJvZHVjdD4KICAgICAgICB7CiAgICAgICAgICAgIG5ldyBQcm9kdWN0IHsgSWQgPSAxLCBOYW1lID0gIkxhcHRvcCIsIFByaWNlID0gOTk5Ljk5TSB9LAogICAgICAgICAgICBuZXcgUHJvZHVjdCB7IElkID0gMiwgTmFtZSA9ICJTbWFydHBob25lIiwgUHJpY2UgPSA0OTkuOTlNIH0KICAgICAgICB9OwoKICAgICAgICByZXR1cm4gVmlldyhwcm9kdWN0cyk7CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class ProductController : Controller
{
    public IActionResult Index()
    {
        var products = new List&lt;Product&gt;
        {
            new Product { Id = 1, Name = &quot;Laptop&quot;, Price = 999.99M },
            new Product { Id = 2, Name = &quot;Smartphone&quot;, Price = 499.99M }
        };

        return View(products);
    }
}</pre></div><div class='content'></div><h1>Exemple: Creació d'una Aplicació MVC Simple</h1>
<div class='content'></div><h2>Pas 1: Crear el Model</h2>
<div class='content'><p>Crea una classe <code>Product</code> a la carpeta Models.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIFByb2R1Y3QKewogICAgcHVibGljIGludCBJZCB7IGdldDsgc2V0OyB9CiAgICBwdWJsaWMgc3RyaW5nIE5hbWUgeyBnZXQ7IHNldDsgfQogICAgcHVibGljIGRlY2ltYWwgUHJpY2UgeyBnZXQ7IHNldDsgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }
}</pre></div><div class='content'></div><h2>Pas 2: Crear el Controlador</h2>
<div class='content'><p>Crea un <code>ProductController</code> a la carpeta Controllers.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIFByb2R1Y3RDb250cm9sbGVyIDogQ29udHJvbGxlcgp7CiAgICBwdWJsaWMgSUFjdGlvblJlc3VsdCBJbmRleCgpCiAgICB7CiAgICAgICAgdmFyIHByb2R1Y3RzID0gbmV3IExpc3Q8UHJvZHVjdD4KICAgICAgICB7CiAgICAgICAgICAgIG5ldyBQcm9kdWN0IHsgSWQgPSAxLCBOYW1lID0gIkxhcHRvcCIsIFByaWNlID0gOTk5Ljk5TSB9LAogICAgICAgICAgICBuZXcgUHJvZHVjdCB7IElkID0gMiwgTmFtZSA9ICJTbWFydHBob25lIiwgUHJpY2UgPSA0OTkuOTlNIH0KICAgICAgICB9OwoKICAgICAgICByZXR1cm4gVmlldyhwcm9kdWN0cyk7CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class ProductController : Controller
{
    public IActionResult Index()
    {
        var products = new List&lt;Product&gt;
        {
            new Product { Id = 1, Name = &quot;Laptop&quot;, Price = 999.99M },
            new Product { Id = 2, Name = &quot;Smartphone&quot;, Price = 499.99M }
        };

        return View(products);
    }
}</pre></div><div class='content'></div><h2>Pas 3: Crear la Vista</h2>
<div class='content'><p>Crea un fitxer <code>Index.cshtml</code> a la carpeta Views/Product.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QG1vZGVsIElFbnVtZXJhYmxlPFByb2R1Y3Q+Cgo8IURPQ1RZUEUgaHRtbD4KPGh0bWw+CjxoZWFkPgogICAgPHRpdGxlPkxsaXN0YSBkZSBQcm9kdWN0ZXM8L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGgxPlByb2R1Y3RlczwvaDE+CiAgICA8dWw+CiAgICAgICAgQGZvcmVhY2ggKHZhciBwcm9kdWN0IGluIE1vZGVsKQogICAgICAgIHsKICAgICAgICAgICAgPGxpPkBwcm9kdWN0Lk5hbWUgLSBAcHJvZHVjdC5QcmljZTwvbGk+CiAgICAgICAgfQogICAgPC91bD4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@model IEnumerable&lt;Product&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Llista de Productes&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Productes&lt;/h1&gt;
    &lt;ul&gt;
        @foreach (var product in Model)
        {
            &lt;li&gt;@product.Name - @product.Price&lt;/li&gt;
        }
    &lt;/ul&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h1>Temes Avançats</h1>
<div class='content'></div><h2>Injecció de Dependències</h2>
<div class='content'><p>La Injecció de Dependències (DI) és una tècnica per aconseguir la Inversió de Control (IoC) entre classes i les seves dependències. ASP.NET Core té suport integrat per a DI.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGludGVyZmFjZSBJUHJvZHVjdFNlcnZpY2UKewogICAgSUVudW1lcmFibGU8UHJvZHVjdD4gR2V0UHJvZHVjdHMoKTsKfQoKcHVibGljIGNsYXNzIFByb2R1Y3RTZXJ2aWNlIDogSVByb2R1Y3RTZXJ2aWNlCnsKICAgIHB1YmxpYyBJRW51bWVyYWJsZTxQcm9kdWN0PiBHZXRQcm9kdWN0cygpCiAgICB7CiAgICAgICAgcmV0dXJuIG5ldyBMaXN0PFByb2R1Y3Q+CiAgICAgICAgewogICAgICAgICAgICBuZXcgUHJvZHVjdCB7IElkID0gMSwgTmFtZSA9ICJMYXB0b3AiLCBQcmljZSA9IDk5OS45OU0gfSwKICAgICAgICAgICAgbmV3IFByb2R1Y3QgeyBJZCA9IDIsIE5hbWUgPSAiU21hcnRwaG9uZSIsIFByaWNlID0gNDk5Ljk5TSB9CiAgICAgICAgfTsKICAgIH0KfQoKcHVibGljIGNsYXNzIFByb2R1Y3RDb250cm9sbGVyIDogQ29udHJvbGxlcgp7CiAgICBwcml2YXRlIHJlYWRvbmx5IElQcm9kdWN0U2VydmljZSBfcHJvZHVjdFNlcnZpY2U7CgogICAgcHVibGljIFByb2R1Y3RDb250cm9sbGVyKElQcm9kdWN0U2VydmljZSBwcm9kdWN0U2VydmljZSkKICAgIHsKICAgICAgICBfcHJvZHVjdFNlcnZpY2UgPSBwcm9kdWN0U2VydmljZTsKICAgIH0KCiAgICBwdWJsaWMgSUFjdGlvblJlc3VsdCBJbmRleCgpCiAgICB7CiAgICAgICAgdmFyIHByb2R1Y3RzID0gX3Byb2R1Y3RTZXJ2aWNlLkdldFByb2R1Y3RzKCk7CiAgICAgICAgcmV0dXJuIFZpZXcocHJvZHVjdHMpOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public interface IProductService
{
    IEnumerable&lt;Product&gt; GetProducts();
}

public class ProductService : IProductService
{
    public IEnumerable&lt;Product&gt; GetProducts()
    {
        return new List&lt;Product&gt;
        {
            new Product { Id = 1, Name = &quot;Laptop&quot;, Price = 999.99M },
            new Product { Id = 2, Name = &quot;Smartphone&quot;, Price = 499.99M }
        };
    }
}

public class ProductController : Controller
{
    private readonly IProductService _productService;

    public ProductController(IProductService productService)
    {
        _productService = productService;
    }

    public IActionResult Index()
    {
        var products = _productService.GetProducts();
        return View(products);
    }
}</pre></div><div class='content'></div><h2>Proves Unitàries</h2>
<div class='content'><p>Les proves unitàries en aplicacions MVC asseguren que cada component funcioni com s'espera. Pots utilitzar frameworks com xUnit o NUnit per a les proves.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIFByb2R1Y3RDb250cm9sbGVyVGVzdHMKewogICAgW0ZhY3RdCiAgICBwdWJsaWMgdm9pZCBJbmRleF9SZXR1cm5zQVZpZXdSZXN1bHRfV2l0aEFMaXN0T2ZQcm9kdWN0cygpCiAgICB7CiAgICAgICAgLy8gQXJyYW5nZQogICAgICAgIHZhciBtb2NrU2VydmljZSA9IG5ldyBNb2NrPElQcm9kdWN0U2VydmljZT4oKTsKICAgICAgICBtb2NrU2VydmljZS5TZXR1cChzZXJ2aWNlID0+IHNlcnZpY2UuR2V0UHJvZHVjdHMoKSkuUmV0dXJucyhHZXRUZXN0UHJvZHVjdHMoKSk7CiAgICAgICAgdmFyIGNvbnRyb2xsZXIgPSBuZXcgUHJvZHVjdENvbnRyb2xsZXIobW9ja1NlcnZpY2UuT2JqZWN0KTsKCiAgICAgICAgLy8gQWN0CiAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnRyb2xsZXIuSW5kZXgoKTsKCiAgICAgICAgLy8gQXNzZXJ0CiAgICAgICAgdmFyIHZpZXdSZXN1bHQgPSBBc3NlcnQuSXNUeXBlPFZpZXdSZXN1bHQ+KHJlc3VsdCk7CiAgICAgICAgdmFyIG1vZGVsID0gQXNzZXJ0LklzQXNzaWduYWJsZUZyb208SUVudW1lcmFibGU8UHJvZHVjdD4+KHZpZXdSZXN1bHQuVmlld0RhdGEuTW9kZWwpOwogICAgICAgIEFzc2VydC5FcXVhbCgyLCBtb2RlbC5Db3VudCgpKTsKICAgIH0KCiAgICBwcml2YXRlIExpc3Q8UHJvZHVjdD4gR2V0VGVzdFByb2R1Y3RzKCkKICAgIHsKICAgICAgICByZXR1cm4gbmV3IExpc3Q8UHJvZHVjdD4KICAgICAgICB7CiAgICAgICAgICAgIG5ldyBQcm9kdWN0IHsgSWQgPSAxLCBOYW1lID0gIkxhcHRvcCIsIFByaWNlID0gOTk5Ljk5TSB9LAogICAgICAgICAgICBuZXcgUHJvZHVjdCB7IElkID0gMiwgTmFtZSA9ICJTbWFydHBob25lIiwgUHJpY2UgPSA0OTkuOTlNIH0KICAgICAgICB9OwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class ProductControllerTests
{
    [Fact]
    public void Index_ReturnsAViewResult_WithAListOfProducts()
    {
        // Arrange
        var mockService = new Mock&lt;IProductService&gt;();
        mockService.Setup(service =&gt; service.GetProducts()).Returns(GetTestProducts());
        var controller = new ProductController(mockService.Object);

        // Act
        var result = controller.Index();

        // Assert
        var viewResult = Assert.IsType&lt;ViewResult&gt;(result);
        var model = Assert.IsAssignableFrom&lt;IEnumerable&lt;Product&gt;&gt;(viewResult.ViewData.Model);
        Assert.Equal(2, model.Count());
    }

    private List&lt;Product&gt; GetTestProducts()
    {
        return new List&lt;Product&gt;
        {
            new Product { Id = 1, Name = &quot;Laptop&quot;, Price = 999.99M },
            new Product { Id = 2, Name = &quot;Smartphone&quot;, Price = 499.99M }
        };
    }
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>L'arquitectura MVC és un patró de disseny potent que ajuda a organitzar i gestionar aplicacions complexes separant les preocupacions en Model, Vista i Controlador. Comprenent i implementant MVC en C#, pots crear aplicacions escalables, mantenibles i testables. Aquest tema ha cobert els conceptes bàsics de la configuració d'un projecte MVC, la creació de Models, Vistes i Controladors, i ha tocat temes avançats com la Injecció de Dependències i les Proves Unitàries.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
