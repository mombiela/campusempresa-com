<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proves unitàries en C#</title>

    <link rel="alternate" href="https://campusempresa.com/es/csharp/unit-testing" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/csharp/unit-testing" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/csharp/unit-testing" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/csharp/unit-testing" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='design-patterns'>&#x25C4;Patrons de Disseny</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proves unitàries en C#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integration-testing'>Proves d'Integració &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Les proves unitàries són un aspecte crucial del desenvolupament de programari que assegura que les unitats individuals de codi funcionin com s'espera. En aquesta secció, cobrirem els conceptes bàsics de les proves unitàries en C#, progressant des de conceptes per a principiants fins a conceptes avançats.</p>
</div><h1>Introducció a les proves unitàries</h1>
<div class='content'><p>Les proves unitàries impliquen provar components o funcions individuals d'un programa per assegurar-se que funcionen correctament. L'objectiu principal és validar que cada unitat del programari funcioni segons el disseny.</p>
</div><h2>Conceptes clau</h2>
<div class='content'><ul>
<li><strong>Unitat</strong>: La part més petita testable d'una aplicació, com una funció o mètode.</li>
<li><strong>Cas de prova</strong>: Un conjunt de condicions o variables sota les quals un provador determina si una unitat de codi funciona correctament.</li>
<li><strong>Suite de proves</strong>: Una col·lecció de casos de prova destinada a provar un comportament o un conjunt de comportaments de programes de programari.</li>
<li><strong>Mocking</strong>: Crear una versió falsa d'un objecte per simular el comportament dels objectes reals.</li>
</ul>
</div><h1>Configuració de les proves unitàries en C#</h1>
<div class='content'><p>Per començar amb les proves unitàries en C#, cal configurar l'entorn de desenvolupament. Utilitzarem Visual Studio i el framework NUnit per als nostres exemples.</p>
</div><h2>Instal·lació de NUnit</h2>
<div class='content'><ol>
<li>Obre Visual Studio.</li>
<li>Crea un nou projecte de C# o obre'n un d'existent.</li>
<li>Obre el Gestor de Paquets NuGet (Eines &gt; Gestor de Paquets NuGet &gt; Gestionar Paquets NuGet per a la Solució).</li>
<li>Cerca &quot;NUnit&quot; i instal·la'l.</li>
<li>També instal·la &quot;NUnit3TestAdapter&quot; per integrar NUnit amb l'explorador de proves de Visual Studio.</li>
</ol>
</div><h1>Escriure la teva primera prova unitària</h1>
<div class='content'><p>Escrivim una prova unitària simple per a un mètode que suma dos números.</p>
</div><h2>Codi d'exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ2FsY3VsYXRvci5jcwpwdWJsaWMgY2xhc3MgQ2FsY3VsYXRvcgp7CiAgICBwdWJsaWMgaW50IEFkZChpbnQgYSwgaW50IGIpCiAgICB7CiAgICAgICAgcmV0dXJuIGEgKyBiOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Calculator.cs
public class Calculator
{
    public int Add(int a, int b)
    {
        return a + b;
    }
}</pre></div><div class='content'></div><h2>Escriure la prova</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ2FsY3VsYXRvclRlc3RzLmNzCnVzaW5nIE5Vbml0LkZyYW1ld29yazsKCltUZXN0Rml4dHVyZV0KcHVibGljIGNsYXNzIENhbGN1bGF0b3JUZXN0cwp7CiAgICBbVGVzdF0KICAgIHB1YmxpYyB2b2lkIEFkZF9XaGVuQ2FsbGVkX1JldHVybnNTdW1PZkFyZ3VtZW50cygpCiAgICB7CiAgICAgICAgLy8gQXJyYW5nZQogICAgICAgIHZhciBjYWxjdWxhdG9yID0gbmV3IENhbGN1bGF0b3IoKTsKCiAgICAgICAgLy8gQWN0CiAgICAgICAgdmFyIHJlc3VsdCA9IGNhbGN1bGF0b3IuQWRkKDEsIDIpOwoKICAgICAgICAvLyBBc3NlcnQKICAgICAgICBBc3NlcnQuQXJlRXF1YWwoMywgcmVzdWx0KTsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// CalculatorTests.cs
using NUnit.Framework;

[TestFixture]
public class CalculatorTests
{
    [Test]
    public void Add_WhenCalled_ReturnsSumOfArguments()
    {
        // Arrange
        var calculator = new Calculator();

        // Act
        var result = calculator.Add(1, 2);

        // Assert
        Assert.AreEqual(3, result);
    }
}</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>Arrange</strong>: Configura qualsevol objecte o variable necessària.</li>
<li><strong>Act</strong>: Crida el mètode que s'està provant.</li>
<li><strong>Assert</strong>: Verifica que la sortida del mètode sigui la esperada.</li>
</ul>
</div><h1>Conceptes avançats de proves unitàries</h1>
<div class='content'><p>A mesura que et sentis més còmode amb les proves unitàries bàsiques, pots explorar conceptes més avançats.</p>
</div><h2>Mocking de dependències</h2>
<div class='content'><p>Quan una classe depèn d'altres classes, pots utilitzar mocking per aïllar la unitat que s'està provant.</p>
<h4>Exemple amb Moq</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gU2VydmljZS5jcwpwdWJsaWMgY2xhc3MgU2VydmljZQp7CiAgICBwcml2YXRlIHJlYWRvbmx5IElSZXBvc2l0b3J5IF9yZXBvc2l0b3J5OwoKICAgIHB1YmxpYyBTZXJ2aWNlKElSZXBvc2l0b3J5IHJlcG9zaXRvcnkpCiAgICB7CiAgICAgICAgX3JlcG9zaXRvcnkgPSByZXBvc2l0b3J5OwogICAgfQoKICAgIHB1YmxpYyBzdHJpbmcgR2V0RGF0YShpbnQgaWQpCiAgICB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVwb3NpdG9yeS5HZXREYXRhQnlJZChpZCk7CiAgICAgICAgcmV0dXJuIGRhdGEuVG9VcHBlcigpOwogICAgfQp9CgovLyBJUmVwb3NpdG9yeS5jcwpwdWJsaWMgaW50ZXJmYWNlIElSZXBvc2l0b3J5CnsKICAgIHN0cmluZyBHZXREYXRhQnlJZChpbnQgaWQpOwp9CgovLyBTZXJ2aWNlVGVzdHMuY3MKdXNpbmcgTW9xOwp1c2luZyBOVW5pdC5GcmFtZXdvcms7CgpbVGVzdEZpeHR1cmVdCnB1YmxpYyBjbGFzcyBTZXJ2aWNlVGVzdHMKewogICAgW1Rlc3RdCiAgICBwdWJsaWMgdm9pZCBHZXREYXRhX1doZW5DYWxsZWRfUmV0dXJuc1VwcGVyQ2FzZURhdGEoKQogICAgewogICAgICAgIC8vIEFycmFuZ2UKICAgICAgICB2YXIgbW9ja1JlcG9zaXRvcnkgPSBuZXcgTW9jazxJUmVwb3NpdG9yeT4oKTsKICAgICAgICBtb2NrUmVwb3NpdG9yeS5TZXR1cChyZXBvID0+IHJlcG8uR2V0RGF0YUJ5SWQoSXQuSXNBbnk8aW50PigpKSkuUmV0dXJucygiZGF0YSIpOwogICAgICAgIHZhciBzZXJ2aWNlID0gbmV3IFNlcnZpY2UobW9ja1JlcG9zaXRvcnkuT2JqZWN0KTsKCiAgICAgICAgLy8gQWN0CiAgICAgICAgdmFyIHJlc3VsdCA9IHNlcnZpY2UuR2V0RGF0YSgxKTsKCiAgICAgICAgLy8gQXNzZXJ0CiAgICAgICAgQXNzZXJ0LkFyZUVxdWFsKCJEQVRBIiwgcmVzdWx0KTsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Service.cs
public class Service
{
    private readonly IRepository _repository;

    public Service(IRepository repository)
    {
        _repository = repository;
    }

    public string GetData(int id)
    {
        var data = _repository.GetDataById(id);
        return data.ToUpper();
    }
}

// IRepository.cs
public interface IRepository
{
    string GetDataById(int id);
}

// ServiceTests.cs
using Moq;
using NUnit.Framework;

[TestFixture]
public class ServiceTests
{
    [Test]
    public void GetData_WhenCalled_ReturnsUpperCaseData()
    {
        // Arrange
        var mockRepository = new Mock&lt;IRepository&gt;();
        mockRepository.Setup(repo =&gt; repo.GetDataById(It.IsAny&lt;int&gt;())).Returns(&quot;data&quot;);
        var service = new Service(mockRepository.Object);

        // Act
        var result = service.GetData(1);

        // Assert
        Assert.AreEqual(&quot;DATA&quot;, result);
    }
}</pre></div><div class='content'></div><h2>Proves parametritzades</h2>
<div class='content'><p>NUnit et permet executar la mateixa prova amb diferents entrades utilitzant proves parametritzades.</p>
<h4>Exemple</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("W1Rlc3RGaXh0dXJlXQpwdWJsaWMgY2xhc3MgQ2FsY3VsYXRvclRlc3RzCnsKICAgIFtUZXN0Q2FzZSgxLCAyLCAzKV0KICAgIFtUZXN0Q2FzZSgtMSwgLTEsIC0yKV0KICAgIFtUZXN0Q2FzZSgwLCAwLCAwKV0KICAgIHB1YmxpYyB2b2lkIEFkZF9XaGVuQ2FsbGVkX1JldHVybnNTdW1PZkFyZ3VtZW50cyhpbnQgYSwgaW50IGIsIGludCBleHBlY3RlZFJlc3VsdCkKICAgIHsKICAgICAgICAvLyBBcnJhbmdlCiAgICAgICAgdmFyIGNhbGN1bGF0b3IgPSBuZXcgQ2FsY3VsYXRvcigpOwoKICAgICAgICAvLyBBY3QKICAgICAgICB2YXIgcmVzdWx0ID0gY2FsY3VsYXRvci5BZGQoYSwgYik7CgogICAgICAgIC8vIEFzc2VydAogICAgICAgIEFzc2VydC5BcmVFcXVhbChleHBlY3RlZFJlc3VsdCwgcmVzdWx0KTsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>[TestFixture]
public class CalculatorTests
{
    [TestCase(1, 2, 3)]
    [TestCase(-1, -1, -2)]
    [TestCase(0, 0, 0)]
    public void Add_WhenCalled_ReturnsSumOfArguments(int a, int b, int expectedResult)
    {
        // Arrange
        var calculator = new Calculator();

        // Act
        var result = calculator.Add(a, b);

        // Assert
        Assert.AreEqual(expectedResult, result);
    }
}</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>Les proves unitàries són una pràctica essencial en el desenvolupament de programari que ajuda a assegurar la qualitat i la fiabilitat del codi. Començant amb proves bàsiques i incorporant gradualment tècniques avançades com el mocking i les proves parametritzades, pots crear una suite robusta de proves per a les teves aplicacions en C#. Recorda:</p>
<ul>
<li>Escriure casos de prova clars i concisos.</li>
<li>Utilitzar mocking per aïllar unitats de codi.</li>
<li>Aprofitar les proves parametritzades per a l'eficiència.</li>
</ul>
<p>Amb pràctica consistent, les proves unitàries es convertiran en una part integral del teu flux de treball de desenvolupament, conduint a un codi més mantenible i lliure d'errors.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='design-patterns'>&#x25C4;Patrons de Disseny</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proves unitàries en C#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integration-testing'>Proves d'Integració &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
