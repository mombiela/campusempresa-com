<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ús de Core Data</title>

    <link rel="alternate" href="https://campusempresa.com/es/xcode/using-core-data" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/xcode/using-core-data" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/xcode/using-core-data" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/xcode/using-core-data" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='creating-custom-ui-components'>&#x25C4; Creant Components UI Personalitzats</a></div><div class='col-6 text-end'><a href='integrating-third-party-libraries'>Integrant Llibreries de Tercers &#x25BA;</a></div></div><div class='content'></div><h1>Introducció a Core Data</h1>
<div class='content'><p>Core Data és un gràfic d'objectes i un framework de persistència proporcionat per Apple en els sistemes operatius macOS i iOS. Permet que les dades es puguin organitzar i gestionar eficientment dins d'una aplicació.</p>
<ul>
<li><strong>Gestió del Gràfic d'Objectes</strong>: Core Data gestiona el cicle de vida i les relacions dels objectes en la teva aplicació.</li>
<li><strong>Persistència</strong>: Core Data pot desar objectes al disc i recuperar-los més tard.</li>
</ul>
</div><h1>Configuració de Core Data a Xcode</h1>
<div class='content'><p>Per utilitzar Core Data en el teu projecte Xcode, cal configurar-lo correctament.</p>
<ol>
<li>
<p><strong>Creació d'un Nou Projecte amb Core Data</strong>:</p>
<ul>
<li>Quan creïs un nou projecte, marca l'opció &quot;Use Core Data&quot;.</li>
<li>Xcode inclourà automàticament els fitxers i configuracions necessàries de Core Data.</li>
</ul>
</li>
<li>
<p><strong>Afegir Core Data a un Projecte Existent</strong>:</p>
<ul>
<li>Afegeix un nou fitxer de Model de Dades (<code>.xcdatamodeld</code>) al teu projecte.</li>
<li>Configura l'stack de Core Data en el teu AppDelegate o SceneDelegate.</li>
</ul>
</li>
</ol>
</div><h1>Model de Core Data</h1>
<div class='content'><p>El model de Core Data és on defineixes l'estructura de les teves dades, incloent entitats, atributs i relacions.</p>
<ul>
<li><strong>Entitats</strong>: Representen taules a la base de dades.</li>
<li><strong>Atributs</strong>: Representen columnes a les taules.</li>
<li><strong>Relacions</strong>: Defineixen com les entitats estan relacionades entre si.</li>
</ul>
</div><h2>Exemple: Definició d'un Model de Dades Simple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5laXggdW5hIGVudGl0YXQgYW5vbWVuYWRhICJQZXJzb24iIGFtYiBhdHJpYnV0cyAibmFtZSIgKFN0cmluZykgaSAiYWdlIiAoSW50ZWdlcik="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Defineix una entitat anomenada &quot;Person&quot; amb atributs &quot;name&quot; (String) i &quot;age&quot; (Integer)</pre></div><div class='content'></div><h1>Stack de Core Data</h1>
<div class='content'><p>L'stack de Core Data és el conjunt de components que treballen junts per gestionar els objectes del model.</p>
<ul>
<li><strong>NSManagedObjectContext</strong>: El context en el qual treballes amb els teus objectes gestionats.</li>
<li><strong>NSPersistentStoreCoordinator</strong>: Coordina l'emmagatzematge persistent i el model d'objectes gestionats.</li>
<li><strong>NSManagedObjectModel</strong>: Representa l'esquema del teu model de dades.</li>
<li><strong>NSPersistentContainer</strong>: Simplifica la creació i gestió de l'stack de Core Data.</li>
</ul>
</div><h2>Exemple: Configuració de l'Stack de Core Data</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IENvcmVEYXRhCgpjbGFzcyBBcHBEZWxlZ2F0ZTogVUlSZXNwb25kZXIsIFVJQXBwbGljYXRpb25EZWxlZ2F0ZSB7CiAgICBsYXp5IHZhciBwZXJzaXN0ZW50Q29udGFpbmVyOiBOU1BlcnNpc3RlbnRDb250YWluZXIgPSB7CiAgICAgICAgbGV0IGNvbnRhaW5lciA9IE5TUGVyc2lzdGVudENvbnRhaW5lcihuYW1lOiAiTW9kZWxOYW1lIikKICAgICAgICBjb250YWluZXIubG9hZFBlcnNpc3RlbnRTdG9yZXMgeyBzdG9yZURlc2NyaXB0aW9uLCBlcnJvciBpbgogICAgICAgICAgICBpZiBsZXQgZXJyb3IgPSBlcnJvciBhcyBOU0Vycm9yPyB7CiAgICAgICAgICAgICAgICBmYXRhbEVycm9yKCJVbnJlc29sdmVkIGVycm9yIFwoZXJyb3IpLCBcKGVycm9yLnVzZXJJbmZvKSIpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcgogICAgfSgpCn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import CoreData

class AppDelegate: UIResponder, UIApplicationDelegate {
    lazy var persistentContainer: NSPersistentContainer = {
        let container = NSPersistentContainer(name: &quot;ModelName&quot;)
        container.loadPersistentStores { storeDescription, error in
            if let error = error as NSError? {
                fatalError(&quot;Unresolved error \(error), \(error.userInfo)&quot;)
            }
        }
        return container
    }()
}</pre></div><div class='content'></div><h1>Treballant amb Objectes Gestionats</h1>
<div class='content'><p>Els objectes gestionats són instàncies de les entitats del teu model de dades. Pots crear, llegir, actualitzar i eliminar aquests objectes utilitzant el context d'objectes gestionats.</p>
</div><h2>Creació d'un Objecte Gestionat</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGNvbnRleHQgPSBwZXJzaXN0ZW50Q29udGFpbmVyLnZpZXdDb250ZXh0CmxldCBuZXdQZXJzb24gPSBQZXJzb24oY29udGV4dDogY29udGV4dCkKbmV3UGVyc29uLm5hbWUgPSAiSm9obiBEb2UiCm5ld1BlcnNvbi5hZ2UgPSAzMAoKZG8gewogICAgdHJ5IGNvbnRleHQuc2F2ZSgpCn0gY2F0Y2ggewogICAgcHJpbnQoIkZhaWxlZCB0byBzYXZlOiBcKGVycm9yKSIpCn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let context = persistentContainer.viewContext
let newPerson = Person(context: context)
newPerson.name = &quot;John Doe&quot;
newPerson.age = 30

do {
    try context.save()
} catch {
    print(&quot;Failed to save: \(error)&quot;)
}</pre></div><div class='content'></div><h2>Recuperació d'Objectes Gestionats</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8UGVyc29uPiA9IFBlcnNvbi5mZXRjaFJlcXVlc3QoKQoKZG8gewogICAgbGV0IHBlb3BsZSA9IHRyeSBjb250ZXh0LmZldGNoKGZldGNoUmVxdWVzdCkKICAgIGZvciBwZXJzb24gaW4gcGVvcGxlIHsKICAgICAgICBwcmludCgiXChwZXJzb24ubmFtZSksIFwocGVyc29uLmFnZSkiKQogICAgfQp9IGNhdGNoIHsKICAgIHByaW50KCJGYWlsZWQgdG8gZmV0Y2g6IFwoZXJyb3IpIikKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()

do {
    let people = try context.fetch(fetchRequest)
    for person in people {
        print(&quot;\(person.name), \(person.age)&quot;)
    }
} catch {
    print(&quot;Failed to fetch: \(error)&quot;)
}</pre></div><div class='content'></div><h2>Actualització d'Objectes Gestionats</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8UGVyc29uPiA9IFBlcnNvbi5mZXRjaFJlcXVlc3QoKQpmZXRjaFJlcXVlc3QucHJlZGljYXRlID0gTlNQcmVkaWNhdGUoZm9ybWF0OiAibmFtZSA9PSAlQCIsICJKb2huIERvZSIpCgpkbyB7CiAgICBsZXQgcGVvcGxlID0gdHJ5IGNvbnRleHQuZmV0Y2goZmV0Y2hSZXF1ZXN0KQogICAgaWYgbGV0IHBlcnNvbiA9IHBlb3BsZS5maXJzdCB7CiAgICAgICAgcGVyc29uLmFnZSA9IDMxCiAgICAgICAgdHJ5IGNvbnRleHQuc2F2ZSgpCiAgICB9Cn0gY2F0Y2ggewogICAgcHJpbnQoIkZhaWxlZCB0byB1cGRhdGU6IFwoZXJyb3IpIikKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()
fetchRequest.predicate = NSPredicate(format: &quot;name == %@&quot;, &quot;John Doe&quot;)

do {
    let people = try context.fetch(fetchRequest)
    if let person = people.first {
        person.age = 31
        try context.save()
    }
} catch {
    print(&quot;Failed to update: \(error)&quot;)
}</pre></div><div class='content'></div><h2>Eliminació d'Objectes Gestionats</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8UGVyc29uPiA9IFBlcnNvbi5mZXRjaFJlcXVlc3QoKQpmZXRjaFJlcXVlc3QucHJlZGljYXRlID0gTlNQcmVkaWNhdGUoZm9ybWF0OiAibmFtZSA9PSAlQCIsICJKb2huIERvZSIpCgpkbyB7CiAgICBsZXQgcGVvcGxlID0gdHJ5IGNvbnRleHQuZmV0Y2goZmV0Y2hSZXF1ZXN0KQogICAgaWYgbGV0IHBlcnNvbiA9IHBlb3BsZS5maXJzdCB7CiAgICAgICAgY29udGV4dC5kZWxldGUocGVyc29uKQogICAgICAgIHRyeSBjb250ZXh0LnNhdmUoKQogICAgfQp9IGNhdGNoIHsKICAgIHByaW50KCJGYWlsZWQgdG8gZGVsZXRlOiBcKGVycm9yKSIpCn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()
fetchRequest.predicate = NSPredicate(format: &quot;name == %@&quot;, &quot;John Doe&quot;)

do {
    let people = try context.fetch(fetchRequest)
    if let person = people.first {
        context.delete(person)
        try context.save()
    }
} catch {
    print(&quot;Failed to delete: \(error)&quot;)
}</pre></div><div class='content'></div><h1>Funcionalitats Avançades de Core Data</h1>
<div class='content'><p>Core Data ofereix funcionalitats avançades per a necessitats de gestió de dades més complexes.</p>
<ul>
<li><strong>Operacions en Bloc</strong>: Realitza actualitzacions i eliminacions en bloc per a més eficiència.</li>
<li><strong>Fetched Results Controller</strong>: Gestiona eficientment els resultats d'una sol·licitud de recuperació de Core Data i actualitza la interfície d'usuari.</li>
<li><strong>Migració</strong>: Gestiona els canvis en l'esquema del model de dades al llarg del temps.</li>
</ul>
</div><h2>Exemple: Ús de NSFetchedResultsController</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IENvcmVEYXRhCgpjbGFzcyBWaWV3Q29udHJvbGxlcjogVUlWaWV3Q29udHJvbGxlciwgTlNGZXRjaGVkUmVzdWx0c0NvbnRyb2xsZXJEZWxlZ2F0ZSB7CiAgICB2YXIgZmV0Y2hlZFJlc3VsdHNDb250cm9sbGVyOiBOU0ZldGNoZWRSZXN1bHRzQ29udHJvbGxlcjxQZXJzb24+IQoKICAgIG92ZXJyaWRlIGZ1bmMgdmlld0RpZExvYWQoKSB7CiAgICAgICAgc3VwZXIudmlld0RpZExvYWQoKQogICAgICAgIGxldCBmZXRjaFJlcXVlc3Q6IE5TRmV0Y2hSZXF1ZXN0PFBlcnNvbj4gPSBQZXJzb24uZmV0Y2hSZXF1ZXN0KCkKICAgICAgICBmZXRjaFJlcXVlc3Quc29ydERlc2NyaXB0b3JzID0gW05TU29ydERlc2NyaXB0b3Ioa2V5OiAibmFtZSIsIGFzY2VuZGluZzogdHJ1ZSldCiAgICAgICAgCiAgICAgICAgZmV0Y2hlZFJlc3VsdHNDb250cm9sbGVyID0gTlNGZXRjaGVkUmVzdWx0c0NvbnRyb2xsZXIoZmV0Y2hSZXF1ZXN0OiBmZXRjaFJlcXVlc3QsIG1hbmFnZWRPYmplY3RDb250ZXh0OiBwZXJzaXN0ZW50Q29udGFpbmVyLnZpZXdDb250ZXh0LCBzZWN0aW9uTmFtZUtleVBhdGg6IG5pbCwgY2FjaGVOYW1lOiBuaWwpCiAgICAgICAgZmV0Y2hlZFJlc3VsdHNDb250cm9sbGVyLmRlbGVnYXRlID0gc2VsZgogICAgICAgIAogICAgICAgIGRvIHsKICAgICAgICAgICAgdHJ5IGZldGNoZWRSZXN1bHRzQ29udHJvbGxlci5wZXJmb3JtRmV0Y2goKQogICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICBwcmludCgiRmFpbGVkIHRvIGZldGNoOiBcKGVycm9yKSIpCiAgICAgICAgfQogICAgfQogICAgCiAgICAvLyBJbXBsZW1lbnRhIGVscyBtw6h0b2RlcyBkZSBOU0ZldGNoZWRSZXN1bHRzQ29udHJvbGxlckRlbGVnYXRlIHBlciBhY3R1YWxpdHphciBsYSBpbnRlcmbDrWNpZSBkJ3VzdWFyaQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import CoreData

class ViewController: UIViewController, NSFetchedResultsControllerDelegate {
    var fetchedResultsController: NSFetchedResultsController&lt;Person&gt;!

    override func viewDidLoad() {
        super.viewDidLoad()
        let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()
        fetchRequest.sortDescriptors = [NSSortDescriptor(key: &quot;name&quot;, ascending: true)]
        
        fetchedResultsController = NSFetchedResultsController(fetchRequest: fetchRequest, managedObjectContext: persistentContainer.viewContext, sectionNameKeyPath: nil, cacheName: nil)
        fetchedResultsController.delegate = self
        
        do {
            try fetchedResultsController.performFetch()
        } catch {
            print(&quot;Failed to fetch: \(error)&quot;)
        }
    }
    
    // Implementa els m&egrave;todes de NSFetchedResultsControllerDelegate per actualitzar la interf&iacute;cie d'usuari
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Core Data és un framework potent per gestionar i persistir dades en aplicacions iOS i macOS. Entenent les bases de la configuració de Core Data, treballant amb objectes gestionats i aprofitant les funcionalitats avançades, pots gestionar eficientment les dades de la teva aplicació. Practica amb els exemples proporcionats i explora la documentació per aprofundir en la teva comprensió de Core Data.</p>
</div><div class='row navigation'><div class='col-6'><a href='creating-custom-ui-components'>&#x25C4; Creant Components UI Personalitzats</a></div><div class='col-6 text-end'><a href='integrating-third-party-libraries'>Integrant Llibreries de Tercers &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
