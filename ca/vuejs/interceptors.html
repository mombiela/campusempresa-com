<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interceptors a Vue.js</title>

    <link rel="alternate" href="https://campusempresa.com/es/vuejs/interceptors" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/vuejs/interceptors" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/vuejs/interceptors" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/vuejs/interceptors" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>Els interceptors són una característica poderosa a Vue.js, especialment quan es treballa amb sol·licituds HTTP utilitzant biblioteques com Axios. Permeten interceptar sol·licituds o respostes abans que siguin gestionades per <code>then</code> o <code>catch</code>.</p>
</div><h1>Què són els Interceptors?</h1>
<div class='content'><p>Els interceptors són funcions que Axios crida per a cada sol·licitud o resposta. Es poden utilitzar per modificar sol·licituds o respostes, gestionar errors o afegir lògica addicional abans que la sol·licitud sigui enviada o després que la resposta sigui rebuda.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Interceptors de Sol·licitud</strong>: Modifiquen o registren sol·licituds abans que siguin enviades.</li>
<li><strong>Interceptors de Resposta</strong>: Modifiquen o registren respostes abans que siguin gestionades per l'aplicació.</li>
<li><strong>Gestió d'Errors</strong>: Gestionen errors globalment interceptant sol·licituds o respostes fallides.</li>
</ul>
</div><h1>Configurant Axios amb Vue.js</h1>
<div class='content'><p>Per utilitzar interceptors, primer has de configurar Axios en el teu projecte Vue.js.</p>
</div><h2>Instal·lació</h2>
<div class='content'><p>Instal·la Axios utilitzant npm o yarn:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgYXhpb3MKIyBvCnlhcm4gYWRkIGF4aW9z"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install axios
# o
yarn add axios</pre></div><div class='content'></div><h2>Configuració Bàsica</h2>
<div class='content'><p>Crea una instància d'Axios per a una configuració personalitzada:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2F4aW9zLmpzCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7Cgpjb25zdCBheGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nLAogIHRpbWVvdXQ6IDEwMDAsCiAgaGVhZGVyczogeydYLUN1c3RvbS1IZWFkZXInOiAnZm9vYmFyJ30KfSk7CgpleHBvcnQgZGVmYXVsdCBheGlvc0luc3RhbmNlOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/axios.js
import axios from 'axios';

const axiosInstance = axios.create({
  baseURL: 'https://api.example.com',
  timeout: 1000,
  headers: {'X-Custom-Header': 'foobar'}
});

export default axiosInstance;</pre></div><div class='content'></div><h1>Utilitzant Interceptors de Sol·licitud</h1>
<div class='content'><p>Els interceptors de sol·licitud et permeten modificar sol·licituds abans que siguin enviades al servidor.</p>
</div><h2>Exemple: Afegint Capçaleres d'Autorització</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2F4aW9zLmpzCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7Cgpjb25zdCBheGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nLAogIHRpbWVvdXQ6IDEwMDAsCn0pOwoKYXhpb3NJbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoCiAgZnVuY3Rpb24oY29uZmlnKSB7CiAgICAvLyBGZXIgYWxndW5hIGNvc2EgYWJhbnMgcXVlIGxhIHNvbMK3bGljaXR1ZCBzaWd1aSBlbnZpYWRhCiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgaWYgKHRva2VuKSB7CiAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDsKICAgIH0KICAgIHJldHVybiBjb25maWc7CiAgfSwKICBmdW5jdGlvbihlcnJvcikgewogICAgLy8gRmVyIGFsZ3VuYSBjb3NhIGFtYiBsJ2Vycm9yIGRlIGxhIHNvbMK3bGljaXR1ZAogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9Cik7CgpleHBvcnQgZGVmYXVsdCBheGlvc0luc3RhbmNlOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/axios.js
import axios from 'axios';

const axiosInstance = axios.create({
  baseURL: 'https://api.example.com',
  timeout: 1000,
});

axiosInstance.interceptors.request.use(
  function(config) {
    // Fer alguna cosa abans que la sol&middot;licitud sigui enviada
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  function(error) {
    // Fer alguna cosa amb l'error de la sol&middot;licitud
    return Promise.reject(error);
  }
);

export default axiosInstance;</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>config</strong>: L'objecte de configuració per a la sol·licitud.</li>
<li><strong>token</strong>: Recuperat de l'emmagatzematge local i afegit a les capçaleres de la sol·licitud.</li>
<li><strong>Promise.reject(error)</strong>: Assegura que l'error sigui gestionat pel codi que crida.</li>
</ul>
</div><h1>Utilitzant Interceptors de Resposta</h1>
<div class='content'><p>Els interceptors de resposta et permeten gestionar respostes globalment.</p>
</div><h2>Exemple: Gestionant Respostes No Autoritzades</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2F4aW9zLmpzCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7Cgpjb25zdCBheGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nLAogIHRpbWVvdXQ6IDEwMDAsCn0pOwoKYXhpb3NJbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKAogIGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAvLyBRdWFsc2V2b2wgY29kaSBkJ2VzdGF0IGRpbnMgZGVsIHJhbmcgZGUgMnh4IGZhIHF1ZSBhcXVlc3RhIGZ1bmNpw7MgZXMgZGVzZW5jYWRlbmkKICAgIHJldHVybiByZXNwb25zZTsKICB9LAogIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAvLyBRdWFsc2V2b2wgY29kaSBkJ2VzdGF0IGZvcmEgZGVsIHJhbmcgZGUgMnh4IGZhIHF1ZSBhcXVlc3RhIGZ1bmNpw7MgZXMgZGVzZW5jYWRlbmkKICAgIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAvLyBSZWRpcmlnaXIgYSBsYSBww6BnaW5hIGRlIGxvZ2luIG8gbW9zdHJhciB1biBtb2RhbAogICAgICB3aW5kb3cubG9jYXRpb24gPSAnL2xvZ2luJzsKICAgIH0KICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfQopOwoKZXhwb3J0IGRlZmF1bHQgYXhpb3NJbnN0YW5jZTs="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/axios.js
import axios from 'axios';

const axiosInstance = axios.create({
  baseURL: 'https://api.example.com',
  timeout: 1000,
});

axiosInstance.interceptors.response.use(
  function(response) {
    // Qualsevol codi d'estat dins del rang de 2xx fa que aquesta funci&oacute; es desencadeni
    return response;
  },
  function(error) {
    // Qualsevol codi d'estat fora del rang de 2xx fa que aquesta funci&oacute; es desencadeni
    if (error.response.status === 401) {
      // Redirigir a la p&agrave;gina de login o mostrar un modal
      window.location = '/login';
    }
    return Promise.reject(error);
  }
);

export default axiosInstance;</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>response</strong>: L'objecte de resposta del servidor.</li>
<li><strong>error.response.status</strong>: Comprova el codi d'estat de la resposta.</li>
<li><strong>window.location</strong>: Redirigeix l'usuari a la pàgina de login si el codi d'estat és 401 (No Autoritzat).</li>
</ul>
</div><h1>Combinant Interceptors de Sol·licitud i Resposta</h1>
<div class='content'><p>Pots combinar tant els interceptors de sol·licitud com de resposta en una sola instància d'Axios.</p>
</div><h2>Exemple: Configuració Completa</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2F4aW9zLmpzCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7Cgpjb25zdCBheGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nLAogIHRpbWVvdXQ6IDEwMDAsCn0pOwoKYXhpb3NJbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoCiAgZnVuY3Rpb24oY29uZmlnKSB7CiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgaWYgKHRva2VuKSB7CiAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDsKICAgIH0KICAgIHJldHVybiBjb25maWc7CiAgfSwKICBmdW5jdGlvbihlcnJvcikgewogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9Cik7CgpheGlvc0luc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoCiAgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgIHJldHVybiByZXNwb25zZTsKICB9LAogIGZ1bmN0aW9uKGVycm9yKSB7CiAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgd2luZG93LmxvY2F0aW9uID0gJy9sb2dpbic7CiAgICB9CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KKTsKCmV4cG9ydCBkZWZhdWx0IGF4aW9zSW5zdGFuY2U7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/axios.js
import axios from 'axios';

const axiosInstance = axios.create({
  baseURL: 'https://api.example.com',
  timeout: 1000,
});

axiosInstance.interceptors.request.use(
  function(config) {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  function(error) {
    return Promise.reject(error);
  }
);

axiosInstance.interceptors.response.use(
  function(response) {
    return response;
  },
  function(error) {
    if (error.response.status === 401) {
      window.location = '/login';
    }
    return Promise.reject(error);
  }
);

export default axiosInstance;</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Els interceptors a Vue.js, quan s'utilitzen amb Axios, proporcionen una manera robusta de gestionar sol·licituds i respostes HTTP. Permeten:</p>
<ul>
<li>Afegir tokens d'autenticació a les sol·licituds.</li>
<li>Gestionar errors globalment.</li>
<li>Modificar sol·licituds i respostes segons sigui necessari.</li>
</ul>
<p>Entenent i implementant interceptors, pots crear aplicacions Vue.js més mantenibles i escalables.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
