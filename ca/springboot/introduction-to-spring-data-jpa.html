<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducció a Spring Data JPA</title>

    <link rel="alternate" href="https://campusempresa.com/es/springboot/introduction-to-spring-data-jpa" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/springboot/introduction-to-spring-data-jpa" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/springboot/introduction-to-spring-data-jpa" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/springboot/introduction-to-spring-data-jpa" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='exception-handling-in-spring-boot'>&#x25C4; Gestió d'Excepcions a Spring Boot</a></div><div class='col-6 text-end'><a href='configuring-data-sources'>Configuració de Fonts de Dades &#x25BA;</a></div></div><div class='content'></div><h1>Visió general</h1>
<div class='content'><p>Spring Data JPA és una part de la família més gran de Spring Data, que facilita la implementació de repositoris basats en JPA. Redueix significativament la quantitat de codi repetitiu necessari per implementar capes d'accés a dades per a diversos magatzems de persistència.</p>
</div><h1>Conceptes clau</h1>
<div class='content'><ul>
<li><strong>JPA (Java Persistence API)</strong>: Una especificació per accedir, persistir i gestionar dades entre objectes Java i bases de dades relacionals.</li>
<li><strong>Spring Data JPA</strong>: Una part del projecte Spring Data que facilita el treball amb repositoris JPA.</li>
<li><strong>Repositoris</strong>: Interfícies que proporcionen operacions CRUD i consultes més complexes.</li>
<li><strong>Entitats</strong>: Classes Java que es mapegen a taules de bases de dades.</li>
<li><strong>Anotacions</strong>: Utilitzades per definir mapatges entre classes Java i taules de bases de dades.</li>
</ul>
</div><h1>Configuració de Spring Data JPA</h1>
<div class='content'><p>Per començar a utilitzar Spring Data JPA, cal incloure les dependències necessàries al teu <code>pom.xml</code> si utilitzes Maven:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcuc3ByaW5nZnJhbWV3b3JrLmJvb3Q8L2dyb3VwSWQ+CiAgICA8YXJ0aWZhY3RJZD5zcHJpbmctYm9vdC1zdGFydGVyLWRhdGEtanBhPC9hcnRpZmFjdElkPgo8L2RlcGVuZGVuY3k+CjxkZXBlbmRlbmN5PgogICAgPGdyb3VwSWQ+Y29tLmgyZGF0YWJhc2U8L2dyb3VwSWQ+CiAgICA8YXJ0aWZhY3RJZD5oMjwvYXJ0aWZhY3RJZD4KICAgIDxzY29wZT5ydW50aW1lPC9zY29wZT4KPC9kZXBlbmRlbmN5Pg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.h2database&lt;/groupId&gt;
    &lt;artifactId&gt;h2&lt;/artifactId&gt;
    &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'></div><h1>Configuració de la font de dades</h1>
<div class='content'><p>Cal configurar la font de dades al teu fitxer <code>application.properties</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3ByaW5nLmRhdGFzb3VyY2UudXJsPWpkYmM6aDI6bWVtOnRlc3RkYgpzcHJpbmcuZGF0YXNvdXJjZS5kcml2ZXJDbGFzc05hbWU9b3JnLmgyLkRyaXZlcgpzcHJpbmcuZGF0YXNvdXJjZS51c2VybmFtZT1zYQpzcHJpbmcuZGF0YXNvdXJjZS5wYXNzd29yZD1wYXNzd29yZApzcHJpbmcuanBhLmRhdGFiYXNlLXBsYXRmb3JtPW9yZy5oaWJlcm5hdGUuZGlhbGVjdC5IMkRpYWxlY3QKc3ByaW5nLmgyLmNvbnNvbGUuZW5hYmxlZD10cnVl"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=password
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.h2.console.enabled=true</pre></div><div class='content'></div><h1>Definició d'una entitat</h1>
<div class='content'><p>Les entitats són classes Java simples anotades amb <code>@Entity</code> i altres anotacions JPA:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkdlbmVyYXRlZFZhbHVlOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuR2VuZXJhdGlvblR5cGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5JZDsKCkBFbnRpdHkKcHVibGljIGNsYXNzIFVzZXIgewogICAgQElkCiAgICBAR2VuZXJhdGVkVmFsdWUoc3RyYXRlZ3kgPSBHZW5lcmF0aW9uVHlwZS5JREVOVElUWSkKICAgIHByaXZhdGUgTG9uZyBpZDsKICAgIHByaXZhdGUgU3RyaW5nIG5hbWU7CiAgICBwcml2YXRlIFN0cmluZyBlbWFpbDsKCiAgICAvLyBHZXR0ZXJzIGkgU2V0dGVycwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

@Entity
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    private String name;
    private String email;

    // Getters i Setters
}</pre></div><div class='content'></div><h1>Creació d'un repositori</h1>
<div class='content'><p>Els repositoris són interfícies que estenen <code>JpaRepository</code> o <code>CrudRepository</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5qcGEucmVwb3NpdG9yeS5KcGFSZXBvc2l0b3J5OwoKcHVibGljIGludGVyZmFjZSBVc2VyUmVwb3NpdG9yeSBleHRlbmRzIEpwYVJlcG9zaXRvcnk8VXNlciwgTG9uZz4gewogICAgLy8gQXF1w60gZXMgcG9kZW4gZGVmaW5pciBtw6h0b2RlcyBkZSBjb25zdWx0YSBwZXJzb25hbGl0emF0cwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.data.jpa.repository.JpaRepository;

public interface UserRepository extends JpaRepository&lt;User, Long&gt; {
    // Aqu&iacute; es poden definir m&egrave;todes de consulta personalitzats
}</pre></div><div class='content'></div><h1>Ús del repositori</h1>
<div class='content'><p>Pots utilitzar el repositori a les teves classes de servei o controlador:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5TZXJ2aWNlOwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKQFNlcnZpY2UKcHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlIHsKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnk7CgogICAgcHVibGljIExpc3Q8VXNlcj4gZ2V0QWxsVXNlcnMoKSB7CiAgICAgICAgcmV0dXJuIHVzZXJSZXBvc2l0b3J5LmZpbmRBbGwoKTsKICAgIH0KCiAgICBwdWJsaWMgVXNlciBnZXRVc2VyQnlJZChMb25nIGlkKSB7CiAgICAgICAgcmV0dXJuIHVzZXJSZXBvc2l0b3J5LmZpbmRCeUlkKGlkKS5vckVsc2UobnVsbCk7CiAgICB9CgogICAgcHVibGljIFVzZXIgc2F2ZVVzZXIoVXNlciB1c2VyKSB7CiAgICAgICAgcmV0dXJuIHVzZXJSZXBvc2l0b3J5LnNhdmUodXNlcik7CiAgICB9CgogICAgcHVibGljIHZvaWQgZGVsZXRlVXNlcihMb25nIGlkKSB7CiAgICAgICAgdXNlclJlcG9zaXRvcnkuZGVsZXRlQnlJZChpZCk7CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class UserService {
    @Autowired
    private UserRepository userRepository;

    public List&lt;User&gt; getAllUsers() {
        return userRepository.findAll();
    }

    public User getUserById(Long id) {
        return userRepository.findById(id).orElse(null);
    }

    public User saveUser(User user) {
        return userRepository.save(user);
    }

    public void deleteUser(Long id) {
        userRepository.deleteById(id);
    }
}</pre></div><div class='content'></div><h1>Mètodes de consulta personalitzats</h1>
<div class='content'><p>Spring Data JPA et permet definir mètodes de consulta personalitzats simplement declarant signatures de mètodes a la interfície del repositori:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmEudXRpbC5MaXN0OwoKcHVibGljIGludGVyZmFjZSBVc2VyUmVwb3NpdG9yeSBleHRlbmRzIEpwYVJlcG9zaXRvcnk8VXNlciwgTG9uZz4gewogICAgTGlzdDxVc2VyPiBmaW5kQnlOYW1lKFN0cmluZyBuYW1lKTsKICAgIExpc3Q8VXNlcj4gZmluZEJ5RW1haWxDb250YWluaW5nKFN0cmluZyBlbWFpbCk7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import java.util.List;

public interface UserRepository extends JpaRepository&lt;User, Long&gt; {
    List&lt;User&gt; findByName(String name);
    List&lt;User&gt; findByEmailContaining(String email);
}</pre></div><div class='content'></div><h1>Temes avançats</h1>
<div class='content'><ul>
<li><strong>JPQL (Java Persistence Query Language)</strong>: Utilitzat per escriure consultes personalitzades.</li>
<li><strong>Criteria API</strong>: Una manera programàtica de crear consultes.</li>
<li><strong>Auditoria</strong>: Omplir automàticament camps relacionats amb l'auditoria com createdDate, lastModifiedDate.</li>
<li><strong>Paginació i ordenació</strong>: Gestionar grans conjunts de dades de manera eficient.</li>
</ul>
</div><h2>Exemple de consulta JPQL</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5qcGEucmVwb3NpdG9yeS5RdWVyeTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5yZXBvc2l0b3J5LnF1ZXJ5LlBhcmFtOwoKcHVibGljIGludGVyZmFjZSBVc2VyUmVwb3NpdG9yeSBleHRlbmRzIEpwYVJlcG9zaXRvcnk8VXNlciwgTG9uZz4gewogICAgQFF1ZXJ5KCJTRUxFQ1QgdSBGUk9NIFVzZXIgdSBXSEVSRSB1LmVtYWlsID0gOmVtYWlsIikKICAgIFVzZXIgZmluZFVzZXJCeUVtYWlsKEBQYXJhbSgiZW1haWwiKSBTdHJpbmcgZW1haWwpOwp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;

public interface UserRepository extends JpaRepository&lt;User, Long&gt; {
    @Query(&quot;SELECT u FROM User u WHERE u.email = :email&quot;)
    User findUserByEmail(@Param(&quot;email&quot;) String email);
}</pre></div><div class='content'></div><h2>Exemple de paginació i ordenació</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5kb21haW4uUGFnZTsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuZGF0YS5kb21haW4uUGFnZWFibGU7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmRhdGEuZG9tYWluLlNvcnQ7CgpwdWJsaWMgaW50ZXJmYWNlIFVzZXJSZXBvc2l0b3J5IGV4dGVuZHMgSnBhUmVwb3NpdG9yeTxVc2VyLCBMb25nPiB7CiAgICBQYWdlPFVzZXI+IGZpbmRBbGwoUGFnZWFibGUgcGFnZWFibGUpOwogICAgTGlzdDxVc2VyPiBmaW5kQWxsKFNvcnQgc29ydCk7Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.domain.Sort;

public interface UserRepository extends JpaRepository&lt;User, Long&gt; {
    Page&lt;User&gt; findAll(Pageable pageable);
    List&lt;User&gt; findAll(Sort sort);
}</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Spring Data JPA simplifica la implementació de capes d'accés a dades proporcionant una abstracció de repositori sobre JPA. Redueix el codi repetitiu i permet als desenvolupadors centrar-se en la lògica de negoci. Entenent els conceptes bàsics d'entitats, repositoris i consultes personalitzades, pots gestionar eficientment les dades a les teves aplicacions Spring Boot. Les característiques avançades com JPQL, Criteria API i auditoria milloren encara més les capacitats de Spring Data JPA, convertint-lo en una eina poderosa per a qualsevol desenvolupador Java.</p>
</div><div class='row navigation'><div class='col-6'><a href='exception-handling-in-spring-boot'>&#x25C4; Gestió d'Excepcions a Spring Boot</a></div><div class='col-6 text-end'><a href='configuring-data-sources'>Configuració de Fonts de Dades &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
