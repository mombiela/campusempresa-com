<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emmagatzematge en memòria cau a NGINX</title>

    <link rel="alternate" href="https://campusempresa.com/es/nginx/caching-in-nginx" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/nginx/caching-in-nginx" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/nginx/caching-in-nginx" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/nginx/caching-in-nginx" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció a l'emmagatzematge en memòria cau</h1>
<div class='content'><p>L'emmagatzematge en memòria cau és una tècnica utilitzada per emmagatzemar còpies de fitxers o dades en una memòria cau, o ubicació d'emmagatzematge temporal, per reduir el temps que es triga a accedir a les dades i millorar el rendiment. En el context de NGINX, l'emmagatzematge en memòria cau pot millorar significativament el rendiment de les aplicacions web reduint la càrrega als servidors de backend i disminuint el temps de resposta per als usuaris.</p>
</div><h1>Beneficis de l'emmagatzematge en memòria cau a NGINX</h1>
<div class='content'><ul>
<li><strong>Rendiment Millorat</strong>: Redueix la latència i accelera el lliurament de contingut.</li>
<li><strong>Reducció de la Càrrega del Servidor</strong>: Disminueix el nombre de sol·licituds als servidors de backend.</li>
<li><strong>Eficiència de Costos</strong>: Redueix l'ús de l'ample de banda i el consum de recursos del servidor.</li>
<li><strong>Escalabilitat</strong>: Ajuda a gestionar més usuaris concurrents servint contingut emmagatzemat en memòria cau.</li>
</ul>
</div><h1>Tipus d'emmagatzematge en memòria cau a NGINX</h1>
<div class='content'><ul>
<li><strong>Emmagatzematge en Memòria Cau de Contingut Estàtic</strong>: Emmagatzema fitxers estàtics com imatges, CSS i JavaScript.</li>
<li><strong>Emmagatzematge en Memòria Cau de Proxy</strong>: Emmagatzema respostes dels servidors de backend per servir futures sol·licituds més ràpidament.</li>
<li><strong>Microemmagatzematge en Memòria Cau</strong>: Emmagatzematge a curt termini per a contingut dinàmic per gestionar trànsit elevat.</li>
</ul>
</div><h1>Configuració de l'Emmagatzematge en Memòria Cau de Contingut Estàtic</h1>
<div class='content'><p>L'emmagatzematge en memòria cau de contingut estàtic implica configurar NGINX per emmagatzemar fitxers estàtics. Això es fa típicament utilitzant la directiva <code>expires</code>.</p>
</div><h2>Exemple de Configuració</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIHNlcnZlcl9uYW1lIGV4YW1wbGUuY29tOwoKICAgIGxvY2F0aW9uIC8gewogICAgICAgIHJvb3QgL3Zhci93d3cvaHRtbDsKICAgICAgICBpbmRleCBpbmRleC5odG1sOwogICAgfQoKICAgIGxvY2F0aW9uIH4qIFwuKGpwZ3xqcGVnfHBuZ3xnaWZ8aWNvfGNzc3xqcykkIHsKICAgICAgICBleHBpcmVzIDMwZDsKICAgICAgICBhZGRfaGVhZGVyIENhY2hlLUNvbnRyb2wgInB1YmxpYywgbm8tdHJhbnNmb3JtIjsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>server {
    listen 80;
    server_name example.com;

    location / {
        root /var/www/html;
        index index.html;
    }

    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
        expires 30d;
        add_header Cache-Control &quot;public, no-transform&quot;;
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>location ~* \.(jpg|jpeg|png|gif|ico|css|js)$</code>: Coincideix amb sol·licituds de fitxers estàtics.</li>
<li><code>expires 30d</code>: Estableix el temps d'expiració de la memòria cau a 30 dies.</li>
<li><code>add_header Cache-Control &quot;public, no-transform&quot;</code>: Afegeix una capçalera Cache-Control a la resposta.</li>
</ul>
</li>
</ul>
</div><h1>Configuració de l'Emmagatzematge en Memòria Cau de Proxy</h1>
<div class='content'><p>L'emmagatzematge en memòria cau de proxy implica emmagatzemar respostes dels servidors de backend. Això és útil per a contingut dinàmic que no canvia freqüentment.</p>
</div><h2>Exemple de Configuració</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICBwcm94eV9jYWNoZV9wYXRoIC9kYXRhL25naW54L2NhY2hlIGxldmVscz0xOjIga2V5c196b25lPW15X2NhY2hlOjEwbSBtYXhfc2l6ZT0xMGcgaW5hY3RpdmU9NjBtIHVzZV90ZW1wX3BhdGg9b2ZmOwoKICAgIHNlcnZlciB7CiAgICAgICAgbGlzdGVuIDgwOwogICAgICAgIHNlcnZlcl9uYW1lIGV4YW1wbGUuY29tOwoKICAgICAgICBsb2NhdGlvbiAvIHsKICAgICAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vYmFja2VuZF9zZXJ2ZXI7CiAgICAgICAgICAgIHByb3h5X2NhY2hlIG15X2NhY2hlOwogICAgICAgICAgICBwcm94eV9jYWNoZV92YWxpZCAyMDAgMzAyIDEwbTsKICAgICAgICAgICAgcHJveHlfY2FjaGVfdmFsaWQgNDA0IDFtOwogICAgICAgICAgICBhZGRfaGVhZGVyIFgtQ2FjaGUtU3RhdHVzICR1cHN0cmVhbV9jYWNoZV9zdGF0dXM7CiAgICAgICAgfQogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    proxy_cache_path /data/nginx/cache levels=1:2 keys_zone=my_cache:10m max_size=10g inactive=60m use_temp_path=off;

    server {
        listen 80;
        server_name example.com;

        location / {
            proxy_pass http://backend_server;
            proxy_cache my_cache;
            proxy_cache_valid 200 302 10m;
            proxy_cache_valid 404 1m;
            add_header X-Cache-Status $upstream_cache_status;
        }
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>proxy_cache_path</code>: Defineix el camí d'emmagatzematge de la memòria cau i els paràmetres.</li>
<li><code>proxy_pass http://backend_server</code>: Redirigeix les sol·licituds al servidor de backend.</li>
<li><code>proxy_cache my_cache</code>: Habilita l'emmagatzematge en memòria cau utilitzant la zona de memòria cau definida.</li>
<li><code>proxy_cache_valid 200 302 10m</code>: Emmagatzema en memòria cau respostes 200 i 302 durant 10 minuts.</li>
<li><code>proxy_cache_valid 404 1m</code>: Emmagatzema en memòria cau respostes 404 durant 1 minut.</li>
<li><code>add_header X-Cache-Status $upstream_cache_status</code>: Afegeix una capçalera personalitzada per indicar l'estat de la memòria cau.</li>
</ul>
</li>
</ul>
</div><h1>Microemmagatzematge en Memòria Cau</h1>
<div class='content'><p>El microemmagatzematge en memòria cau és una tècnica on el contingut dinàmic s'emmagatzema en memòria cau durant períodes molt curts (per exemple, uns pocs segons) per gestionar el trànsit elevat de manera eficient.</p>
</div><h2>Exemple de Configuració</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICBwcm94eV9jYWNoZV9wYXRoIC9kYXRhL25naW54L21pY3JvY2FjaGUgbGV2ZWxzPTE6MiBrZXlzX3pvbmU9bWljcm9jYWNoZToxMG0gbWF4X3NpemU9MWcgaW5hY3RpdmU9MW0gdXNlX3RlbXBfcGF0aD1vZmY7CgogICAgc2VydmVyIHsKICAgICAgICBsaXN0ZW4gODA7CiAgICAgICAgc2VydmVyX25hbWUgZXhhbXBsZS5jb207CgogICAgICAgIGxvY2F0aW9uIC8gewogICAgICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly9iYWNrZW5kX3NlcnZlcjsKICAgICAgICAgICAgcHJveHlfY2FjaGUgbWljcm9jYWNoZTsKICAgICAgICAgICAgcHJveHlfY2FjaGVfdmFsaWQgMjAwIDFzOwogICAgICAgICAgICBwcm94eV9jYWNoZV92YWxpZCA0MDQgMXM7CiAgICAgICAgICAgIGFkZF9oZWFkZXIgWC1DYWNoZS1TdGF0dXMgJHVwc3RyZWFtX2NhY2hlX3N0YXR1czsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    proxy_cache_path /data/nginx/microcache levels=1:2 keys_zone=microcache:10m max_size=1g inactive=1m use_temp_path=off;

    server {
        listen 80;
        server_name example.com;

        location / {
            proxy_pass http://backend_server;
            proxy_cache microcache;
            proxy_cache_valid 200 1s;
            proxy_cache_valid 404 1s;
            add_header X-Cache-Status $upstream_cache_status;
        }
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>proxy_cache_valid 200 1s</code>: Emmagatzema en memòria cau respostes 200 durant 1 segon.</li>
<li><code>proxy_cache_valid 404 1s</code>: Emmagatzema en memòria cau respostes 404 durant 1 segon.</li>
<li>Aquesta configuració és ideal per a escenaris de trànsit elevat on fins i tot una curta durada de la memòria cau pot reduir significativament la càrrega del servidor.</li>
</ul>
</li>
</ul>
</div><h1>Purga de la Memòria Cau</h1>
<div class='content'><p>La purga de la memòria cau permet eliminar manualment el contingut emmagatzemat en memòria cau. Això és útil quan el contingut s'actualitza i cal assegurar-se que els usuaris rebin la versió més recent.</p>
</div><h2>Exemple de Configuració</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICBwcm94eV9jYWNoZV9wYXRoIC9kYXRhL25naW54L2NhY2hlIGxldmVscz0xOjIga2V5c196b25lPW15X2NhY2hlOjEwbSBtYXhfc2l6ZT0xMGcgaW5hY3RpdmU9NjBtIHVzZV90ZW1wX3BhdGg9b2ZmOwoKICAgIHNlcnZlciB7CiAgICAgICAgbGlzdGVuIDgwOwogICAgICAgIHNlcnZlcl9uYW1lIGV4YW1wbGUuY29tOwoKICAgICAgICBsb2NhdGlvbiAvIHsKICAgICAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vYmFja2VuZF9zZXJ2ZXI7CiAgICAgICAgICAgIHByb3h5X2NhY2hlIG15X2NhY2hlOwogICAgICAgICAgICBwcm94eV9jYWNoZV92YWxpZCAyMDAgMzAyIDEwbTsKICAgICAgICAgICAgcHJveHlfY2FjaGVfdmFsaWQgNDA0IDFtOwogICAgICAgICAgICBhZGRfaGVhZGVyIFgtQ2FjaGUtU3RhdHVzICR1cHN0cmVhbV9jYWNoZV9zdGF0dXM7CiAgICAgICAgfQoKICAgICAgICBsb2NhdGlvbiAvcHVyZ2UgewogICAgICAgICAgICBhbGxvdyAxMjcuMC4wLjE7CiAgICAgICAgICAgIGRlbnkgYWxsOwogICAgICAgICAgICBwcm94eV9jYWNoZV9wdXJnZSBteV9jYWNoZSAiJHNjaGVtZSRyZXF1ZXN0X21ldGhvZCRob3N0JHJlcXVlc3RfdXJpIjsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    proxy_cache_path /data/nginx/cache levels=1:2 keys_zone=my_cache:10m max_size=10g inactive=60m use_temp_path=off;

    server {
        listen 80;
        server_name example.com;

        location / {
            proxy_pass http://backend_server;
            proxy_cache my_cache;
            proxy_cache_valid 200 302 10m;
            proxy_cache_valid 404 1m;
            add_header X-Cache-Status $upstream_cache_status;
        }

        location /purge {
            allow 127.0.0.1;
            deny all;
            proxy_cache_purge my_cache &quot;$scheme$request_method$host$request_uri&quot;;
        }
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicació</strong>:
<ul>
<li><code>location /purge</code>: Defineix una ubicació per purgar la memòria cau.</li>
<li><code>allow 127.0.0.1; deny all;</code>: Restringeix l'accés a la ubicació de purga a localhost.</li>
<li><code>proxy_cache_purge my_cache &quot;$scheme$request_method$host$request_uri&quot;;</code>: Purga la memòria cau especificada.</li>
</ul>
</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>L'emmagatzematge en memòria cau a NGINX és una característica poderosa que pot millorar enormement el rendiment i l'escalabilitat de les aplicacions web. Comprenent i configurant l'emmagatzematge en memòria cau de contingut estàtic, l'emmagatzematge en memòria cau de proxy, el microemmagatzematge en memòria cau i la purga de la memòria cau, pots optimitzar el teu servidor NGINX per gestionar més trànsit de manera eficient i proporcionar una millor experiència d'usuari.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
