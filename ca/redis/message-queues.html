<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cues de missatges a Redis</title>

    <link rel="alternate" href="https://campusempresa.com/es/redis/message-queues" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/redis/message-queues" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/redis/message-queues" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/redis/message-queues" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció a les cues de missatges</h1>
<div class='content'><p>Les cues de missatges són un concepte fonamental en els sistemes distribuïts, que permeten la comunicació asíncrona entre diferents parts d'una aplicació. Redis proporciona un suport robust per a les cues de missatges, cosa que el fa una opció popular per implementar aquest patró.</p>
</div><h1>Conceptes clau</h1>
<div class='content'><ul>
<li><strong>Cua de missatges</strong>: Una estructura de dades que conté missatges enviats entre productors i consumidors.</li>
<li><strong>Productor</strong>: Una entitat que envia missatges a la cua.</li>
<li><strong>Consumidor</strong>: Una entitat que recupera missatges de la cua.</li>
<li><strong>FIFO (First In, First Out)</strong>: L'ordre en què es processen els missatges en una cua.</li>
</ul>
</div><h1>Estructures de dades de Redis per a cues de missatges</h1>
<div class='content'><p>Redis admet diverses estructures de dades que es poden utilitzar per implementar cues de missatges:</p>
<ul>
<li><strong>Llistes</strong>: Simple i directa, utilitzant comandes com <code>LPUSH</code> i <code>RPOP</code>.</li>
<li><strong>Pub/Sub</strong>: Un paradigma de missatgeria de publicació/subscripció.</li>
<li><strong>Streams</strong>: Estructura de dades avançada per gestionar escenaris de missatgeria més complexos.</li>
</ul>
</div><h1>Implementació de cues de missatges amb llistes</h1>
<div class='content'></div><h2>Operacions bàsiques</h2>
<div class='content'><p>Les llistes de Redis es poden utilitzar per implementar una cua FIFO simple. Aquí teniu les operacions bàsiques:</p>
<ul>
<li><strong>LPUSH</strong>: Afegeix un element al cap de la llista.</li>
<li><strong>RPUSH</strong>: Afegeix un element a la cua de la llista.</li>
<li><strong>LPOP</strong>: Elimina i retorna el primer element de la llista.</li>
<li><strong>RPOP</strong>: Elimina i retorna l'últim element de la llista.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHJlZGlzCgojIENvbm5lY3Rhci1zZSBhIFJlZGlzCnIgPSByZWRpcy5SZWRpcyhob3N0PSdsb2NhbGhvc3QnLCBwb3J0PTYzNzksIGRiPTApCgojIFByb2R1Y3RvcjogQWZlZ2VpeCBtaXNzYXRnZXMgYSBsYSBjdWEKci5scHVzaCgnbXlfcXVldWUnLCAnbWVzc2FnZTEnKQpyLmxwdXNoKCdteV9xdWV1ZScsICdtZXNzYWdlMicpCgojIENvbnN1bWlkb3I6IFJlY3VwZXJhIG1pc3NhdGdlcyBkZSBsYSBjdWEKbWVzc2FnZSA9IHIucnBvcCgnbXlfcXVldWUnKQpwcmludChmIkNvbnN1bWVkOiB7bWVzc2FnZS5kZWNvZGUoJ3V0Zi04Jyl9Iik="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import redis

# Connectar-se a Redis
r = redis.Redis(host='localhost', port=6379, db=0)

# Productor: Afegeix missatges a la cua
r.lpush('my_queue', 'message1')
r.lpush('my_queue', 'message2')

# Consumidor: Recupera missatges de la cua
message = r.rpop('my_queue')
print(f&quot;Consumed: {message.decode('utf-8')}&quot;)</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li>El productor utilitza <code>LPUSH</code> per afegir missatges al cap de la llista.</li>
<li>El consumidor utilitza <code>RPOP</code> per recuperar missatges de la cua de la llista, assegurant l'ordre FIFO.</li>
</ul>
</div><h1>Implementació de cues de missatges amb Pub/Sub</h1>
<div class='content'></div><h2>Operacions bàsiques</h2>
<div class='content'><p>En el model Pub/Sub, els missatges es publiquen als canals, i els subscriptors reben missatges d'aquests canals.</p>
<ul>
<li><strong>PUBLISH</strong>: Envia un missatge a un canal.</li>
<li><strong>SUBSCRIBE</strong>: Escolta missatges en un canal.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHJlZGlzCgojIENvbm5lY3Rhci1zZSBhIFJlZGlzCnIgPSByZWRpcy5SZWRpcyhob3N0PSdsb2NhbGhvc3QnLCBwb3J0PTYzNzksIGRiPTApCgojIFB1YmxpY2Fkb3IKZGVmIHB1Ymxpc2hlcigpOgogICAgci5wdWJsaXNoKCdteV9jaGFubmVsJywgJ0hlbGxvLCBXb3JsZCEnKQoKIyBTdWJzY3JpcHRvcgpkZWYgc3Vic2NyaWJlcigpOgogICAgcHVic3ViID0gci5wdWJzdWIoKQogICAgcHVic3ViLnN1YnNjcmliZSgnbXlfY2hhbm5lbCcpCiAgICBmb3IgbWVzc2FnZSBpbiBwdWJzdWIubGlzdGVuKCk6CiAgICAgICAgaWYgbWVzc2FnZVsndHlwZSddID09ICdtZXNzYWdlJzoKICAgICAgICAgICAgcHJpbnQoZiJSZWNlaXZlZDoge21lc3NhZ2VbJ2RhdGEnXS5kZWNvZGUoJ3V0Zi04Jyl9IikKCiMgRXhlY3V0YXIgZWwgcHVibGljYWRvciBpIGVsIHN1YnNjcmlwdG9yIGVuIGZpbHMgbyBwcm9jZXNzb3Mgc2VwYXJhdHM="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import redis

# Connectar-se a Redis
r = redis.Redis(host='localhost', port=6379, db=0)

# Publicador
def publisher():
    r.publish('my_channel', 'Hello, World!')

# Subscriptor
def subscriber():
    pubsub = r.pubsub()
    pubsub.subscribe('my_channel')
    for message in pubsub.listen():
        if message['type'] == 'message':
            print(f&quot;Received: {message['data'].decode('utf-8')}&quot;)

# Executar el publicador i el subscriptor en fils o processos separats</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li>El publicador envia missatges a un canal utilitzant <code>PUBLISH</code>.</li>
<li>El subscriptor escolta missatges en el canal utilitzant <code>SUBSCRIBE</code>.</li>
</ul>
</div><h1>Implementació de cues de missatges amb Streams</h1>
<div class='content'></div><h2>Operacions bàsiques</h2>
<div class='content'><p>Els Streams de Redis proporcionen una manera més avançada i flexible de gestionar cues de missatges.</p>
<ul>
<li><strong>XADD</strong>: Afegeix un missatge a un stream.</li>
<li><strong>XREAD</strong>: Llegeix missatges d'un stream.</li>
<li><strong>XGROUP</strong>: Gestiona grups de consumidors per a streams.</li>
</ul>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHJlZGlzCgojIENvbm5lY3Rhci1zZSBhIFJlZGlzCnIgPSByZWRpcy5SZWRpcyhob3N0PSdsb2NhbGhvc3QnLCBwb3J0PTYzNzksIGRiPTApCgojIFByb2R1Y3RvcjogQWZlZ2VpeCBtaXNzYXRnZXMgYWwgc3RyZWFtCnIueGFkZCgnbXlzdHJlYW0nLCB7J21lc3NhZ2UnOiAnSGVsbG8sIFN0cmVhbSEnfSkKCiMgQ29uc3VtaWRvcjogTGxlZ2VpeCBtaXNzYXRnZXMgZGVsIHN0cmVhbQptZXNzYWdlcyA9IHIueHJlYWQoeydteXN0cmVhbSc6ICcwLTAnfSwgY291bnQ9MSwgYmxvY2s9MCkKZm9yIHN0cmVhbSwgbWVzc2FnZV9saXN0IGluIG1lc3NhZ2VzOgogICAgZm9yIG1lc3NhZ2VfaWQsIG1lc3NhZ2UgaW4gbWVzc2FnZV9saXN0OgogICAgICAgIHByaW50KGYiQ29uc3VtZWQ6IHttZXNzYWdlW2InbWVzc2FnZSddLmRlY29kZSgndXRmLTgnKX0iKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import redis

# Connectar-se a Redis
r = redis.Redis(host='localhost', port=6379, db=0)

# Productor: Afegeix missatges al stream
r.xadd('mystream', {'message': 'Hello, Stream!'})

# Consumidor: Llegeix missatges del stream
messages = r.xread({'mystream': '0-0'}, count=1, block=0)
for stream, message_list in messages:
    for message_id, message in message_list:
        print(f&quot;Consumed: {message[b'message'].decode('utf-8')}&quot;)</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li>El productor utilitza <code>XADD</code> per afegir missatges al stream.</li>
<li>El consumidor utilitza <code>XREAD</code> per llegir missatges del stream.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Redis proporciona múltiples maneres d'implementar cues de missatges, cadascuna amb els seus punts forts i casos d'ús:</p>
<ul>
<li><strong>Llistes</strong>: Simple i efectiva per a cues FIFO bàsiques.</li>
<li><strong>Pub/Sub</strong>: Adequat per a missatgeria en temps real on múltiples consumidors necessiten rebre el mateix missatge.</li>
<li><strong>Streams</strong>: Ideal per a escenaris més complexos que requereixen funcions avançades com grups de consumidors i persistència de missatges.</li>
</ul>
<p>Entendre aquests diferents enfocaments et permetrà triar la millor eina per a les teves necessitats específiques, aprofitant les potents capacitats de Redis per construir sistemes de cues de missatges eficients i escalables.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
