<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuració de la Persistència</title>

    <link rel="alternate" href="https://campusempresa.com/es/redis/persistence-configuration" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/redis/persistence-configuration" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/redis/persistence-configuration" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/redis/persistence-configuration" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducció a la Persistència en Redis</h1>
<div class='content'><p>Redis és un magatzem de dades en memòria, el que significa que principalment emmagatzema dades en RAM. No obstant això, per assegurar la durabilitat de les dades i la recuperació en cas de fallades, Redis proporciona diversos mecanismes de persistència. Entendre i configurar aquests mecanismes és crucial per mantenir la integritat i la disponibilitat de les dades.</p>
</div><h1>Tipus de Persistència en Redis</h1>
<div class='content'><p>Redis ofereix dos tipus principals de persistència:</p>
<ul>
<li><strong>Instantànies RDB (Redis Database)</strong></li>
<li><strong>AOF (Fitxer Només Afegeix)</strong></li>
</ul>
</div><h2>Instantànies RDB</h2>
<div class='content'><p>Les instantànies RDB creen instantànies puntuals del teu conjunt de dades a intervals especificats.</p>
<h4>Conceptes Clau:</h4>
<ul>
<li><strong>Freqüència de les Instantànies</strong>: Configurable per determinar amb quina freqüència es prenen les instantànies.</li>
<li><strong>Emmagatzematge</strong>: Les instantànies s'emmagatzemen com a fitxers binaris en disc.</li>
<li><strong>Rendiment</strong>: Impacte mínim en el rendiment de Redis durant la creació de les instantànies.</li>
</ul>
<h4>Configuració:</h4>
<p>Per configurar les instantànies RDB, cal modificar el fitxer <code>redis.conf</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBEZXNhIGxhIEJEIGNhZGEgOTAwIHNlZ29ucyAoMTUgbWludXRzKSBzaSBhbG1lbnlzIDEgY2xhdSBoYSBjYW52aWF0CnNhdmUgOTAwIDEKCiMgRGVzYSBsYSBCRCBjYWRhIDMwMCBzZWdvbnMgKDUgbWludXRzKSBzaSBhbG1lbnlzIDEwIGNsYXVzIGhhbiBjYW52aWF0CnNhdmUgMzAwIDEwCgojIERlc2EgbGEgQkQgY2FkYSA2MCBzZWdvbnMgc2kgYWxtZW55cyAxMDAwMCBjbGF1cyBoYW4gY2FudmlhdApzYXZlIDYwIDEwMDAwCgojIFViaWNhY2nDsyBkZWwgZml0eGVyIFJEQgpkYmZpbGVuYW1lIGR1bXAucmRiCgojIERpcmVjdG9yaSBvbiBkZXNhciBlbCBmaXR4ZXIgUkRCCmRpciAvdmFyL2xpYi9yZWRpcw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Desa la BD cada 900 segons (15 minuts) si almenys 1 clau ha canviat
save 900 1

# Desa la BD cada 300 segons (5 minuts) si almenys 10 claus han canviat
save 300 10

# Desa la BD cada 60 segons si almenys 10000 claus han canviat
save 60 10000

# Ubicaci&oacute; del fitxer RDB
dbfilename dump.rdb

# Directori on desar el fitxer RDB
dir /var/lib/redis</pre></div><div class='content'></div><h2>AOF (Fitxer Només Afegeix)</h2>
<div class='content'><p>AOF registra cada operació d'escriptura rebuda pel servidor, que es pot reproduir per reconstruir el conjunt de dades.</p>
<h4>Conceptes Clau:</h4>
<ul>
<li><strong>Durabilitat d'Escriptura</strong>: Assegura que cada canvi es registri.</li>
<li><strong>Mida del Fitxer</strong>: Els fitxers AOF poden créixer molt amb el temps.</li>
<li><strong>Mecanisme de Reescriptura</strong>: Reescriu periòdicament el fitxer AOF per reduir la seva mida.</li>
</ul>
<h4>Configuració:</h4>
<p>Per habilitar i configurar AOF, cal modificar el fitxer <code>redis.conf</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBIYWJpbGl0YXIgQU9GCmFwcGVuZG9ubHkgeWVzCgojIE5vbSBkZWwgZml0eGVyIEFPRgphcHBlbmRmaWxlbmFtZSAiYXBwZW5kb25seS5hb2YiCgojIFBvbMOtdGljYSBkZSBmc3luYyBkJ0FPRiAoYWx3YXlzLCBldmVyeXNlYywgbm8pCiMgYWx3YXlzOiBmc3luYyBkZXNwcsOpcyBkZSBjYWRhIGVzY3JpcHR1cmEgKGxlbnQsIHNlZ3VyKQojIGV2ZXJ5c2VjOiBmc3luYyBjYWRhIHNlZ29uIChlcXVpbGlicmF0KQojIG5vOiBkZWl4YSBxdWUgZWwgU08gZ2VzdGlvbmkgKHLDoHBpZCwgbWVueXMgc2VndXIpCmFwcGVuZGZzeW5jIGV2ZXJ5c2VjCgojIENvbmZpZ3VyYWNpw7MgYXV0b23DoHRpY2EgZGUgcmVlc2NyaXB0dXJhIGQnQU9GCmF1dG8tYW9mLXJld3JpdGUtcGVyY2VudGFnZSAxMDAKYXV0by1hb2YtcmV3cml0ZS1taW4tc2l6ZSA2NG1i"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Habilitar AOF
appendonly yes

# Nom del fitxer AOF
appendfilename &quot;appendonly.aof&quot;

# Pol&iacute;tica de fsync d'AOF (always, everysec, no)
# always: fsync despr&eacute;s de cada escriptura (lent, segur)
# everysec: fsync cada segon (equilibrat)
# no: deixa que el SO gestioni (r&agrave;pid, menys segur)
appendfsync everysec

# Configuraci&oacute; autom&agrave;tica de reescriptura d'AOF
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb</pre></div><div class='content'></div><h1>Triar Entre RDB i AOF</h1>
<div class='content'><p>Cada mètode de persistència té els seus pros i contres. La tria depèn del teu cas d'ús específic.</p>
<p>| Característica        | Instantànies RDB               | AOF                              |
|-----------------------|--------------------------------|----------------------------------|
| Durabilitat           | Menys durable                  | Més durable                      |
| Impacte en el Rendiment | Menor durant l'operació normal | Major degut al registre de cada escriptura |
| Velocitat de Recuperació | Més ràpida                    | Més lenta                        |
| Mida del Fitxer       | Més petita                     | Més gran                         |
| Cas d'Ús              | Adequat per a còpies de seguretat | Adequat per a necessitats d'alta durabilitat |</p>
</div><h1>Millors Pràctiques per a la Configuració de la Persistència</h1>
<div class='content'><ul>
<li><strong>Combinar RDB i AOF</strong>: Utilitza ambdós per equilibrar entre rendiment i durabilitat.</li>
<li><strong>Còpies de Seguretat Regulars</strong>: Programa còpies de seguretat regulars dels teus fitxers RDB.</li>
<li><strong>Monitoritzar l'Espai en Disc</strong>: Assegura suficient espai en disc per als fitxers AOF.</li>
<li><strong>Ajustar la Política de fsync</strong>: Ajusta la política <code>appendfsync</code> segons els teus requisits de rendiment i durabilitat.</li>
</ul>
</div><h1>Exemple de Configuració</h1>
<div class='content'><p>Aquí tens un exemple d'una configuració combinada de RDB i AOF en <code>redis.conf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb25maWd1cmFjacOzIGRlIFJEQgpzYXZlIDkwMCAxCnNhdmUgMzAwIDEwCnNhdmUgNjAgMTAwMDAKZGJmaWxlbmFtZSBkdW1wLnJkYgpkaXIgL3Zhci9saWIvcmVkaXMKCiMgQ29uZmlndXJhY2nDsyBkJ0FPRgphcHBlbmRvbmx5IHllcwphcHBlbmRmaWxlbmFtZSAiYXBwZW5kb25seS5hb2YiCmFwcGVuZGZzeW5jIGV2ZXJ5c2VjCmF1dG8tYW9mLXJld3JpdGUtcGVyY2VudGFnZSAxMDAKYXV0by1hb2YtcmV3cml0ZS1taW4tc2l6ZSA2NG1i"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Configuraci&oacute; de RDB
save 900 1
save 300 10
save 60 10000
dbfilename dump.rdb
dir /var/lib/redis

# Configuraci&oacute; d'AOF
appendonly yes
appendfilename &quot;appendonly.aof&quot;
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Entendre i configurar la persistència de Redis és essencial per assegurar la durabilitat i la disponibilitat de les dades. Mitjançant l'ús d'instantànies RDB i AOF, pots aconseguir un equilibri entre rendiment i seguretat de les dades. Revisa i ajusta regularment els teus paràmetres de persistència per alinear-los amb els requisits de la teva aplicació i els patrons de càrrega de treball.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
