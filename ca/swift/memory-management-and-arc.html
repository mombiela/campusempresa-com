<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://campusempresa.com/swift/memory-management-and-arc" id="lnk_lang_es" data-lang="es">Castellano</a></b>
				|
				<b id="lit_lang_ca">Catala</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>La gestió de memòria és un aspecte crucial de la programació en Swift, assegurant que la teva aplicació utilitzi la memòria de manera eficient i eviti les fuites. Swift utilitza el Comptatge Automàtic de Referències (ARC) per gestionar la memòria automàticament. Aquesta secció et guiarà des dels conceptes bàsics fins als avançats de la gestió de memòria i ARC en Swift.</p>
</div><h1>Introducció a la Gestió de Memòria</h1>
<div class='content'><p>La gestió de memòria implica el seguiment i el control de l'assignació i la desassignació de memòria a la teva aplicació. Una gestió de memòria adequada assegura que la teva aplicació funcioni eficientment i eviti les fuites de memòria, que poden provocar bloquejos o un rendiment lent.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Assignació de Memòria</strong>: Reservar una porció de memòria per a l'ús de la teva aplicació.</li>
<li><strong>Desassignació de Memòria</strong>: Alliberar la memòria reservada quan ja no és necessària.</li>
<li><strong>Fuita de Memòria</strong>: Es produeix quan la memòria que ja no és necessària no s'allibera, causant un augment gradual en l'ús de memòria.</li>
</ul>
</div><h1>Comptatge Automàtic de Referències (ARC)</h1>
<div class='content'><p>Swift utilitza ARC per gestionar l'ús de memòria mantenint un seguiment del nombre de referències a cada instància de classe. Quan ja no hi ha més referències a una instància, ARC la desallotja automàticament per alliberar memòria.</p>
</div><h2>Com Funciona ARC</h2>
<div class='content'><ul>
<li><strong>Referències Fortes</strong>: Per defecte, cada referència a una instància de classe és una referència forta, el que significa que manté la instància en memòria mentre la referència existeixi.</li>
<li><strong>Referències Febles</strong>: Una referència feble no manté una forta retenció sobre la instància, permetent que sigui desallotjada si no hi ha altres referències fortes.</li>
<li><strong>Referències No Propietàries</strong>: Similar a les referències febles però s'utilitzen quan s'espera que la referència sempre tingui un valor durant la seva vida útil.</li>
</ul>
</div><h2>Exemple de Codi: Referències Fortes</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgUGVyc29uIHsKICAgIGxldCBuYW1lOiBTdHJpbmcKICAgIGluaXQobmFtZTogU3RyaW5nKSB7CiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQogICAgICAgIHByaW50KCJcKG5hbWUpIGVzdMOgIHNlbnQgaW5pY2lhbGl0emF0IikKICAgIH0KICAgIGRlaW5pdCB7CiAgICAgICAgcHJpbnQoIlwobmFtZSkgZXN0w6Agc2VudCBkZXNpbmljaWFsaXR6YXQiKQogICAgfQp9Cgp2YXIgcmVmZXJlbmNlMTogUGVyc29uPyA9IFBlcnNvbihuYW1lOiAiSm9obiIpCnZhciByZWZlcmVuY2UyID0gcmVmZXJlbmNlMQp2YXIgcmVmZXJlbmNlMyA9IHJlZmVyZW5jZTEKCnJlZmVyZW5jZTEgPSBuaWwKcmVmZXJlbmNlMiA9IG5pbApyZWZlcmVuY2UzID0gbmlsCi8vIFNvcnRpZGE6IEpvaG4gZXN0w6Agc2VudCBkZXNpbmljaWFsaXR6YXQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Person {
    let name: String
    init(name: String) {
        self.name = name
        print(&quot;\(name) est&agrave; sent inicialitzat&quot;)
    }
    deinit {
        print(&quot;\(name) est&agrave; sent desinicialitzat&quot;)
    }
}

var reference1: Person? = Person(name: &quot;John&quot;)
var reference2 = reference1
var reference3 = reference1

reference1 = nil
reference2 = nil
reference3 = nil
// Sortida: John est&agrave; sent desinicialitzat</pre></div><div class='content'><p>En aquest exemple:</p>
<ul>
<li><code>reference1</code>, <code>reference2</code> i <code>reference3</code> són referències fortes a la instància <code>Person</code>.</li>
<li>La instància es desallotja només quan totes les referències es posen a <code>nil</code>.</li>
</ul>
</div><h2>Exemple de Codi: Referències Febles</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgUGVyc29uIHsKICAgIGxldCBuYW1lOiBTdHJpbmcKICAgIGluaXQobmFtZTogU3RyaW5nKSB7CiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQogICAgICAgIHByaW50KCJcKG5hbWUpIGVzdMOgIHNlbnQgaW5pY2lhbGl0emF0IikKICAgIH0KICAgIGRlaW5pdCB7CiAgICAgICAgcHJpbnQoIlwobmFtZSkgZXN0w6Agc2VudCBkZXNpbmljaWFsaXR6YXQiKQogICAgfQp9CgpjbGFzcyBBcGFydG1lbnQgewogICAgbGV0IHVuaXQ6IFN0cmluZwogICAgd2VhayB2YXIgdGVuYW50OiBQZXJzb24/CiAgICBpbml0KHVuaXQ6IFN0cmluZykgewogICAgICAgIHNlbGYudW5pdCA9IHVuaXQKICAgIH0KfQoKdmFyIGpvaG46IFBlcnNvbj8gPSBQZXJzb24obmFtZTogIkpvaG4iKQp2YXIgdW5pdDRBOiBBcGFydG1lbnQ/ID0gQXBhcnRtZW50KHVuaXQ6ICI0QSIpCgp1bml0NEE/LnRlbmFudCA9IGpvaG4Kam9obiA9IG5pbAovLyBTb3J0aWRhOiBKb2huIGVzdMOgIHNlbnQgZGVzaW5pY2lhbGl0emF0"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Person {
    let name: String
    init(name: String) {
        self.name = name
        print(&quot;\(name) est&agrave; sent inicialitzat&quot;)
    }
    deinit {
        print(&quot;\(name) est&agrave; sent desinicialitzat&quot;)
    }
}

class Apartment {
    let unit: String
    weak var tenant: Person?
    init(unit: String) {
        self.unit = unit
    }
}

var john: Person? = Person(name: &quot;John&quot;)
var unit4A: Apartment? = Apartment(unit: &quot;4A&quot;)

unit4A?.tenant = john
john = nil
// Sortida: John est&agrave; sent desinicialitzat</pre></div><div class='content'><p>En aquest exemple:</p>
<ul>
<li><code>tenant</code> és una referència feble a la instància <code>Person</code>.</li>
<li>La instància <code>Person</code> es desallotja quan <code>john</code> es posa a <code>nil</code>, encara que <code>tenant</code> encara mantingui una referència.</li>
</ul>
</div><h2>Exemple de Codi: Referències No Propietàries</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQ3VzdG9tZXIgewogICAgbGV0IG5hbWU6IFN0cmluZwogICAgdmFyIGNhcmQ6IENyZWRpdENhcmQ/CiAgICBpbml0KG5hbWU6IFN0cmluZykgewogICAgICAgIHNlbGYubmFtZSA9IG5hbWUKICAgIH0KICAgIGRlaW5pdCB7CiAgICAgICAgcHJpbnQoIlwobmFtZSkgZXN0w6Agc2VudCBkZXNpbmljaWFsaXR6YXQiKQogICAgfQp9CgpjbGFzcyBDcmVkaXRDYXJkIHsKICAgIGxldCBudW1iZXI6IFVJbnQ2NAogICAgdW5vd25lZCBsZXQgY3VzdG9tZXI6IEN1c3RvbWVyCiAgICBpbml0KG51bWJlcjogVUludDY0LCBjdXN0b21lcjogQ3VzdG9tZXIpIHsKICAgICAgICBzZWxmLm51bWJlciA9IG51bWJlcgogICAgICAgIHNlbGYuY3VzdG9tZXIgPSBjdXN0b21lcgogICAgfQogICAgZGVpbml0IHsKICAgICAgICBwcmludCgiTGEgdGFyZ2V0YSAjXChudW1iZXIpIGVzdMOgIHNlbnQgZGVzaW5pY2lhbGl0emFkYSIpCiAgICB9Cn0KCnZhciBqb2huOiBDdXN0b21lcj8gPSBDdXN0b21lcihuYW1lOiAiSm9obiIpCmpvaG4/LmNhcmQgPSBDcmVkaXRDYXJkKG51bWJlcjogMTIzNF81Njc4XzkwMTJfMzQ1NiwgY3VzdG9tZXI6IGpvaG4hKQoKam9obiA9IG5pbAovLyBTb3J0aWRhOiBKb2huIGVzdMOgIHNlbnQgZGVzaW5pY2lhbGl0emF0Ci8vIFNvcnRpZGE6IExhIHRhcmdldGEgIzEyMzQ1Njc4OTAxMjM0NTYgZXN0w6Agc2VudCBkZXNpbmljaWFsaXR6YWRh"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Customer {
    let name: String
    var card: CreditCard?
    init(name: String) {
        self.name = name
    }
    deinit {
        print(&quot;\(name) est&agrave; sent desinicialitzat&quot;)
    }
}

class CreditCard {
    let number: UInt64
    unowned let customer: Customer
    init(number: UInt64, customer: Customer) {
        self.number = number
        self.customer = customer
    }
    deinit {
        print(&quot;La targeta #\(number) est&agrave; sent desinicialitzada&quot;)
    }
}

var john: Customer? = Customer(name: &quot;John&quot;)
john?.card = CreditCard(number: 1234_5678_9012_3456, customer: john!)

john = nil
// Sortida: John est&agrave; sent desinicialitzat
// Sortida: La targeta #1234567890123456 est&agrave; sent desinicialitzada</pre></div><div class='content'><p>En aquest exemple:</p>
<ul>
<li><code>customer</code> és una referència no propietària a la instància <code>Customer</code>.</li>
<li>Tant les instàncies <code>Customer</code> com <code>CreditCard</code> es desallotgen quan <code>john</code> es posa a <code>nil</code>.</li>
</ul>
</div><h1>Cicles de Retenció</h1>
<div class='content'><p>Un cicle de retenció es produeix quan dues o més instàncies mantenen referències fortes entre si, impedint que ARC les desallotgi. Això pot provocar fuites de memòria.</p>
</div><h2>Exemple d'un Cicle de Retenció</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgUGVyc29uIHsKICAgIGxldCBuYW1lOiBTdHJpbmcKICAgIHZhciBhcGFydG1lbnQ6IEFwYXJ0bWVudD8KICAgIGluaXQobmFtZTogU3RyaW5nKSB7CiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQogICAgfQogICAgZGVpbml0IHsKICAgICAgICBwcmludCgiXChuYW1lKSBlc3TDoCBzZW50IGRlc2luaWNpYWxpdHphdCIpCiAgICB9Cn0KCmNsYXNzIEFwYXJ0bWVudCB7CiAgICBsZXQgdW5pdDogU3RyaW5nCiAgICB2YXIgdGVuYW50OiBQZXJzb24/CiAgICBpbml0KHVuaXQ6IFN0cmluZykgewogICAgICAgIHNlbGYudW5pdCA9IHVuaXQKICAgIH0KICAgIGRlaW5pdCB7CiAgICAgICAgcHJpbnQoIkwnYXBhcnRhbWVudCBcKHVuaXQpIGVzdMOgIHNlbnQgZGVzaW5pY2lhbGl0emF0IikKICAgIH0KfQoKdmFyIGpvaG46IFBlcnNvbj8gPSBQZXJzb24obmFtZTogIkpvaG4iKQp2YXIgdW5pdDRBOiBBcGFydG1lbnQ/ID0gQXBhcnRtZW50KHVuaXQ6ICI0QSIpCgpqb2huPy5hcGFydG1lbnQgPSB1bml0NEEKdW5pdDRBPy50ZW5hbnQgPSBqb2huCgpqb2huID0gbmlsCnVuaXQ0QSA9IG5pbAovLyBObyBlcyBtb3N0cmVuIG1pc3NhdGdlcyBkZSBkZXNpbmljaWFsaXR6YWNpw7MsIGluZGljYW50IHVuIGNpY2xlIGRlIHJldGVuY2nDsw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Person {
    let name: String
    var apartment: Apartment?
    init(name: String) {
        self.name = name
    }
    deinit {
        print(&quot;\(name) est&agrave; sent desinicialitzat&quot;)
    }
}

class Apartment {
    let unit: String
    var tenant: Person?
    init(unit: String) {
        self.unit = unit
    }
    deinit {
        print(&quot;L'apartament \(unit) est&agrave; sent desinicialitzat&quot;)
    }
}

var john: Person? = Person(name: &quot;John&quot;)
var unit4A: Apartment? = Apartment(unit: &quot;4A&quot;)

john?.apartment = unit4A
unit4A?.tenant = john

john = nil
unit4A = nil
// No es mostren missatges de desinicialitzaci&oacute;, indicant un cicle de retenci&oacute;</pre></div><div class='content'></div><h2>Trencar Cicles de Retenció</h2>
<div class='content'><p>Per trencar cicles de retenció, utilitza referències febles o no propietàries de manera adequada.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgUGVyc29uIHsKICAgIGxldCBuYW1lOiBTdHJpbmcKICAgIHZhciBhcGFydG1lbnQ6IEFwYXJ0bWVudD8KICAgIGluaXQobmFtZTogU3RyaW5nKSB7CiAgICAgICAgc2VsZi5uYW1lID0gbmFtZQogICAgfQogICAgZGVpbml0IHsKICAgICAgICBwcmludCgiXChuYW1lKSBlc3TDoCBzZW50IGRlc2luaWNpYWxpdHphdCIpCiAgICB9Cn0KCmNsYXNzIEFwYXJ0bWVudCB7CiAgICBsZXQgdW5pdDogU3RyaW5nCiAgICB3ZWFrIHZhciB0ZW5hbnQ6IFBlcnNvbj8KICAgIGluaXQodW5pdDogU3RyaW5nKSB7CiAgICAgICAgc2VsZi51bml0ID0gdW5pdAogICAgfQogICAgZGVpbml0IHsKICAgICAgICBwcmludCgiTCdhcGFydGFtZW50IFwodW5pdCkgZXN0w6Agc2VudCBkZXNpbmljaWFsaXR6YXQiKQogICAgfQp9Cgp2YXIgam9objogUGVyc29uPyA9IFBlcnNvbihuYW1lOiAiSm9obiIpCnZhciB1bml0NEE6IEFwYXJ0bWVudD8gPSBBcGFydG1lbnQodW5pdDogIjRBIikKCmpvaG4/LmFwYXJ0bWVudCA9IHVuaXQ0QQp1bml0NEE/LnRlbmFudCA9IGpvaG4KCmpvaG4gPSBuaWwKdW5pdDRBID0gbmlsCi8vIFNvcnRpZGE6IEpvaG4gZXN0w6Agc2VudCBkZXNpbmljaWFsaXR6YXQKLy8gU29ydGlkYTogTCdhcGFydGFtZW50IDRBIGVzdMOgIHNlbnQgZGVzaW5pY2lhbGl0emF0"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Person {
    let name: String
    var apartment: Apartment?
    init(name: String) {
        self.name = name
    }
    deinit {
        print(&quot;\(name) est&agrave; sent desinicialitzat&quot;)
    }
}

class Apartment {
    let unit: String
    weak var tenant: Person?
    init(unit: String) {
        self.unit = unit
    }
    deinit {
        print(&quot;L'apartament \(unit) est&agrave; sent desinicialitzat&quot;)
    }
}

var john: Person? = Person(name: &quot;John&quot;)
var unit4A: Apartment? = Apartment(unit: &quot;4A&quot;)

john?.apartment = unit4A
unit4A?.tenant = john

john = nil
unit4A = nil
// Sortida: John est&agrave; sent desinicialitzat
// Sortida: L'apartament 4A est&agrave; sent desinicialitzat</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>La gestió de memòria i ARC són essencials per escriure aplicacions Swift eficients i robustes. Comprenent com funciona ARC i com utilitzar referències fortes, febles i no propietàries, pots prevenir fuites de memòria i cicles de retenció. Practica aquests conceptes amb els exemples proporcionats per obtenir una comprensió més profunda i assegurar que les teves aplicacions gestionin la memòria de manera efectiva.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
