<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apache Oozie</title>

    <link rel="alternate" href="https://campusempresa.com/es/hadoop/apache-oozie" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/hadoop/apache-oozie" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/hadoop/apache-oozie" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/hadoop/apache-oozie" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='apache-flume'>&#x25C4; Apache Flume</a></div><div class='col-6 text-end'><a href='apache-zookeeper'>Apache Zookeeper &#x25BA;</a></div></div><div class='content'></div><h1>Introducció a Apache Oozie</h1>
<div class='content'><p>Apache Oozie és un sistema de programació de fluxos de treball per gestionar treballs de Hadoop. Permet als usuaris definir una seqüència d'accions per ser executades en un ordre específic, facilitant la gestió de canals de processament de dades complexos.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Flux de treball</strong>: Una col·lecció d'accions disposades en un Graf Dirigit Acíclic (DAG).</li>
<li><strong>Coordinador</strong>: Gestiona fluxos de treball basats en el temps i la disponibilitat de dades.</li>
<li><strong>Paquet</strong>: Una abstracció de nivell superior que agrupa múltiples coordinadors.</li>
<li><strong>Acció</strong>: Una unitat de treball única en un flux de treball (per exemple, treball MapReduce, script Pig, consulta Hive).</li>
</ul>
</div><h1>Configuració d'Apache Oozie</h1>
<h2>Prerequisits</h2>
<div class='content'><ul>
<li>Configuració del clúster de Hadoop</li>
<li>Kit de Desenvolupament de Java (JDK) instal·lat</li>
<li>Binàries d'Apache Oozie</li>
</ul>
</div><h2>Passos d'Instal·lació</h2>
<div class='content'><ol>
<li>
<p><strong>Descarregar Apache Oozie</strong>:</p>
<pre><code class="language-bash">wget http://apache.mirrors.tds.net/oozie/5.2.0/oozie-5.2.0.tar.gz
tar -xzf oozie-5.2.0.tar.gz
cd oozie-5.2.0
</code></pre>
</li>
<li>
<p><strong>Configurar Oozie</strong>:</p>
<ul>
<li>Edita <code>oozie-site.xml</code> per configurar la base de dades i els paràmetres de Hadoop.</li>
<li>Exemple de configuració:
<pre><code class="language-xml">&lt;property&gt;
  &lt;name&gt;oozie.service.JPAService.jdbc.url&lt;/name&gt;
  &lt;value&gt;jdbc:mysql://localhost:3306/oozie&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
  &lt;name&gt;oozie.service.JPAService.jdbc.username&lt;/name&gt;
  &lt;value&gt;oozie&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
  &lt;name&gt;oozie.service.JPAService.jdbc.password&lt;/name&gt;
  &lt;value&gt;password&lt;/value&gt;
&lt;/property&gt;
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Desplegar Oozie</strong>:</p>
<pre><code class="language-bash">bin/oozie-setup.sh prepare-war
bin/oozie-setup.sh db-schema
</code></pre>
</li>
<li>
<p><strong>Iniciar Oozie</strong>:</p>
<pre><code class="language-bash">bin/oozied.sh start
</code></pre>
</li>
</ol>
</div><h1>Creació i Execució de Fluxos de Treball</h1>
<h2>Definició del Flux de Treball</h2>
<div class='content'><p>Els fluxos de treball es defineixen utilitzant XML. A continuació es mostra un exemple d'un flux de treball senzill que executa un script shell.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHdvcmtmbG93LWFwcCBuYW1lPSJleGFtcGxlLXdmIiB4bWxucz0idXJpOm9vemllOndvcmtmbG93OjAuNSI+CiAgICA8c3RhcnQgdG89InNoZWxsLW5vZGUiLz4KICAgIAogICAgPGFjdGlvbiBuYW1lPSJzaGVsbC1ub2RlIj4KICAgICAgICA8c2hlbGwgeG1sbnM9InVyaTpvb3ppZTpzaGVsbC1hY3Rpb246MC4yIj4KICAgICAgICAgICAgPGpvYi10cmFja2VyPiR7am9iVHJhY2tlcn08L2pvYi10cmFja2VyPgogICAgICAgICAgICA8bmFtZS1ub2RlPiR7bmFtZU5vZGV9PC9uYW1lLW5vZGU+CiAgICAgICAgICAgIDxleGVjPmV4YW1wbGUuc2g8L2V4ZWM+CiAgICAgICAgPC9zaGVsbD4KICAgICAgICA8b2sgdG89ImVuZCIvPgogICAgICAgIDxlcnJvciB0bz0iZmFpbCIvPgogICAgPC9hY3Rpb24+CiAgICAKICAgIDxraWxsIG5hbWU9ImZhaWwiPgogICAgICAgIDxtZXNzYWdlPldvcmtmbG93IGZhaWxlZCwgZXJyb3IgbWVzc2FnZVske3dmOmVycm9yTWVzc2FnZSh3ZjpsYXN0RXJyb3JOb2RlKCkpfV08L21lc3NhZ2U+CiAgICA8L2tpbGw+CiAgICAKICAgIDxlbmQgbmFtZT0iZW5kIi8+Cjwvd29ya2Zsb3ctYXBwPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;workflow-app name=&quot;example-wf&quot; xmlns=&quot;uri:oozie:workflow:0.5&quot;&gt;
    &lt;start to=&quot;shell-node&quot;/&gt;
    
    &lt;action name=&quot;shell-node&quot;&gt;
        &lt;shell xmlns=&quot;uri:oozie:shell-action:0.2&quot;&gt;
            &lt;job-tracker&gt;${jobTracker}&lt;/job-tracker&gt;
            &lt;name-node&gt;${nameNode}&lt;/name-node&gt;
            &lt;exec&gt;example.sh&lt;/exec&gt;
        &lt;/shell&gt;
        &lt;ok to=&quot;end&quot;/&gt;
        &lt;error to=&quot;fail&quot;/&gt;
    &lt;/action&gt;
    
    &lt;kill name=&quot;fail&quot;&gt;
        &lt;message&gt;Workflow failed, error message[${wf:errorMessage(wf:lastErrorNode())}]&lt;/message&gt;
    &lt;/kill&gt;
    
    &lt;end name=&quot;end&quot;/&gt;
&lt;/workflow-app&gt;</pre></div><div class='content'></div><h2>Execució del Flux de Treball</h2>
<div class='content'><ol>
<li>
<p><strong>Pujar el Flux de Treball a HDFS</strong>:</p>
<pre><code class="language-bash">hdfs dfs -put workflow.xml /user/oozie/workflows/example-wf/
</code></pre>
</li>
<li>
<p><strong>Enviar el Flux de Treball</strong>:</p>
<pre><code class="language-bash">oozie job -oozie http://localhost:11000/oozie -config job.properties -run
</code></pre>
</li>
</ol>
</div><h2>Monitorització i Gestió de Fluxos de Treball</h2>
<div class='content'><ul>
<li>Utilitza la consola web d'Oozie per monitoritzar l'estat dels fluxos de treball.</li>
<li>Comandes per gestionar fluxos de treball:
<pre><code class="language-bash">oozie job -info &lt;job-id&gt;
oozie job -kill &lt;job-id&gt;
</code></pre>
</li>
</ul>
</div><h1>Funcionalitats Avançades</h1>
<h2>Coordinadors</h2>
<div class='content'><p>Els coordinadors desencadenen fluxos de treball basats en el temps o la disponibilitat de dades.</p>
<p>Exemple de definició de coordinador:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGNvb3JkaW5hdG9yLWFwcCBuYW1lPSJleGFtcGxlLWNvb3JkIiBmcmVxdWVuY3k9IjUiIHN0YXJ0PSIyMDIzLTAxLTAxVDAwOjAwWiIgZW5kPSIyMDIzLTEyLTMxVDAwOjAwWiIgdGltZXpvbmU9IlVUQyIgeG1sbnM9InVyaTpvb3ppZTpjb29yZGluYXRvcjowLjQiPgogICAgPGNvbnRyb2xzPgogICAgICAgIDx0aW1lb3V0PjEwPC90aW1lb3V0PgogICAgPC9jb250cm9scz4KICAgIDxkYXRhc2V0cz4KICAgICAgICA8ZGF0YXNldCBuYW1lPSJleGFtcGxlLWRhdGFzZXQiIGZyZXF1ZW5jeT0iNSIgaW5pdGlhbC1pbnN0YW5jZT0iMjAyMy0wMS0wMVQwMDowMFoiIHRpbWV6b25lPSJVVEMiPgogICAgICAgICAgICA8dXJpLXRlbXBsYXRlPmhkZnM6Ly9sb2NhbGhvc3Q6OTAwMC91c2VyL29vemllL2RhdGEvJHtZRUFSfS8ke01PTlRIfS8ke0RBWX0vJHtIT1VSfTwvdXJpLXRlbXBsYXRlPgogICAgICAgIDwvZGF0YXNldD4KICAgIDwvZGF0YXNldHM+CiAgICA8aW5wdXQtZXZlbnRzPgogICAgICAgIDxkYXRhLWluIG5hbWU9ImlucHV0IiBkYXRhc2V0PSJleGFtcGxlLWRhdGFzZXQiLz4KICAgIDwvaW5wdXQtZXZlbnRzPgogICAgPGFjdGlvbj4KICAgICAgICA8d29ya2Zsb3c+CiAgICAgICAgICAgIDxhcHAtcGF0aD5oZGZzOi8vbG9jYWxob3N0OjkwMDAvdXNlci9vb3ppZS93b3JrZmxvd3MvZXhhbXBsZS13ZjwvYXBwLXBhdGg+CiAgICAgICAgPC93b3JrZmxvdz4KICAgIDwvYWN0aW9uPgo8L2Nvb3JkaW5hdG9yLWFwcD4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;coordinator-app name=&quot;example-coord&quot; frequency=&quot;5&quot; start=&quot;2023-01-01T00:00Z&quot; end=&quot;2023-12-31T00:00Z&quot; timezone=&quot;UTC&quot; xmlns=&quot;uri:oozie:coordinator:0.4&quot;&gt;
    &lt;controls&gt;
        &lt;timeout&gt;10&lt;/timeout&gt;
    &lt;/controls&gt;
    &lt;datasets&gt;
        &lt;dataset name=&quot;example-dataset&quot; frequency=&quot;5&quot; initial-instance=&quot;2023-01-01T00:00Z&quot; timezone=&quot;UTC&quot;&gt;
            &lt;uri-template&gt;hdfs://localhost:9000/user/oozie/data/${YEAR}/${MONTH}/${DAY}/${HOUR}&lt;/uri-template&gt;
        &lt;/dataset&gt;
    &lt;/datasets&gt;
    &lt;input-events&gt;
        &lt;data-in name=&quot;input&quot; dataset=&quot;example-dataset&quot;/&gt;
    &lt;/input-events&gt;
    &lt;action&gt;
        &lt;workflow&gt;
            &lt;app-path&gt;hdfs://localhost:9000/user/oozie/workflows/example-wf&lt;/app-path&gt;
        &lt;/workflow&gt;
    &lt;/action&gt;
&lt;/coordinator-app&gt;</pre></div><div class='content'></div><h2>Paquets</h2>
<div class='content'><p>Els paquets agrupen múltiples coordinadors per a una gestió més fàcil.</p>
<p>Exemple de definició de paquet:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGJ1bmRsZS1hcHAgbmFtZT0iZXhhbXBsZS1idW5kbGUiIHhtbG5zPSJ1cmk6b296aWU6YnVuZGxlOjAuMiI+CiAgICA8Y29vcmRpbmF0b3IgbmFtZT0iY29vcmQxIj4KICAgICAgICA8YXBwLXBhdGg+aGRmczovL2xvY2FsaG9zdDo5MDAwL3VzZXIvb296aWUvY29vcmRpbmF0b3JzL2V4YW1wbGUtY29vcmQ8L2FwcC1wYXRoPgogICAgPC9jb29yZGluYXRvcj4KICAgIDxjb29yZGluYXRvciBuYW1lPSJjb29yZDIiPgogICAgICAgIDxhcHAtcGF0aD5oZGZzOi8vbG9jYWxob3N0OjkwMDAvdXNlci9vb3ppZS9jb29yZGluYXRvcnMvYW5vdGhlci1jb29yZDwvYXBwLXBhdGg+CiAgICA8L2Nvb3JkaW5hdG9yPgo8L2J1bmRsZS1hcHA+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;bundle-app name=&quot;example-bundle&quot; xmlns=&quot;uri:oozie:bundle:0.2&quot;&gt;
    &lt;coordinator name=&quot;coord1&quot;&gt;
        &lt;app-path&gt;hdfs://localhost:9000/user/oozie/coordinators/example-coord&lt;/app-path&gt;
    &lt;/coordinator&gt;
    &lt;coordinator name=&quot;coord2&quot;&gt;
        &lt;app-path&gt;hdfs://localhost:9000/user/oozie/coordinators/another-coord&lt;/app-path&gt;
    &lt;/coordinator&gt;
&lt;/bundle-app&gt;</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>Apache Oozie és una eina poderosa per gestionar fluxos de treball, coordinadors i paquets de Hadoop. Simplifica la programació i execució de canals de processament de dades complexos. Entenent els conceptes bàsics de les definicions de fluxos de treball, la configuració i les funcionalitats avançades com els coordinadors i els paquets, pots gestionar i automatitzar efectivament els teus treballs de Hadoop.</p>
</div><div class='row navigation'><div class='col-6'><a href='apache-flume'>&#x25C4; Apache Flume</a></div><div class='col-6 text-end'><a href='apache-zookeeper'>Apache Zookeeper &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
