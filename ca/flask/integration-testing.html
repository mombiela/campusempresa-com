<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proves d'Integració en Flask</title>

    <link rel="alternate" href="https://campusempresa.com/es/flask/integration-testing" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/flask/integration-testing" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/flask/integration-testing" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/flask/integration-testing" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='unit-testing'>&#x25C4; Proves Unitàries amb Flask</a></div><div class='col-6 text-end'><a href='deploying-flask-applications'>Desplegar Aplicacions Flask &#x25BA;</a></div></div><div class='content'><p>Les proves d'integració són una part crucial del cicle de vida del desenvolupament de programari. Asseguren que diferents components de la teva aplicació Flask funcionin junts com s'espera. Aquest tema et guiarà a través dels conceptes bàsics de les proves d'integració en Flask, des de la configuració del teu entorn fins a escriure i executar les teves proves.</p>
</div><h1>Què són les Proves d'Integració?</h1>
<div class='content'><p>Les proves d'integració són un nivell de proves de programari on unitats o components individuals es combinen i es proven com un grup. L'objectiu és exposar fallades en la interacció entre unitats integrades.</p>
<ul>
<li><strong>Proves Unitàries</strong>: Prova components individuals en aïllament.</li>
<li><strong>Proves d'Integració</strong>: Prova la interacció entre components.</li>
<li><strong>Proves de Sistema</strong>: Prova el sistema complet com un tot.</li>
</ul>
</div><h1>Configurant el Teu Entorn</h1>
<div class='content'><p>Abans de començar a escriure proves d'integració, necessitem configurar el nostre entorn de proves.</p>
</div><h2>Instal·lant Paquets Necessaris</h2>
<div class='content'><p>Primer, assegura't de tenir Flask i els paquets de proves necessaris instal·lats. Pots instal·lar-los utilitzant pip:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgRmxhc2sgcHl0ZXN0IHB5dGVzdC1mbGFzaw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install Flask pytest pytest-flask</pre></div><div class='content'></div><h2>Configurant Flask per a Proves</h2>
<div class='content'><p>Crea un fitxer <code>conftest.py</code> per configurar la teva aplicació Flask per a proves:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHB5dGVzdApmcm9tIG15YXBwIGltcG9ydCBjcmVhdGVfYXBwCgpAcHl0ZXN0LmZpeHR1cmUKZGVmIGFwcCgpOgogICAgYXBwID0gY3JlYXRlX2FwcCgpCiAgICBhcHAuY29uZmlnLnVwZGF0ZSh7CiAgICAgICAgIlRFU1RJTkciOiBUcnVlLAogICAgfSkKICAgIHlpZWxkIGFwcAoKQHB5dGVzdC5maXh0dXJlCmRlZiBjbGllbnQoYXBwKToKICAgIHJldHVybiBhcHAudGVzdF9jbGllbnQoKQoKQHB5dGVzdC5maXh0dXJlCmRlZiBydW5uZXIoYXBwKToKICAgIHJldHVybiBhcHAudGVzdF9jbGlfcnVubmVyKCk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import pytest
from myapp import create_app

@pytest.fixture
def app():
    app = create_app()
    app.config.update({
        &quot;TESTING&quot;: True,
    })
    yield app

@pytest.fixture
def client(app):
    return app.test_client()

@pytest.fixture
def runner(app):
    return app.test_cli_runner()</pre></div><div class='content'><ul>
<li><code>create_app()</code>: Una funció fàbrica per crear la teva aplicació Flask.</li>
<li><code>TESTING</code>: Una configuració per habilitar el mode de proves.</li>
</ul>
</div><h1>Escriure Proves d'Integració</h1>
<div class='content'><p>Ara que el nostre entorn està configurat, escrivim algunes proves d'integració.</p>
</div><h2>Exemple: Provant una Ruta Simple</h2>
<div class='content'><p>Considera una ruta simple de Flask:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBteWFwcC9yb3V0ZXMucHkKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIGpzb25pZnkKCmFwcCA9IEZsYXNrKF9fbmFtZV9fKQoKQGFwcC5yb3V0ZSgnL2hlbGxvJykKZGVmIGhlbGxvKCk6CiAgICByZXR1cm4ganNvbmlmeShtZXNzYWdlPSJIZWxsbywgV29ybGQhIik="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># myapp/routes.py
from flask import Flask, jsonify

app = Flask(__name__)

@app.route('/hello')
def hello():
    return jsonify(message=&quot;Hello, World!&quot;)</pre></div><div class='content'><p>Per provar aquesta ruta, crea un fitxer de prova <code>test_routes.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB0ZXN0X3JvdXRlcy5weQpkZWYgdGVzdF9oZWxsbyhjbGllbnQpOgogICAgcmVzcG9uc2UgPSBjbGllbnQuZ2V0KCcvaGVsbG8nKQogICAgYXNzZXJ0IHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMAogICAgYXNzZXJ0IHJlc3BvbnNlLmpzb24gPT0geyJtZXNzYWdlIjogIkhlbGxvLCBXb3JsZCEifQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># test_routes.py
def test_hello(client):
    response = client.get('/hello')
    assert response.status_code == 200
    assert response.json == {&quot;message&quot;: &quot;Hello, World!&quot;}</pre></div><div class='content'><ul>
<li><code>client.get('/hello')</code>: Envia una sol·licitud GET a la ruta <code>/hello</code>.</li>
<li><code>response.status_code</code>: Comprova el codi d'estat HTTP.</li>
<li><code>response.json</code>: Comprova la resposta JSON.</li>
</ul>
</div><h2>Exemple: Provant Interaccions amb la Base de Dades</h2>
<div class='content'><p>Afegim una ruta que interactua amb una base de dades:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBteWFwcC9yb3V0ZXMucHkKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIGpzb25pZnkKZnJvbSBmbGFza19zcWxhbGNoZW15IGltcG9ydCBTUUxBbGNoZW15CgphcHAgPSBGbGFzayhfX25hbWVfXykKYXBwLmNvbmZpZ1snU1FMQUxDSEVNWV9EQVRBQkFTRV9VUkknXSA9ICdzcWxpdGU6Ly8vOm1lbW9yeTonCmRiID0gU1FMQWxjaGVteShhcHApCgpjbGFzcyBVc2VyKGRiLk1vZGVsKToKICAgIGlkID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpCiAgICBuYW1lID0gZGIuQ29sdW1uKGRiLlN0cmluZyg4MCksIHVuaXF1ZT1UcnVlLCBudWxsYWJsZT1GYWxzZSkKCkBhcHAucm91dGUoJy91c2VycycpCmRlZiBnZXRfdXNlcnMoKToKICAgIHVzZXJzID0gVXNlci5xdWVyeS5hbGwoKQogICAgcmV0dXJuIGpzb25pZnkodXNlcnM9W3VzZXIubmFtZSBmb3IgdXNlciBpbiB1c2Vyc10p"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># myapp/routes.py
from flask import Flask, jsonify
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///:memory:'
db = SQLAlchemy(app)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80), unique=True, nullable=False)

@app.route('/users')
def get_users():
    users = User.query.all()
    return jsonify(users=[user.name for user in users])</pre></div><div class='content'><p>Per provar aquesta ruta, necessitem configurar la base de dades en les nostres proves:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB0ZXN0X3JvdXRlcy5weQppbXBvcnQgcHl0ZXN0CmZyb20gbXlhcHAucm91dGVzIGltcG9ydCBkYiwgVXNlcgoKQHB5dGVzdC5maXh0dXJlCmRlZiBpbml0X2RhdGFiYXNlKCk6CiAgICBkYi5jcmVhdGVfYWxsKCkKICAgIHVzZXIxID0gVXNlcihuYW1lPSJBbGljZSIpCiAgICB1c2VyMiA9IFVzZXIobmFtZT0iQm9iIikKICAgIGRiLnNlc3Npb24uYWRkKHVzZXIxKQogICAgZGIuc2Vzc2lvbi5hZGQodXNlcjIpCiAgICBkYi5zZXNzaW9uLmNvbW1pdCgpCiAgICB5aWVsZCBkYgogICAgZGIuZHJvcF9hbGwoKQoKZGVmIHRlc3RfZ2V0X3VzZXJzKGNsaWVudCwgaW5pdF9kYXRhYmFzZSk6CiAgICByZXNwb25zZSA9IGNsaWVudC5nZXQoJy91c2VycycpCiAgICBhc3NlcnQgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwCiAgICBhc3NlcnQgcmVzcG9uc2UuanNvbiA9PSB7InVzZXJzIjogWyJBbGljZSIsICJCb2IiXX0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># test_routes.py
import pytest
from myapp.routes import db, User

@pytest.fixture
def init_database():
    db.create_all()
    user1 = User(name=&quot;Alice&quot;)
    user2 = User(name=&quot;Bob&quot;)
    db.session.add(user1)
    db.session.add(user2)
    db.session.commit()
    yield db
    db.drop_all()

def test_get_users(client, init_database):
    response = client.get('/users')
    assert response.status_code == 200
    assert response.json == {&quot;users&quot;: [&quot;Alice&quot;, &quot;Bob&quot;]}</pre></div><div class='content'><ul>
<li><code>db.create_all()</code>: Crea l'esquema de la base de dades.</li>
<li><code>db.drop_all()</code>: Elimina l'esquema de la base de dades després de la prova.</li>
<li><code>client.get('/users')</code>: Envia una sol·licitud GET a la ruta <code>/users</code>.</li>
</ul>
</div><h1>Executant les Teves Proves</h1>
<div class='content'><p>Per executar les teves proves, simplement utilitza la comanda <code>pytest</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0ZXN0"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pytest</pre></div><div class='content'><p>Això descobrirà i executarà totes les proves en el teu projecte.</p>
</div><h1>Conclusió</h1>
<div class='content'><p>Les proves d'integració són essencials per assegurar que diferents parts de la teva aplicació Flask funcionin correctament junts. Configurant un entorn de proves adequat i escrivint proves completes, pots detectar errors aviat i assegurar la fiabilitat de la teva aplicació. Recorda:</p>
<ul>
<li>Configura la teva aplicació Flask per a proves.</li>
<li>Escriu proves per a diferents rutes i interaccions.</li>
<li>Utilitza fixtures per gestionar la configuració i desmuntatge de recursos com bases de dades.</li>
</ul>
<p>Bones proves!</p>
</div><div class='row navigation'><div class='col-6'><a href='unit-testing'>&#x25C4; Proves Unitàries amb Flask</a></div><div class='col-6 text-end'><a href='deploying-flask-applications'>Desplegar Aplicacions Flask &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
