<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proves i Desplegament</title>

    <link rel="alternate" href="https://campusempresa.com/es/php/testing-and-deployment" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/php/testing-and-deployment" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/php/testing-and-deployment" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/php/testing-and-deployment" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='implementing-features'>&#x25C4;Implementació de Funcionalitats</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proves i Desplegament</a>
	</div>
	<div class='col-4 text-end'>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>Les proves i el desplegament són aspectes crucials del desenvolupament de programari. Aquesta secció et guiarà a través dels conceptes bàsics de les proves de les teves aplicacions PHP i del seu desplegament en un entorn de producció. Al final d'aquesta secció, tindràs una comprensió sòlida de com assegurar que el teu codi PHP sigui fiable i com desplegar-lo de manera eficient.</p>
</div><h1>Proves en PHP</h1>
<div class='content'></div><h2>Per què són importants les proves</h2>
<div class='content'><ul>
<li><strong>Assegura la Qualitat del Codi</strong>: Ajuda a detectar errors i fallades aviat.</li>
<li><strong>Facilita la Refactorització</strong>: Fa que sigui més fàcil canviar el codi sense trencar la funcionalitat.</li>
<li><strong>Automatitza la Verificació</strong>: Estalvia temps automatitzant comprovacions repetitives.</li>
</ul>
</div><h2>Tipus de Proves</h2>
<div class='content'><ul>
<li><strong>Proves Unitàries</strong>: Prova components o funcions individuals.</li>
<li><strong>Proves d'Integració</strong>: Prova com diferents parts de l'aplicació treballen juntes.</li>
<li><strong>Proves Funcionals</strong>: Prova l'aplicació des de la perspectiva de l'usuari.</li>
</ul>
</div><h2>Configuració de PHPUnit</h2>
<div class='content'><p>PHPUnit és el framework de proves més utilitzat per a PHP.</p>
<h4>Instal·lació</h4>
<p>Pots instal·lar PHPUnit utilitzant Composer:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29tcG9zZXIgcmVxdWlyZSAtLWRldiBwaHB1bml0L3BocHVuaXQ="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>composer require --dev phpunit/phpunit</pre></div><div class='content'><h4>Ús Bàsic</h4>
<p>Crea un fitxer de prova, per exemple, <code>CalculatorTest.php</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKdXNlIFBIUFVuaXRcRnJhbWV3b3JrXFRlc3RDYXNlOwoKY2xhc3MgQ2FsY3VsYXRvclRlc3QgZXh0ZW5kcyBUZXN0Q2FzZSB7CiAgICBwdWJsaWMgZnVuY3Rpb24gdGVzdEFkZGl0aW9uKCkgewogICAgICAgICRjYWxjdWxhdG9yID0gbmV3IENhbGN1bGF0b3IoKTsKICAgICAgICAkcmVzdWx0ID0gJGNhbGN1bGF0b3ItPmFkZCgyLCAzKTsKICAgICAgICAkdGhpcy0+YXNzZXJ0RXF1YWxzKDUsICRyZXN1bHQpOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
use PHPUnit\Framework\TestCase;

class CalculatorTest extends TestCase {
    public function testAddition() {
        $calculator = new Calculator();
        $result = $calculator-&gt;add(2, 3);
        $this-&gt;assertEquals(5, $result);
    }
}</pre></div><div class='content'><p>Executa la prova:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmVuZG9yL2Jpbi9waHB1bml0IENhbGN1bGF0b3JUZXN0LnBocA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>vendor/bin/phpunit CalculatorTest.php</pre></div><div class='content'></div><h2>Escriure Proves Unitàries</h2>
<div class='content'><ul>
<li><strong>Arrange</strong>: Configura les condicions per a la prova.</li>
<li><strong>Act</strong>: Executa el codi que s'està provant.</li>
<li><strong>Assert</strong>: Verifica que el resultat sigui l'esperat.</li>
</ul>
<p>Exemple:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKdXNlIFBIUFVuaXRcRnJhbWV3b3JrXFRlc3RDYXNlOwoKY2xhc3MgU3RyaW5nVXRpbHNUZXN0IGV4dGVuZHMgVGVzdENhc2UgewogICAgcHVibGljIGZ1bmN0aW9uIHRlc3RTdHJpbmdSZXZlcnNhbCgpIHsKICAgICAgICAkc3RyaW5nVXRpbHMgPSBuZXcgU3RyaW5nVXRpbHMoKTsKICAgICAgICAkcmVzdWx0ID0gJHN0cmluZ1V0aWxzLT5yZXZlcnNlKCJoZWxsbyIpOwogICAgICAgICR0aGlzLT5hc3NlcnRFcXVhbHMoIm9sbGVoIiwgJHJlc3VsdCk7CiAgICB9Cn0="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
use PHPUnit\Framework\TestCase;

class StringUtilsTest extends TestCase {
    public function testStringReversal() {
        $stringUtils = new StringUtils();
        $result = $stringUtils-&gt;reverse(&quot;hello&quot;);
        $this-&gt;assertEquals(&quot;olleh&quot;, $result);
    }
}</pre></div><div class='content'></div><h2>Mocking i Stubbing</h2>
<div class='content'><p>Els mocks i stubs s'utilitzen per simular objectes en les proves.</p>
<p>Exemple utilitzant Mockery:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKdXNlIFBIUFVuaXRcRnJhbWV3b3JrXFRlc3RDYXNlOwp1c2UgTW9ja2VyeSBhcyBtOwoKY2xhc3MgVXNlclNlcnZpY2VUZXN0IGV4dGVuZHMgVGVzdENhc2UgewogICAgcHVibGljIGZ1bmN0aW9uIHRlYXJEb3duKCk6IHZvaWQgewogICAgICAgIG06OmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHRlc3RVc2VyQ3JlYXRpb24oKSB7CiAgICAgICAgJHVzZXJSZXBvID0gbTo6bW9jaygnVXNlclJlcG9zaXRvcnknKTsKICAgICAgICAkdXNlclJlcG8tPnNob3VsZFJlY2VpdmUoJ3NhdmUnKS0+b25jZSgpLT5hbmRSZXR1cm4odHJ1ZSk7CgogICAgICAgICR1c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZSgkdXNlclJlcG8pOwogICAgICAgICRyZXN1bHQgPSAkdXNlclNlcnZpY2UtPmNyZWF0ZVVzZXIoJ0pvaG4gRG9lJyk7CgogICAgICAgICR0aGlzLT5hc3NlcnRUcnVlKCRyZXN1bHQpOwogICAgfQp9"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
use PHPUnit\Framework\TestCase;
use Mockery as m;

class UserServiceTest extends TestCase {
    public function tearDown(): void {
        m::close();
    }

    public function testUserCreation() {
        $userRepo = m::mock('UserRepository');
        $userRepo-&gt;shouldReceive('save')-&gt;once()-&gt;andReturn(true);

        $userService = new UserService($userRepo);
        $result = $userService-&gt;createUser('John Doe');

        $this-&gt;assertTrue($result);
    }
}</pre></div><div class='content'></div><h1>Desplegament</h1>
<div class='content'></div><h2>Preparació per al Desplegament</h2>
<div class='content'><ul>
<li><strong>Revisió de Codi</strong>: Assegura't que tot el codi ha estat revisat.</li>
<li><strong>Proves</strong>: Executa totes les proves i assegura't que passen.</li>
<li><strong>Configuració de l'Entorn</strong>: Configura les variables d'entorn i les configuracions.</li>
</ul>
</div><h2>Estratègies de Desplegament</h2>
<div class='content'><ul>
<li><strong>Desplegament Manual</strong>: Copia els fitxers manualment al servidor.</li>
<li><strong>Desplegament Automatitzat</strong>: Utilitza eines com GitHub Actions, Jenkins, o GitLab CI/CD.</li>
</ul>
</div><h2>Utilitzant Composer per al Desplegament</h2>
<div class='content'><p>Composer pot ajudar a gestionar les dependències i l'autocarregament.</p>
<h4>Exemple <code>composer.json</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICAgInJlcXVpcmUiOiB7CiAgICAgICAgIm1vbm9sb2cvbW9ub2xvZyI6ICJeMi4wIgogICAgfSwKICAgICJhdXRvbG9hZCI6IHsKICAgICAgICAicHNyLTQiOiB7CiAgICAgICAgICAgICJBcHBcXCI6ICJzcmMvIgogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
    &quot;require&quot;: {
        &quot;monolog/monolog&quot;: &quot;^2.0&quot;
    },
    &quot;autoload&quot;: {
        &quot;psr-4&quot;: {
            &quot;App\\&quot;: &quot;src/&quot;
        }
    }
}</pre></div><div class='content'><h4>Passos de Desplegament</h4>
<ol>
<li><strong>Instal·lar Dependències</strong>: Executa <code>composer install</code> al servidor.</li>
<li><strong>Configurar l'Autocarregament</strong>: Assegura't que l'autocarregament està configurat correctament.</li>
<li><strong>Variables d'Entorn</strong>: Utilitza fitxers <code>.env</code> o variables d'entorn del servidor.</li>
</ol>
</div><h2>Integració i Desplegament Continu (CI/CD)</h2>
<div class='content'><p>CI/CD automatitza el procés de proves i desplegament del codi.</p>
<h4>Exemple de Workflow de GitHub Actions</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmFtZTogQ0kvQ0QgUGlwZWxpbmUKCm9uOgogIHB1c2g6CiAgICBicmFuY2hlczoKICAgICAgLSBtYWluCgpqb2JzOgogIGJ1aWxkOgogICAgcnVucy1vbjogdWJ1bnR1LWxhdGVzdAoKICAgIHN0ZXBzOgogICAgLSB1c2VzOiBhY3Rpb25zL2NoZWNrb3V0QHYyCiAgICAtIG5hbWU6IFNldCB1cCBQSFAKICAgICAgdXNlczogc2hpdmFtbWF0aHVyL3NldHVwLXBocEB2MgogICAgICB3aXRoOgogICAgICAgIHBocC12ZXJzaW9uOiAnNy40JwogICAgLSBuYW1lOiBJbnN0YWxsIGRlcGVuZGVuY2llcwogICAgICBydW46IGNvbXBvc2VyIGluc3RhbGwKICAgIC0gbmFtZTogUnVuIHRlc3RzCiAgICAgIHJ1bjogdmVuZG9yL2Jpbi9waHB1bml0CiAgICAtIG5hbWU6IERlcGxveSB0byBTZXJ2ZXIKICAgICAgcnVuOiB8CiAgICAgICAgcnN5bmMgLWF2eiAtLWV4Y2x1ZGUgJ3ZlbmRvcicgLiB1c2VyQHNlcnZlcjovcGF0aC90by9wcm9qZWN0CiAgICAgICAgc3NoIHVzZXJAc2VydmVyICdjZCAvcGF0aC90by9wcm9qZWN0ICYmIGNvbXBvc2VyIGluc3RhbGwgLS1uby1kZXYn"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>name: CI/CD Pipeline

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Set up PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '7.4'
    - name: Install dependencies
      run: composer install
    - name: Run tests
      run: vendor/bin/phpunit
    - name: Deploy to Server
      run: |
        rsync -avz --exclude 'vendor' . user@server:/path/to/project
        ssh user@server 'cd /path/to/project &amp;&amp; composer install --no-dev'</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Les proves i el desplegament són pràctiques essencials en el desenvolupament de PHP. Escriure proves assegura que el teu codi sigui fiable i mantenible. Les estratègies de desplegament, ja siguin manuals o automatitzades, t'ajuden a lliurar la teva aplicació als usuaris de manera eficient. Implementar pipelines de CI/CD agilitza encara més el procés, permetent la integració i el desplegament continus. Amb aquestes habilitats, estàs ben equipat per desenvolupar, provar i desplegar aplicacions PHP robustes.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='implementing-features'>&#x25C4;Implementació de Funcionalitats</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proves i Desplegament</a>
	</div>
	<div class='col-4 text-end'>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
