<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autenticació i Autorització en PHP</title>

    <link rel="alternate" href="https://campusempresa.com/es/php/authentication-and-authorization" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/php/authentication-and-authorization" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/php/authentication-and-authorization" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/php/authentication-and-authorization" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='using-https'>&#x25C4;Ús d'HTTPS</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Autenticació i Autorització en PHP</a>
	</div>
	<div class='col-4 text-end'>
					<a href='coding-standards'>Estàndards de Codificació &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>L'autenticació i l'autorització són components crítics de la seguretat de les aplicacions web. L'autenticació verifica la identitat d'un usuari, mentre que l'autorització determina què pot fer un usuari autenticat. Aquesta secció et guiarà des dels conceptes bàsics fins als avançats per implementar l'autenticació i l'autorització en PHP.</p>
</div><h1>Autenticació</h1>
<div class='content'></div><h2>Què és l'Autenticació?</h2>
<div class='content'><ul>
<li><strong>Definició</strong>: El procés de verificar la identitat d'un usuari.</li>
<li><strong>Mètodes Comuns</strong>: Nom d'usuari i contrasenya, OAuth, JWT (JSON Web Tokens).</li>
</ul>
</div><h2>Autenticació Bàsica amb PHP</h2>
<div class='content'><h4>Exemple: Sistema de Login Simple</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKc2Vzc2lvbl9zdGFydCgpOwoKJHVzZXJzID0gWwogICAgJ2FkbWluJyA9PiAncGFzc3dvcmQxMjMnLAogICAgJ3VzZXInID0+ICd1c2VycGFzcycKXTsKCmlmICgkX1NFUlZFUlsnUkVRVUVTVF9NRVRIT0QnXSA9PSAnUE9TVCcpIHsKICAgICR1c2VybmFtZSA9ICRfUE9TVFsndXNlcm5hbWUnXTsKICAgICRwYXNzd29yZCA9ICRfUE9TVFsncGFzc3dvcmQnXTsKCiAgICBpZiAoaXNzZXQoJHVzZXJzWyR1c2VybmFtZV0pICYmICR1c2Vyc1skdXNlcm5hbWVdID09ICRwYXNzd29yZCkgewogICAgICAgICRfU0VTU0lPTlsndXNlcm5hbWUnXSA9ICR1c2VybmFtZTsKICAgICAgICBlY2hvICJMb2dpbiBzdWNjZXNzZnVsISBXZWxjb21lLCAiIC4gJHVzZXJuYW1lOwogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICJJbnZhbGlkIHVzZXJuYW1lIG9yIHBhc3N3b3JkLiI7CiAgICB9Cn0KPz4KCjxmb3JtIG1ldGhvZD0icG9zdCI+CiAgICBVc2VybmFtZTogPGlucHV0IHR5cGU9InRleHQiIG5hbWU9InVzZXJuYW1lIiByZXF1aXJlZD4KICAgIFBhc3N3b3JkOiA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIG5hbWU9InBhc3N3b3JkIiByZXF1aXJlZD4KICAgIDxidXR0b24gdHlwZT0ic3VibWl0Ij5Mb2dpbjwvYnV0dG9uPgo8L2Zvcm0+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
session_start();

$users = [
    'admin' =&gt; 'password123',
    'user' =&gt; 'userpass'
];

if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    $username = $_POST['username'];
    $password = $_POST['password'];

    if (isset($users[$username]) &amp;&amp; $users[$username] == $password) {
        $_SESSION['username'] = $username;
        echo &quot;Login successful! Welcome, &quot; . $username;
    } else {
        echo &quot;Invalid username or password.&quot;;
    }
}
?&gt;

&lt;form method=&quot;post&quot;&gt;
    Username: &lt;input type=&quot;text&quot; name=&quot;username&quot; required&gt;
    Password: &lt;input type=&quot;password&quot; name=&quot;password&quot; required&gt;
    &lt;button type=&quot;submit&quot;&gt;Login&lt;/button&gt;
&lt;/form&gt;</pre></div><div class='content'></div><h2>Emmagatzematge Segur de Contrasenyes</h2>
<div class='content'><ul>
<li><strong>Hashing</strong>: Utilitza <code>password_hash()</code> per fer hash de les contrasenyes abans d'emmagatzemar-les.</li>
<li><strong>Verificació</strong>: Utilitza <code>password_verify()</code> per comprovar la contrasenya amb hash.</li>
</ul>
<h4>Exemple: Emmagatzemar i Verificar Contrasenyes</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHBhc3N3b3JkID0gJ3VzZXJwYXNzJzsKJGhhc2hlZFBhc3N3b3JkID0gcGFzc3dvcmRfaGFzaCgkcGFzc3dvcmQsIFBBU1NXT1JEX0RFRkFVTFQpOwoKZWNobyAiSGFzaGVkIFBhc3N3b3JkOiAiIC4gJGhhc2hlZFBhc3N3b3JkIC4gIjxicj4iOwoKaWYgKHBhc3N3b3JkX3ZlcmlmeSgkcGFzc3dvcmQsICRoYXNoZWRQYXNzd29yZCkpIHsKICAgIGVjaG8gIlBhc3N3b3JkIGlzIHZhbGlkISI7Cn0gZWxzZSB7CiAgICBlY2hvICJJbnZhbGlkIHBhc3N3b3JkLiI7Cn0KPz4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$password = 'userpass';
$hashedPassword = password_hash($password, PASSWORD_DEFAULT);

echo &quot;Hashed Password: &quot; . $hashedPassword . &quot;&lt;br&gt;&quot;;

if (password_verify($password, $hashedPassword)) {
    echo &quot;Password is valid!&quot;;
} else {
    echo &quot;Invalid password.&quot;;
}
?&gt;</pre></div><div class='content'></div><h1>Autorització</h1>
<div class='content'></div><h2>Què és l'Autorització?</h2>
<div class='content'><ul>
<li><strong>Definició</strong>: El procés de determinar què pot fer un usuari autenticat.</li>
<li><strong>Mètodes Comuns</strong>: Control d'accés basat en rols (RBAC), permisos.</li>
</ul>
</div><h2>Control d'Accés Basat en Rols (RBAC)</h2>
<div class='content'><ul>
<li><strong>Rols</strong>: Defineix rols com 'admin', 'editor', 'viewer'.</li>
<li><strong>Permisos</strong>: Assigna permisos als rols.</li>
</ul>
<h4>Exemple: Implementació de RBAC</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKc2Vzc2lvbl9zdGFydCgpOwoKJHJvbGVzID0gWwogICAgJ2FkbWluJyA9PiBbJ2NyZWF0ZScsICdlZGl0JywgJ2RlbGV0ZScsICd2aWV3J10sCiAgICAnZWRpdG9yJyA9PiBbJ2VkaXQnLCAndmlldyddLAogICAgJ3ZpZXdlcicgPT4gWyd2aWV3J10KXTsKCmZ1bmN0aW9uIGNoZWNrUGVybWlzc2lvbigkcm9sZSwgJHBlcm1pc3Npb24pIHsKICAgIGdsb2JhbCAkcm9sZXM7CiAgICByZXR1cm4gaW5fYXJyYXkoJHBlcm1pc3Npb24sICRyb2xlc1skcm9sZV0pOwp9CgokX1NFU1NJT05bJ3JvbGUnXSA9ICdlZGl0b3InOwoKaWYgKGNoZWNrUGVybWlzc2lvbigkX1NFU1NJT05bJ3JvbGUnXSwgJ2RlbGV0ZScpKSB7CiAgICBlY2hvICJQZXJtaXNzaW9uIGdyYW50ZWQgdG8gZGVsZXRlLiI7Cn0gZWxzZSB7CiAgICBlY2hvICJQZXJtaXNzaW9uIGRlbmllZCB0byBkZWxldGUuIjsKfQo/Pg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
session_start();

$roles = [
    'admin' =&gt; ['create', 'edit', 'delete', 'view'],
    'editor' =&gt; ['edit', 'view'],
    'viewer' =&gt; ['view']
];

function checkPermission($role, $permission) {
    global $roles;
    return in_array($permission, $roles[$role]);
}

$_SESSION['role'] = 'editor';

if (checkPermission($_SESSION['role'], 'delete')) {
    echo &quot;Permission granted to delete.&quot;;
} else {
    echo &quot;Permission denied to delete.&quot;;
}
?&gt;</pre></div><div class='content'></div><h1>Autenticació i Autorització Avançades</h1>
<div class='content'></div><h2>Utilitzar OAuth per a l'Autenticació</h2>
<div class='content'><ul>
<li><strong>OAuth</strong>: Un estàndard obert per a la delegació d'accés comunament utilitzat per a l'autenticació basada en tokens.</li>
<li><strong>Proveïdors</strong>: Google, Facebook, GitHub.</li>
</ul>
<h4>Exemple: OAuth amb Google (Visió Conceptual)</h4>
<ol>
<li><strong>Registrar Aplicació</strong>: Registra la teva aplicació amb Google per obtenir el client ID i el secret del client.</li>
<li><strong>Redirigir a Google</strong>: Redirigeix els usuaris a Google per a l'autenticació.</li>
<li><strong>Gestionar la Resposta</strong>: Gestiona la resposta de Google i recupera el token d'accés.</li>
<li><strong>Obtenir Dades de l'Usuari</strong>: Utilitza el token d'accés per obtenir dades de l'usuari de Google.</li>
</ol>
</div><h2>JSON Web Tokens (JWT)</h2>
<div class='content'><ul>
<li><strong>JWT</strong>: Un mitjà compacte i segur per representar afirmacions que es poden transferir entre dues parts.</li>
<li><strong>Estructura</strong>: Capçalera, Càrrega, Signatura.</li>
</ul>
<h4>Exemple: Generar i Verificar JWT</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKcmVxdWlyZSAndmVuZG9yL2F1dG9sb2FkLnBocCc7CnVzZSBcRmlyZWJhc2VcSldUXEpXVDsKCiRrZXkgPSAiZXhhbXBsZV9rZXkiOwokcGF5bG9hZCA9IFsKICAgICdpc3MnID0+ICJodHRwOi8vZXhhbXBsZS5vcmciLAogICAgJ2F1ZCcgPT4gImh0dHA6Ly9leGFtcGxlLmNvbSIsCiAgICAnaWF0JyA9PiAxMzU2OTk5NTI0LAogICAgJ25iZicgPT4gMTM1NzAwMDAwMApdOwoKJGp3dCA9IEpXVDo6ZW5jb2RlKCRwYXlsb2FkLCAka2V5KTsKZWNobyAiSldUOiAiIC4gJGp3dCAuICI8YnI+IjsKCiRkZWNvZGVkID0gSldUOjpkZWNvZGUoJGp3dCwgJGtleSwgYXJyYXkoJ0hTMjU2JykpOwpwcmludF9yKCRkZWNvZGVkKTsKPz4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
require 'vendor/autoload.php';
use \Firebase\JWT\JWT;

$key = &quot;example_key&quot;;
$payload = [
    'iss' =&gt; &quot;http://example.org&quot;,
    'aud' =&gt; &quot;http://example.com&quot;,
    'iat' =&gt; 1356999524,
    'nbf' =&gt; 1357000000
];

$jwt = JWT::encode($payload, $key);
echo &quot;JWT: &quot; . $jwt . &quot;&lt;br&gt;&quot;;

$decoded = JWT::decode($jwt, $key, array('HS256'));
print_r($decoded);
?&gt;</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>L'autenticació i l'autorització són essencials per assegurar les aplicacions web. Aquesta secció ha cobert els conceptes bàsics per implementar l'autenticació i l'autorització en PHP, des de sistemes de login simples fins a mètodes avançats com OAuth i JWT. Entenent i aplicant aquests conceptes, pots assegurar-te que les teves aplicacions siguin segures i fàcils d'usar.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='using-https'>&#x25C4;Ús d'HTTPS</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Autenticació i Autorització en PHP</a>
	</div>
	<div class='col-4 text-end'>
					<a href='coding-standards'>Estàndards de Codificació &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
