<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desplegament de Models</title>

    <link rel="alternate" href="https://campusempresa.com/es/tensorflow/model-deployment" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/tensorflow/model-deployment" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/tensorflow/model-deployment" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/tensorflow/model-deployment" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='tensorflow-serving'>&#x25C4; TensorFlow Serving</a></div><div class='col-6 text-end'><a href='tensorflow-lite'>TensorFlow Lite &#x25BA;</a></div></div><div class='content'><p>El desplegament de models és el procés de fer que el teu model d'aprenentatge automàtic entrenat estigui disponible per al seu ús en un entorn de producció. Això implica diversos passos, des d'exportar el model fins a servir-lo mitjançant una API o integrar-lo en una aplicació. En aquesta secció, cobrirem els aspectes essencials del desplegament de models de TensorFlow, des de nivells bàsics fins a avançats.</p>
</div><h1>Introducció al Desplegament de Models</h1>
<div class='content'><ul>
<li><strong>Definició</strong>: El desplegament de models és el procés d'integrar un model d'aprenentatge automàtic en un entorn de producció existent per fer prediccions basades en noves dades.</li>
<li><strong>Importància</strong>: El desplegament permet que el model s'utilitzi en aplicacions del món real, proporcionant valor en fer prediccions sobre dades en viu.</li>
</ul>
</div><h1>Exportació d'un Model de TensorFlow</h1>
<div class='content'><p>Abans de desplegar un model, cal exportar-lo en un format que es pugui carregar i utilitzar fàcilment en producció.</p>
</div><h2>Guardar un Model</h2>
<div class='content'><p>TensorFlow proporciona diverses maneres de guardar un model. El mètode més comú és utilitzar l'API <code>tf.keras</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHRlbnNvcmZsb3cgYXMgdGYKCiMgU3Vwb3NlbSBxdWUgYG1vZGVsYCDDqXMgdW4gbW9kZWwgZGUgVGVuc29yRmxvdyBwcmVlbnRyZW5hdAptb2RlbC5zYXZlKCdwYXRoX3RvX215X21vZGVsJyk="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import tensorflow as tf

# Suposem que `model` &eacute;s un model de TensorFlow preentrenat
model.save('path_to_my_model')</pre></div><div class='content'><ul>
<li><strong>Format HDF5</strong>: El format per defecte quan es guarda un model amb <code>model.save()</code>.</li>
<li><strong>Format SavedModel</strong>: Un format més complet que inclou l'arquitectura del model, els pesos i la configuració d'entrenament.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kZWwuc2F2ZSgncGF0aF90b19teV9tb2RlbCcsIHNhdmVfZm9ybWF0PSd0Zicp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>model.save('path_to_my_model', save_format='tf')</pre></div><div class='content'></div><h2>Carregar un Model</h2>
<div class='content'><p>Per carregar un model guardat, utilitza la funció <code>tf.keras.models.load_model</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9hZGVkX21vZGVsID0gdGYua2VyYXMubW9kZWxzLmxvYWRfbW9kZWwoJ3BhdGhfdG9fbXlfbW9kZWwnKQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>loaded_model = tf.keras.models.load_model('path_to_my_model')</pre></div><div class='content'></div><h1>Servir un Model de TensorFlow</h1>
<div class='content'><p>Un cop el model està guardat, es pot servir utilitzant TensorFlow Serving, un sistema de servei flexible i d'alt rendiment per a models d'aprenentatge automàtic.</p>
</div><h2>TensorFlow Serving</h2>
<div class='content'><p>TensorFlow Serving està dissenyat per a entorns de producció i suporta servir múltiples models i versions.</p>
<h4>Instal·lació de TensorFlow Serving</h4>
<p>TensorFlow Serving es pot instal·lar utilitzant Docker, cosa que simplifica el procés de configuració.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHB1bGwgdGVuc29yZmxvdy9zZXJ2aW5n"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker pull tensorflow/serving</pre></div><div class='content'><h4>Servir un Model amb TensorFlow Serving</h4>
<ol>
<li><strong>Iniciar TensorFlow Serving</strong>: Utilitza Docker per iniciar un contenidor de TensorFlow Serving.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtcCA4NTAxOjg1MDEgLS1uYW1lPXRmX3NlcnZpbmcgXAogIC0tbW91bnQgdHlwZT1iaW5kLHNvdXJjZT0vcGF0aF90b19teV9tb2RlbCx0YXJnZXQ9L21vZGVscy9teV9tb2RlbCBcCiAgLWUgTU9ERUxfTkFNRT1teV9tb2RlbCAtdCB0ZW5zb3JmbG93L3NlcnZpbmc="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -p 8501:8501 --name=tf_serving \
  --mount type=bind,source=/path_to_my_model,target=/models/my_model \
  -e MODEL_NAME=my_model -t tensorflow/serving</pre></div><div class='content'><ol start="2">
<li><strong>Enviar Sol·licituds al Model</strong>: Utilitza <code>curl</code> o qualsevol client HTTP per enviar sol·licituds al model servit.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y3VybCAtZCAneyJpbnN0YW5jZXMiOiBbWzEuMCwgMi4wLCA1LjBdXX0nIFwKICAtWCBQT1NUIGh0dHA6Ly9sb2NhbGhvc3Q6ODUwMS92MS9tb2RlbHMvbXlfbW9kZWw6cHJlZGljdA=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>curl -d '{&quot;instances&quot;: [[1.0, 2.0, 5.0]]}' \
  -X POST http://localhost:8501/v1/models/my_model:predict</pre></div><div class='content'></div><h2>Utilitzant TensorFlow Lite</h2>
<div class='content'><p>Per desplegar models en dispositius mòbils i incrustats, TensorFlow Lite és la solució preferida.</p>
<h4>Convertir un Model a TensorFlow Lite</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29udmVydGVyID0gdGYubGl0ZS5URkxpdGVDb252ZXJ0ZXIuZnJvbV9zYXZlZF9tb2RlbCgncGF0aF90b19teV9tb2RlbCcpCnRmbGl0ZV9tb2RlbCA9IGNvbnZlcnRlci5jb252ZXJ0KCkKCiMgR3VhcmRhciBlbCBtb2RlbCBjb252ZXJ0aXQKd2l0aCBvcGVuKCdtb2RlbC50ZmxpdGUnLCAnd2InKSBhcyBmOgogICAgZi53cml0ZSh0ZmxpdGVfbW9kZWwp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>converter = tf.lite.TFLiteConverter.from_saved_model('path_to_my_model')
tflite_model = converter.convert()

# Guardar el model convertit
with open('model.tflite', 'wb') as f:
    f.write(tflite_model)</pre></div><div class='content'><h4>Executar Inferència amb TensorFlow Lite</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHRlbnNvcmZsb3cgYXMgdGYKCiMgQ2FycmVnYXIgZWwgbW9kZWwgVEZMaXRlIGkgYXNzaWduYXIgdGVuc29ycwppbnRlcnByZXRlciA9IHRmLmxpdGUuSW50ZXJwcmV0ZXIobW9kZWxfcGF0aD0nbW9kZWwudGZsaXRlJykKaW50ZXJwcmV0ZXIuYWxsb2NhdGVfdGVuc29ycygpCgojIE9idGVuaXIgdGVuc29ycyBkJ2VudHJhZGEgaSBzb3J0aWRhCmlucHV0X2RldGFpbHMgPSBpbnRlcnByZXRlci5nZXRfaW5wdXRfZGV0YWlscygpCm91dHB1dF9kZXRhaWxzID0gaW50ZXJwcmV0ZXIuZ2V0X291dHB1dF9kZXRhaWxzKCkKCiMgUHJlcGFyYXIgbGVzIGRhZGVzIGQnZW50cmFkYQppbnB1dF9kYXRhID0gbnAuYXJyYXkoW1sxLjAsIDIuMCwgNS4wXV0sIGR0eXBlPW5wLmZsb2F0MzIpCgojIFJlYWxpdHphciBpbmZlcsOobmNpYQppbnRlcnByZXRlci5zZXRfdGVuc29yKGlucHV0X2RldGFpbHNbMF1bJ2luZGV4J10sIGlucHV0X2RhdGEpCmludGVycHJldGVyLmludm9rZSgpCm91dHB1dF9kYXRhID0gaW50ZXJwcmV0ZXIuZ2V0X3RlbnNvcihvdXRwdXRfZGV0YWlsc1swXVsnaW5kZXgnXSkKcHJpbnQob3V0cHV0X2RhdGEp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import tensorflow as tf

# Carregar el model TFLite i assignar tensors
interpreter = tf.lite.Interpreter(model_path='model.tflite')
interpreter.allocate_tensors()

# Obtenir tensors d'entrada i sortida
input_details = interpreter.get_input_details()
output_details = interpreter.get_output_details()

# Preparar les dades d'entrada
input_data = np.array([[1.0, 2.0, 5.0]], dtype=np.float32)

# Realitzar infer&egrave;ncia
interpreter.set_tensor(input_details[0]['index'], input_data)
interpreter.invoke()
output_data = interpreter.get_tensor(output_details[0]['index'])
print(output_data)</pre></div><div class='content'></div><h1>Tècniques Avançades de Desplegament</h1>
<div class='content'></div><h2>Utilitzant TensorFlow Extended (TFX)</h2>
<div class='content'><p>TFX és una plataforma de punta a punta per desplegar pipelines de producció d'aprenentatge automàtic.</p>
<ul>
<li><strong>Components</strong>: TFX inclou components com <code>ExampleGen</code>, <code>Transform</code>, <code>Trainer</code>, <code>Evaluator</code> i <code>Pusher</code>.</li>
<li><strong>Orquestració de Pipelines</strong>: Les pipelines de TFX es poden orquestrar utilitzant Apache Airflow o Kubeflow.</li>
</ul>
</div><h2>Desplegar en Plataformes Cloud</h2>
<div class='content'><p>Els models de TensorFlow es poden desplegar en diverses plataformes cloud com Google Cloud AI Platform, AWS SageMaker i Azure Machine Learning.</p>
<h4>Google Cloud AI Platform</h4>
<ol>
<li><strong>Pujar el Model</strong>: Pujar el model guardat a Google Cloud Storage.</li>
<li><strong>Crear un Model a AI Platform</strong>: Utilitza la Google Cloud Console o el CLI <code>gcloud</code> per crear un model.</li>
<li><strong>Desplegar el Model</strong>: Desplegar la versió del model a AI Platform.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2Nsb3VkIGFpLXBsYXRmb3JtIG1vZGVscyBjcmVhdGUgbXlfbW9kZWwKZ2Nsb3VkIGFpLXBsYXRmb3JtIHZlcnNpb25zIGNyZWF0ZSB2MSAtLW1vZGVsPW15X21vZGVsIC0tb3JpZ2luPWdzOi8vcGF0aF90b19teV9tb2RlbCAtLXJ1bnRpbWUtdmVyc2lvbj0yLjEgLS1weXRob24tdmVyc2lvbj0zLjc="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcloud ai-platform models create my_model
gcloud ai-platform versions create v1 --model=my_model --origin=gs://path_to_my_model --runtime-version=2.1 --python-version=3.7</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>El desplegament d'un model de TensorFlow implica diversos passos, des d'exportar el model fins a servir-lo en un entorn de producció. Tant si estàs desplegant en un servidor local, un dispositiu mòbil o una plataforma cloud, TensorFlow proporciona les eines i biblioteques necessàries per fer que el procés sigui senzill. Entenent els conceptes bàsics del desplegament de models i explorant tècniques avançades, pots assegurar-te que els teus models d'aprenentatge automàtic s'integrin efectivament en aplicacions del món real.</p>
</div><div class='row navigation'><div class='col-6'><a href='tensorflow-serving'>&#x25C4; TensorFlow Serving</a></div><div class='col-6 text-end'><a href='tensorflow-lite'>TensorFlow Lite &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
