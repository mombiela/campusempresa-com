<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proves d'Integració en TypeScript</title>

    <link rel="alternate" href="https://campusempresa.com/es/typescript/integration-testing" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/typescript/integration-testing" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/typescript/integration-testing" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/typescript/integration-testing" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-jest'>&#x25C4;Proves unitàries amb Jest</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proves d'Integració en TypeScript</a>
	</div>
	<div class='col-4 text-end'>
					<a href='mocking-tests'>Mocking en proves &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Les proves d'integració són un aspecte crucial del desenvolupament de programari que assegura que diferents mòduls o serveis dins d'una aplicació funcionin junts com s'espera. En aquesta secció, explorarem com realitzar proves d'integració en TypeScript, des de conceptes bàsics fins a tècniques avançades.</p>
</div><h1>Què són les Proves d'Integració?</h1>
<div class='content'><p>Les proves d'integració impliquen provar la interacció entre diferents components o mòduls d'una aplicació per assegurar-se que funcionen correctament junts. A diferència de les proves unitàries, que se centren en components individuals, les proves d'integració verifiquen la funcionalitat combinada de múltiples components.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Mòduls/Components</strong>: Parts individuals d'una aplicació que necessiten ser provades juntes.</li>
<li><strong>Suites de Proves</strong>: Col·leccions de casos de prova que verifiquen les interaccions entre mòduls.</li>
<li><strong>Mocks i Stubs</strong>: Eines utilitzades per simular el comportament de components reals durant les proves.</li>
<li><strong>Runner de Proves</strong>: Una eina que executa les proves i informa dels resultats.</li>
</ul>
</div><h1>Configuració de les Proves d'Integració en TypeScript</h1>
<div class='content'><p>Abans d'endinsar-nos en l'escriptura de proves d'integració, configurem el nostre entorn.</p>
</div><h2>Instal·lació de Paquets Necessaris</h2>
<div class='content'><p>Per realitzar proves d'integració en TypeScript, necessitaràs els següents paquets:</p>
<ul>
<li><strong>Jest</strong>: Un marc de proves popular.</li>
<li><strong>ts-jest</strong>: Un preprocessador de TypeScript per a Jest.</li>
<li><strong>Supertest</strong>: Una biblioteca per provar servidors HTTP.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgLS1zYXZlLWRldiBqZXN0IHRzLWplc3QgQHR5cGVzL2plc3Qgc3VwZXJ0ZXN0"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install --save-dev jest ts-jest @types/jest supertest</pre></div><div class='content'></div><h2>Configuració de Jest</h2>
<div class='content'><p>Crea un fitxer <code>jest.config.js</code> per configurar Jest per a TypeScript:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlLmV4cG9ydHMgPSB7CiAgcHJlc2V0OiAndHMtamVzdCcsCiAgdGVzdEVudmlyb25tZW50OiAnbm9kZScsCiAgdGVzdE1hdGNoOiBbJyoqLz8oKi4pKyhzcGVjfHRlc3QpLlt0al1zPyh4KSddLAp9Ow=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  testMatch: ['**/?(*.)+(spec|test).[tj]s?(x)'],
};</pre></div><div class='content'></div><h1>Escriptura de Proves d'Integració</h1>
<div class='content'><p>Escrivim algunes proves d'integració per a una aplicació simple d'Express.</p>
</div><h2>Aplicació Exemple</h2>
<div class='content'><p>Considera un servidor bàsic d'Express amb un únic endpoint:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2FwcC50cwppbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJzsKCmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsKCmFwcC5nZXQoJy9hcGkvZ3JlZXQnLCAocmVxLCByZXMpID0+IHsKICByZXMuanNvbih7IG1lc3NhZ2U6ICdIb2xhLCBNw7NuIScgfSk7Cn0pOwoKZXhwb3J0IGRlZmF1bHQgYXBwOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/app.ts
import express from 'express';

const app = express();

app.get('/api/greet', (req, res) =&gt; {
  res.json({ message: 'Hola, M&oacute;n!' });
});

export default app;</pre></div><div class='content'></div><h2>Prova d'Integració per a l'Aplicació Exemple</h2>
<div class='content'><p>Crea un fitxer de prova per verificar l'endpoint <code>/api/greet</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gdGVzdHMvYXBwLnRlc3QudHMKaW1wb3J0IHJlcXVlc3QgZnJvbSAnc3VwZXJ0ZXN0JzsKaW1wb3J0IGFwcCBmcm9tICcuLi9zcmMvYXBwJzsKCmRlc2NyaWJlKCdHRVQgL2FwaS9ncmVldCcsICgpID0+IHsKICBpdCgnaGF1cmlhIGRlIHJldG9ybmFyIHVuIG1pc3NhdGdlIGRlIHNhbHV0YWNpw7MnLCBhc3luYyAoKSA9PiB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKS5nZXQoJy9hcGkvZ3JlZXQnKTsKICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTsKICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lm1lc3NhZ2UpLnRvQmUoJ0hvbGEsIE3Ds24hJyk7CiAgfSk7Cn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// tests/app.test.ts
import request from 'supertest';
import app from '../src/app';

describe('GET /api/greet', () =&gt; {
  it('hauria de retornar un missatge de salutaci&oacute;', async () =&gt; {
    const response = await request(app).get('/api/greet');
    expect(response.status).toBe(200);
    expect(response.body.message).toBe('Hola, M&oacute;n!');
  });
});</pre></div><div class='content'></div><h2>Execució de les Proves</h2>
<div class='content'><p>Per executar les proves, afegeix un script al teu <code>package.json</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("InNjcmlwdHMiOiB7CiAgInRlc3QiOiAiamVzdCIKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&quot;scripts&quot;: {
  &quot;test&quot;: &quot;jest&quot;
}</pre></div><div class='content'><p>Després, executa les proves utilitzant la següent comanda:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIHRlc3Q="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm test</pre></div><div class='content'></div><h1>Tècniques Avançades de Proves d'Integració</h1>
<div class='content'><p>A mesura que la teva aplicació creix, potser necessitaràs tècniques més avançades per manejar escenaris complexos.</p>
</div><h2>Ús de Mocks i Stubs</h2>
<div class='content'><p>Els mocks i stubs poden simular el comportament de serveis o components externs. Per exemple, si la teva aplicació interactua amb una base de dades, pots utilitzar una base de dades simulada durant les proves.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2RhdGFiYXNlLnRzCmV4cG9ydCBjb25zdCBnZXRVc2VyID0gKGlkOiBudW1iZXIpID0+IHsKICAvLyBTaW11bGEgdW5hIHRydWNhZGEgYSBsYSBiYXNlIGRlIGRhZGVzCiAgcmV0dXJuIHsgaWQsIG5hbWU6ICdKb2huIERvZScgfTsKfTsKCi8vIHRlc3RzL2RhdGFiYXNlLnRlc3QudHMKaW1wb3J0IHsgZ2V0VXNlciB9IGZyb20gJy4uL3NyYy9kYXRhYmFzZSc7CgpqZXN0Lm1vY2soJy4uL3NyYy9kYXRhYmFzZScsICgpID0+ICh7CiAgZ2V0VXNlcjogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGlkOiAxLCBuYW1lOiAnTW9jayBVc2VyJyB9KSwKfSkpOwoKZGVzY3JpYmUoJ01vY2sgZGUgQmFzZSBkZSBEYWRlcycsICgpID0+IHsKICBpdCgnaGF1cmlhIGRlIHJldG9ybmFyIHVuIHVzdWFyaSBzaW11bGF0JywgKCkgPT4gewogICAgY29uc3QgdXNlciA9IGdldFVzZXIoMSk7CiAgICBleHBlY3QodXNlci5uYW1lKS50b0JlKCdNb2NrIFVzZXInKTsKICB9KTsKfSk7"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/database.ts
export const getUser = (id: number) =&gt; {
  // Simula una trucada a la base de dades
  return { id, name: 'John Doe' };
};

// tests/database.test.ts
import { getUser } from '../src/database';

jest.mock('../src/database', () =&gt; ({
  getUser: jest.fn().mockReturnValue({ id: 1, name: 'Mock User' }),
}));

describe('Mock de Base de Dades', () =&gt; {
  it('hauria de retornar un usuari simulat', () =&gt; {
    const user = getUser(1);
    expect(user.name).toBe('Mock User');
  });
});</pre></div><div class='content'></div><h2>Proves de Codi Asíncron</h2>
<div class='content'><p>Les proves d'integració sovint impliquen operacions asíncrones. Jest proporciona utilitats per manejar codi asíncron.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2FzeW5jU2VydmljZS50cwpleHBvcnQgY29uc3QgZmV0Y2hEYXRhID0gYXN5bmMgKCkgPT4gewogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHJlc29sdmUoJ0RhZGVzIG9idGluZ3VkZXMnKTsKICAgIH0sIDEwMDApOwogIH0pOwp9OwoKLy8gdGVzdHMvYXN5bmNTZXJ2aWNlLnRlc3QudHMKaW1wb3J0IHsgZmV0Y2hEYXRhIH0gZnJvbSAnLi4vc3JjL2FzeW5jU2VydmljZSc7CgpkZXNjcmliZSgnU2VydmVpIEFzw61uY3JvbicsICgpID0+IHsKICBpdCgnaGF1cmlhIGQnb2J0ZW5pciBkYWRlcycsIGFzeW5jICgpID0+IHsKICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBmZXRjaERhdGEoKTsKICAgIGV4cGVjdChkYXRhKS50b0JlKCdEYWRlcyBvYnRpbmd1ZGVzJyk7CiAgfSk7Cn0pOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/asyncService.ts
export const fetchData = async () =&gt; {
  return new Promise((resolve) =&gt; {
    setTimeout(() =&gt; {
      resolve('Dades obtingudes');
    }, 1000);
  });
};

// tests/asyncService.test.ts
import { fetchData } from '../src/asyncService';

describe('Servei As&iacute;ncron', () =&gt; {
  it('hauria d'obtenir dades', async () =&gt; {
    const data = await fetchData();
    expect(data).toBe('Dades obtingudes');
  });
});</pre></div><div class='content'></div><h1>Conclusió</h1>
<div class='content'><p>Les proves d'integració en TypeScript asseguren que diferents parts de la teva aplicació funcionin juntes com s'espera. Configurant un entorn de proves adequat, escrivint casos de prova complets i utilitzant tècniques avançades com mocks i proves asíncrones, pots millorar significativament la fiabilitat i robustesa de la teva aplicació. Recorda, l'objectiu de les proves d'integració és detectar problemes que poden no ser evidents en les proves unitàries, proporcionant un nivell més alt de confiança en el teu codi.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-jest'>&#x25C4;Proves unitàries amb Jest</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proves d'Integració en TypeScript</a>
	</div>
	<div class='col-4 text-end'>
					<a href='mocking-tests'>Mocking en proves &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
