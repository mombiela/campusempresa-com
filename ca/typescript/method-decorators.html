<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decoradors de Mètodes</title>

    <link rel="alternate" href="https://campusempresa.com/es/typescript/method-decorators" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/typescript/method-decorators" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/typescript/method-decorators" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/typescript/method-decorators" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='class-decorators'>&#x25C4;Decoradors de classe</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Decoradors de Mètodes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='property-decorators'>Decoradors de propietat &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció als Decoradors de Mètodes</h1>
<div class='content'><p>Els decoradors de mètodes són una característica poderosa en TypeScript que et permeten modificar el comportament dels mètodes en classes. Són funcions que s'apliquen als mètodes per afegir, modificar o estendre la seva funcionalitat sense alterar el codi real del mètode.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Funció Decoradora</strong>: Una funció que pren arguments específics i retorna una funció que modifica el mètode objectiu.</li>
<li><strong>Objectiu</strong>: El prototip de la classe.</li>
<li><strong>Clau de Propietat</strong>: El nom del mètode que s'està decorant.</li>
<li><strong>Descriptor</strong>: El descriptor de propietat del mètode, que conté informació sobre el mètode com el seu valor, estat d'escriptura, etc.</li>
</ul>
</div><h1>Sintaxi Bàsica</h1>
<div class='content'><p>Un decorador de mètode es defineix utilitzant el símbol <code>@</code> seguit del nom de la funció decoradora, col·locat sobre la definició del mètode.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gc2ltcGxlRGVjb3JhdG9yKHRhcmdldDogYW55LCBwcm9wZXJ0eUtleTogc3RyaW5nLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpIHsKICAgIGNvbnNvbGUubG9nKCJEZWNvcmFkb3IgZGUgTcOodG9kZSBjcmlkYXQgYToiLCBwcm9wZXJ0eUtleSk7Cn0KCmNsYXNzIEV4YW1wbGVDbGFzcyB7CiAgICBAc2ltcGxlRGVjb3JhdG9yCiAgICBleGFtcGxlTWV0aG9kKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJNw6h0b2RlIEV4ZW1wbGUiKTsKICAgIH0KfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function simpleDecorator(target: any, propertyKey: string, descriptor: PropertyDescriptor) {
    console.log(&quot;Decorador de M&egrave;tode cridat a:&quot;, propertyKey);
}

class ExampleClass {
    @simpleDecorator
    exampleMethod() {
        console.log(&quot;M&egrave;tode Exemple&quot;);
    }
}</pre></div><div class='content'><p>En aquest exemple:</p>
<ul>
<li><code>simpleDecorator</code> és un decorador de mètode.</li>
<li>Registra el nom del mètode que decora.</li>
<li><code>exampleMethod</code> és el mètode que s'està decorant.</li>
</ul>
</div><h1>Creació d'un Decorador de Mètode</h1>
<div class='content'><p>Per crear un decorador de mètode, has de definir una funció que prengui tres paràmetres:</p>
<ol>
<li><code>target</code>: El prototip de la classe.</li>
<li><code>propertyKey</code>: El nom del mètode.</li>
<li><code>descriptor</code>: El descriptor de propietat del mètode.</li>
</ol>
</div><h2>Exemple: Decorador de Registre</h2>
<div class='content'><p>Creem un decorador que registra el temps d'execució d'un mètode.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gbG9nRXhlY3V0aW9uVGltZSh0YXJnZXQ6IGFueSwgcHJvcGVydHlLZXk6IHN0cmluZywgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKSB7CiAgICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7CgogICAgZGVzY3JpcHRvci52YWx1ZSA9IGZ1bmN0aW9uICguLi5hcmdzOiBhbnlbXSkgewogICAgICAgIGNvbnNvbGUubG9nKGBFeGVjdXRhbnQgJHtwcm9wZXJ0eUtleX0gYW1iIGFyZ3VtZW50czogJHtKU09OLnN0cmluZ2lmeShhcmdzKX1gKTsKICAgICAgICBjb25zdCBzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICAgIGNvbnN0IHJlc3VsdCA9IG9yaWdpbmFsTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3MpOwogICAgICAgIGNvbnN0IGVuZCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICAgIGNvbnNvbGUubG9nKGBUZW1wcyBkJ2V4ZWN1Y2nDszogJHtlbmQgLSBzdGFydH0gbWlswrdsaXNlZ29uc2ApOwogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9OwoKICAgIHJldHVybiBkZXNjcmlwdG9yOwp9CgpjbGFzcyBDYWxjdWxhdG9yIHsKICAgIEBsb2dFeGVjdXRpb25UaW1lCiAgICBhZGQoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIgewogICAgICAgIHJldHVybiBhICsgYjsKICAgIH0KfQoKY29uc3QgY2FsY3VsYXRvciA9IG5ldyBDYWxjdWxhdG9yKCk7CmNhbGN1bGF0b3IuYWRkKDUsIDMpOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function logExecutionTime(target: any, propertyKey: string, descriptor: PropertyDescriptor) {
    const originalMethod = descriptor.value;

    descriptor.value = function (...args: any[]) {
        console.log(`Executant ${propertyKey} amb arguments: ${JSON.stringify(args)}`);
        const start = performance.now();
        const result = originalMethod.apply(this, args);
        const end = performance.now();
        console.log(`Temps d'execuci&oacute;: ${end - start} mil&middot;lisegons`);
        return result;
    };

    return descriptor;
}

class Calculator {
    @logExecutionTime
    add(a: number, b: number): number {
        return a + b;
    }
}

const calculator = new Calculator();
calculator.add(5, 3);</pre></div><div class='content'><p>En aquest exemple:</p>
<ul>
<li><code>logExecutionTime</code> és un decorador que registra el temps d'execució del mètode <code>add</code>.</li>
<li>Envolta el mètode original, registra el temps d'inici, crida el mètode original, registra el temps de finalització i calcula la durada.</li>
</ul>
</div><h1>Ús Avançat</h1>
<div class='content'><p>Els decoradors de mètodes es poden utilitzar per a escenaris més avançats com el control d'accés, la validació i més.</p>
</div><h2>Exemple: Decorador de Control d'Accés</h2>
<div class='content'><p>Creem un decorador que restringeix l'accés a un mètode basat en els rols dels usuaris.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gYXV0aG9yaXplKHJvbGVzOiBzdHJpbmdbXSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQ6IGFueSwgcHJvcGVydHlLZXk6IHN0cmluZywgZGVzY3JpcHRvcjogUHJvcGVydHlEZXNjcmlwdG9yKSB7CiAgICAgICAgY29uc3Qgb3JpZ2luYWxNZXRob2QgPSBkZXNjcmlwdG9yLnZhbHVlOwoKICAgICAgICBkZXNjcmlwdG9yLnZhbHVlID0gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKSB7CiAgICAgICAgICAgIGNvbnN0IHVzZXJSb2xlID0gYXJnc1swXTsgLy8gU3Vwb3NhbnQgcXVlIGVsIHByaW1lciBhcmd1bWVudCDDqXMgZWwgcm9sIGRlIGwndXN1YXJpCiAgICAgICAgICAgIGlmICghcm9sZXMuaW5jbHVkZXModXNlclJvbGUpKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vIGF1dG9yaXR6YXQiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxNZXRob2QuYXBwbHkodGhpcywgYXJncyk7CiAgICAgICAgfTsKCiAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3I7CiAgICB9Owp9CgpjbGFzcyBTZWN1cmVTZXJ2aWNlIHsKICAgIEBhdXRob3JpemUoWydhZG1pbiddKQogICAgc2VjdXJlTWV0aG9kKHVzZXJSb2xlOiBzdHJpbmcpIHsKICAgICAgICBjb25zb2xlLmxvZygiTcOodG9kZSBTZWd1ciBBY2NlZGl0Iik7CiAgICB9Cn0KCmNvbnN0IHNlcnZpY2UgPSBuZXcgU2VjdXJlU2VydmljZSgpOwp0cnkgewogICAgc2VydmljZS5zZWN1cmVNZXRob2QoJ3VzZXInKTsgLy8gTGxhbsOnYSBlcnJvcgp9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcihlcnJvci5tZXNzYWdlKTsKfQpzZXJ2aWNlLnNlY3VyZU1ldGhvZCgnYWRtaW4nKTsgLy8gRnVuY2lvbmEgYsOp"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function authorize(roles: string[]) {
    return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {
        const originalMethod = descriptor.value;

        descriptor.value = function (...args: any[]) {
            const userRole = args[0]; // Suposant que el primer argument &eacute;s el rol de l'usuari
            if (!roles.includes(userRole)) {
                throw new Error(&quot;No autoritzat&quot;);
            }
            return originalMethod.apply(this, args);
        };

        return descriptor;
    };
}

class SecureService {
    @authorize(['admin'])
    secureMethod(userRole: string) {
        console.log(&quot;M&egrave;tode Segur Accedit&quot;);
    }
}

const service = new SecureService();
try {
    service.secureMethod('user'); // Llan&ccedil;a error
} catch (error) {
    console.error(error.message);
}
service.secureMethod('admin'); // Funciona b&eacute;</pre></div><div class='content'><p>En aquest exemple:</p>
<ul>
<li><code>authorize</code> és un decorador que restringeix l'accés basat en els rols dels usuaris.</li>
<li>Comprova si el rol de l'usuari està inclòs en els rols permesos abans d'executar el mètode.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>Els decoradors de mètodes en TypeScript proporcionen una manera flexible de modificar i estendre el comportament dels mètodes en classes. Es poden utilitzar per a registre, control d'accés, validació i molts altres propòsits. Entenent com crear i aplicar decoradors de mètodes, pots escriure codi més net i mantenible.</p>
</div><h2>Resum</h2>
<div class='content'><ul>
<li>Els decoradors de mètodes són funcions que modifiquen el comportament dels mètodes.</li>
<li>Prenguin tres paràmetres: <code>target</code>, <code>propertyKey</code> i <code>descriptor</code>.</li>
<li>L'ús bàsic implica registrar o modificar el comportament del mètode.</li>
<li>L'ús avançat pot incloure control d'accés, validació i més.</li>
</ul>
<p>Dominant els decoradors de mètodes, pots millorar les teves classes de TypeScript amb funcionalitats poderoses i reutilitzables.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='class-decorators'>&#x25C4;Decoradors de classe</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Decoradors de Mètodes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='property-decorators'>Decoradors de propietat &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
