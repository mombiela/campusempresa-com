<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context API amb TypeScript</title>

    <link rel="alternate" href="https://campusempresa.com/es/typescript/context-api-typescript" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/typescript/context-api-typescript" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/typescript/context-api-typescript" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/typescript/context-api-typescript" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='hooks-typescript'>&#x25C4;Hooks amb TypeScript</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Context API amb TypeScript</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-testing'>Introducció a les proves &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció a Context API</h1>
<div class='content'><p>La Context API en React és una característica potent que et permet gestionar l'estat globalment a través de la teva aplicació sense la necessitat de passar propietats manualment a cada nivell. Quan es combina amb TypeScript, proporciona una manera robusta i segura de manejar l'estat.</p>
</div><h2>Conceptes Clau</h2>
<div class='content'><ul>
<li><strong>Context</strong>: Una manera de passar dades a través de l'arbre de components sense haver de passar propietats manualment a cada nivell.</li>
<li><strong>Provider</strong>: Un component que proporciona el valor del context als seus fills.</li>
<li><strong>Consumer</strong>: Un component que consumeix el valor del context.</li>
</ul>
</div><h1>Creant un Context</h1>
<div class='content'><p>Per crear un context en TypeScript, necessites definir la forma del valor del context utilitzant una interfície.</p>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7CgovLyBEZWZpbmVpeCBsYSBmb3JtYSBkZWwgdmFsb3IgZGVsIGNvbnRleHQKaW50ZXJmYWNlIFRoZW1lQ29udGV4dFR5cGUgewogIHRoZW1lOiBzdHJpbmc7CiAgdG9nZ2xlVGhlbWU6ICgpID0+IHZvaWQ7Cn0KCi8vIENyZWEgZWwgY29udGV4dCBhbWIgdW4gdmFsb3IgcGVyIGRlZmVjdGUKY29uc3QgVGhlbWVDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxUaGVtZUNvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpOwoKLy8gQ3JlYSB1biBjb21wb25lbnQgcHJvdmlkZXIKY29uc3QgVGhlbWVQcm92aWRlcjogUmVhY3QuRkM8eyBjaGlsZHJlbjogUmVhY3ROb2RlIH0+ID0gKHsgY2hpbGRyZW4gfSkgPT4gewogIGNvbnN0IFt0aGVtZSwgc2V0VGhlbWVdID0gdXNlU3RhdGU8c3RyaW5nPignbGlnaHQnKTsKCiAgY29uc3QgdG9nZ2xlVGhlbWUgPSAoKSA9PiB7CiAgICBzZXRUaGVtZSgocHJldlRoZW1lKSA9PiAocHJldlRoZW1lID09PSAnbGlnaHQnID8gJ2RhcmsnIDogJ2xpZ2h0JykpOwogIH07CgogIHJldHVybiAoCiAgICA8VGhlbWVDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt7IHRoZW1lLCB0b2dnbGVUaGVtZSB9fT4KICAgICAge2NoaWxkcmVufQogICAgPC9UaGVtZUNvbnRleHQuUHJvdmlkZXI+CiAgKTsKfTsKCi8vIEhvb2sgcGVyc29uYWxpdHphdCBwZXIgdXRpbGl0emFyIGVsIFRoZW1lQ29udGV4dApjb25zdCB1c2VUaGVtZSA9ICgpID0+IHsKICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChUaGVtZUNvbnRleHQpOwogIGlmIChjb250ZXh0ID09PSB1bmRlZmluZWQpIHsKICAgIHRocm93IG5ldyBFcnJvcigndXNlVGhlbWUgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFRoZW1lUHJvdmlkZXInKTsKICB9CiAgcmV0dXJuIGNvbnRleHQ7Cn07CgpleHBvcnQgeyBUaGVtZVByb3ZpZGVyLCB1c2VUaGVtZSB9Ow=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React, { createContext, useContext, useState, ReactNode } from 'react';

// Defineix la forma del valor del context
interface ThemeContextType {
  theme: string;
  toggleTheme: () =&gt; void;
}

// Crea el context amb un valor per defecte
const ThemeContext = createContext&lt;ThemeContextType | undefined&gt;(undefined);

// Crea un component provider
const ThemeProvider: React.FC&lt;{ children: ReactNode }&gt; = ({ children }) =&gt; {
  const [theme, setTheme] = useState&lt;string&gt;('light');

  const toggleTheme = () =&gt; {
    setTheme((prevTheme) =&gt; (prevTheme === 'light' ? 'dark' : 'light'));
  };

  return (
    &lt;ThemeContext.Provider value={{ theme, toggleTheme }}&gt;
      {children}
    &lt;/ThemeContext.Provider&gt;
  );
};

// Hook personalitzat per utilitzar el ThemeContext
const useTheme = () =&gt; {
  const context = useContext(ThemeContext);
  if (context === undefined) {
    throw new Error('useTheme must be used within a ThemeProvider');
  }
  return context;
};

export { ThemeProvider, useTheme };</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>ThemeContextType</strong>: Defineix la forma del valor del context.</li>
<li><strong>ThemeContext</strong>: Crea el context amb un valor per defecte de <code>undefined</code>.</li>
<li><strong>ThemeProvider</strong>: Proporciona el valor del context als seus fills.</li>
<li><strong>useTheme</strong>: Hook personalitzat per consumir el valor del context.</li>
</ul>
</div><h1>Utilitzant el Context en Components</h1>
<div class='content'><p>Un cop el context està creat i proporcionat, pots utilitzar-lo en qualsevol component dins del provider.</p>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgVGhlbWVQcm92aWRlciwgdXNlVGhlbWUgfSBmcm9tICcuL1RoZW1lQ29udGV4dCc7Cgpjb25zdCBUaGVtZVRvZ2dsZUJ1dHRvbjogUmVhY3QuRkMgPSAoKSA9PiB7CiAgY29uc3QgeyB0aGVtZSwgdG9nZ2xlVGhlbWUgfSA9IHVzZVRoZW1lKCk7CgogIHJldHVybiAoCiAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZVRoZW1lfT4KICAgICAgQ3VycmVudCBUaGVtZToge3RoZW1lfQogICAgPC9idXR0b24+CiAgKTsKfTsKCmNvbnN0IEFwcDogUmVhY3QuRkMgPSAoKSA9PiB7CiAgcmV0dXJuICgKICAgIDxUaGVtZVByb3ZpZGVyPgogICAgICA8ZGl2PgogICAgICAgIDxoMT5XZWxjb21lIHRvIHRoZSBUaGVtZSBBcHA8L2gxPgogICAgICAgIDxUaGVtZVRvZ2dsZUJ1dHRvbiAvPgogICAgICA8L2Rpdj4KICAgIDwvVGhlbWVQcm92aWRlcj4KICApOwp9OwoKZXhwb3J0IGRlZmF1bHQgQXBwOw=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React from 'react';
import { ThemeProvider, useTheme } from './ThemeContext';

const ThemeToggleButton: React.FC = () =&gt; {
  const { theme, toggleTheme } = useTheme();

  return (
    &lt;button onClick={toggleTheme}&gt;
      Current Theme: {theme}
    &lt;/button&gt;
  );
};

const App: React.FC = () =&gt; {
  return (
    &lt;ThemeProvider&gt;
      &lt;div&gt;
        &lt;h1&gt;Welcome to the Theme App&lt;/h1&gt;
        &lt;ThemeToggleButton /&gt;
      &lt;/div&gt;
    &lt;/ThemeProvider&gt;
  );
};

export default App;</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>ThemeToggleButton</strong>: Un component que consumeix el valor del context utilitzant el hook <code>useTheme</code> i canvia el tema en fer clic al botó.</li>
<li><strong>App</strong>: El component principal de l'aplicació que embolcalla els seus fills amb el <code>ThemeProvider</code>.</li>
</ul>
</div><h1>Seguretat de Tipus amb TypeScript</h1>
<div class='content'><p>Utilitzar TypeScript amb la Context API assegura que el valor del context sigui segur, reduint el risc d'errors en temps d'execució.</p>
</div><h2>Exemple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoVGhlbWVDb250ZXh0KTsKaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkgewogIHRocm93IG5ldyBFcnJvcigndXNlVGhlbWUgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFRoZW1lUHJvdmlkZXInKTsKfQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const context = useContext(ThemeContext);
if (context === undefined) {
  throw new Error('useTheme must be used within a ThemeProvider');
}</pre></div><div class='content'><ul>
<li>Aquesta comprovació assegura que el context no és <code>undefined</code>, proporcionant una manera segura de consumir el valor del context.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>La Context API, quan es combina amb TypeScript, proporciona una manera potent i segura de gestionar l'estat globalment en la teva aplicació React. Definint la forma del valor del context utilitzant interfícies de TypeScript, pots assegurar que els teus valors de context siguin consistents i segurs a través de la teva aplicació.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='hooks-typescript'>&#x25C4;Hooks amb TypeScript</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Context API amb TypeScript</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-testing'>Introducció a les proves &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
