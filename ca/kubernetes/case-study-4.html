<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudi de Cas 4: Monitorització i Registre</title>

    <link rel="alternate" href="https://campusempresa.com/es/kubernetes/case-study-4" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/kubernetes/case-study-4" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/kubernetes/case-study-4" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/ca/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="/es/kubernetes/case-study-4" id="lnk_lang_es" data-lang="es" class="px-2">ES</a></b>
				|
				<b id="lit_lang_ca" class="px-2">CA</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/ca/objective">El Projecte</a>
				<a href="/ca/about">Sobre nosaltres</a>
				<a href="/ca/contribute">Contribuir</a>
				<a href="/ca/donate">Donacions</a>
				<a href="/ca/licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='case-study-3'>&#x25C4;Estudi de Cas 3: Implementació de CI/CD</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Estudi de Cas 4: Monitorització i Registre</a>
	</div>
	<div class='col-4 text-end'>
					<a href='project-overview'>Visió General del Projecte &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducció</h1>
<div class='content'><p>En aquest estudi de cas, explorarem els conceptes i pràctiques essencials per a la monitorització i el registre en Kubernetes. La monitorització i el registre són crítics per mantenir la salut, el rendiment i la seguretat dels teus clústers i aplicacions de Kubernetes. Cobrirem els següents temes:</p>
<ul>
<li>Importància de la Monitorització i el Registre</li>
<li>Eines per a la Monitorització en Kubernetes</li>
<li>Eines per al Registre en Kubernetes</li>
<li>Configuració de la Monitorització i el Registre</li>
<li>Millors Pràctiques</li>
</ul>
</div><h1>Importància de la Monitorització i el Registre</h1>
<div class='content'><p>La monitorització i el registre són crucials per diverses raons:</p>
<ul>
<li><strong>Gestió del Rendiment</strong>: Assegura que les teves aplicacions funcionin eficientment.</li>
<li><strong>Resolució de Problemes</strong>: Ajuda a identificar i resoldre problemes ràpidament.</li>
<li><strong>Seguretat</strong>: Detecta i alerta sobre possibles amenaces de seguretat.</li>
<li><strong>Compliment</strong>: Manté registres per a auditories i propòsits de compliment.</li>
</ul>
</div><h1>Eines per a la Monitorització en Kubernetes</h1>
<div class='content'><p>Hi ha diverses eines disponibles per a la monitorització de clústers i aplicacions de Kubernetes. Aquí en tens algunes de les més populars:</p>
<ul>
<li><strong>Prometheus</strong>: Un conjunt d'eines de monitorització i alerta de codi obert.</li>
<li><strong>Grafana</strong>: Una potent eina de visualització que s'integra amb Prometheus.</li>
<li><strong>Kube-state-metrics</strong>: Exposa mètriques a nivell de clúster de Kubernetes.</li>
<li><strong>cAdvisor</strong>: Proporciona mètriques d'ús de recursos i rendiment dels contenidors.</li>
</ul>
</div><h2>Prometheus</h2>
<div class='content'><p>Prometheus és àmpliament utilitzat per a la monitorització de Kubernetes. Recull mètriques dels objectius configurats a intervals donats, avalua expressions de regles, mostra els resultats i pot activar alertes si s'observen certes condicions.</p>
<h4>Exemple: Configuració de Prometheus</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogdjEKa2luZDogQ29uZmlnTWFwCm1ldGFkYXRhOgogIG5hbWU6IHByb21ldGhldXMtY29uZmlnCiAgbmFtZXNwYWNlOiBtb25pdG9yaW5nCmRhdGE6CiAgcHJvbWV0aGV1cy55bWw6IHwKICAgIGdsb2JhbDoKICAgICAgc2NyYXBlX2ludGVydmFsOiAxNXMKICAgIHNjcmFwZV9jb25maWdzOgogICAgICAtIGpvYl9uYW1lOiAna3ViZXJuZXRlcy1hcGlzZXJ2ZXJzJwogICAgICAgIGt1YmVybmV0ZXNfc2RfY29uZmlnczoKICAgICAgICAtIHJvbGU6IGVuZHBvaW50cwogICAgICAgIHJlbGFiZWxfY29uZmlnczoKICAgICAgICAtIHNvdXJjZV9sYWJlbHM6IFtfX21ldGFfa3ViZXJuZXRlc19uYW1lc3BhY2UsIF9fbWV0YV9rdWJlcm5ldGVzX3NlcnZpY2VfbmFtZSwgX19tZXRhX2t1YmVybmV0ZXNfZW5kcG9pbnRfcG9ydF9uYW1lXQogICAgICAgICAgYWN0aW9uOiBrZWVwCiAgICAgICAgICByZWdleDogZGVmYXVsdDtrdWJlcm5ldGVzO2h0dHBz"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: v1
kind: ConfigMap
metadata:
  name: prometheus-config
  namespace: monitoring
data:
  prometheus.yml: |
    global:
      scrape_interval: 15s
    scrape_configs:
      - job_name: 'kubernetes-apiservers'
        kubernetes_sd_configs:
        - role: endpoints
        relabel_configs:
        - source_labels: [__meta_kubernetes_namespace, __meta_kubernetes_service_name, __meta_kubernetes_endpoint_port_name]
          action: keep
          regex: default;kubernetes;https</pre></div><div class='content'><p>Aquesta configuració configura Prometheus per recollir mètriques dels servidors d'API de Kubernetes cada 15 segons.</p>
</div><h1>Eines per al Registre en Kubernetes</h1>
<div class='content'><p>Les eines de registre ajuden a recollir, emmagatzemar i analitzar registres dels teus clústers i aplicacions de Kubernetes. Algunes eines de registre populars inclouen:</p>
<ul>
<li><strong>Fluentd</strong>: Un col·lector de dades de codi obert per a un registre unificat.</li>
<li><strong>Elasticsearch</strong>: Un motor de cerca i analítica.</li>
<li><strong>Kibana</strong>: Una eina de visualització que funciona amb Elasticsearch.</li>
<li><strong>Loki</strong>: Un sistema d'agregació de registres dissenyat per a l'eficiència i l'escalabilitat.</li>
</ul>
</div><h2>Fluentd</h2>
<div class='content'><p>Fluentd és comunament utilitzat en Kubernetes per a la recollida i agregació de registres. Es pot configurar per recollir registres de diverses fonts i reenviar-los a diferents destinacions.</p>
<h4>Exemple: Configuració de Fluentd</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogdjEKa2luZDogQ29uZmlnTWFwCm1ldGFkYXRhOgogIG5hbWU6IGZsdWVudGQtY29uZmlnCiAgbmFtZXNwYWNlOiBsb2dnaW5nCmRhdGE6CiAgZmx1ZW50LmNvbmY6IHwKICAgIDxzb3VyY2U+CiAgICAgIEB0eXBlIHRhaWwKICAgICAgcGF0aCAvdmFyL2xvZy9jb250YWluZXJzLyoubG9nCiAgICAgIHBvc19maWxlIC92YXIvbG9nL2ZsdWVudGQtY29udGFpbmVycy5sb2cucG9zCiAgICAgIHRhZyBrdWJlcm5ldGVzLioKICAgICAgPHBhcnNlPgogICAgICAgIEB0eXBlIGpzb24KICAgICAgPC9wYXJzZT4KICAgIDwvc291cmNlPgogICAgPG1hdGNoIGt1YmVybmV0ZXMuKio+CiAgICAgIEB0eXBlIGVsYXN0aWNzZWFyY2gKICAgICAgaG9zdCBlbGFzdGljc2VhcmNoLmxvZ2dpbmcuc3ZjLmNsdXN0ZXIubG9jYWwKICAgICAgcG9ydCA5MjAwCiAgICAgIGxvZ3N0YXNoX2Zvcm1hdCB0cnVlCiAgICA8L21hdGNoPg=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: v1
kind: ConfigMap
metadata:
  name: fluentd-config
  namespace: logging
data:
  fluent.conf: |
    &lt;source&gt;
      @type tail
      path /var/log/containers/*.log
      pos_file /var/log/fluentd-containers.log.pos
      tag kubernetes.*
      &lt;parse&gt;
        @type json
      &lt;/parse&gt;
    &lt;/source&gt;
    &lt;match kubernetes.**&gt;
      @type elasticsearch
      host elasticsearch.logging.svc.cluster.local
      port 9200
      logstash_format true
    &lt;/match&gt;</pre></div><div class='content'><p>Aquesta configuració configura Fluentd per recollir registres dels fitxers de registre dels contenidors i reenviar-los a una instància d'Elasticsearch.</p>
</div><h1>Configuració de la Monitorització i el Registre</h1>
<div class='content'><p>Per configurar la monitorització i el registre en el teu clúster de Kubernetes, segueix aquests passos:</p>
<ol>
<li><strong>Desplegar Prometheus</strong>: Utilitza Helm o manifests de Kubernetes per desplegar Prometheus.</li>
<li><strong>Desplegar Grafana</strong>: Integra Grafana amb Prometheus per a la visualització.</li>
<li><strong>Desplegar Fluentd</strong>: Configura Fluentd per recollir i reenviar registres.</li>
<li><strong>Desplegar Elasticsearch i Kibana</strong>: Configura Elasticsearch per a l'emmagatzematge de registres i Kibana per a la visualització de registres.</li>
</ol>
</div><h2>Exemple: Desplegar Prometheus i Grafana utilitzant Helm</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBBZmVnZWl4IGVsIHJlcG9zaXRvcmkgSGVsbSBkZSBQcm9tZXRoZXVzCmhlbG0gcmVwbyBhZGQgcHJvbWV0aGV1cy1jb21tdW5pdHkgaHR0cHM6Ly9wcm9tZXRoZXVzLWNvbW11bml0eS5naXRodWIuaW8vaGVsbS1jaGFydHMKCiMgSW5zdGFswrdsYSBQcm9tZXRoZXVzCmhlbG0gaW5zdGFsbCBwcm9tZXRoZXVzIHByb21ldGhldXMtY29tbXVuaXR5L3Byb21ldGhldXMKCiMgQWZlZ2VpeCBlbCByZXBvc2l0b3JpIEhlbG0gZGUgR3JhZmFuYQpoZWxtIHJlcG8gYWRkIGdyYWZhbmEgaHR0cHM6Ly9ncmFmYW5hLmdpdGh1Yi5pby9oZWxtLWNoYXJ0cwoKIyBJbnN0YWzCt2xhIEdyYWZhbmEKaGVsbSBpbnN0YWxsIGdyYWZhbmEgZ3JhZmFuYS9ncmFmYW5h"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Afegeix el repositori Helm de Prometheus
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts

# Instal&middot;la Prometheus
helm install prometheus prometheus-community/prometheus

# Afegeix el repositori Helm de Grafana
helm repo add grafana https://grafana.github.io/helm-charts

# Instal&middot;la Grafana
helm install grafana grafana/grafana</pre></div><div class='content'></div><h1>Millors Pràctiques</h1>
<div class='content'><ul>
<li><strong>Registre Centralitzat</strong>: Utilitza un sistema de registre centralitzat per agregar registres de totes les fonts.</li>
<li><strong>Alertes</strong>: Configura alertes per a mètriques i patrons de registre crítics.</li>
<li><strong>Polítiques de Retenció</strong>: Implementa polítiques de retenció de registres per gestionar l'emmagatzematge.</li>
<li><strong>Seguretat</strong>: Assegura que els registres estiguin emmagatzemats de manera segura i que l'accés estigui controlat.</li>
<li><strong>Escalabilitat</strong>: Utilitza solucions escalables per gestionar grans volums de mètriques i registres.</li>
</ul>
</div><h1>Conclusió</h1>
<div class='content'><p>La monitorització i el registre són components vitals per a la gestió de clústers i aplicacions de Kubernetes. Utilitzant eines com Prometheus, Grafana, Fluentd, Elasticsearch i Kibana, pots obtenir informació valuosa sobre el rendiment, la salut i la seguretat dels teus sistemes. Implementar les millors pràctiques assegura que la teva infraestructura de monitorització i registre sigui eficient, segura i escalable.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='case-study-3'>&#x25C4;Estudi de Cas 3: Implementació de CI/CD</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Estudi de Cas 4: Monitorització i Registre</a>
	</div>
	<div class='col-4 text-end'>
					<a href='project-overview'>Visió General del Projecte &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/ca/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
