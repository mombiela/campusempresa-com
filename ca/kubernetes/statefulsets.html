<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construint la societat d'avui<br> i del demà</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
							<a href="https://campusempresa.com/kubernetes/statefulsets" id="lnk_lang_es" data-lang="es">Castellano</a></b>
				|
				<b id="lit_lang_ca">Catala</b>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Projecte</a>
				<a href="about">Sobre nosaltres</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donacions</a>
				<a href="licence">Llicència</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>Els StatefulSets són un recurs de Kubernetes dissenyat per gestionar aplicacions amb estat. A diferència dels Deployments, que s'utilitzen per a aplicacions sense estat, els StatefulSets s'utilitzen per a aplicacions que requereixen emmagatzematge persistent i identitats de xarxa estables.</p>
</div><h1>Conceptes Clau</h1>
<div class='content'><ul>
<li><strong>Aplicacions amb Estat</strong>: Aplicacions que requereixen emmagatzematge persistent i identitats de xarxa estables.</li>
<li><strong>Pods</strong>: Els StatefulSets gestionen el desplegament i l'escalat d'un conjunt de Pods, i proporcionen garanties sobre l'ordre i la unicitat d'aquests Pods.</li>
<li><strong>Persistent Volume Claims (PVCs)</strong>: Els StatefulSets treballen amb PVCs per proporcionar emmagatzematge persistent per a cada Pod.</li>
<li><strong>Identitats de Xarxa Estables</strong>: Cada Pod en un StatefulSet té una identitat de xarxa única i estable.</li>
<li><strong>Desplegament i Escalat Ordenat</strong>: Els Pods es creen, s'eliminen i s'escala en un ordre específic.</li>
</ul>
</div><h1>Conceptes Bàsics de StatefulSet</h1>
<div class='content'></div><h2>Creació d'un StatefulSet</h2>
<div class='content'><p>Per crear un StatefulSet, cal definir-lo en un fitxer YAML. A continuació es mostra un exemple d'una definició simple de StatefulSet:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBwcy92MQpraW5kOiBTdGF0ZWZ1bFNldAptZXRhZGF0YToKICBuYW1lOiB3ZWIKc3BlYzoKICBzZXJ2aWNlTmFtZTogIm5naW54IgogIHJlcGxpY2FzOiAzCiAgc2VsZWN0b3I6CiAgICBtYXRjaExhYmVsczoKICAgICAgYXBwOiBuZ2lueAogIHRlbXBsYXRlOgogICAgbWV0YWRhdGE6CiAgICAgIGxhYmVsczoKICAgICAgICBhcHA6IG5naW54CiAgICBzcGVjOgogICAgICBjb250YWluZXJzOgogICAgICAtIG5hbWU6IG5naW54CiAgICAgICAgaW1hZ2U6IGs4cy5nY3IuaW8vbmdpbngtc2xpbTowLjgKICAgICAgICBwb3J0czoKICAgICAgICAtIGNvbnRhaW5lclBvcnQ6IDgwCiAgICAgICAgICBuYW1lOiB3ZWIKICB2b2x1bWVDbGFpbVRlbXBsYXRlczoKICAtIG1ldGFkYXRhOgogICAgICBuYW1lOiB3d3cKICAgIHNwZWM6CiAgICAgIGFjY2Vzc01vZGVzOiBbICJSZWFkV3JpdGVPbmNlIiBdCiAgICAgIHJlc291cmNlczoKICAgICAgICByZXF1ZXN0czoKICAgICAgICAgIHN0b3JhZ2U6IDFHaQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: web
spec:
  serviceName: &quot;nginx&quot;
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: k8s.gcr.io/nginx-slim:0.8
        ports:
        - containerPort: 80
          name: web
  volumeClaimTemplates:
  - metadata:
      name: www
    spec:
      accessModes: [ &quot;ReadWriteOnce&quot; ]
      resources:
        requests:
          storage: 1Gi</pre></div><div class='content'></div><h2>Explicació</h2>
<div class='content'><ul>
<li><strong>apiVersion</strong>: Especifica la versió de l'API.</li>
<li><strong>kind</strong>: Especifica que això és un StatefulSet.</li>
<li><strong>metadata</strong>: Conté el nom del StatefulSet.</li>
<li><strong>spec</strong>: Defineix l'estat desitjat del StatefulSet.
<ul>
<li><strong>serviceName</strong>: El nom del servei que governa aquest StatefulSet.</li>
<li><strong>replicas</strong>: El nombre de Pods desitjats.</li>
<li><strong>selector</strong>: Una consulta d'etiquetes sobre els Pods que haurien de coincidir amb el recompte de rèpliques.</li>
<li><strong>template</strong>: La plantilla del Pod.
<ul>
<li><strong>metadata</strong>: Etiquetes per als Pods.</li>
<li><strong>spec</strong>: L'especificació per als Pods.
<ul>
<li><strong>containers</strong>: Les especificacions del contenidor.
<ul>
<li><strong>name</strong>: El nom del contenidor.</li>
<li><strong>image</strong>: La imatge del contenidor.</li>
<li><strong>ports</strong>: Els ports exposats pel contenidor.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>volumeClaimTemplates</strong>: Defineix els PVCs per als Pods.</li>
</ul>
</li>
</ul>
</div><h2>Desplegament del StatefulSet</h2>
<div class='content'><p>Per desplegar el StatefulSet, utilitza la següent comanda:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBzdGF0ZWZ1bHNldC55YW1s"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f statefulset.yaml</pre></div><div class='content'></div><h2>Verificació del StatefulSet</h2>
<div class='content'><p>Per verificar que el StatefulSet està en funcionament, utilitza la següent comanda:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBnZXQgc3RhdGVmdWxzZXRz"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl get statefulsets</pre></div><div class='content'><p>Hauries de veure una sortida similar a:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TkFNRSAgIFJFQURZICAgQUdFCndlYiAgICAzLzMgICAgIDFt"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NAME   READY   AGE
web    3/3     1m</pre></div><div class='content'></div><h1>Conceptes Avançats</h1>
<div class='content'></div><h2>Actualitzacions Progressives</h2>
<div class='content'><p>Els StatefulSets admeten actualitzacions progressives, permetent actualitzar els Pods de manera controlada. Per realitzar una actualització progressiva, simplement actualitza la imatge del contenidor en la definició del StatefulSet i aplica els canvis.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3BlYzoKICB0ZW1wbGF0ZToKICAgIHNwZWM6CiAgICAgIGNvbnRhaW5lcnM6CiAgICAgIC0gbmFtZTogbmdpbngKICAgICAgICBpbWFnZTogazhzLmdjci5pby9uZ2lueC1zbGltOjAuOQ=="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>spec:
  template:
    spec:
      containers:
      - name: nginx
        image: k8s.gcr.io/nginx-slim:0.9</pre></div><div class='content'><p>Aplica els canvis:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBzdGF0ZWZ1bHNldC55YW1s"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f statefulset.yaml</pre></div><div class='content'></div><h2>Escalat d'un StatefulSet</h2>
<div class='content'><p>Per escalar un StatefulSet, utilitza la següent comanda:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBzY2FsZSBzdGF0ZWZ1bHNldCB3ZWIgLS1yZXBsaWNhcz01"))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl scale statefulset web --replicas=5</pre></div><div class='content'></div><h2>Eliminació d'un StatefulSet</h2>
<div class='content'><p>Per eliminar un StatefulSet sense eliminar els PVCs associats, utilitza la següent comanda:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBkZWxldGUgc3RhdGVmdWxzZXQgd2ViIC0tY2FzY2FkZT1vcnBoYW4="))));alert("Copiat!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl delete statefulset web --cascade=orphan</pre></div><div class='content'><p>Aquesta comanda elimina el StatefulSet però deixa els PVCs intactes.</p>
</div><h1>Resum</h1>
<div class='content'><p>Els StatefulSets són un recurs potent de Kubernetes per gestionar aplicacions amb estat. Proporcionen identitats de xarxa estables, emmagatzematge persistent i desplegament i escalat ordenat. Comprenent i utilitzant els StatefulSets, pots gestionar eficaçment aplicacions complexes amb estat en el teu clúster de Kubernetes.</p>
<ul>
<li><strong>StatefulSets</strong> gestionen aplicacions amb estat.</li>
<li><strong>Persistent Volume Claims (PVCs)</strong> proporcionen emmagatzematge persistent.</li>
<li><strong>Identitats de Xarxa Estables</strong> asseguren que cada Pod té una identitat única.</li>
<li><strong>Desplegament i Escalat Ordenat</strong> asseguren que els Pods es creen i s'eliminen en un ordre específic.</li>
</ul>
<p>Dominant aquests conceptes, pots aprofitar els StatefulSets per gestionar aplicacions amb estat de manera eficient a Kubernetes.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicitat</h1>
			<p>Aquest espai està destinat a publicitat.</p>
			<p>Si vols ser patrocinador, contacta amb nosaltres per incloure enllaços en aquesta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Gràcies per col·laborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Tots els drets reservats</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
