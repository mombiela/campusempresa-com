<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrones de Diseño Comunes en Rust</title>

    <link rel="alternate" href="https://campusempresa.com/rust/common-design-patterns" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/rust/common-design-patterns" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/rust/common-design-patterns" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/rust/common-design-patterns" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/rust/common-design-patterns" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='code-style-and-formatting'>&#x25C4;Estilo de Código y Formateo</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Patrones de Diseño Comunes en Rust</a>
	</div>
	<div class='col-4 text-end'>
					<a href='performance-optimization'>Optimización del Rendimiento &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Los patrones de diseño son soluciones típicas a problemas comunes en el diseño de software. Son como planos que pueden ser personalizados para resolver un problema de diseño particular en tu código. En esta sección, exploraremos algunos de los patrones de diseño más comunes y cómo implementarlos en Rust.</p>
</div><h1>Patrón Singleton</h1>
<div class='content'><p>El patrón Singleton asegura que una clase tenga solo una instancia y proporciona un punto de acceso global a ella.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Instancia Única</strong>: Solo se crea una instancia de la clase.</li>
<li><strong>Acceso Global</strong>: La instancia es accesible globalmente.</li>
</ul>
</div><h2>Implementación en Rust</h2>
<div class='content'><p>En Rust, podemos usar el crate <code>lazy_static</code> para implementar el patrón Singleton.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I1ttYWNyb191c2VdCmV4dGVybiBjcmF0ZSBsYXp5X3N0YXRpYzsKdXNlIHN0ZDo6c3luYzo6TXV0ZXg7CgpzdHJ1Y3QgU2luZ2xldG9uIHsKICAgIHZhbHVlOiBpMzIsCn0KCmltcGwgU2luZ2xldG9uIHsKICAgIGZuIG5ldygpIC0+IFNpbmdsZXRvbiB7CiAgICAgICAgU2luZ2xldG9uIHsgdmFsdWU6IDAgfQogICAgfQoKICAgIGZuIHNldF92YWx1ZSgmbXV0IHNlbGYsIHZhbHVlOiBpMzIpIHsKICAgICAgICBzZWxmLnZhbHVlID0gdmFsdWU7CiAgICB9CgogICAgZm4gZ2V0X3ZhbHVlKCZzZWxmKSAtPiBpMzIgewogICAgICAgIHNlbGYudmFsdWUKICAgIH0KfQoKbGF6eV9zdGF0aWMhIHsKICAgIHN0YXRpYyByZWYgU0lOR0xFVE9OOiBNdXRleDxTaW5nbGV0b24+ID0gTXV0ZXg6Om5ldyhTaW5nbGV0b246Om5ldygpKTsKfQoKZm4gbWFpbigpIHsKICAgIHsKICAgICAgICBsZXQgbXV0IHNpbmdsZXRvbiA9IFNJTkdMRVRPTi5sb2NrKCkudW53cmFwKCk7CiAgICAgICAgc2luZ2xldG9uLnNldF92YWx1ZSg0Mik7CiAgICB9CgogICAgewogICAgICAgIGxldCBzaW5nbGV0b24gPSBTSU5HTEVUT04ubG9jaygpLnVud3JhcCgpOwogICAgICAgIHByaW50bG4hKCJWYWxvciBkZWwgU2luZ2xldG9uOiB7fSIsIHNpbmdsZXRvbi5nZXRfdmFsdWUoKSk7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#[macro_use]
extern crate lazy_static;
use std::sync::Mutex;

struct Singleton {
    value: i32,
}

impl Singleton {
    fn new() -&gt; Singleton {
        Singleton { value: 0 }
    }

    fn set_value(&amp;mut self, value: i32) {
        self.value = value;
    }

    fn get_value(&amp;self) -&gt; i32 {
        self.value
    }
}

lazy_static! {
    static ref SINGLETON: Mutex&lt;Singleton&gt; = Mutex::new(Singleton::new());
}

fn main() {
    {
        let mut singleton = SINGLETON.lock().unwrap();
        singleton.set_value(42);
    }

    {
        let singleton = SINGLETON.lock().unwrap();
        println!(&quot;Valor del Singleton: {}&quot;, singleton.get_value());
    }
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>lazy_static!</strong>: Este macro nos permite definir variables estáticas que requieren que se ejecute código en tiempo de ejecución.</li>
<li><strong>Mutex</strong>: Asegura que solo un hilo pueda acceder a la instancia del Singleton a la vez, haciéndolo seguro para hilos.</li>
</ul>
</div><h1>Patrón Builder</h1>
<div class='content'><p>El patrón Builder se usa para construir un objeto complejo paso a paso. Separa la construcción de un objeto complejo de su representación.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Construcción Paso a Paso</strong>: Construye el objeto paso a paso.</li>
<li><strong>Separación de Responsabilidades</strong>: Separa el proceso de construcción de la representación final.</li>
</ul>
</div><h2>Implementación en Rust</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IEhvdXNlIHsKICAgIHdhbGxzOiB1MzIsCiAgICBkb29yczogdTMyLAogICAgd2luZG93czogdTMyLAp9CgpzdHJ1Y3QgSG91c2VCdWlsZGVyIHsKICAgIHdhbGxzOiB1MzIsCiAgICBkb29yczogdTMyLAogICAgd2luZG93czogdTMyLAp9CgppbXBsIEhvdXNlQnVpbGRlciB7CiAgICBmbiBuZXcoKSAtPiBIb3VzZUJ1aWxkZXIgewogICAgICAgIEhvdXNlQnVpbGRlciB7CiAgICAgICAgICAgIHdhbGxzOiAwLAogICAgICAgICAgICBkb29yczogMCwKICAgICAgICAgICAgd2luZG93czogMCwKICAgICAgICB9CiAgICB9CgogICAgZm4gd2FsbHMobXV0IHNlbGYsIGNvdW50OiB1MzIpIC0+IEhvdXNlQnVpbGRlciB7CiAgICAgICAgc2VsZi53YWxscyA9IGNvdW50OwogICAgICAgIHNlbGYKICAgIH0KCiAgICBmbiBkb29ycyhtdXQgc2VsZiwgY291bnQ6IHUzMikgLT4gSG91c2VCdWlsZGVyIHsKICAgICAgICBzZWxmLmRvb3JzID0gY291bnQ7CiAgICAgICAgc2VsZgogICAgfQoKICAgIGZuIHdpbmRvd3MobXV0IHNlbGYsIGNvdW50OiB1MzIpIC0+IEhvdXNlQnVpbGRlciB7CiAgICAgICAgc2VsZi53aW5kb3dzID0gY291bnQ7CiAgICAgICAgc2VsZgogICAgfQoKICAgIGZuIGJ1aWxkKHNlbGYpIC0+IEhvdXNlIHsKICAgICAgICBIb3VzZSB7CiAgICAgICAgICAgIHdhbGxzOiBzZWxmLndhbGxzLAogICAgICAgICAgICBkb29yczogc2VsZi5kb29ycywKICAgICAgICAgICAgd2luZG93czogc2VsZi53aW5kb3dzLAogICAgICAgIH0KICAgIH0KfQoKZm4gbWFpbigpIHsKICAgIGxldCBob3VzZSA9IEhvdXNlQnVpbGRlcjo6bmV3KCkKICAgICAgICAud2FsbHMoNCkKICAgICAgICAuZG9vcnMoMikKICAgICAgICAud2luZG93cyg2KQogICAgICAgIC5idWlsZCgpOwoKICAgIHByaW50bG4hKCJMYSBjYXNhIHRpZW5lIHt9IHBhcmVkZXMsIHt9IHB1ZXJ0YXMgeSB7fSB2ZW50YW5hcy4iLCBob3VzZS53YWxscywgaG91c2UuZG9vcnMsIGhvdXNlLndpbmRvd3MpOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct House {
    walls: u32,
    doors: u32,
    windows: u32,
}

struct HouseBuilder {
    walls: u32,
    doors: u32,
    windows: u32,
}

impl HouseBuilder {
    fn new() -&gt; HouseBuilder {
        HouseBuilder {
            walls: 0,
            doors: 0,
            windows: 0,
        }
    }

    fn walls(mut self, count: u32) -&gt; HouseBuilder {
        self.walls = count;
        self
    }

    fn doors(mut self, count: u32) -&gt; HouseBuilder {
        self.doors = count;
        self
    }

    fn windows(mut self, count: u32) -&gt; HouseBuilder {
        self.windows = count;
        self
    }

    fn build(self) -&gt; House {
        House {
            walls: self.walls,
            doors: self.doors,
            windows: self.windows,
        }
    }
}

fn main() {
    let house = HouseBuilder::new()
        .walls(4)
        .doors(2)
        .windows(6)
        .build();

    println!(&quot;La casa tiene {} paredes, {} puertas y {} ventanas.&quot;, house.walls, house.doors, house.windows);
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>Interfaz Fluida</strong>: Los métodos del constructor devuelven <code>self</code>, permitiendo el encadenamiento de métodos.</li>
<li><strong>Construcción Final</strong>: El método <code>build</code> construye el objeto final <code>House</code>.</li>
</ul>
</div><h1>Patrón Observer</h1>
<div class='content'><p>El patrón Observer define una dependencia de uno a muchos entre objetos para que cuando un objeto cambie de estado, todos sus dependientes sean notificados y actualizados automáticamente.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Sujeto</strong>: El objeto que está siendo observado.</li>
<li><strong>Observadores</strong>: Los objetos que son notificados de los cambios en el sujeto.</li>
</ul>
</div><h2>Implementación en Rust</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0ZDo6Y2VsbDo6UmVmQ2VsbDsKdXNlIHN0ZDo6cmM6OlJjOwoKdHJhaXQgT2JzZXJ2ZXIgewogICAgZm4gdXBkYXRlKCZzZWxmKTsKfQoKc3RydWN0IFN1YmplY3QgewogICAgb2JzZXJ2ZXJzOiBWZWM8UmM8UmVmQ2VsbDxkeW4gT2JzZXJ2ZXI+Pj4sCn0KCmltcGwgU3ViamVjdCB7CiAgICBmbiBuZXcoKSAtPiBTdWJqZWN0IHsKICAgICAgICBTdWJqZWN0IHsKICAgICAgICAgICAgb2JzZXJ2ZXJzOiBWZWM6Om5ldygpLAogICAgICAgIH0KICAgIH0KCiAgICBmbiBhZGRfb2JzZXJ2ZXIoJm11dCBzZWxmLCBvYnNlcnZlcjogUmM8UmVmQ2VsbDxkeW4gT2JzZXJ2ZXI+PikgewogICAgICAgIHNlbGYub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpOwogICAgfQoKICAgIGZuIG5vdGlmeV9vYnNlcnZlcnMoJnNlbGYpIHsKICAgICAgICBmb3Igb2JzZXJ2ZXIgaW4gJnNlbGYub2JzZXJ2ZXJzIHsKICAgICAgICAgICAgb2JzZXJ2ZXIuYm9ycm93KCkudXBkYXRlKCk7CiAgICAgICAgfQogICAgfQp9CgpzdHJ1Y3QgQ29uY3JldGVPYnNlcnZlciB7CiAgICBpZDogdTMyLAp9CgppbXBsIE9ic2VydmVyIGZvciBDb25jcmV0ZU9ic2VydmVyIHsKICAgIGZuIHVwZGF0ZSgmc2VsZikgewogICAgICAgIHByaW50bG4hKCLCoUVsIG9ic2VydmFkb3Ige30gaGEgc2lkbyBub3RpZmljYWRvISIsIHNlbGYuaWQpOwogICAgfQp9CgpmbiBtYWluKCkgewogICAgbGV0IG11dCBzdWJqZWN0ID0gU3ViamVjdDo6bmV3KCk7CgogICAgbGV0IG9ic2VydmVyMSA9IFJjOjpuZXcoUmVmQ2VsbDo6bmV3KENvbmNyZXRlT2JzZXJ2ZXIgeyBpZDogMSB9KSk7CiAgICBsZXQgb2JzZXJ2ZXIyID0gUmM6Om5ldyhSZWZDZWxsOjpuZXcoQ29uY3JldGVPYnNlcnZlciB7IGlkOiAyIH0pKTsKCiAgICBzdWJqZWN0LmFkZF9vYnNlcnZlcihvYnNlcnZlcjEuY2xvbmUoKSk7CiAgICBzdWJqZWN0LmFkZF9vYnNlcnZlcihvYnNlcnZlcjIuY2xvbmUoKSk7CgogICAgc3ViamVjdC5ub3RpZnlfb2JzZXJ2ZXJzKCk7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use std::cell::RefCell;
use std::rc::Rc;

trait Observer {
    fn update(&amp;self);
}

struct Subject {
    observers: Vec&lt;Rc&lt;RefCell&lt;dyn Observer&gt;&gt;&gt;,
}

impl Subject {
    fn new() -&gt; Subject {
        Subject {
            observers: Vec::new(),
        }
    }

    fn add_observer(&amp;mut self, observer: Rc&lt;RefCell&lt;dyn Observer&gt;&gt;) {
        self.observers.push(observer);
    }

    fn notify_observers(&amp;self) {
        for observer in &amp;self.observers {
            observer.borrow().update();
        }
    }
}

struct ConcreteObserver {
    id: u32,
}

impl Observer for ConcreteObserver {
    fn update(&amp;self) {
        println!(&quot;&iexcl;El observador {} ha sido notificado!&quot;, self.id);
    }
}

fn main() {
    let mut subject = Subject::new();

    let observer1 = Rc::new(RefCell::new(ConcreteObserver { id: 1 }));
    let observer2 = Rc::new(RefCell::new(ConcreteObserver { id: 2 }));

    subject.add_observer(observer1.clone());
    subject.add_observer(observer2.clone());

    subject.notify_observers();
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>Rc y RefCell</strong>: Usados para punteros inteligentes con conteo de referencias y mutabilidad interior, respectivamente.</li>
<li><strong>Despacho Dinámico</strong>: El trait <code>Observer</code> permite diferentes tipos de observadores.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Los patrones de diseño proporcionan soluciones reutilizables a problemas comunes en el diseño de software. En Rust, estos patrones pueden ser implementados usando varias características del lenguaje como traits, punteros inteligentes y primitivas de concurrencia. Al entender y aplicar estos patrones, puedes escribir código en Rust más robusto y mantenible.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='code-style-and-formatting'>&#x25C4;Estilo de Código y Formateo</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Patrones de Diseño Comunes en Rust</a>
	</div>
	<div class='col-4 text-end'>
					<a href='performance-optimization'>Optimización del Rendimiento &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
