<!DOCTYPE html>
<html lang="es">
<head>
    <title> Archivos de Solo Adición (AOF) </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/redis/04-02-append-only-files-aof" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/redis/04-02-append-only-files-aof" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/redis/04-02-append-only-files-aof" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "es";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "redis";
  		var TEMA_NAME = "4-2";
  		var TYPE = "mod";
  		var PATH = "mod/redis/04-02-append-only-files-aof";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.e0e4cfcd99.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo_header.png" alt="Logo Campus Empresa"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/courses/redis/04-02-append-only-files-aof" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/cursos/redis/04-02-append-only-files-aof" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Todo el conocimiento a tu alcance</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objetivo" rel="nofollow">El Proyecto</a> | 
<a href="/acerca-de" rel="nofollow">Sobre nosotros</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donaciones</a> | 
<a href="/licencia" rel="nofollow">Licencia</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/mis-cursos" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Mis cursos</b></i>
</a>
<a href="/cursos-finalizados" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalizados             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="redis">
		<a  href="#" class="text-secondary d-none" data-read-mod="redis" data-read-unit="4-2" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar como leído
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="redis" data-unread-unit="4-2" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar como no leído
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contenido del curso
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-01-snapshots-rdb' title="Instantáneas (RDB)" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-01-snapshots-rdb' title="Instantáneas (RDB)" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Archivos de Solo Adición (AOF)</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='04-03-persistence-configuration' title="Configuración de Persistencia" class="py-2 px-3 btn btn-primary"
				data-read-mod="redis" data-read-unit="4-2">
				Siguiente &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='04-03-persistence-configuration' title="Configuración de Persistencia" class="py-2 px-3 btn btn-primary" 
				data-read-mod="redis" data-read-unit="4-2">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'></div><h2>Introducción</h2>
<div class='content'><p>Los Archivos de Solo Adición (AOF, por sus siglas en inglés) son una de las dos formas principales de persistencia en Redis. A diferencia de las instantáneas (RDB), que guardan el estado de la base de datos en intervalos específicos, AOF registra cada operación de escritura recibida por el servidor. Esto permite una mayor durabilidad y una recuperación más precisa de los datos en caso de fallo.</p>
</div><h2>Ventajas de AOF</h2>
<div class='content'><ol>
<li><strong>Durabilidad</strong>: AOF puede configurarse para escribir cada comando en el disco, lo que minimiza la pérdida de datos.</li>
<li><strong>Recuperación Precisa</strong>: Al registrar cada operación, AOF permite una recuperación más precisa del estado de la base de datos.</li>
<li><strong>Comprensibilidad</strong>: Los archivos AOF son archivos de texto que pueden ser leídos y entendidos fácilmente, lo que facilita la depuración.</li>
</ol>
</div><h2>Desventajas de AOF</h2>
<div class='content'><ol>
<li><strong>Rendimiento</strong>: La escritura frecuente en el disco puede afectar el rendimiento.</li>
<li><strong>Tamaño del Archivo</strong>: Los archivos AOF pueden crecer rápidamente, lo que requiere más espacio en disco y puede necesitar compresión periódica.</li>
</ol>
</div><h2>Configuración de AOF</h2>
<div class='content'><p>Para habilitar AOF en Redis, se debe modificar el archivo de configuración <code>redis.conf</code>. Aquí están los pasos básicos:</p>
<ol>
<li>
<p><strong>Habilitar AOF</strong>:</p>
<pre><code class="language-plaintext">appendonly yes
</code></pre>
</li>
<li>
<p><strong>Configurar la Frecuencia de Sincronización</strong>:</p>
<pre><code class="language-plaintext"># Siempre sincroniza cada comando
appendfsync always

# Sincroniza cada segundo (recomendado)
appendfsync everysec

# Deja que el sistema operativo decida cuándo sincronizar
appendfsync no
</code></pre>
</li>
<li>
<p><strong>Reescritura de AOF</strong>:</p>
<pre><code class="language-plaintext">auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb
</code></pre>
</li>
</ol>
</div><h2>Ejemplo Práctico</h2>
<div class='content'></div><h3>Paso 1: Habilitar AOF</h3>
<div class='content'><p>Edita el archivo <code>redis.conf</code> y asegúrate de que la opción <code>appendonly</code> esté configurada en <code>yes</code>:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwZW5kb25seSB5ZXMKYXBwZW5kZnN5bmMgZXZlcnlzZWM="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>appendonly yes
appendfsync everysec</pre></div><div class='content'></div><h3>Paso 2: Iniciar Redis con AOF</h3>
<div class='content'><p>Inicia el servidor Redis con la configuración modificada:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVkaXMtc2VydmVyIC9wYXRoL3RvL3JlZGlzLmNvbmY="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>redis-server /path/to/redis.conf</pre></div><div class='content'></div><h3>Paso 3: Realizar Operaciones y Verificar AOF</h3>
<div class='content'><p>Conéctate a Redis CLI y realiza algunas operaciones:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVkaXMtY2xp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>redis-cli</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VUIGtleTEgInZhbHVlMSIKU0VUIGtleTIgInZhbHVlMiI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SET key1 &quot;value1&quot;
SET key2 &quot;value2&quot;</pre></div><div class='content'><p>Verifica el contenido del archivo AOF (<code>appendonly.aof</code>):</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2F0IC9wYXRoL3RvL2FwcGVuZG9ubHkuYW9m"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cat /path/to/appendonly.aof</pre></div><div class='content'><p>Deberías ver algo similar a:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("KjIKJDMKU0VUCiQ0CmtleTEKJDYKdmFsdWUxCioyCiQzClNFVAokNAprZXkyCiQ2CnZhbHVlMg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>*2
$3
SET
$4
key1
$6
value1
*2
$3
SET
$4
key2
$6
value2</pre></div><div class='content'></div><h2>Reescritura de AOF</h2>
<div class='content'><p>Redis puede reescribir el archivo AOF para compactarlo y mejorar el rendimiento. La reescritura se puede configurar para que ocurra automáticamente o se puede iniciar manualmente.</p>
</div><h3>Configuración Automática</h3>
<div class='content'><p>En el archivo <code>redis.conf</code>, puedes configurar la reescritura automática:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXV0by1hb2YtcmV3cml0ZS1wZXJjZW50YWdlIDEwMAphdXRvLWFvZi1yZXdyaXRlLW1pbi1zaXplIDY0bWI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb</pre></div><div class='content'></div><h3>Reescritura Manual</h3>
<div class='content'><p>Puedes iniciar una reescritura manualmente usando el comando:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVkaXMtY2xpIEJHUkVXUklURUFPRg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>redis-cli BGREWRITEAOF</pre></div><div class='content'></div><h2>Ejercicio Práctico</h2>
<div class='content'></div><h3>Ejercicio 1: Habilitar y Configurar AOF</h3>
<div class='content'><ol>
<li>Edita el archivo <code>redis.conf</code> para habilitar AOF y configurar <code>appendfsync</code> a <code>everysec</code>.</li>
<li>Inicia el servidor Redis con la configuración modificada.</li>
<li>Realiza algunas operaciones de escritura en Redis.</li>
<li>Verifica el contenido del archivo <code>appendonly.aof</code>.</li>
</ol>
</div><h3>Solución</h3>
<div class='content'><ol>
<li>
<p>Edita <code>redis.conf</code>:</p>
<pre><code class="language-plaintext">appendonly yes
appendfsync everysec
</code></pre>
</li>
<li>
<p>Inicia Redis:</p>
<pre><code class="language-sh">redis-server /path/to/redis.conf
</code></pre>
</li>
<li>
<p>Realiza operaciones:</p>
<pre><code class="language-sh">redis-cli
</code></pre>
<pre><code class="language-plaintext">SET key1 &quot;value1&quot;
SET key2 &quot;value2&quot;
</code></pre>
</li>
<li>
<p>Verifica el archivo AOF:</p>
<pre><code class="language-sh">cat /path/to/appendonly.aof
</code></pre>
</li>
</ol>
</div><h2>Conclusión</h2>
<div class='content'><p>Los Archivos de Solo Adición (AOF) proporcionan una forma robusta de persistencia en Redis, permitiendo una mayor durabilidad y recuperación precisa de los datos. Aunque pueden impactar el rendimiento y requerir más espacio en disco, su configuración y uso adecuado pueden mitigar estos problemas. En el siguiente tema, exploraremos cómo configurar y gestionar la persistencia en Redis de manera más detallada.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-01-snapshots-rdb' title="Instantáneas (RDB)" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-01-snapshots-rdb' title="Instantáneas (RDB)" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='04-03-persistence-configuration' title="Configuración de Persistencia" class="py-2 px-3 btn btn-primary"
				data-read-mod="redis" data-read-unit="4-2">
				Siguiente &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='04-03-persistence-configuration' title="Configuración de Persistencia" class="py-2 px-3 btn btn-primary" 
				data-read-mod="redis" data-read-unit="4-2">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curso de Redis</h1>
<h2>Módulo 1: Introducción a Redis</h2>
<ul>
<li><a href="01-01-what-is-redis">¿Qué es Redis?</a></li>
<li><a href="01-02-installing-redis">Instalando Redis</a></li>
<li><a href="01-03-basic-redis-data-types">Tipos de Datos Básicos de Redis</a></li>
<li><a href="01-04-redis-cli-basics">Conceptos Básicos de Redis CLI</a></li>
</ul>
<h2>Módulo 2: Estructuras de Datos de Redis</h2>
<ul>
<li><a href="02-01-strings">Cadenas</a></li>
<li><a href="02-02-lists">Listas</a></li>
<li><a href="02-03-sets">Conjuntos</a></li>
<li><a href="02-04-hashes">Hashes</a></li>
<li><a href="02-05-sorted-sets">Conjuntos Ordenados</a></li>
</ul>
<h2>Módulo 3: Comandos y Operaciones de Redis</h2>
<ul>
<li><a href="03-01-basic-commands">Comandos Básicos</a></li>
<li><a href="03-02-advanced-commands">Comandos Avanzados</a></li>
<li><a href="03-03-transactions">Transacciones</a></li>
<li><a href="03-04-pipelining">Pipelining</a></li>
</ul>
<h2>Módulo 4: Persistencia en Redis</h2>
<ul>
<li><a href="04-01-snapshots-rdb">Instantáneas (RDB)</a></li>
<li><a href="04-02-append-only-files-aof">Archivos de Solo Adición (AOF)</a></li>
<li><a href="04-03-persistence-configuration">Configuración de Persistencia</a></li>
<li><a href="04-04-backup-and-restore">Respaldo y Restauración</a></li>
</ul>
<h2>Módulo 5: Seguridad en Redis</h2>
<ul>
<li><a href="05-01-authentication">Autenticación</a></li>
<li><a href="05-02-encryption">Encriptación</a></li>
<li><a href="05-03-access-control-lists-acls">Listas de Control de Acceso (ACLs)</a></li>
<li><a href="05-04-security-best-practices">Mejores Prácticas de Seguridad</a></li>
</ul>
<h2>Módulo 6: Optimización del Rendimiento de Redis</h2>
<ul>
<li><a href="06-01-memory-optimization">Optimización de Memoria</a></li>
<li><a href="06-02-latency-and-throughput">Latencia y Rendimiento</a></li>
<li><a href="06-03-performance-tuning">Ajuste de Rendimiento</a></li>
<li><a href="06-04-monitoring-and-metrics">Monitoreo y Métricas</a></li>
</ul>
<h2>Módulo 7: Clustering y Alta Disponibilidad en Redis</h2>
<ul>
<li><a href="07-01-replication">Replicación</a></li>
<li><a href="07-02-sentinel">Sentinel</a></li>
<li><a href="07-03-cluster-mode">Modo Cluster</a></li>
<li><a href="07-04-scaling-redis">Escalando Redis</a></li>
</ul>
<h2>Módulo 8: Módulos y Extensiones de Redis</h2>
<ul>
<li><a href="08-01-introduction-to-redis-modules">Introducción a los Módulos de Redis</a></li>
<li><a href="08-02-popular-redis-modules">Módulos Populares de Redis</a></li>
<li><a href="08-03-creating-custom-modules">Creando Módulos Personalizados</a></li>
<li><a href="08-04-using-redis-with-other-technologies">Usando Redis con Otras Tecnologías</a></li>
</ul>
<h2>Módulo 9: Casos de Uso Avanzados de Redis</h2>
<ul>
<li><a href="09-01-caching">Caching</a></li>
<li><a href="09-02-session-storage">Almacenamiento de Sesiones</a></li>
<li><a href="09-03-message-queues">Colas de Mensajes</a></li>
<li><a href="09-04-real-time-analytics">Analítica en Tiempo Real</a></li>
</ul>
<h2>Módulo 10: Redis en Producción</h2>
<ul>
<li><a href="10-01-deployment-strategies">Estrategias de Despliegue</a></li>
<li><a href="10-02-monitoring-and-maintenance">Monitoreo y Mantenimiento</a></li>
<li><a href="10-03-troubleshooting">Solución de Problemas</a></li>
<li><a href="10-04-case-studies">Estudios de Caso</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objetivo" rel="nofollow">El Proyecto</a> | 
<a href="/acerca-de" rel="nofollow">Sobre nosotros</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donaciones</a> | 
<a href="/licencia" rel="nofollow">Licencia</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuario no autenticado</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
