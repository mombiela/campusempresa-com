<!DOCTYPE html>
<html lang="es">
<head>
    <title> Módulos Personalizados </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/ansible/10-01-custom-modules" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/ansible/10-01-custom-modules" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/ansible/10-01-custom-modules" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "es";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "ansible";
  		var TEMA_NAME = "10-1";
  		var TYPE = "mod";
  		var PATH = "mod/ansible/10-01-custom-modules";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.ae32789132.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo_header.png" alt="Logo Campus Empresa"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/courses/ansible/10-01-custom-modules" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/cursos/ansible/10-01-custom-modules" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Todo el conocimiento a tu alcance</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objetivo" rel="nofollow">El Proyecto</a> | 
<a href="/acerca-de" rel="nofollow">Sobre nosotros</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donaciones</a> | 
<a href="/licencia" rel="nofollow">Licencia</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/mis-cursos" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Mis cursos</b></i>
</a>
<a href="/cursos-finalizados" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalizados             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="ansible">
		<a  href="#" class="text-secondary d-none" data-read-mod="ansible" data-read-unit="10-1" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar como leído
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="ansible" data-unread-unit="10-1" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar como no leído
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contenido del curso
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='09-04-testing-ansible-code' title="Pruebas de Código Ansible" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='09-04-testing-ansible-code' title="Pruebas de Código Ansible" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Módulos Personalizados</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='10-02-dynamic-inventory' title="Inventario Dinámico" class="py-2 px-3 btn btn-primary"
				data-read-mod="ansible" data-read-unit="10-1">
				Siguiente &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='10-02-dynamic-inventory' title="Inventario Dinámico" class="py-2 px-3 btn btn-primary" 
				data-read-mod="ansible" data-read-unit="10-1">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>En este módulo, aprenderás cómo crear tus propios módulos personalizados en Ansible. Los módulos personalizados te permiten extender la funcionalidad de Ansible para satisfacer necesidades específicas que no están cubiertas por los módulos integrados.</p>
</div><h2>Objetivos del Módulo</h2>
<div class='content'><ul>
<li>Comprender la estructura básica de un módulo personalizado.</li>
<li>Aprender a escribir y ejecutar un módulo personalizado.</li>
<li>Conocer las mejores prácticas para desarrollar módulos personalizados.</li>
</ul>
</div><h2><ol>
<li>Introducción a los Módulos Personalizados</li>
</ol></h2>
<div class='content'></div><h3>¿Qué es un Módulo Personalizado?</h3>
<div class='content'><p>Un módulo personalizado en Ansible es un script que puedes escribir para realizar tareas específicas que no están cubiertas por los módulos integrados. Estos módulos pueden ser escritos en cualquier lenguaje de programación, aunque Python es el más común debido a su integración nativa con Ansible.</p>
</div><h3>¿Por qué Crear Módulos Personalizados?</h3>
<div class='content'><ul>
<li><strong>Flexibilidad:</strong> Permiten realizar tareas específicas que no están cubiertas por los módulos existentes.</li>
<li><strong>Reusabilidad:</strong> Pueden ser reutilizados en múltiples playbooks y proyectos.</li>
<li><strong>Mantenibilidad:</strong> Facilitan la organización y mantenimiento del código.</li>
</ul>
</div><h2><ol start="2">
<li>Estructura de un Módulo Personalizado</li>
</ol></h2>
<div class='content'></div><h3>Componentes Básicos</h3>
<div class='content'><p>Un módulo personalizado generalmente consta de los siguientes componentes:</p>
<ul>
<li><strong>Documentación:</strong> Describe el propósito del módulo, sus parámetros y ejemplos de uso.</li>
<li><strong>Argument Spec:</strong> Define los argumentos que el módulo acepta.</li>
<li><strong>Main Function:</strong> Contiene la lógica principal del módulo.</li>
<li><strong>Exit JSON:</strong> Devuelve el resultado de la ejecución del módulo.</li>
</ul>
</div><h3>Ejemplo de Estructura</h3>
<div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyEvdXNyL2Jpbi9weXRob24KCmZyb20gYW5zaWJsZS5tb2R1bGVfdXRpbHMuYmFzaWMgaW1wb3J0IEFuc2libGVNb2R1bGUKCmRlZiBydW5fbW9kdWxlKCk6CiAgICAjIERlZmluaXIgbG9zIGFyZ3VtZW50b3MgcXVlIGVsIG3Ds2R1bG8gYWNlcHRhCiAgICBtb2R1bGVfYXJncyA9IGRpY3QoCiAgICAgICAgbmFtZT1kaWN0KHR5cGU9J3N0cicsIHJlcXVpcmVkPVRydWUpLAogICAgICAgIHN0YXRlPWRpY3QodHlwZT0nc3RyJywgcmVxdWlyZWQ9VHJ1ZSwgY2hvaWNlcz1bJ3ByZXNlbnQnLCAnYWJzZW50J10pCiAgICApCgogICAgIyBDcmVhciBlbCBvYmpldG8gQW5zaWJsZU1vZHVsZQogICAgbW9kdWxlID0gQW5zaWJsZU1vZHVsZSgKICAgICAgICBhcmd1bWVudF9zcGVjPW1vZHVsZV9hcmdzLAogICAgICAgIHN1cHBvcnRzX2NoZWNrX21vZGU9VHJ1ZQogICAgKQoKICAgICMgT2J0ZW5lciBsb3MgcGFyw6FtZXRyb3MKICAgIG5hbWUgPSBtb2R1bGUucGFyYW1zWyduYW1lJ10KICAgIHN0YXRlID0gbW9kdWxlLnBhcmFtc1snc3RhdGUnXQoKICAgICMgTMOzZ2ljYSBkZWwgbcOzZHVsbwogICAgcmVzdWx0ID0gZGljdCgKICAgICAgICBjaGFuZ2VkPUZhbHNlLAogICAgICAgIG9yaWdpbmFsX21lc3NhZ2U9JycsCiAgICAgICAgbWVzc2FnZT0nJwogICAgKQoKICAgIGlmIHN0YXRlID09ICdwcmVzZW50JzoKICAgICAgICByZXN1bHRbJ2NoYW5nZWQnXSA9IFRydWUKICAgICAgICByZXN1bHRbJ21lc3NhZ2UnXSA9IGYne25hbWV9IGlzIG5vdyBwcmVzZW50JwogICAgZWxpZiBzdGF0ZSA9PSAnYWJzZW50JzoKICAgICAgICByZXN1bHRbJ2NoYW5nZWQnXSA9IFRydWUKICAgICAgICByZXN1bHRbJ21lc3NhZ2UnXSA9IGYne25hbWV9IGlzIG5vdyBhYnNlbnQnCgogICAgIyBTYWxpZGEgZGVsIG3Ds2R1bG8KICAgIG1vZHVsZS5leGl0X2pzb24oKipyZXN1bHQpCgpkZWYgbWFpbigpOgogICAgcnVuX21vZHVsZSgpCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgbWFpbigp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#!/usr/bin/python

from ansible.module_utils.basic import AnsibleModule

def run_module():
    # Definir los argumentos que el m&oacute;dulo acepta
    module_args = dict(
        name=dict(type='str', required=True),
        state=dict(type='str', required=True, choices=['present', 'absent'])
    )

    # Crear el objeto AnsibleModule
    module = AnsibleModule(
        argument_spec=module_args,
        supports_check_mode=True
    )

    # Obtener los par&aacute;metros
    name = module.params['name']
    state = module.params['state']

    # L&oacute;gica del m&oacute;dulo
    result = dict(
        changed=False,
        original_message='',
        message=''
    )

    if state == 'present':
        result['changed'] = True
        result['message'] = f'{name} is now present'
    elif state == 'absent':
        result['changed'] = True
        result['message'] = f'{name} is now absent'

    # Salida del m&oacute;dulo
    module.exit_json(**result)

def main():
    run_module()

if __name__ == '__main__':
    main()</pre></div><div class='content'></div><h2><ol start="3">
<li>Escribiendo tu Primer Módulo Personalizado</li>
</ol></h2>
<div class='content'></div><h3>Paso a Paso</h3>
<div class='content'><ol>
<li>
<p><strong>Crear el Archivo del Módulo:</strong>
Crea un archivo Python, por ejemplo, <code>my_custom_module.py</code>.</p>
</li>
<li>
<p><strong>Importar AnsibleModule:</strong></p>
<pre><code class="language-python">from ansible.module_utils.basic import AnsibleModule
</code></pre>
</li>
<li>
<p><strong>Definir Argumentos:</strong></p>
<pre><code class="language-python">module_args = dict(
    name=dict(type='str', required=True),
    state=dict(type='str', required=True, choices=['present', 'absent'])
)
</code></pre>
</li>
<li>
<p><strong>Crear el Objeto AnsibleModule:</strong></p>
<pre><code class="language-python">module = AnsibleModule(
    argument_spec=module_args,
    supports_check_mode=True
)
</code></pre>
</li>
<li>
<p><strong>Obtener Parámetros:</strong></p>
<pre><code class="language-python">name = module.params['name']
state = module.params['state']
</code></pre>
</li>
<li>
<p><strong>Implementar la Lógica del Módulo:</strong></p>
<pre><code class="language-python">result = dict(
    changed=False,
    original_message='',
    message=''
)

if state == 'present':
    result['changed'] = True
    result['message'] = f'{name} is now present'
elif state == 'absent':
    result['changed'] = True
    result['message'] = f'{name} is now absent'
</code></pre>
</li>
<li>
<p><strong>Devolver el Resultado:</strong></p>
<pre><code class="language-python">module.exit_json(**result)
</code></pre>
</li>
<li>
<p><strong>Definir la Función Principal:</strong></p>
<pre><code class="language-python">def main():
    run_module()

if __name__ == '__main__':
    main()
</code></pre>
</li>
</ol>
</div><h3>Ejemplo Completo</h3>
<div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyEvdXNyL2Jpbi9weXRob24KCmZyb20gYW5zaWJsZS5tb2R1bGVfdXRpbHMuYmFzaWMgaW1wb3J0IEFuc2libGVNb2R1bGUKCmRlZiBydW5fbW9kdWxlKCk6CiAgICBtb2R1bGVfYXJncyA9IGRpY3QoCiAgICAgICAgbmFtZT1kaWN0KHR5cGU9J3N0cicsIHJlcXVpcmVkPVRydWUpLAogICAgICAgIHN0YXRlPWRpY3QodHlwZT0nc3RyJywgcmVxdWlyZWQ9VHJ1ZSwgY2hvaWNlcz1bJ3ByZXNlbnQnLCAnYWJzZW50J10pCiAgICApCgogICAgbW9kdWxlID0gQW5zaWJsZU1vZHVsZSgKICAgICAgICBhcmd1bWVudF9zcGVjPW1vZHVsZV9hcmdzLAogICAgICAgIHN1cHBvcnRzX2NoZWNrX21vZGU9VHJ1ZQogICAgKQoKICAgIG5hbWUgPSBtb2R1bGUucGFyYW1zWyduYW1lJ10KICAgIHN0YXRlID0gbW9kdWxlLnBhcmFtc1snc3RhdGUnXQoKICAgIHJlc3VsdCA9IGRpY3QoCiAgICAgICAgY2hhbmdlZD1GYWxzZSwKICAgICAgICBvcmlnaW5hbF9tZXNzYWdlPScnLAogICAgICAgIG1lc3NhZ2U9JycKICAgICkKCiAgICBpZiBzdGF0ZSA9PSAncHJlc2VudCc6CiAgICAgICAgcmVzdWx0WydjaGFuZ2VkJ10gPSBUcnVlCiAgICAgICAgcmVzdWx0WydtZXNzYWdlJ10gPSBmJ3tuYW1lfSBpcyBub3cgcHJlc2VudCcKICAgIGVsaWYgc3RhdGUgPT0gJ2Fic2VudCc6CiAgICAgICAgcmVzdWx0WydjaGFuZ2VkJ10gPSBUcnVlCiAgICAgICAgcmVzdWx0WydtZXNzYWdlJ10gPSBmJ3tuYW1lfSBpcyBub3cgYWJzZW50JwoKICAgIG1vZHVsZS5leGl0X2pzb24oKipyZXN1bHQpCgpkZWYgbWFpbigpOgogICAgcnVuX21vZHVsZSgpCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgbWFpbigp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#!/usr/bin/python

from ansible.module_utils.basic import AnsibleModule

def run_module():
    module_args = dict(
        name=dict(type='str', required=True),
        state=dict(type='str', required=True, choices=['present', 'absent'])
    )

    module = AnsibleModule(
        argument_spec=module_args,
        supports_check_mode=True
    )

    name = module.params['name']
    state = module.params['state']

    result = dict(
        changed=False,
        original_message='',
        message=''
    )

    if state == 'present':
        result['changed'] = True
        result['message'] = f'{name} is now present'
    elif state == 'absent':
        result['changed'] = True
        result['message'] = f'{name} is now absent'

    module.exit_json(**result)

def main():
    run_module()

if __name__ == '__main__':
    main()</pre></div><div class='content'></div><h2><ol start="4">
<li>Ejecutando el Módulo Personalizado</li>
</ol></h2>
<div class='content'></div><h3>Incluir el Módulo en un Playbook</h3>
<div class='content'><p>Para ejecutar tu módulo personalizado, inclúyelo en un playbook de la siguiente manera:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogVGVzdCBjdXN0b20gbW9kdWxlCiAgaG9zdHM6IGxvY2FsaG9zdAogIHRhc2tzOgogICAgLSBuYW1lOiBFbnN1cmUgbXlfY3VzdG9tX21vZHVsZSB3b3JrcwogICAgICBteV9jdXN0b21fbW9kdWxlOgogICAgICAgIG5hbWU6ICJleGFtcGxlIgogICAgICAgIHN0YXRlOiAicHJlc2VudCI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Test custom module
  hosts: localhost
  tasks:
    - name: Ensure my_custom_module works
      my_custom_module:
        name: &quot;example&quot;
        state: &quot;present&quot;</pre></div><div class='content'></div><h3>Ejecutar el Playbook</h3>
<div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS1wbGF5Ym9vayB0ZXN0X2N1c3RvbV9tb2R1bGUueW1s"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-playbook test_custom_module.yml</pre></div><div class='content'></div><h2><ol start="5">
<li>Mejores Prácticas</li>
</ol></h2>
<div class='content'><ul>
<li><strong>Documentación:</strong> Asegúrate de documentar bien tu módulo para que otros usuarios puedan entender su propósito y cómo usarlo.</li>
<li><strong>Pruebas:</strong> Realiza pruebas exhaustivas para asegurarte de que tu módulo funciona correctamente en diferentes escenarios.</li>
<li><strong>Manejo de Errores:</strong> Implementa un manejo de errores adecuado para que el módulo pueda manejar situaciones inesperadas de manera elegante.</li>
</ul>
</div><h2><ol start="6">
<li>Ejercicio Práctico</li>
</ol></h2>
<div class='content'></div><h3>Ejercicio</h3>
<div class='content'><p>Crea un módulo personalizado que gestione archivos en el sistema. El módulo debe aceptar los siguientes parámetros:</p>
<ul>
<li><code>path</code>: Ruta del archivo.</li>
<li><code>state</code>: Estado del archivo (<code>present</code> para crear, <code>absent</code> para eliminar).</li>
</ul>
</div><h3>Solución</h3>
<div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyEvdXNyL2Jpbi9weXRob24KCmZyb20gYW5zaWJsZS5tb2R1bGVfdXRpbHMuYmFzaWMgaW1wb3J0IEFuc2libGVNb2R1bGUKaW1wb3J0IG9zCgpkZWYgcnVuX21vZHVsZSgpOgogICAgbW9kdWxlX2FyZ3MgPSBkaWN0KAogICAgICAgIHBhdGg9ZGljdCh0eXBlPSdzdHInLCByZXF1aXJlZD1UcnVlKSwKICAgICAgICBzdGF0ZT1kaWN0KHR5cGU9J3N0cicsIHJlcXVpcmVkPVRydWUsIGNob2ljZXM9WydwcmVzZW50JywgJ2Fic2VudCddKQogICAgKQoKICAgIG1vZHVsZSA9IEFuc2libGVNb2R1bGUoCiAgICAgICAgYXJndW1lbnRfc3BlYz1tb2R1bGVfYXJncywKICAgICAgICBzdXBwb3J0c19jaGVja19tb2RlPVRydWUKICAgICkKCiAgICBwYXRoID0gbW9kdWxlLnBhcmFtc1sncGF0aCddCiAgICBzdGF0ZSA9IG1vZHVsZS5wYXJhbXNbJ3N0YXRlJ10KCiAgICByZXN1bHQgPSBkaWN0KAogICAgICAgIGNoYW5nZWQ9RmFsc2UsCiAgICAgICAgb3JpZ2luYWxfbWVzc2FnZT0nJywKICAgICAgICBtZXNzYWdlPScnCiAgICApCgogICAgaWYgc3RhdGUgPT0gJ3ByZXNlbnQnOgogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhwYXRoKToKICAgICAgICAgICAgb3BlbihwYXRoLCAndycpLmNsb3NlKCkKICAgICAgICAgICAgcmVzdWx0WydjaGFuZ2VkJ10gPSBUcnVlCiAgICAgICAgICAgIHJlc3VsdFsnbWVzc2FnZSddID0gZidGaWxlIHtwYXRofSBjcmVhdGVkJwogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlc3VsdFsnbWVzc2FnZSddID0gZidGaWxlIHtwYXRofSBhbHJlYWR5IGV4aXN0cycKICAgIGVsaWYgc3RhdGUgPT0gJ2Fic2VudCc6CiAgICAgICAgaWYgb3MucGF0aC5leGlzdHMocGF0aCk6CiAgICAgICAgICAgIG9zLnJlbW92ZShwYXRoKQogICAgICAgICAgICByZXN1bHRbJ2NoYW5nZWQnXSA9IFRydWUKICAgICAgICAgICAgcmVzdWx0WydtZXNzYWdlJ10gPSBmJ0ZpbGUge3BhdGh9IGRlbGV0ZWQnCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVzdWx0WydtZXNzYWdlJ10gPSBmJ0ZpbGUge3BhdGh9IGRvZXMgbm90IGV4aXN0JwoKICAgIG1vZHVsZS5leGl0X2pzb24oKipyZXN1bHQpCgpkZWYgbWFpbigpOgogICAgcnVuX21vZHVsZSgpCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgbWFpbigp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#!/usr/bin/python

from ansible.module_utils.basic import AnsibleModule
import os

def run_module():
    module_args = dict(
        path=dict(type='str', required=True),
        state=dict(type='str', required=True, choices=['present', 'absent'])
    )

    module = AnsibleModule(
        argument_spec=module_args,
        supports_check_mode=True
    )

    path = module.params['path']
    state = module.params['state']

    result = dict(
        changed=False,
        original_message='',
        message=''
    )

    if state == 'present':
        if not os.path.exists(path):
            open(path, 'w').close()
            result['changed'] = True
            result['message'] = f'File {path} created'
        else:
            result['message'] = f'File {path} already exists'
    elif state == 'absent':
        if os.path.exists(path):
            os.remove(path)
            result['changed'] = True
            result['message'] = f'File {path} deleted'
        else:
            result['message'] = f'File {path} does not exist'

    module.exit_json(**result)

def main():
    run_module()

if __name__ == '__main__':
    main()</pre></div><div class='content'></div><h2>Conclusión</h2>
<div class='content'><p>En este módulo, has aprendido cómo crear y ejecutar módulos personalizados en Ansible. Los módulos personalizados te permiten extender la funcionalidad de Ansible para satisfacer necesidades específicas, proporcionando flexibilidad y reusabilidad en tus playbooks. Asegúrate de seguir las mejores prácticas para documentar, probar y manejar errores en tus módulos personalizados. En el próximo módulo, exploraremos el uso de inventarios dinámicos en Ansible.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='09-04-testing-ansible-code' title="Pruebas de Código Ansible" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='09-04-testing-ansible-code' title="Pruebas de Código Ansible" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='10-02-dynamic-inventory' title="Inventario Dinámico" class="py-2 px-3 btn btn-primary"
				data-read-mod="ansible" data-read-unit="10-1">
				Siguiente &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='10-02-dynamic-inventory' title="Inventario Dinámico" class="py-2 px-3 btn btn-primary" 
				data-read-mod="ansible" data-read-unit="10-1">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Ansible: De Principiante a Avanzado</h1>
<h2>Módulo 1: Introducción a Ansible</h2>
<ul>
<li><a href="01-01-what-is-ansible">¿Qué es Ansible?</a></li>
<li><a href="01-02-installing-ansible">Instalando Ansible</a></li>
<li><a href="01-03-ansible-architecture">Arquitectura de Ansible</a></li>
<li><a href="01-04-basic-ansible-commands">Comandos Básicos de Ansible</a></li>
</ul>
<h2>Módulo 2: Conceptos Básicos de Ansible</h2>
<ul>
<li><a href="02-01-inventory-files">Archivos de Inventario</a></li>
<li><a href="02-02-ansible-configuration">Configuración de Ansible</a></li>
<li><a href="02-03-ad-hoc-commands">Comandos Ad-Hoc</a></li>
<li><a href="02-04-ansible-modules">Módulos de Ansible</a></li>
</ul>
<h2>Módulo 3: Playbooks</h2>
<ul>
<li><a href="03-01-introduction-to-playbooks">Introducción a los Playbooks</a></li>
<li><a href="03-02-writing-your-first-playbook">Escribiendo tu Primer Playbook</a></li>
<li><a href="03-03-playbook-structure">Estructura del Playbook</a></li>
<li><a href="03-04-variables-and-facts">Variables y Hechos</a></li>
<li><a href="03-05-conditionals-and-loops">Condicionales y Bucles</a></li>
</ul>
<h2>Módulo 4: Roles</h2>
<ul>
<li><a href="04-01-introduction-to-roles">Introducción a los Roles</a></li>
<li><a href="04-02-creating-roles">Creando Roles</a></li>
<li><a href="04-03-role-directory-structure">Estructura del Directorio de Roles</a></li>
<li><a href="04-04-using-roles-in-playbooks">Usando Roles en Playbooks</a></li>
</ul>
<h2>Módulo 5: Técnicas Avanzadas de Playbook</h2>
<ul>
<li><a href="05-01-handlers">Manejadores</a></li>
<li><a href="05-02-templates">Plantillas</a></li>
<li><a href="05-03-ansible-vault">Ansible Vault</a></li>
<li><a href="05-04-error-handling">Manejo de Errores</a></li>
<li><a href="05-05-optimizing-playbooks">Optimizando Playbooks</a></li>
</ul>
<h2>Módulo 6: Ansible Galaxy</h2>
<ul>
<li><a href="06-01-what-is-ansible-galaxy">¿Qué es Ansible Galaxy?</a></li>
<li><a href="06-02-using-ansible-galaxy">Usando Ansible Galaxy</a></li>
<li><a href="06-03-creating-and-sharing-roles">Creando y Compartiendo Roles</a></li>
</ul>
<h2>Módulo 7: Ansible Tower</h2>
<ul>
<li><a href="07-01-introduction-to-ansible-tower">Introducción a Ansible Tower</a></li>
<li><a href="07-02-installing-ansible-tower">Instalando Ansible Tower</a></li>
<li><a href="07-03-using-ansible-tower">Usando Ansible Tower</a></li>
<li><a href="07-04-managing-projects-and-inventories">Gestionando Proyectos e Inventarios</a></li>
</ul>
<h2>Módulo 8: Ansible para DevOps</h2>
<ul>
<li><a href="08-01-ansible-and-docker">Ansible y Docker</a></li>
<li><a href="08-02-ansible-and-kubernetes">Ansible y Kubernetes</a></li>
<li><a href="08-03-ci-cd-with-ansible">CI/CD con Ansible</a></li>
<li><a href="08-04-ansible-in-cloud-environments">Ansible en Entornos Cloud</a></li>
</ul>
<h2>Módulo 9: Mejores Prácticas de Ansible</h2>
<ul>
<li><a href="09-01-code-organization">Organización del Código</a></li>
<li><a href="09-02-security-best-practices">Mejores Prácticas de Seguridad</a></li>
<li><a href="09-03-performance-tuning">Ajuste de Rendimiento</a></li>
<li><a href="09-04-testing-ansible-code">Pruebas de Código Ansible</a></li>
</ul>
<h2>Módulo 10: Temas Avanzados de Ansible</h2>
<ul>
<li><a href="10-01-custom-modules">Módulos Personalizados</a></li>
<li><a href="10-02-dynamic-inventory">Inventario Dinámico</a></li>
<li><a href="10-03-ansible-plugins">Plugins de Ansible</a></li>
<li><a href="10-04-ansible-api">API de Ansible</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objetivo" rel="nofollow">El Proyecto</a> | 
<a href="/acerca-de" rel="nofollow">Sobre nosotros</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donaciones</a> | 
<a href="/licencia" rel="nofollow">Licencia</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuario no autenticado</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
