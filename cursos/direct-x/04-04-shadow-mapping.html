<!DOCTYPE html>
<html lang="es">
<head>
    <title> Mapeo de Sombras </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/direct-x/04-04-shadow-mapping" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/direct-x/04-04-shadow-mapping" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/direct-x/04-04-shadow-mapping" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.188a386f47.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "es";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "direct_x";
  		var TEMA_NAME = "4-4";
  		var TYPE = "mod";
  		var PATH = "mod/direct_x/04-04-shadow-mapping";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo_header.png" alt="Logo Campus Empresa"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/courses/direct-x/04-04-shadow-mapping" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/cursos/direct-x/04-04-shadow-mapping" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Todo el conocimiento a tu alcance</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objetivo" rel="nofollow">El Proyecto</a> | 
<a href="/acerca-de" rel="nofollow">Sobre nosotros</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donaciones</a> | 
<a href="/licencia" rel="nofollow">Licencia</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/mis-cursos" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Mis cursos</b></i>
</a>
<a href="/cursos-finalizados" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalizados             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="direct_x">
		<a  href="#" class="text-secondary d-none" data-read-mod="direct_x" data-read-unit="4-4" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar como leído
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="direct_x" data-unread-unit="4-4" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar como no leído
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contenido del curso
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-03-advanced-lighting-techniques' title="Técnicas Avanzadas de Iluminación" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-03-advanced-lighting-techniques' title="Técnicas Avanzadas de Iluminación" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Mapeo de Sombras</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-01-loading-3d-models' title="Cargando Modelos 3D" class="py-2 px-3 btn btn-primary"
				data-read-mod="direct_x" data-read-unit="4-4">
				Siguiente &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-01-loading-3d-models' title="Cargando Modelos 3D" class="py-2 px-3 btn btn-primary" 
				data-read-mod="direct_x" data-read-unit="4-4">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>El mapeo de sombras es una técnica avanzada de renderizado que permite crear sombras realistas en una escena 3D. Esta técnica es ampliamente utilizada en gráficos por computadora para mejorar la percepción de profundidad y realismo. En este tema, aprenderemos los conceptos básicos del mapeo de sombras, cómo implementarlo en DirectX y algunos consejos para optimizar su rendimiento.</p>
</div><h2>Conceptos Básicos del Mapeo de Sombras</h2>
<div class='content'></div><h3>¿Qué es el Mapeo de Sombras?</h3>
<div class='content'><p>El mapeo de sombras es una técnica que utiliza una textura (shadow map) para almacenar la información de profundidad desde la perspectiva de la fuente de luz. Esta información se utiliza posteriormente para determinar si un fragmento (pixel) está en sombra o no.</p>
</div><h3>Pasos Básicos del Mapeo de Sombras</h3>
<div class='content'><ol>
<li><strong>Renderizar la Escena desde la Perspectiva de la Luz</strong>: Crear una textura de profundidad (shadow map) que almacene la distancia de cada punto visible desde la fuente de luz.</li>
<li><strong>Renderizar la Escena desde la Perspectiva de la Cámara</strong>: Utilizar la shadow map para determinar si los fragmentos están en sombra o no.</li>
</ol>
</div><h2>Implementación del Mapeo de Sombras en DirectX</h2>
<div class='content'></div><h3>Paso 1: Crear la Shadow Map</h3>
<div class='content'><p>Primero, necesitamos crear una textura de profundidad que actuará como nuestra shadow map.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYXIgdW5hIHRleHR1cmEgZGUgcHJvZnVuZGlkYWQKRDNEMTFfVEVYVFVSRTJEX0RFU0Mgc2hhZG93RGVzYzsKWmVyb01lbW9yeSgmc2hhZG93RGVzYywgc2l6ZW9mKHNoYWRvd0Rlc2MpKTsKc2hhZG93RGVzYy5XaWR0aCA9IFNIQURPV19NQVBfV0lEVEg7CnNoYWRvd0Rlc2MuSGVpZ2h0ID0gU0hBRE9XX01BUF9IRUlHSFQ7CnNoYWRvd0Rlc2MuTWlwTGV2ZWxzID0gMTsKc2hhZG93RGVzYy5BcnJheVNpemUgPSAxOwpzaGFkb3dEZXNjLkZvcm1hdCA9IERYR0lfRk9STUFUX1IyNEc4X1RZUEVMRVNTOwpzaGFkb3dEZXNjLlNhbXBsZURlc2MuQ291bnQgPSAxOwpzaGFkb3dEZXNjLlVzYWdlID0gRDNEMTFfVVNBR0VfREVGQVVMVDsKc2hhZG93RGVzYy5CaW5kRmxhZ3MgPSBEM0QxMV9CSU5EX0RFUFRIX1NURU5DSUwgfCBEM0QxMV9CSU5EX1NIQURFUl9SRVNPVVJDRTsKCklEM0QxMVRleHR1cmUyRCogc2hhZG93TWFwID0gbnVsbHB0cjsKZGV2aWNlLT5DcmVhdGVUZXh0dXJlMkQoJnNoYWRvd0Rlc2MsIG51bGxwdHIsICZzaGFkb3dNYXApOwoKLy8gQ3JlYXIgdW5hIHZpc3RhIGRlIHByb2Z1bmRpZGFkCkQzRDExX0RFUFRIX1NURU5DSUxfVklFV19ERVNDIGRzdkRlc2M7Clplcm9NZW1vcnkoJmRzdkRlc2MsIHNpemVvZihkc3ZEZXNjKSk7CmRzdkRlc2MuRm9ybWF0ID0gRFhHSV9GT1JNQVRfRDI0X1VOT1JNX1M4X1VJTlQ7CmRzdkRlc2MuVmlld0RpbWVuc2lvbiA9IEQzRDExX0RTVl9ESU1FTlNJT05fVEVYVFVSRTJEOwpkc3ZEZXNjLlRleHR1cmUyRC5NaXBTbGljZSA9IDA7CgpJRDNEMTFEZXB0aFN0ZW5jaWxWaWV3KiBzaGFkb3dEU1YgPSBudWxscHRyOwpkZXZpY2UtPkNyZWF0ZURlcHRoU3RlbmNpbFZpZXcoc2hhZG93TWFwLCAmZHN2RGVzYywgJnNoYWRvd0RTVik7CgovLyBDcmVhciB1bmEgdmlzdGEgZGUgcmVjdXJzbyBkZSBzaGFkZXIKRDNEMTFfU0hBREVSX1JFU09VUkNFX1ZJRVdfREVTQyBzcnZEZXNjOwpaZXJvTWVtb3J5KCZzcnZEZXNjLCBzaXplb2Yoc3J2RGVzYykpOwpzcnZEZXNjLkZvcm1hdCA9IERYR0lfRk9STUFUX1IyNF9VTk9STV9YOF9UWVBFTEVTUzsKc3J2RGVzYy5WaWV3RGltZW5zaW9uID0gRDNEMTFfU1JWX0RJTUVOU0lPTl9URVhUVVJFMkQ7CnNydkRlc2MuVGV4dHVyZTJELk1vc3REZXRhaWxlZE1pcCA9IDA7CnNydkRlc2MuVGV4dHVyZTJELk1pcExldmVscyA9IDE7CgpJRDNEMTFTaGFkZXJSZXNvdXJjZVZpZXcqIHNoYWRvd1NSViA9IG51bGxwdHI7CmRldmljZS0+Q3JlYXRlU2hhZGVyUmVzb3VyY2VWaWV3KHNoYWRvd01hcCwgJnNydkRlc2MsICZzaGFkb3dTUlYpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Crear una textura de profundidad
D3D11_TEXTURE2D_DESC shadowDesc;
ZeroMemory(&amp;shadowDesc, sizeof(shadowDesc));
shadowDesc.Width = SHADOW_MAP_WIDTH;
shadowDesc.Height = SHADOW_MAP_HEIGHT;
shadowDesc.MipLevels = 1;
shadowDesc.ArraySize = 1;
shadowDesc.Format = DXGI_FORMAT_R24G8_TYPELESS;
shadowDesc.SampleDesc.Count = 1;
shadowDesc.Usage = D3D11_USAGE_DEFAULT;
shadowDesc.BindFlags = D3D11_BIND_DEPTH_STENCIL | D3D11_BIND_SHADER_RESOURCE;

ID3D11Texture2D* shadowMap = nullptr;
device-&gt;CreateTexture2D(&amp;shadowDesc, nullptr, &amp;shadowMap);

// Crear una vista de profundidad
D3D11_DEPTH_STENCIL_VIEW_DESC dsvDesc;
ZeroMemory(&amp;dsvDesc, sizeof(dsvDesc));
dsvDesc.Format = DXGI_FORMAT_D24_UNORM_S8_UINT;
dsvDesc.ViewDimension = D3D11_DSV_DIMENSION_TEXTURE2D;
dsvDesc.Texture2D.MipSlice = 0;

ID3D11DepthStencilView* shadowDSV = nullptr;
device-&gt;CreateDepthStencilView(shadowMap, &amp;dsvDesc, &amp;shadowDSV);

// Crear una vista de recurso de shader
D3D11_SHADER_RESOURCE_VIEW_DESC srvDesc;
ZeroMemory(&amp;srvDesc, sizeof(srvDesc));
srvDesc.Format = DXGI_FORMAT_R24_UNORM_X8_TYPELESS;
srvDesc.ViewDimension = D3D11_SRV_DIMENSION_TEXTURE2D;
srvDesc.Texture2D.MostDetailedMip = 0;
srvDesc.Texture2D.MipLevels = 1;

ID3D11ShaderResourceView* shadowSRV = nullptr;
device-&gt;CreateShaderResourceView(shadowMap, &amp;srvDesc, &amp;shadowSRV);</pre></div><div class='content'></div><h3>Paso 2: Renderizar la Escena desde la Perspectiva de la Luz</h3>
<div class='content'><p>Configurar la cámara de la luz y renderizar la escena para generar la shadow map.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29uZmlndXJhciBsYSB2aXN0YSB5IGxhIHByb3llY2Npw7NuIGRlIGxhIGx1egpYTU1BVFJJWCBsaWdodFZpZXcgPSBYTU1hdHJpeExvb2tBdExIKGxpZ2h0UG9zaXRpb24sIGxpZ2h0VGFyZ2V0LCB1cFZlY3Rvcik7ClhNTUFUUklYIGxpZ2h0UHJvamVjdGlvbiA9IFhNTWF0cml4T3J0aG9ncmFwaGljTEgoc2hhZG93TWFwV2lkdGgsIHNoYWRvd01hcEhlaWdodCwgbmVhclBsYW5lLCBmYXJQbGFuZSk7CgovLyBDb25maWd1cmFyIGVsIHBpcGVsaW5lIHBhcmEgcmVuZGVyaXphciBsYSBzaGFkb3cgbWFwCmNvbnRleHQtPk9NU2V0UmVuZGVyVGFyZ2V0cygwLCBudWxscHRyLCBzaGFkb3dEU1YpOwpjb250ZXh0LT5DbGVhckRlcHRoU3RlbmNpbFZpZXcoc2hhZG93RFNWLCBEM0QxMV9DTEVBUl9ERVBUSCwgMS4wZiwgMCk7CgovLyBSZW5kZXJpemFyIGxhIGVzY2VuYSBkZXNkZSBsYSBwZXJzcGVjdGl2YSBkZSBsYSBsdXoKZm9yIChhdXRvJiBvYmplY3QgOiBzY2VuZU9iamVjdHMpIHsKICAgIG9iamVjdC5SZW5kZXIoY29udGV4dCwgbGlnaHRWaWV3LCBsaWdodFByb2plY3Rpb24pOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Configurar la vista y la proyecci&oacute;n de la luz
XMMATRIX lightView = XMMatrixLookAtLH(lightPosition, lightTarget, upVector);
XMMATRIX lightProjection = XMMatrixOrthographicLH(shadowMapWidth, shadowMapHeight, nearPlane, farPlane);

// Configurar el pipeline para renderizar la shadow map
context-&gt;OMSetRenderTargets(0, nullptr, shadowDSV);
context-&gt;ClearDepthStencilView(shadowDSV, D3D11_CLEAR_DEPTH, 1.0f, 0);

// Renderizar la escena desde la perspectiva de la luz
for (auto&amp; object : sceneObjects) {
    object.Render(context, lightView, lightProjection);
}</pre></div><div class='content'></div><h3>Paso 3: Renderizar la Escena desde la Perspectiva de la Cámara</h3>
<div class='content'><p>Utilizar la shadow map para determinar si los fragmentos están en sombra.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29uZmlndXJhciBsYSB2aXN0YSB5IGxhIHByb3llY2Npw7NuIGRlIGxhIGPDoW1hcmEKWE1NQVRSSVggdmlldyA9IFhNTWF0cml4TG9va0F0TEgoY2FtZXJhUG9zaXRpb24sIGNhbWVyYVRhcmdldCwgdXBWZWN0b3IpOwpYTU1BVFJJWCBwcm9qZWN0aW9uID0gWE1NYXRyaXhQZXJzcGVjdGl2ZUZvdkxIKGZvdiwgYXNwZWN0UmF0aW8sIG5lYXJQbGFuZSwgZmFyUGxhbmUpOwoKLy8gQ29uZmlndXJhciBlbCBwaXBlbGluZSBwYXJhIHJlbmRlcml6YXIgbGEgZXNjZW5hCmNvbnRleHQtPk9NU2V0UmVuZGVyVGFyZ2V0cygxLCAmcmVuZGVyVGFyZ2V0VmlldywgZGVwdGhTdGVuY2lsVmlldyk7CmNvbnRleHQtPkNsZWFyUmVuZGVyVGFyZ2V0VmlldyhyZW5kZXJUYXJnZXRWaWV3LCBDb2xvcnM6OkJsYWNrKTsKY29udGV4dC0+Q2xlYXJEZXB0aFN0ZW5jaWxWaWV3KGRlcHRoU3RlbmNpbFZpZXcsIEQzRDExX0NMRUFSX0RFUFRILCAxLjBmLCAwKTsKCi8vIENvbmZpZ3VyYXIgZWwgc2hhZGVyIHBhcmEgdXNhciBsYSBzaGFkb3cgbWFwCmNvbnRleHQtPlBTU2V0U2hhZGVyUmVzb3VyY2VzKDEsIDEsICZzaGFkb3dTUlYpOwoKLy8gUmVuZGVyaXphciBsYSBlc2NlbmEgZGVzZGUgbGEgcGVyc3BlY3RpdmEgZGUgbGEgY8OhbWFyYQpmb3IgKGF1dG8mIG9iamVjdCA6IHNjZW5lT2JqZWN0cykgewogICAgb2JqZWN0LlJlbmRlcihjb250ZXh0LCB2aWV3LCBwcm9qZWN0aW9uLCBsaWdodFZpZXcsIGxpZ2h0UHJvamVjdGlvbiwgc2hhZG93U1JWKTsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Configurar la vista y la proyecci&oacute;n de la c&aacute;mara
XMMATRIX view = XMMatrixLookAtLH(cameraPosition, cameraTarget, upVector);
XMMATRIX projection = XMMatrixPerspectiveFovLH(fov, aspectRatio, nearPlane, farPlane);

// Configurar el pipeline para renderizar la escena
context-&gt;OMSetRenderTargets(1, &amp;renderTargetView, depthStencilView);
context-&gt;ClearRenderTargetView(renderTargetView, Colors::Black);
context-&gt;ClearDepthStencilView(depthStencilView, D3D11_CLEAR_DEPTH, 1.0f, 0);

// Configurar el shader para usar la shadow map
context-&gt;PSSetShaderResources(1, 1, &amp;shadowSRV);

// Renderizar la escena desde la perspectiva de la c&aacute;mara
for (auto&amp; object : sceneObjects) {
    object.Render(context, view, projection, lightView, lightProjection, shadowSRV);
}</pre></div><div class='content'></div><h3>Shader para Mapeo de Sombras</h3>
<div class='content'><p>El shader de píxeles debe comparar la profundidad del fragmento actual con la profundidad almacenada en la shadow map.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gVmVydGV4IFNoYWRlcgpjYnVmZmVyIExpZ2h0QnVmZmVyIHsKICAgIG1hdHJpeCBsaWdodFZpZXc7CiAgICBtYXRyaXggbGlnaHRQcm9qZWN0aW9uOwp9OwoKc3RydWN0IFZTX09VVFBVVCB7CiAgICBmbG9hdDQgUG9zIDogU1ZfUE9TSVRJT047CiAgICBmbG9hdDQgU2hhZG93UG9zIDogVEVYQ09PUkQwOwp9OwoKVlNfT1VUUFVUIFZTKGZsb2F0NCBwb3MgOiBQT1NJVElPTikgewogICAgVlNfT1VUUFVUIG91dHB1dDsKICAgIG91dHB1dC5Qb3MgPSBtdWwocG9zLCB3b3JsZFZpZXdQcm9qZWN0aW9uKTsKICAgIG91dHB1dC5TaGFkb3dQb3MgPSBtdWwocG9zLCBsaWdodFZpZXdQcm9qZWN0aW9uKTsKICAgIHJldHVybiBvdXRwdXQ7Cn0KCi8vIFBpeGVsIFNoYWRlcgpUZXh0dXJlMkQgc2hhZG93TWFwIDogcmVnaXN0ZXIodDEpOwpTYW1wbGVyU3RhdGUgc2hhZG93U2FtcGxlciA6IHJlZ2lzdGVyKHMxKTsKCmZsb2F0NCBQUyhWU19PVVRQVVQgaW5wdXQpIDogU1ZfVEFSR0VUIHsKICAgIGZsb2F0IHNoYWRvd0RlcHRoID0gc2hhZG93TWFwLlNhbXBsZShzaGFkb3dTYW1wbGVyLCBpbnB1dC5TaGFkb3dQb3MueHkpLnI7CiAgICBmbG9hdCBjdXJyZW50RGVwdGggPSBpbnB1dC5TaGFkb3dQb3MueiAvIGlucHV0LlNoYWRvd1Bvcy53OwogICAgZmxvYXQgc2hhZG93RmFjdG9yID0gY3VycmVudERlcHRoID4gc2hhZG93RGVwdGggKyAwLjAwNWYgPyAwLjVmIDogMS4wZjsKICAgIHJldHVybiBmbG9hdDQoc2hhZG93RmFjdG9yLCBzaGFkb3dGYWN0b3IsIHNoYWRvd0ZhY3RvciwgMS4wZik7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Vertex Shader
cbuffer LightBuffer {
    matrix lightView;
    matrix lightProjection;
};

struct VS_OUTPUT {
    float4 Pos : SV_POSITION;
    float4 ShadowPos : TEXCOORD0;
};

VS_OUTPUT VS(float4 pos : POSITION) {
    VS_OUTPUT output;
    output.Pos = mul(pos, worldViewProjection);
    output.ShadowPos = mul(pos, lightViewProjection);
    return output;
}

// Pixel Shader
Texture2D shadowMap : register(t1);
SamplerState shadowSampler : register(s1);

float4 PS(VS_OUTPUT input) : SV_TARGET {
    float shadowDepth = shadowMap.Sample(shadowSampler, input.ShadowPos.xy).r;
    float currentDepth = input.ShadowPos.z / input.ShadowPos.w;
    float shadowFactor = currentDepth &gt; shadowDepth + 0.005f ? 0.5f : 1.0f;
    return float4(shadowFactor, shadowFactor, shadowFactor, 1.0f);
}</pre></div><div class='content'></div><h2>Optimización del Mapeo de Sombras</h2>
<div class='content'></div><h3>Errores Comunes y Soluciones</h3>
<div class='content'><ol>
<li><strong>Acné de Sombras</strong>: Ocurre cuando las sombras aparecen en superficies que no deberían estar en sombra. Se puede mitigar ajustando el sesgo de profundidad.</li>
<li><strong>Aliasing</strong>: Las sombras pueden aparecer pixeladas. Se puede reducir aumentando la resolución de la shadow map o utilizando técnicas de suavizado como PCF (Percentage Closer Filtering).</li>
</ol>
</div><h3>Consejos Adicionales</h3>
<div class='content'><ul>
<li><strong>Uso de Cascaded Shadow Maps (CSM)</strong>: Divide la escena en varias partes y utiliza diferentes shadow maps para cada parte, mejorando la calidad de las sombras en escenas grandes.</li>
<li><strong>Optimización de la Resolución</strong>: Ajusta dinámicamente la resolución de la shadow map según la distancia de la cámara para mejorar el rendimiento.</li>
</ul>
</div><h2>Conclusión</h2>
<div class='content'><p>El mapeo de sombras es una técnica poderosa para agregar realismo a las escenas 3D. Aunque puede ser complejo de implementar y optimizar, los resultados valen la pena. Con la práctica y la experimentación, podrás crear sombras realistas y mejorar significativamente la calidad visual de tus aplicaciones DirectX.</p>
<p>En el próximo módulo, exploraremos cómo cargar y animar modelos 3D, lo que nos permitirá crear escenas aún más dinámicas y realistas. ¡Sigue adelante y sigue practicando!</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-03-advanced-lighting-techniques' title="Técnicas Avanzadas de Iluminación" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-03-advanced-lighting-techniques' title="Técnicas Avanzadas de Iluminación" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-01-loading-3d-models' title="Cargando Modelos 3D" class="py-2 px-3 btn btn-primary"
				data-read-mod="direct_x" data-read-unit="4-4">
				Siguiente &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-01-loading-3d-models' title="Cargando Modelos 3D" class="py-2 px-3 btn btn-primary" 
				data-read-mod="direct_x" data-read-unit="4-4">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curso de Programación DirectX</h1>
<h2>Módulo 1: Introducción a DirectX</h2>
<ul>
<li><a href="01-01-what-is-directx">¿Qué es DirectX?</a></li>
<li><a href="01-02-setting-up-environment">Configuración del Entorno de Desarrollo</a></li>
<li><a href="01-03-understanding-directx-api">Entendiendo la API de DirectX</a></li>
<li><a href="01-04-creating-first-application">Creando Tu Primera Aplicación DirectX</a></li>
</ul>
<h2>Módulo 2: Conceptos Básicos de Direct3D</h2>
<ul>
<li><a href="02-01-introduction-to-direct3d">Introducción a Direct3D</a></li>
<li><a href="02-02-initializing-direct3d">Inicializando Direct3D</a></li>
<li><a href="02-03-rendering-a-triangle">Renderizando un Triángulo</a></li>
<li><a href="02-04-handling-render-loop">Manejando el Bucle de Renderizado</a></li>
</ul>
<h2>Módulo 3: Trabajando con Shaders</h2>
<ul>
<li><a href="03-01-introduction-to-shaders">Introducción a los Shaders</a></li>
<li><a href="03-02-writing-vertex-shaders">Escribiendo Vertex Shaders</a></li>
<li><a href="03-03-writing-pixel-shaders">Escribiendo Pixel Shaders</a></li>
<li><a href="03-04-compiling-using-shaders">Compilando y Usando Shaders</a></li>
</ul>
<h2>Módulo 4: Técnicas Avanzadas de Renderizado</h2>
<ul>
<li><a href="04-01-texture-mapping">Mapeo de Texturas</a></li>
<li><a href="04-02-lighting-and-materials">Iluminación y Materiales</a></li>
<li><a href="04-03-advanced-lighting-techniques">Técnicas Avanzadas de Iluminación</a></li>
<li><a href="04-04-shadow-mapping">Mapeo de Sombras</a></li>
</ul>
<h2>Módulo 5: Modelos 3D y Animación</h2>
<ul>
<li><a href="05-01-loading-3d-models">Cargando Modelos 3D</a></li>
<li><a href="05-02-animating-3d-models">Animando Modelos 3D</a></li>
<li><a href="05-03-skeletal-animation">Animación Esquelética</a></li>
<li><a href="05-04-morph-target-animation">Animación de Objetivos de Morfología</a></li>
</ul>
<h2>Módulo 6: Optimización del Rendimiento</h2>
<ul>
<li><a href="06-01-profiling-debugging">Perfilado y Depuración</a></li>
<li><a href="06-02-optimizing-rendering-performance">Optimizando el Rendimiento de Renderizado</a></li>
<li><a href="06-03-memory-management">Gestión de Memoria</a></li>
<li><a href="06-04-multithreading-directx">Multithreading en DirectX</a></li>
</ul>
<h2>Módulo 7: Temas Avanzados</h2>
<ul>
<li><a href="07-01-deferred-shading">Sombreado Diferido</a></li>
<li><a href="07-02-post-processing-effects">Efectos de Post-Procesamiento</a></li>
<li><a href="07-03-tessellation">Teselación</a></li>
<li><a href="07-04-ray-tracing">Trazado de Rayos</a></li>
</ul>
<h2>Módulo 8: DirectX en la Práctica</h2>
<ul>
<li><a href="08-01-building-game-engine">Construyendo un Motor de Juego</a></li>
<li><a href="08-02-integrating-physics">Integrando Física</a></li>
<li><a href="08-03-networking-directx">Redes en DirectX</a></li>
<li><a href="08-04-publishing-application">Publicando Tu Aplicación DirectX</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objetivo" rel="nofollow">El Proyecto</a> | 
<a href="/acerca-de" rel="nofollow">Sobre nosotros</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donaciones</a> | 
<a href="/licencia" rel="nofollow">Licencia</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuario no autenticado</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
