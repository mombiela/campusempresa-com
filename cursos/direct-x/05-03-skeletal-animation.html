<!DOCTYPE html>
<html lang="es">
<head>
    <title> Animación Esquelética </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/direct-x/05-03-skeletal-animation" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/direct-x/05-03-skeletal-animation" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/direct-x/05-03-skeletal-animation" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "es";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "direct_x";
  		var TEMA_NAME = "5-3";
  		var TYPE = "mod";
  		var PATH = "mod/direct_x/05-03-skeletal-animation";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.8d8afe898f.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo_header.png" alt="Logo Campus Empresa"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/courses/direct-x/05-03-skeletal-animation" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/cursos/direct-x/05-03-skeletal-animation" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Todo el conocimiento a tu alcance</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objetivo" rel="nofollow">El Proyecto</a> | 
<a href="/acerca-de" rel="nofollow">Sobre nosotros</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donaciones</a> | 
<a href="/licencia" rel="nofollow">Licencia</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/mis-cursos" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>Mis cursos</b></i>
</a>
<a href="/cursos-finalizados" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Finalizados             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="direct_x">
		<a  href="#" class="text-secondary d-none" data-read-mod="direct_x" data-read-unit="5-3" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Marcar como leído
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="direct_x" data-unread-unit="5-3" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Marcar como no leído
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Contenido del curso
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-02-animating-3d-models' title="Animando Modelos 3D" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-02-animating-3d-models' title="Animando Modelos 3D" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Animación Esquelética</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-04-morph-target-animation' title="Animación de Objetivos de Morfología" class="py-2 px-3 btn btn-primary"
				data-read-mod="direct_x" data-read-unit="5-3">
				Siguiente &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-04-morph-target-animation' title="Animación de Objetivos de Morfología" class="py-2 px-3 btn btn-primary" 
				data-read-mod="direct_x" data-read-unit="5-3">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>La animación esquelética es una técnica de animación utilizada para animar personajes y objetos complejos en 3D. En lugar de animar cada vértice de un modelo 3D individualmente, la animación esquelética utiliza un conjunto de huesos (esqueleto) para controlar la deformación del modelo. Esta técnica es eficiente y permite crear animaciones realistas y complejas con menos esfuerzo.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ol>
<li><strong>Esqueleto (Skeleton)</strong>: Una estructura jerárquica de huesos que define la posición y orientación de cada parte del modelo.</li>
<li><strong>Huesos (Bones)</strong>: Elementos individuales del esqueleto que pueden moverse y rotar para deformar el modelo.</li>
<li><strong>Piel (Skin)</strong>: El modelo 3D que se deforma según el movimiento de los huesos.</li>
<li><strong>Pesos de Influencia (Weights)</strong>: Valores que determinan cuánto afecta cada hueso a los vértices del modelo.</li>
<li><strong>Matrices de Transformación (Transformation Matrices)</strong>: Matrices que definen la posición, rotación y escala de los huesos.</li>
</ol>
</div><h2>Pasos para Implementar Animación Esquelética</h2>
<div class='content'></div><h3><ol>
<li>Definir el Esqueleto</li>
</ol></h3>
<div class='content'><p>El primer paso es definir el esqueleto del modelo. Esto incluye crear una jerarquía de huesos y establecer sus posiciones iniciales.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IEJvbmUgewogICAgc3RkOjpzdHJpbmcgbmFtZTsKICAgIGludCBwYXJlbnRJbmRleDsKICAgIERpcmVjdFg6OlhNTUFUUklYIG9mZnNldE1hdHJpeDsKICAgIERpcmVjdFg6OlhNTUFUUklYIGZpbmFsVHJhbnNmb3JtYXRpb247Cn07CgpzdGQ6OnZlY3RvcjxCb25lPiBza2VsZXRvbjs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct Bone {
    std::string name;
    int parentIndex;
    DirectX::XMMATRIX offsetMatrix;
    DirectX::XMMATRIX finalTransformation;
};

std::vector&lt;Bone&gt; skeleton;</pre></div><div class='content'></div><h3><ol start="2">
<li>Asociar el Esqueleto con el Modelo</li>
</ol></h3>
<div class='content'><p>Cada vértice del modelo debe estar asociado con uno o más huesos. Esto se hace mediante pesos de influencia.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IFZlcnRleCB7CiAgICBEaXJlY3RYOjpYTUZMT0FUMyBwb3NpdGlvbjsKICAgIERpcmVjdFg6OlhNRkxPQVQzIG5vcm1hbDsKICAgIERpcmVjdFg6OlhNRkxPQVQyIHRleENvb3JkOwogICAgaW50IGJvbmVJbmRpY2VzWzRdOwogICAgZmxvYXQgd2VpZ2h0c1s0XTsKfTsKCnN0ZDo6dmVjdG9yPFZlcnRleD4gdmVydGljZXM7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct Vertex {
    DirectX::XMFLOAT3 position;
    DirectX::XMFLOAT3 normal;
    DirectX::XMFLOAT2 texCoord;
    int boneIndices[4];
    float weights[4];
};

std::vector&lt;Vertex&gt; vertices;</pre></div><div class='content'></div><h3><ol start="3">
<li>Calcular las Transformaciones de los Huesos</li>
</ol></h3>
<div class='content'><p>Para cada cuadro de animación, se deben calcular las transformaciones de los huesos. Esto incluye aplicar las matrices de transformación y combinar las transformaciones de los huesos padres.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBVcGRhdGVCb25lVHJhbnNmb3JtYXRpb25zKHN0ZDo6dmVjdG9yPEJvbmU+JiBza2VsZXRvbiwgY29uc3Qgc3RkOjp2ZWN0b3I8RGlyZWN0WDo6WE1NQVRSSVg+JiBhbmltYXRpb25zKSB7CiAgICBmb3IgKHNpemVfdCBpID0gMDsgaSA8IHNrZWxldG9uLnNpemUoKTsgKytpKSB7CiAgICAgICAgaWYgKHNrZWxldG9uW2ldLnBhcmVudEluZGV4ID49IDApIHsKICAgICAgICAgICAgc2tlbGV0b25baV0uZmluYWxUcmFuc2Zvcm1hdGlvbiA9IGFuaW1hdGlvbnNbaV0gKiBza2VsZXRvbltza2VsZXRvbltpXS5wYXJlbnRJbmRleF0uZmluYWxUcmFuc2Zvcm1hdGlvbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBza2VsZXRvbltpXS5maW5hbFRyYW5zZm9ybWF0aW9uID0gYW5pbWF0aW9uc1tpXTsKICAgICAgICB9CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void UpdateBoneTransformations(std::vector&lt;Bone&gt;&amp; skeleton, const std::vector&lt;DirectX::XMMATRIX&gt;&amp; animations) {
    for (size_t i = 0; i &lt; skeleton.size(); ++i) {
        if (skeleton[i].parentIndex &gt;= 0) {
            skeleton[i].finalTransformation = animations[i] * skeleton[skeleton[i].parentIndex].finalTransformation;
        } else {
            skeleton[i].finalTransformation = animations[i];
        }
    }
}</pre></div><div class='content'></div><h3><ol start="4">
<li>Deformar el Modelo</li>
</ol></h3>
<div class='content'><p>Usando las transformaciones de los huesos, se deforma el modelo para cada cuadro de animación.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBBcHBseVNraW5uaW5nKHN0ZDo6dmVjdG9yPFZlcnRleD4mIHZlcnRpY2VzLCBjb25zdCBzdGQ6OnZlY3RvcjxCb25lPiYgc2tlbGV0b24pIHsKICAgIGZvciAoYXV0byYgdmVydGV4IDogdmVydGljZXMpIHsKICAgICAgICBEaXJlY3RYOjpYTVZFQ1RPUiBza2lubmVkUG9zaXRpb24gPSBEaXJlY3RYOjpYTVZlY3Rvclplcm8oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDQ7ICsraSkgewogICAgICAgICAgICBpZiAodmVydGV4LndlaWdodHNbaV0gPiAwKSB7CiAgICAgICAgICAgICAgICBEaXJlY3RYOjpYTU1BVFJJWCBib25lVHJhbnNmb3JtID0gc2tlbGV0b25bdmVydGV4LmJvbmVJbmRpY2VzW2ldXS5maW5hbFRyYW5zZm9ybWF0aW9uOwogICAgICAgICAgICAgICAgc2tpbm5lZFBvc2l0aW9uICs9IHZlcnRleC53ZWlnaHRzW2ldICogRGlyZWN0WDo6WE1WZWN0b3IzVHJhbnNmb3JtKFhNTG9hZEZsb2F0MygmdmVydGV4LnBvc2l0aW9uKSwgYm9uZVRyYW5zZm9ybSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgRGlyZWN0WDo6WE1TdG9yZUZsb2F0MygmdmVydGV4LnBvc2l0aW9uLCBza2lubmVkUG9zaXRpb24pOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void ApplySkinning(std::vector&lt;Vertex&gt;&amp; vertices, const std::vector&lt;Bone&gt;&amp; skeleton) {
    for (auto&amp; vertex : vertices) {
        DirectX::XMVECTOR skinnedPosition = DirectX::XMVectorZero();
        for (int i = 0; i &lt; 4; ++i) {
            if (vertex.weights[i] &gt; 0) {
                DirectX::XMMATRIX boneTransform = skeleton[vertex.boneIndices[i]].finalTransformation;
                skinnedPosition += vertex.weights[i] * DirectX::XMVector3Transform(XMLoadFloat3(&amp;vertex.position), boneTransform);
            }
        }
        DirectX::XMStoreFloat3(&amp;vertex.position, skinnedPosition);
    }
}</pre></div><div class='content'></div><h2>Ejercicio Práctico</h2>
<div class='content'></div><h3>Ejercicio 1: Implementar una Animación Esquelética Simple</h3>
<div class='content'><ol>
<li><strong>Definir el Esqueleto</strong>: Crea un esqueleto simple con al menos 3 huesos.</li>
<li><strong>Asociar el Esqueleto con un Modelo</strong>: Crea un modelo simple (por ejemplo, un cubo) y asocia los vértices con los huesos.</li>
<li><strong>Calcular las Transformaciones de los Huesos</strong>: Implementa una función para calcular las transformaciones de los huesos.</li>
<li><strong>Deformar el Modelo</strong>: Implementa la deformación del modelo usando las transformaciones de los huesos.</li>
</ol>
</div><h3>Solución</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHZlY3Rvcj4KI2luY2x1ZGUgPERpcmVjdFhNYXRoLmg+CiNpbmNsdWRlIDxzdHJpbmc+CgpzdHJ1Y3QgQm9uZSB7CiAgICBzdGQ6OnN0cmluZyBuYW1lOwogICAgaW50IHBhcmVudEluZGV4OwogICAgRGlyZWN0WDo6WE1NQVRSSVggb2Zmc2V0TWF0cml4OwogICAgRGlyZWN0WDo6WE1NQVRSSVggZmluYWxUcmFuc2Zvcm1hdGlvbjsKfTsKCnN0cnVjdCBWZXJ0ZXggewogICAgRGlyZWN0WDo6WE1GTE9BVDMgcG9zaXRpb247CiAgICBEaXJlY3RYOjpYTUZMT0FUMyBub3JtYWw7CiAgICBEaXJlY3RYOjpYTUZMT0FUMiB0ZXhDb29yZDsKICAgIGludCBib25lSW5kaWNlc1s0XTsKICAgIGZsb2F0IHdlaWdodHNbNF07Cn07Cgp2b2lkIFVwZGF0ZUJvbmVUcmFuc2Zvcm1hdGlvbnMoc3RkOjp2ZWN0b3I8Qm9uZT4mIHNrZWxldG9uLCBjb25zdCBzdGQ6OnZlY3RvcjxEaXJlY3RYOjpYTU1BVFJJWD4mIGFuaW1hdGlvbnMpIHsKICAgIGZvciAoc2l6ZV90IGkgPSAwOyBpIDwgc2tlbGV0b24uc2l6ZSgpOyArK2kpIHsKICAgICAgICBpZiAoc2tlbGV0b25baV0ucGFyZW50SW5kZXggPj0gMCkgewogICAgICAgICAgICBza2VsZXRvbltpXS5maW5hbFRyYW5zZm9ybWF0aW9uID0gYW5pbWF0aW9uc1tpXSAqIHNrZWxldG9uW3NrZWxldG9uW2ldLnBhcmVudEluZGV4XS5maW5hbFRyYW5zZm9ybWF0aW9uOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNrZWxldG9uW2ldLmZpbmFsVHJhbnNmb3JtYXRpb24gPSBhbmltYXRpb25zW2ldOwogICAgICAgIH0KICAgIH0KfQoKdm9pZCBBcHBseVNraW5uaW5nKHN0ZDo6dmVjdG9yPFZlcnRleD4mIHZlcnRpY2VzLCBjb25zdCBzdGQ6OnZlY3RvcjxCb25lPiYgc2tlbGV0b24pIHsKICAgIGZvciAoYXV0byYgdmVydGV4IDogdmVydGljZXMpIHsKICAgICAgICBEaXJlY3RYOjpYTVZFQ1RPUiBza2lubmVkUG9zaXRpb24gPSBEaXJlY3RYOjpYTVZlY3Rvclplcm8oKTsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDQ7ICsraSkgewogICAgICAgICAgICBpZiAodmVydGV4LndlaWdodHNbaV0gPiAwKSB7CiAgICAgICAgICAgICAgICBEaXJlY3RYOjpYTU1BVFJJWCBib25lVHJhbnNmb3JtID0gc2tlbGV0b25bdmVydGV4LmJvbmVJbmRpY2VzW2ldXS5maW5hbFRyYW5zZm9ybWF0aW9uOwogICAgICAgICAgICAgICAgc2tpbm5lZFBvc2l0aW9uICs9IHZlcnRleC53ZWlnaHRzW2ldICogRGlyZWN0WDo6WE1WZWN0b3IzVHJhbnNmb3JtKFhNTG9hZEZsb2F0MygmdmVydGV4LnBvc2l0aW9uKSwgYm9uZVRyYW5zZm9ybSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgRGlyZWN0WDo6WE1TdG9yZUZsb2F0MygmdmVydGV4LnBvc2l0aW9uLCBza2lubmVkUG9zaXRpb24pOwogICAgfQp9CgppbnQgbWFpbigpIHsKICAgIC8vIERlZmluaXIgZWwgZXNxdWVsZXRvCiAgICBzdGQ6OnZlY3RvcjxCb25lPiBza2VsZXRvbiA9IHsKICAgICAgICB7IlJvb3QiLCAtMSwgRGlyZWN0WDo6WE1NYXRyaXhJZGVudGl0eSgpLCBEaXJlY3RYOjpYTU1hdHJpeElkZW50aXR5KCl9LAogICAgICAgIHsiQm9uZTEiLCAwLCBEaXJlY3RYOjpYTU1hdHJpeFRyYW5zbGF0aW9uKDAuMGYsIDEuMGYsIDAuMGYpLCBEaXJlY3RYOjpYTU1hdHJpeElkZW50aXR5KCl9LAogICAgICAgIHsiQm9uZTIiLCAxLCBEaXJlY3RYOjpYTU1hdHJpeFRyYW5zbGF0aW9uKDAuMGYsIDEuMGYsIDAuMGYpLCBEaXJlY3RYOjpYTU1hdHJpeElkZW50aXR5KCl9CiAgICB9OwoKICAgIC8vIERlZmluaXIgZWwgbW9kZWxvCiAgICBzdGQ6OnZlY3RvcjxWZXJ0ZXg+IHZlcnRpY2VzID0gewogICAgICAgIHt7MC4wZiwgMC4wZiwgMC4wZn0sIHt9LCB7fSwgezAsIDEsIDIsIC0xfSwgezAuNWYsIDAuM2YsIDAuMmYsIDAuMGZ9fSwKICAgICAgICAvLyBBw7FhZGlyIG3DoXMgdsOpcnRpY2VzIHNlZ8O6biBzZWEgbmVjZXNhcmlvCiAgICB9OwoKICAgIC8vIERlZmluaXIgbGFzIGFuaW1hY2lvbmVzIChtYXRyaWNlcyBkZSB0cmFuc2Zvcm1hY2nDs24pCiAgICBzdGQ6OnZlY3RvcjxEaXJlY3RYOjpYTU1BVFJJWD4gYW5pbWF0aW9ucyA9IHsKICAgICAgICBEaXJlY3RYOjpYTU1hdHJpeFJvdGF0aW9uWSgwLjVmKSwKICAgICAgICBEaXJlY3RYOjpYTU1hdHJpeFJvdGF0aW9uWCgwLjVmKSwKICAgICAgICBEaXJlY3RYOjpYTU1hdHJpeFJvdGF0aW9uWigwLjVmKQogICAgfTsKCiAgICAvLyBBY3R1YWxpemFyIGxhcyB0cmFuc2Zvcm1hY2lvbmVzIGRlIGxvcyBodWVzb3MKICAgIFVwZGF0ZUJvbmVUcmFuc2Zvcm1hdGlvbnMoc2tlbGV0b24sIGFuaW1hdGlvbnMpOwoKICAgIC8vIEFwbGljYXIgZWwgc2tpbm5pbmcKICAgIEFwcGx5U2tpbm5pbmcodmVydGljZXMsIHNrZWxldG9uKTsKCiAgICByZXR1cm4gMDsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;vector&gt;
#include &lt;DirectXMath.h&gt;
#include &lt;string&gt;

struct Bone {
    std::string name;
    int parentIndex;
    DirectX::XMMATRIX offsetMatrix;
    DirectX::XMMATRIX finalTransformation;
};

struct Vertex {
    DirectX::XMFLOAT3 position;
    DirectX::XMFLOAT3 normal;
    DirectX::XMFLOAT2 texCoord;
    int boneIndices[4];
    float weights[4];
};

void UpdateBoneTransformations(std::vector&lt;Bone&gt;&amp; skeleton, const std::vector&lt;DirectX::XMMATRIX&gt;&amp; animations) {
    for (size_t i = 0; i &lt; skeleton.size(); ++i) {
        if (skeleton[i].parentIndex &gt;= 0) {
            skeleton[i].finalTransformation = animations[i] * skeleton[skeleton[i].parentIndex].finalTransformation;
        } else {
            skeleton[i].finalTransformation = animations[i];
        }
    }
}

void ApplySkinning(std::vector&lt;Vertex&gt;&amp; vertices, const std::vector&lt;Bone&gt;&amp; skeleton) {
    for (auto&amp; vertex : vertices) {
        DirectX::XMVECTOR skinnedPosition = DirectX::XMVectorZero();
        for (int i = 0; i &lt; 4; ++i) {
            if (vertex.weights[i] &gt; 0) {
                DirectX::XMMATRIX boneTransform = skeleton[vertex.boneIndices[i]].finalTransformation;
                skinnedPosition += vertex.weights[i] * DirectX::XMVector3Transform(XMLoadFloat3(&amp;vertex.position), boneTransform);
            }
        }
        DirectX::XMStoreFloat3(&amp;vertex.position, skinnedPosition);
    }
}

int main() {
    // Definir el esqueleto
    std::vector&lt;Bone&gt; skeleton = {
        {&quot;Root&quot;, -1, DirectX::XMMatrixIdentity(), DirectX::XMMatrixIdentity()},
        {&quot;Bone1&quot;, 0, DirectX::XMMatrixTranslation(0.0f, 1.0f, 0.0f), DirectX::XMMatrixIdentity()},
        {&quot;Bone2&quot;, 1, DirectX::XMMatrixTranslation(0.0f, 1.0f, 0.0f), DirectX::XMMatrixIdentity()}
    };

    // Definir el modelo
    std::vector&lt;Vertex&gt; vertices = {
        {{0.0f, 0.0f, 0.0f}, {}, {}, {0, 1, 2, -1}, {0.5f, 0.3f, 0.2f, 0.0f}},
        // A&ntilde;adir m&aacute;s v&eacute;rtices seg&uacute;n sea necesario
    };

    // Definir las animaciones (matrices de transformaci&oacute;n)
    std::vector&lt;DirectX::XMMATRIX&gt; animations = {
        DirectX::XMMatrixRotationY(0.5f),
        DirectX::XMMatrixRotationX(0.5f),
        DirectX::XMMatrixRotationZ(0.5f)
    };

    // Actualizar las transformaciones de los huesos
    UpdateBoneTransformations(skeleton, animations);

    // Aplicar el skinning
    ApplySkinning(vertices, skeleton);

    return 0;
}</pre></div><div class='content'></div><h2>Conclusión</h2>
<div class='content'><p>La animación esquelética es una técnica poderosa para animar modelos 3D de manera eficiente y realista. Al comprender y aplicar los conceptos de esqueleto, huesos, pesos de influencia y matrices de transformación, puedes crear animaciones complejas y fluidas. En el siguiente módulo, exploraremos técnicas avanzadas de animación y cómo optimizar el rendimiento de tus animaciones esqueléticas.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-02-animating-3d-models' title="Animando Modelos 3D" class="py-2 px-3 btn btn-primary">
				&#x25C4; Anterior 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-02-animating-3d-models' title="Animando Modelos 3D" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-04-morph-target-animation' title="Animación de Objetivos de Morfología" class="py-2 px-3 btn btn-primary"
				data-read-mod="direct_x" data-read-unit="5-3">
				Siguiente &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-04-morph-target-animation' title="Animación de Objetivos de Morfología" class="py-2 px-3 btn btn-primary" 
				data-read-mod="direct_x" data-read-unit="5-3">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curso de Programación DirectX</h1>
<h2>Módulo 1: Introducción a DirectX</h2>
<ul>
<li><a href="01-01-what-is-directx">¿Qué es DirectX?</a></li>
<li><a href="01-02-setting-up-environment">Configuración del Entorno de Desarrollo</a></li>
<li><a href="01-03-understanding-directx-api">Entendiendo la API de DirectX</a></li>
<li><a href="01-04-creating-first-application">Creando Tu Primera Aplicación DirectX</a></li>
</ul>
<h2>Módulo 2: Conceptos Básicos de Direct3D</h2>
<ul>
<li><a href="02-01-introduction-to-direct3d">Introducción a Direct3D</a></li>
<li><a href="02-02-initializing-direct3d">Inicializando Direct3D</a></li>
<li><a href="02-03-rendering-a-triangle">Renderizando un Triángulo</a></li>
<li><a href="02-04-handling-render-loop">Manejando el Bucle de Renderizado</a></li>
</ul>
<h2>Módulo 3: Trabajando con Shaders</h2>
<ul>
<li><a href="03-01-introduction-to-shaders">Introducción a los Shaders</a></li>
<li><a href="03-02-writing-vertex-shaders">Escribiendo Vertex Shaders</a></li>
<li><a href="03-03-writing-pixel-shaders">Escribiendo Pixel Shaders</a></li>
<li><a href="03-04-compiling-using-shaders">Compilando y Usando Shaders</a></li>
</ul>
<h2>Módulo 4: Técnicas Avanzadas de Renderizado</h2>
<ul>
<li><a href="04-01-texture-mapping">Mapeo de Texturas</a></li>
<li><a href="04-02-lighting-and-materials">Iluminación y Materiales</a></li>
<li><a href="04-03-advanced-lighting-techniques">Técnicas Avanzadas de Iluminación</a></li>
<li><a href="04-04-shadow-mapping">Mapeo de Sombras</a></li>
</ul>
<h2>Módulo 5: Modelos 3D y Animación</h2>
<ul>
<li><a href="05-01-loading-3d-models">Cargando Modelos 3D</a></li>
<li><a href="05-02-animating-3d-models">Animando Modelos 3D</a></li>
<li><a href="05-03-skeletal-animation">Animación Esquelética</a></li>
<li><a href="05-04-morph-target-animation">Animación de Objetivos de Morfología</a></li>
</ul>
<h2>Módulo 6: Optimización del Rendimiento</h2>
<ul>
<li><a href="06-01-profiling-debugging">Perfilado y Depuración</a></li>
<li><a href="06-02-optimizing-rendering-performance">Optimizando el Rendimiento de Renderizado</a></li>
<li><a href="06-03-memory-management">Gestión de Memoria</a></li>
<li><a href="06-04-multithreading-directx">Multithreading en DirectX</a></li>
</ul>
<h2>Módulo 7: Temas Avanzados</h2>
<ul>
<li><a href="07-01-deferred-shading">Sombreado Diferido</a></li>
<li><a href="07-02-post-processing-effects">Efectos de Post-Procesamiento</a></li>
<li><a href="07-03-tessellation">Teselación</a></li>
<li><a href="07-04-ray-tracing">Trazado de Rayos</a></li>
</ul>
<h2>Módulo 8: DirectX en la Práctica</h2>
<ul>
<li><a href="08-01-building-game-engine">Construyendo un Motor de Juego</a></li>
<li><a href="08-02-integrating-physics">Integrando Física</a></li>
<li><a href="08-03-networking-directx">Redes en DirectX</a></li>
<li><a href="08-04-publishing-application">Publicando Tu Aplicación DirectX</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objetivo" rel="nofollow">El Proyecto</a> | 
<a href="/acerca-de" rel="nofollow">Sobre nosotros</a> | 
<a href="/contribuir" rel="nofollow">Contribuir</a> | 
<a href="/donar" rel="nofollow">Donaciones</a> | 
<a href="/licencia" rel="nofollow">Licencia</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Usuario no autenticado</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
