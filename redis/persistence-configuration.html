<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuración de Persistencia</title>

    <link rel="alternate" href="https://campusempresa.com/redis/persistence-configuration" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/redis/persistence-configuration" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/redis/persistence-configuration" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/redis/persistence-configuration" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/redis/persistence-configuration" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='append-only-files-aof'>&#x25C4;Archivos de Solo Adición (AOF)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Configuración de Persistencia</a>
	</div>
	<div class='col-4 text-end'>
					<a href='backup-and-restore'>Copia de Seguridad y Restauración &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a la Persistencia en Redis</h1>
<div class='content'><p>Redis es un almacén de estructuras de datos en memoria, lo que significa que almacena datos principalmente en RAM. Sin embargo, para asegurar la durabilidad de los datos y la recuperación en caso de fallos, Redis proporciona varios mecanismos de persistencia. Entender y configurar estos mecanismos es crucial para mantener la integridad y disponibilidad de los datos.</p>
</div><h1>Tipos de Persistencia en Redis</h1>
<div class='content'><p>Redis ofrece dos tipos principales de persistencia:</p>
<ul>
<li><strong>Instantáneas RDB (Base de Datos Redis)</strong></li>
<li><strong>AOF (Archivo de Solo Adición)</strong></li>
</ul>
</div><h2>Instantáneas RDB</h2>
<div class='content'><p>Las instantáneas RDB crean instantáneas puntuales de tu conjunto de datos en intervalos especificados.</p>
<h4>Conceptos Clave:</h4>
<ul>
<li><strong>Frecuencia de Instantáneas</strong>: Configurable para determinar con qué frecuencia se toman las instantáneas.</li>
<li><strong>Almacenamiento</strong>: Las instantáneas se almacenan como archivos binarios en disco.</li>
<li><strong>Rendimiento</strong>: Impacto mínimo en el rendimiento de Redis durante la creación de instantáneas.</li>
</ul>
<h4>Configuración:</h4>
<p>Para configurar las instantáneas RDB, necesitas modificar el archivo <code>redis.conf</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBHdWFyZGFyIGxhIEJEIGNhZGEgOTAwIHNlZ3VuZG9zICgxNSBtaW51dG9zKSBzaSBhbCBtZW5vcyAxIGNsYXZlIGNhbWJpw7MKc2F2ZSA5MDAgMQoKIyBHdWFyZGFyIGxhIEJEIGNhZGEgMzAwIHNlZ3VuZG9zICg1IG1pbnV0b3MpIHNpIGFsIG1lbm9zIDEwIGNsYXZlcyBjYW1iaWFyb24Kc2F2ZSAzMDAgMTAKCiMgR3VhcmRhciBsYSBCRCBjYWRhIDYwIHNlZ3VuZG9zIHNpIGFsIG1lbm9zIDEwMDAwIGNsYXZlcyBjYW1iaWFyb24Kc2F2ZSA2MCAxMDAwMAoKIyBVYmljYWNpw7NuIGRlbCBhcmNoaXZvIFJEQgpkYmZpbGVuYW1lIGR1bXAucmRiCgojIERpcmVjdG9yaW8gZG9uZGUgZ3VhcmRhciBlbCBhcmNoaXZvIFJEQgpkaXIgL3Zhci9saWIvcmVkaXM="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Guardar la BD cada 900 segundos (15 minutos) si al menos 1 clave cambi&oacute;
save 900 1

# Guardar la BD cada 300 segundos (5 minutos) si al menos 10 claves cambiaron
save 300 10

# Guardar la BD cada 60 segundos si al menos 10000 claves cambiaron
save 60 10000

# Ubicaci&oacute;n del archivo RDB
dbfilename dump.rdb

# Directorio donde guardar el archivo RDB
dir /var/lib/redis</pre></div><div class='content'></div><h2>AOF (Archivo de Solo Adición)</h2>
<div class='content'><p>AOF registra cada operación de escritura recibida por el servidor, que puede ser reproducida para reconstruir el conjunto de datos.</p>
<h4>Conceptos Clave:</h4>
<ul>
<li><strong>Durabilidad de Escritura</strong>: Asegura que cada cambio sea registrado.</li>
<li><strong>Tamaño del Archivo</strong>: Los archivos AOF pueden crecer mucho con el tiempo.</li>
<li><strong>Mecanismo de Reescritura</strong>: Reescribe periódicamente el archivo AOF para reducir su tamaño.</li>
</ul>
<h4>Configuración:</h4>
<p>Para habilitar y configurar AOF, necesitas modificar el archivo <code>redis.conf</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBIYWJpbGl0YXIgQU9GCmFwcGVuZG9ubHkgeWVzCgojIE5vbWJyZSBkZWwgYXJjaGl2byBBT0YKYXBwZW5kZmlsZW5hbWUgImFwcGVuZG9ubHkuYW9mIgoKIyBQb2zDrXRpY2EgZGUgZnN5bmMgZGUgQU9GIChhbHdheXMsIGV2ZXJ5c2VjLCBubykKIyBhbHdheXM6IGZzeW5jIGRlc3B1w6lzIGRlIGNhZGEgZXNjcml0dXJhIChsZW50bywgc2VndXJvKQojIGV2ZXJ5c2VjOiBmc3luYyBjYWRhIHNlZ3VuZG8gKGJhbGFuY2VhZG8pCiMgbm86IGRlamFyIHF1ZSBlbCBTTyBnZXN0aW9uZSAocsOhcGlkbywgbWVub3Mgc2VndXJvKQphcHBlbmRmc3luYyBldmVyeXNlYwoKIyBDb25maWd1cmFjacOzbiBhdXRvbcOhdGljYSBkZSByZWVzY3JpdHVyYSBkZSBBT0YKYXV0by1hb2YtcmV3cml0ZS1wZXJjZW50YWdlIDEwMAphdXRvLWFvZi1yZXdyaXRlLW1pbi1zaXplIDY0bWI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Habilitar AOF
appendonly yes

# Nombre del archivo AOF
appendfilename &quot;appendonly.aof&quot;

# Pol&iacute;tica de fsync de AOF (always, everysec, no)
# always: fsync despu&eacute;s de cada escritura (lento, seguro)
# everysec: fsync cada segundo (balanceado)
# no: dejar que el SO gestione (r&aacute;pido, menos seguro)
appendfsync everysec

# Configuraci&oacute;n autom&aacute;tica de reescritura de AOF
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb</pre></div><div class='content'></div><h1>Elegir Entre RDB y AOF</h1>
<div class='content'><p>Cada método de persistencia tiene sus pros y contras. La elección depende de tu caso de uso específico.</p>
<p>| Característica        | Instantáneas RDB               | AOF                              |
|-----------------------|--------------------------------|----------------------------------|
| Durabilidad           | Menos duradero                 | Más duradero                     |
| Impacto en el Rendimiento | Menor durante la operación normal | Mayor debido al registro de cada escritura |
| Velocidad de Recuperación | Más rápida                   | Más lenta                        |
| Tamaño del Archivo    | Más pequeño                    | Más grande                       |
| Caso de Uso           | Adecuado para copias de seguridad | Adecuado para necesidades de alta durabilidad |</p>
</div><h1>Mejores Prácticas para la Configuración de Persistencia</h1>
<div class='content'><ul>
<li><strong>Combinar RDB y AOF</strong>: Usa ambos para equilibrar entre rendimiento y durabilidad.</li>
<li><strong>Copias de Seguridad Regulares</strong>: Programa copias de seguridad regulares de tus archivos RDB.</li>
<li><strong>Monitorear Espacio en Disco</strong>: Asegura suficiente espacio en disco para los archivos AOF.</li>
<li><strong>Ajustar la Política de fsync</strong>: Ajusta la política <code>appendfsync</code> según tus requisitos de rendimiento y durabilidad.</li>
</ul>
</div><h1>Configuración de Ejemplo</h1>
<div class='content'><p>Aquí tienes un ejemplo de una configuración combinada de RDB y AOF en <code>redis.conf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb25maWd1cmFjacOzbiBkZSBSREIKc2F2ZSA5MDAgMQpzYXZlIDMwMCAxMApzYXZlIDYwIDEwMDAwCmRiZmlsZW5hbWUgZHVtcC5yZGIKZGlyIC92YXIvbGliL3JlZGlzCgojIENvbmZpZ3VyYWNpw7NuIGRlIEFPRgphcHBlbmRvbmx5IHllcwphcHBlbmRmaWxlbmFtZSAiYXBwZW5kb25seS5hb2YiCmFwcGVuZGZzeW5jIGV2ZXJ5c2VjCmF1dG8tYW9mLXJld3JpdGUtcGVyY2VudGFnZSAxMDAKYXV0by1hb2YtcmV3cml0ZS1taW4tc2l6ZSA2NG1i"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Configuraci&oacute;n de RDB
save 900 1
save 300 10
save 60 10000
dbfilename dump.rdb
dir /var/lib/redis

# Configuraci&oacute;n de AOF
appendonly yes
appendfilename &quot;appendonly.aof&quot;
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Entender y configurar la persistencia de Redis es esencial para asegurar la durabilidad y disponibilidad de los datos. Al aprovechar las instantáneas RDB y AOF, puedes lograr un equilibrio entre rendimiento y seguridad de los datos. Revisa y ajusta regularmente tus configuraciones de persistencia para alinearlas con los requisitos de tu aplicación y patrones de carga de trabajo.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='append-only-files-aof'>&#x25C4;Archivos de Solo Adición (AOF)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Configuración de Persistencia</a>
	</div>
	<div class='col-4 text-end'>
					<a href='backup-and-restore'>Copia de Seguridad y Restauración &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
