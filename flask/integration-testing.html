<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pruebas de Integración en Flask</title>

    <link rel="alternate" href="https://campusempresa.com/flask/integration-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/flask/integration-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/flask/integration-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/flask/integration-testing" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/flask/integration-testing" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Pruebas Unitarias con Flask</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Pruebas de Integración en Flask</a>
	</div>
	<div class='col-4 text-end'>
					<a href='deploying-flask-applications'>Despliegue de Aplicaciones Flask &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Las pruebas de integración son una parte crucial del ciclo de vida del desarrollo de software. Aseguran que los diferentes componentes de tu aplicación Flask funcionen juntos como se espera. Este tema te guiará a través de los conceptos básicos de las pruebas de integración en Flask, desde la configuración de tu entorno hasta la escritura y ejecución de tus pruebas.</p>
</div><h1>¿Qué son las Pruebas de Integración?</h1>
<div class='content'><p>Las pruebas de integración son un nivel de pruebas de software donde unidades o componentes individuales se combinan y se prueban como un grupo. El propósito es exponer fallos en la interacción entre unidades integradas.</p>
<ul>
<li><strong>Pruebas Unitarias</strong>: Prueban componentes individuales en aislamiento.</li>
<li><strong>Pruebas de Integración</strong>: Prueban la interacción entre componentes.</li>
<li><strong>Pruebas de Sistema</strong>: Prueban el sistema completo como un todo.</li>
</ul>
</div><h1>Configuración de tu Entorno</h1>
<div class='content'><p>Antes de comenzar a escribir pruebas de integración, necesitamos configurar nuestro entorno de pruebas.</p>
</div><h2>Instalación de Paquetes Requeridos</h2>
<div class='content'><p>Primero, asegúrate de tener Flask y los paquetes de pruebas necesarios instalados. Puedes instalarlos usando pip:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgRmxhc2sgcHl0ZXN0IHB5dGVzdC1mbGFzaw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install Flask pytest pytest-flask</pre></div><div class='content'></div><h2>Configuración de Flask para Pruebas</h2>
<div class='content'><p>Crea un archivo <code>conftest.py</code> para configurar tu aplicación Flask para pruebas:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHB5dGVzdApmcm9tIG15YXBwIGltcG9ydCBjcmVhdGVfYXBwCgpAcHl0ZXN0LmZpeHR1cmUKZGVmIGFwcCgpOgogICAgYXBwID0gY3JlYXRlX2FwcCgpCiAgICBhcHAuY29uZmlnLnVwZGF0ZSh7CiAgICAgICAgIlRFU1RJTkciOiBUcnVlLAogICAgfSkKICAgIHlpZWxkIGFwcAoKQHB5dGVzdC5maXh0dXJlCmRlZiBjbGllbnQoYXBwKToKICAgIHJldHVybiBhcHAudGVzdF9jbGllbnQoKQoKQHB5dGVzdC5maXh0dXJlCmRlZiBydW5uZXIoYXBwKToKICAgIHJldHVybiBhcHAudGVzdF9jbGlfcnVubmVyKCk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import pytest
from myapp import create_app

@pytest.fixture
def app():
    app = create_app()
    app.config.update({
        &quot;TESTING&quot;: True,
    })
    yield app

@pytest.fixture
def client(app):
    return app.test_client()

@pytest.fixture
def runner(app):
    return app.test_cli_runner()</pre></div><div class='content'><ul>
<li><code>create_app()</code>: Una función de fábrica para crear tu aplicación Flask.</li>
<li><code>TESTING</code>: Una configuración para habilitar el modo de pruebas.</li>
</ul>
</div><h1>Escritura de Pruebas de Integración</h1>
<div class='content'><p>Ahora que nuestro entorno está configurado, escribamos algunas pruebas de integración.</p>
</div><h2>Ejemplo: Probando una Ruta Simple</h2>
<div class='content'><p>Considera una ruta simple de Flask:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBteWFwcC9yb3V0ZXMucHkKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIGpzb25pZnkKCmFwcCA9IEZsYXNrKF9fbmFtZV9fKQoKQGFwcC5yb3V0ZSgnL2hlbGxvJykKZGVmIGhlbGxvKCk6CiAgICByZXR1cm4ganNvbmlmeShtZXNzYWdlPSJIZWxsbywgV29ybGQhIik="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># myapp/routes.py
from flask import Flask, jsonify

app = Flask(__name__)

@app.route('/hello')
def hello():
    return jsonify(message=&quot;Hello, World!&quot;)</pre></div><div class='content'><p>Para probar esta ruta, crea un archivo de prueba <code>test_routes.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB0ZXN0X3JvdXRlcy5weQpkZWYgdGVzdF9oZWxsbyhjbGllbnQpOgogICAgcmVzcG9uc2UgPSBjbGllbnQuZ2V0KCcvaGVsbG8nKQogICAgYXNzZXJ0IHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMAogICAgYXNzZXJ0IHJlc3BvbnNlLmpzb24gPT0geyJtZXNzYWdlIjogIkhlbGxvLCBXb3JsZCEifQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># test_routes.py
def test_hello(client):
    response = client.get('/hello')
    assert response.status_code == 200
    assert response.json == {&quot;message&quot;: &quot;Hello, World!&quot;}</pre></div><div class='content'><ul>
<li><code>client.get('/hello')</code>: Envía una solicitud GET a la ruta <code>/hello</code>.</li>
<li><code>response.status_code</code>: Verifica el código de estado HTTP.</li>
<li><code>response.json</code>: Verifica la respuesta JSON.</li>
</ul>
</div><h2>Ejemplo: Probando Interacciones con la Base de Datos</h2>
<div class='content'><p>Agreguemos una ruta que interactúe con una base de datos:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBteWFwcC9yb3V0ZXMucHkKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIGpzb25pZnkKZnJvbSBmbGFza19zcWxhbGNoZW15IGltcG9ydCBTUUxBbGNoZW15CgphcHAgPSBGbGFzayhfX25hbWVfXykKYXBwLmNvbmZpZ1snU1FMQUxDSEVNWV9EQVRBQkFTRV9VUkknXSA9ICdzcWxpdGU6Ly8vOm1lbW9yeTonCmRiID0gU1FMQWxjaGVteShhcHApCgpjbGFzcyBVc2VyKGRiLk1vZGVsKToKICAgIGlkID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpCiAgICBuYW1lID0gZGIuQ29sdW1uKGRiLlN0cmluZyg4MCksIHVuaXF1ZT1UcnVlLCBudWxsYWJsZT1GYWxzZSkKCkBhcHAucm91dGUoJy91c2VycycpCmRlZiBnZXRfdXNlcnMoKToKICAgIHVzZXJzID0gVXNlci5xdWVyeS5hbGwoKQogICAgcmV0dXJuIGpzb25pZnkodXNlcnM9W3VzZXIubmFtZSBmb3IgdXNlciBpbiB1c2Vyc10p"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># myapp/routes.py
from flask import Flask, jsonify
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///:memory:'
db = SQLAlchemy(app)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80), unique=True, nullable=False)

@app.route('/users')
def get_users():
    users = User.query.all()
    return jsonify(users=[user.name for user in users])</pre></div><div class='content'><p>Para probar esta ruta, necesitamos configurar la base de datos en nuestras pruebas:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB0ZXN0X3JvdXRlcy5weQppbXBvcnQgcHl0ZXN0CmZyb20gbXlhcHAucm91dGVzIGltcG9ydCBkYiwgVXNlcgoKQHB5dGVzdC5maXh0dXJlCmRlZiBpbml0X2RhdGFiYXNlKCk6CiAgICBkYi5jcmVhdGVfYWxsKCkKICAgIHVzZXIxID0gVXNlcihuYW1lPSJBbGljZSIpCiAgICB1c2VyMiA9IFVzZXIobmFtZT0iQm9iIikKICAgIGRiLnNlc3Npb24uYWRkKHVzZXIxKQogICAgZGIuc2Vzc2lvbi5hZGQodXNlcjIpCiAgICBkYi5zZXNzaW9uLmNvbW1pdCgpCiAgICB5aWVsZCBkYgogICAgZGIuZHJvcF9hbGwoKQoKZGVmIHRlc3RfZ2V0X3VzZXJzKGNsaWVudCwgaW5pdF9kYXRhYmFzZSk6CiAgICByZXNwb25zZSA9IGNsaWVudC5nZXQoJy91c2VycycpCiAgICBhc3NlcnQgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwCiAgICBhc3NlcnQgcmVzcG9uc2UuanNvbiA9PSB7InVzZXJzIjogWyJBbGljZSIsICJCb2IiXX0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># test_routes.py
import pytest
from myapp.routes import db, User

@pytest.fixture
def init_database():
    db.create_all()
    user1 = User(name=&quot;Alice&quot;)
    user2 = User(name=&quot;Bob&quot;)
    db.session.add(user1)
    db.session.add(user2)
    db.session.commit()
    yield db
    db.drop_all()

def test_get_users(client, init_database):
    response = client.get('/users')
    assert response.status_code == 200
    assert response.json == {&quot;users&quot;: [&quot;Alice&quot;, &quot;Bob&quot;]}</pre></div><div class='content'><ul>
<li><code>db.create_all()</code>: Crea el esquema de la base de datos.</li>
<li><code>db.drop_all()</code>: Elimina el esquema de la base de datos después de la prueba.</li>
<li><code>client.get('/users')</code>: Envía una solicitud GET a la ruta <code>/users</code>.</li>
</ul>
</div><h1>Ejecución de tus Pruebas</h1>
<div class='content'><p>Para ejecutar tus pruebas, simplemente usa el comando <code>pytest</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0ZXN0"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pytest</pre></div><div class='content'><p>Esto descubrirá y ejecutará todas las pruebas en tu proyecto.</p>
</div><h1>Conclusión</h1>
<div class='content'><p>Las pruebas de integración son esenciales para asegurar que las diferentes partes de tu aplicación Flask funcionen juntas correctamente. Al configurar un entorno de pruebas adecuado y escribir pruebas exhaustivas, puedes detectar errores temprano y asegurar la fiabilidad de tu aplicación. Recuerda:</p>
<ul>
<li>Configurar tu aplicación Flask para pruebas.</li>
<li>Escribir pruebas para diferentes rutas e interacciones.</li>
<li>Usar fixtures para gestionar la configuración y eliminación de recursos como bases de datos.</li>
</ul>
<p>¡Felices pruebas!</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Pruebas Unitarias con Flask</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Pruebas de Integración en Flask</a>
	</div>
	<div class='col-4 text-end'>
					<a href='deploying-flask-applications'>Despliegue de Aplicaciones Flask &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
