<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Almacenamiento en la Nube en Google Cloud Platform (GCP)</title>

    <link rel="alternate" href="https://campusempresa.com/gcp/cloud-storage" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/gcp/cloud-storage" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/gcp/cloud-storage" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/gcp/cloud-storage" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/gcp/cloud-storage" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='cloud-security-basics'>&#x25C4;Conceptos básicos de seguridad en la nube</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Almacenamiento en la Nube en Google Cloud Platform (GCP)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='cloud-sql'>Cloud SQL &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción al Almacenamiento en la Nube</h1>
<div class='content'><p>Google Cloud Storage es un servicio para almacenar y acceder a tus datos en la infraestructura de Google. Proporciona una solución de almacenamiento de objetos escalable, segura y duradera para desarrolladores y empresas.</p>
<ul>
<li><strong>Conceptos Clave:</strong>
<ul>
<li><strong>Buckets:</strong> Contenedores para almacenar objetos.</li>
<li><strong>Objetos:</strong> Piezas individuales de datos almacenadas en los buckets.</li>
<li><strong>Clases:</strong> Diferentes clases de almacenamiento para varios casos de uso (por ejemplo, Standard, Nearline, Coldline, Archive).</li>
<li><strong>Regiones:</strong> Ubicaciones geográficas donde se almacenan los datos.</li>
</ul>
</li>
</ul>
</div><h1>Configuración de Google Cloud Storage</h1>
<h2>Creación de un Proyecto de Google Cloud</h2>
<div class='content'><ol>
<li>
<p><strong>Iniciar sesión en Google Cloud Console:</strong></p>
<ul>
<li>Navega a <a href="https://console.cloud.google.com/">Google Cloud Console</a>.</li>
<li>Inicia sesión con tu cuenta de Google.</li>
</ul>
</li>
<li>
<p><strong>Crear un nuevo proyecto:</strong></p>
<ul>
<li>Haz clic en el menú desplegable de proyectos y selecciona &quot;Nuevo Proyecto.&quot;</li>
<li>Ingresa un nombre de proyecto y haz clic en &quot;Crear.&quot;</li>
</ul>
</li>
</ol>
</div><h2>Habilitar la API de Cloud Storage</h2>
<div class='content'><ol>
<li>
<p><strong>Navegar a la Biblioteca de API:</strong></p>
<ul>
<li>En Google Cloud Console, ve al &quot;Menú de Navegación&quot; &gt; &quot;APIs &amp; Services&quot; &gt; &quot;Library.&quot;</li>
</ul>
</li>
<li>
<p><strong>Habilitar la API de Cloud Storage:</strong></p>
<ul>
<li>Busca &quot;Cloud Storage&quot; y haz clic en ella.</li>
<li>Haz clic en &quot;Enable.&quot;</li>
</ul>
</li>
</ol>
</div><h1>Trabajando con Buckets</h1>
<h2>Creación de un Bucket</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBnb29nbGUuY2xvdWQgaW1wb3J0IHN0b3JhZ2UKCmRlZiBjcmVhdGVfYnVja2V0KGJ1Y2tldF9uYW1lKToKICAgICIiIkNyZWEgdW4gbnVldm8gYnVja2V0LiIiIgogICAgc3RvcmFnZV9jbGllbnQgPSBzdG9yYWdlLkNsaWVudCgpCiAgICBidWNrZXQgPSBzdG9yYWdlX2NsaWVudC5jcmVhdGVfYnVja2V0KGJ1Y2tldF9uYW1lKQogICAgcHJpbnQoZiJCdWNrZXQge2J1Y2tldC5uYW1lfSBjcmVhZG8uIikKCmNyZWF0ZV9idWNrZXQoJ21pLW51ZXZvLWJ1Y2tldCcp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from google.cloud import storage

def create_bucket(bucket_name):
    &quot;&quot;&quot;Crea un nuevo bucket.&quot;&quot;&quot;
    storage_client = storage.Client()
    bucket = storage_client.create_bucket(bucket_name)
    print(f&quot;Bucket {bucket.name} creado.&quot;)

create_bucket('mi-nuevo-bucket')</pre></div><div class='content'><ul>
<li><strong>Explicación:</strong>
<ul>
<li>Importa el módulo <code>storage</code> de la biblioteca <code>google.cloud</code>.</li>
<li>Crea una instancia de <code>storage.Client</code>.</li>
<li>Usa el método <code>create_bucket</code> para crear un nuevo bucket con el nombre especificado.</li>
</ul>
</li>
</ul>
</div><h2>Listado de Buckets</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIGxpc3RfYnVja2V0cygpOgogICAgIiIiTGlzdGEgdG9kb3MgbG9zIGJ1Y2tldHMuIiIiCiAgICBzdG9yYWdlX2NsaWVudCA9IHN0b3JhZ2UuQ2xpZW50KCkKICAgIGJ1Y2tldHMgPSBzdG9yYWdlX2NsaWVudC5saXN0X2J1Y2tldHMoKQogICAgZm9yIGJ1Y2tldCBpbiBidWNrZXRzOgogICAgICAgIHByaW50KGJ1Y2tldC5uYW1lKQoKbGlzdF9idWNrZXRzKCk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def list_buckets():
    &quot;&quot;&quot;Lista todos los buckets.&quot;&quot;&quot;
    storage_client = storage.Client()
    buckets = storage_client.list_buckets()
    for bucket in buckets:
        print(bucket.name)

list_buckets()</pre></div><div class='content'><ul>
<li><strong>Explicación:</strong>
<ul>
<li>Usa el método <code>list_buckets</code> para recuperar todos los buckets en el proyecto.</li>
<li>Itera a través de los buckets e imprime sus nombres.</li>
</ul>
</li>
</ul>
</div><h1>Trabajando con Objetos</h1>
<h2>Subida de un Objeto</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIHVwbG9hZF9ibG9iKGJ1Y2tldF9uYW1lLCBzb3VyY2VfZmlsZV9uYW1lLCBkZXN0aW5hdGlvbl9ibG9iX25hbWUpOgogICAgIiIiU3ViZSB1biBhcmNoaXZvIGFsIGJ1Y2tldC4iIiIKICAgIHN0b3JhZ2VfY2xpZW50ID0gc3RvcmFnZS5DbGllbnQoKQogICAgYnVja2V0ID0gc3RvcmFnZV9jbGllbnQuYnVja2V0KGJ1Y2tldF9uYW1lKQogICAgYmxvYiA9IGJ1Y2tldC5ibG9iKGRlc3RpbmF0aW9uX2Jsb2JfbmFtZSkKICAgIGJsb2IudXBsb2FkX2Zyb21fZmlsZW5hbWUoc291cmNlX2ZpbGVfbmFtZSkKICAgIHByaW50KGYiQXJjaGl2byB7c291cmNlX2ZpbGVfbmFtZX0gc3ViaWRvIGEge2Rlc3RpbmF0aW9uX2Jsb2JfbmFtZX0uIikKCnVwbG9hZF9ibG9iKCdtaS1udWV2by1idWNrZXQnLCAnYXJjaGl2by1sb2NhbC50eHQnLCAnYXJjaGl2by1yZW1vdG8udHh0Jyk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def upload_blob(bucket_name, source_file_name, destination_blob_name):
    &quot;&quot;&quot;Sube un archivo al bucket.&quot;&quot;&quot;
    storage_client = storage.Client()
    bucket = storage_client.bucket(bucket_name)
    blob = bucket.blob(destination_blob_name)
    blob.upload_from_filename(source_file_name)
    print(f&quot;Archivo {source_file_name} subido a {destination_blob_name}.&quot;)

upload_blob('mi-nuevo-bucket', 'archivo-local.txt', 'archivo-remoto.txt')</pre></div><div class='content'><ul>
<li><strong>Explicación:</strong>
<ul>
<li>Obtén el bucket usando el método <code>bucket</code>.</li>
<li>Crea un objeto blob usando el método <code>blob</code>.</li>
<li>Sube el archivo usando el método <code>upload_from_filename</code>.</li>
</ul>
</li>
</ul>
</div><h2>Descarga de un Objeto</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIGRvd25sb2FkX2Jsb2IoYnVja2V0X25hbWUsIHNvdXJjZV9ibG9iX25hbWUsIGRlc3RpbmF0aW9uX2ZpbGVfbmFtZSk6CiAgICAiIiJEZXNjYXJnYSB1biBibG9iIGRlbCBidWNrZXQuIiIiCiAgICBzdG9yYWdlX2NsaWVudCA9IHN0b3JhZ2UuQ2xpZW50KCkKICAgIGJ1Y2tldCA9IHN0b3JhZ2VfY2xpZW50LmJ1Y2tldChidWNrZXRfbmFtZSkKICAgIGJsb2IgPSBidWNrZXQuYmxvYihzb3VyY2VfYmxvYl9uYW1lKQogICAgYmxvYi5kb3dubG9hZF90b19maWxlbmFtZShkZXN0aW5hdGlvbl9maWxlX25hbWUpCiAgICBwcmludChmIkJsb2Ige3NvdXJjZV9ibG9iX25hbWV9IGRlc2NhcmdhZG8gYSB7ZGVzdGluYXRpb25fZmlsZV9uYW1lfS4iKQoKZG93bmxvYWRfYmxvYignbWktbnVldm8tYnVja2V0JywgJ2FyY2hpdm8tcmVtb3RvLnR4dCcsICdhcmNoaXZvLWxvY2FsLnR4dCcp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def download_blob(bucket_name, source_blob_name, destination_file_name):
    &quot;&quot;&quot;Descarga un blob del bucket.&quot;&quot;&quot;
    storage_client = storage.Client()
    bucket = storage_client.bucket(bucket_name)
    blob = bucket.blob(source_blob_name)
    blob.download_to_filename(destination_file_name)
    print(f&quot;Blob {source_blob_name} descargado a {destination_file_name}.&quot;)

download_blob('mi-nuevo-bucket', 'archivo-remoto.txt', 'archivo-local.txt')</pre></div><div class='content'><ul>
<li><strong>Explicación:</strong>
<ul>
<li>Obtén el objeto blob usando el método <code>blob</code>.</li>
<li>Descarga el archivo usando el método <code>download_to_filename</code>.</li>
</ul>
</li>
</ul>
</div><h1>Clases de Almacenamiento y Gestión del Ciclo de Vida</h1>
<h2>Clases de Almacenamiento</h2>
<div class='content'><p>Google Cloud Storage ofrece diferentes clases de almacenamiento para optimizar costos y rendimiento para varios casos de uso:</p>
<p>| Clase de Almacenamiento | Caso de Uso | Durabilidad | Disponibilidad |
| ----------------------- | ----------- | ----------- | -------------- |
| Standard                | Datos accedidos frecuentemente | 99.999999999% | 99.99% |
| Nearline                | Datos accedidos infrecuentemente (una vez al mes) | 99.999999999% | 99.95% |
| Coldline                | Datos raramente accedidos (una vez al año) | 99.999999999% | 99.90% |
| Archive                 | Almacenamiento a largo plazo | 99.999999999% | 99.90% |</p>
</div><h2>Gestión del Ciclo de Vida</h2>
<div class='content'><p>La gestión del ciclo de vida te permite definir reglas para transicionar automáticamente objetos a diferentes clases de almacenamiento o eliminarlos después de un cierto período.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIHNldF9idWNrZXRfbGlmZWN5Y2xlKGJ1Y2tldF9uYW1lKToKICAgICIiIkVzdGFibGVjZSB1bmEgcG9sw610aWNhIGRlIGdlc3Rpw7NuIGRlbCBjaWNsbyBkZSB2aWRhIGVuIHVuIGJ1Y2tldC4iIiIKICAgIHN0b3JhZ2VfY2xpZW50ID0gc3RvcmFnZS5DbGllbnQoKQogICAgYnVja2V0ID0gc3RvcmFnZV9jbGllbnQuYnVja2V0KGJ1Y2tldF9uYW1lKQogICAgcnVsZSA9IHsKICAgICAgICAiYWN0aW9uIjogeyJ0eXBlIjogIlNldFN0b3JhZ2VDbGFzcyIsICJzdG9yYWdlQ2xhc3MiOiAiQ09MRExJTkUifSwKICAgICAgICAiY29uZGl0aW9uIjogeyJhZ2UiOiAzNjV9CiAgICB9CiAgICBsaWZlY3ljbGUgPSBidWNrZXQubGlmZWN5Y2xlX3J1bGVzCiAgICBsaWZlY3ljbGUuYXBwZW5kKHJ1bGUpCiAgICBidWNrZXQucGF0Y2goKQogICAgcHJpbnQoZiJQb2zDrXRpY2EgZGUgZ2VzdGnDs24gZGVsIGNpY2xvIGRlIHZpZGEgZXN0YWJsZWNpZGEgcGFyYSBlbCBidWNrZXQge2J1Y2tldF9uYW1lfS4iKQoKc2V0X2J1Y2tldF9saWZlY3ljbGUoJ21pLW51ZXZvLWJ1Y2tldCcp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def set_bucket_lifecycle(bucket_name):
    &quot;&quot;&quot;Establece una pol&iacute;tica de gesti&oacute;n del ciclo de vida en un bucket.&quot;&quot;&quot;
    storage_client = storage.Client()
    bucket = storage_client.bucket(bucket_name)
    rule = {
        &quot;action&quot;: {&quot;type&quot;: &quot;SetStorageClass&quot;, &quot;storageClass&quot;: &quot;COLDLINE&quot;},
        &quot;condition&quot;: {&quot;age&quot;: 365}
    }
    lifecycle = bucket.lifecycle_rules
    lifecycle.append(rule)
    bucket.patch()
    print(f&quot;Pol&iacute;tica de gesti&oacute;n del ciclo de vida establecida para el bucket {bucket_name}.&quot;)

set_bucket_lifecycle('mi-nuevo-bucket')</pre></div><div class='content'><ul>
<li><strong>Explicación:</strong>
<ul>
<li>Define una regla para transicionar objetos a la clase de almacenamiento Coldline después de 365 días.</li>
<li>Añade la regla a las reglas de ciclo de vida del bucket y aplica los cambios usando el método <code>patch</code>.</li>
</ul>
</li>
</ul>
</div><h1>Seguridad y Control de Acceso</h1>
<h2>Políticas IAM</h2>
<div class='content'><p>Las políticas IAM (Identity and Access Management) te permiten controlar quién tiene acceso a tus buckets y objetos.</p>
<ul>
<li><strong>Roles:</strong>
<ul>
<li><code>roles/storage.admin</code>: Control total sobre buckets y objetos.</li>
<li><code>roles/storage.objectAdmin</code>: Control total sobre objetos.</li>
<li><code>roles/storage.objectViewer</code>: Acceso de solo lectura a objetos.</li>
</ul>
</li>
</ul>
</div><h2>Establecimiento de Permisos de Bucket</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIHNldF9idWNrZXRfaWFtX3BvbGljeShidWNrZXRfbmFtZSk6CiAgICAiIiJFc3RhYmxlY2UgdW5hIHBvbMOtdGljYSBJQU0gZW4gdW4gYnVja2V0LiIiIgogICAgc3RvcmFnZV9jbGllbnQgPSBzdG9yYWdlLkNsaWVudCgpCiAgICBidWNrZXQgPSBzdG9yYWdlX2NsaWVudC5idWNrZXQoYnVja2V0X25hbWUpCiAgICBwb2xpY3kgPSBidWNrZXQuZ2V0X2lhbV9wb2xpY3koKQogICAgcG9saWN5WyJiaW5kaW5ncyJdLmFwcGVuZCgKICAgICAgICB7CiAgICAgICAgICAgICJyb2xlIjogInJvbGVzL3N0b3JhZ2Uub2JqZWN0Vmlld2VyIiwKICAgICAgICAgICAgIm1lbWJlcnMiOiB7InVzZXI6ZXhhbXBsZS11c2VyQGdtYWlsLmNvbSJ9LAogICAgICAgIH0KICAgICkKICAgIGJ1Y2tldC5zZXRfaWFtX3BvbGljeShwb2xpY3kpCiAgICBwcmludChmIlBvbMOtdGljYSBJQU0gZXN0YWJsZWNpZGEgcGFyYSBlbCBidWNrZXQge2J1Y2tldF9uYW1lfS4iKQoKc2V0X2J1Y2tldF9pYW1fcG9saWN5KCdtaS1udWV2by1idWNrZXQnKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def set_bucket_iam_policy(bucket_name):
    &quot;&quot;&quot;Establece una pol&iacute;tica IAM en un bucket.&quot;&quot;&quot;
    storage_client = storage.Client()
    bucket = storage_client.bucket(bucket_name)
    policy = bucket.get_iam_policy()
    policy[&quot;bindings&quot;].append(
        {
            &quot;role&quot;: &quot;roles/storage.objectViewer&quot;,
            &quot;members&quot;: {&quot;user:example-user@gmail.com&quot;},
        }
    )
    bucket.set_iam_policy(policy)
    print(f&quot;Pol&iacute;tica IAM establecida para el bucket {bucket_name}.&quot;)

set_bucket_iam_policy('mi-nuevo-bucket')</pre></div><div class='content'><ul>
<li><strong>Explicación:</strong>
<ul>
<li>Recupera la política IAM actual usando el método <code>get_iam_policy</code>.</li>
<li>Añade una nueva vinculación para otorgar acceso de solo lectura a un usuario específico.</li>
<li>Aplica la política actualizada usando el método <code>set_iam_policy</code>.</li>
</ul>
</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Google Cloud Storage proporciona una solución robusta y flexible para almacenar y gestionar datos en la nube. Al comprender los conceptos clave, configurar buckets, gestionar objetos, utilizar diferentes clases de almacenamiento e implementar medidas de seguridad, puedes aprovechar efectivamente Google Cloud Storage para una amplia gama de aplicaciones. Ya seas un principiante o un usuario avanzado, dominar estas habilidades te permitirá construir soluciones en la nube escalables y seguras.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='cloud-security-basics'>&#x25C4;Conceptos básicos de seguridad en la nube</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Almacenamiento en la Nube en Google Cloud Platform (GCP)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='cloud-sql'>Cloud SQL &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
