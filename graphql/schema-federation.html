<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Federación de Esquemas</title>

    <link rel="alternate" href="https://campusempresa.com/graphql/schema-federation" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/graphql/schema-federation" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/graphql/schema-federation" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/graphql/schema-federation" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/graphql/schema-federation" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='custom-scalars'>&#x25C4;Escalares Personalizados</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Federación de Esquemas</a>
	</div>
	<div class='col-4 text-end'>
					<a href='graphql-and-serverless'>GraphQL y Serverless &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La Federación de Esquemas es un tema avanzado en GraphQL que te permite componer múltiples servicios GraphQL en un único gráfico unificado. Este enfoque es particularmente útil para grandes organizaciones donde diferentes equipos gestionan diferentes partes del esquema. En este tema, cubriremos los conceptos básicos de la Federación de Esquemas, sus beneficios y cómo implementarla.</p>
</div><h1>¿Qué es la Federación de Esquemas?</h1>
<div class='content'><p>La Federación de Esquemas es una técnica que te permite dividir tu esquema GraphQL en múltiples esquemas más pequeños que pueden ser gestionados de manera independiente. Estos esquemas más pequeños, conocidos como &quot;subgráficos,&quot; se combinan luego en un único esquema federado.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Subgráfico</strong>: Un esquema GraphQL más pequeño y gestionado de manera independiente.</li>
<li><strong>Gateway</strong>: Un servicio que compone múltiples subgráficos en un único esquema federado.</li>
<li><strong>Directivas de Federación</strong>: Anotaciones especiales utilizadas para definir cómo se relacionan los subgráficos entre sí.</li>
</ul>
</div><h1>Beneficios de la Federación de Esquemas</h1>
<div class='content'><ul>
<li><strong>Escalabilidad</strong>: Permite que diferentes equipos trabajen en diferentes partes del esquema de manera independiente.</li>
<li><strong>Modularidad</strong>: Facilita la gestión y el mantenimiento de esquemas grandes al dividirlos en piezas más pequeñas y manejables.</li>
<li><strong>Flexibilidad</strong>: Permite evolucionar tu esquema sin afectar a todo el sistema.</li>
</ul>
</div><h1>Implementación de la Federación de Esquemas</h1>
<div class='content'><p>Para implementar la Federación de Esquemas, necesitas configurar subgráficos y un gateway. Vamos a repasar los pasos para lograr esto.</p>
</div><h2>Paso 1: Definir Subgráficos</h2>
<div class='content'><p>Cada subgráfico es un servicio GraphQL independiente. Aquí tienes un ejemplo de dos subgráficos: <code>users</code> y <code>products</code>.</p>
<h4>Subgráfico de Usuarios</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB1c2Vycy1zY2hlbWEuZ3JhcGhxbAp0eXBlIFVzZXIgQGtleShmaWVsZHM6ICJpZCIpIHsKICBpZDogSUQhCiAgbmFtZTogU3RyaW5nIQogIGVtYWlsOiBTdHJpbmchCn0KCnR5cGUgUXVlcnkgewogIG1lOiBVc2VyCiAgdXNlcihpZDogSUQhKTogVXNlcgp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># users-schema.graphql
type User @key(fields: &quot;id&quot;) {
  id: ID!
  name: String!
  email: String!
}

type Query {
  me: User
  user(id: ID!): User
}</pre></div><div class='content'><h4>Subgráfico de Productos</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBwcm9kdWN0cy1zY2hlbWEuZ3JhcGhxbAp0eXBlIFByb2R1Y3QgQGtleShmaWVsZHM6ICJpZCIpIHsKICBpZDogSUQhCiAgbmFtZTogU3RyaW5nIQogIHByaWNlOiBGbG9hdCEKfQoKdHlwZSBRdWVyeSB7CiAgcHJvZHVjdChpZDogSUQhKTogUHJvZHVjdAogIHByb2R1Y3RzOiBbUHJvZHVjdF0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># products-schema.graphql
type Product @key(fields: &quot;id&quot;) {
  id: ID!
  name: String!
  price: Float!
}

type Query {
  product(id: ID!): Product
  products: [Product]
}</pre></div><div class='content'></div><h2>Paso 2: Configurar el Gateway</h2>
<div class='content'><p>El gateway es responsable de componer los subgráficos en un único esquema federado.</p>
<h4>Configuración del Gateway</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gaW5kZXguanMKY29uc3QgeyBBcG9sbG9TZXJ2ZXIgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXInKTsKY29uc3QgeyBBcG9sbG9HYXRld2F5IH0gPSByZXF1aXJlKCdAYXBvbGxvL2dhdGV3YXknKTsKCmNvbnN0IGdhdGV3YXkgPSBuZXcgQXBvbGxvR2F0ZXdheSh7CiAgc2VydmljZUxpc3Q6IFsKICAgIHsgbmFtZTogJ3VzZXJzJywgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo0MDAxJyB9LAogICAgeyBuYW1lOiAncHJvZHVjdHMnLCB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjQwMDInIH0sCiAgXSwKfSk7Cgpjb25zdCBzZXJ2ZXIgPSBuZXcgQXBvbGxvU2VydmVyKHsgZ2F0ZXdheSwgc3Vic2NyaXB0aW9uczogZmFsc2UgfSk7CgpzZXJ2ZXIubGlzdGVuKCkudGhlbigoeyB1cmwgfSkgPT4gewogIGNvbnNvbGUubG9nKGDwn5qAIFNlcnZlciByZWFkeSBhdCAke3VybH1gKTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// index.js
const { ApolloServer } = require('apollo-server');
const { ApolloGateway } = require('@apollo/gateway');

const gateway = new ApolloGateway({
  serviceList: [
    { name: 'users', url: 'http://localhost:4001' },
    { name: 'products', url: 'http://localhost:4002' },
  ],
});

const server = new ApolloServer({ gateway, subscriptions: false });

server.listen().then(({ url }) =&gt; {
  console.log(`🚀 Server ready at ${url}`);
});</pre></div><div class='content'></div><h2>Paso 3: Ejecutar Servicios de Subgráficos</h2>
<div class='content'><p>Necesitas ejecutar cada servicio de subgráfico de manera independiente. Aquí tienes un ejemplo de cómo ejecutar el subgráfico de <code>users</code>.</p>
<h4>Servidor del Subgráfico de Usuarios</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gdXNlcnMtc2VydmVyLmpzCmNvbnN0IHsgQXBvbGxvU2VydmVyLCBncWwgfSA9IHJlcXVpcmUoJ2Fwb2xsby1zZXJ2ZXInKTsKY29uc3QgeyBidWlsZEZlZGVyYXRlZFNjaGVtYSB9ID0gcmVxdWlyZSgnQGFwb2xsby9mZWRlcmF0aW9uJyk7Cgpjb25zdCB0eXBlRGVmcyA9IGdxbGAKICB0eXBlIFVzZXIgQGtleShmaWVsZHM6ICJpZCIpIHsKICAgIGlkOiBJRCEKICAgIG5hbWU6IFN0cmluZyEKICAgIGVtYWlsOiBTdHJpbmchCiAgfQoKICB0eXBlIFF1ZXJ5IHsKICAgIG1lOiBVc2VyCiAgICB1c2VyKGlkOiBJRCEpOiBVc2VyCiAgfQpgOwoKY29uc3QgcmVzb2x2ZXJzID0gewogIFF1ZXJ5OiB7CiAgICBtZTogKCkgPT4gKHsgaWQ6ICcxJywgbmFtZTogJ0pvaG4gRG9lJywgZW1haWw6ICdqb2huQGV4YW1wbGUuY29tJyB9KSwKICAgIHVzZXI6IChfLCB7IGlkIH0pID0+ICh7IGlkLCBuYW1lOiAnSm9obiBEb2UnLCBlbWFpbDogJ2pvaG5AZXhhbXBsZS5jb20nIH0pLAogIH0sCiAgVXNlcjogewogICAgX19yZXNvbHZlUmVmZXJlbmNlOiAodXNlcikgPT4gKHsgaWQ6IHVzZXIuaWQsIG5hbWU6ICdKb2huIERvZScsIGVtYWlsOiAnam9obkBleGFtcGxlLmNvbScgfSksCiAgfSwKfTsKCmNvbnN0IHNlcnZlciA9IG5ldyBBcG9sbG9TZXJ2ZXIoewogIHNjaGVtYTogYnVpbGRGZWRlcmF0ZWRTY2hlbWEoW3sgdHlwZURlZnMsIHJlc29sdmVycyB9XSksCn0pOwoKc2VydmVyLmxpc3Rlbih7IHBvcnQ6IDQwMDEgfSkudGhlbigoeyB1cmwgfSkgPT4gewogIGNvbnNvbGUubG9nKGDwn5qAIFVzZXJzIHNlcnZpY2UgcmVhZHkgYXQgJHt1cmx9YCk7Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// users-server.js
const { ApolloServer, gql } = require('apollo-server');
const { buildFederatedSchema } = require('@apollo/federation');

const typeDefs = gql`
  type User @key(fields: &quot;id&quot;) {
    id: ID!
    name: String!
    email: String!
  }

  type Query {
    me: User
    user(id: ID!): User
  }
`;

const resolvers = {
  Query: {
    me: () =&gt; ({ id: '1', name: 'John Doe', email: 'john@example.com' }),
    user: (_, { id }) =&gt; ({ id, name: 'John Doe', email: 'john@example.com' }),
  },
  User: {
    __resolveReference: (user) =&gt; ({ id: user.id, name: 'John Doe', email: 'john@example.com' }),
  },
};

const server = new ApolloServer({
  schema: buildFederatedSchema([{ typeDefs, resolvers }]),
});

server.listen({ port: 4001 }).then(({ url }) =&gt; {
  console.log(`🚀 Users service ready at ${url}`);
});</pre></div><div class='content'><p>Repite pasos similares para el subgráfico de <code>products</code>.</p>
</div><h1>Conclusión</h1>
<div class='content'><p>La Federación de Esquemas en GraphQL te permite gestionar esquemas grandes de manera más efectiva al dividirlos en subgráficos más pequeños y gestionados de manera independiente. Este enfoque mejora la escalabilidad, modularidad y flexibilidad. Siguiendo los pasos descritos en este tema, puedes configurar un esquema federado que combine múltiples subgráficos en un único gráfico unificado.</p>
<p>Entender e implementar la Federación de Esquemas puede mejorar significativamente la mantenibilidad y escalabilidad de tus servicios GraphQL, especialmente en aplicaciones grandes y complejas.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='custom-scalars'>&#x25C4;Escalares Personalizados</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Federación de Esquemas</a>
	</div>
	<div class='col-4 text-end'>
					<a href='graphql-and-serverless'>GraphQL y Serverless &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
