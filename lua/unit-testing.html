<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pruebas Unitarias en Lua</title>

    <link rel="alternate" href="https://campusempresa.com/lua/unit-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/lua/unit-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/lua/unit-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/lua/unit-testing" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/lua/unit-testing" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='using-the-debug-library'>&#x25C4;Uso de la Biblioteca de Depuración</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Pruebas Unitarias en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='profiling-lua-code'>Perfilado de Código Lua &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Las pruebas unitarias son un aspecto crucial del desarrollo de software que asegura que las unidades individuales de código funcionen como se espera. En Lua, las pruebas unitarias se pueden realizar utilizando varias bibliotecas y marcos. Este tema te guiará desde los conceptos básicos hasta los avanzados de las pruebas unitarias en Lua.</p>
</div><h1>Introducción a las Pruebas Unitarias</h1>
<div class='content'><ul>
<li><strong>Definición</strong>: Las pruebas unitarias implican probar componentes o funciones individuales de un programa para asegurar que funcionen correctamente.</li>
<li><strong>Propósito</strong>: Detectar errores temprano, facilitar la refactorización del código y asegurar la fiabilidad del código.</li>
<li><strong>Beneficios</strong>:
<ul>
<li>Detección temprana de errores</li>
<li>Depuración simplificada</li>
<li>Mejora de la calidad del código</li>
<li>Documentación del comportamiento del código</li>
</ul>
</li>
</ul>
</div><h1>Configuración de un Entorno de Pruebas Unitarias en Lua</h1>
<div class='content'><p>Para realizar pruebas unitarias en Lua, necesitas configurar un marco de pruebas. Uno de los marcos más populares es <strong>LuaUnit</strong>.</p>
</div><h2>Instalación de LuaUnit</h2>
<div class='content'><p>Puedes instalar LuaUnit usando LuaRocks, un gestor de paquetes para Lua.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bHVhcm9ja3MgaW5zdGFsbCBsdWF1bml0"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>luarocks install luaunit</pre></div><div class='content'></div><h2>Estructura Básica de una Prueba LuaUnit</h2>
<div class='content'><p>Una prueba simple de LuaUnit implica definir funciones de prueba y ejecutarlas usando el marco LuaUnit.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gSW1wb3J0YXIgTHVhVW5pdApsb2NhbCBsdWF1bml0ID0gcmVxdWlyZSgnbHVhdW5pdCcpCgotLSBEZWZpbmlyIHVuYSBjbGFzZSBkZSBwcnVlYmEKVGVzdE1hdGggPSB7fQoKLS0gRGVmaW5pciB1bmEgZnVuY2nDs24gZGUgcHJ1ZWJhCmZ1bmN0aW9uIFRlc3RNYXRoOnRlc3RBZGRpdGlvbigpCiAgICBsb2NhbCByZXN1bHQgPSAxICsgMQogICAgbHVhdW5pdC5hc3NlcnRFcXVhbHMocmVzdWx0LCAyKQplbmQKCi0tIEVqZWN1dGFyIGxhcyBwcnVlYmFzCm9zLmV4aXQobHVhdW5pdC5MdWFVbml0LnJ1bigpKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Importar LuaUnit
local luaunit = require('luaunit')

-- Definir una clase de prueba
TestMath = {}

-- Definir una funci&oacute;n de prueba
function TestMath:testAddition()
    local result = 1 + 1
    luaunit.assertEquals(result, 2)
end

-- Ejecutar las pruebas
os.exit(luaunit.LuaUnit.run())</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>:
<ul>
<li><code>require('luaunit')</code>: Importa la biblioteca LuaUnit.</li>
<li><code>TestMath</code>: Una tabla que actúa como una clase de prueba.</li>
<li><code>TestMath:testAddition()</code>: Una función de prueba que verifica si 1 + 1 es igual a 2.</li>
<li><code>luaunit.assertEquals(result, 2)</code>: Asegura que el resultado sea igual a 2.</li>
<li><code>os.exit(luaunit.LuaUnit.run())</code>: Ejecuta todas las pruebas definidas.</li>
</ul>
</li>
</ul>
</div><h1>Escribiendo Pruebas Unitarias</h1>
<div class='content'></div><h2>Funciones de Prueba</h2>
<div class='content'><ul>
<li><strong>Convención de Nombres</strong>: Las funciones de prueba deben comenzar con <code>test</code> para ser reconocidas por LuaUnit.</li>
<li><strong>Aserciones</strong>: LuaUnit proporciona varias funciones de aserción para validar los resultados de las pruebas.</li>
</ul>
</div><h2>Aserciones Comunes</h2>
<div class='content'><p>| Función de Aserción          | Descripción                                      |
|-----------------------------|--------------------------------------------------|
| <code>luaunit.assertEquals(a, b)</code>| Asegura que <code>a</code> sea igual a <code>b</code>.                 |
| <code>luaunit.assertNotEquals(a, b)</code> | Asegura que <code>a</code> no sea igual a <code>b</code>.           |
| <code>luaunit.assertTrue(a)</code>     | Asegura que <code>a</code> sea verdadero.                   |
| <code>luaunit.assertFalse(a)</code>    | Asegura que <code>a</code> sea falso.                       |
| <code>luaunit.assertNil(a)</code>      | Asegura que <code>a</code> sea nil.                         |
| <code>luaunit.assertNotNil(a)</code>   | Asegura que <code>a</code> no sea nil.                      |</p>
</div><h2>Ejemplo: Probando una Función Lua</h2>
<div class='content'><p>Escribamos una prueba unitaria para una simple función Lua que calcula el factorial de un número.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gRnVuY2nDs24gZmFjdG9yaWFsCmZ1bmN0aW9uIGZhY3RvcmlhbChuKQogICAgaWYgbiA9PSAwIHRoZW4KICAgICAgICByZXR1cm4gMQogICAgZWxzZQogICAgICAgIHJldHVybiBuICogZmFjdG9yaWFsKG4gLSAxKQogICAgZW5kCmVuZAoKLS0gQ2xhc2UgZGUgcHJ1ZWJhIHBhcmEgbGEgZnVuY2nDs24gZmFjdG9yaWFsClRlc3RGYWN0b3JpYWwgPSB7fQoKZnVuY3Rpb24gVGVzdEZhY3RvcmlhbDp0ZXN0RmFjdG9yaWFsT2ZaZXJvKCkKICAgIGx1YXVuaXQuYXNzZXJ0RXF1YWxzKGZhY3RvcmlhbCgwKSwgMSkKZW5kCgpmdW5jdGlvbiBUZXN0RmFjdG9yaWFsOnRlc3RGYWN0b3JpYWxPZkZpdmUoKQogICAgbHVhdW5pdC5hc3NlcnRFcXVhbHMoZmFjdG9yaWFsKDUpLCAxMjApCmVuZAoKLS0gRWplY3V0YXIgbGFzIHBydWViYXMKb3MuZXhpdChsdWF1bml0Lkx1YVVuaXQucnVuKCkp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Funci&oacute;n factorial
function factorial(n)
    if n == 0 then
        return 1
    else
        return n * factorial(n - 1)
    end
end

-- Clase de prueba para la funci&oacute;n factorial
TestFactorial = {}

function TestFactorial:testFactorialOfZero()
    luaunit.assertEquals(factorial(0), 1)
end

function TestFactorial:testFactorialOfFive()
    luaunit.assertEquals(factorial(5), 120)
end

-- Ejecutar las pruebas
os.exit(luaunit.LuaUnit.run())</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>:
<ul>
<li><code>factorial(n)</code>: Una función recursiva para calcular el factorial de <code>n</code>.</li>
<li><code>TestFactorial:testFactorialOfZero()</code>: Prueba si el factorial de 0 es 1.</li>
<li><code>TestFactorial:testFactorialOfFive()</code>: Prueba si el factorial de 5 es 120.</li>
</ul>
</li>
</ul>
</div><h1>Conceptos Avanzados de Pruebas Unitarias</h1>
<div class='content'></div><h2>Fixtures de Prueba</h2>
<div class='content'><p>Los fixtures de prueba se utilizan para configurar y desmantelar el entorno antes y después de cada prueba.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VGVzdEZpeHR1cmVFeGFtcGxlID0ge30KCmZ1bmN0aW9uIFRlc3RGaXh0dXJlRXhhbXBsZTpzZXRVcCgpCiAgICAtLSBDw7NkaWdvIHBhcmEgY29uZmlndXJhciBlbCBlbnRvcm5vIGRlIHBydWViYQogICAgc2VsZi52YWx1ZSA9IDEwCmVuZAoKZnVuY3Rpb24gVGVzdEZpeHR1cmVFeGFtcGxlOnRlYXJEb3duKCkKICAgIC0tIEPDs2RpZ28gcGFyYSBsaW1waWFyIGVsIGVudG9ybm8gZGUgcHJ1ZWJhCiAgICBzZWxmLnZhbHVlID0gbmlsCmVuZAoKZnVuY3Rpb24gVGVzdEZpeHR1cmVFeGFtcGxlOnRlc3RWYWx1ZSgpCiAgICBsdWF1bml0LmFzc2VydEVxdWFscyhzZWxmLnZhbHVlLCAxMCkKZW5kCgpvcy5leGl0KGx1YXVuaXQuTHVhVW5pdC5ydW4oKSk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>TestFixtureExample = {}

function TestFixtureExample:setUp()
    -- C&oacute;digo para configurar el entorno de prueba
    self.value = 10
end

function TestFixtureExample:tearDown()
    -- C&oacute;digo para limpiar el entorno de prueba
    self.value = nil
end

function TestFixtureExample:testValue()
    luaunit.assertEquals(self.value, 10)
end

os.exit(luaunit.LuaUnit.run())</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>:
<ul>
<li><code>setUp()</code>: Inicializa el entorno de prueba.</li>
<li><code>tearDown()</code>: Limpia el entorno de prueba.</li>
<li><code>testValue()</code>: Prueba si el valor está correctamente configurado.</li>
</ul>
</li>
</ul>
</div><h2>Mocking y Stubbing</h2>
<div class='content'><p>El mocking y el stubbing son técnicas utilizadas para simular el comportamiento de objetos o funciones complejas.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gRnVuY2nDs24gb3JpZ2luYWwKZnVuY3Rpb24gZmV0Y2hEYXRhKCkKICAgIC0tIFNpbXVsYSBsYSBvYnRlbmNpw7NuIGRlIGRhdG9zIGRlIHVuYSBiYXNlIGRlIGRhdG9zCiAgICByZXR1cm4gInJlYWwgZGF0YSIKZW5kCgotLSBGdW5jacOzbiBtb2NrCmZ1bmN0aW9uIG1vY2tGZXRjaERhdGEoKQogICAgcmV0dXJuICJtb2NrIGRhdGEiCmVuZAoKLS0gQ2xhc2UgZGUgcHJ1ZWJhIHBhcmEgbW9ja2luZwpUZXN0TW9ja2luZyA9IHt9CgpmdW5jdGlvbiBUZXN0TW9ja2luZzp0ZXN0RmV0Y2hEYXRhKCkKICAgIC0tIFJlZW1wbGF6YSBmZXRjaERhdGEgY29uIG1vY2tGZXRjaERhdGEKICAgIGxvY2FsIG9yaWdpbmFsRmV0Y2hEYXRhID0gZmV0Y2hEYXRhCiAgICBmZXRjaERhdGEgPSBtb2NrRmV0Y2hEYXRhCgogICAgbHVhdW5pdC5hc3NlcnRFcXVhbHMoZmV0Y2hEYXRhKCksICJtb2NrIGRhdGEiKQoKICAgIC0tIFJlc3RhdXJhIGxhIGZ1bmNpw7NuIG9yaWdpbmFsCiAgICBmZXRjaERhdGEgPSBvcmlnaW5hbEZldGNoRGF0YQplbmQKCm9zLmV4aXQobHVhdW5pdC5MdWFVbml0LnJ1bigpKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Funci&oacute;n original
function fetchData()
    -- Simula la obtenci&oacute;n de datos de una base de datos
    return &quot;real data&quot;
end

-- Funci&oacute;n mock
function mockFetchData()
    return &quot;mock data&quot;
end

-- Clase de prueba para mocking
TestMocking = {}

function TestMocking:testFetchData()
    -- Reemplaza fetchData con mockFetchData
    local originalFetchData = fetchData
    fetchData = mockFetchData

    luaunit.assertEquals(fetchData(), &quot;mock data&quot;)

    -- Restaura la funci&oacute;n original
    fetchData = originalFetchData
end

os.exit(luaunit.LuaUnit.run())</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>:
<ul>
<li><code>mockFetchData()</code>: Una función mock que devuelve &quot;mock data&quot;.</li>
<li><code>TestMocking:testFetchData()</code>: Reemplaza <code>fetchData</code> con <code>mockFetchData</code> y prueba el comportamiento.</li>
</ul>
</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Las pruebas unitarias son una práctica esencial en el desarrollo de software que ayuda a asegurar la fiabilidad y calidad del código. Usando LuaUnit, puedes escribir y ejecutar pruebas para tu código Lua de manera eficiente. Este tema cubrió los conceptos básicos de la configuración de LuaUnit, la escritura de pruebas simples y avanzadas, y el uso de fixtures de prueba y técnicas de mocking. Con estas herramientas y técnicas, puedes desarrollar y mantener aplicaciones Lua robustas con confianza.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='using-the-debug-library'>&#x25C4;Uso de la Biblioteca de Depuración</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Pruebas Unitarias en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='profiling-lua-code'>Perfilado de Código Lua &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
