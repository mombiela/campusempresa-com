<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clausuras en Lua</title>

    <link rel="alternate" href="https://campusempresa.com/lua/closures" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/lua/closures" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/lua/closures" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/lua/closures" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/lua/closures" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='metatables-and-metamethods'>&#x25C4;Metatablas y Metamétodos</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Clausuras en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='coroutines'>Corutinas &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a las Clausuras</h1>
<div class='content'><p>Las clausuras son un concepto fundamental en Lua y en muchos otros lenguajes de programación. Permiten que las funciones capturen y retengan acceso a variables de su ámbito definitorio, incluso después de que ese ámbito haya terminado de ejecutarse.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Ámbito de la Función</strong>: La región del código donde se define una función y donde sus variables locales son accesibles.</li>
<li><strong>Ámbito Léxico</strong>: La capacidad de una función para acceder a variables de su ámbito definitorio.</li>
<li><strong>Clausura</strong>: Una función que retiene acceso a su ámbito léxico, incluso cuando la función se ejecuta fuera de ese ámbito.</li>
</ul>
</div><h1>Entendiendo las Clausuras con Ejemplos</h1>
<div class='content'></div><h2>Ejemplo Básico</h2>
<div class='content'><p>Comencemos con un ejemplo simple para ilustrar el concepto de clausuras en Lua.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gb3V0ZXJGdW5jdGlvbigpCiAgICBsb2NhbCBvdXRlclZhcmlhYmxlID0gIkkgYW0gZnJvbSB0aGUgb3V0ZXIgZnVuY3Rpb24iCiAgICAKICAgIGZ1bmN0aW9uIGlubmVyRnVuY3Rpb24oKQogICAgICAgIHByaW50KG91dGVyVmFyaWFibGUpCiAgICBlbmQKICAgIAogICAgcmV0dXJuIGlubmVyRnVuY3Rpb24KZW5kCgpsb2NhbCBteUNsb3N1cmUgPSBvdXRlckZ1bmN0aW9uKCkKbXlDbG9zdXJlKCkgIC0tIE91dHB1dDogSSBhbSBmcm9tIHRoZSBvdXRlciBmdW5jdGlvbg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function outerFunction()
    local outerVariable = &quot;I am from the outer function&quot;
    
    function innerFunction()
        print(outerVariable)
    end
    
    return innerFunction
end

local myClosure = outerFunction()
myClosure()  -- Output: I am from the outer function</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>:
<ul>
<li><code>outerFunction</code> define una variable local <code>outerVariable</code>.</li>
<li><code>innerFunction</code> se define dentro de <code>outerFunction</code> y accede a <code>outerVariable</code>.</li>
<li><code>outerFunction</code> devuelve <code>innerFunction</code>, que luego se asigna a <code>myClosure</code>.</li>
<li>Cuando se llama a <code>myClosure</code>, todavía tiene acceso a <code>outerVariable</code> de <code>outerFunction</code>.</li>
</ul>
</li>
</ul>
</div><h2>Caso de Uso Práctico</h2>
<div class='content'><p>Las clausuras se utilizan a menudo para crear funciones con estado privado.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gY3JlYXRlQ291bnRlcigpCiAgICBsb2NhbCBjb3VudCA9IDAKICAgIAogICAgcmV0dXJuIGZ1bmN0aW9uKCkKICAgICAgICBjb3VudCA9IGNvdW50ICsgMQogICAgICAgIHJldHVybiBjb3VudAogICAgZW5kCmVuZAoKbG9jYWwgY291bnRlcjEgPSBjcmVhdGVDb3VudGVyKCkKcHJpbnQoY291bnRlcjEoKSkgIC0tIE91dHB1dDogMQpwcmludChjb3VudGVyMSgpKSAgLS0gT3V0cHV0OiAyCgpsb2NhbCBjb3VudGVyMiA9IGNyZWF0ZUNvdW50ZXIoKQpwcmludChjb3VudGVyMigpKSAgLS0gT3V0cHV0OiAx"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function createCounter()
    local count = 0
    
    return function()
        count = count + 1
        return count
    end
end

local counter1 = createCounter()
print(counter1())  -- Output: 1
print(counter1())  -- Output: 2

local counter2 = createCounter()
print(counter2())  -- Output: 1</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>:
<ul>
<li><code>createCounter</code> inicializa una variable local <code>count</code>.</li>
<li>Devuelve una función anónima que incrementa y devuelve <code>count</code>.</li>
<li>Cada llamada a <code>createCounter</code> crea una nueva clausura con su propia variable <code>count</code>.</li>
</ul>
</li>
</ul>
</div><h1>Uso Avanzado de Clausuras</h1>
<div class='content'></div><h2>Clausuras en Iteradores</h2>
<div class='content'><p>Las clausuras se pueden usar para crear iteradores personalizados.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gcmFuZ2VJdGVyYXRvcihzdGFydCwgc3RvcCkKICAgIGxvY2FsIGN1cnJlbnQgPSBzdGFydCAtIDEKICAgIAogICAgcmV0dXJuIGZ1bmN0aW9uKCkKICAgICAgICBjdXJyZW50ID0gY3VycmVudCArIDEKICAgICAgICBpZiBjdXJyZW50IDw9IHN0b3AgdGhlbgogICAgICAgICAgICByZXR1cm4gY3VycmVudAogICAgICAgIGVuZAogICAgZW5kCmVuZAoKZm9yIG51bWJlciBpbiByYW5nZUl0ZXJhdG9yKDEsIDUpIGRvCiAgICBwcmludChudW1iZXIpICAtLSBPdXRwdXQ6IDEgMiAzIDQgNQplbmQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function rangeIterator(start, stop)
    local current = start - 1
    
    return function()
        current = current + 1
        if current &lt;= stop then
            return current
        end
    end
end

for number in rangeIterator(1, 5) do
    print(number)  -- Output: 1 2 3 4 5
end</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>:
<ul>
<li><code>rangeIterator</code> toma valores <code>start</code> y <code>stop</code>.</li>
<li>Devuelve una clausura que incrementa <code>current</code> y lo devuelve hasta que <code>current</code> exceda <code>stop</code>.</li>
<li>El bucle <code>for</code> utiliza este iterador para imprimir números del 1 al 5.</li>
</ul>
</li>
</ul>
</div><h2>Clausuras para Encapsulación</h2>
<div class='content'><p>Las clausuras pueden encapsular estado y proporcionar acceso controlado a él.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gY3JlYXRlQWNjb3VudChpbml0aWFsQmFsYW5jZSkKICAgIGxvY2FsIGJhbGFuY2UgPSBpbml0aWFsQmFsYW5jZQogICAgCiAgICByZXR1cm4gewogICAgICAgIGRlcG9zaXQgPSBmdW5jdGlvbihhbW91bnQpCiAgICAgICAgICAgIGJhbGFuY2UgPSBiYWxhbmNlICsgYW1vdW50CiAgICAgICAgICAgIHJldHVybiBiYWxhbmNlCiAgICAgICAgZW5kLAogICAgICAgIHdpdGhkcmF3ID0gZnVuY3Rpb24oYW1vdW50KQogICAgICAgICAgICBpZiBhbW91bnQgPD0gYmFsYW5jZSB0aGVuCiAgICAgICAgICAgICAgICBiYWxhbmNlID0gYmFsYW5jZSAtIGFtb3VudAogICAgICAgICAgICAgICAgcmV0dXJuIGJhbGFuY2UKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcmV0dXJuICJJbnN1ZmZpY2llbnQgZnVuZHMiCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCwKICAgICAgICBnZXRCYWxhbmNlID0gZnVuY3Rpb24oKQogICAgICAgICAgICByZXR1cm4gYmFsYW5jZQogICAgICAgIGVuZAogICAgfQplbmQKCmxvY2FsIGFjY291bnQgPSBjcmVhdGVBY2NvdW50KDEwMCkKcHJpbnQoYWNjb3VudC5kZXBvc2l0KDUwKSkgICAgLS0gT3V0cHV0OiAxNTAKcHJpbnQoYWNjb3VudC53aXRoZHJhdygzMCkpICAgLS0gT3V0cHV0OiAxMjAKcHJpbnQoYWNjb3VudC5nZXRCYWxhbmNlKCkpICAgLS0gT3V0cHV0OiAxMjA="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function createAccount(initialBalance)
    local balance = initialBalance
    
    return {
        deposit = function(amount)
            balance = balance + amount
            return balance
        end,
        withdraw = function(amount)
            if amount &lt;= balance then
                balance = balance - amount
                return balance
            else
                return &quot;Insufficient funds&quot;
            end
        end,
        getBalance = function()
            return balance
        end
    }
end

local account = createAccount(100)
print(account.deposit(50))    -- Output: 150
print(account.withdraw(30))   -- Output: 120
print(account.getBalance())   -- Output: 120</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>:
<ul>
<li><code>createAccount</code> inicializa una variable local <code>balance</code>.</li>
<li>Devuelve una tabla con funciones para <code>deposit</code>, <code>withdraw</code> y <code>getBalance</code>.</li>
<li>Estas funciones forman clausuras sobre la variable <code>balance</code>, permitiendo acceso controlado a ella.</li>
</ul>
</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Las clausuras son una característica poderosa en Lua que permiten que las funciones capturen y retengan acceso a variables de su ámbito definitorio. Permiten una variedad de técnicas de programación, desde la encapsulación simple hasta patrones de iteradores complejos. Entender las clausuras mejorará significativamente tu capacidad para escribir código Lua flexible y mantenible.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='metatables-and-metamethods'>&#x25C4;Metatablas y Metamétodos</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Clausuras en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='coroutines'>Corutinas &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
