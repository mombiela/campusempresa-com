<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uso de Lua con Otros Lenguajes</title>

    <link rel="alternate" href="https://campusempresa.com/lua/using-lua-with-other-languages" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/lua/using-lua-with-other-languages" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/lua/using-lua-with-other-languages" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/lua/using-lua-with-other-languages" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/lua/using-lua-with-other-languages" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='calling-c-from-lua'>&#x25C4;Llamar a C desde Lua</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Uso de Lua con Otros Lenguajes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-simple-game'>Construcción de un Juego Simple &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>Lua es un lenguaje de scripting ligero y de alto nivel diseñado para su uso embebido en aplicaciones. Una de sus características más poderosas es su capacidad para integrarse sin problemas con otros lenguajes de programación. Esta sección cubrirá cómo usar Lua con otros lenguajes, centrándose en C/C++, Python y Java.</p>
</div><h1>Lua con C/C++</h1>
<div class='content'><p>Lua fue diseñado para ser embebido en aplicaciones C/C++. Esto lo convierte en una elección natural para extender la funcionalidad de estos lenguajes.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Embeber Lua en C/C++</strong>: Integrar Lua en una aplicación C/C++ para ejecutar scripts Lua.</li>
<li><strong>Llamar a C/C++ desde Lua</strong>: Extender Lua llamando a funciones C/C++ desde scripts Lua.</li>
<li><strong>API de C de Lua</strong>: El conjunto de funciones proporcionadas por Lua para interactuar con C/C++.</li>
</ul>
</div><h2>Ejemplo: Embeber Lua en C</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGx1YS5oPgojaW5jbHVkZSA8bGF1eGxpYi5oPgojaW5jbHVkZSA8bHVhbGliLmg+CgppbnQgbWFpbih2b2lkKSB7CiAgICBsdWFfU3RhdGUgKkwgPSBsdWFMX25ld3N0YXRlKCk7ICAvLyBDcmVhciB1biBudWV2byBlc3RhZG8gTHVhCiAgICBsdWFMX29wZW5saWJzKEwpOyAgICAgICAgICAgICAgICAvLyBBYnJpciBiaWJsaW90ZWNhcyBlc3TDoW5kYXIKCiAgICBpZiAobHVhTF9sb2FkZmlsZShMLCAic2NyaXB0Lmx1YSIpIHx8IGx1YV9wY2FsbChMLCAwLCAwLCAwKSkgewogICAgICAgIGZwcmludGYoc3RkZXJyLCAiRXJyb3I6ICVzXG4iLCBsdWFfdG9zdHJpbmcoTCwgLTEpKTsKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICBsdWFfY2xvc2UoTCk7ICAvLyBDZXJyYXIgZWwgZXN0YWRvIEx1YQogICAgcmV0dXJuIDA7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;lua.h&gt;
#include &lt;lauxlib.h&gt;
#include &lt;lualib.h&gt;

int main(void) {
    lua_State *L = luaL_newstate();  // Crear un nuevo estado Lua
    luaL_openlibs(L);                // Abrir bibliotecas est&aacute;ndar

    if (luaL_loadfile(L, &quot;script.lua&quot;) || lua_pcall(L, 0, 0, 0)) {
        fprintf(stderr, &quot;Error: %s\n&quot;, lua_tostring(L, -1));
        return 1;
    }

    lua_close(L);  // Cerrar el estado Lua
    return 0;
}</pre></div><div class='content'><p>En este ejemplo:</p>
<ul>
<li>Creamos un nuevo estado Lua con <code>luaL_newstate()</code>.</li>
<li>Cargamos y ejecutamos un script Lua (<code>script.lua</code>) usando <code>luaL_loadfile()</code> y <code>lua_pcall()</code>.</li>
<li>Manejamos errores verificando los valores de retorno de <code>luaL_loadfile()</code> y <code>lua_pcall()</code>.</li>
<li>Finalmente, cerramos el estado Lua con <code>lua_close()</code>.</li>
</ul>
</div><h2>Ejemplo: Llamar a C desde Lua</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGx1YS5oPgojaW5jbHVkZSA8bGF1eGxpYi5oPgojaW5jbHVkZSA8bHVhbGliLmg+CgpzdGF0aWMgaW50IGNfYWRkKGx1YV9TdGF0ZSAqTCkgewogICAgaW50IGEgPSBsdWFMX2NoZWNraW50ZWdlcihMLCAxKTsKICAgIGludCBiID0gbHVhTF9jaGVja2ludGVnZXIoTCwgMik7CiAgICBsdWFfcHVzaGludGVnZXIoTCwgYSArIGIpOwogICAgcmV0dXJuIDE7ICAvLyBOw7ptZXJvIGRlIHZhbG9yZXMgZGUgcmV0b3Jubwp9CgppbnQgbWFpbih2b2lkKSB7CiAgICBsdWFfU3RhdGUgKkwgPSBsdWFMX25ld3N0YXRlKCk7CiAgICBsdWFMX29wZW5saWJzKEwpOwoKICAgIGx1YV9yZWdpc3RlcihMLCAiY19hZGQiLCBjX2FkZCk7ICAvLyBSZWdpc3RyYXIgbGEgZnVuY2nDs24gQwoKICAgIGx1YUxfZG9zdHJpbmcoTCwgInByaW50KGNfYWRkKDIsIDMpKSIpOyAgLy8gTGxhbWFyIGEgbGEgZnVuY2nDs24gQyBkZXNkZSBMdWEKCiAgICBsdWFfY2xvc2UoTCk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;lua.h&gt;
#include &lt;lauxlib.h&gt;
#include &lt;lualib.h&gt;

static int c_add(lua_State *L) {
    int a = luaL_checkinteger(L, 1);
    int b = luaL_checkinteger(L, 2);
    lua_pushinteger(L, a + b);
    return 1;  // N&uacute;mero de valores de retorno
}

int main(void) {
    lua_State *L = luaL_newstate();
    luaL_openlibs(L);

    lua_register(L, &quot;c_add&quot;, c_add);  // Registrar la funci&oacute;n C

    luaL_dostring(L, &quot;print(c_add(2, 3))&quot;);  // Llamar a la funci&oacute;n C desde Lua

    lua_close(L);
    return 0;
}</pre></div><div class='content'><p>En este ejemplo:</p>
<ul>
<li>Definimos una función C <code>c_add</code> que suma dos enteros.</li>
<li>Registramos esta función con Lua usando <code>lua_register()</code>.</li>
<li>Llamamos a la función C desde Lua usando <code>luaL_dostring()</code>.</li>
</ul>
</div><h1>Lua con Python</h1>
<div class='content'><p>Aunque Lua y Python son ambos lenguajes de scripting de alto nivel, pueden usarse juntos de varias maneras.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Interfaz Lua con Python</strong>: Usar bibliotecas para llamar a Lua desde Python y viceversa.</li>
<li><strong>Bibliotecas</strong>: <code>lupa</code> es una biblioteca popular para integrar Lua con Python.</li>
</ul>
</div><h2>Ejemplo: Usar Lupa</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBsdXBhIGltcG9ydCBMdWFSdW50aW1lCgpsdWEgPSBMdWFSdW50aW1lKHVucGFja19yZXR1cm5lZF90dXBsZXM9VHJ1ZSkKbHVhX2Z1bmMgPSBsdWEuZXZhbCgnJycKICAgIGZ1bmN0aW9uKGEsIGIpCiAgICAgICAgcmV0dXJuIGEgKyBiCiAgICBlbmQKJycnKQoKcmVzdWx0ID0gbHVhX2Z1bmMoMiwgMykKcHJpbnQocmVzdWx0KSAgIyBTYWxpZGE6IDU="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from lupa import LuaRuntime

lua = LuaRuntime(unpack_returned_tuples=True)
lua_func = lua.eval('''
    function(a, b)
        return a + b
    end
''')

result = lua_func(2, 3)
print(result)  # Salida: 5</pre></div><div class='content'><p>En este ejemplo:</p>
<ul>
<li>Creamos un entorno de ejecución Lua usando <code>LuaRuntime</code>.</li>
<li>Definimos una función Lua que suma dos números usando <code>lua.eval()</code>.</li>
<li>Llamamos a la función Lua desde Python e imprimimos el resultado.</li>
</ul>
</div><h1>Lua con Java</h1>
<div class='content'><p>Integrar Lua con Java puede lograrse usando bibliotecas como <code>luaj</code>.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Interfaz Lua con Java</strong>: Usar bibliotecas para llamar a Lua desde Java y viceversa.</li>
<li><strong>Bibliotecas</strong>: <code>luaj</code> es una biblioteca popular para integrar Lua con Java.</li>
</ul>
</div><h2>Ejemplo: Usar Luaj</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5sdWFqLnZtMi5HbG9iYWxzOwppbXBvcnQgb3JnLmx1YWoudm0yLkx1YVZhbHVlOwppbXBvcnQgb3JnLmx1YWoudm0yLmxpYi5qc2UuSnNlUGxhdGZvcm07CgpwdWJsaWMgY2xhc3MgTWFpbiB7CiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgR2xvYmFscyBnbG9iYWxzID0gSnNlUGxhdGZvcm0uc3RhbmRhcmRHbG9iYWxzKCk7CiAgICAgICAgTHVhVmFsdWUgY2h1bmsgPSBnbG9iYWxzLmxvYWQoInJldHVybiAyICsgMyIpOwogICAgICAgIEx1YVZhbHVlIHJlc3VsdCA9IGNodW5rLmNhbGwoKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4ocmVzdWx0LnRvaW50KCkpOyAgLy8gU2FsaWRhOiA1CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.luaj.vm2.Globals;
import org.luaj.vm2.LuaValue;
import org.luaj.vm2.lib.jse.JsePlatform;

public class Main {
    public static void main(String[] args) {
        Globals globals = JsePlatform.standardGlobals();
        LuaValue chunk = globals.load(&quot;return 2 + 3&quot;);
        LuaValue result = chunk.call();
        System.out.println(result.toint());  // Salida: 5
    }
}</pre></div><div class='content'><p>En este ejemplo:</p>
<ul>
<li>Creamos un entorno Lua usando <code>JsePlatform.standardGlobals()</code>.</li>
<li>Cargamos y ejecutamos un script Lua usando <code>globals.load()</code> y <code>chunk.call()</code>.</li>
<li>Imprimimos el resultado del script Lua.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Integrar Lua con otros lenguajes como C/C++, Python y Java puede mejorar significativamente la funcionalidad y flexibilidad de tus aplicaciones. Al embeber Lua, llamar a funciones Lua desde otros lenguajes y viceversa, puedes aprovechar las fortalezas tanto de Lua como del lenguaje anfitrión. Esta sección ha proporcionado una introducción básica y ejemplos para comenzar a usar Lua junto con otros lenguajes de programación.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='calling-c-from-lua'>&#x25C4;Llamar a C desde Lua</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Uso de Lua con Otros Lenguajes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-simple-game'>Construcción de un Juego Simple &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
