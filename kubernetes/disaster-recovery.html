<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recuperación ante Desastres en Kubernetes</title>

    <link rel="alternate" href="https://campusempresa.com/kubernetes/disaster-recovery" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/kubernetes/disaster-recovery" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/kubernetes/disaster-recovery" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/kubernetes/disaster-recovery" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/kubernetes/disaster-recovery" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='high-availability'>&#x25C4;Alta Disponibilidad</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Recuperación ante Desastres en Kubernetes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='cost-management'>Gestión de Costos &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La recuperación ante desastres es un aspecto crítico de la gestión de clústeres de Kubernetes, asegurando que tus aplicaciones puedan recuperarse de fallos y continuar operando sin problemas. Este tema te guiará a través de los conceptos esenciales, estrategias y herramientas para implementar la recuperación ante desastres en Kubernetes, desde niveles principiantes hasta avanzados.</p>
</div><h1>Introducción a la Recuperación ante Desastres</h1>
<div class='content'><p>La recuperación ante desastres implica prepararse y recuperarse de eventos inesperados que pueden causar interrupciones significativas en tus clústeres de Kubernetes. Estos eventos pueden incluir fallos de hardware, cortes de red, errores de software e incluso desastres naturales.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Alta Disponibilidad (HA):</strong> Asegurar que tus aplicaciones y servicios estén siempre disponibles, incluso en caso de fallo.</li>
<li><strong>Copia de Seguridad y Restauración:</strong> Guardar regularmente copias de tus datos y configuraciones para que puedan ser restaurados si es necesario.</li>
<li><strong>Conmutación por Error:</strong> Cambiar automáticamente a un sistema de reserva cuando el sistema principal falla.</li>
<li><strong>Replicación:</strong> Mantener múltiples copias de tus datos en diferentes ubicaciones para prevenir la pérdida de datos.</li>
</ul>
</div><h1>Copia de Seguridad y Restauración</h1>
<div class='content'><p>Hacer copias de seguridad de tu clúster de Kubernetes es esencial para la recuperación ante desastres. Esta sección cubre los conceptos básicos de la creación y restauración de copias de seguridad.</p>
</div><h2>Haciendo Copia de Seguridad de etcd</h2>
<div class='content'><p><code>etcd</code> es el almacén de valores clave utilizado por Kubernetes para almacenar todos los datos del clúster. Hacer una copia de seguridad de <code>etcd</code> es crucial para la recuperación ante desastres.</p>
<h4>Ejemplo: Haciendo Copia de Seguridad de etcd</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVRDRENUTF9BUEk9MyBldGNkY3RsIHNuYXBzaG90IHNhdmUgc25hcHNob3QuZGIgXAogIC0tZW5kcG9pbnRzPWh0dHBzOi8vMTI3LjAuMC4xOjIzNzkgXAogIC0tY2FjZXJ0PS9ldGMva3ViZXJuZXRlcy9wa2kvZXRjZC9jYS5jcnQgXAogIC0tY2VydD0vZXRjL2t1YmVybmV0ZXMvcGtpL2V0Y2Qvc2VydmVyLmNydCBcCiAgLS1rZXk9L2V0Yy9rdWJlcm5ldGVzL3BraS9ldGNkL3NlcnZlci5rZXk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ETCDCTL_API=3 etcdctl snapshot save snapshot.db \
  --endpoints=https://127.0.0.1:2379 \
  --cacert=/etc/kubernetes/pki/etcd/ca.crt \
  --cert=/etc/kubernetes/pki/etcd/server.crt \
  --key=/etc/kubernetes/pki/etcd/server.key</pre></div><div class='content'><h4>Explicación:</h4>
<ul>
<li><code>ETCDCTL_API=3</code>: Especifica la versión de la API de etcd.</li>
<li><code>etcdctl snapshot save snapshot.db</code>: Comando para guardar la instantánea en un archivo llamado <code>snapshot.db</code>.</li>
<li><code>--endpoints</code>: Los puntos finales del servidor etcd.</li>
<li><code>--cacert</code>, <code>--cert</code>, <code>--key</code>: Rutas a los archivos de certificado para comunicación segura.</li>
</ul>
</div><h2>Restaurando etcd</h2>
<div class='content'><p>Para restaurar una copia de seguridad de etcd, necesitas detener el servicio etcd, restaurar la instantánea y luego reiniciar el servicio.</p>
<h4>Ejemplo: Restaurando etcd</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVRDRENUTF9BUEk9MyBldGNkY3RsIHNuYXBzaG90IHJlc3RvcmUgc25hcHNob3QuZGIgXAogIC0tZGF0YS1kaXI9L3Zhci9saWIvZXRjZC1mcm9tLWJhY2t1cA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ETCDCTL_API=3 etcdctl snapshot restore snapshot.db \
  --data-dir=/var/lib/etcd-from-backup</pre></div><div class='content'><h4>Explicación:</h4>
<ul>
<li><code>etcdctl snapshot restore snapshot.db</code>: Comando para restaurar la instantánea desde el archivo <code>snapshot.db</code>.</li>
<li><code>--data-dir</code>: Directorio donde se almacenarán los datos restaurados.</li>
</ul>
</div><h1>Alta Disponibilidad (HA)</h1>
<div class='content'><p>La alta disponibilidad asegura que tu clúster de Kubernetes permanezca operativo incluso si algunos componentes fallan. Esta sección cubre estrategias para lograr HA.</p>
</div><h2>Configuración Multi-Master</h2>
<div class='content'><p>Una configuración multi-master implica ejecutar múltiples nodos master para evitar un único punto de fallo.</p>
<h4>Ejemplo: Configuración de Nodos Multi-Master</h4>
<ol>
<li>
<p><strong>Provisión de Múltiples Nodos Master:</strong></p>
<ul>
<li>Crea al menos tres nodos master para asegurar el quórum.</li>
</ul>
</li>
<li>
<p><strong>Configura el Balanceador de Carga:</strong></p>
<ul>
<li>Usa un balanceador de carga para distribuir el tráfico entre los nodos master.</li>
</ul>
</li>
<li>
<p><strong>Unir Nodos Worker:</strong></p>
<ul>
<li>Une los nodos worker al clúster usando la dirección del balanceador de carga.</li>
</ul>
</li>
</ol>
</div><h2>Ejemplo de Configuración</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjoga3ViZWFkbS5rOHMuaW8vdjFiZXRhMgpraW5kOiBDbHVzdGVyQ29uZmlndXJhdGlvbgpjb250cm9sUGxhbmVFbmRwb2ludDogIkxPQURfQkFMQU5DRVJfRE5TOkxPQURfQkFMQU5DRVJfUE9SVCI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: kubeadm.k8s.io/v1beta2
kind: ClusterConfiguration
controlPlaneEndpoint: &quot;LOAD_BALANCER_DNS:LOAD_BALANCER_PORT&quot;</pre></div><div class='content'><h4>Explicación:</h4>
<ul>
<li><code>controlPlaneEndpoint</code>: Especifica la dirección del balanceador de carga que distribuye el tráfico a los nodos master.</li>
</ul>
</div><h1>Conmutación por Error y Replicación</h1>
<div class='content'><p>La conmutación por error y la replicación son esenciales para asegurar que tus aplicaciones puedan seguir funcionando en caso de fallo.</p>
</div><h2>StatefulSets para Replicación</h2>
<div class='content'><p>StatefulSets gestionan el despliegue y escalado de un conjunto de Pods, proporcionando garantías sobre el orden y la unicidad de estos Pods.</p>
<h4>Ejemplo: Configuración de StatefulSet</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBwcy92MQpraW5kOiBTdGF0ZWZ1bFNldAptZXRhZGF0YToKICBuYW1lOiB3ZWIKc3BlYzoKICBzZXJ2aWNlTmFtZTogIm5naW54IgogIHJlcGxpY2FzOiAzCiAgc2VsZWN0b3I6CiAgICBtYXRjaExhYmVsczoKICAgICAgYXBwOiBuZ2lueAogIHRlbXBsYXRlOgogICAgbWV0YWRhdGE6CiAgICAgIGxhYmVsczoKICAgICAgICBhcHA6IG5naW54CiAgICBzcGVjOgogICAgICBjb250YWluZXJzOgogICAgICAtIG5hbWU6IG5naW54CiAgICAgICAgaW1hZ2U6IG5naW54OjEuMTQuMgogICAgICAgIHBvcnRzOgogICAgICAgIC0gY29udGFpbmVyUG9ydDogODAKICB2b2x1bWVDbGFpbVRlbXBsYXRlczoKICAtIG1ldGFkYXRhOgogICAgICBuYW1lOiB3d3cKICAgIHNwZWM6CiAgICAgIGFjY2Vzc01vZGVzOiBbICJSZWFkV3JpdGVPbmNlIiBdCiAgICAgIHJlc291cmNlczoKICAgICAgICByZXF1ZXN0czoKICAgICAgICAgIHN0b3JhZ2U6IDFHaQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: web
spec:
  serviceName: &quot;nginx&quot;
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80
  volumeClaimTemplates:
  - metadata:
      name: www
    spec:
      accessModes: [ &quot;ReadWriteOnce&quot; ]
      resources:
        requests:
          storage: 1Gi</pre></div><div class='content'><h4>Explicación:</h4>
<ul>
<li><code>replicas</code>: Número de Pods deseados.</li>
<li><code>volumeClaimTemplates</code>: Define los requisitos de almacenamiento para cada Pod.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>La recuperación ante desastres en Kubernetes implica una combinación de estrategias y herramientas para asegurar que tus aplicaciones puedan recuperarse de fallos y continuar operando. Al entender e implementar procedimientos de copia de seguridad y restauración, configuraciones de alta disponibilidad y mecanismos de conmutación por error, puedes construir clústeres de Kubernetes resilientes capaces de soportar varios tipos de interrupciones.</p>
</div><h2>Resumen</h2>
<div class='content'><ul>
<li><strong>Copia de Seguridad y Restauración:</strong> Haz copias de seguridad regularmente de <code>etcd</code> y conoce cómo restaurarlas.</li>
<li><strong>Alta Disponibilidad:</strong> Usa configuraciones multi-master y balanceadores de carga para evitar puntos únicos de fallo.</li>
<li><strong>Conmutación por Error y Replicación:</strong> Usa StatefulSets y otras características de Kubernetes para asegurar la replicación de datos y la conmutación por error automática.</li>
</ul>
<p>Siguiendo estas prácticas, puedes mejorar significativamente la resiliencia y la fiabilidad de tus despliegues de Kubernetes.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='high-availability'>&#x25C4;Alta Disponibilidad</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Recuperación ante Desastres en Kubernetes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='cost-management'>Gestión de Costos &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
