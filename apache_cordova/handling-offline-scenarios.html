<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manejo de Escenarios Sin Conexión</title>

    <link rel="alternate" href="https://campusempresa.com/apache_cordova/handling-offline-scenarios" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/apache_cordova/handling-offline-scenarios" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/apache_cordova/handling-offline-scenarios" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/apache_cordova/handling-offline-scenarios" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/apache_cordova/handling-offline-scenarios" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='deploying-to-app-stores'>&#x25C4;Desplegando en Tiendas de Aplicaciones</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Manejo de Escenarios Sin Conexión</a>
	</div>
	<div class='col-4 text-end'>
					<a href='security-best-practices'>Mejores Prácticas de Seguridad &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Manejar escenarios sin conexión es crucial para crear aplicaciones móviles robustas. En esta sección, exploraremos cómo gestionar la funcionalidad sin conexión en aplicaciones Apache Cordova, asegurando una experiencia de usuario fluida incluso cuando no hay conexión a internet.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Detección de Desconexión</strong>: Identificar cuándo la aplicación está sin conexión.</li>
<li><strong>Almacenamiento de Datos</strong>: Almacenar datos localmente para ser usados cuando no hay conexión.</li>
<li><strong>Sincronización</strong>: Sincronizar datos entre el almacenamiento local y el servidor cuando se restaura la conexión.</li>
<li><strong>Experiencia del Usuario</strong>: Informar a los usuarios sobre el estado sin conexión y proporcionar una experiencia fluida.</li>
</ul>
</div><h1>Detección de Desconexión</h1>
<div class='content'><p>Para manejar escenarios sin conexión, el primer paso es detectar cuándo la aplicación está sin conexión. Apache Cordova proporciona el plugin <code>cordova-plugin-network-information</code> para ayudar con esto.</p>
</div><h2>Instalación</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29yZG92YSBwbHVnaW4gYWRkIGNvcmRvdmEtcGx1Z2luLW5ldHdvcmstaW5mb3JtYXRpb24="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cordova plugin add cordova-plugin-network-information</pre></div><div class='content'></div><h2>Uso</h2>
<div class='content'><p>Puedes usar el plugin para verificar el estado de la red y escuchar cambios.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIHVwZGF0ZU5ldHdvcmtTdGF0dXMoKSB7CiAgICAgICAgdmFyIG5ldHdvcmtTdGF0ZSA9IG5hdmlnYXRvci5jb25uZWN0aW9uLnR5cGU7CiAgICAgICAgaWYgKG5ldHdvcmtTdGF0ZSA9PT0gQ29ubmVjdGlvbi5OT05FKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFc3TDoXMgc2luIGNvbmV4acOzbiIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFc3TDoXMgZW4gbMOtbmVhIik7CiAgICAgICAgfQogICAgfQoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm9mZmxpbmUiLCB1cGRhdGVOZXR3b3JrU3RhdHVzLCBmYWxzZSk7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJvbmxpbmUiLCB1cGRhdGVOZXR3b3JrU3RhdHVzLCBmYWxzZSk7CgogICAgLy8gVmVyaWZpY2FjacOzbiBpbmljaWFsCiAgICB1cGRhdGVOZXR3b3JrU3RhdHVzKCk7Cn0sIGZhbHNlKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, function() {
    function updateNetworkStatus() {
        var networkState = navigator.connection.type;
        if (networkState === Connection.NONE) {
            console.log(&quot;Est&aacute;s sin conexi&oacute;n&quot;);
        } else {
            console.log(&quot;Est&aacute;s en l&iacute;nea&quot;);
        }
    }

    document.addEventListener(&quot;offline&quot;, updateNetworkStatus, false);
    document.addEventListener(&quot;online&quot;, updateNetworkStatus, false);

    // Verificaci&oacute;n inicial
    updateNetworkStatus();
}, false);</pre></div><div class='content'></div><h1>Almacenamiento de Datos</h1>
<div class='content'><p>Cuando la aplicación está sin conexión, necesitas almacenar datos localmente. Puedes usar varias opciones de almacenamiento como LocalStorage, IndexedDB o SQLite.</p>
</div><h2>Ejemplo de LocalStorage</h2>
<div class='content'><p>LocalStorage es fácil de usar pero tiene capacidad de almacenamiento limitada.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gR3VhcmRhciBkYXRvcwpsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgia2V5IiwgInZhbHVlIik7CgovLyBSZWN1cGVyYXIgZGF0b3MKdmFyIHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImtleSIpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Guardar datos
localStorage.setItem(&quot;key&quot;, &quot;value&quot;);

// Recuperar datos
var value = localStorage.getItem(&quot;key&quot;);</pre></div><div class='content'></div><h2>Ejemplo de SQLite</h2>
<div class='content'><p>Para necesidades de almacenamiento de datos más complejas, puedes usar el plugin <code>cordova-sqlite-storage</code>.</p>
<h4>Instalación</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29yZG92YSBwbHVnaW4gYWRkIGNvcmRvdmEtc3FsaXRlLXN0b3JhZ2U="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cordova plugin add cordova-sqlite-storage</pre></div><div class='content'><h4>Uso</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBmdW5jdGlvbigpIHsKICAgIHZhciBkYiA9IHdpbmRvdy5zcWxpdGVQbHVnaW4ub3BlbkRhdGFiYXNlKHtuYW1lOiAnbXkuZGInLCBsb2NhdGlvbjogJ2RlZmF1bHQnfSk7CgogICAgZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24odHgpIHsKICAgICAgICB0eC5leGVjdXRlU3FsKCdDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBNeVRhYmxlIChpZCBpbnRlZ2VyIHByaW1hcnkga2V5LCBkYXRhIHRleHQpJyk7CiAgICAgICAgdHguZXhlY3V0ZVNxbCgnSU5TRVJUIElOVE8gTXlUYWJsZSAoZGF0YSkgVkFMVUVTICg/KScsIFsnRGF0b3MgZGUgZWplbXBsbyddKTsKICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0VSUk9SIGVuIGxhIHRyYW5zYWNjacOzbjogJyArIGVycm9yLm1lc3NhZ2UpOwogICAgfSwgZnVuY3Rpb24oKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0Jhc2UgZGUgZGF0b3MgcG9ibGFkYSBjb3JyZWN0YW1lbnRlJyk7CiAgICB9KTsKfSwgZmFsc2UpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, function() {
    var db = window.sqlitePlugin.openDatabase({name: 'my.db', location: 'default'});

    db.transaction(function(tx) {
        tx.executeSql('CREATE TABLE IF NOT EXISTS MyTable (id integer primary key, data text)');
        tx.executeSql('INSERT INTO MyTable (data) VALUES (?)', ['Datos de ejemplo']);
    }, function(error) {
        console.log('ERROR en la transacci&oacute;n: ' + error.message);
    }, function() {
        console.log('Base de datos poblada correctamente');
    });
}, false);</pre></div><div class='content'></div><h1>Sincronización</h1>
<div class='content'><p>Una vez que se restaura la conexión, necesitas sincronizar los datos almacenados localmente con el servidor.</p>
</div><h2>Ejemplo</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gc3luY0RhdGEoKSB7CiAgICB2YXIgbmV0d29ya1N0YXRlID0gbmF2aWdhdG9yLmNvbm5lY3Rpb24udHlwZTsKICAgIGlmIChuZXR3b3JrU3RhdGUgIT09IENvbm5lY3Rpb24uTk9ORSkgewogICAgICAgIC8vIE9idGVuZXIgZGF0b3MgZGVsIGFsbWFjZW5hbWllbnRvIGxvY2FsCiAgICAgICAgdmFyIGRhdGEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgia2V5Iik7CgogICAgICAgIC8vIEVudmlhciBkYXRvcyBhbCBzZXJ2aWRvcgogICAgICAgIGZldGNoKCdodHRwczovL2V4YW1wbGUuY29tL2FwaS9zeW5jJywgewogICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBkYXRhOiBkYXRhIH0pLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAudGhlbihkYXRhID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0RhdG9zIHNpbmNyb25pemFkb3MgY29ycmVjdGFtZW50ZTonLCBkYXRhKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgc2luY3Jvbml6YXIgZGF0b3M6JywgZXJyb3IpOwogICAgICAgIH0pOwogICAgfQp9CgovLyBMbGFtYXIgYSBzeW5jRGF0YSBjdWFuZG8gbGEgYXBsaWNhY2nDs24gZXN0w6kgZW4gbMOtbmVhCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm9ubGluZSIsIHN5bmNEYXRhLCBmYWxzZSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function syncData() {
    var networkState = navigator.connection.type;
    if (networkState !== Connection.NONE) {
        // Obtener datos del almacenamiento local
        var data = localStorage.getItem(&quot;key&quot;);

        // Enviar datos al servidor
        fetch('https://example.com/api/sync', {
            method: 'POST',
            body: JSON.stringify({ data: data }),
            headers: {
                'Content-Type': 'application/json'
            }
        })
        .then(response =&gt; response.json())
        .then(data =&gt; {
            console.log('Datos sincronizados correctamente:', data);
        })
        .catch((error) =&gt; {
            console.error('Error al sincronizar datos:', error);
        });
    }
}

// Llamar a syncData cuando la aplicaci&oacute;n est&eacute; en l&iacute;nea
document.addEventListener(&quot;online&quot;, syncData, false);</pre></div><div class='content'></div><h1>Experiencia del Usuario</h1>
<div class='content'><p>Informar a los usuarios sobre el estado sin conexión y proporcionar una experiencia fluida es esencial.</p>
</div><h2>Ejemplo</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRpdiBpZD0ib2ZmbGluZU1lc3NhZ2UiIHN0eWxlPSJkaXNwbGF5OiBub25lOyI+CiAgICBBY3R1YWxtZW50ZSBlc3TDoXMgc2luIGNvbmV4acOzbi4gQWxndW5hcyBmdW5jaW9uZXMgcHVlZGVuIG5vIGVzdGFyIGRpc3BvbmlibGVzLgo8L2Rpdj4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;div id=&quot;offlineMessage&quot; style=&quot;display: none;&quot;&gt;
    Actualmente est&aacute;s sin conexi&oacute;n. Algunas funciones pueden no estar disponibles.
&lt;/div&gt;</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiZGV2aWNlcmVhZHkiLCBmdW5jdGlvbigpIHsKICAgIGZ1bmN0aW9uIHVwZGF0ZU5ldHdvcmtTdGF0dXMoKSB7CiAgICAgICAgdmFyIG5ldHdvcmtTdGF0ZSA9IG5hdmlnYXRvci5jb25uZWN0aW9uLnR5cGU7CiAgICAgICAgdmFyIG9mZmxpbmVNZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm9mZmxpbmVNZXNzYWdlIik7CiAgICAgICAgaWYgKG5ldHdvcmtTdGF0ZSA9PT0gQ29ubmVjdGlvbi5OT05FKSB7CiAgICAgICAgICAgIG9mZmxpbmVNZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9mZmxpbmVNZXNzYWdlLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfQogICAgfQoKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm9mZmxpbmUiLCB1cGRhdGVOZXR3b3JrU3RhdHVzLCBmYWxzZSk7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJvbmxpbmUiLCB1cGRhdGVOZXR3b3JrU3RhdHVzLCBmYWxzZSk7CgogICAgLy8gVmVyaWZpY2FjacOzbiBpbmljaWFsCiAgICB1cGRhdGVOZXR3b3JrU3RhdHVzKCk7Cn0sIGZhbHNlKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener(&quot;deviceready&quot;, function() {
    function updateNetworkStatus() {
        var networkState = navigator.connection.type;
        var offlineMessage = document.getElementById(&quot;offlineMessage&quot;);
        if (networkState === Connection.NONE) {
            offlineMessage.style.display = &quot;block&quot;;
        } else {
            offlineMessage.style.display = &quot;none&quot;;
        }
    }

    document.addEventListener(&quot;offline&quot;, updateNetworkStatus, false);
    document.addEventListener(&quot;online&quot;, updateNetworkStatus, false);

    // Verificaci&oacute;n inicial
    updateNetworkStatus();
}, false);</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Manejar escenarios sin conexión en aplicaciones Apache Cordova implica detectar el estado sin conexión, almacenar datos localmente, sincronizar datos cuando se restaura la conexión y asegurar una experiencia de usuario fluida. Implementando estas estrategias, puedes crear aplicaciones robustas que funcionen efectivamente incluso sin conexión a internet.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='deploying-to-app-stores'>&#x25C4;Desplegando en Tiendas de Aplicaciones</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Manejo de Escenarios Sin Conexión</a>
	</div>
	<div class='col-4 text-end'>
					<a href='security-best-practices'>Mejores Prácticas de Seguridad &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
