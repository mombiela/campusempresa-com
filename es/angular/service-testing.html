<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pruebas de Servicios en Angular</title>

    <link rel="alternate" href="https://campusempresa.com/es/angular/service-testing" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/angular/service-testing" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/angular/service-testing" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/angular/service-testing" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='component-testing'>&#x25C4; Pruebas de Componentes</a></div><div class='col-6 text-end'><a href='end-to-end-testing'>Pruebas de Extremo a Extremo &#x25BA;</a></div></div><div class='content'></div><h1>Introducción a las Pruebas de Servicios</h1>
<div class='content'><p>Las pruebas de servicios son una parte crucial del desarrollo de aplicaciones en Angular. Aseguran que los servicios, que a menudo contienen lógica de negocio y código de acceso a datos, funcionen correctamente. Esta sección te guiará a través de los conceptos básicos de las pruebas de servicios, desde la configuración de tu entorno de pruebas hasta la escritura y ejecución de pruebas.</p>
</div><h1>Configuración del Entorno de Pruebas</h1>
<div class='content'><p>Antes de comenzar a escribir pruebas, necesitamos configurar nuestro entorno de pruebas.</p>
<ul>
<li><strong>Instalar Angular CLI</strong>: Asegúrate de tener Angular CLI instalado.
<pre><code class="language-bash">npm install -g @angular/cli
</code></pre>
</li>
<li><strong>Crear un nuevo proyecto Angular</strong>: Si no tienes un proyecto existente, crea uno.
<pre><code class="language-bash">ng new my-angular-app
cd my-angular-app
</code></pre>
</li>
<li><strong>Instalar las bibliotecas de pruebas necesarias</strong>: Angular viene con Jasmine y Karma por defecto, pero puedes instalar bibliotecas adicionales si es necesario.
<pre><code class="language-bash">npm install --save-dev @angular/core @angular/common @angular/compiler @angular/platform-browser @angular/platform-browser-dynamic @angular/router @angular/forms
</code></pre>
</li>
</ul>
</div><h1>Escribiendo tu Primera Prueba de Servicio</h1>
<div class='content'><p>Comencemos escribiendo una prueba simple para un servicio de Angular.</p>
</div><h2>Creando un Servicio</h2>
<div class='content'><p>Primero, crea un servicio usando Angular CLI.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgZ2VuZXJhdGUgc2VydmljZSBteS1zZXJ2aWNl"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng generate service my-service</pre></div><div class='content'><p>Este comando generará un archivo de servicio <code>my-service.service.ts</code> y un archivo de prueba correspondiente <code>my-service.service.spec.ts</code>.</p>
</div><h2>Entendiendo el Código del Servicio</h2>
<div class='content'><p>Aquí tienes un ejemplo simple de un servicio que proporciona un mensaje de saludo:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbXktc2VydmljZS5zZXJ2aWNlLnRzCmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKCkBJbmplY3RhYmxlKHsKICBwcm92aWRlZEluOiAncm9vdCcKfSkKZXhwb3J0IGNsYXNzIE15U2VydmljZSB7CiAgY29uc3RydWN0b3IoKSB7IH0KCiAgZ2V0R3JlZXRpbmcoKTogc3RyaW5nIHsKICAgIHJldHVybiAnwqFIb2xhLCBNdW5kbyEnOwogIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// my-service.service.ts
import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class MyService {
  constructor() { }

  getGreeting(): string {
    return '&iexcl;Hola, Mundo!';
  }
}</pre></div><div class='content'></div><h2>Escribiendo la Prueba</h2>
<div class='content'><p>Ahora, escribamos una prueba para el método <code>getGreeting</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbXktc2VydmljZS5zZXJ2aWNlLnNwZWMudHMKaW1wb3J0IHsgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IE15U2VydmljZSB9IGZyb20gJy4vbXktc2VydmljZS5zZXJ2aWNlJzsKCmRlc2NyaWJlKCdNeVNlcnZpY2UnLCAoKSA9PiB7CiAgbGV0IHNlcnZpY2U6IE15U2VydmljZTsKCiAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoe30pOwogICAgc2VydmljZSA9IFRlc3RCZWQuaW5qZWN0KE15U2VydmljZSk7CiAgfSk7CgogIGl0KCdkZWJlcsOtYSBzZXIgY3JlYWRvJywgKCkgPT4gewogICAgZXhwZWN0KHNlcnZpY2UpLnRvQmVUcnV0aHkoKTsKICB9KTsKCiAgaXQoJ2RlYmVyw61hIGRldm9sdmVyIGVsIG1lbnNhamUgZGUgc2FsdWRvJywgKCkgPT4gewogICAgZXhwZWN0KHNlcnZpY2UuZ2V0R3JlZXRpbmcoKSkudG9CZSgnwqFIb2xhLCBNdW5kbyEnKTsKICB9KTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// my-service.service.spec.ts
import { TestBed } from '@angular/core/testing';
import { MyService } from './my-service.service';

describe('MyService', () =&gt; {
  let service: MyService;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({});
    service = TestBed.inject(MyService);
  });

  it('deber&iacute;a ser creado', () =&gt; {
    expect(service).toBeTruthy();
  });

  it('deber&iacute;a devolver el mensaje de saludo', () =&gt; {
    expect(service.getGreeting()).toBe('&iexcl;Hola, Mundo!');
  });
});</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>TestBed</strong>: La API principal de Angular para configurar e inicializar el entorno para pruebas unitarias.</li>
<li><strong>beforeEach</strong>: Una función de Jasmine que se ejecuta antes de cada prueba. Configura el módulo de pruebas e inyecta el servicio.</li>
<li><strong>it</strong>: Define un caso de prueba único. La primera prueba verifica si el servicio es creado, y la segunda prueba verifica si el método <code>getGreeting</code> devuelve el mensaje correcto.</li>
</ul>
</div><h1>Pruebas Avanzadas de Servicios</h1>
<div class='content'><p>A medida que avances, puede que necesites probar servicios que dependen de otros servicios o recursos externos.</p>
</div><h2>Simulando Dependencias</h2>
<div class='content'><p>Cuando un servicio depende de otro servicio, puedes simular las dependencias para aislar la unidad bajo prueba.</p>
<h4>Ejemplo de Servicio con Dependencia</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gZGF0YS5zZXJ2aWNlLnRzCmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKCkBJbmplY3RhYmxlKHsKICBwcm92aWRlZEluOiAncm9vdCcKfSkKZXhwb3J0IGNsYXNzIERhdGFTZXJ2aWNlIHsKICBnZXREYXRhKCk6IHN0cmluZyB7CiAgICByZXR1cm4gJ0RhdG9zIFJlYWxlcyc7CiAgfQp9CgovLyBkZXBlbmRlbnQuc2VydmljZS50cwppbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IERhdGFTZXJ2aWNlIH0gZnJvbSAnLi9kYXRhLnNlcnZpY2UnOwoKQEluamVjdGFibGUoewogIHByb3ZpZGVkSW46ICdyb290Jwp9KQpleHBvcnQgY2xhc3MgRGVwZW5kZW50U2VydmljZSB7CiAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhU2VydmljZTogRGF0YVNlcnZpY2UpIHsgfQoKICBnZXRQcm9jZXNzZWREYXRhKCk6IHN0cmluZyB7CiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5nZXREYXRhKCkgKyAnIFByb2Nlc2Fkb3MnOwogIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// data.service.ts
import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class DataService {
  getData(): string {
    return 'Datos Reales';
  }
}

// dependent.service.ts
import { Injectable } from '@angular/core';
import { DataService } from './data.service';

@Injectable({
  providedIn: 'root'
})
export class DependentService {
  constructor(private dataService: DataService) { }

  getProcessedData(): string {
    return this.dataService.getData() + ' Procesados';
  }
}</pre></div><div class='content'><h4>Escribiendo Pruebas con Simulaciones</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gZGVwZW5kZW50LnNlcnZpY2Uuc3BlYy50cwppbXBvcnQgeyBUZXN0QmVkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZS90ZXN0aW5nJzsKaW1wb3J0IHsgRGVwZW5kZW50U2VydmljZSB9IGZyb20gJy4vZGVwZW5kZW50LnNlcnZpY2UnOwppbXBvcnQgeyBEYXRhU2VydmljZSB9IGZyb20gJy4vZGF0YS5zZXJ2aWNlJzsKCmNsYXNzIE1vY2tEYXRhU2VydmljZSB7CiAgZ2V0RGF0YSgpIHsKICAgIHJldHVybiAnRGF0b3MgU2ltdWxhZG9zJzsKICB9Cn0KCmRlc2NyaWJlKCdEZXBlbmRlbnRTZXJ2aWNlJywgKCkgPT4gewogIGxldCBzZXJ2aWNlOiBEZXBlbmRlbnRTZXJ2aWNlOwogIGxldCBkYXRhU2VydmljZTogRGF0YVNlcnZpY2U7CgogIGJlZm9yZUVhY2goKCkgPT4gewogICAgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgcHJvdmlkZXJzOiBbCiAgICAgICAgRGVwZW5kZW50U2VydmljZSwKICAgICAgICB7IHByb3ZpZGU6IERhdGFTZXJ2aWNlLCB1c2VDbGFzczogTW9ja0RhdGFTZXJ2aWNlIH0KICAgICAgXQogICAgfSk7CiAgICBzZXJ2aWNlID0gVGVzdEJlZC5pbmplY3QoRGVwZW5kZW50U2VydmljZSk7CiAgICBkYXRhU2VydmljZSA9IFRlc3RCZWQuaW5qZWN0KERhdGFTZXJ2aWNlKTsKICB9KTsKCiAgaXQoJ2RlYmVyw61hIHNlciBjcmVhZG8nLCAoKSA9PiB7CiAgICBleHBlY3Qoc2VydmljZSkudG9CZVRydXRoeSgpOwogIH0pOwoKICBpdCgnZGViZXLDrWEgZGV2b2x2ZXIgZGF0b3MgcHJvY2VzYWRvcycsICgpID0+IHsKICAgIGV4cGVjdChzZXJ2aWNlLmdldFByb2Nlc3NlZERhdGEoKSkudG9CZSgnRGF0b3MgU2ltdWxhZG9zIFByb2Nlc2Fkb3MnKTsKICB9KTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// dependent.service.spec.ts
import { TestBed } from '@angular/core/testing';
import { DependentService } from './dependent.service';
import { DataService } from './data.service';

class MockDataService {
  getData() {
    return 'Datos Simulados';
  }
}

describe('DependentService', () =&gt; {
  let service: DependentService;
  let dataService: DataService;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({
      providers: [
        DependentService,
        { provide: DataService, useClass: MockDataService }
      ]
    });
    service = TestBed.inject(DependentService);
    dataService = TestBed.inject(DataService);
  });

  it('deber&iacute;a ser creado', () =&gt; {
    expect(service).toBeTruthy();
  });

  it('deber&iacute;a devolver datos procesados', () =&gt; {
    expect(service.getProcessedData()).toBe('Datos Simulados Procesados');
  });
});</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>MockDataService</strong>: Una clase simulada que simula el comportamiento de <code>DataService</code>.</li>
<li><strong>providers</strong>: Configura el módulo de pruebas para usar <code>MockDataService</code> en lugar del <code>DataService</code> real.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Las pruebas de servicios en Angular son esenciales para asegurar la fiabilidad y corrección de la lógica de negocio de tu aplicación. Configurando un entorno de pruebas adecuado, escribiendo pruebas básicas y utilizando técnicas avanzadas como la simulación de dependencias, puedes crear pruebas robustas y mantenibles para tus servicios de Angular. Recuerda ejecutar tus pruebas con frecuencia e integrarlas en tu flujo de trabajo de desarrollo para detectar problemas temprano y mejorar la calidad del código.</p>
</div><div class='row navigation'><div class='col-6'><a href='component-testing'>&#x25C4; Pruebas de Componentes</a></div><div class='col-6 text-end'><a href='end-to-end-testing'>Pruebas de Extremo a Extremo &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
