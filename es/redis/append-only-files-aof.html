<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archivos Solo de Adición (AOF)</title>

    <link rel="alternate" href="https://campusempresa.com/es/redis/append-only-files-aof" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/redis/append-only-files-aof" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/redis/append-only-files-aof" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/redis/append-only-files-aof" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='snapshots-rdb'>&#x25C4;Instantáneas (RDB)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Archivos Solo de Adición (AOF)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='persistence-configuration'>Configuración de Persistencia &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a AOF</h1>
<div class='content'><p>Archivos Solo de Adición (AOF) es un mecanismo de persistencia en Redis que registra cada operación de escritura recibida por el servidor. Este registro se utiliza luego para reconstruir el conjunto de datos cuando el servidor se reinicia. AOF proporciona una forma más duradera de persistir datos en comparación con las instantáneas RDB (Base de Datos Redis) predeterminadas.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Persistencia</strong>: Asegurar que los datos no se pierdan en caso de un fallo del servidor.</li>
<li><strong>Registro de Escritura Adelantada</strong>: Registrar cada operación de escritura antes de que se aplique al conjunto de datos.</li>
<li><strong>Reconstrucción</strong>: Usar el registro AOF para reconstruir el conjunto de datos al reiniciar el servidor.</li>
</ul>
</div><h1>Habilitar AOF</h1>
<div class='content'><p>Para habilitar AOF en Redis, necesitas modificar el archivo de configuración de Redis (<code>redis.conf</code>).</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwZW5kb25seSB5ZXM="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>appendonly yes</pre></div><div class='content'></div><h1>Opciones de Configuración de AOF</h1>
<div class='content'><p>Redis proporciona varias opciones de configuración para ajustar el comportamiento de AOF:</p>
<ul>
<li><strong>appendfsync</strong>: Controla con qué frecuencia Redis sincronizará el archivo AOF con el disco.
<ul>
<li><code>always</code>: Sincronizar después de cada operación de escritura (más duradero, menos rendimiento).</li>
<li><code>everysec</code>: Sincronizar cada segundo (equilibrio entre durabilidad y rendimiento).</li>
<li><code>no</code>: Dejar que el sistema operativo decida cuándo sincronizar (menos duradero, más rendimiento).</li>
</ul>
</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwZW5kZnN5bmMgZXZlcnlzZWM="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>appendfsync everysec</pre></div><div class='content'><ul>
<li><strong>auto-aof-rewrite-percentage</strong>: Dispara una reescritura de AOF cuando el tamaño del archivo AOF crece un cierto porcentaje desde la última reescritura.</li>
<li><strong>auto-aof-rewrite-min-size</strong>: Establece el tamaño mínimo que debe alcanzar el archivo AOF antes de que se dispare una reescritura automática.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXV0by1hb2YtcmV3cml0ZS1wZXJjZW50YWdlIDEwMAphdXRvLWFvZi1yZXdyaXRlLW1pbi1zaXplIDY0bWI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb</pre></div><div class='content'></div><h1>Cómo Funciona AOF</h1>
<div class='content'><ol>
<li><strong>Registro</strong>: Cada operación de escritura se registra en el archivo AOF.</li>
<li><strong>Sincronización</strong>: El archivo AOF se sincroniza con el disco según la configuración de <code>appendfsync</code>.</li>
<li><strong>Reescritura</strong>: Periódicamente, Redis reescribe el archivo AOF para optimizar su tamaño y rendimiento.</li>
</ol>
</div><h1>Ejemplo: Configuración Básica de AOF</h1>
<div class='content'><p>Aquí tienes un ejemplo de una configuración básica de AOF en <code>redis.conf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwZW5kb25seSB5ZXMKYXBwZW5kZnN5bmMgZXZlcnlzZWMKYXV0by1hb2YtcmV3cml0ZS1wZXJjZW50YWdlIDEwMAphdXRvLWFvZi1yZXdyaXRlLW1pbi1zaXplIDY0bWI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>appendonly yes
appendfsync everysec
auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb</pre></div><div class='content'></div><h1>Reescritura de AOF</h1>
<div class='content'><p>La reescritura de AOF es un proceso donde Redis crea un nuevo archivo AOF leyendo el conjunto de datos actual en memoria y escribiéndolo en un nuevo archivo de forma más compacta. Esto ayuda a reducir el tamaño del archivo AOF y mejorar el rendimiento.</p>
</div><h2>Disparar la Reescritura de AOF Manualmente</h2>
<div class='content'><p>Puedes disparar una reescritura de AOF manualmente usando el comando <code>BGREWRITEAOF</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkdSRVdSSVRFQU9G"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BGREWRITEAOF</pre></div><div class='content'></div><h1>AOF vs RDB</h1>
<div class='content'><p>| Característica    | AOF                          | RDB                          |
|-------------------|------------------------------|------------------------------|
| Persistencia      | Registra cada operación de escritura | Instantáneas periódicas      |
| Durabilidad       | Mayor (depende de <code>appendfsync</code>) | Menor (depende de la frecuencia de instantáneas) |
| Rendimiento       | Menor (más I/O de disco)     | Mayor (menos I/O de disco frecuente) |
| Tamaño del Archivo| Mayor (contiene todas las operaciones) | Menor (instantánea del conjunto de datos) |
| Velocidad de Recuperación | Más lenta (reproduce todas las operaciones) | Más rápida (carga la instantánea) |</p>
</div><h1>Ejemplo de Código: Usando AOF en Redis</h1>
<div class='content'><p>Aquí tienes un ejemplo simple para demostrar cómo funciona AOF en Redis:</p>
<ol>
<li><strong>Habilitar AOF</strong>: Modifica <code>redis.conf</code> para habilitar AOF.</li>
<li><strong>Iniciar el Servidor Redis</strong>: Inicia el servidor Redis con la configuración modificada.</li>
<li><strong>Realizar Operaciones de Escritura</strong>: Ejecuta algunas operaciones de escritura.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VUIHVzZXI6MSAiQWxpY2UiClNFVCB1c2VyOjIgIkJvYiI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SET user:1 &quot;Alice&quot;
SET user:2 &quot;Bob&quot;</pre></div><div class='content'><ol start="4">
<li><strong>Verificar el Archivo AOF</strong>: El archivo AOF (<code>appendonly.aof</code>) contendrá las operaciones de escritura.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("KjMKJDMKU0VUCiQ2CnVzZXI6MQokNQpBbGljZQoqMwokMwpTRVQKJDYKdXNlcjoyCiQzCkJvYg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>*3
$3
SET
$6
user:1
$5
Alice
*3
$3
SET
$6
user:2
$3
Bob</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Los Archivos Solo de Adición (AOF) proporcionan un mecanismo robusto para asegurar la durabilidad de los datos en Redis. Al registrar cada operación de escritura, AOF permite una recuperación precisa de los datos en caso de un fallo del servidor. Entender cómo configurar y gestionar AOF es crucial para mantener un despliegue de Redis confiable. Aunque AOF ofrece mayor durabilidad en comparación con las instantáneas RDB, viene con compensaciones en términos de rendimiento y tamaño del archivo. Una configuración adecuada y reescrituras periódicas pueden ayudar a equilibrar estas compensaciones para satisfacer las necesidades de tu aplicación.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='snapshots-rdb'>&#x25C4;Instantáneas (RDB)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Archivos Solo de Adición (AOF)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='persistence-configuration'>Configuración de Persistencia &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
