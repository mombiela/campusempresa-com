<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Almacenamiento de Sesiones con Redis</title>

    <link rel="alternate" href="https://campusempresa.com/es/redis/session-storage" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/redis/session-storage" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/redis/session-storage" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/redis/session-storage" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='caching'>&#x25C4; Caching</a></div><div class='col-6 text-end'><a href='real-time-analytics'>Analítica en Tiempo Real &#x25BA;</a></div></div><div class='content'></div><h1>Introducción al Almacenamiento de Sesiones</h1>
<div class='content'><p>El almacenamiento de sesiones es un aspecto crítico del desarrollo web, que te permite almacenar datos específicos del usuario entre solicitudes HTTP. Redis, un almacén de estructuras de datos en memoria, es ampliamente utilizado para el almacenamiento de sesiones debido a su velocidad y eficiencia.</p>
</div><h1>¿Por Qué Usar Redis para el Almacenamiento de Sesiones?</h1>
<div class='content'><ul>
<li><strong>Rendimiento</strong>: Redis opera en memoria, proporcionando operaciones de lectura y escritura extremadamente rápidas.</li>
<li><strong>Escalabilidad</strong>: Redis puede manejar un gran número de conexiones concurrentes y datos.</li>
<li><strong>Persistencia</strong>: Redis ofrece opciones para la persistencia de datos, asegurando que los datos de la sesión no se pierdan.</li>
<li><strong>Estructuras de Datos</strong>: Redis soporta varias estructuras de datos como cadenas, hashes, listas, conjuntos y conjuntos ordenados, lo que lo hace versátil para diferentes necesidades de almacenamiento de sesiones.</li>
</ul>
</div><h1>Configuración de Redis para el Almacenamiento de Sesiones</h1>
<div class='content'><p>Para usar Redis para el almacenamiento de sesiones, necesitas instalar Redis y una biblioteca cliente de Redis para tu lenguaje de programación. A continuación se presentan los pasos para configurar Redis con Node.js.</p>
</div><h2>Instalación de Redis</h2>
<div class='content'><p>Primero, instala Redis en tu máquina. Por ejemplo, en Ubuntu:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhcHQgdXBkYXRlCnN1ZG8gYXB0IGluc3RhbGwgcmVkaXMtc2VydmVy"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo apt update
sudo apt install redis-server</pre></div><div class='content'><p>Inicia el servidor Redis:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBzeXN0ZW1jdGwgc3RhcnQgcmVkaXMtc2VydmVy"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo systemctl start redis-server</pre></div><div class='content'></div><h2>Instalación del Cliente Redis para Node.js</h2>
<div class='content'><p>Instala el paquete <code>redis</code> usando npm:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgcmVkaXM="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install redis</pre></div><div class='content'></div><h1>Almacenamiento de Sesiones en Redis</h1>
<h2>Ejemplo Básico</h2>
<div class='content'><p>Aquí tienes un ejemplo básico de almacenamiento y recuperación de datos de sesión usando Redis en una aplicación Node.js.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgcmVkaXMgPSByZXF1aXJlKCdyZWRpcycpOwpjb25zdCBjbGllbnQgPSByZWRpcy5jcmVhdGVDbGllbnQoKTsKCi8vIENvbmVjdGFyIGFsIHNlcnZpZG9yIFJlZGlzCmNsaWVudC5vbignY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgY29uc29sZS5sb2coJ0NvbmVjdGFkbyBhIFJlZGlzLi4uJyk7Cn0pOwoKLy8gQWxtYWNlbmFtaWVudG8gZGUgZGF0b3MgZGUgc2VzacOzbgpjb25zdCBzZXNzaW9uSWQgPSAnc2VzczoxMjM0NSc7CmNvbnN0IHNlc3Npb25EYXRhID0gewogICAgdXNlcklkOiAndXNlcjEyMycsCiAgICBpc0F1dGhlbnRpY2F0ZWQ6IHRydWUsCiAgICBsYXN0QWNjZXNzOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkKfTsKCmNsaWVudC5obXNldChzZXNzaW9uSWQsIHNlc3Npb25EYXRhLCAoZXJyLCByZXMpID0+IHsKICAgIGlmIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBhbG1hY2VuYXIgZGF0b3MgZGUgc2VzacOzbjonLCBlcnIpOwogICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygnRGF0b3MgZGUgc2VzacOzbiBhbG1hY2VuYWRvczonLCByZXMpOwogICAgfQp9KTsKCi8vIFJlY3VwZXJhY2nDs24gZGUgZGF0b3MgZGUgc2VzacOzbgpjbGllbnQuaGdldGFsbChzZXNzaW9uSWQsIChlcnIsIHNlc3Npb24pID0+IHsKICAgIGlmIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCByZWN1cGVyYXIgZGF0b3MgZGUgc2VzacOzbjonLCBlcnIpOwogICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygnRGF0b3MgZGUgc2VzacOzbiByZWN1cGVyYWRvczonLCBzZXNzaW9uKTsKICAgIH0KfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const redis = require('redis');
const client = redis.createClient();

// Conectar al servidor Redis
client.on('connect', function() {
    console.log('Conectado a Redis...');
});

// Almacenamiento de datos de sesi&oacute;n
const sessionId = 'sess:12345';
const sessionData = {
    userId: 'user123',
    isAuthenticated: true,
    lastAccess: new Date().toISOString()
};

client.hmset(sessionId, sessionData, (err, res) =&gt; {
    if (err) {
        console.error('Error al almacenar datos de sesi&oacute;n:', err);
    } else {
        console.log('Datos de sesi&oacute;n almacenados:', res);
    }
});

// Recuperaci&oacute;n de datos de sesi&oacute;n
client.hgetall(sessionId, (err, session) =&gt; {
    if (err) {
        console.error('Error al recuperar datos de sesi&oacute;n:', err);
    } else {
        console.log('Datos de sesi&oacute;n recuperados:', session);
    }
});</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>Conexión a Redis</strong>: El método <code>redis.createClient()</code> crea un nuevo cliente Redis.</li>
<li><strong>Almacenamiento de Datos</strong>: El método <code>hmset</code> almacena un hash (pares clave-valor) en Redis.</li>
<li><strong>Recuperación de Datos</strong>: El método <code>hgetall</code> recupera todos los campos y valores del hash almacenado en la clave dada.</li>
</ul>
</div><h1>Gestión Avanzada de Sesiones</h1>
<h2>Expiración de Sesiones</h2>
<div class='content'><p>Para expirar automáticamente las sesiones después de un cierto período, usa el comando <code>expire</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgc2Vzc2lvbklkID0gJ3Nlc3M6MTIzNDUnOwpjb25zdCBzZXNzaW9uVFRMID0gMzYwMDsgLy8gVGllbXBvIGRlIHZpZGEgZW4gc2VndW5kb3MgKDEgaG9yYSkKCmNsaWVudC5leHBpcmUoc2Vzc2lvbklkLCBzZXNzaW9uVFRMLCAoZXJyLCByZXMpID0+IHsKICAgIGlmIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBlc3RhYmxlY2VyIGVsIFRUTCBkZSBsYSBzZXNpw7NuOicsIGVycik7CiAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCdUVEwgZGUgbGEgc2VzacOzbiBlc3RhYmxlY2lkbzonLCByZXMpOwogICAgfQp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const sessionId = 'sess:12345';
const sessionTTL = 3600; // Tiempo de vida en segundos (1 hora)

client.expire(sessionId, sessionTTL, (err, res) =&gt; {
    if (err) {
        console.error('Error al establecer el TTL de la sesi&oacute;n:', err);
    } else {
        console.log('TTL de la sesi&oacute;n establecido:', res);
    }
});</pre></div><div class='content'></div><h2>Almacenamiento Persistente</h2>
<div class='content'><p>Redis puede configurarse para persistir datos en disco, asegurando que los datos de la sesión no se pierdan en reinicios del servidor. Esto puede hacerse usando instantáneas RDB (Base de Datos Redis) o registros AOF (Archivo de Solo Adición).</p>
</div><h2>Escalado de Redis</h2>
<div class='content'><p>Para aplicaciones a gran escala, puedes escalar Redis usando:</p>
<ul>
<li><strong>Replicación</strong>: Crear réplicas del servidor Redis para escalabilidad de lectura y redundancia de datos.</li>
<li><strong>Sharding</strong>: Distribuir datos entre múltiples instancias de Redis para manejar más datos y tráfico.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Redis es una herramienta poderosa para el almacenamiento de sesiones, ofreciendo alto rendimiento, escalabilidad y flexibilidad. Al entender los conceptos básicos de almacenamiento y recuperación de datos de sesión, establecer tiempos de expiración y configurar la persistencia, puedes gestionar efectivamente las sesiones de usuario en tus aplicaciones web. A medida que avances, considera explorar la replicación y el sharding de Redis para escalar tu solución de almacenamiento de sesiones.</p>
</div><div class='row navigation'><div class='col-6'><a href='caching'>&#x25C4; Caching</a></div><div class='col-6 text-end'><a href='real-time-analytics'>Analítica en Tiempo Real &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
