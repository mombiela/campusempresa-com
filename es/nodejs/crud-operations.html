<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realización de Operaciones CRUD</title>

    <link rel="alternate" href="https://campusempresa.com/es/nodejs/crud-operations" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/nodejs/crud-operations" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/nodejs/crud-operations" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/nodejs/crud-operations" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Proyecto</a>
				<a href="about">Sobre nosotros</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donaciones</a>
				<a href="licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>Las operaciones CRUD (Crear, Leer, Actualizar, Eliminar) son fundamentales para interactuar con bases de datos en cualquier aplicación. Esta sección te guiará a través de la realización de operaciones CRUD usando Node.js, desde niveles principiantes hasta avanzados.</p>
</div><h1>Introducción a las Operaciones CRUD</h1>
<div class='content'><ul>
<li><strong>Crear</strong>: Añadir nuevos datos a la base de datos.</li>
<li><strong>Leer</strong>: Recuperar datos de la base de datos.</li>
<li><strong>Actualizar</strong>: Modificar datos existentes en la base de datos.</li>
<li><strong>Eliminar</strong>: Eliminar datos de la base de datos.</li>
</ul>
</div><h1>Configuración del Entorno</h1>
<div class='content'><p>Antes de sumergirnos en las operaciones CRUD, asegúrate de tener lo siguiente instalado:</p>
<ul>
<li>Node.js</li>
<li>npm (Node Package Manager)</li>
<li>MongoDB (para operaciones de base de datos)</li>
</ul>
</div><h2>Instalación de Paquetes Requeridos</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluaXQgLXkKbnBtIGluc3RhbGwgZXhwcmVzcyBtb25nb29zZSBib2R5LXBhcnNlcg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm init -y
npm install express mongoose body-parser</pre></div><div class='content'><ul>
<li><strong>express</strong>: Un framework web para Node.js.</li>
<li><strong>mongoose</strong>: Una biblioteca ODM (Object Data Modeling) para MongoDB y Node.js.</li>
<li><strong>body-parser</strong>: Middleware para analizar los cuerpos de las solicitudes entrantes.</li>
</ul>
</div><h1>Conectando a MongoDB</h1>
<div class='content'><p>Crea un archivo llamado <code>app.js</code> y configura la conexión a MongoDB.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpOwpjb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTsKCmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsKYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7Cgptb25nb29zZS5jb25uZWN0KCdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L2NydWREQicsIHsgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLCB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSkKICAudGhlbigoKSA9PiBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25lY3RhZG8nKSkKICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpOwoKY29uc3QgcG9ydCA9IDMwMDA7CmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4gewogIGNvbnNvbGUubG9nKGBTZXJ2aWRvciBjb3JyaWVuZG8gZW4gZWwgcHVlcnRvICR7cG9ydH1gKTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const mongoose = require('mongoose');
const bodyParser = require('body-parser');

const app = express();
app.use(bodyParser.json());

mongoose.connect('mongodb://localhost:27017/crudDB', { useNewUrlParser: true, useUnifiedTopology: true })
  .then(() =&gt; console.log('MongoDB conectado'))
  .catch(err =&gt; console.log(err));

const port = 3000;
app.listen(port, () =&gt; {
  console.log(`Servidor corriendo en el puerto ${port}`);
});</pre></div><div class='content'></div><h1>Definiendo un Esquema y Modelo de Mongoose</h1>
<div class='content'><p>Crea un directorio <code>models</code> y dentro de él, crea un archivo llamado <code>Item.js</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpOwoKY29uc3QgaXRlbVNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoewogIG5hbWU6IHsKICAgIHR5cGU6IFN0cmluZywKICAgIHJlcXVpcmVkOiB0cnVlCiAgfSwKICBxdWFudGl0eTogewogICAgdHlwZTogTnVtYmVyLAogICAgcmVxdWlyZWQ6IHRydWUKICB9Cn0pOwoKbW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5tb2RlbCgnSXRlbScsIGl0ZW1TY2hlbWEpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const mongoose = require('mongoose');

const itemSchema = new mongoose.Schema({
  name: {
    type: String,
    required: true
  },
  quantity: {
    type: Number,
    required: true
  }
});

module.exports = mongoose.model('Item', itemSchema);</pre></div><div class='content'></div><h1>Operación de Creación</h1>
<div class='content'></div><h2>Añadiendo un Nuevo Ítem</h2>
<div class='content'><p>En <code>app.js</code>, añade una ruta para manejar la creación de un nuevo ítem.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgSXRlbSA9IHJlcXVpcmUoJy4vbW9kZWxzL0l0ZW0nKTsKCmFwcC5wb3N0KCcvaXRlbXMnLCBhc3luYyAocmVxLCByZXMpID0+IHsKICBjb25zdCB7IG5hbWUsIHF1YW50aXR5IH0gPSByZXEuYm9keTsKICB0cnkgewogICAgY29uc3QgbmV3SXRlbSA9IG5ldyBJdGVtKHsgbmFtZSwgcXVhbnRpdHkgfSk7CiAgICBhd2FpdCBuZXdJdGVtLnNhdmUoKTsKICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKG5ld0l0ZW0pOwogIH0gY2F0Y2ggKGVycikgewogICAgcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogZXJyLm1lc3NhZ2UgfSk7CiAgfQp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const Item = require('./models/Item');

app.post('/items', async (req, res) =&gt; {
  const { name, quantity } = req.body;
  try {
    const newItem = new Item({ name, quantity });
    await newItem.save();
    res.status(201).json(newItem);
  } catch (err) {
    res.status(400).json({ error: err.message });
  }
});</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>: Esta ruta escucha solicitudes POST en <code>/items</code>, crea un nuevo ítem usando los datos del cuerpo de la solicitud y lo guarda en la base de datos.</li>
</ul>
</div><h1>Operación de Lectura</h1>
<div class='content'></div><h2>Recuperando Todos los Ítems</h2>
<div class='content'><p>Añade una ruta para obtener todos los ítems.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwLmdldCgnL2l0ZW1zJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgdHJ5IHsKICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgSXRlbS5maW5kKCk7CiAgICByZXMuc3RhdHVzKDIwMCkuanNvbihpdGVtcyk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSB9KTsKICB9Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>app.get('/items', async (req, res) =&gt; {
  try {
    const items = await Item.find();
    res.status(200).json(items);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>: Esta ruta escucha solicitudes GET en <code>/items</code> y recupera todos los ítems de la base de datos.</li>
</ul>
</div><h2>Recuperando un Ítem por ID</h2>
<div class='content'><p>Añade una ruta para obtener un ítem por su ID.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwLmdldCgnL2l0ZW1zLzppZCcsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIHRyeSB7CiAgICBjb25zdCBpdGVtID0gYXdhaXQgSXRlbS5maW5kQnlJZChyZXEucGFyYW1zLmlkKTsKICAgIGlmICghaXRlbSkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6ICfDjXRlbSBubyBlbmNvbnRyYWRvJyB9KTsKICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGl0ZW0pOwogIH0gY2F0Y2ggKGVycikgewogICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogZXJyLm1lc3NhZ2UgfSk7CiAgfQp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>app.get('/items/:id', async (req, res) =&gt; {
  try {
    const item = await Item.findById(req.params.id);
    if (!item) return res.status(404).json({ error: '&Iacute;tem no encontrado' });
    res.status(200).json(item);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>: Esta ruta escucha solicitudes GET en <code>/items/:id</code> y recupera un ítem específico por su ID.</li>
</ul>
</div><h1>Operación de Actualización</h1>
<div class='content'></div><h2>Actualizando un Ítem por ID</h2>
<div class='content'><p>Añade una ruta para actualizar un ítem.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwLnB1dCgnL2l0ZW1zLzppZCcsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHsgbmFtZSwgcXVhbnRpdHkgfSA9IHJlcS5ib2R5OwogIHRyeSB7CiAgICBjb25zdCB1cGRhdGVkSXRlbSA9IGF3YWl0IEl0ZW0uZmluZEJ5SWRBbmRVcGRhdGUocmVxLnBhcmFtcy5pZCwgeyBuYW1lLCBxdWFudGl0eSB9LCB7IG5ldzogdHJ1ZSB9KTsKICAgIGlmICghdXBkYXRlZEl0ZW0pIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnw410ZW0gbm8gZW5jb250cmFkbycgfSk7CiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih1cGRhdGVkSXRlbSk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSB9KTsKICB9Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>app.put('/items/:id', async (req, res) =&gt; {
  const { name, quantity } = req.body;
  try {
    const updatedItem = await Item.findByIdAndUpdate(req.params.id, { name, quantity }, { new: true });
    if (!updatedItem) return res.status(404).json({ error: '&Iacute;tem no encontrado' });
    res.status(200).json(updatedItem);
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>: Esta ruta escucha solicitudes PUT en <code>/items/:id</code>, actualiza el ítem con los datos proporcionados y devuelve el ítem actualizado.</li>
</ul>
</div><h1>Operación de Eliminación</h1>
<div class='content'></div><h2>Eliminando un Ítem por ID</h2>
<div class='content'><p>Añade una ruta para eliminar un ítem.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwLmRlbGV0ZSgnL2l0ZW1zLzppZCcsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIHRyeSB7CiAgICBjb25zdCBkZWxldGVkSXRlbSA9IGF3YWl0IEl0ZW0uZmluZEJ5SWRBbmREZWxldGUocmVxLnBhcmFtcy5pZCk7CiAgICBpZiAoIWRlbGV0ZWRJdGVtKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ8ONdGVtIG5vIGVuY29udHJhZG8nIH0pOwogICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnw410ZW0gZWxpbWluYWRvIGV4aXRvc2FtZW50ZScgfSk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiBlcnIubWVzc2FnZSB9KTsKICB9Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>app.delete('/items/:id', async (req, res) =&gt; {
  try {
    const deletedItem = await Item.findByIdAndDelete(req.params.id);
    if (!deletedItem) return res.status(404).json({ error: '&Iacute;tem no encontrado' });
    res.status(200).json({ message: '&Iacute;tem eliminado exitosamente' });
  } catch (err) {
    res.status(500).json({ error: err.message });
  }
});</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>: Esta ruta escucha solicitudes DELETE en <code>/items/:id</code> y elimina el ítem especificado de la base de datos.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, aprendiste cómo realizar operaciones CRUD básicas usando Node.js y MongoDB. Configuraste una aplicación Node.js, la conectaste a una base de datos MongoDB y creaste rutas para manejar la creación, lectura, actualización y eliminación de ítems. Estas operaciones forman la columna vertebral de la mayoría de las aplicaciones web, y dominarlas es crucial para cualquier desarrollador.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
