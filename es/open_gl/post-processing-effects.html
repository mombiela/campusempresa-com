<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Efectos de Post-Procesamiento</title>

    <link rel="alternate" href="https://campusempresa.com/es/open_gl/post-processing-effects" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/open_gl/post-processing-effects" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/open_gl/post-processing-effects" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/open_gl/post-processing-effects" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='shadow-mapping'>&#x25C4; Mapeo de Sombras</a></div><div class='col-6 text-end'><a href='particle-systems'>Sistemas de Partículas &#x25BA;</a></div></div><div class='content'><p>Los efectos de post-procesamiento son técnicas utilizadas para mejorar la calidad visual de una escena renderizada en OpenGL. Estos efectos se aplican después de la pasada de renderizado inicial, permitiendo una variedad de mejoras visuales como desenfoque, corrección de color y más.</p>
</div><h1>Introducción al Post-Procesamiento</h1>
<div class='content'><p>El post-procesamiento implica renderizar la escena a una textura y luego aplicar varios efectos a esta textura antes de mostrarla en la pantalla. Este enfoque permite efectos visuales complejos que serían difíciles o imposibles de lograr durante la pasada de renderizado inicial.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Framebuffer Object (FBO)</strong>: Un contenedor para texturas y renderbuffers que permite el renderizado fuera de pantalla.</li>
<li><strong>Render to Texture</strong>: El proceso de renderizar una escena a una textura en lugar de directamente a la pantalla.</li>
<li><strong>Screen Quad</strong>: Un simple rectángulo que cubre toda la pantalla, utilizado para mostrar la textura con los efectos aplicados.</li>
<li><strong>Shaders</strong>: Pequeños programas que se ejecutan en la GPU para aplicar efectos a la textura renderizada.</li>
</ul>
</div><h1>Configuración del Post-Procesamiento</h1>
<div class='content'></div><h2>Creación de un Framebuffer Object (FBO)</h2>
<div class='content'><p>Para realizar post-procesamiento, primero necesitas crear un FBO y adjuntar una textura a él.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0x1aW50IGZibzsKZ2xHZW5GcmFtZWJ1ZmZlcnMoMSwgJmZibyk7CmdsQmluZEZyYW1lYnVmZmVyKEdMX0ZSQU1FQlVGRkVSLCBmYm8pOwoKR0x1aW50IHRleHR1cmU7CmdsR2VuVGV4dHVyZXMoMSwgJnRleHR1cmUpOwpnbEJpbmRUZXh0dXJlKEdMX1RFWFRVUkVfMkQsIHRleHR1cmUpOwpnbFRleEltYWdlMkQoR0xfVEVYVFVSRV8yRCwgMCwgR0xfUkdCLCB3aWR0aCwgaGVpZ2h0LCAwLCBHTF9SR0IsIEdMX1VOU0lHTkVEX0JZVEUsIE5VTEwpOwpnbFRleFBhcmFtZXRlcmkoR0xfVEVYVFVSRV8yRCwgR0xfVEVYVFVSRV9NSU5fRklMVEVSLCBHTF9MSU5FQVIpOwpnbFRleFBhcmFtZXRlcmkoR0xfVEVYVFVSRV8yRCwgR0xfVEVYVFVSRV9NQUdfRklMVEVSLCBHTF9MSU5FQVIpOwpnbEZyYW1lYnVmZmVyVGV4dHVyZTJEKEdMX0ZSQU1FQlVGRkVSLCBHTF9DT0xPUl9BVFRBQ0hNRU5UMCwgR0xfVEVYVFVSRV8yRCwgdGV4dHVyZSwgMCk7CgppZiAoZ2xDaGVja0ZyYW1lYnVmZmVyU3RhdHVzKEdMX0ZSQU1FQlVGRkVSKSAhPSBHTF9GUkFNRUJVRkZFUl9DT01QTEVURSkKICAgIHN0ZDo6Y2VyciA8PCAiRnJhbWVidWZmZXIgbm90IGNvbXBsZXRlISIgPDwgc3RkOjplbmRsOwoKZ2xCaW5kRnJhbWVidWZmZXIoR0xfRlJBTUVCVUZGRVIsIDApOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GLuint fbo;
glGenFramebuffers(1, &amp;fbo);
glBindFramebuffer(GL_FRAMEBUFFER, fbo);

GLuint texture;
glGenTextures(1, &amp;texture);
glBindTexture(GL_TEXTURE_2D, texture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, NULL);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, texture, 0);

if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)
    std::cerr &lt;&lt; &quot;Framebuffer not complete!&quot; &lt;&lt; std::endl;

glBindFramebuffer(GL_FRAMEBUFFER, 0);</pre></div><div class='content'></div><h2>Renderizado a la Textura</h2>
<div class='content'><p>Vincula el FBO antes de renderizar tu escena para asegurarte de que se renderice a la textura.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2xCaW5kRnJhbWVidWZmZXIoR0xfRlJBTUVCVUZGRVIsIGZibyk7CmdsQ2xlYXIoR0xfQ09MT1JfQlVGRkVSX0JJVCB8IEdMX0RFUFRIX0JVRkZFUl9CSVQpOwoKLy8gUmVuZGVyaXphIHR1IGVzY2VuYSBhcXXDrQoKZ2xCaW5kRnJhbWVidWZmZXIoR0xfRlJBTUVCVUZGRVIsIDApOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>glBindFramebuffer(GL_FRAMEBUFFER, fbo);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// Renderiza tu escena aqu&iacute;

glBindFramebuffer(GL_FRAMEBUFFER, 0);</pre></div><div class='content'></div><h2>Dibujando el Screen Quad</h2>
<div class='content'><p>Después de renderizar la escena a la textura, dibuja un screen quad y aplica efectos de post-procesamiento usando shaders.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gVmluY3VsYSBlbCBmcmFtZWJ1ZmZlciBwb3IgZGVmZWN0bwpnbEJpbmRGcmFtZWJ1ZmZlcihHTF9GUkFNRUJVRkZFUiwgMCk7CmdsQ2xlYXIoR0xfQ09MT1JfQlVGRkVSX0JJVCB8IEdMX0RFUFRIX0JVRkZFUl9CSVQpOwoKLy8gVXNhIGVsIHNoYWRlciBkZSBwb3N0LXByb2Nlc2FtaWVudG8KZ2xVc2VQcm9ncmFtKHBvc3RQcm9jZXNzaW5nU2hhZGVyKTsKCi8vIFZpbmN1bGEgbGEgdGV4dHVyYQpnbEJpbmRUZXh0dXJlKEdMX1RFWFRVUkVfMkQsIHRleHR1cmUpOwoKLy8gRGlidWphIGVsIHNjcmVlbiBxdWFkCmdsQmluZFZlcnRleEFycmF5KHF1YWRWQU8pOwpnbERyYXdBcnJheXMoR0xfVFJJQU5HTEVTLCAwLCA2KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Vincula el framebuffer por defecto
glBindFramebuffer(GL_FRAMEBUFFER, 0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// Usa el shader de post-procesamiento
glUseProgram(postProcessingShader);

// Vincula la textura
glBindTexture(GL_TEXTURE_2D, texture);

// Dibuja el screen quad
glBindVertexArray(quadVAO);
glDrawArrays(GL_TRIANGLES, 0, 6);</pre></div><div class='content'></div><h1>Efectos Comunes de Post-Procesamiento</h1>
<div class='content'></div><h2>Efecto de Escala de Grises</h2>
<div class='content'><p>Un efecto simple que convierte la escena a escala de grises.</p>
<p><strong>Ejemplo de Fragment Shader:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I3ZlcnNpb24gMzMwIGNvcmUKb3V0IHZlYzQgRnJhZ0NvbG9yOwppbiB2ZWMyIFRleENvb3JkczsKCnVuaWZvcm0gc2FtcGxlcjJEIHNjcmVlblRleHR1cmU7Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMzIGNvbG9yID0gdGV4dHVyZShzY3JlZW5UZXh0dXJlLCBUZXhDb29yZHMpLnJnYjsKICAgIGZsb2F0IGdyYXkgPSBkb3QoY29sb3IsIHZlYzMoMC4yOTksIDAuNTg3LCAwLjExNCkpOwogICAgRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKGdyYXkpLCAxLjApOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#version 330 core
out vec4 FragColor;
in vec2 TexCoords;

uniform sampler2D screenTexture;

void main()
{
    vec3 color = texture(screenTexture, TexCoords).rgb;
    float gray = dot(color, vec3(0.299, 0.587, 0.114));
    FragColor = vec4(vec3(gray), 1.0);
}</pre></div><div class='content'></div><h2>Efecto de Inversión</h2>
<div class='content'><p>Un efecto que invierte los colores de la escena.</p>
<p><strong>Ejemplo de Fragment Shader:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I3ZlcnNpb24gMzMwIGNvcmUKb3V0IHZlYzQgRnJhZ0NvbG9yOwppbiB2ZWMyIFRleENvb3JkczsKCnVuaWZvcm0gc2FtcGxlcjJEIHNjcmVlblRleHR1cmU7Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMzIGNvbG9yID0gdGV4dHVyZShzY3JlZW5UZXh0dXJlLCBUZXhDb29yZHMpLnJnYjsKICAgIEZyYWdDb2xvciA9IHZlYzQodmVjMygxLjAgLSBjb2xvciksIDEuMCk7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#version 330 core
out vec4 FragColor;
in vec2 TexCoords;

uniform sampler2D screenTexture;

void main()
{
    vec3 color = texture(screenTexture, TexCoords).rgb;
    FragColor = vec4(vec3(1.0 - color), 1.0);
}</pre></div><div class='content'></div><h2>Desenfoque Gaussiano</h2>
<div class='content'><p>Un efecto más complejo que desenfoca la escena usando un kernel Gaussiano.</p>
<p><strong>Ejemplo de Fragment Shader:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I3ZlcnNpb24gMzMwIGNvcmUKb3V0IHZlYzQgRnJhZ0NvbG9yOwppbiB2ZWMyIFRleENvb3JkczsKCnVuaWZvcm0gc2FtcGxlcjJEIHNjcmVlblRleHR1cmU7CnVuaWZvcm0gZmxvYXQgd2VpZ2h0WzVdID0gZmxvYXRbXSgwLjIyNzAyNywgMC4xOTQ1OTQ2LCAwLjEyMTYyMTYsIDAuMDU0MDU0LCAwLjAxNjIxNik7Cgp2b2lkIG1haW4oKQp7CiAgICB2ZWMyIHRleF9vZmZzZXQgPSAxLjAgLyB0ZXh0dXJlU2l6ZShzY3JlZW5UZXh0dXJlLCAwKTsgLy8gb2J0aWVuZSBlbCB0YW1hw7FvIGRlIHVuIHNvbG8gdGV4ZWwKICAgIHZlYzMgcmVzdWx0ID0gdGV4dHVyZShzY3JlZW5UZXh0dXJlLCBUZXhDb29yZHMpLnJnYiAqIHdlaWdodFswXTsgLy8gY29udHJpYnVjacOzbiBkZWwgZnJhZ21lbnRvIGFjdHVhbAogICAgZm9yKGludCBpID0gMTsgaSA8IDU7ICsraSkKICAgIHsKICAgICAgICByZXN1bHQgKz0gdGV4dHVyZShzY3JlZW5UZXh0dXJlLCBUZXhDb29yZHMgKyB2ZWMyKHRleF9vZmZzZXQueCAqIGksIDAuMCkpLnJnYiAqIHdlaWdodFtpXTsKICAgICAgICByZXN1bHQgKz0gdGV4dHVyZShzY3JlZW5UZXh0dXJlLCBUZXhDb29yZHMgLSB2ZWMyKHRleF9vZmZzZXQueCAqIGksIDAuMCkpLnJnYiAqIHdlaWdodFtpXTsKICAgICAgICByZXN1bHQgKz0gdGV4dHVyZShzY3JlZW5UZXh0dXJlLCBUZXhDb29yZHMgKyB2ZWMyKDAuMCwgdGV4X29mZnNldC55ICogaSkpLnJnYiAqIHdlaWdodFtpXTsKICAgICAgICByZXN1bHQgKz0gdGV4dHVyZShzY3JlZW5UZXh0dXJlLCBUZXhDb29yZHMgLSB2ZWMyKDAuMCwgdGV4X29mZnNldC55ICogaSkpLnJnYiAqIHdlaWdodFtpXTsKICAgIH0KICAgIEZyYWdDb2xvciA9IHZlYzQocmVzdWx0LCAxLjApOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#version 330 core
out vec4 FragColor;
in vec2 TexCoords;

uniform sampler2D screenTexture;
uniform float weight[5] = float[](0.227027, 0.1945946, 0.1216216, 0.054054, 0.016216);

void main()
{
    vec2 tex_offset = 1.0 / textureSize(screenTexture, 0); // obtiene el tama&ntilde;o de un solo texel
    vec3 result = texture(screenTexture, TexCoords).rgb * weight[0]; // contribuci&oacute;n del fragmento actual
    for(int i = 1; i &lt; 5; ++i)
    {
        result += texture(screenTexture, TexCoords + vec2(tex_offset.x * i, 0.0)).rgb * weight[i];
        result += texture(screenTexture, TexCoords - vec2(tex_offset.x * i, 0.0)).rgb * weight[i];
        result += texture(screenTexture, TexCoords + vec2(0.0, tex_offset.y * i)).rgb * weight[i];
        result += texture(screenTexture, TexCoords - vec2(0.0, tex_offset.y * i)).rgb * weight[i];
    }
    FragColor = vec4(result, 1.0);
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Los efectos de post-procesamiento en OpenGL permiten una amplia gama de mejoras visuales que pueden mejorar significativamente la calidad y la estética de una escena renderizada. Al comprender los conceptos básicos de framebuffers, texturas y shaders, puedes crear y aplicar varios efectos como escala de grises, inversión y desenfoque Gaussiano. Experimentar con diferentes shaders y técnicas te ayudará a dominar el arte del post-procesamiento y crear efectos visuales impresionantes en tus aplicaciones OpenGL.</p>
</div><div class='row navigation'><div class='col-6'><a href='shadow-mapping'>&#x25C4; Mapeo de Sombras</a></div><div class='col-6 text-end'><a href='particle-systems'>Sistemas de Partículas &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
