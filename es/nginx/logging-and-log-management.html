<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro y Gestión de Registros</title>

    <link rel="alternate" href="https://campusempresa.com/es/nginx/logging-and-log-management" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/nginx/logging-and-log-management" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/nginx/logging-and-log-management" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/nginx/logging-and-log-management" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='monitoring-nginx'>&#x25C4;Monitoreo de NGINX</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Registro y Gestión de Registros</a>
	</div>
	<div class='col-4 text-end'>
					<a href='troubleshooting-common-issues'>Solución de Problemas Comunes &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción al Registro en NGINX</h1>
<div class='content'><p>El registro es un aspecto esencial de la gestión y el mantenimiento de servidores web. Ayuda a monitorear el rendimiento del servidor, depurar problemas y comprender el comportamiento del usuario. NGINX, un servidor web de alto rendimiento, proporciona capacidades robustas de registro.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Registros de Acceso</strong>: Registran las solicitudes de los clientes procesadas por el servidor.</li>
<li><strong>Registros de Errores</strong>: Capturan los errores encontrados por el servidor.</li>
<li><strong>Formatos de Registro</strong>: Definen la estructura y el contenido de las entradas de registro.</li>
<li><strong>Niveles de Registro</strong>: Determinan la severidad de los mensajes registrados en los registros de errores.</li>
</ul>
</div><h1>Configuración de Registros de Acceso</h1>
<div class='content'><p>Los registros de acceso en NGINX registran detalles sobre cada solicitud del cliente. Por defecto, NGINX registra la información de acceso en un formato predefinido.</p>
</div><h2>Configuración Básica</h2>
<div class='content'><p>Para habilitar el registro de acceso, agregue la siguiente directiva a su archivo de configuración de NGINX (<code>nginx.conf</code>):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICBhY2Nlc3NfbG9nIC92YXIvbG9nL25naW54L2FjY2Vzcy5sb2c7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    access_log /var/log/nginx/access.log;
}</pre></div><div class='content'></div><h2>Formatos de Registro Personalizados</h2>
<div class='content'><p>Puede definir formatos de registro personalizados para incluir información específica. Use la directiva <code>log_format</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICBsb2dfZm9ybWF0IGN1c3RvbSAnJHJlbW90ZV9hZGRyIC0gJHJlbW90ZV91c2VyIFskdGltZV9sb2NhbF0gIiRyZXF1ZXN0IiAnCiAgICAgICAgICAgICAgICAgICAgICAnJHN0YXR1cyAkYm9keV9ieXRlc19zZW50ICIkaHR0cF9yZWZlcmVyIiAnCiAgICAgICAgICAgICAgICAgICAgICAnIiRodHRwX3VzZXJfYWdlbnQiICIkaHR0cF94X2ZvcndhcmRlZF9mb3IiJzsKCiAgICBhY2Nlc3NfbG9nIC92YXIvbG9nL25naW54L2FjY2Vzcy5sb2cgY3VzdG9tOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    log_format custom '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '
                      '$status $body_bytes_sent &quot;$http_referer&quot; '
                      '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';

    access_log /var/log/nginx/access.log custom;
}</pre></div><div class='content'></div><h2>Ejemplo Explicado</h2>
<div class='content'><ul>
<li><code>$remote_addr</code>: Dirección IP del cliente.</li>
<li><code>$remote_user</code>: Usuario autenticado (si lo hay).</li>
<li><code>$time_local</code>: Hora local de la solicitud.</li>
<li><code>$request</code>: Línea de solicitud del cliente.</li>
<li><code>$status</code>: Código de estado HTTP.</li>
<li><code>$body_bytes_sent</code>: Número de bytes enviados al cliente.</li>
<li><code>$http_referer</code>: Encabezado Referer del cliente.</li>
<li><code>$http_user_agent</code>: Encabezado User-Agent del cliente.</li>
<li><code>$http_x_forwarded_for</code>: Encabezado X-Forwarded-For (útil para identificar la IP original del cliente cuando está detrás de un proxy).</li>
</ul>
</div><h1>Configuración de Registros de Errores</h1>
<div class='content'><p>Los registros de errores capturan problemas encontrados por el servidor. Puede especificar el archivo de registro y el nivel de detalle.</p>
</div><h2>Configuración Básica</h2>
<div class='content'><p>Para habilitar el registro de errores, agregue la siguiente directiva a su archivo de configuración de NGINX:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICBlcnJvcl9sb2cgL3Zhci9sb2cvbmdpbngvZXJyb3IubG9nIHdhcm47Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    error_log /var/log/nginx/error.log warn;
}</pre></div><div class='content'></div><h2>Niveles de Registro</h2>
<div class='content'><p>NGINX soporta varios niveles de registro:</p>
<ul>
<li><code>debug</code>: Información detallada de depuración.</li>
<li><code>info</code>: Mensajes informativos.</li>
<li><code>notice</code>: Condiciones normales pero significativas.</li>
<li><code>warn</code>: Condiciones de advertencia.</li>
<li><code>error</code>: Condiciones de error.</li>
<li><code>crit</code>: Condiciones críticas.</li>
<li><code>alert</code>: Acción inmediata requerida.</li>
<li><code>emerg</code>: El sistema es inutilizable.</li>
</ul>
</div><h2>Ejemplo Explicado</h2>
<div class='content'><p>El nivel <code>warn</code> en el ejemplo anterior registrará advertencias, errores, problemas críticos, alertas y emergencias.</p>
</div><h1>Gestión de Archivos de Registro</h1>
<div class='content'><p>La gestión adecuada de registros es crucial para mantener el rendimiento del servidor y asegurar que los registros sean útiles.</p>
</div><h2>Rotación de Registros</h2>
<div class='content'><p>La rotación de registros evita que los archivos de registro crezcan indefinidamente, lo que puede consumir espacio en disco y dificultar el análisis de registros. Use herramientas como <code>logrotate</code> para gestionar la rotación de registros.</p>
</div><h2>Ejemplo de Configuración de Logrotate</h2>
<div class='content'><p>Cree un archivo de configuración para los registros de NGINX (<code>/etc/logrotate.d/nginx</code>):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("L3Zhci9sb2cvbmdpbngvKi5sb2cgewogICAgZGFpbHkKICAgIG1pc3NpbmdvawogICAgcm90YXRlIDE0CiAgICBjb21wcmVzcwogICAgZGVsYXljb21wcmVzcwogICAgbm90aWZlbXB0eQogICAgY3JlYXRlIDA2NDAgd3d3LWRhdGEgYWRtCiAgICBzaGFyZWRzY3JpcHRzCiAgICBwb3N0cm90YXRlCiAgICAgICAgWyAtZiAvdmFyL3J1bi9uZ2lueC5waWQgXSAmJiBraWxsIC1VU1IxIGBjYXQgL3Zhci9ydW4vbmdpbngucGlkYAogICAgZW5kc2NyaXB0Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>/var/log/nginx/*.log {
    daily
    missingok
    rotate 14
    compress
    delaycompress
    notifempty
    create 0640 www-data adm
    sharedscripts
    postrotate
        [ -f /var/run/nginx.pid ] &amp;&amp; kill -USR1 `cat /var/run/nginx.pid`
    endscript
}</pre></div><div class='content'></div><h2>Ejemplo Explicado</h2>
<div class='content'><ul>
<li><code>daily</code>: Rotar registros diariamente.</li>
<li><code>missingok</code>: Ignorar archivos de registro faltantes.</li>
<li><code>rotate 14</code>: Mantener 14 días de registros.</li>
<li><code>compress</code>: Comprimir archivos de registro antiguos.</li>
<li><code>delaycompress</code>: Retrasar la compresión hasta la siguiente rotación.</li>
<li><code>notifempty</code>: No rotar archivos de registro vacíos.</li>
<li><code>create 0640 www-data adm</code>: Establecer permisos y propiedad para nuevos archivos de registro.</li>
<li><code>sharedscripts</code>: Ejecutar el script post-rotación solo una vez.</li>
<li><code>postrotate</code>: Comando para ejecutar después de la rotación (recargar NGINX para iniciar nuevos archivos de registro).</li>
</ul>
</div><h1>Técnicas Avanzadas de Gestión de Registros</h1>
<div class='content'><p>Para una gestión avanzada de registros, considere usar soluciones de registro centralizado y herramientas de análisis de registros.</p>
</div><h2>Registro Centralizado</h2>
<div class='content'><p>El registro centralizado agrega registros de múltiples servidores en una sola ubicación para una gestión y análisis más fáciles. Se pueden usar herramientas como ELK Stack (Elasticsearch, Logstash, Kibana) o Graylog.</p>
</div><h2>Ejemplo de Configuración de ELK Stack</h2>
<div class='content'><ol>
<li><strong>Elasticsearch</strong>: Almacena e indexa datos de registro.</li>
<li><strong>Logstash</strong>: Recoge, procesa y reenvía datos de registro.</li>
<li><strong>Kibana</strong>: Visualiza datos de registro.</li>
</ol>
</div><h2>Análisis de Registros</h2>
<div class='content'><p>El análisis de registros ayuda a identificar tendencias, detectar anomalías y solucionar problemas. Se pueden usar herramientas como <code>GoAccess</code> o <code>AWStats</code> para el análisis de registros en tiempo real.</p>
</div><h1>Conclusión</h1>
<div class='content'><p>El registro y la gestión de registros son componentes críticos para mantener un servidor NGINX. Al configurar registros de acceso y errores, gestionar archivos de registro y utilizar técnicas avanzadas como el registro centralizado y el análisis de registros, puede asegurarse de que su servidor opere eficientemente y los problemas se aborden de manera oportuna. La gestión adecuada de registros no solo ayuda en la resolución de problemas, sino que también proporciona información valiosa sobre el rendimiento del servidor y el comportamiento del usuario.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='monitoring-nginx'>&#x25C4;Monitoreo de NGINX</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Registro y Gestión de Registros</a>
	</div>
	<div class='col-4 text-end'>
					<a href='troubleshooting-common-issues'>Solución de Problemas Comunes &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
