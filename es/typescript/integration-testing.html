<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pruebas de Integración en TypeScript</title>

    <link rel="alternate" href="https://campusempresa.com/es/typescript/integration-testing" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/typescript/integration-testing" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/typescript/integration-testing" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/typescript/integration-testing" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-jest'>&#x25C4;Pruebas Unitarias con Jest</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Pruebas de Integración en TypeScript</a>
	</div>
	<div class='col-4 text-end'>
					<a href='mocking-tests'>Mocking en Pruebas &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Las pruebas de integración son un aspecto crucial del desarrollo de software que asegura que diferentes módulos o servicios dentro de una aplicación funcionen juntos como se espera. En esta sección, exploraremos cómo realizar pruebas de integración en TypeScript, desde conceptos básicos hasta técnicas avanzadas.</p>
</div><h1>¿Qué son las Pruebas de Integración?</h1>
<div class='content'><p>Las pruebas de integración implican probar la interacción entre diferentes componentes o módulos de una aplicación para asegurar que funcionen juntos correctamente. A diferencia de las pruebas unitarias, que se centran en componentes individuales, las pruebas de integración verifican la funcionalidad combinada de múltiples componentes.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Módulos/Componentes</strong>: Partes individuales de una aplicación que necesitan ser probadas juntas.</li>
<li><strong>Suites de Pruebas</strong>: Colecciones de casos de prueba que verifican las interacciones entre módulos.</li>
<li><strong>Mocks y Stubs</strong>: Herramientas utilizadas para simular el comportamiento de componentes reales durante las pruebas.</li>
<li><strong>Ejecutor de Pruebas</strong>: Una herramienta que ejecuta las pruebas y reporta los resultados.</li>
</ul>
</div><h1>Configuración de Pruebas de Integración en TypeScript</h1>
<div class='content'><p>Antes de sumergirnos en la escritura de pruebas de integración, configuremos nuestro entorno.</p>
</div><h2>Instalación de Paquetes Necesarios</h2>
<div class='content'><p>Para realizar pruebas de integración en TypeScript, necesitarás los siguientes paquetes:</p>
<ul>
<li><strong>Jest</strong>: Un popular marco de pruebas.</li>
<li><strong>ts-jest</strong>: Un preprocesador de TypeScript para Jest.</li>
<li><strong>Supertest</strong>: Una biblioteca para probar servidores HTTP.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgLS1zYXZlLWRldiBqZXN0IHRzLWplc3QgQHR5cGVzL2plc3Qgc3VwZXJ0ZXN0"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install --save-dev jest ts-jest @types/jest supertest</pre></div><div class='content'></div><h2>Configuración de Jest</h2>
<div class='content'><p>Crea un archivo <code>jest.config.js</code> para configurar Jest para TypeScript:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlLmV4cG9ydHMgPSB7CiAgcHJlc2V0OiAndHMtamVzdCcsCiAgdGVzdEVudmlyb25tZW50OiAnbm9kZScsCiAgdGVzdE1hdGNoOiBbJyoqLz8oKi4pKyhzcGVjfHRlc3QpLlt0al1zPyh4KSddLAp9Ow=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
  testMatch: ['**/?(*.)+(spec|test).[tj]s?(x)'],
};</pre></div><div class='content'></div><h1>Escritura de Pruebas de Integración</h1>
<div class='content'><p>Escribamos algunas pruebas de integración para una aplicación simple de Express.</p>
</div><h2>Aplicación de Ejemplo</h2>
<div class='content'><p>Considera un servidor básico de Express con un solo endpoint:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2FwcC50cwppbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJzsKCmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsKCmFwcC5nZXQoJy9hcGkvZ3JlZXQnLCAocmVxLCByZXMpID0+IHsKICByZXMuanNvbih7IG1lc3NhZ2U6ICfCoUhvbGEsIE11bmRvIScgfSk7Cn0pOwoKZXhwb3J0IGRlZmF1bHQgYXBwOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/app.ts
import express from 'express';

const app = express();

app.get('/api/greet', (req, res) =&gt; {
  res.json({ message: '&iexcl;Hola, Mundo!' });
});

export default app;</pre></div><div class='content'></div><h2>Prueba de Integración para la Aplicación de Ejemplo</h2>
<div class='content'><p>Crea un archivo de prueba para verificar el endpoint <code>/api/greet</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gdGVzdHMvYXBwLnRlc3QudHMKaW1wb3J0IHJlcXVlc3QgZnJvbSAnc3VwZXJ0ZXN0JzsKaW1wb3J0IGFwcCBmcm9tICcuLi9zcmMvYXBwJzsKCmRlc2NyaWJlKCdHRVQgL2FwaS9ncmVldCcsICgpID0+IHsKICBpdCgnZGViZXLDrWEgZGV2b2x2ZXIgdW4gbWVuc2FqZSBkZSBzYWx1ZG8nLCBhc3luYyAoKSA9PiB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYXBwKS5nZXQoJy9hcGkvZ3JlZXQnKTsKICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTsKICAgIGV4cGVjdChyZXNwb25zZS5ib2R5Lm1lc3NhZ2UpLnRvQmUoJ8KhSG9sYSwgTXVuZG8hJyk7CiAgfSk7Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// tests/app.test.ts
import request from 'supertest';
import app from '../src/app';

describe('GET /api/greet', () =&gt; {
  it('deber&iacute;a devolver un mensaje de saludo', async () =&gt; {
    const response = await request(app).get('/api/greet');
    expect(response.status).toBe(200);
    expect(response.body.message).toBe('&iexcl;Hola, Mundo!');
  });
});</pre></div><div class='content'></div><h2>Ejecución de las Pruebas</h2>
<div class='content'><p>Para ejecutar las pruebas, añade un script a tu <code>package.json</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("InNjcmlwdHMiOiB7CiAgInRlc3QiOiAiamVzdCIKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&quot;scripts&quot;: {
  &quot;test&quot;: &quot;jest&quot;
}</pre></div><div class='content'><p>Luego, ejecuta las pruebas usando el siguiente comando:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIHRlc3Q="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm test</pre></div><div class='content'></div><h1>Técnicas Avanzadas de Pruebas de Integración</h1>
<div class='content'><p>A medida que tu aplicación crece, puede que necesites técnicas más avanzadas para manejar escenarios complejos.</p>
</div><h2>Uso de Mocks y Stubs</h2>
<div class='content'><p>Los mocks y stubs pueden simular el comportamiento de servicios o componentes externos. Por ejemplo, si tu aplicación interactúa con una base de datos, puedes usar una base de datos simulada durante las pruebas.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2RhdGFiYXNlLnRzCmV4cG9ydCBjb25zdCBnZXRVc2VyID0gKGlkOiBudW1iZXIpID0+IHsKICAvLyBTaW11bGEgbGxhbWFkYSBhIGxhIGJhc2UgZGUgZGF0b3MKICByZXR1cm4geyBpZCwgbmFtZTogJ0pvaG4gRG9lJyB9Owp9OwoKLy8gdGVzdHMvZGF0YWJhc2UudGVzdC50cwppbXBvcnQgeyBnZXRVc2VyIH0gZnJvbSAnLi4vc3JjL2RhdGFiYXNlJzsKCmplc3QubW9jaygnLi4vc3JjL2RhdGFiYXNlJywgKCkgPT4gKHsKICBnZXRVc2VyOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgaWQ6IDEsIG5hbWU6ICdVc3VhcmlvIFNpbXVsYWRvJyB9KSwKfSkpOwoKZGVzY3JpYmUoJ01vY2sgZGUgQmFzZSBkZSBEYXRvcycsICgpID0+IHsKICBpdCgnZGViZXLDrWEgZGV2b2x2ZXIgdW4gdXN1YXJpbyBzaW11bGFkbycsICgpID0+IHsKICAgIGNvbnN0IHVzZXIgPSBnZXRVc2VyKDEpOwogICAgZXhwZWN0KHVzZXIubmFtZSkudG9CZSgnVXN1YXJpbyBTaW11bGFkbycpOwogIH0pOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/database.ts
export const getUser = (id: number) =&gt; {
  // Simula llamada a la base de datos
  return { id, name: 'John Doe' };
};

// tests/database.test.ts
import { getUser } from '../src/database';

jest.mock('../src/database', () =&gt; ({
  getUser: jest.fn().mockReturnValue({ id: 1, name: 'Usuario Simulado' }),
}));

describe('Mock de Base de Datos', () =&gt; {
  it('deber&iacute;a devolver un usuario simulado', () =&gt; {
    const user = getUser(1);
    expect(user.name).toBe('Usuario Simulado');
  });
});</pre></div><div class='content'></div><h2>Pruebas de Código Asíncrono</h2>
<div class='content'><p>Las pruebas de integración a menudo implican operaciones asíncronas. Jest proporciona utilidades para manejar código asíncrono.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2FzeW5jU2VydmljZS50cwpleHBvcnQgY29uc3QgZmV0Y2hEYXRhID0gYXN5bmMgKCkgPT4gewogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHJlc29sdmUoJ0RhdG9zIG9idGVuaWRvcycpOwogICAgfSwgMTAwMCk7CiAgfSk7Cn07CgovLyB0ZXN0cy9hc3luY1NlcnZpY2UudGVzdC50cwppbXBvcnQgeyBmZXRjaERhdGEgfSBmcm9tICcuLi9zcmMvYXN5bmNTZXJ2aWNlJzsKCmRlc2NyaWJlKCdTZXJ2aWNpbyBBc8OtbmNyb25vJywgKCkgPT4gewogIGl0KCdkZWJlcsOtYSBvYnRlbmVyIGRhdG9zJywgYXN5bmMgKCkgPT4gewogICAgY29uc3QgZGF0YSA9IGF3YWl0IGZldGNoRGF0YSgpOwogICAgZXhwZWN0KGRhdGEpLnRvQmUoJ0RhdG9zIG9idGVuaWRvcycpOwogIH0pOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/asyncService.ts
export const fetchData = async () =&gt; {
  return new Promise((resolve) =&gt; {
    setTimeout(() =&gt; {
      resolve('Datos obtenidos');
    }, 1000);
  });
};

// tests/asyncService.test.ts
import { fetchData } from '../src/asyncService';

describe('Servicio As&iacute;ncrono', () =&gt; {
  it('deber&iacute;a obtener datos', async () =&gt; {
    const data = await fetchData();
    expect(data).toBe('Datos obtenidos');
  });
});</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Las pruebas de integración en TypeScript aseguran que diferentes partes de tu aplicación funcionen juntas como se espera. Al configurar un entorno de pruebas adecuado, escribir casos de prueba completos y usar técnicas avanzadas como mocks y pruebas asíncronas, puedes mejorar significativamente la fiabilidad y robustez de tu aplicación. Recuerda, el objetivo de las pruebas de integración es detectar problemas que pueden no ser evidentes en las pruebas unitarias, proporcionando un mayor nivel de confianza en tu base de código.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-jest'>&#x25C4;Pruebas Unitarias con Jest</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Pruebas de Integración en TypeScript</a>
	</div>
	<div class='col-4 text-end'>
					<a href='mocking-tests'>Mocking en Pruebas &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
