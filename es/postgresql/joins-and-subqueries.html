<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uniones y Subconsultas</title>

    <link rel="alternate" href="https://campusempresa.com/es/postgresql/joins-and-subqueries" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/postgresql/joins-and-subqueries" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/postgresql/joins-and-subqueries" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/postgresql/joins-and-subqueries" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='updating-and-deleting-data'>&#x25C4; Actualización y Eliminación de Datos</a></div><div class='col-6 text-end'><a href='aggregate-functions'>Funciones de Agregación &#x25BA;</a></div></div><div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En esta sección, exploraremos dos conceptos fundamentales en SQL: Uniones y Subconsultas. Estos conceptos son cruciales para consultar datos de múltiples tablas y realizar operaciones complejas de recuperación de datos en PostgreSQL.</p>
</div><h1>Uniones</h1>
<div class='content'><p>Las uniones se utilizan para combinar filas de dos o más tablas basadas en una columna relacionada entre ellas.</p>
</div><h2>Tipos de Uniones</h2>
<div class='content'><ul>
<li><strong>Inner Join (Unión Interna)</strong>: Devuelve registros que tienen valores coincidentes en ambas tablas.</li>
<li><strong>Left (Outer) Join (Unión Externa Izquierda)</strong>: Devuelve todos los registros de la tabla izquierda y los registros coincidentes de la tabla derecha. El resultado es NULL desde el lado derecho si no hay coincidencia.</li>
<li><strong>Right (Outer) Join (Unión Externa Derecha)</strong>: Devuelve todos los registros de la tabla derecha y los registros coincidentes de la tabla izquierda. El resultado es NULL desde el lado izquierdo cuando no hay coincidencia.</li>
<li><strong>Full (Outer) Join (Unión Externa Completa)</strong>: Devuelve todos los registros cuando hay una coincidencia en la tabla izquierda o derecha. Los registros que no coinciden en ninguna de las tablas tendrán NULL.</li>
</ul>
</div><h2>Ejemplo de Inner Join</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGVtcGxveWVlcy5uYW1lLCBkZXBhcnRtZW50cy5kZXBhcnRtZW50X25hbWUKRlJPTSBlbXBsb3llZXMKSU5ORVIgSk9JTiBkZXBhcnRtZW50cyBPTiBlbXBsb3llZXMuZGVwYXJ0bWVudF9pZCA9IGRlcGFydG1lbnRzLmlkOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT employees.name, departments.department_name
FROM employees
INNER JOIN departments ON employees.department_id = departments.id;</pre></div><div class='content'><ul>
<li>Esta consulta selecciona los nombres de los empleados y los nombres de sus departamentos correspondientes donde hay una coincidencia entre <code>employees.department_id</code> y <code>departments.id</code>.</li>
</ul>
</div><h2>Ejemplo de Left Join</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGVtcGxveWVlcy5uYW1lLCBkZXBhcnRtZW50cy5kZXBhcnRtZW50X25hbWUKRlJPTSBlbXBsb3llZXMKTEVGVCBKT0lOIGRlcGFydG1lbnRzIE9OIGVtcGxveWVlcy5kZXBhcnRtZW50X2lkID0gZGVwYXJ0bWVudHMuaWQ7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT employees.name, departments.department_name
FROM employees
LEFT JOIN departments ON employees.department_id = departments.id;</pre></div><div class='content'><ul>
<li>Esta consulta selecciona todos los empleados y los nombres de sus departamentos correspondientes. Si un empleado no pertenece a ningún departamento, el nombre del departamento será NULL.</li>
</ul>
</div><h2>Ejemplo de Right Join</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGVtcGxveWVlcy5uYW1lLCBkZXBhcnRtZW50cy5kZXBhcnRtZW50X25hbWUKRlJPTSBlbXBsb3llZXMKUklHSFQgSk9JTiBkZXBhcnRtZW50cyBPTiBlbXBsb3llZXMuZGVwYXJ0bWVudF9pZCA9IGRlcGFydG1lbnRzLmlkOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT employees.name, departments.department_name
FROM employees
RIGHT JOIN departments ON employees.department_id = departments.id;</pre></div><div class='content'><ul>
<li>Esta consulta selecciona todos los departamentos y sus empleados correspondientes. Si un departamento no tiene empleados, el nombre del empleado será NULL.</li>
</ul>
</div><h2>Ejemplo de Full Join</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGVtcGxveWVlcy5uYW1lLCBkZXBhcnRtZW50cy5kZXBhcnRtZW50X25hbWUKRlJPTSBlbXBsb3llZXMKRlVMTCBKT0lOIGRlcGFydG1lbnRzIE9OIGVtcGxveWVlcy5kZXBhcnRtZW50X2lkID0gZGVwYXJ0bWVudHMuaWQ7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT employees.name, departments.department_name
FROM employees
FULL JOIN departments ON employees.department_id = departments.id;</pre></div><div class='content'><ul>
<li>Esta consulta selecciona todos los empleados y todos los departamentos. Si un empleado no pertenece a ningún departamento o un departamento no tiene empleados, los campos correspondientes serán NULL.</li>
</ul>
</div><h1>Subconsultas</h1>
<div class='content'><p>Las subconsultas, también conocidas como consultas internas o consultas anidadas, son consultas dentro de otra consulta SQL. Pueden usarse en varias partes de una instrucción SQL, incluyendo las cláusulas SELECT, FROM, WHERE y HAVING.</p>
</div><h2>Subconsulta en la Cláusula SELECT</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIG5hbWUsIAogICAgICAgKFNFTEVDVCBkZXBhcnRtZW50X25hbWUgCiAgICAgICAgRlJPTSBkZXBhcnRtZW50cyAKICAgICAgICBXSEVSRSBkZXBhcnRtZW50cy5pZCA9IGVtcGxveWVlcy5kZXBhcnRtZW50X2lkKSBBUyBkZXBhcnRtZW50X25hbWUKRlJPTSBlbXBsb3llZXM7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT name, 
       (SELECT department_name 
        FROM departments 
        WHERE departments.id = employees.department_id) AS department_name
FROM employees;</pre></div><div class='content'><ul>
<li>Esta consulta selecciona el nombre de cada empleado y usa una subconsulta para encontrar el nombre del departamento correspondiente.</li>
</ul>
</div><h2>Subconsulta en la Cláusula WHERE</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIG5hbWUKRlJPTSBlbXBsb3llZXMKV0hFUkUgZGVwYXJ0bWVudF9pZCA9IChTRUxFQ1QgaWQgCiAgICAgICAgICAgICAgICAgICAgICAgRlJPTSBkZXBhcnRtZW50cyAKICAgICAgICAgICAgICAgICAgICAgICBXSEVSRSBkZXBhcnRtZW50X25hbWUgPSAnU2FsZXMnKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT name
FROM employees
WHERE department_id = (SELECT id 
                       FROM departments 
                       WHERE department_name = 'Sales');</pre></div><div class='content'><ul>
<li>Esta consulta selecciona los nombres de los empleados que pertenecen al departamento de 'Ventas'.</li>
</ul>
</div><h2>Subconsulta en la Cláusula FROM</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGRlcGFydG1lbnRfbmFtZSwgYXZnX3NhbGFyeQpGUk9NIChTRUxFQ1QgZGVwYXJ0bWVudF9pZCwgQVZHKHNhbGFyeSkgQVMgYXZnX3NhbGFyeQogICAgICBGUk9NIGVtcGxveWVlcwogICAgICBHUk9VUCBCWSBkZXBhcnRtZW50X2lkKSBBUyBkZXB0X2F2ZwpKT0lOIGRlcGFydG1lbnRzIE9OIGRlcHRfYXZnLmRlcGFydG1lbnRfaWQgPSBkZXBhcnRtZW50cy5pZDs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT department_name, avg_salary
FROM (SELECT department_id, AVG(salary) AS avg_salary
      FROM employees
      GROUP BY department_id) AS dept_avg
JOIN departments ON dept_avg.department_id = departments.id;</pre></div><div class='content'><ul>
<li>Esta consulta calcula el salario promedio para cada departamento y luego une el resultado con la tabla de departamentos para obtener los nombres de los departamentos.</li>
</ul>
</div><h2>Subconsulta en la Cláusula HAVING</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGRlcGFydG1lbnRfaWQsIEFWRyhzYWxhcnkpIEFTIGF2Z19zYWxhcnkKRlJPTSBlbXBsb3llZXMKR1JPVVAgQlkgZGVwYXJ0bWVudF9pZApIQVZJTkcgQVZHKHNhbGFyeSkgPiAoU0VMRUNUIEFWRyhzYWxhcnkpIEZST00gZW1wbG95ZWVzKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT department_id, AVG(salary) AS avg_salary
FROM employees
GROUP BY department_id
HAVING AVG(salary) &gt; (SELECT AVG(salary) FROM employees);</pre></div><div class='content'><ul>
<li>Esta consulta selecciona departamentos donde el salario promedio es mayor que el salario promedio general de todos los empleados.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Las uniones y subconsultas son herramientas poderosas en PostgreSQL que te permiten realizar operaciones complejas de recuperación de datos. Las uniones se utilizan para combinar datos de múltiples tablas, mientras que las subconsultas te permiten anidar consultas dentro de otras consultas para lograr resultados más refinados. Comprender y dominar estos conceptos mejorará significativamente tu capacidad para trabajar con bases de datos relacionales y realizar análisis de datos sofisticados.</p>
</div><div class='row navigation'><div class='col-6'><a href='updating-and-deleting-data'>&#x25C4; Actualización y Eliminación de Datos</a></div><div class='col-6 text-end'><a href='aggregate-functions'>Funciones de Agregación &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
