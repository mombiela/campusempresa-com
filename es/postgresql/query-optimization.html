<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimización de Consultas en PostgreSQL</title>

    <link rel="alternate" href="https://campusempresa.com/es/postgresql/query-optimization" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/postgresql/query-optimization" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/postgresql/query-optimization" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/postgresql/query-optimization" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='creating-and-managing-indexes'>&#x25C4; Creación y Gestión de Índices</a></div><div class='col-6 text-end'><a href='analyzing-query-performance'>Análisis del Rendimiento de Consultas &#x25BA;</a></div></div><div class='content'></div><h1>Introducción a la Optimización de Consultas</h1>
<div class='content'><p>La optimización de consultas es un aspecto crucial de la gestión de bases de datos que asegura que tus consultas se ejecuten de manera eficiente. En PostgreSQL, el optimizador de consultas juega un papel vital en determinar la forma más eficiente de ejecutar una consulta.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Planificador de Consultas</strong>: El componente de PostgreSQL que determina la forma más eficiente de ejecutar una consulta.</li>
<li><strong>Plan de Ejecución</strong>: La estrategia elegida por el planificador de consultas para ejecutar una consulta.</li>
<li><strong>Optimización Basada en Costos</strong>: PostgreSQL utiliza un optimizador basado en costos que asigna un costo a diferentes planes de ejecución y elige el que tiene el costo más bajo.</li>
<li><strong>Índices</strong>: Estructuras de datos que mejoran la velocidad de las operaciones de recuperación de datos en una tabla de la base de datos.</li>
</ul>
</div><h1>Entendiendo el Planificador de Consultas</h1>
<div class='content'><p>El planificador de consultas analiza diferentes posibles planes de ejecución y selecciona el que tiene el costo estimado más bajo.</p>
</div><h2>Ejemplo</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVhQTEFJTiBTRUxFQ1QgKiBGUk9NIGVtcGxveWVlcyBXSEVSRSBkZXBhcnRtZW50ID0gJ1NhbGVzJzs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>EXPLAIN SELECT * FROM employees WHERE department = 'Sales';</pre></div><div class='content'><ul>
<li><code>EXPLAIN</code> se usa para mostrar el plan de ejecución de una consulta sin ejecutarla realmente.</li>
<li>La salida mostrará los pasos que PostgreSQL tomará para ejecutar la consulta.</li>
</ul>
</div><h1>Uso de Índices</h1>
<div class='content'><p>Los índices son esenciales para optimizar el rendimiento de las consultas. Permiten que la base de datos encuentre filas más rápidamente que escaneando toda la tabla.</p>
</div><h2>Creación de un Índice</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIElOREVYIGlkeF9kZXBhcnRtZW50IE9OIGVtcGxveWVlcyhkZXBhcnRtZW50KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE INDEX idx_department ON employees(department);</pre></div><div class='content'><ul>
<li>Este comando crea un índice en la columna <code>department</code> de la tabla <code>employees</code>.</li>
<li>Después de crear el índice, las consultas que filtren por <code>department</code> serán más rápidas.</li>
</ul>
</div><h2>Ejemplo con Índice</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVhQTEFJTiBTRUxFQ1QgKiBGUk9NIGVtcGxveWVlcyBXSEVSRSBkZXBhcnRtZW50ID0gJ1NhbGVzJzs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>EXPLAIN SELECT * FROM employees WHERE department = 'Sales';</pre></div><div class='content'><ul>
<li>Después de crear el índice, el plan de ejecución debería mostrar que se está utilizando el índice.</li>
</ul>
</div><h1>Análisis de Planes de Ejecución</h1>
<div class='content'><p>Entender la salida de <code>EXPLAIN</code> es crucial para optimizar consultas.</p>
</div><h2>Ejemplo de Salida</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U2VxIFNjYW4gb24gZW1wbG95ZWVzICAoY29zdD0wLjAwLi4zNS41MCByb3dzPTUgd2lkdGg9MTAwKQogIEZpbHRlcjogKGRlcGFydG1lbnQgPSAnU2FsZXMnOjp0ZXh0KQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Seq Scan on employees  (cost=0.00..35.50 rows=5 width=100)
  Filter: (department = 'Sales'::text)</pre></div><div class='content'><ul>
<li><strong>Seq Scan</strong>: Indica un escaneo secuencial, lo que significa que la base de datos está escaneando toda la tabla.</li>
<li><strong>Cost</strong>: El costo estimado de la consulta. Los costos más bajos son mejores.</li>
<li><strong>Rows</strong>: El número estimado de filas que se devolverán.</li>
<li><strong>Width</strong>: El ancho promedio de las filas en bytes.</li>
</ul>
</div><h2>Plan de Ejecución Mejorado con Índice</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SW5kZXggU2NhbiB1c2luZyBpZHhfZGVwYXJ0bWVudCBvbiBlbXBsb3llZXMgIChjb3N0PTAuMTUuLjguMjAgcm93cz01IHdpZHRoPTEwMCkKICBJbmRleCBDb25kOiAoZGVwYXJ0bWVudCA9ICdTYWxlcyc6OnRleHQp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Index Scan using idx_department on employees  (cost=0.15..8.20 rows=5 width=100)
  Index Cond: (department = 'Sales'::text)</pre></div><div class='content'><ul>
<li><strong>Index Scan</strong>: Indica que se está utilizando el índice, lo cual generalmente es más rápido que un escaneo secuencial.</li>
</ul>
</div><h1>Optimización de Joins</h1>
<div class='content'><p>Los joins pueden ser operaciones costosas, y optimizarlos es crucial para el rendimiento.</p>
</div><h2>Tipos de Joins</h2>
<div class='content'><ul>
<li><strong>Nested Loop Join</strong>: Adecuado para conjuntos de datos pequeños.</li>
<li><strong>Hash Join</strong>: Eficiente para conjuntos de datos más grandes.</li>
<li><strong>Merge Join</strong>: Útil cuando ambos conjuntos de datos están ordenados.</li>
</ul>
</div><h2>Ejemplo</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVhQTEFJTiBTRUxFQ1QgZS5uYW1lLCBkLm5hbWUgCkZST00gZW1wbG95ZWVzIGUgCkpPSU4gZGVwYXJ0bWVudHMgZCBPTiBlLmRlcGFydG1lbnRfaWQgPSBkLmlkOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>EXPLAIN SELECT e.name, d.name 
FROM employees e 
JOIN departments d ON e.department_id = d.id;</pre></div><div class='content'><ul>
<li>El plan de ejecución mostrará el tipo de join utilizado y su costo.</li>
</ul>
</div><h1>Uso de `ANALYZE` para Mejores Estadísticas</h1>
<div class='content'><p>PostgreSQL utiliza estadísticas para tomar decisiones sobre los planes de ejecución. Mantener estas estadísticas actualizadas es esencial.</p>
</div><h2>Ejecución de `ANALYZE`</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QU5BTFlaRSBlbXBsb3llZXM7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ANALYZE employees;</pre></div><div class='content'><ul>
<li>Este comando actualiza las estadísticas para la tabla <code>employees</code>, ayudando al planificador de consultas a tomar mejores decisiones.</li>
</ul>
</div><h1>Técnicas Avanzadas de Optimización de Consultas</h1>
<div class='content'><p>Para usuarios avanzados, hay varias técnicas para optimizar aún más las consultas.</p>
</div><h2>Particionamiento</h2>
<div class='content'><p>Particionar una tabla grande en piezas más pequeñas y manejables puede mejorar el rendimiento.</p>
</div><h2>Ejemplo</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIGVtcGxveWVlc18yMDIzIFBBUlRJVElPTiBPRiBlbXBsb3llZXMgCkZPUiBWQUxVRVMgRlJPTSAoJzIwMjMtMDEtMDEnKSBUTyAoJzIwMjMtMTItMzEnKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE employees_2023 PARTITION OF employees 
FOR VALUES FROM ('2023-01-01') TO ('2023-12-31');</pre></div><div class='content'><ul>
<li>Este comando crea una partición para la tabla <code>employees</code> para el año 2023.</li>
</ul>
</div><h2>Uso de `VACUUM`</h2>
<div class='content'><p>Ejecutar <code>VACUUM</code> regularmente ayuda a recuperar almacenamiento y actualizar estadísticas.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VkFDVVVNIEZVTEwgZW1wbG95ZWVzOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>VACUUM FULL employees;</pre></div><div class='content'><ul>
<li>Este comando recupera almacenamiento y actualiza estadísticas para la tabla <code>employees</code>.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>La optimización de consultas en PostgreSQL implica entender y utilizar el planificador de consultas, crear y usar índices, analizar planes de ejecución, optimizar joins y mantener estadísticas actualizadas. Siguiendo estas prácticas, puedes asegurar que tus consultas se ejecuten de manera eficiente, aprovechando al máximo las potentes capacidades de PostgreSQL.</p>
</div><div class='row navigation'><div class='col-6'><a href='creating-and-managing-indexes'>&#x25C4; Creación y Gestión de Índices</a></div><div class='col-6 text-end'><a href='analyzing-query-performance'>Análisis del Rendimiento de Consultas &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
