<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Copia de Seguridad y Restauración</title>

    <link rel="alternate" href="https://campusempresa.com/es/postgresql/backup-and-restore" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/postgresql/backup-and-restore" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/postgresql/backup-and-restore" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/postgresql/backup-and-restore" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Proyecto</a>
				<a href="about">Sobre nosotros</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donaciones</a>
				<a href="licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducción</h1>
<div class='content'><p>Las operaciones de copia de seguridad y restauración son críticas para la gestión de bases de datos. Aseguran la seguridad, integridad y disponibilidad de los datos en caso de fallos de hardware, problemas de software o errores humanos. Esta sección cubrirá los conceptos básicos de la creación de copias de seguridad y la restauración de datos en PostgreSQL, progresando desde técnicas para principiantes hasta técnicas avanzadas.</p>
</div><h1>Por Qué Son Importantes las Copias de Seguridad y la Restauración</h1>
<div class='content'><ul>
<li><strong>Protección de Datos</strong>: Protege contra la pérdida de datos.</li>
<li><strong>Recuperación ante Desastres</strong>: Permite la recuperación de fallos catastróficos.</li>
<li><strong>Integridad de Datos</strong>: Asegura la consistencia y precisión de los datos.</li>
<li><strong>Cumplimiento</strong>: Cumple con los requisitos regulatorios para la retención y recuperación de datos.</li>
</ul>
</div><h1>Tipos de Copias de Seguridad</h1>
<div class='content'><ol>
<li><strong>Copias de Seguridad Lógicas</strong>:
<ul>
<li>Utiliza comandos SQL para volcar el contenido de la base de datos.</li>
<li>Adecuado para bases de datos más pequeñas y más fácil de gestionar.</li>
</ul>
</li>
<li><strong>Copias de Seguridad Físicas</strong>:
<ul>
<li>Copia los archivos reales de la base de datos.</li>
<li>Adecuado para bases de datos más grandes y más rápido de restaurar.</li>
</ul>
</li>
</ol>
</div><h1>Copias de Seguridad Lógicas con `pg_dump`</h1>
<h2>Uso Básico</h2>
<div class='content'><p><code>pg_dump</code> es una utilidad para hacer una copia de seguridad de una base de datos PostgreSQL en un script o archivo de archivo.</p>
<h4>Ejemplo: Hacer una Copia de Seguridad de una Base de Datos</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGdfZHVtcCAtVSB1c2VybmFtZSAtVyAtRiBjIC1iIC12IC1mIG15ZGIuYmFja3VwIG15ZGI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pg_dump -U username -W -F c -b -v -f mydb.backup mydb</pre></div><div class='content'><ul>
<li><code>-U username</code>: Especifica el usuario de la base de datos.</li>
<li><code>-W</code>: Solicita la contraseña.</li>
<li><code>-F c</code>: Especifica el formato (personalizado).</li>
<li><code>-b</code>: Incluye objetos grandes.</li>
<li><code>-v</code>: Modo detallado.</li>
<li><code>-f mydb.backup</code>: Archivo de salida.</li>
<li><code>mydb</code>: Nombre de la base de datos.</li>
</ul>
</div><h2>Restaurar una Copia de Seguridad Lógica</h2>
<div class='content'><p><code>pg_restore</code> se utiliza para restaurar una base de datos PostgreSQL desde un archivo creado por <code>pg_dump</code>.</p>
<h4>Ejemplo: Restaurar una Base de Datos</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGdfcmVzdG9yZSAtVSB1c2VybmFtZSAtVyAtZCBteWRiIC12IG15ZGIuYmFja3Vw"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pg_restore -U username -W -d mydb -v mydb.backup</pre></div><div class='content'><ul>
<li><code>-U username</code>: Especifica el usuario de la base de datos.</li>
<li><code>-W</code>: Solicita la contraseña.</li>
<li><code>-d mydb</code>: Base de datos de destino.</li>
<li><code>-v</code>: Modo detallado.</li>
<li><code>mydb.backup</code>: Archivo de copia de seguridad.</li>
</ul>
</div><h1>Copias de Seguridad Físicas con `pg_basebackup`</h1>
<h2>Uso Básico</h2>
<div class='content'><p><code>pg_basebackup</code> es una utilidad para tomar copias de seguridad base de un clúster de bases de datos PostgreSQL en funcionamiento.</p>
<h4>Ejemplo: Tomar una Copia de Seguridad Física</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGdfYmFzZWJhY2t1cCAtVSB1c2VybmFtZSAtVyAtRCAvcGF0aC90by9iYWNrdXAgLUZwIC1YcyAtUA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pg_basebackup -U username -W -D /path/to/backup -Fp -Xs -P</pre></div><div class='content'><ul>
<li><code>-U username</code>: Especifica el usuario de la base de datos.</li>
<li><code>-W</code>: Solicita la contraseña.</li>
<li><code>-D /path/to/backup</code>: Directorio de destino.</li>
<li><code>-Fp</code>: Formato simple.</li>
<li><code>-Xs</code>: Incluye archivos WAL.</li>
<li><code>-P</code>: Muestra el progreso.</li>
</ul>
</div><h2>Restaurar una Copia de Seguridad Física</h2>
<div class='content'><p>Para restaurar una copia de seguridad física, necesitas detener el servidor PostgreSQL, reemplazar el directorio de datos con la copia de seguridad y arrancar el servidor nuevamente.</p>
<h4>Ejemplo: Restaurar una Copia de Seguridad Física</h4>
<ol>
<li><strong>Detener el servidor PostgreSQL</strong>:
<pre><code class="language-sh">pg_ctl stop -D /path/to/data
</code></pre>
</li>
<li><strong>Reemplazar el directorio de datos</strong>:
<pre><code class="language-sh">rm -rf /path/to/data/*
cp -r /path/to/backup/* /path/to/data/
</code></pre>
</li>
<li><strong>Arrancar el servidor PostgreSQL</strong>:
<pre><code class="language-sh">pg_ctl start -D /path/to/data
</code></pre>
</li>
</ol>
</div><h1>Técnicas Avanzadas de Copia de Seguridad y Restauración</h1>
<h2>Recuperación a un Punto en el Tiempo (PITR)</h2>
<div class='content'><p>PITR te permite restaurar la base de datos a un punto específico en el tiempo.</p>
<h4>Pasos para PITR</h4>
<ol>
<li><strong>Tomar una copia de seguridad base</strong>:
<pre><code class="language-sh">pg_basebackup -U username -W -D /path/to/backup -Fp -Xs -P
</code></pre>
</li>
<li><strong>Habilitar la archivación WAL</strong> en <code>postgresql.conf</code>:
<pre><code class="language-conf">archive_mode = on
archive_command = 'cp %p /path/to/archive/%f'
</code></pre>
</li>
<li><strong>Restaurar la copia de seguridad base</strong>:
<pre><code class="language-sh">rm -rf /path/to/data/*
cp -r /path/to/backup/* /path/to/data/
</code></pre>
</li>
<li><strong>Restaurar archivos WAL</strong>:
<pre><code class="language-sh">cp /path/to/archive/* /path/to/data/pg_wal/
</code></pre>
</li>
<li><strong>Crear un archivo <code>recovery.conf</code></strong> en el directorio de datos:
<pre><code class="language-conf">restore_command = 'cp /path/to/archive/%f %p'
recovery_target_time = 'YYYY-MM-DD HH:MM:SS'
</code></pre>
</li>
<li><strong>Arrancar el servidor PostgreSQL</strong>:
<pre><code class="language-sh">pg_ctl start -D /path/to/data
</code></pre>
</li>
</ol>
</div><h1>Resumen</h1>
<div class='content'><ul>
<li><strong>Copias de Seguridad Lógicas</strong>: Usa <code>pg_dump</code> y <code>pg_restore</code> para bases de datos más pequeñas.</li>
<li><strong>Copias de Seguridad Físicas</strong>: Usa <code>pg_basebackup</code> para bases de datos más grandes.</li>
<li><strong>Técnicas Avanzadas</strong>: Implementa PITR para necesidades de recuperación precisas.</li>
</ul>
<p>Al dominar estas técnicas de copia de seguridad y restauración, puedes asegurar la seguridad e integridad de tus bases de datos PostgreSQL, preparándote bien para manejar cualquier emergencia relacionada con los datos.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
