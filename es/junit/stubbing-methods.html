<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulación de Métodos en JUnit</title>

    <link rel="alternate" href="https://campusempresa.com/es/junit/stubbing-methods" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/junit/stubbing-methods" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/junit/stubbing-methods" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/junit/stubbing-methods" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-mocks'>&#x25C4;Creación de Mocks</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Simulación de Métodos en JUnit</a>
	</div>
	<div class='col-4 text-end'>
					<a href='verifying-behavior'>Verificación de Comportamiento &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>La simulación de métodos es un concepto crucial en las pruebas unitarias, que te permite controlar el comportamiento de las dependencias en tus pruebas. Este tema te guiará desde los conceptos básicos hasta las técnicas avanzadas de simulación de métodos utilizando JUnit y Mockito.</p>
</div><h1>¿Qué es la Simulación?</h1>
<div class='content'><ul>
<li><strong>Definición</strong>: La simulación es el proceso de crear un &quot;stub&quot; o un objeto simulado que imita el comportamiento de objetos reales.</li>
<li><strong>Propósito</strong>: Aísla la unidad de trabajo que se está probando proporcionando respuestas controladas de las dependencias.</li>
</ul>
</div><h1>Configuración de JUnit y Mockito</h1>
<div class='content'><p>Antes de profundizar en la simulación, asegúrate de tener JUnit y Mockito configurados en tu proyecto.</p>
</div><h2>Dependencia de Maven</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcuanVuaXQuanVwaXRlcjwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPmp1bml0LWp1cGl0ZXItZW5naW5lPC9hcnRpZmFjdElkPgogICAgPHZlcnNpb24+NS43LjA8L3ZlcnNpb24+CiAgICA8c2NvcGU+dGVzdDwvc2NvcGU+CjwvZGVwZW5kZW5jeT4KPGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcubW9ja2l0bzwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPm1vY2tpdG8tY29yZTwvYXJ0aWZhY3RJZD4KICAgIDx2ZXJzaW9uPjMuNi4wPC92ZXJzaW9uPgogICAgPHNjb3BlPnRlc3Q8L3Njb3BlPgo8L2RlcGVuZGVuY3k+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependency&gt;
    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
    &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;
    &lt;version&gt;5.7.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mockito&lt;/groupId&gt;
    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
    &lt;version&gt;3.6.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'></div><h2>Dependencia de Gradle</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVzdEltcGxlbWVudGF0aW9uICdvcmcuanVuaXQuanVwaXRlcjpqdW5pdC1qdXBpdGVyLWVuZ2luZTo1LjcuMCcKdGVzdEltcGxlbWVudGF0aW9uICdvcmcubW9ja2l0bzptb2NraXRvLWNvcmU6My42LjAn"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>testImplementation 'org.junit.jupiter:junit-jupiter-engine:5.7.0'
testImplementation 'org.mockito:mockito-core:3.6.0'</pre></div><div class='content'></div><h1>Simulación Básica con Mockito</h1>
<h2>Creación de un Stub</h2>
<div class='content'><p>Para crear un stub, necesitas usar el método <code>Mockito.mock()</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHN0YXRpYyBvcmcubW9ja2l0by5Nb2NraXRvLio7CmltcG9ydCBvcmcuanVuaXQuanVwaXRlci5hcGkuVGVzdDsKaW1wb3J0IHN0YXRpYyBvcmcuanVuaXQuanVwaXRlci5hcGkuQXNzZXJ0aW9ucy4qOwoKY2xhc3MgTXlTZXJ2aWNlVGVzdCB7CgogICAgQFRlc3QKICAgIHZvaWQgdGVzdFNlcnZpY2VNZXRob2QoKSB7CiAgICAgICAgLy8gQ3JlYXIgdW4gb2JqZXRvIHNpbXVsYWRvCiAgICAgICAgTXlEZXBlbmRlbmN5IGRlcGVuZGVuY3kgPSBtb2NrKE15RGVwZW5kZW5jeS5jbGFzcyk7CgogICAgICAgIC8vIERlZmluaXIgZWwgY29tcG9ydGFtaWVudG8gZGVsIHNpbXVsYWRvCiAgICAgICAgd2hlbihkZXBlbmRlbmN5LnNvbWVNZXRob2QoKSkudGhlblJldHVybigic3R1YmJlZCByZXNwb25zZSIpOwoKICAgICAgICAvLyBVc2FyIGVsIHNpbXVsYWRvIGVuIHR1IHNlcnZpY2lvCiAgICAgICAgTXlTZXJ2aWNlIHNlcnZpY2UgPSBuZXcgTXlTZXJ2aWNlKGRlcGVuZGVuY3kpOwogICAgICAgIFN0cmluZyByZXN1bHQgPSBzZXJ2aWNlLnBlcmZvcm1BY3Rpb24oKTsKCiAgICAgICAgLy8gVmVyaWZpY2FyIGVsIHJlc3VsdGFkbwogICAgICAgIGFzc2VydEVxdWFscygic3R1YmJlZCByZXNwb25zZSIsIHJlc3VsdCk7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import static org.mockito.Mockito.*;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

class MyServiceTest {

    @Test
    void testServiceMethod() {
        // Crear un objeto simulado
        MyDependency dependency = mock(MyDependency.class);

        // Definir el comportamiento del simulado
        when(dependency.someMethod()).thenReturn(&quot;stubbed response&quot;);

        // Usar el simulado en tu servicio
        MyService service = new MyService(dependency);
        String result = service.performAction();

        // Verificar el resultado
        assertEquals(&quot;stubbed response&quot;, result);
    }
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>Creación del Simulado</strong>: <code>MyDependency dependency = mock(MyDependency.class);</code>
<ul>
<li>Esto crea un objeto simulado de <code>MyDependency</code>.</li>
</ul>
</li>
<li><strong>Simulación</strong>: <code>when(dependency.someMethod()).thenReturn(&quot;stubbed response&quot;);</code>
<ul>
<li>Esto le dice al objeto simulado que devuelva &quot;stubbed response&quot; cuando se llame a <code>someMethod()</code>.</li>
</ul>
</li>
<li><strong>Uso del Simulado</strong>: El simulado se pasa al servicio, que lo usa como si fuera una dependencia real.</li>
<li><strong>Verificación</strong>: La prueba verifica que el servicio devuelve la respuesta simulada esperada.</li>
</ul>
</div><h1>Técnicas Avanzadas de Simulación</h1>
<h2>Simulación con Argumentos</h2>
<div class='content'><p>Puedes simular métodos para que devuelvan diferentes valores según los argumentos de entrada.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("d2hlbihkZXBlbmRlbmN5LnNvbWVNZXRob2QoImlucHV0MSIpKS50aGVuUmV0dXJuKCJyZXNwb25zZTEiKTsKd2hlbihkZXBlbmRlbmN5LnNvbWVNZXRob2QoImlucHV0MiIpKS50aGVuUmV0dXJuKCJyZXNwb25zZTIiKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>when(dependency.someMethod(&quot;input1&quot;)).thenReturn(&quot;response1&quot;);
when(dependency.someMethod(&quot;input2&quot;)).thenReturn(&quot;response2&quot;);</pre></div><div class='content'></div><h2>Lanzamiento de Excepciones</h2>
<div class='content'><p>También puedes simular métodos para que lancen excepciones.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("d2hlbihkZXBlbmRlbmN5LnNvbWVNZXRob2QoKSkudGhlblRocm93KG5ldyBSdW50aW1lRXhjZXB0aW9uKCJTdHViYmVkIGV4Y2VwdGlvbiIpKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>when(dependency.someMethod()).thenThrow(new RuntimeException(&quot;Stubbed exception&quot;));</pre></div><div class='content'></div><h2>Simulación de Métodos Void</h2>
<div class='content'><p>Para métodos que devuelven void, usa <code>doNothing()</code>, <code>doThrow()</code>, etc.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9Ob3RoaW5nKCkud2hlbihkZXBlbmRlbmN5KS52b2lkTWV0aG9kKCk7CmRvVGhyb3cobmV3IFJ1bnRpbWVFeGNlcHRpb24oIlN0dWJiZWQgZXhjZXB0aW9uIikpLndoZW4oZGVwZW5kZW5jeSkudm9pZE1ldGhvZCgpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>doNothing().when(dependency).voidMethod();
doThrow(new RuntimeException(&quot;Stubbed exception&quot;)).when(dependency).voidMethod();</pre></div><div class='content'></div><h2>Simulación de Llamadas Consecutivas</h2>
<div class='content'><p>Puedes definir una secuencia de respuestas para llamadas consecutivas.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("d2hlbihkZXBlbmRlbmN5LnNvbWVNZXRob2QoKSkKICAgIC50aGVuUmV0dXJuKCJyZXNwb25zZTEiKQogICAgLnRoZW5SZXR1cm4oInJlc3BvbnNlMiIpCiAgICAudGhlblRocm93KG5ldyBSdW50aW1lRXhjZXB0aW9uKCJTdHViYmVkIGV4Y2VwdGlvbiIpKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>when(dependency.someMethod())
    .thenReturn(&quot;response1&quot;)
    .thenReturn(&quot;response2&quot;)
    .thenThrow(new RuntimeException(&quot;Stubbed exception&quot;));</pre></div><div class='content'></div><h1>Mejores Prácticas</h1>
<div class='content'><ul>
<li><strong>Manténlo Simple</strong>: Solo simula lo que es necesario para la prueba.</li>
<li><strong>Evita la Sobre-Simulación</strong>: Demasiada simulación puede hacer que las pruebas sean difíciles de leer y mantener.</li>
<li><strong>Usa Anotaciones</strong>: Usa las anotaciones <code>@Mock</code> y <code>@InjectMocks</code> para simplificar la creación e inyección de simulados.</li>
</ul>
</div><h2>Ejemplo con Anotaciones</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5tb2NraXRvLkluamVjdE1vY2tzOwppbXBvcnQgb3JnLm1vY2tpdG8uTW9jazsKaW1wb3J0IG9yZy5tb2NraXRvLmp1bml0Lmp1cGl0ZXIuTW9ja2l0b0V4dGVuc2lvbjsKaW1wb3J0IG9yZy5qdW5pdC5qdXBpdGVyLmFwaS5leHRlbnNpb24uRXh0ZW5kV2l0aDsKCkBFeHRlbmRXaXRoKE1vY2tpdG9FeHRlbnNpb24uY2xhc3MpCmNsYXNzIE15U2VydmljZVRlc3QgewoKICAgIEBNb2NrCiAgICBNeURlcGVuZGVuY3kgZGVwZW5kZW5jeTsKCiAgICBASW5qZWN0TW9ja3MKICAgIE15U2VydmljZSBzZXJ2aWNlOwoKICAgIEBUZXN0CiAgICB2b2lkIHRlc3RTZXJ2aWNlTWV0aG9kKCkgewogICAgICAgIHdoZW4oZGVwZW5kZW5jeS5zb21lTWV0aG9kKCkpLnRoZW5SZXR1cm4oInN0dWJiZWQgcmVzcG9uc2UiKTsKCiAgICAgICAgU3RyaW5nIHJlc3VsdCA9IHNlcnZpY2UucGVyZm9ybUFjdGlvbigpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoInN0dWJiZWQgcmVzcG9uc2UiLCByZXN1bHQpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.junit.jupiter.MockitoExtension;
import org.junit.jupiter.api.extension.ExtendWith;

@ExtendWith(MockitoExtension.class)
class MyServiceTest {

    @Mock
    MyDependency dependency;

    @InjectMocks
    MyService service;

    @Test
    void testServiceMethod() {
        when(dependency.someMethod()).thenReturn(&quot;stubbed response&quot;);

        String result = service.performAction();

        assertEquals(&quot;stubbed response&quot;, result);
    }
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>La simulación de métodos es una técnica poderosa en las pruebas unitarias que te permite aislar la unidad bajo prueba controlando el comportamiento de sus dependencias. Al dominar tanto las técnicas básicas como avanzadas de simulación, puedes escribir pruebas más efectivas y mantenibles. Recuerda seguir las mejores prácticas para mantener tus pruebas limpias y legibles.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-mocks'>&#x25C4;Creación de Mocks</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Simulación de Métodos en JUnit</a>
	</div>
	<div class='col-4 text-end'>
					<a href='verifying-behavior'>Verificación de Comportamiento &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
