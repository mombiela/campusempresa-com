<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducción al Mocking</title>

    <link rel="alternate" href="https://campusempresa.com/es/junit/introduction-to-mocking" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/junit/introduction-to-mocking" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/junit/introduction-to-mocking" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/junit/introduction-to-mocking" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='organizing-tests'>&#x25C4; Organización de Pruebas</a></div><div class='col-6 text-end'><a href='using-mockito-with-junit'>Uso de Mockito con JUnit &#x25BA;</a></div></div><div class='content'></div><h1>¿Qué es el Mocking?</h1>
<div class='content'><p>El Mocking es una técnica utilizada en las pruebas unitarias para simular el comportamiento de objetos reales y complejos. Esto te permite aislar el código que estás probando y enfocarte en su funcionalidad sin preocuparte por las dependencias.</p>
<ul>
<li><strong>Propósito</strong>: Probar una unidad de código en aislamiento.</li>
<li><strong>Beneficios</strong>:
<ul>
<li><strong>Aislamiento</strong>: Probar solo el código en cuestión.</li>
<li><strong>Velocidad</strong>: Pruebas más rápidas ya que no se invocan dependencias externas.</li>
<li><strong>Control</strong>: Simular varios escenarios y casos límite.</li>
</ul>
</li>
</ul>
</div><h1>¿Por qué usar Mocking en JUnit?</h1>
<div class='content'><p>JUnit es un marco de pruebas popular para Java. El Mocking en JUnit ayuda a:</p>
<ul>
<li>Aislar la unidad de código que se está probando.</li>
<li>Simular diferentes comportamientos de las dependencias.</li>
<li>Asegurar que las pruebas sean confiables y repetibles.</li>
</ul>
</div><h1>Frameworks de Mocking</h1>
<div class='content'><p>Varios frameworks pueden ser utilizados para el Mocking en JUnit, incluyendo:</p>
<ul>
<li><strong>Mockito</strong>: El framework de mocking más utilizado.</li>
<li><strong>EasyMock</strong>: Otra opción popular, aunque menos utilizada que Mockito.</li>
<li><strong>JMock</strong>: Un framework más antiguo, menos utilizado hoy en día.</li>
</ul>
</div><h1>Configuración de Mockito</h1>
<div class='content'><p>Para usar Mockito con JUnit, necesitas agregar la dependencia de Mockito a tu proyecto.</p>
</div><h2>Dependencia de Maven</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcubW9ja2l0bzwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPm1vY2tpdG8tY29yZTwvYXJ0aWZhY3RJZD4KICAgIDx2ZXJzaW9uPjQuMC4wPC92ZXJzaW9uPgogICAgPHNjb3BlPnRlc3Q8L3Njb3BlPgo8L2RlcGVuZGVuY3k+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependency&gt;
    &lt;groupId&gt;org.mockito&lt;/groupId&gt;
    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
    &lt;version&gt;4.0.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'></div><h2>Dependencia de Gradle</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVzdEltcGxlbWVudGF0aW9uICdvcmcubW9ja2l0bzptb2NraXRvLWNvcmU6NC4wLjAn"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>testImplementation 'org.mockito:mockito-core:4.0.0'</pre></div><div class='content'></div><h1>Ejemplo Básico de Mocking</h1>
<div class='content'><p>Comencemos con un ejemplo simple para entender cómo funciona el mocking.</p>
</div><h2>Escenario de Ejemplo</h2>
<div class='content'><p>Supongamos que tenemos una clase <code>UserService</code> que depende de un <code>UserRepository</code> para obtener datos de usuario.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlIHsKICAgIHByaXZhdGUgVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnk7CgogICAgcHVibGljIFVzZXJTZXJ2aWNlKFVzZXJSZXBvc2l0b3J5IHVzZXJSZXBvc2l0b3J5KSB7CiAgICAgICAgdGhpcy51c2VyUmVwb3NpdG9yeSA9IHVzZXJSZXBvc2l0b3J5OwogICAgfQoKICAgIHB1YmxpYyBVc2VyIGdldFVzZXJCeUlkKGludCBpZCkgewogICAgICAgIHJldHVybiB1c2VyUmVwb3NpdG9yeS5maW5kQnlJZChpZCk7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class UserService {
    private UserRepository userRepository;

    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public User getUserById(int id) {
        return userRepository.findById(id);
    }
}</pre></div><div class='content'></div><h2>Creando un Mock</h2>
<div class='content'><p>Crearemos un mock de <code>UserRepository</code> para probar <code>UserService</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHN0YXRpYyBvcmcubW9ja2l0by5Nb2NraXRvLio7CmltcG9ydCBvcmcuanVuaXQuanVwaXRlci5hcGkuVGVzdDsKaW1wb3J0IHN0YXRpYyBvcmcuanVuaXQuanVwaXRlci5hcGkuQXNzZXJ0aW9ucy4qOwoKcHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlVGVzdCB7CgogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RHZXRVc2VyQnlJZCgpIHsKICAgICAgICAvLyBDcmVhciB1biBtb2NrIGRlIFVzZXJSZXBvc2l0b3J5CiAgICAgICAgVXNlclJlcG9zaXRvcnkgbW9ja1JlcG9zaXRvcnkgPSBtb2NrKFVzZXJSZXBvc2l0b3J5LmNsYXNzKTsKCiAgICAgICAgLy8gRGVmaW5pciBjb21wb3J0YW1pZW50byBwYXJhIGVsIG1vY2sKICAgICAgICBVc2VyIG1vY2tVc2VyID0gbmV3IFVzZXIoMSwgIkpvaG4gRG9lIik7CiAgICAgICAgd2hlbihtb2NrUmVwb3NpdG9yeS5maW5kQnlJZCgxKSkudGhlblJldHVybihtb2NrVXNlcik7CgogICAgICAgIC8vIElueWVjdGFyIGVsIG1vY2sgZW4gVXNlclNlcnZpY2UKICAgICAgICBVc2VyU2VydmljZSB1c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZShtb2NrUmVwb3NpdG9yeSk7CgogICAgICAgIC8vIExsYW1hciBhbCBtw6l0b2RvIGEgcHJvYmFyCiAgICAgICAgVXNlciB1c2VyID0gdXNlclNlcnZpY2UuZ2V0VXNlckJ5SWQoMSk7CgogICAgICAgIC8vIFZlcmlmaWNhciBlbCByZXN1bHRhZG8KICAgICAgICBhc3NlcnRFcXVhbHMoIkpvaG4gRG9lIiwgdXNlci5nZXROYW1lKCkpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import static org.mockito.Mockito.*;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

public class UserServiceTest {

    @Test
    public void testGetUserById() {
        // Crear un mock de UserRepository
        UserRepository mockRepository = mock(UserRepository.class);

        // Definir comportamiento para el mock
        User mockUser = new User(1, &quot;John Doe&quot;);
        when(mockRepository.findById(1)).thenReturn(mockUser);

        // Inyectar el mock en UserService
        UserService userService = new UserService(mockRepository);

        // Llamar al m&eacute;todo a probar
        User user = userService.getUserById(1);

        // Verificar el resultado
        assertEquals(&quot;John Doe&quot;, user.getName());
    }
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>Creando un Mock</strong>: <code>mock(UserRepository.class)</code> crea un objeto mock de <code>UserRepository</code>.</li>
<li><strong>Definiendo Comportamiento</strong>: <code>when(mockRepository.findById(1)).thenReturn(mockUser)</code> especifica que cuando se llame a <code>findById(1)</code> en el mock, debe devolver <code>mockUser</code>.</li>
<li><strong>Inyectando el Mock</strong>: El mock se pasa al constructor de <code>UserService</code>.</li>
<li><strong>Verificando el Resultado</strong>: La prueba verifica si el usuario devuelto tiene el nombre esperado.</li>
</ul>
</div><h1>Técnicas Avanzadas de Mocking</h1>
<h2>Verificando Interacciones</h2>
<div class='content'><p>Puedes verificar si ciertos métodos fueron llamados en el mock.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmVyaWZ5KG1vY2tSZXBvc2l0b3J5KS5maW5kQnlJZCgxKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>verify(mockRepository).findById(1);</pre></div><div class='content'></div><h2>Stubbing de Métodos Void</h2>
<div class='content'><p>Para métodos que devuelven <code>void</code>, puedes usar <code>doNothing()</code>, <code>doThrow()</code>, etc.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9Ob3RoaW5nKCkud2hlbihtb2NrUmVwb3NpdG9yeSkuZGVsZXRlQnlJZCgxKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>doNothing().when(mockRepository).deleteById(1);</pre></div><div class='content'></div><h2>Matchers de Argumentos</h2>
<div class='content'><p>Mockito proporciona matchers para especificar coincidencias de argumentos flexibles.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("d2hlbihtb2NrUmVwb3NpdG9yeS5maW5kQnlJZChhbnlJbnQoKSkpLnRoZW5SZXR1cm4obW9ja1VzZXIpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>when(mockRepository.findById(anyInt())).thenReturn(mockUser);</pre></div><div class='content'></div><h1>Resumen</h1>
<div class='content'><p>El Mocking es una técnica poderosa en las pruebas unitarias que te permite aislar el código bajo prueba simulando dependencias. Usando frameworks como Mockito con JUnit, puedes crear mocks, definir su comportamiento y verificar interacciones para asegurar que tu código funcione como se espera. Esto ayuda a escribir pruebas confiables, rápidas y mantenibles.</p>
<p>Dominando el mocking, puedes mejorar significativamente la calidad de tus pruebas unitarias y, en consecuencia, la robustez de tu base de código.</p>
</div><div class='row navigation'><div class='col-6'><a href='organizing-tests'>&#x25C4; Organización de Pruebas</a></div><div class='col-6 text-end'><a href='using-mockito-with-junit'>Uso de Mockito con JUnit &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
