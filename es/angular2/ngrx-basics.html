<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conceptos Básicos de NgRx</title>

    <link rel="alternate" href="https://campusempresa.com/es/angular2/ngrx-basics" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/angular2/ngrx-basics" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/angular2/ngrx-basics" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/angular2/ngrx-basics" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Proyecto</a>
				<a href="about">Sobre nosotros</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donaciones</a>
				<a href="licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>NgRx es una biblioteca de gestión de estado reactiva para aplicaciones Angular, inspirada en Redux. Ayuda a gestionar el estado de tu aplicación de una manera predecible, facilitando la depuración y las pruebas.</p>
</div><h1>Introducción a NgRx</h1>
<div class='content'><p>NgRx proporciona una forma de gestionar el estado utilizando una única tienda, que es una única fuente de verdad para el estado de tu aplicación. Utiliza observables para manejar operaciones asíncronas y cambios de estado.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Store</strong>: La única fuente de verdad para el estado de tu aplicación.</li>
<li><strong>Actions</strong>: Objetos simples que describen lo que sucedió en la aplicación.</li>
<li><strong>Reducers</strong>: Funciones que especifican cómo cambia el estado de la aplicación en respuesta a las acciones.</li>
<li><strong>Selectors</strong>: Funciones que seleccionan una porción del estado.</li>
<li><strong>Effects</strong>: Efectos secundarios que manejan operaciones asíncronas.</li>
</ul>
</div><h1>Configuración de NgRx</h1>
<div class='content'><p>Para empezar con NgRx, necesitas instalar los paquetes necesarios.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgQG5ncngvc3RvcmUgQG5ncngvZWZmZWN0cyBAbmdyeC9zdG9yZS1kZXZ0b29scw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install @ngrx/store @ngrx/effects @ngrx/store-devtools</pre></div><div class='content'></div><h2>Configuración de la Tienda</h2>
<div class='content'><p>Crea un nuevo archivo para tu estado y configura la tienda en tu <code>AppModule</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gYXBwLnN0YXRlLnRzCmltcG9ydCB7IEFjdGlvblJlZHVjZXJNYXAgfSBmcm9tICdAbmdyeC9zdG9yZSc7CmltcG9ydCB7IGNvdW50ZXJSZWR1Y2VyIH0gZnJvbSAnLi9jb3VudGVyLnJlZHVjZXInOwoKZXhwb3J0IGludGVyZmFjZSBBcHBTdGF0ZSB7CiAgY291bnRlcjogbnVtYmVyOwp9CgpleHBvcnQgY29uc3QgcmVkdWNlcnM6IEFjdGlvblJlZHVjZXJNYXA8QXBwU3RhdGU+ID0gewogIGNvdW50ZXI6IGNvdW50ZXJSZWR1Y2VyCn07"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// app.state.ts
import { ActionReducerMap } from '@ngrx/store';
import { counterReducer } from './counter.reducer';

export interface AppState {
  counter: number;
}

export const reducers: ActionReducerMap&lt;AppState&gt; = {
  counter: counterReducer
};</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gYXBwLm1vZHVsZS50cwppbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgeyBCcm93c2VyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7CmltcG9ydCB7IFN0b3JlTW9kdWxlIH0gZnJvbSAnQG5ncngvc3RvcmUnOwppbXBvcnQgeyByZWR1Y2VycyB9IGZyb20gJy4vYXBwLnN0YXRlJzsKCkBOZ01vZHVsZSh7CiAgZGVjbGFyYXRpb25zOiBbQXBwQ29tcG9uZW50XSwKICBpbXBvcnRzOiBbCiAgICBCcm93c2VyTW9kdWxlLAogICAgU3RvcmVNb2R1bGUuZm9yUm9vdChyZWR1Y2VycykKICBdLAogIHByb3ZpZGVyczogW10sCiAgYm9vdHN0cmFwOiBbQXBwQ29tcG9uZW50XQp9KQpleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHt9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// app.module.ts
import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { StoreModule } from '@ngrx/store';
import { reducers } from './app.state';

@NgModule({
  declarations: [AppComponent],
  imports: [
    BrowserModule,
    StoreModule.forRoot(reducers)
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule {}</pre></div><div class='content'></div><h1>Acciones</h1>
<div class='content'><p>Las acciones son objetos simples que describen lo que sucedió en la aplicación.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gY291bnRlci5hY3Rpb25zLnRzCmltcG9ydCB7IGNyZWF0ZUFjdGlvbiB9IGZyb20gJ0BuZ3J4L3N0b3JlJzsKCmV4cG9ydCBjb25zdCBpbmNyZW1lbnQgPSBjcmVhdGVBY3Rpb24oJ1tDb3VudGVyXSBJbmNyZW1lbnQnKTsKZXhwb3J0IGNvbnN0IGRlY3JlbWVudCA9IGNyZWF0ZUFjdGlvbignW0NvdW50ZXJdIERlY3JlbWVudCcpOwpleHBvcnQgY29uc3QgcmVzZXQgPSBjcmVhdGVBY3Rpb24oJ1tDb3VudGVyXSBSZXNldCcpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// counter.actions.ts
import { createAction } from '@ngrx/store';

export const increment = createAction('[Counter] Increment');
export const decrement = createAction('[Counter] Decrement');
export const reset = createAction('[Counter] Reset');</pre></div><div class='content'></div><h1>Reducers</h1>
<div class='content'><p>Los reducers especifican cómo cambia el estado de la aplicación en respuesta a las acciones.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gY291bnRlci5yZWR1Y2VyLnRzCmltcG9ydCB7IGNyZWF0ZVJlZHVjZXIsIG9uIH0gZnJvbSAnQG5ncngvc3RvcmUnOwppbXBvcnQgeyBpbmNyZW1lbnQsIGRlY3JlbWVudCwgcmVzZXQgfSBmcm9tICcuL2NvdW50ZXIuYWN0aW9ucyc7CgpleHBvcnQgY29uc3QgaW5pdGlhbFN0YXRlID0gMDsKCmNvbnN0IF9jb3VudGVyUmVkdWNlciA9IGNyZWF0ZVJlZHVjZXIoCiAgaW5pdGlhbFN0YXRlLAogIG9uKGluY3JlbWVudCwgc3RhdGUgPT4gc3RhdGUgKyAxKSwKICBvbihkZWNyZW1lbnQsIHN0YXRlID0+IHN0YXRlIC0gMSksCiAgb24ocmVzZXQsIHN0YXRlID0+IDApCik7CgpleHBvcnQgZnVuY3Rpb24gY291bnRlclJlZHVjZXIoc3RhdGUsIGFjdGlvbikgewogIHJldHVybiBfY291bnRlclJlZHVjZXIoc3RhdGUsIGFjdGlvbik7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// counter.reducer.ts
import { createReducer, on } from '@ngrx/store';
import { increment, decrement, reset } from './counter.actions';

export const initialState = 0;

const _counterReducer = createReducer(
  initialState,
  on(increment, state =&gt; state + 1),
  on(decrement, state =&gt; state - 1),
  on(reset, state =&gt; 0)
);

export function counterReducer(state, action) {
  return _counterReducer(state, action);
}</pre></div><div class='content'></div><h1>Selectores</h1>
<div class='content'><p>Los selectores son funciones que seleccionan una porción del estado.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gY291bnRlci5zZWxlY3RvcnMudHMKaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3IsIGNyZWF0ZUZlYXR1cmVTZWxlY3RvciB9IGZyb20gJ0BuZ3J4L3N0b3JlJzsKaW1wb3J0IHsgQXBwU3RhdGUgfSBmcm9tICcuL2FwcC5zdGF0ZSc7CgpleHBvcnQgY29uc3Qgc2VsZWN0Q291bnRlciA9IGNyZWF0ZUZlYXR1cmVTZWxlY3RvcjxBcHBTdGF0ZSwgbnVtYmVyPignY291bnRlcicpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// counter.selectors.ts
import { createSelector, createFeatureSelector } from '@ngrx/store';
import { AppState } from './app.state';

export const selectCounter = createFeatureSelector&lt;AppState, number&gt;('counter');</pre></div><div class='content'></div><h1>Efectos</h1>
<div class='content'><p>Los efectos manejan efectos secundarios y operaciones asíncronas.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gY291bnRlci5lZmZlY3RzLnRzCmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKaW1wb3J0IHsgQWN0aW9ucywgY3JlYXRlRWZmZWN0LCBvZlR5cGUgfSBmcm9tICdAbmdyeC9lZmZlY3RzJzsKaW1wb3J0IHsgaW5jcmVtZW50LCBkZWNyZW1lbnQsIHJlc2V0IH0gZnJvbSAnLi9jb3VudGVyLmFjdGlvbnMnOwppbXBvcnQgeyB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7CgpASW5qZWN0YWJsZSgpCmV4cG9ydCBjbGFzcyBDb3VudGVyRWZmZWN0cyB7CiAgY29uc3RydWN0b3IocHJpdmF0ZSBhY3Rpb25zJDogQWN0aW9ucykge30KCiAgbG9nQWN0aW9ucyQgPSBjcmVhdGVFZmZlY3QoKCkgPT4KICAgIHRoaXMuYWN0aW9ucyQucGlwZSgKICAgICAgb2ZUeXBlKGluY3JlbWVudCwgZGVjcmVtZW50LCByZXNldCksCiAgICAgIHRhcChhY3Rpb24gPT4gY29uc29sZS5sb2coJ0FjdGlvbiBkaXNwYXRjaGVkOicsIGFjdGlvbikpCiAgICApLAogICAgeyBkaXNwYXRjaDogZmFsc2UgfQogICk7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// counter.effects.ts
import { Injectable } from '@angular/core';
import { Actions, createEffect, ofType } from '@ngrx/effects';
import { increment, decrement, reset } from './counter.actions';
import { tap } from 'rxjs/operators';

@Injectable()
export class CounterEffects {
  constructor(private actions$: Actions) {}

  logActions$ = createEffect(() =&gt;
    this.actions$.pipe(
      ofType(increment, decrement, reset),
      tap(action =&gt; console.log('Action dispatched:', action))
    ),
    { dispatch: false }
  );
}</pre></div><div class='content'></div><h1>Uso de NgRx en Componentes</h1>
<div class='content'><p>Inyecta la tienda en tus componentes para despachar acciones y seleccionar el estado.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gY291bnRlci5jb21wb25lbnQudHMKaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IFN0b3JlIH0gZnJvbSAnQG5ncngvc3RvcmUnOwppbXBvcnQgeyBBcHBTdGF0ZSB9IGZyb20gJy4vYXBwLnN0YXRlJzsKaW1wb3J0IHsgaW5jcmVtZW50LCBkZWNyZW1lbnQsIHJlc2V0IH0gZnJvbSAnLi9jb3VudGVyLmFjdGlvbnMnOwppbXBvcnQgeyBzZWxlY3RDb3VudGVyIH0gZnJvbSAnLi9jb3VudGVyLnNlbGVjdG9ycyc7CgpAQ29tcG9uZW50KHsKICBzZWxlY3RvcjogJ2FwcC1jb3VudGVyJywKICB0ZW1wbGF0ZTogYAogICAgPGRpdj4KICAgICAgPGJ1dHRvbiAoY2xpY2spPSJpbmNyZW1lbnQoKSI+SW5jcmVtZW50YXI8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiAoY2xpY2spPSJkZWNyZW1lbnQoKSI+RGVjcmVtZW50YXI8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiAoY2xpY2spPSJyZXNldCgpIj5SZWluaWNpYXI8L2J1dHRvbj4KICAgICAgPGRpdj5DdWVudGEgQWN0dWFsOiB7eyBjb3VudGVyJCB8IGFzeW5jIH19PC9kaXY+CiAgICA8L2Rpdj4KICBgCn0pCmV4cG9ydCBjbGFzcyBDb3VudGVyQ29tcG9uZW50IHsKICBjb3VudGVyJCA9IHRoaXMuc3RvcmUuc2VsZWN0KHNlbGVjdENvdW50ZXIpOwoKICBjb25zdHJ1Y3Rvcihwcml2YXRlIHN0b3JlOiBTdG9yZTxBcHBTdGF0ZT4pIHt9CgogIGluY3JlbWVudCgpIHsKICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goaW5jcmVtZW50KCkpOwogIH0KCiAgZGVjcmVtZW50KCkgewogICAgdGhpcy5zdG9yZS5kaXNwYXRjaChkZWNyZW1lbnQoKSk7CiAgfQoKICByZXNldCgpIHsKICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2gocmVzZXQoKSk7CiAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// counter.component.ts
import { Component } from '@angular/core';
import { Store } from '@ngrx/store';
import { AppState } from './app.state';
import { increment, decrement, reset } from './counter.actions';
import { selectCounter } from './counter.selectors';

@Component({
  selector: 'app-counter',
  template: `
    &lt;div&gt;
      &lt;button (click)=&quot;increment()&quot;&gt;Incrementar&lt;/button&gt;
      &lt;button (click)=&quot;decrement()&quot;&gt;Decrementar&lt;/button&gt;
      &lt;button (click)=&quot;reset()&quot;&gt;Reiniciar&lt;/button&gt;
      &lt;div&gt;Cuenta Actual: {{ counter$ | async }}&lt;/div&gt;
    &lt;/div&gt;
  `
})
export class CounterComponent {
  counter$ = this.store.select(selectCounter);

  constructor(private store: Store&lt;AppState&gt;) {}

  increment() {
    this.store.dispatch(increment());
  }

  decrement() {
    this.store.dispatch(decrement());
  }

  reset() {
    this.store.dispatch(reset());
  }
}</pre></div><div class='content'></div><h1>Resumen</h1>
<div class='content'><p>NgRx proporciona una forma poderosa de gestionar el estado en aplicaciones Angular. Al comprender los conceptos clave de la tienda, acciones, reducers, selectores y efectos, puedes construir aplicaciones escalables y mantenibles. Comienza configurando la tienda, definiendo acciones y reducers, y luego usa selectores y efectos para manejar el estado y los efectos secundarios. Finalmente, integra NgRx en tus componentes para gestionar el estado de manera efectiva.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
