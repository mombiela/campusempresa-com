<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uso de AsyncTask para Redes</title>

    <link rel="alternate" href="https://campusempresa.com/es/androidstudio/using-asynctask-for-networking" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/androidstudio/using-asynctask-for-networking" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/androidstudio/using-asynctask-for-networking" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/androidstudio/using-asynctask-for-networking" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Proyecto</a>
				<a href="about">Sobre nosotros</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donaciones</a>
				<a href="licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En esta sección, exploraremos cómo usar <code>AsyncTask</code> para redes en aplicaciones Android. <code>AsyncTask</code> es una clase que te permite realizar operaciones en segundo plano y publicar resultados en el hilo de la interfaz de usuario sin tener que manipular hilos y manejadores.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>AsyncTask</strong>: Una clase que permite el uso adecuado y fácil del hilo de la interfaz de usuario. Permite realizar operaciones en segundo plano y actualizar el hilo de la interfaz de usuario.</li>
<li><strong>Redes</strong>: El proceso de conectar y comunicarse con servidores remotos para obtener o enviar datos.</li>
</ul>
</div><h1>Entendiendo AsyncTask</h1>
<div class='content'><p><code>AsyncTask</code> está diseñado para ser una clase auxiliar alrededor de <code>Thread</code> y <code>Handler</code> y no constituye un marco de trabajo de subprocesos genérico. <code>AsyncTask</code> es ideal para operaciones cortas (unos pocos segundos como máximo).</p>
</div><h2>Estructura Básica de AsyncTask</h2>
<div class='content'><p>Un <code>AsyncTask</code> se define por tres tipos genéricos:</p>
<ol>
<li><strong>Params</strong>: El tipo de los parámetros enviados a la tarea al ejecutarse.</li>
<li><strong>Progress</strong>: El tipo de las unidades de progreso publicadas durante la computación en segundo plano.</li>
<li><strong>Result</strong>: El tipo del resultado de la computación en segundo plano.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJpdmF0ZSBjbGFzcyBNeUFzeW5jVGFzayBleHRlbmRzIEFzeW5jVGFzazxQYXJhbXMsIFByb2dyZXNzLCBSZXN1bHQ+IHsKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgb25QcmVFeGVjdXRlKCkgewogICAgICAgIC8vIFNlIGVqZWN1dGEgZW4gZWwgaGlsbyBkZSBsYSBpbnRlcmZheiBkZSB1c3VhcmlvIGFudGVzIGRlIHF1ZSBjb21pZW5jZSBsYSBjb21wdXRhY2nDs24gZW4gc2VndW5kbyBwbGFuby4KICAgICAgICAvLyBJbmljaWFsaXphIGN1YWxxdWllciByZWN1cnNvIG5lY2VzYXJpbyBhbnRlcyBkZSBxdWUgY29taWVuY2UgbGEgdGFyZWEuCiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgUmVzdWx0IGRvSW5CYWNrZ3JvdW5kKFBhcmFtcy4uLiBwYXJhbXMpIHsKICAgICAgICAvLyBTZSBlamVjdXRhIGVuIHVuIGhpbG8gZW4gc2VndW5kbyBwbGFuby4KICAgICAgICAvLyBSZWFsaXphIGxhIGNvbXB1dGFjacOzbiBlbiBzZWd1bmRvIHBsYW5vIGFxdcOtLgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBvblByb2dyZXNzVXBkYXRlKFByb2dyZXNzLi4uIHZhbHVlcykgewogICAgICAgIC8vIFNlIGVqZWN1dGEgZW4gZWwgaGlsbyBkZSBsYSBpbnRlcmZheiBkZSB1c3VhcmlvIGRlc3B1w6lzIGRlIGludm9jYXIgcHVibGlzaFByb2dyZXNzLgogICAgICAgIC8vIEFjdHVhbGl6YSBsYSBpbnRlcmZheiBkZSB1c3VhcmlvIGNvbiBlbCBwcm9ncmVzby4KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIG9uUG9zdEV4ZWN1dGUoUmVzdWx0IHJlc3VsdCkgewogICAgICAgIC8vIFNlIGVqZWN1dGEgZW4gZWwgaGlsbyBkZSBsYSBpbnRlcmZheiBkZSB1c3VhcmlvIGRlc3B1w6lzIGRlIHF1ZSBmaW5hbGl6YSBsYSBjb21wdXRhY2nDs24gZW4gc2VndW5kbyBwbGFuby4KICAgICAgICAvLyBBY3R1YWxpemEgbGEgaW50ZXJmYXogZGUgdXN1YXJpbyBjb24gZWwgcmVzdWx0YWRvLgogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>private class MyAsyncTask extends AsyncTask&lt;Params, Progress, Result&gt; {
    @Override
    protected void onPreExecute() {
        // Se ejecuta en el hilo de la interfaz de usuario antes de que comience la computaci&oacute;n en segundo plano.
        // Inicializa cualquier recurso necesario antes de que comience la tarea.
    }

    @Override
    protected Result doInBackground(Params... params) {
        // Se ejecuta en un hilo en segundo plano.
        // Realiza la computaci&oacute;n en segundo plano aqu&iacute;.
        return result;
    }

    @Override
    protected void onProgressUpdate(Progress... values) {
        // Se ejecuta en el hilo de la interfaz de usuario despu&eacute;s de invocar publishProgress.
        // Actualiza la interfaz de usuario con el progreso.
    }

    @Override
    protected void onPostExecute(Result result) {
        // Se ejecuta en el hilo de la interfaz de usuario despu&eacute;s de que finaliza la computaci&oacute;n en segundo plano.
        // Actualiza la interfaz de usuario con el resultado.
    }
}</pre></div><div class='content'></div><h1>Uso de AsyncTask para Redes</h1>
<div class='content'><p>Para realizar operaciones de red utilizando <code>AsyncTask</code>, sigue estos pasos:</p>
</div><h2>Paso 1: Agregar Permiso de Internet</h2>
<div class='content'><p>Primero, asegúrate de que tu aplicación tenga permiso para acceder a internet. Agrega la siguiente línea a tu archivo <code>AndroidManifest.xml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHVzZXMtcGVybWlzc2lvbiBhbmRyb2lkOm5hbWU9ImFuZHJvaWQucGVybWlzc2lvbi5JTlRFUk5FVCIgLz4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</pre></div><div class='content'></div><h2>Paso 2: Crear la Clase AsyncTask</h2>
<div class='content'><p>Crea una nueva clase que extienda <code>AsyncTask</code>. Por ejemplo, vamos a crear una clase que obtenga datos de una URL.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIEZldGNoRGF0YVRhc2sgZXh0ZW5kcyBBc3luY1Rhc2s8U3RyaW5nLCBWb2lkLCBTdHJpbmc+IHsKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgb25QcmVFeGVjdXRlKCkgewogICAgICAgIHN1cGVyLm9uUHJlRXhlY3V0ZSgpOwogICAgICAgIC8vIEluaWNpYWxpemEgY3VhbHF1aWVyIHJlY3Vyc28gbmVjZXNhcmlvIGFudGVzIGRlIHF1ZSBjb21pZW5jZSBsYSB0YXJlYS4KICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCBTdHJpbmcgZG9JbkJhY2tncm91bmQoU3RyaW5nLi4uIHVybHMpIHsKICAgICAgICBTdHJpbmcgcmVzdWx0ID0gIiI7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgVVJMIHVybCA9IG5ldyBVUkwodXJsc1swXSk7CiAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIHVybENvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pIHVybC5vcGVuQ29ubmVjdGlvbigpOwogICAgICAgICAgICBJbnB1dFN0cmVhbSBpbiA9IG5ldyBCdWZmZXJlZElucHV0U3RyZWFtKHVybENvbm5lY3Rpb24uZ2V0SW5wdXRTdHJlYW0oKSk7CiAgICAgICAgICAgIHJlc3VsdCA9IHJlYWRTdHJlYW0oaW4pOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBvblBvc3RFeGVjdXRlKFN0cmluZyByZXN1bHQpIHsKICAgICAgICBzdXBlci5vblBvc3RFeGVjdXRlKHJlc3VsdCk7CiAgICAgICAgLy8gQWN0dWFsaXphIGxhIGludGVyZmF6IGRlIHVzdWFyaW8gY29uIGVsIHJlc3VsdGFkby4KICAgIH0KCiAgICBwcml2YXRlIFN0cmluZyByZWFkU3RyZWFtKElucHV0U3RyZWFtIGluKSB7CiAgICAgICAgQnVmZmVyZWRSZWFkZXIgcmVhZGVyID0gbmV3IEJ1ZmZlcmVkUmVhZGVyKG5ldyBJbnB1dFN0cmVhbVJlYWRlcihpbikpOwogICAgICAgIFN0cmluZ0J1aWxkZXIgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpOwogICAgICAgIFN0cmluZyBsaW5lOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIHdoaWxlICgobGluZSA9IHJlYWRlci5yZWFkTGluZSgpKSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICBzYi5hcHBlbmQobGluZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGluLmNsb3NlKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNiLnRvU3RyaW5nKCk7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class FetchDataTask extends AsyncTask&lt;String, Void, String&gt; {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        // Inicializa cualquier recurso necesario antes de que comience la tarea.
    }

    @Override
    protected String doInBackground(String... urls) {
        String result = &quot;&quot;;
        try {
            URL url = new URL(urls[0]);
            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
            InputStream in = new BufferedInputStream(urlConnection.getInputStream());
            result = readStream(in);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return result;
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        // Actualiza la interfaz de usuario con el resultado.
    }

    private String readStream(InputStream in) {
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        StringBuilder sb = new StringBuilder();
        String line;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sb.toString();
    }
}</pre></div><div class='content'></div><h2>Paso 3: Ejecutar el AsyncTask</h2>
<div class='content'><p>Para ejecutar el <code>AsyncTask</code>, crea una instancia de la clase y llama al método <code>execute</code>, pasando la URL como parámetro.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmV3IEZldGNoRGF0YVRhc2soKS5leGVjdXRlKCJodHRwczovL2FwaS5leGFtcGxlLmNvbS9kYXRhIik7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>new FetchDataTask().execute(&quot;https://api.example.com/data&quot;);</pre></div><div class='content'></div><h1>Ejemplo: Obtener Datos JSON</h1>
<div class='content'><p>Vamos a crear un ejemplo completo donde obtenemos datos JSON de una URL y los mostramos en un <code>TextView</code>.</p>
</div><h2>Paso 1: Archivo de Diseño</h2>
<div class='content'><p>Crea un archivo de diseño <code>activity_main.xml</code> con un <code>TextView</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PExpbmVhckxheW91dCB4bWxuczphbmRyb2lkPSJodHRwOi8vc2NoZW1hcy5hbmRyb2lkLmNvbS9hcGsvcmVzL2FuZHJvaWQiCiAgICBhbmRyb2lkOmxheW91dF93aWR0aD0ibWF0Y2hfcGFyZW50IgogICAgYW5kcm9pZDpsYXlvdXRfaGVpZ2h0PSJtYXRjaF9wYXJlbnQiCiAgICBhbmRyb2lkOm9yaWVudGF0aW9uPSJ2ZXJ0aWNhbCIKICAgIGFuZHJvaWQ6cGFkZGluZz0iMTZkcCI+CgogICAgPFRleHRWaWV3CiAgICAgICAgYW5kcm9pZDppZD0iQCtpZC90ZXh0VmlldyIKICAgICAgICBhbmRyb2lkOmxheW91dF93aWR0aD0ibWF0Y2hfcGFyZW50IgogICAgICAgIGFuZHJvaWQ6bGF5b3V0X2hlaWdodD0id3JhcF9jb250ZW50IgogICAgICAgIGFuZHJvaWQ6dGV4dD0iT2J0ZW5pZW5kbyBkYXRvcy4uLiIKICAgICAgICBhbmRyb2lkOnRleHRTaXplPSIxOHNwIiAvPgo8L0xpbmVhckxheW91dD4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;vertical&quot;
    android:padding=&quot;16dp&quot;&gt;

    &lt;TextView
        android:id=&quot;@+id/textView&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;Obteniendo datos...&quot;
        android:textSize=&quot;18sp&quot; /&gt;
&lt;/LinearLayout&gt;</pre></div><div class='content'></div><h2>Paso 2: MainActivity</h2>
<div class='content'><p>En <code>MainActivity</code>, ejecuta el <code>AsyncTask</code> y actualiza el <code>TextView</code> con los datos obtenidos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIE1haW5BY3Rpdml0eSBleHRlbmRzIEFwcENvbXBhdEFjdGl2aXR5IHsKICAgIHByaXZhdGUgVGV4dFZpZXcgdGV4dFZpZXc7CgogICAgQE92ZXJyaWRlCiAgICBwcm90ZWN0ZWQgdm9pZCBvbkNyZWF0ZShCdW5kbGUgc2F2ZWRJbnN0YW5jZVN0YXRlKSB7CiAgICAgICAgc3VwZXIub25DcmVhdGUoc2F2ZWRJbnN0YW5jZVN0YXRlKTsKICAgICAgICBzZXRDb250ZW50VmlldyhSLmxheW91dC5hY3Rpdml0eV9tYWluKTsKCiAgICAgICAgdGV4dFZpZXcgPSBmaW5kVmlld0J5SWQoUi5pZC50ZXh0Vmlldyk7CiAgICAgICAgbmV3IEZldGNoRGF0YVRhc2soKS5leGVjdXRlKCJodHRwczovL2FwaS5leGFtcGxlLmNvbS9kYXRhIik7CiAgICB9CgogICAgcHJpdmF0ZSBjbGFzcyBGZXRjaERhdGFUYXNrIGV4dGVuZHMgQXN5bmNUYXNrPFN0cmluZywgVm9pZCwgU3RyaW5nPiB7CiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHJvdGVjdGVkIHZvaWQgb25QcmVFeGVjdXRlKCkgewogICAgICAgICAgICBzdXBlci5vblByZUV4ZWN1dGUoKTsKICAgICAgICAgICAgLy8gSW5pY2lhbGl6YSBjdWFscXVpZXIgcmVjdXJzbyBuZWNlc2FyaW8gYW50ZXMgZGUgcXVlIGNvbWllbmNlIGxhIHRhcmVhLgogICAgICAgIH0KCiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHJvdGVjdGVkIFN0cmluZyBkb0luQmFja2dyb3VuZChTdHJpbmcuLi4gdXJscykgewogICAgICAgICAgICBTdHJpbmcgcmVzdWx0ID0gIiI7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBVUkwgdXJsID0gbmV3IFVSTCh1cmxzWzBdKTsKICAgICAgICAgICAgICAgIEh0dHBVUkxDb25uZWN0aW9uIHVybENvbm5lY3Rpb24gPSAoSHR0cFVSTENvbm5lY3Rpb24pIHVybC5vcGVuQ29ubmVjdGlvbigpOwogICAgICAgICAgICAgICAgSW5wdXRTdHJlYW0gaW4gPSBuZXcgQnVmZmVyZWRJbnB1dFN0cmVhbSh1cmxDb25uZWN0aW9uLmdldElucHV0U3RyZWFtKCkpOwogICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVhZFN0cmVhbShpbik7CiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQoKICAgICAgICBAT3ZlcnJpZGUKICAgICAgICBwcm90ZWN0ZWQgdm9pZCBvblBvc3RFeGVjdXRlKFN0cmluZyByZXN1bHQpIHsKICAgICAgICAgICAgc3VwZXIub25Qb3N0RXhlY3V0ZShyZXN1bHQpOwogICAgICAgICAgICB0ZXh0Vmlldy5zZXRUZXh0KHJlc3VsdCk7CiAgICAgICAgfQoKICAgICAgICBwcml2YXRlIFN0cmluZyByZWFkU3RyZWFtKElucHV0U3RyZWFtIGluKSB7CiAgICAgICAgICAgIEJ1ZmZlcmVkUmVhZGVyIHJlYWRlciA9IG5ldyBCdWZmZXJlZFJlYWRlcihuZXcgSW5wdXRTdHJlYW1SZWFkZXIoaW4pKTsKICAgICAgICAgICAgU3RyaW5nQnVpbGRlciBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7CiAgICAgICAgICAgIFN0cmluZyBsaW5lOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgd2hpbGUgKChsaW5lID0gcmVhZGVyLnJlYWRMaW5lKCkpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBzYi5hcHBlbmQobGluZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGluLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gc2IudG9TdHJpbmcoKTsKICAgICAgICB9CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class MainActivity extends AppCompatActivity {
    private TextView textView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        textView = findViewById(R.id.textView);
        new FetchDataTask().execute(&quot;https://api.example.com/data&quot;);
    }

    private class FetchDataTask extends AsyncTask&lt;String, Void, String&gt; {
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            // Inicializa cualquier recurso necesario antes de que comience la tarea.
        }

        @Override
        protected String doInBackground(String... urls) {
            String result = &quot;&quot;;
            try {
                URL url = new URL(urls[0]);
                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
                InputStream in = new BufferedInputStream(urlConnection.getInputStream());
                result = readStream(in);
            } catch (Exception e) {
                e.printStackTrace();
            }
            return result;
        }

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            textView.setText(result);
        }

        private String readStream(InputStream in) {
            BufferedReader reader = new BufferedReader(new InputStreamReader(in));
            StringBuilder sb = new StringBuilder();
            String line;
            try {
                while ((line = reader.readLine()) != null) {
                    sb.append(line);
                }
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                try {
                    in.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
            return sb.toString();
        }
    }
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, aprendimos cómo usar <code>AsyncTask</code> para redes en aplicaciones Android. Cubrimos la estructura básica de <code>AsyncTask</code>, cómo realizar operaciones de red y proporcionamos un ejemplo completo de obtención de datos JSON de una URL y su visualización en un <code>TextView</code>. Mientras que <code>AsyncTask</code> es útil para tareas simples, para operaciones más complejas o de larga duración, considera usar otros marcos de concurrencia como <code>RxJava</code> o <code>WorkManager</code>.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
