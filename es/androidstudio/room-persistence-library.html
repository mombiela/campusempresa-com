<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es">Castellano</b>
				|
				<a href="https://campusempresa.cat/androidstudio/room-persistence-library" id="lnk_lang_ca" data-lang="ca">Català</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Proyecto</a>
				<a href="about">Sobre nosotros</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donaciones</a>
				<a href="licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducción a Room</h1>
<div class='content'><p>La Biblioteca de Persistencia Room es parte del conjunto Jetpack de Android y proporciona una capa de abstracción sobre SQLite para permitir un acceso a la base de datos más robusto mientras se aprovecha todo el poder de SQLite. Room simplifica el trabajo con bases de datos y elimina el código repetitivo.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Entidad</strong>: Representa una tabla dentro de la base de datos.</li>
<li><strong>DAO (Data Access Object)</strong>: Contiene los métodos utilizados para acceder a la base de datos.</li>
<li><strong>Base de Datos</strong>: El punto de acceso principal para la conexión subyacente a los datos persistidos de la aplicación.</li>
</ul>
</div><h1>Configuración de Room</h1>
<div class='content'><p>Para usar Room en tu proyecto de Android, necesitas agregar las dependencias necesarias en tu archivo <code>build.gradle</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzIHsKICAgIGltcGxlbWVudGF0aW9uICJhbmRyb2lkeC5yb29tOnJvb20tcnVudGltZToyLjMuMCIKICAgIGFubm90YXRpb25Qcm9jZXNzb3IgImFuZHJvaWR4LnJvb206cm9vbS1jb21waWxlcjoyLjMuMCIKICAgIC8vIFBhcmEgS290bGluIHVzYSBrYXB0IGVuIGx1Z2FyIGRlIGFubm90YXRpb25Qcm9jZXNzb3IKICAgIGthcHQgImFuZHJvaWR4LnJvb206cm9vbS1jb21waWxlcjoyLjMuMCIKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies {
    implementation &quot;androidx.room:room-runtime:2.3.0&quot;
    annotationProcessor &quot;androidx.room:room-compiler:2.3.0&quot;
    // Para Kotlin usa kapt en lugar de annotationProcessor
    kapt &quot;androidx.room:room-compiler:2.3.0&quot;
}</pre></div><div class='content'></div><h1>Creación de una Entidad</h1>
<div class='content'><p>Una entidad representa una tabla dentro de la base de datos. Cada campo en la entidad corresponde a una columna en la tabla.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LnJvb20uRW50aXR5OwppbXBvcnQgYW5kcm9pZHgucm9vbS5QcmltYXJ5S2V5OwoKQEVudGl0eSh0YWJsZU5hbWUgPSAidXNlcnMiKQpwdWJsaWMgY2xhc3MgVXNlciB7CiAgICBAUHJpbWFyeUtleShhdXRvR2VuZXJhdGUgPSB0cnVlKQogICAgcHVibGljIGludCBpZDsKCiAgICBwdWJsaWMgU3RyaW5nIGZpcnN0TmFtZTsKICAgIHB1YmxpYyBTdHJpbmcgbGFzdE5hbWU7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.room.Entity;
import androidx.room.PrimaryKey;

@Entity(tableName = &quot;users&quot;)
public class User {
    @PrimaryKey(autoGenerate = true)
    public int id;

    public String firstName;
    public String lastName;
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>@Entity</code>: Marca la clase como una entidad y proporciona el nombre de la tabla.</li>
<li><code>@PrimaryKey</code>: Marca el campo como la clave primaria. <code>autoGenerate = true</code> significa que el ID se generará automáticamente.</li>
</ul>
</div><h1>Creación de un DAO</h1>
<div class='content'><p>El DAO (Data Access Object) es donde defines los métodos para acceder a la base de datos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LnJvb20uRGFvOwppbXBvcnQgYW5kcm9pZHgucm9vbS5JbnNlcnQ7CmltcG9ydCBhbmRyb2lkeC5yb29tLlF1ZXJ5OwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKQERhbwpwdWJsaWMgaW50ZXJmYWNlIFVzZXJEYW8gewogICAgQEluc2VydAogICAgdm9pZCBpbnNlcnQoVXNlciB1c2VyKTsKCiAgICBAUXVlcnkoIlNFTEVDVCAqIEZST00gdXNlcnMiKQogICAgTGlzdDxVc2VyPiBnZXRBbGxVc2VycygpOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.room.Dao;
import androidx.room.Insert;
import androidx.room.Query;

import java.util.List;

@Dao
public interface UserDao {
    @Insert
    void insert(User user);

    @Query(&quot;SELECT * FROM users&quot;)
    List&lt;User&gt; getAllUsers();
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>@Dao</code>: Marca la interfaz como un DAO.</li>
<li><code>@Insert</code>: Marca el método como una operación de inserción.</li>
<li><code>@Query</code>: Marca el método como una operación de consulta. La consulta SQL se proporciona como una cadena.</li>
</ul>
</div><h1>Creación de la Base de Datos</h1>
<div class='content'><p>La clase de la base de datos proporciona el punto de acceso principal a los datos persistidos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LnJvb20uRGF0YWJhc2U7CmltcG9ydCBhbmRyb2lkeC5yb29tLlJvb21EYXRhYmFzZTsKCkBEYXRhYmFzZShlbnRpdGllcyA9IHtVc2VyLmNsYXNzfSwgdmVyc2lvbiA9IDEpCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBcHBEYXRhYmFzZSBleHRlbmRzIFJvb21EYXRhYmFzZSB7CiAgICBwdWJsaWMgYWJzdHJhY3QgVXNlckRhbyB1c2VyRGFvKCk7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.room.Database;
import androidx.room.RoomDatabase;

@Database(entities = {User.class}, version = 1)
public abstract class AppDatabase extends RoomDatabase {
    public abstract UserDao userDao();
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>@Database</code>: Marca la clase como una base de datos Room. El atributo <code>entities</code> enumera todas las entidades asociadas con la base de datos.</li>
<li><code>RoomDatabase</code>: La clase base para las bases de datos Room. Proporciona los DAOs definidos en la base de datos.</li>
</ul>
</div><h1>Uso de Room en tu Aplicación</h1>
<div class='content'><p>Para usar Room, necesitas crear una instancia de la base de datos y usar el DAO para realizar operaciones en la base de datos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWQuY29udGVudC5Db250ZXh0OwppbXBvcnQgYW5kcm9pZHgucm9vbS5Sb29tOwoKcHVibGljIGNsYXNzIE15QXBwIHsKICAgIHByaXZhdGUgQXBwRGF0YWJhc2UgZGI7CgogICAgcHVibGljIE15QXBwKENvbnRleHQgY29udGV4dCkgewogICAgICAgIGRiID0gUm9vbS5kYXRhYmFzZUJ1aWxkZXIoY29udGV4dCwgQXBwRGF0YWJhc2UuY2xhc3MsICJteS1kYXRhYmFzZSIpLmJ1aWxkKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYWRkVXNlcihVc2VyIHVzZXIpIHsKICAgICAgICBkYi51c2VyRGFvKCkuaW5zZXJ0KHVzZXIpOwogICAgfQoKICAgIHB1YmxpYyBMaXN0PFVzZXI+IGdldEFsbFVzZXJzKCkgewogICAgICAgIHJldHVybiBkYi51c2VyRGFvKCkuZ2V0QWxsVXNlcnMoKTsKICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import android.content.Context;
import androidx.room.Room;

public class MyApp {
    private AppDatabase db;

    public MyApp(Context context) {
        db = Room.databaseBuilder(context, AppDatabase.class, &quot;my-database&quot;).build();
    }

    public void addUser(User user) {
        db.userDao().insert(user);
    }

    public List&lt;User&gt; getAllUsers() {
        return db.userDao().getAllUsers();
    }
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>Room.databaseBuilder</code>: Crea una instancia de la base de datos Room.</li>
<li><code>db.userDao()</code>: Accede al DAO para realizar operaciones en la base de datos.</li>
</ul>
</div><h1>Temas Avanzados</h1>
<h2>Migraciones</h2>
<div class='content'><p>Cuando necesitas cambiar el esquema de la base de datos, debes proporcionar una estrategia de migración.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LnJvb20ubWlncmF0aW9uLk1pZ3JhdGlvbjsKaW1wb3J0IGFuZHJvaWR4LnNxbGl0ZS5kYi5TdXBwb3J0U1FMaXRlRGF0YWJhc2U7CgpNaWdyYXRpb24gTUlHUkFUSU9OXzFfMiA9IG5ldyBNaWdyYXRpb24oMSwgMikgewogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBtaWdyYXRlKFN1cHBvcnRTUUxpdGVEYXRhYmFzZSBkYXRhYmFzZSkgewogICAgICAgIGRhdGFiYXNlLmV4ZWNTUUwoIkFMVEVSIFRBQkxFIHVzZXJzIEFERCBDT0xVTU4gYWdlIElOVEVHRVIiKTsKICAgIH0KfTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.room.migration.Migration;
import androidx.sqlite.db.SupportSQLiteDatabase;

Migration MIGRATION_1_2 = new Migration(1, 2) {
    @Override
    public void migrate(SupportSQLiteDatabase database) {
        database.execSQL(&quot;ALTER TABLE users ADD COLUMN age INTEGER&quot;);
    }
};</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>Migration</code>: Define una migración de una versión a otra.</li>
<li><code>migrate()</code>: Contiene las declaraciones SQL para migrar la base de datos.</li>
</ul>
</div><h2>Uso de LiveData con Room</h2>
<div class='content'><p>Room admite la devolución de objetos LiveData desde los métodos DAO, lo que te permite observar los cambios en la base de datos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LmxpZmVjeWNsZS5MaXZlRGF0YTsKCkBEYW8KcHVibGljIGludGVyZmFjZSBVc2VyRGFvIHsKICAgIEBRdWVyeSgiU0VMRUNUICogRlJPTSB1c2VycyIpCiAgICBMaXZlRGF0YTxMaXN0PFVzZXI+PiBnZXRBbGxVc2VycygpOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.lifecycle.LiveData;

@Dao
public interface UserDao {
    @Query(&quot;SELECT * FROM users&quot;)
    LiveData&lt;List&lt;User&gt;&gt; getAllUsers();
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>LiveData</code>: Un contenedor de datos consciente del ciclo de vida que te permite observar cambios.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>La Biblioteca de Persistencia Room simplifica la gestión de bases de datos en aplicaciones Android al proporcionar una capa de abstracción robusta sobre SQLite. Al comprender las entidades, los DAOs y la clase de base de datos, puedes gestionar eficientemente los datos de tu aplicación. Las características avanzadas como las migraciones y la integración con LiveData mejoran aún más las capacidades de Room, convirtiéndola en una herramienta poderosa para los desarrolladores de Android.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
