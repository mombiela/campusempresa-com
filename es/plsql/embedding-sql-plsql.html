<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Incrustar SQL en PL/SQL</title>

    <link rel="alternate" href="https://campusempresa.com/es/plsql/embedding-sql-plsql" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/plsql/embedding-sql-plsql" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/plsql/embedding-sql-plsql" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/plsql/embedding-sql-plsql" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='exception-handling'>&#x25C4;Manejo de Excepciones</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Incrustar SQL en PL/SQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='cursors-implicit-explicit'>Cursores: Implícitos y Explícitos &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>PL/SQL (Procedural Language/Structured Query Language) es la extensión procedimental de Oracle Corporation para SQL y la base de datos relacional Oracle. Combina el poder de manipulación de datos de SQL con el poder de procesamiento de los lenguajes procedimentales. En esta sección, exploraremos cómo incrustar sentencias SQL dentro del código PL/SQL.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>SQL en PL/SQL</strong>: Incrustar sentencias SQL dentro de bloques PL/SQL para realizar operaciones en la base de datos.</li>
<li><strong>Sentencias DML</strong>: Sentencias del Lenguaje de Manipulación de Datos (DML) como <code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code> y <code>DELETE</code>.</li>
<li><strong>Control de Transacciones</strong>: Usar <code>COMMIT</code>, <code>ROLLBACK</code> y <code>SAVEPOINT</code> para gestionar transacciones.</li>
<li><strong>Cursores</strong>: Manejar resultados de consultas usando cursores implícitos y explícitos.</li>
</ul>
</div><h1>Incrustar Sentencias SQL</h1>
<div class='content'></div><h2>Sentencia SELECT</h2>
<div class='content'><p>La sentencia <code>SELECT</code> se usa para obtener datos de la base de datos. En PL/SQL, se puede usar de dos maneras: directamente en variables o usando cursores.</p>
<h4>Ejemplo: SELECT INTO Variables</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogICAgdl9lbXBsb3llZV9uYW1lIFZBUkNIQVIyKDUwKTsKICAgIHZfZW1wbG95ZWVfc2FsYXJ5IE5VTUJFUjsKQkVHSU4KICAgIFNFTEVDVCBlbXBsb3llZV9uYW1lLCBzYWxhcnkKICAgIElOVE8gdl9lbXBsb3llZV9uYW1lLCB2X2VtcGxveWVlX3NhbGFyeQogICAgRlJPTSBlbXBsb3llZXMKICAgIFdIRVJFIGVtcGxveWVlX2lkID0gMTAxOwoKICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdFbXBsb3llZSBOYW1lOiAnIHx8IHZfZW1wbG95ZWVfbmFtZSk7CiAgICBEQk1TX09VVFBVVC5QVVRfTElORSgnRW1wbG95ZWUgU2FsYXJ5OiAnIHx8IHZfZW1wbG95ZWVfc2FsYXJ5KTsKRU5EOwov"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
    v_employee_name VARCHAR2(50);
    v_employee_salary NUMBER;
BEGIN
    SELECT employee_name, salary
    INTO v_employee_name, v_employee_salary
    FROM employees
    WHERE employee_id = 101;

    DBMS_OUTPUT.PUT_LINE('Employee Name: ' || v_employee_name);
    DBMS_OUTPUT.PUT_LINE('Employee Salary: ' || v_employee_salary);
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>: Este bloque declara dos variables, <code>v_employee_name</code> y <code>v_employee_salary</code>, y obtiene el <code>employee_name</code> y el <code>salary</code> del empleado con <code>employee_id</code> 101 en estas variables.</li>
</ul>
</div><h2>Sentencia INSERT</h2>
<div class='content'><p>La sentencia <code>INSERT</code> se usa para agregar nuevas filas a una tabla.</p>
<h4>Ejemplo: Sentencia INSERT</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAgIElOU0VSVCBJTlRPIGVtcGxveWVlcyAoZW1wbG95ZWVfaWQsIGVtcGxveWVlX25hbWUsIHNhbGFyeSkKICAgIFZBTFVFUyAoMTAyLCAnSm9obiBEb2UnLCA1MDAwMCk7CgogICAgQ09NTUlUOwpFTkQ7Ci8="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
    INSERT INTO employees (employee_id, employee_name, salary)
    VALUES (102, 'John Doe', 50000);

    COMMIT;
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>: Este bloque inserta un nuevo registro de empleado en la tabla <code>employees</code> y confirma la transacción.</li>
</ul>
</div><h2>Sentencia UPDATE</h2>
<div class='content'><p>La sentencia <code>UPDATE</code> modifica datos existentes en una tabla.</p>
<h4>Ejemplo: Sentencia UPDATE</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAgIFVQREFURSBlbXBsb3llZXMKICAgIFNFVCBzYWxhcnkgPSBzYWxhcnkgKiAxLjEKICAgIFdIRVJFIGVtcGxveWVlX2lkID0gMTAxOwoKICAgIENPTU1JVDsKRU5EOwov"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
    UPDATE employees
    SET salary = salary * 1.1
    WHERE employee_id = 101;

    COMMIT;
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>: Este bloque actualiza el salario del empleado con <code>employee_id</code> 101 aumentando un 10% y confirma la transacción.</li>
</ul>
</div><h2>Sentencia DELETE</h2>
<div class='content'><p>La sentencia <code>DELETE</code> elimina filas de una tabla.</p>
<h4>Ejemplo: Sentencia DELETE</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAgIERFTEVURSBGUk9NIGVtcGxveWVlcwogICAgV0hFUkUgZW1wbG95ZWVfaWQgPSAxMDI7CgogICAgQ09NTUlUOwpFTkQ7Ci8="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
    DELETE FROM employees
    WHERE employee_id = 102;

    COMMIT;
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>: Este bloque elimina el registro del empleado con <code>employee_id</code> 102 de la tabla <code>employees</code> y confirma la transacción.</li>
</ul>
</div><h1>Control de Transacciones</h1>
<div class='content'><p>Las sentencias de control de transacciones gestionan los cambios realizados por las sentencias DML.</p>
</div><h2>COMMIT</h2>
<div class='content'><ul>
<li><strong>Propósito</strong>: Guardar todos los cambios realizados durante la transacción actual.</li>
<li><strong>Ejemplo</strong>: <code>COMMIT;</code></li>
</ul>
</div><h2>ROLLBACK</h2>
<div class='content'><ul>
<li><strong>Propósito</strong>: Deshacer todos los cambios realizados durante la transacción actual.</li>
<li><strong>Ejemplo</strong>: <code>ROLLBACK;</code></li>
</ul>
</div><h2>SAVEPOINT</h2>
<div class='content'><ul>
<li><strong>Propósito</strong>: Establecer un punto dentro de una transacción al cual se puede volver más tarde.</li>
<li><strong>Ejemplo</strong>:</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAgIFNBVkVQT0lOVCBiZWZvcmVfdXBkYXRlOwoKICAgIFVQREFURSBlbXBsb3llZXMKICAgIFNFVCBzYWxhcnkgPSBzYWxhcnkgKiAxLjEKICAgIFdIRVJFIGVtcGxveWVlX2lkID0gMTAxOwoKICAgIFJPTExCQUNLIFRPIGJlZm9yZV91cGRhdGU7CkVORDsKLw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
    SAVEPOINT before_update;

    UPDATE employees
    SET salary = salary * 1.1
    WHERE employee_id = 101;

    ROLLBACK TO before_update;
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>: Este bloque establece un punto de guardado antes de actualizar el salario y luego revierte a ese punto de guardado, deshaciendo la actualización.</li>
</ul>
</div><h1>Cursores</h1>
<div class='content'><p>Los cursores se usan para manejar resultados de consultas fila por fila.</p>
</div><h2>Cursores Implícitos</h2>
<div class='content'><ul>
<li><strong>Propósito</strong>: Creado automáticamente por Oracle cuando una sentencia <code>SELECT</code> devuelve una sola fila.</li>
<li><strong>Ejemplo</strong>: El ejemplo <code>SELECT INTO</code> anterior usa un cursor implícito.</li>
</ul>
</div><h2>Cursores Explícitos</h2>
<div class='content'><ul>
<li><strong>Propósito</strong>: Definido por el programador para consultas que devuelven múltiples filas.</li>
<li><strong>Ejemplo</strong>:</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogICAgQ1VSU09SIGVtcF9jdXJzb3IgSVMKICAgICAgICBTRUxFQ1QgZW1wbG95ZWVfbmFtZSwgc2FsYXJ5CiAgICAgICAgRlJPTSBlbXBsb3llZXM7CiAgICB2X2VtcGxveWVlX25hbWUgZW1wbG95ZWVzLmVtcGxveWVlX25hbWUlVFlQRTsKICAgIHZfZW1wbG95ZWVfc2FsYXJ5IGVtcGxveWVlcy5zYWxhcnklVFlQRTsKQkVHSU4KICAgIE9QRU4gZW1wX2N1cnNvcjsKICAgIExPT1AKICAgICAgICBGRVRDSCBlbXBfY3Vyc29yIElOVE8gdl9lbXBsb3llZV9uYW1lLCB2X2VtcGxveWVlX3NhbGFyeTsKICAgICAgICBFWElUIFdIRU4gZW1wX2N1cnNvciVOT1RGT1VORDsKICAgICAgICBEQk1TX09VVFBVVC5QVVRfTElORSgnRW1wbG95ZWUgTmFtZTogJyB8fCB2X2VtcGxveWVlX25hbWUgfHwgJywgU2FsYXJ5OiAnIHx8IHZfZW1wbG95ZWVfc2FsYXJ5KTsKICAgIEVORCBMT09QOwogICAgQ0xPU0UgZW1wX2N1cnNvcjsKRU5EOwov"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
    CURSOR emp_cursor IS
        SELECT employee_name, salary
        FROM employees;
    v_employee_name employees.employee_name%TYPE;
    v_employee_salary employees.salary%TYPE;
BEGIN
    OPEN emp_cursor;
    LOOP
        FETCH emp_cursor INTO v_employee_name, v_employee_salary;
        EXIT WHEN emp_cursor%NOTFOUND;
        DBMS_OUTPUT.PUT_LINE('Employee Name: ' || v_employee_name || ', Salary: ' || v_employee_salary);
    END LOOP;
    CLOSE emp_cursor;
END;
/</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>: Este bloque declara un cursor explícito <code>emp_cursor</code> para seleccionar todos los nombres y salarios de los empleados. Luego abre el cursor, obtiene cada fila en un bucle y muestra los detalles del empleado hasta que todas las filas sean procesadas.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Incrustar SQL en PL/SQL te permite aprovechar el poder de SQL dentro de tu código procedimental, permitiendo una manipulación de datos compleja y control de transacciones. Al entender cómo usar sentencias DML, control de transacciones y cursores, puedes interactuar eficientemente con la base de datos y gestionar datos dentro de tus programas PL/SQL. Practica estos conceptos con varios ejemplos para obtener una comprensión más profunda y volverte competente en incrustar SQL en PL/SQL.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='exception-handling'>&#x25C4;Manejo de Excepciones</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Incrustar SQL en PL/SQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='cursors-implicit-explicit'>Cursores: Implícitos y Explícitos &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
