<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pruebas de Vistas y Plantillas</title>

    <link rel="alternate" href="https://campusempresa.com/es/django/testing-views-and-templates" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/django/testing-views-and-templates" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/django/testing-views-and-templates" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/django/testing-views-and-templates" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducción</h1>
<div class='content'><p>Las pruebas son una parte crucial del desarrollo de aplicaciones web robustas y confiables. En Django, las vistas y plantillas son componentes centrales que manejan la lógica de presentación y la interfaz de usuario. Esta sección te guiará a través del proceso de prueba de vistas y plantillas en Django, desde conceptos básicos hasta técnicas avanzadas.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Vistas</strong>: Funciones o clases que manejan solicitudes HTTP y devuelven respuestas HTTP.</li>
<li><strong>Plantillas</strong>: Archivos HTML que definen la estructura de las páginas web.</li>
<li><strong>Pruebas</strong>: El proceso de verificar que tu código funcione como se espera.</li>
</ul>
</div><h1>Configuración del Entorno de Pruebas</h1>
<div class='content'><p>Antes de sumergirnos en las pruebas de vistas y plantillas, asegúrate de tener la siguiente configuración:</p>
<ul>
<li>Django instalado.</li>
<li>Un proyecto y una aplicación Django creados.</li>
<li>Comprensión básica de las vistas y plantillas de Django.</li>
</ul>
</div><h1>Pruebas de Vistas</h1>
<div class='content'><p>Probar vistas implica verificar que se rendericen las plantillas correctas y que se pasen los datos de contexto adecuados.</p>
</div><h2>Prueba Básica de Vista</h2>
<div class='content'><p>Comencemos con un ejemplo simple. Supongamos que tienes una vista que renderiza una plantilla llamada <code>home.html</code>.</p>
<h4>Ejemplo de Vista</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2aWV3cy5weQpmcm9tIGRqYW5nby5zaG9ydGN1dHMgaW1wb3J0IHJlbmRlcgoKZGVmIGhvbWVfdmlldyhyZXF1ZXN0KToKICAgIHJldHVybiByZW5kZXIocmVxdWVzdCwgJ2hvbWUuaHRtbCcsIHsnbWVzc2FnZSc6ICfCoUhvbGEsIE11bmRvISd9KQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># views.py
from django.shortcuts import render

def home_view(request):
    return render(request, 'home.html', {'message': '&iexcl;Hola, Mundo!'})</pre></div><div class='content'><h4>Escribiendo la Prueba</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB0ZXN0cy5weQpmcm9tIGRqYW5nby50ZXN0IGltcG9ydCBUZXN0Q2FzZQpmcm9tIGRqYW5nby51cmxzIGltcG9ydCByZXZlcnNlCgpjbGFzcyBIb21lVmlld1Rlc3QoVGVzdENhc2UpOgogICAgZGVmIHRlc3RfaG9tZV92aWV3X3N0YXR1c19jb2RlKHNlbGYpOgogICAgICAgIHJlc3BvbnNlID0gc2VsZi5jbGllbnQuZ2V0KHJldmVyc2UoJ2hvbWUnKSkKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3BvbnNlLnN0YXR1c19jb2RlLCAyMDApCgogICAgZGVmIHRlc3RfaG9tZV92aWV3X3RlbXBsYXRlKHNlbGYpOgogICAgICAgIHJlc3BvbnNlID0gc2VsZi5jbGllbnQuZ2V0KHJldmVyc2UoJ2hvbWUnKSkKICAgICAgICBzZWxmLmFzc2VydFRlbXBsYXRlVXNlZChyZXNwb25zZSwgJ2hvbWUuaHRtbCcpCgogICAgZGVmIHRlc3RfaG9tZV92aWV3X2NvbnRleHQoc2VsZik6CiAgICAgICAgcmVzcG9uc2UgPSBzZWxmLmNsaWVudC5nZXQocmV2ZXJzZSgnaG9tZScpKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzcG9uc2UuY29udGV4dFsnbWVzc2FnZSddLCAnwqFIb2xhLCBNdW5kbyEnKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># tests.py
from django.test import TestCase
from django.urls import reverse

class HomeViewTest(TestCase):
    def test_home_view_status_code(self):
        response = self.client.get(reverse('home'))
        self.assertEqual(response.status_code, 200)

    def test_home_view_template(self):
        response = self.client.get(reverse('home'))
        self.assertTemplateUsed(response, 'home.html')

    def test_home_view_context(self):
        response = self.client.get(reverse('home'))
        self.assertEqual(response.context['message'], '&iexcl;Hola, Mundo!')</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>test_home_view_status_code</strong>: Verifica si la vista devuelve un código de estado 200.</li>
<li><strong>test_home_view_template</strong>: Asegura que la vista use la plantilla correcta.</li>
<li><strong>test_home_view_context</strong>: Verifica que los datos de contexto pasados a la plantilla sean correctos.</li>
</ul>
</div><h1>Pruebas de Plantillas</h1>
<div class='content'><p>Probar plantillas implica asegurarse de que la salida HTML sea la esperada.</p>
</div><h2>Prueba Básica de Plantilla</h2>
<div class='content'><p>Extendamos nuestro ejemplo para probar el contenido de <code>home.html</code>.</p>
<h4>Ejemplo de Plantilla</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSBob21lLmh0bWwgLS0+CjwhRE9DVFlQRSBodG1sPgo8aHRtbCBsYW5nPSJlcyI+CjxoZWFkPgogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgPHRpdGxlPkluaWNpbzwvdGl0bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8aDE+e3sgbWVzc2FnZSB9fTwvaDE+CjwvYm9keT4KPC9odG1sPg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- home.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;es&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Inicio&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;{{ message }}&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'><h4>Escribiendo la Prueba</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB0ZXN0cy5weQpmcm9tIGRqYW5nby50ZXN0IGltcG9ydCBUZXN0Q2FzZQpmcm9tIGRqYW5nby51cmxzIGltcG9ydCByZXZlcnNlCgpjbGFzcyBIb21lVGVtcGxhdGVUZXN0KFRlc3RDYXNlKToKICAgIGRlZiB0ZXN0X2hvbWVfdGVtcGxhdGVfY29udGVudChzZWxmKToKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LmdldChyZXZlcnNlKCdob21lJykpCiAgICAgICAgc2VsZi5hc3NlcnRDb250YWlucyhyZXNwb25zZSwgJzxoMT7CoUhvbGEsIE11bmRvITwvaDE+Jyk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># tests.py
from django.test import TestCase
from django.urls import reverse

class HomeTemplateTest(TestCase):
    def test_home_template_content(self):
        response = self.client.get(reverse('home'))
        self.assertContains(response, '&lt;h1&gt;&iexcl;Hola, Mundo!&lt;/h1&gt;')</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>test_home_template_content</strong>: Verifica si el HTML renderizado contiene el contenido esperado.</li>
</ul>
</div><h1>Técnicas Avanzadas de Pruebas</h1>
<div class='content'><p>Para vistas y plantillas más complejas, es posible que necesites probar:</p>
<ul>
<li><strong>Envío de formularios</strong>: Asegúrate de que los formularios se rendericen correctamente y manejen las presentaciones adecuadamente.</li>
<li><strong>Autenticación</strong>: Verifica que las vistas se comporten correctamente para usuarios autenticados y no autenticados.</li>
<li><strong>Permisos</strong>: Comprueba que los usuarios con diferentes permisos vean el contenido apropiado.</li>
</ul>
</div><h2>Ejemplo: Prueba de Envío de Formularios</h2>
<div class='content'><p>Supongamos que tienes una vista que maneja la presentación de un formulario.</p>
<h4>Ejemplo de Vista</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2aWV3cy5weQpmcm9tIGRqYW5nby5zaG9ydGN1dHMgaW1wb3J0IHJlbmRlciwgcmVkaXJlY3QKZnJvbSAuZm9ybXMgaW1wb3J0IE15Rm9ybQoKZGVmIGZvcm1fdmlldyhyZXF1ZXN0KToKICAgIGlmIHJlcXVlc3QubWV0aG9kID09ICdQT1NUJzoKICAgICAgICBmb3JtID0gTXlGb3JtKHJlcXVlc3QuUE9TVCkKICAgICAgICBpZiBmb3JtLmlzX3ZhbGlkKCk6CiAgICAgICAgICAgICMgUHJvY2VzYXIgZGF0b3MgZGVsIGZvcm11bGFyaW8KICAgICAgICAgICAgcmV0dXJuIHJlZGlyZWN0KCdzdWNjZXNzJykKICAgIGVsc2U6CiAgICAgICAgZm9ybSA9IE15Rm9ybSgpCiAgICByZXR1cm4gcmVuZGVyKHJlcXVlc3QsICdmb3JtLmh0bWwnLCB7J2Zvcm0nOiBmb3JtfSk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># views.py
from django.shortcuts import render, redirect
from .forms import MyForm

def form_view(request):
    if request.method == 'POST':
        form = MyForm(request.POST)
        if form.is_valid():
            # Procesar datos del formulario
            return redirect('success')
    else:
        form = MyForm()
    return render(request, 'form.html', {'form': form})</pre></div><div class='content'><h4>Escribiendo la Prueba</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB0ZXN0cy5weQpmcm9tIGRqYW5nby50ZXN0IGltcG9ydCBUZXN0Q2FzZQpmcm9tIGRqYW5nby51cmxzIGltcG9ydCByZXZlcnNlCgpjbGFzcyBGb3JtVmlld1Rlc3QoVGVzdENhc2UpOgogICAgZGVmIHRlc3RfZm9ybV92aWV3X2dldChzZWxmKToKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LmdldChyZXZlcnNlKCdmb3JtJykpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXNwb25zZS5zdGF0dXNfY29kZSwgMjAwKQogICAgICAgIHNlbGYuYXNzZXJ0VGVtcGxhdGVVc2VkKHJlc3BvbnNlLCAnZm9ybS5odG1sJykKCiAgICBkZWYgdGVzdF9mb3JtX3ZpZXdfcG9zdF92YWxpZChzZWxmKToKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LnBvc3QocmV2ZXJzZSgnZm9ybScpLCB7J2ZpZWxkMSc6ICd2YWx1ZTEnLCAnZmllbGQyJzogJ3ZhbHVlMid9KQogICAgICAgIHNlbGYuYXNzZXJ0UmVkaXJlY3RzKHJlc3BvbnNlLCByZXZlcnNlKCdzdWNjZXNzJykpCgogICAgZGVmIHRlc3RfZm9ybV92aWV3X3Bvc3RfaW52YWxpZChzZWxmKToKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LnBvc3QocmV2ZXJzZSgnZm9ybScpLCB7J2ZpZWxkMSc6ICcnLCAnZmllbGQyJzogJ3ZhbHVlMid9KQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzcG9uc2Uuc3RhdHVzX2NvZGUsIDIwMCkKICAgICAgICBzZWxmLmFzc2VydFRlbXBsYXRlVXNlZChyZXNwb25zZSwgJ2Zvcm0uaHRtbCcpCiAgICAgICAgc2VsZi5hc3NlcnRGb3JtRXJyb3IocmVzcG9uc2UsICdmb3JtJywgJ2ZpZWxkMScsICdFc3RlIGNhbXBvIGVzIG9ibGlnYXRvcmlvLicp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># tests.py
from django.test import TestCase
from django.urls import reverse

class FormViewTest(TestCase):
    def test_form_view_get(self):
        response = self.client.get(reverse('form'))
        self.assertEqual(response.status_code, 200)
        self.assertTemplateUsed(response, 'form.html')

    def test_form_view_post_valid(self):
        response = self.client.post(reverse('form'), {'field1': 'value1', 'field2': 'value2'})
        self.assertRedirects(response, reverse('success'))

    def test_form_view_post_invalid(self):
        response = self.client.post(reverse('form'), {'field1': '', 'field2': 'value2'})
        self.assertEqual(response.status_code, 200)
        self.assertTemplateUsed(response, 'form.html')
        self.assertFormError(response, 'form', 'field1', 'Este campo es obligatorio.')</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>test_form_view_get</strong>: Prueba la solicitud GET para asegurarse de que el formulario se renderice correctamente.</li>
<li><strong>test_form_view_post_valid</strong>: Prueba una presentación de formulario válida y verifica una redirección.</li>
<li><strong>test_form_view_post_invalid</strong>: Prueba una presentación de formulario inválida y verifica los errores del formulario.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Probar vistas y plantillas en Django es esencial para asegurar que tu aplicación se comporte como se espera. Al escribir pruebas para códigos de estado, plantillas, datos de contexto y envíos de formularios, puedes detectar errores temprano y mantener una base de código de alta calidad. A medida que avances, considera probar escenarios más complejos que involucren autenticación y permisos para mejorar aún más la confiabilidad de tu aplicación.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
