<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Construcción de Módulos Nativos Personalizados</title>

    <link rel="alternate" href="https://campusempresa.com/es/reactnative/building-custom-native-modules" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/reactnative/building-custom-native-modules" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/reactnative/building-custom-native-modules" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/reactnative/building-custom-native-modules" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Proyecto</a>
				<a href="about">Sobre nosotros</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donaciones</a>
				<a href="licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En esta sección, exploraremos cómo construir módulos nativos personalizados en React Native. Los módulos nativos te permiten extender la funcionalidad de tu aplicación React Native escribiendo código nativo en Java (para Android) u Objective-C/Swift (para iOS). Esto es particularmente útil cuando necesitas acceder a APIs específicas de la plataforma u optimizar el rendimiento para ciertas tareas.</p>
</div><h1>Prerrequisitos</h1>
<div class='content'><p>Antes de sumergirte en la construcción de módulos nativos personalizados, asegúrate de tener:</p>
<ul>
<li>Comprensión básica de React Native.</li>
<li>Familiaridad con JavaScript y React.</li>
<li>Conocimientos básicos de Java (para Android) u Objective-C/Swift (para iOS).</li>
</ul>
</div><h1>Configuración del Entorno</h1>
<div class='content'><p>Para construir módulos nativos personalizados, necesitas configurar tu entorno de desarrollo tanto para Android como para iOS.</p>
</div><h2>Configuración de Android</h2>
<div class='content'><ol>
<li><strong>Instalar Android Studio</strong>: Asegúrate de tener Android Studio instalado y configurado.</li>
<li><strong>Configurar Gradle</strong>: Asegúrate de que tus archivos <code>android/build.gradle</code> y <code>android/app/build.gradle</code> estén configurados correctamente.</li>
</ol>
</div><h2>Configuración de iOS</h2>
<div class='content'><ol>
<li><strong>Instalar Xcode</strong>: Asegúrate de tener Xcode instalado.</li>
<li><strong>CocoaPods</strong>: Asegúrate de que CocoaPods esté instalado y configurado.</li>
</ol>
</div><h1>Creación de un Módulo Nativo Personalizado para Android</h1>
<h2>Paso 1: Crear una Nueva Clase Java</h2>
<div class='content'><p>Crea una nueva clase Java en tu proyecto Android. Esta clase definirá el módulo nativo.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBjb20ueW91cmFwcDsKCmltcG9ydCBjb20uZmFjZWJvb2sucmVhY3QuYnJpZGdlLlJlYWN0QXBwbGljYXRpb25Db250ZXh0OwppbXBvcnQgY29tLmZhY2Vib29rLnJlYWN0LmJyaWRnZS5SZWFjdENvbnRleHRCYXNlSmF2YU1vZHVsZTsKaW1wb3J0IGNvbS5mYWNlYm9vay5yZWFjdC5icmlkZ2UuUmVhY3RNZXRob2Q7CmltcG9ydCBjb20uZmFjZWJvb2sucmVhY3QuYnJpZGdlLkNhbGxiYWNrOwoKcHVibGljIGNsYXNzIE15Q3VzdG9tTW9kdWxlIGV4dGVuZHMgUmVhY3RDb250ZXh0QmFzZUphdmFNb2R1bGUgewoKICAgIE15Q3VzdG9tTW9kdWxlKFJlYWN0QXBwbGljYXRpb25Db250ZXh0IGNvbnRleHQpIHsKICAgICAgICBzdXBlcihjb250ZXh0KTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBTdHJpbmcgZ2V0TmFtZSgpIHsKICAgICAgICByZXR1cm4gIk15Q3VzdG9tTW9kdWxlIjsKICAgIH0KCiAgICBAUmVhY3RNZXRob2QKICAgIHB1YmxpYyB2b2lkIGN1c3RvbU1ldGhvZChTdHJpbmcgbWVzc2FnZSwgQ2FsbGJhY2sgY2FsbGJhY2spIHsKICAgICAgICAvLyBDw7NkaWdvIG5hdGl2byBhcXXDrQogICAgICAgIGNhbGxiYWNrLmludm9rZSgiUmVjZWl2ZWQgbWVzc2FnZTogIiArIG1lc3NhZ2UpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package com.yourapp;

import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.bridge.ReactContextBaseJavaModule;
import com.facebook.react.bridge.ReactMethod;
import com.facebook.react.bridge.Callback;

public class MyCustomModule extends ReactContextBaseJavaModule {

    MyCustomModule(ReactApplicationContext context) {
        super(context);
    }

    @Override
    public String getName() {
        return &quot;MyCustomModule&quot;;
    }

    @ReactMethod
    public void customMethod(String message, Callback callback) {
        // C&oacute;digo nativo aqu&iacute;
        callback.invoke(&quot;Received message: &quot; + message);
    }
}</pre></div><div class='content'></div><h2>Paso 2: Registrar el Módulo</h2>
<div class='content'><p>Registra el módulo en tu <code>MainApplication.java</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGNvbS55b3VyYXBwLk15Q3VzdG9tTW9kdWxlOyAvLyBJbXBvcnRhIHR1IG3Ds2R1bG8KCkBPdmVycmlkZQpwcm90ZWN0ZWQgTGlzdDxSZWFjdFBhY2thZ2U+IGdldFBhY2thZ2VzKCkgewogICAgcmV0dXJuIEFycmF5cy48UmVhY3RQYWNrYWdlPmFzTGlzdCgKICAgICAgICBuZXcgTWFpblJlYWN0UGFja2FnZSgpLAogICAgICAgIG5ldyBNeUN1c3RvbVBhY2thZ2UoKSAvLyBSZWdpc3RyYSB0dSBwYXF1ZXRlCiAgICApOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import com.yourapp.MyCustomModule; // Importa tu m&oacute;dulo

@Override
protected List&lt;ReactPackage&gt; getPackages() {
    return Arrays.&lt;ReactPackage&gt;asList(
        new MainReactPackage(),
        new MyCustomPackage() // Registra tu paquete
    );
}</pre></div><div class='content'></div><h2>Paso 3: Crear un Paquete React</h2>
<div class='content'><p>Crea un paquete para exponer el módulo a JavaScript.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBjb20ueW91cmFwcDsKCmltcG9ydCBjb20uZmFjZWJvb2sucmVhY3QuUmVhY3RQYWNrYWdlOwppbXBvcnQgY29tLmZhY2Vib29rLnJlYWN0LmJyaWRnZS5OYXRpdmVNb2R1bGU7CmltcG9ydCBjb20uZmFjZWJvb2sucmVhY3QuYnJpZGdlLlJlYWN0QXBwbGljYXRpb25Db250ZXh0OwppbXBvcnQgY29tLmZhY2Vib29rLnJlYWN0LnVpbWFuYWdlci5WaWV3TWFuYWdlcjsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb25zOwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgpwdWJsaWMgY2xhc3MgTXlDdXN0b21QYWNrYWdlIGltcGxlbWVudHMgUmVhY3RQYWNrYWdlIHsKCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBMaXN0PE5hdGl2ZU1vZHVsZT4gY3JlYXRlTmF0aXZlTW9kdWxlcyhSZWFjdEFwcGxpY2F0aW9uQ29udGV4dCByZWFjdENvbnRleHQpIHsKICAgICAgICBMaXN0PE5hdGl2ZU1vZHVsZT4gbW9kdWxlcyA9IG5ldyBBcnJheUxpc3Q8PigpOwogICAgICAgIG1vZHVsZXMuYWRkKG5ldyBNeUN1c3RvbU1vZHVsZShyZWFjdENvbnRleHQpKTsKICAgICAgICByZXR1cm4gbW9kdWxlczsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBMaXN0PFZpZXdNYW5hZ2VyPiBjcmVhdGVWaWV3TWFuYWdlcnMoUmVhY3RBcHBsaWNhdGlvbkNvbnRleHQgcmVhY3RDb250ZXh0KSB7CiAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLmVtcHR5TGlzdCgpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package com.yourapp;

import com.facebook.react.ReactPackage;
import com.facebook.react.bridge.NativeModule;
import com.facebook.react.bridge.ReactApplicationContext;
import com.facebook.react.uimanager.ViewManager;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class MyCustomPackage implements ReactPackage {

    @Override
    public List&lt;NativeModule&gt; createNativeModules(ReactApplicationContext reactContext) {
        List&lt;NativeModule&gt; modules = new ArrayList&lt;&gt;();
        modules.add(new MyCustomModule(reactContext));
        return modules;
    }

    @Override
    public List&lt;ViewManager&gt; createViewManagers(ReactApplicationContext reactContext) {
        return Collections.emptyList();
    }
}</pre></div><div class='content'></div><h1>Creación de un Módulo Nativo Personalizado para iOS</h1>
<h2>Paso 1: Crear una Nueva Clase Objective-C/Swift</h2>
<div class='content'><p>Crea una nueva clase Objective-C o Swift en tu proyecto iOS. Esta clase definirá el módulo nativo.</p>
<h4>Ejemplo en Objective-C</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2ltcG9ydCA8UmVhY3QvUkNUQnJpZGdlTW9kdWxlLmg+CgpAaW50ZXJmYWNlIFJDVF9FWFRFUk5fTU9EVUxFKE15Q3VzdG9tTW9kdWxlLCBOU09iamVjdCkKClJDVF9FWFRFUk5fTUVUSE9EKGN1c3RvbU1ldGhvZDooTlNTdHJpbmcgKiltZXNzYWdlIGNhbGxiYWNrOihSQ1RSZXNwb25zZVNlbmRlckJsb2NrKWNhbGxiYWNrKQoKQGVuZA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#import &lt;React/RCTBridgeModule.h&gt;

@interface RCT_EXTERN_MODULE(MyCustomModule, NSObject)

RCT_EXTERN_METHOD(customMethod:(NSString *)message callback:(RCTResponseSenderBlock)callback)

@end</pre></div><div class='content'><h4>Ejemplo en Swift</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IEZvdW5kYXRpb24KCkBvYmpjKE15Q3VzdG9tTW9kdWxlKQpjbGFzcyBNeUN1c3RvbU1vZHVsZTogTlNPYmplY3QgewogIAogIEBvYmpjKGN1c3RvbU1ldGhvZDpjYWxsYmFjazopCiAgZnVuYyBjdXN0b21NZXRob2QobWVzc2FnZTogU3RyaW5nLCBjYWxsYmFjazogUkNUUmVzcG9uc2VTZW5kZXJCbG9jaykgewogICAgLy8gQ8OzZGlnbyBuYXRpdm8gYXF1w60KICAgIGNhbGxiYWNrKFsiUmVjZWl2ZWQgbWVzc2FnZTogXChtZXNzYWdlKSJdKQogIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import Foundation

@objc(MyCustomModule)
class MyCustomModule: NSObject {
  
  @objc(customMethod:callback:)
  func customMethod(message: String, callback: RCTResponseSenderBlock) {
    // C&oacute;digo nativo aqu&iacute;
    callback([&quot;Received message: \(message)&quot;])
  }
}</pre></div><div class='content'></div><h2>Paso 2: Registrar el Módulo</h2>
<div class='content'><p>Registra el módulo en tu <code>AppDelegate.m</code> o <code>AppDelegate.swift</code>.</p>
<h4>Ejemplo en Objective-C</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2ltcG9ydCA8UmVhY3QvUkNUQnJpZGdlLmg+CiNpbXBvcnQgPFJlYWN0L1JDVFJvb3RWaWV3Lmg+CiNpbXBvcnQgIk15Q3VzdG9tTW9kdWxlLmgiCgpAaW1wbGVtZW50YXRpb24gQXBwRGVsZWdhdGUKCi0gKEJPT0wpYXBwbGljYXRpb246KFVJQXBwbGljYXRpb24gKilhcHBsaWNhdGlvbiBkaWRGaW5pc2hMYXVuY2hpbmdXaXRoT3B0aW9uczooTlNEaWN0aW9uYXJ5ICopbGF1bmNoT3B0aW9ucyB7CiAgUkNUQnJpZGdlICpicmlkZ2UgPSBbW1JDVEJyaWRnZSBhbGxvY10gaW5pdFdpdGhEZWxlZ2F0ZTpzZWxmIGxhdW5jaE9wdGlvbnM6bGF1bmNoT3B0aW9uc107CiAgUkNUUm9vdFZpZXcgKnJvb3RWaWV3ID0gW1tSQ1RSb290VmlldyBhbGxvY10gaW5pdFdpdGhCcmlkZ2U6YnJpZGdlIG1vZHVsZU5hbWU6QCJZb3VyQXBwTmFtZSIgaW5pdGlhbFByb3BlcnRpZXM6bmlsXTsKICAKICAvLyBPdHJvIGPDs2RpZ28gZGUgY29uZmlndXJhY2nDs24KICByZXR1cm4gWUVTOwp9CgpAZW5k"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#import &lt;React/RCTBridge.h&gt;
#import &lt;React/RCTRootView.h&gt;
#import &quot;MyCustomModule.h&quot;

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
  RCTBridge *bridge = [[RCTBridge alloc] initWithDelegate:self launchOptions:launchOptions];
  RCTRootView *rootView = [[RCTRootView alloc] initWithBridge:bridge moduleName:@&quot;YourAppName&quot; initialProperties:nil];
  
  // Otro c&oacute;digo de configuraci&oacute;n
  return YES;
}

@end</pre></div><div class='content'><h4>Ejemplo en Swift</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFVJS2l0CmltcG9ydCBSZWFjdAoKQFVJQXBwbGljYXRpb25NYWluCmNsYXNzIEFwcERlbGVnYXRlOiBVSVJlc3BvbmRlciwgVUlBcHBsaWNhdGlvbkRlbGVnYXRlIHsKCiAgdmFyIHdpbmRvdzogVUlXaW5kb3c/CgogIGZ1bmMgYXBwbGljYXRpb24oXyBhcHBsaWNhdGlvbjogVUlBcHBsaWNhdGlvbiwgZGlkRmluaXNoTGF1bmNoaW5nV2l0aE9wdGlvbnMgbGF1bmNoT3B0aW9uczogW1VJQXBwbGljYXRpb24uTGF1bmNoT3B0aW9uc0tleTogQW55XT8pIC0+IEJvb2wgewogICAgbGV0IGJyaWRnZSA9IFJDVEJyaWRnZShkZWxlZ2F0ZTogc2VsZiwgbGF1bmNoT3B0aW9uczogbGF1bmNoT3B0aW9ucykKICAgIGxldCByb290VmlldyA9IFJDVFJvb3RWaWV3KGJyaWRnZTogYnJpZGdlLCBtb2R1bGVOYW1lOiAiWW91ckFwcE5hbWUiLCBpbml0aWFsUHJvcGVydGllczogbmlsKQogICAgCiAgICAvLyBPdHJvIGPDs2RpZ28gZGUgY29uZmlndXJhY2nDs24KICAgIHJldHVybiB0cnVlCiAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import UIKit
import React

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {

  var window: UIWindow?

  func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {
    let bridge = RCTBridge(delegate: self, launchOptions: launchOptions)
    let rootView = RCTRootView(bridge: bridge, moduleName: &quot;YourAppName&quot;, initialProperties: nil)
    
    // Otro c&oacute;digo de configuraci&oacute;n
    return true
  }
}</pre></div><div class='content'></div><h1>Uso del Módulo Nativo Personalizado en JavaScript</h1>
<div class='content'><p>Una vez que el módulo nativo está creado y registrado, puedes usarlo en tu código JavaScript.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgTmF0aXZlTW9kdWxlcyB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7CmNvbnN0IHsgTXlDdXN0b21Nb2R1bGUgfSA9IE5hdGl2ZU1vZHVsZXM7CgpNeUN1c3RvbU1vZHVsZS5jdXN0b21NZXRob2QoJ0hlbGxvIGZyb20gSlMnLCAocmVzcG9uc2UpID0+IHsKICBjb25zb2xlLmxvZyhyZXNwb25zZSk7IC8vIFNhbGlkYTogUmVjZWl2ZWQgbWVzc2FnZTogSGVsbG8gZnJvbSBKUwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { NativeModules } from 'react-native';
const { MyCustomModule } = NativeModules;

MyCustomModule.customMethod('Hello from JS', (response) =&gt; {
  console.log(response); // Salida: Received message: Hello from JS
});</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Construir módulos nativos personalizados en React Native te permite aprovechar las características específicas de la plataforma y optimizar el rendimiento para ciertas tareas. Siguiendo los pasos descritos en esta guía, puedes crear y registrar módulos nativos personalizados tanto para Android como para iOS, y usarlos sin problemas en tu código JavaScript. Esto mejora las capacidades de tus aplicaciones React Native y proporciona una experiencia de usuario más integrada.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
