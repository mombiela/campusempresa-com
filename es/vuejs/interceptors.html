<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interceptores en Vue.js</title>

    <link rel="alternate" href="https://campusempresa.com/es/vuejs/interceptors" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/vuejs/interceptors" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/vuejs/interceptors" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/vuejs/interceptors" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='handling-responses-errors'>&#x25C4; Manejo de Respuestas y Errores</a></div><div class='col-6 text-end'><a href='integrating-vuex'>Integración con Vuex &#x25BA;</a></div></div><div class='content'><p>Los interceptores son una característica poderosa en Vue.js, especialmente cuando se trabaja con solicitudes HTTP utilizando bibliotecas como Axios. Permiten interceptar solicitudes o respuestas antes de que sean manejadas por <code>then</code> o <code>catch</code>.</p>
</div><h1>¿Qué son los interceptores?</h1>
<div class='content'><p>Los interceptores son funciones que Axios llama para cada solicitud o respuesta. Pueden ser utilizados para modificar solicitudes o respuestas, manejar errores o agregar lógica adicional antes de que la solicitud sea enviada o después de que la respuesta sea recibida.</p>
</div><h2>Conceptos clave</h2>
<div class='content'><ul>
<li><strong>Interceptores de solicitud</strong>: Modifican o registran solicitudes antes de que sean enviadas.</li>
<li><strong>Interceptores de respuesta</strong>: Modifican o registran respuestas antes de que sean manejadas por la aplicación.</li>
<li><strong>Manejo de errores</strong>: Gestionan errores globalmente interceptando solicitudes o respuestas fallidas.</li>
</ul>
</div><h1>Configuración de Axios con Vue.js</h1>
<div class='content'><p>Para usar interceptores, primero necesitas configurar Axios en tu proyecto Vue.js.</p>
</div><h2>Instalación</h2>
<div class='content'><p>Instala Axios usando npm o yarn:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgYXhpb3MKIyBvCnlhcm4gYWRkIGF4aW9z"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install axios
# o
yarn add axios</pre></div><div class='content'></div><h2>Configuración básica</h2>
<div class='content'><p>Crea una instancia de Axios para configuración personalizada:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2F4aW9zLmpzCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7Cgpjb25zdCBheGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nLAogIHRpbWVvdXQ6IDEwMDAsCiAgaGVhZGVyczogeydYLUN1c3RvbS1IZWFkZXInOiAnZm9vYmFyJ30KfSk7CgpleHBvcnQgZGVmYXVsdCBheGlvc0luc3RhbmNlOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/axios.js
import axios from 'axios';

const axiosInstance = axios.create({
  baseURL: 'https://api.example.com',
  timeout: 1000,
  headers: {'X-Custom-Header': 'foobar'}
});

export default axiosInstance;</pre></div><div class='content'></div><h1>Uso de interceptores de solicitud</h1>
<div class='content'><p>Los interceptores de solicitud te permiten modificar solicitudes antes de que sean enviadas al servidor.</p>
</div><h2>Ejemplo: Añadiendo encabezados de autorización</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2F4aW9zLmpzCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7Cgpjb25zdCBheGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nLAogIHRpbWVvdXQ6IDEwMDAsCn0pOwoKYXhpb3NJbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoCiAgZnVuY3Rpb24oY29uZmlnKSB7CiAgICAvLyBIYWNlciBhbGdvIGFudGVzIGRlIHF1ZSBsYSBzb2xpY2l0dWQgc2VhIGVudmlhZGEKICAgIGNvbnN0IHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICBpZiAodG9rZW4pIHsKICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGBCZWFyZXIgJHt0b2tlbn1gOwogICAgfQogICAgcmV0dXJuIGNvbmZpZzsKICB9LAogIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAvLyBIYWNlciBhbGdvIGNvbiBlbCBlcnJvciBkZSBsYSBzb2xpY2l0dWQKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgfQopOwoKZXhwb3J0IGRlZmF1bHQgYXhpb3NJbnN0YW5jZTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/axios.js
import axios from 'axios';

const axiosInstance = axios.create({
  baseURL: 'https://api.example.com',
  timeout: 1000,
});

axiosInstance.interceptors.request.use(
  function(config) {
    // Hacer algo antes de que la solicitud sea enviada
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  function(error) {
    // Hacer algo con el error de la solicitud
    return Promise.reject(error);
  }
);

export default axiosInstance;</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>config</strong>: El objeto de configuración para la solicitud.</li>
<li><strong>token</strong>: Recuperado del almacenamiento local y añadido a los encabezados de la solicitud.</li>
<li><strong>Promise.reject(error)</strong>: Asegura que el error sea manejado por el código que llama.</li>
</ul>
</div><h1>Uso de interceptores de respuesta</h1>
<div class='content'><p>Los interceptores de respuesta te permiten manejar respuestas globalmente.</p>
</div><h2>Ejemplo: Manejo de respuestas no autorizadas</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2F4aW9zLmpzCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7Cgpjb25zdCBheGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nLAogIHRpbWVvdXQ6IDEwMDAsCn0pOwoKYXhpb3NJbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKAogIGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAvLyBDdWFscXVpZXIgY8OzZGlnbyBkZSBlc3RhZG8gcXVlIGVzdMOpIGRlbnRybyBkZWwgcmFuZ28gZGUgMnh4IGNhdXNhIHF1ZSBlc3RhIGZ1bmNpw7NuIHNlIGRpc3BhcmUKICAgIHJldHVybiByZXNwb25zZTsKICB9LAogIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAvLyBDdWFscXVpZXIgY8OzZGlnbyBkZSBlc3RhZG8gcXVlIGVzdMOpIGZ1ZXJhIGRlbCByYW5nbyBkZSAyeHggY2F1c2EgcXVlIGVzdGEgZnVuY2nDs24gc2UgZGlzcGFyZQogICAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgIC8vIFJlZGlyaWdpciBhIGxhIHDDoWdpbmEgZGUgaW5pY2lvIGRlIHNlc2nDs24gbyBtb3N0cmFyIHVuIG1vZGFsCiAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvbG9naW4nOwogICAgfQogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9Cik7CgpleHBvcnQgZGVmYXVsdCBheGlvc0luc3RhbmNlOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/axios.js
import axios from 'axios';

const axiosInstance = axios.create({
  baseURL: 'https://api.example.com',
  timeout: 1000,
});

axiosInstance.interceptors.response.use(
  function(response) {
    // Cualquier c&oacute;digo de estado que est&eacute; dentro del rango de 2xx causa que esta funci&oacute;n se dispare
    return response;
  },
  function(error) {
    // Cualquier c&oacute;digo de estado que est&eacute; fuera del rango de 2xx causa que esta funci&oacute;n se dispare
    if (error.response.status === 401) {
      // Redirigir a la p&aacute;gina de inicio de sesi&oacute;n o mostrar un modal
      window.location = '/login';
    }
    return Promise.reject(error);
  }
);

export default axiosInstance;</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>response</strong>: El objeto de respuesta del servidor.</li>
<li><strong>error.response.status</strong>: Verifica el código de estado de la respuesta.</li>
<li><strong>window.location</strong>: Redirige al usuario a la página de inicio de sesión si el código de estado es 401 (No autorizado).</li>
</ul>
</div><h1>Combinando interceptores de solicitud y respuesta</h1>
<div class='content'><p>Puedes combinar tanto interceptores de solicitud como de respuesta en una sola instancia de Axios.</p>
</div><h2>Ejemplo: Configuración completa</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2F4aW9zLmpzCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7Cgpjb25zdCBheGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nLAogIHRpbWVvdXQ6IDEwMDAsCn0pOwoKYXhpb3NJbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoCiAgZnVuY3Rpb24oY29uZmlnKSB7CiAgICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgaWYgKHRva2VuKSB7CiAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dG9rZW59YDsKICAgIH0KICAgIHJldHVybiBjb25maWc7CiAgfSwKICBmdW5jdGlvbihlcnJvcikgewogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICB9Cik7CgpheGlvc0luc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoCiAgZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgIHJldHVybiByZXNwb25zZTsKICB9LAogIGZ1bmN0aW9uKGVycm9yKSB7CiAgICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgd2luZG93LmxvY2F0aW9uID0gJy9sb2dpbic7CiAgICB9CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogIH0KKTsKCmV4cG9ydCBkZWZhdWx0IGF4aW9zSW5zdGFuY2U7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/axios.js
import axios from 'axios';

const axiosInstance = axios.create({
  baseURL: 'https://api.example.com',
  timeout: 1000,
});

axiosInstance.interceptors.request.use(
  function(config) {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
    }
    return config;
  },
  function(error) {
    return Promise.reject(error);
  }
);

axiosInstance.interceptors.response.use(
  function(response) {
    return response;
  },
  function(error) {
    if (error.response.status === 401) {
      window.location = '/login';
    }
    return Promise.reject(error);
  }
);

export default axiosInstance;</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Los interceptores en Vue.js, cuando se usan con Axios, proporcionan una forma robusta de manejar solicitudes y respuestas HTTP. Permiten:</p>
<ul>
<li>Añadir tokens de autenticación a las solicitudes.</li>
<li>Manejar errores globalmente.</li>
<li>Modificar solicitudes y respuestas según sea necesario.</li>
</ul>
<p>Al entender e implementar interceptores, puedes crear aplicaciones Vue.js más mantenibles y escalables.</p>
</div><div class='row navigation'><div class='col-6'><a href='handling-responses-errors'>&#x25C4; Manejo de Respuestas y Errores</a></div><div class='col-6 text-end'><a href='integrating-vuex'>Integración con Vuex &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
