<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async y Await en C#</title>

    <link rel="alternate" href="https://campusempresa.com/es/csharp/async-await" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/csharp/async-await" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/csharp/async-await" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/csharp/async-await" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='tasks-tpl'>&#x25C4;Tareas y Biblioteca de Paralelismo de Tareas (TPL)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Async y Await en C#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='exceptions-async'>Manejo de Excepciones en Código Asíncrono &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>La programación asincrónica es una forma de programación paralela que permite que una unidad de trabajo se ejecute por separado del hilo principal de la aplicación. Cuando el trabajo se completa, notifica al hilo principal. En C#, las palabras clave <code>async</code> y <code>await</code> se utilizan para facilitar la programación asincrónica.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Programación Asincrónica</strong>: Permite que las tareas se ejecuten en segundo plano, mejorando la capacidad de respuesta de las aplicaciones.</li>
<li><strong>Palabra Clave <code>async</code></strong>: Marca un método como asincrónico.</li>
<li><strong>Palabra Clave <code>await</code></strong>: Pausa la ejecución de un método asincrónico hasta que la tarea esperada se complete.</li>
<li><strong>Task</strong>: Representa una operación asincrónica.</li>
</ul>
</div><h1>Uso Básico</h1>
<div class='content'></div><h2>Definiendo un Método Asincrónico</h2>
<div class='content'><p>Para definir un método asincrónico, usa la palabra clave <code>async</code> en la firma del método.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGFzeW5jIFRhc2s8aW50PiBDYWxjdWxhdGVTdW1Bc3luYyhpbnQgYSwgaW50IGIpCnsKICAgIHJldHVybiBhd2FpdCBUYXNrLlJ1bigoKSA9PiBhICsgYik7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public async Task&lt;int&gt; CalculateSumAsync(int a, int b)
{
    return await Task.Run(() =&gt; a + b);
}</pre></div><div class='content'></div><h2>Llamando a un Método Asincrónico</h2>
<div class='content'><p>Al llamar a un método asincrónico, usa la palabra clave <code>await</code> para esperar a que la tarea se complete.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGFzeW5jIFRhc2sgTWFpbkFzeW5jKCkKewogICAgaW50IHJlc3VsdCA9IGF3YWl0IENhbGN1bGF0ZVN1bUFzeW5jKDUsIDEwKTsKICAgIENvbnNvbGUuV3JpdGVMaW5lKHJlc3VsdCk7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public async Task MainAsync()
{
    int result = await CalculateSumAsync(5, 10);
    Console.WriteLine(result);
}</pre></div><div class='content'></div><h2>Ejemplo: Obtener Datos de una API Web</h2>
<div class='content'><p>Aquí hay un ejemplo simple de cómo obtener datos de una API web usando <code>HttpClient</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGFzeW5jIFRhc2s8c3RyaW5nPiBGZXRjaERhdGFBc3luYyhzdHJpbmcgdXJsKQp7CiAgICB1c2luZyAoSHR0cENsaWVudCBjbGllbnQgPSBuZXcgSHR0cENsaWVudCgpKQogICAgewogICAgICAgIEh0dHBSZXNwb25zZU1lc3NhZ2UgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuR2V0QXN5bmModXJsKTsKICAgICAgICByZXNwb25zZS5FbnN1cmVTdWNjZXNzU3RhdHVzQ29kZSgpOwogICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5Db250ZW50LlJlYWRBc1N0cmluZ0FzeW5jKCk7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public async Task&lt;string&gt; FetchDataAsync(string url)
{
    using (HttpClient client = new HttpClient())
    {
        HttpResponseMessage response = await client.GetAsync(url);
        response.EnsureSuccessStatusCode();
        return await response.Content.ReadAsStringAsync();
    }
}</pre></div><div class='content'></div><h1>Uso Avanzado</h1>
<div class='content'></div><h2>Manejo de Múltiples Operaciones Asincrónicas</h2>
<div class='content'><p>Puedes ejecutar múltiples operaciones asincrónicas concurrentemente usando <code>Task.WhenAll</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGFzeW5jIFRhc2sgRmV0Y2hNdWx0aXBsZURhdGFBc3luYygpCnsKICAgIHZhciB0YXNrMSA9IEZldGNoRGF0YUFzeW5jKCJodHRwczovL2FwaS5leGFtcGxlLmNvbS9kYXRhMSIpOwogICAgdmFyIHRhc2syID0gRmV0Y2hEYXRhQXN5bmMoImh0dHBzOi8vYXBpLmV4YW1wbGUuY29tL2RhdGEyIik7CgogICAgYXdhaXQgVGFzay5XaGVuQWxsKHRhc2sxLCB0YXNrMik7CgogICAgQ29uc29sZS5Xcml0ZUxpbmUoYXdhaXQgdGFzazEpOwogICAgQ29uc29sZS5Xcml0ZUxpbmUoYXdhaXQgdGFzazIpOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public async Task FetchMultipleDataAsync()
{
    var task1 = FetchDataAsync(&quot;https://api.example.com/data1&quot;);
    var task2 = FetchDataAsync(&quot;https://api.example.com/data2&quot;);

    await Task.WhenAll(task1, task2);

    Console.WriteLine(await task1);
    Console.WriteLine(await task2);
}</pre></div><div class='content'></div><h2>Manejo de Errores en Métodos Asincrónicos</h2>
<div class='content'><p>Usa bloques try-catch para manejar excepciones en métodos asincrónicos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGFzeW5jIFRhc2s8c3RyaW5nPiBGZXRjaERhdGFXaXRoRXJyb3JIYW5kbGluZ0FzeW5jKHN0cmluZyB1cmwpCnsKICAgIHRyeQogICAgewogICAgICAgIHVzaW5nIChIdHRwQ2xpZW50IGNsaWVudCA9IG5ldyBIdHRwQ2xpZW50KCkpCiAgICAgICAgewogICAgICAgICAgICBIdHRwUmVzcG9uc2VNZXNzYWdlIHJlc3BvbnNlID0gYXdhaXQgY2xpZW50LkdldEFzeW5jKHVybCk7CiAgICAgICAgICAgIHJlc3BvbnNlLkVuc3VyZVN1Y2Nlc3NTdGF0dXNDb2RlKCk7CiAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5Db250ZW50LlJlYWRBc1N0cmluZ0FzeW5jKCk7CiAgICAgICAgfQogICAgfQogICAgY2F0Y2ggKEh0dHBSZXF1ZXN0RXhjZXB0aW9uIGUpCiAgICB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoJCJFcnJvciBlbiBsYSBzb2xpY2l0dWQ6IHtlLk1lc3NhZ2V9Iik7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public async Task&lt;string&gt; FetchDataWithErrorHandlingAsync(string url)
{
    try
    {
        using (HttpClient client = new HttpClient())
        {
            HttpResponseMessage response = await client.GetAsync(url);
            response.EnsureSuccessStatusCode();
            return await response.Content.ReadAsStringAsync();
        }
    }
    catch (HttpRequestException e)
    {
        Console.WriteLine($&quot;Error en la solicitud: {e.Message}&quot;);
        return null;
    }
}</pre></div><div class='content'></div><h2>Devolviendo Valores desde Métodos Asincrónicos</h2>
<div class='content'><p>Los métodos asincrónicos pueden devolver <code>Task</code>, <code>Task&lt;T&gt;</code>, o <code>void</code>. Usa <code>Task&lt;T&gt;</code> cuando necesites devolver un valor.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGFzeW5jIFRhc2s8aW50PiBHZXREYXRhTGVuZ3RoQXN5bmMoc3RyaW5nIHVybCkKewogICAgc3RyaW5nIGRhdGEgPSBhd2FpdCBGZXRjaERhdGFBc3luYyh1cmwpOwogICAgcmV0dXJuIGRhdGEuTGVuZ3RoOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public async Task&lt;int&gt; GetDataLengthAsync(string url)
{
    string data = await FetchDataAsync(url);
    return data.Length;
}</pre></div><div class='content'></div><h1>Mejores Prácticas</h1>
<div class='content'><ul>
<li><strong>Evita Llamadas Bloqueantes</strong>: No uses <code>.Result</code> o <code>.Wait()</code> en métodos asincrónicos ya que bloquea el hilo que llama.</li>
<li><strong>Usa ConfigureAwait</strong>: Usa <code>ConfigureAwait(false)</code> para evitar bloqueos en ciertos contextos de sincronización, especialmente en aplicaciones de UI.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGFzeW5jIFRhc2s8c3RyaW5nPiBGZXRjaERhdGFXaXRoQ29uZmlndXJlQXdhaXRBc3luYyhzdHJpbmcgdXJsKQp7CiAgICB1c2luZyAoSHR0cENsaWVudCBjbGllbnQgPSBuZXcgSHR0cENsaWVudCgpKQogICAgewogICAgICAgIEh0dHBSZXNwb25zZU1lc3NhZ2UgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuR2V0QXN5bmModXJsKS5Db25maWd1cmVBd2FpdChmYWxzZSk7CiAgICAgICAgcmVzcG9uc2UuRW5zdXJlU3VjY2Vzc1N0YXR1c0NvZGUoKTsKICAgICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuQ29udGVudC5SZWFkQXNTdHJpbmdBc3luYygpLkNvbmZpZ3VyZUF3YWl0KGZhbHNlKTsKICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public async Task&lt;string&gt; FetchDataWithConfigureAwaitAsync(string url)
{
    using (HttpClient client = new HttpClient())
    {
        HttpResponseMessage response = await client.GetAsync(url).ConfigureAwait(false);
        response.EnsureSuccessStatusCode();
        return await response.Content.ReadAsStringAsync().ConfigureAwait(false);
    }
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>La programación asincrónica en C# usando <code>async</code> y <code>await</code> ayuda a crear aplicaciones receptivas al permitir que las tareas se ejecuten concurrentemente sin bloquear el hilo principal. Al comprender y aplicar estos conceptos, puedes mejorar significativamente el rendimiento y la capacidad de respuesta de tus aplicaciones. Recuerda manejar las excepciones adecuadamente y seguir las mejores prácticas para evitar problemas comunes.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='tasks-tpl'>&#x25C4;Tareas y Biblioteca de Paralelismo de Tareas (TPL)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Async y Await en C#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='exceptions-async'>Manejo de Excepciones en Código Asíncrono &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
