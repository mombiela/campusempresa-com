<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creación de Plugins Personalizados de Cordova</title>

    <link rel="alternate" href="https://campusempresa.com/es/apache_cordova/creating-custom-cordova-plugins" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/apache_cordova/creating-custom-cordova-plugins" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/apache_cordova/creating-custom-cordova-plugins" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/apache_cordova/creating-custom-cordova-plugins" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Proyecto</a>
				<a href="about">Sobre nosotros</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donaciones</a>
				<a href="licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducción</h1>
<div class='content'><p>Crear plugins personalizados de Cordova permite a los desarrolladores extender la funcionalidad de sus aplicaciones Cordova integrando código nativo. Este tema te guiará a través del proceso de creación, implementación y uso de plugins personalizados de Cordova desde niveles principiantes hasta avanzados.</p>
</div><h1>Prerrequisitos</h1>
<div class='content'><p>Antes de sumergirte en la creación de plugins personalizados de Cordova, asegúrate de tener:</p>
<ul>
<li>Conocimientos básicos de Apache Cordova.</li>
<li>Familiaridad con JavaScript.</li>
<li>Comprensión básica del desarrollo nativo (Java para Android, Swift/Objective-C para iOS).</li>
</ul>
</div><h1>Configuración de Tu Entorno</h1>
<div class='content'><p>Para crear un plugin personalizado de Cordova, necesitas configurar tu entorno de desarrollo.</p>
<ol>
<li>
<p><strong>Instalar Node.js y npm</strong>: Cordova requiere Node.js y npm.</p>
<pre><code class="language-sh"># Instalar Node.js y npm
sudo apt-get install nodejs npm
</code></pre>
</li>
<li>
<p><strong>Instalar Cordova CLI</strong>:</p>
<pre><code class="language-sh"># Instalar Cordova globalmente
npm install -g cordova
</code></pre>
</li>
<li>
<p><strong>Crear un Proyecto Cordova</strong>:</p>
<pre><code class="language-sh"># Crear un nuevo proyecto Cordova
cordova create MyCordovaApp com.example.mycordovaapp MyCordovaApp
cd MyCordovaApp
</code></pre>
</li>
</ol>
</div><h1>Creación de un Plugin Personalizado</h1>
<h2>Paso 1: Estructura del Plugin</h2>
<div class='content'><p>Un plugin de Cordova típicamente tiene la siguiente estructura:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bXktcGx1Z2luLwrilJzilIDilIAgc3JjLwrilIIgICDilJzilIDilIAgYW5kcm9pZC8K4pSCICAg4pSCICAg4pSU4pSA4pSAIE15UGx1Z2luLmphdmEK4pSCICAg4pSc4pSA4pSAIGlvcy8K4pSCICAg4pSCICAg4pSU4pSA4pSAIE15UGx1Z2luLnN3aWZ0CuKUnOKUgOKUgCB3d3cvCuKUgiAgIOKUlOKUgOKUgCBteXBsdWdpbi5qcwrilJzilIDilIAgcGx1Z2luLnhtbArilJTilIDilIAgcGFja2FnZS5qc29u"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>my-plugin/
├── src/
│   ├── android/
│   │   └── MyPlugin.java
│   ├── ios/
│   │   └── MyPlugin.swift
├── www/
│   └── myplugin.js
├── plugin.xml
└── package.json</pre></div><div class='content'></div><h2>Paso 2: Definir el Plugin en `plugin.xml`</h2>
<div class='content'><p>El archivo <code>plugin.xml</code> es el archivo de configuración para tu plugin. Define los metadatos del plugin, el código específico de la plataforma y la interfaz de JavaScript.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHBsdWdpbiBpZD0iY29tLmV4YW1wbGUubXlwbHVnaW4iIHZlcnNpb249IjEuMC4wIiB4bWxucz0iaHR0cDovL2FwYWNoZS5vcmcvY29yZG92YS9ucy9wbHVnaW5zLzEuMCIgeG1sbnM6YW5kcm9pZD0iaHR0cDovL3NjaGVtYXMuYW5kcm9pZC5jb20vYXBrL3Jlcy9hbmRyb2lkIj4KICAgIDxuYW1lPk15UGx1Z2luPC9uYW1lPgogICAgPGRlc2NyaXB0aW9uPlVuIHBsdWdpbiBkZSBlamVtcGxvIHNpbXBsZTwvZGVzY3JpcHRpb24+CiAgICA8bGljZW5zZT5BcGFjaGUgMi4wPC9saWNlbnNlPgogICAgPGtleXdvcmRzPmNvcmRvdmEscGx1Z2luPC9rZXl3b3Jkcz4KICAgIDxlbmdpbmVzPgogICAgICAgIDxlbmdpbmUgbmFtZT0iY29yZG92YSIgdmVyc2lvbj0iPj05LjAuMCIvPgogICAgPC9lbmdpbmVzPgogICAgPGpzLW1vZHVsZSBzcmM9Ind3dy9teXBsdWdpbi5qcyIgbmFtZT0iTXlQbHVnaW4iPgogICAgICAgIDxjbG9iYmVycyB0YXJnZXQ9ImNvcmRvdmEucGx1Z2lucy5NeVBsdWdpbiIvPgogICAgPC9qcy1tb2R1bGU+CiAgICA8cGxhdGZvcm0gbmFtZT0iYW5kcm9pZCI+CiAgICAgICAgPHNvdXJjZS1maWxlIHNyYz0ic3JjL2FuZHJvaWQvTXlQbHVnaW4uamF2YSIgdGFyZ2V0LWRpcj0ic3JjL2NvbS9leGFtcGxlL215cGx1Z2luIi8+CiAgICA8L3BsYXRmb3JtPgogICAgPHBsYXRmb3JtIG5hbWU9ImlvcyI+CiAgICAgICAgPHNvdXJjZS1maWxlIHNyYz0ic3JjL2lvcy9NeVBsdWdpbi5zd2lmdCIgLz4KICAgIDwvcGxhdGZvcm0+CjwvcGx1Z2luPg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;plugin id=&quot;com.example.myplugin&quot; version=&quot;1.0.0&quot; xmlns=&quot;http://apache.org/cordova/ns/plugins/1.0&quot; xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;name&gt;MyPlugin&lt;/name&gt;
    &lt;description&gt;Un plugin de ejemplo simple&lt;/description&gt;
    &lt;license&gt;Apache 2.0&lt;/license&gt;
    &lt;keywords&gt;cordova,plugin&lt;/keywords&gt;
    &lt;engines&gt;
        &lt;engine name=&quot;cordova&quot; version=&quot;&gt;=9.0.0&quot;/&gt;
    &lt;/engines&gt;
    &lt;js-module src=&quot;www/myplugin.js&quot; name=&quot;MyPlugin&quot;&gt;
        &lt;clobbers target=&quot;cordova.plugins.MyPlugin&quot;/&gt;
    &lt;/js-module&gt;
    &lt;platform name=&quot;android&quot;&gt;
        &lt;source-file src=&quot;src/android/MyPlugin.java&quot; target-dir=&quot;src/com/example/myplugin&quot;/&gt;
    &lt;/platform&gt;
    &lt;platform name=&quot;ios&quot;&gt;
        &lt;source-file src=&quot;src/ios/MyPlugin.swift&quot; /&gt;
    &lt;/platform&gt;
&lt;/plugin&gt;</pre></div><div class='content'></div><h2>Paso 3: Implementar la Interfaz de JavaScript</h2>
<div class='content'><p>Crea el archivo <code>www/myplugin.js</code> para definir la interfaz de JavaScript para tu plugin.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyIGV4ZWMgPSByZXF1aXJlKCdjb3Jkb3ZhL2V4ZWMnKTsKCnZhciBNeVBsdWdpbiA9IHsKICAgIGNvb2xNZXRob2Q6IGZ1bmN0aW9uKGFyZzAsIHN1Y2Nlc3MsIGVycm9yKSB7CiAgICAgICAgZXhlYyhzdWNjZXNzLCBlcnJvciwgJ015UGx1Z2luJywgJ2Nvb2xNZXRob2QnLCBbYXJnMF0pOwogICAgfQp9OwoKbW9kdWxlLmV4cG9ydHMgPSBNeVBsdWdpbjs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var exec = require('cordova/exec');

var MyPlugin = {
    coolMethod: function(arg0, success, error) {
        exec(success, error, 'MyPlugin', 'coolMethod', [arg0]);
    }
};

module.exports = MyPlugin;</pre></div><div class='content'></div><h2>Paso 4: Implementar el Código Nativo</h2>
<div class='content'><h4>Android (Java)</h4>
<p>Crea el archivo <code>src/android/MyPlugin.java</code> para implementar la funcionalidad nativa para Android.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBjb20uZXhhbXBsZS5teXBsdWdpbjsKCmltcG9ydCBvcmcuYXBhY2hlLmNvcmRvdmEuQ29yZG92YVBsdWdpbjsKaW1wb3J0IG9yZy5hcGFjaGUuY29yZG92YS5DYWxsYmFja0NvbnRleHQ7CmltcG9ydCBvcmcuanNvbi5KU09OQXJyYXk7CmltcG9ydCBvcmcuanNvbi5KU09ORXhjZXB0aW9uOwoKcHVibGljIGNsYXNzIE15UGx1Z2luIGV4dGVuZHMgQ29yZG92YVBsdWdpbiB7CiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBib29sZWFuIGV4ZWN1dGUoU3RyaW5nIGFjdGlvbiwgSlNPTkFycmF5IGFyZ3MsIENhbGxiYWNrQ29udGV4dCBjYWxsYmFja0NvbnRleHQpIHRocm93cyBKU09ORXhjZXB0aW9uIHsKICAgICAgICBpZiAoYWN0aW9uLmVxdWFscygiY29vbE1ldGhvZCIpKSB7CiAgICAgICAgICAgIFN0cmluZyBtZXNzYWdlID0gYXJncy5nZXRTdHJpbmcoMCk7CiAgICAgICAgICAgIHRoaXMuY29vbE1ldGhvZChtZXNzYWdlLCBjYWxsYmFja0NvbnRleHQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIHByaXZhdGUgdm9pZCBjb29sTWV0aG9kKFN0cmluZyBtZXNzYWdlLCBDYWxsYmFja0NvbnRleHQgY2FsbGJhY2tDb250ZXh0KSB7CiAgICAgICAgaWYgKG1lc3NhZ2UgIT0gbnVsbCAmJiBtZXNzYWdlLmxlbmd0aCgpID4gMCkgewogICAgICAgICAgICBjYWxsYmFja0NvbnRleHQuc3VjY2VzcyhtZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjYWxsYmFja0NvbnRleHQuZXJyb3IoIlNlIGVzcGVyYWJhIHVuIGFyZ3VtZW50byBkZSBjYWRlbmEgbm8gdmFjw61vLiIpOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package com.example.myplugin;

import org.apache.cordova.CordovaPlugin;
import org.apache.cordova.CallbackContext;
import org.json.JSONArray;
import org.json.JSONException;

public class MyPlugin extends CordovaPlugin {
    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
        if (action.equals(&quot;coolMethod&quot;)) {
            String message = args.getString(0);
            this.coolMethod(message, callbackContext);
            return true;
        }
        return false;
    }

    private void coolMethod(String message, CallbackContext callbackContext) {
        if (message != null &amp;&amp; message.length() &gt; 0) {
            callbackContext.success(message);
        } else {
            callbackContext.error(&quot;Se esperaba un argumento de cadena no vac&iacute;o.&quot;);
        }
    }
}</pre></div><div class='content'><h4>iOS (Swift)</h4>
<p>Crea el archivo <code>src/ios/MyPlugin.swift</code> para implementar la funcionalidad nativa para iOS.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IEZvdW5kYXRpb24KaW1wb3J0IENvcmRvdmEKCkBvYmpjKE15UGx1Z2luKSBjbGFzcyBNeVBsdWdpbjogQ0RWUGx1Z2luIHsKICAgIEBvYmpjKGNvb2xNZXRob2Q6KQogICAgZnVuYyBjb29sTWV0aG9kKGNvbW1hbmQ6IENEVkludm9rZWRVcmxDb21tYW5kKSB7CiAgICAgICAgbGV0IG1lc3NhZ2UgPSBjb21tYW5kLmFyZ3VtZW50c1swXSBhcz8gU3RyaW5nID8/ICIiCiAgICAgICAgbGV0IHBsdWdpblJlc3VsdCA9IENEVlBsdWdpblJlc3VsdChzdGF0dXM6IENEVkNvbW1hbmRTdGF0dXNfT0ssIG1lc3NhZ2VBczogbWVzc2FnZSkKICAgICAgICBzZWxmLmNvbW1hbmREZWxlZ2F0ZS5zZW5kKHBsdWdpblJlc3VsdCwgY2FsbGJhY2tJZDogY29tbWFuZC5jYWxsYmFja0lkKQogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import Foundation
import Cordova

@objc(MyPlugin) class MyPlugin: CDVPlugin {
    @objc(coolMethod:)
    func coolMethod(command: CDVInvokedUrlCommand) {
        let message = command.arguments[0] as? String ?? &quot;&quot;
        let pluginResult = CDVPluginResult(status: CDVCommandStatus_OK, messageAs: message)
        self.commandDelegate.send(pluginResult, callbackId: command.callbackId)
    }
}</pre></div><div class='content'></div><h1>Uso del Plugin Personalizado</h1>
<div class='content'><ol>
<li>
<p><strong>Agregar el Plugin a Tu Proyecto</strong>:</p>
<pre><code class="language-sh"># Agregar el plugin personalizado a tu proyecto Cordova
cordova plugin add path/to/my-plugin
</code></pre>
</li>
<li>
<p><strong>Llamar al Plugin desde JavaScript</strong>:</p>
<pre><code class="language-javascript">document.addEventListener('deviceready', function() {
    cordova.plugins.MyPlugin.coolMethod('¡Hola, Cordova!', function(success) {
        console.log('Éxito:', success);
    }, function(error) {
        console.error('Error:', error);
    });
}, false);
</code></pre>
</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>Crear plugins personalizados de Cordova te permite aprovechar las capacidades nativas del dispositivo y extender la funcionalidad de tus aplicaciones Cordova. Siguiendo los pasos descritos en este tema, puedes crear, implementar y usar plugins personalizados de manera efectiva. Recuerda probar tus plugins exhaustivamente en ambas plataformas, Android e iOS, para asegurar la compatibilidad y el rendimiento.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
