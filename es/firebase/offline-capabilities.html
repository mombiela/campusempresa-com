<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capacidades sin conexión</title>

    <link rel="alternate" href="https://campusempresa.com/es/firebase/offline-capabilities" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/firebase/offline-capabilities" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/firebase/offline-capabilities" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/firebase/offline-capabilities" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'><div class='col-6'><a href='realtime-database-security-rules'>&#x25C4; Reglas de Seguridad de Realtime Database</a></div><div class='col-6 text-end'><a href='introduction-to-firebase-storage'>Introducción a Firebase Storage &#x25BA;</a></div></div><div class='content'><p>Firebase proporciona robustas capacidades sin conexión que permiten que tu aplicación siga siendo funcional incluso cuando el dispositivo no está conectado a internet. Esta característica es crucial para crear una experiencia de usuario fluida, especialmente en áreas con conectividad de red poco fiable. En esta sección, exploraremos cómo Firebase maneja los datos sin conexión y cómo puedes implementar estas características en tu aplicación.</p>
</div><h1>Conceptos clave</h1>
<div class='content'><ul>
<li><strong>Almacenamiento de datos local</strong>: Firebase almacena una copia local de tus datos, permitiendo que se realicen operaciones de lectura y escritura incluso cuando no hay conexión.</li>
<li><strong>Sincronización de datos</strong>: Los cambios realizados mientras se está sin conexión se sincronizan con el servidor de Firebase una vez que el dispositivo se reconecta a internet.</li>
<li><strong>Persistencia</strong>: Firebase puede persistir datos en el dispositivo a través de reinicios de la aplicación.</li>
</ul>
</div><h1>Habilitando capacidades sin conexión</h1>
<div class='content'><p>Para habilitar las capacidades sin conexión en Firebase, necesitas configurar tu Firebase Realtime Database o Firestore para soportar la persistencia de datos sin conexión.</p>
</div><h2>Realtime Database</h2>
<div class='content'><p>Para Firebase Realtime Database, puedes habilitar la persistencia sin conexión con una sola línea de código.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSGFiaWxpdGFyIHBlcnNpc3RlbmNpYSBzaW4gY29uZXhpw7NuCmZpcmViYXNlLmRhdGFiYXNlKCkuc2V0UGVyc2lzdGVuY2VFbmFibGVkKHRydWUpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Habilitar persistencia sin conexi&oacute;n
firebase.database().setPersistenceEnabled(true);</pre></div><div class='content'><p>Este comando asegura que tu aplicación almacenará datos localmente y los sincronizará con el servidor cuando el dispositivo vuelva a estar en línea.</p>
</div><h2>Firestore</h2>
<div class='content'><p>Firestore requiere una configuración similar para habilitar la persistencia sin conexión.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSGFiaWxpdGFyIHBlcnNpc3RlbmNpYSBzaW4gY29uZXhpw7NuCmZpcmViYXNlLmZpcmVzdG9yZSgpLmVuYWJsZVBlcnNpc3RlbmNlKCkKICAuY2F0Y2goZnVuY3Rpb24oZXJyKSB7CiAgICBpZiAoZXJyLmNvZGUgPT0gJ2ZhaWxlZC1wcmVjb25kaXRpb24nKSB7CiAgICAgIC8vIE3Dumx0aXBsZXMgcGVzdGHDsWFzIGFiaWVydGFzLCBsYSBwZXJzaXN0ZW5jaWEgc29sbyBwdWVkZSBzZXIgaGFiaWxpdGFkYQogICAgICAvLyBlbiB1bmEgcGVzdGHDsWEgYSBsYSB2ZXouCiAgICAgIGNvbnNvbGUuZXJyb3IoIlBlcnNpc3RlbmNpYSBmYWxsaWRhOiBNw7psdGlwbGVzIHBlc3Rhw7FhcyBhYmllcnRhcyIpOwogICAgfSBlbHNlIGlmIChlcnIuY29kZSA9PSAndW5pbXBsZW1lbnRlZCcpIHsKICAgICAgLy8gRWwgbmF2ZWdhZG9yIGFjdHVhbCBubyBzb3BvcnRhIHRvZGFzIGxhcwogICAgICAvLyBjYXJhY3RlcsOtc3RpY2FzIG5lY2VzYXJpYXMgcGFyYSBoYWJpbGl0YXIgbGEgcGVyc2lzdGVuY2lhCiAgICAgIGNvbnNvbGUuZXJyb3IoIkxhIHBlcnNpc3RlbmNpYSBubyBlc3TDoSBkaXNwb25pYmxlIGVuIGVzdGUgbmF2ZWdhZG9yIik7CiAgICB9CiAgfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Habilitar persistencia sin conexi&oacute;n
firebase.firestore().enablePersistence()
  .catch(function(err) {
    if (err.code == 'failed-precondition') {
      // M&uacute;ltiples pesta&ntilde;as abiertas, la persistencia solo puede ser habilitada
      // en una pesta&ntilde;a a la vez.
      console.error(&quot;Persistencia fallida: M&uacute;ltiples pesta&ntilde;as abiertas&quot;);
    } else if (err.code == 'unimplemented') {
      // El navegador actual no soporta todas las
      // caracter&iacute;sticas necesarias para habilitar la persistencia
      console.error(&quot;La persistencia no est&aacute; disponible en este navegador&quot;);
    }
  });</pre></div><div class='content'><p>Este fragmento de código habilita la persistencia sin conexión y maneja posibles errores que podrían ocurrir si el navegador no soporta esta característica.</p>
</div><h1>Manejo de datos sin conexión</h1>
<div class='content'><p>Cuando tu aplicación está sin conexión, Firebase usará los datos almacenados localmente para servir las solicitudes de lectura y escritura. Aquí te mostramos cómo puedes manejar las operaciones de datos mientras estás sin conexión.</p>
</div><h2>Leyendo datos</h2>
<div class='content'><p>Al leer datos, Firebase primero verificará la caché local antes de intentar obtenerlos del servidor.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gTGV5ZW5kbyBkYXRvcyBkZSBGaXJlc3RvcmUKZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbigndXNlcnMnKS5kb2MoJ3VzZXJfaWQnKQogIC5nZXQoKQogIC50aGVuKChkb2MpID0+IHsKICAgIGlmIChkb2MuZXhpc3RzKSB7CiAgICAgIGNvbnNvbGUubG9nKCJEYXRvcyBkZWwgZG9jdW1lbnRvOiIsIGRvYy5kYXRhKCkpOwogICAgfSBlbHNlIHsKICAgICAgY29uc29sZS5sb2coIsKhTm8gZXhpc3RlIHRhbCBkb2N1bWVudG8hIik7CiAgICB9CiAgfSkuY2F0Y2goKGVycm9yKSA9PiB7CiAgICBjb25zb2xlLmxvZygiRXJyb3IgYWwgb2J0ZW5lciBlbCBkb2N1bWVudG86IiwgZXJyb3IpOwogIH0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Leyendo datos de Firestore
firebase.firestore().collection('users').doc('user_id')
  .get()
  .then((doc) =&gt; {
    if (doc.exists) {
      console.log(&quot;Datos del documento:&quot;, doc.data());
    } else {
      console.log(&quot;&iexcl;No existe tal documento!&quot;);
    }
  }).catch((error) =&gt; {
    console.log(&quot;Error al obtener el documento:&quot;, error);
  });</pre></div><div class='content'></div><h2>Escribiendo datos</h2>
<div class='content'><p>Al escribir datos, Firebase encolará las operaciones de escritura y las ejecutará una vez que el dispositivo vuelva a estar en línea.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRXNjcmliaWVuZG8gZGF0b3MgZW4gRmlyZXN0b3JlCmZpcmViYXNlLmZpcmVzdG9yZSgpLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKCd1c2VyX2lkJykKICAuc2V0KHsKICAgIG5hbWU6ICJKb2huIERvZSIsCiAgICBlbWFpbDogImpvaG4uZG9lQGV4YW1wbGUuY29tIgogIH0pCiAgLnRoZW4oKCkgPT4gewogICAgY29uc29sZS5sb2coIsKhRG9jdW1lbnRvIGVzY3JpdG8gZXhpdG9zYW1lbnRlISIpOwogIH0pCiAgLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5lcnJvcigiRXJyb3IgYWwgZXNjcmliaXIgZWwgZG9jdW1lbnRvOiAiLCBlcnJvcik7CiAgfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Escribiendo datos en Firestore
firebase.firestore().collection('users').doc('user_id')
  .set({
    name: &quot;John Doe&quot;,
    email: &quot;john.doe@example.com&quot;
  })
  .then(() =&gt; {
    console.log(&quot;&iexcl;Documento escrito exitosamente!&quot;);
  })
  .catch((error) =&gt; {
    console.error(&quot;Error al escribir el documento: &quot;, error);
  });</pre></div><div class='content'></div><h1>Sincronización</h1>
<div class='content'><p>Una vez que el dispositivo se reconecta a internet, Firebase sincronizará automáticamente los datos locales con el servidor. Este proceso asegura que cualquier cambio realizado mientras se estaba sin conexión se refleje en la base de datos del servidor.</p>
</div><h2>Resolución de conflictos</h2>
<div class='content'><p>Firebase maneja la resolución de conflictos utilizando la estrategia de la última escritura gana. Esto significa que la operación de escritura más reciente sobrescribirá cualquier dato anterior.</p>
</div><h1>Resumen</h1>
<div class='content'><p>En esta sección, cubrimos los siguientes puntos clave:</p>
<ul>
<li>Firebase proporciona capacidades sin conexión a través del almacenamiento local de datos y la sincronización.</li>
<li>Habilitar la persistencia sin conexión es sencillo tanto para Realtime Database como para Firestore.</li>
<li>Firebase maneja las operaciones de lectura y escritura mientras se está sin conexión utilizando datos locales y colas.</li>
<li>La sincronización ocurre automáticamente cuando el dispositivo se reconecta a internet, con la resolución de conflictos gestionada por Firebase.</li>
</ul>
<p>Al aprovechar las capacidades sin conexión de Firebase, puedes asegurar que tu aplicación siga siendo funcional y proporcione una experiencia de usuario fluida incluso en ausencia de una conexión a internet estable.</p>
</div><div class='row navigation'><div class='col-6'><a href='realtime-database-security-rules'>&#x25C4; Reglas de Seguridad de Realtime Database</a></div><div class='col-6 text-end'><a href='introduction-to-firebase-storage'>Introducción a Firebase Storage &#x25BA;</a></div></div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
