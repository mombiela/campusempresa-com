<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funciones Avanzadas en la Nube</title>

    <link rel="alternate" href="https://campusempresa.com/es/firebase/advanced-cloud-functions" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/firebase/advanced-cloud-functions" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/firebase/advanced-cloud-functions" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/firebase/advanced-cloud-functions" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En esta sección, profundizaremos en conceptos y técnicas avanzadas para usar Firebase Cloud Functions. Esto incluirá la optimización del rendimiento, el manejo de estructuras de datos complejas y la integración con otros servicios de Firebase y APIs de terceros.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Técnicas de Optimización</strong>: Aprende cómo optimizar tus Cloud Functions para mejorar el rendimiento y la eficiencia de costos.</li>
<li><strong>Manejo de Datos Complejos</strong>: Entiende cómo gestionar y manipular estructuras de datos complejas dentro de tus funciones.</li>
<li><strong>Integración con Servicios de Firebase</strong>: Explora cómo integrar Cloud Functions con otros servicios de Firebase como Firestore, Authentication y Storage.</li>
<li><strong>Integración con APIs de Terceros</strong>: Aprende cómo conectar tus Cloud Functions con APIs externas para extender la funcionalidad.</li>
</ul>
</div><h1>Técnicas de Optimización</h1>
<h2>Inicios en Frío</h2>
<div class='content'><p>Los inicios en frío ocurren cuando una Cloud Function se invoca después de estar inactiva por un tiempo, lo que lleva a un aumento de la latencia. Para minimizar los inicios en frío:</p>
<ul>
<li><strong>Usa Variables Globales</strong>: Declara variables fuera del alcance de la función para reutilizarlas en invocaciones posteriores.</li>
<li><strong>Mantén las Funciones Calientes</strong>: Usa herramientas como Cloud Scheduler para invocar funciones periódicamente.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRWplbXBsbyBkZSB1c28gZGUgdmFyaWFibGVzIGdsb2JhbGVzIHBhcmEgcmVkdWNpciBsb3MgaW5pY2lvcyBlbiBmcsOtbwpsZXQgY2FjaGVkRGF0YTsKCmV4cG9ydHMubXlGdW5jdGlvbiA9IGZ1bmN0aW9ucy5odHRwcy5vblJlcXVlc3QoKHJlcSwgcmVzKSA9PiB7CiAgaWYgKCFjYWNoZWREYXRhKSB7CiAgICBjYWNoZWREYXRhID0gZmV0Y2hEYXRhRnJvbURhdGFiYXNlKCk7IC8vIFNpbXVsYSB1bmEgbGxhbWFkYSBhIGxhIGJhc2UgZGUgZGF0b3MKICB9CiAgcmVzLnNlbmQoY2FjaGVkRGF0YSk7Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Ejemplo de uso de variables globales para reducir los inicios en fr&iacute;o
let cachedData;

exports.myFunction = functions.https.onRequest((req, res) =&gt; {
  if (!cachedData) {
    cachedData = fetchDataFromDatabase(); // Simula una llamada a la base de datos
  }
  res.send(cachedData);
});</pre></div><div class='content'></div><h2>Configuración de Memoria y Tiempo de Espera</h2>
<div class='content'><p>Ajusta la configuración de memoria y tiempo de espera según los requisitos de tu función para optimizar el rendimiento y el costo.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRWplbXBsbyBkZSBjb25maWd1cmFjacOzbiBkZSBtZW1vcmlhIHkgdGllbXBvIGRlIGVzcGVyYQpleHBvcnRzLm15RnVuY3Rpb24gPSBmdW5jdGlvbnMucnVuV2l0aCh7CiAgbWVtb3J5OiAnNTEyTUInLAogIHRpbWVvdXRTZWNvbmRzOiA2MAp9KS5odHRwcy5vblJlcXVlc3QoKHJlcSwgcmVzKSA9PiB7CiAgLy8gTMOzZ2ljYSBkZSBsYSBmdW5jacOzbiBhcXXDrQp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Ejemplo de configuraci&oacute;n de memoria y tiempo de espera
exports.myFunction = functions.runWith({
  memory: '512MB',
  timeoutSeconds: 60
}).https.onRequest((req, res) =&gt; {
  // L&oacute;gica de la funci&oacute;n aqu&iacute;
});</pre></div><div class='content'></div><h1>Manejo de Datos Complejos</h1>
<h2>Trabajando con Firestore</h2>
<div class='content'><p>Manejar estructuras de datos anidadas en Firestore puede ser un desafío. Usa escrituras por lotes y transacciones para gestionar datos complejos de manera eficiente.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRWplbXBsbyBkZSB1bmEgZXNjcml0dXJhIHBvciBsb3RlcyBlbiBGaXJlc3RvcmUKY29uc3QgYmF0Y2ggPSBkYi5iYXRjaCgpOwoKY29uc3QgZG9jUmVmMSA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKCd1c2VyMScpOwpiYXRjaC5zZXQoZG9jUmVmMSwgeyBuYW1lOiAnSm9obiBEb2UnIH0pOwoKY29uc3QgZG9jUmVmMiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKCd1c2VyMicpOwpiYXRjaC51cGRhdGUoZG9jUmVmMiwgeyBhZ2U6IDMwIH0pOwoKYmF0Y2guY29tbWl0KCkudGhlbigoKSA9PiB7CiAgY29uc29sZS5sb2coJ0VzY3JpdHVyYSBwb3IgbG90ZXMgY29tcGxldGFkYScpOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Ejemplo de una escritura por lotes en Firestore
const batch = db.batch();

const docRef1 = db.collection('users').doc('user1');
batch.set(docRef1, { name: 'John Doe' });

const docRef2 = db.collection('users').doc('user2');
batch.update(docRef2, { age: 30 });

batch.commit().then(() =&gt; {
  console.log('Escritura por lotes completada');
});</pre></div><div class='content'></div><h2>Transacciones</h2>
<div class='content'><p>Las transacciones aseguran que una serie de operaciones de lectura y escritura se ejecuten de manera atómica.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRWplbXBsbyBkZSB1bmEgdHJhbnNhY2Npw7NuIGVuIEZpcmVzdG9yZQpkYi5ydW5UcmFuc2FjdGlvbihhc3luYyAodHJhbnNhY3Rpb24pID0+IHsKICBjb25zdCBkb2NSZWYgPSBkYi5jb2xsZWN0aW9uKCd1c2VycycpLmRvYygndXNlcjEnKTsKICBjb25zdCBkb2MgPSBhd2FpdCB0cmFuc2FjdGlvbi5nZXQoZG9jUmVmKTsKICAKICBpZiAoIWRvYy5leGlzdHMpIHsKICAgIHRocm93ICLCoUVsIGRvY3VtZW50byBubyBleGlzdGUhIjsKICB9CgogIGNvbnN0IG5ld0FnZSA9IGRvYy5kYXRhKCkuYWdlICsgMTsKICB0cmFuc2FjdGlvbi51cGRhdGUoZG9jUmVmLCB7IGFnZTogbmV3QWdlIH0pOwp9KS50aGVuKCgpID0+IHsKICBjb25zb2xlLmxvZygnVHJhbnNhY2Npw7NuIGNvbXByb21ldGlkYSBjb24gw6l4aXRvJyk7Cn0pLmNhdGNoKChlcnJvcikgPT4gewogIGNvbnNvbGUubG9nKCdUcmFuc2FjY2nDs24gZmFsbGlkYTogJywgZXJyb3IpOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Ejemplo de una transacci&oacute;n en Firestore
db.runTransaction(async (transaction) =&gt; {
  const docRef = db.collection('users').doc('user1');
  const doc = await transaction.get(docRef);
  
  if (!doc.exists) {
    throw &quot;&iexcl;El documento no existe!&quot;;
  }

  const newAge = doc.data().age + 1;
  transaction.update(docRef, { age: newAge });
}).then(() =&gt; {
  console.log('Transacci&oacute;n comprometida con &eacute;xito');
}).catch((error) =&gt; {
  console.log('Transacci&oacute;n fallida: ', error);
});</pre></div><div class='content'></div><h1>Integración con Servicios de Firebase</h1>
<h2>Disparadores de Firestore</h2>
<div class='content'><p>Los disparadores de Firestore te permiten ejecutar funciones en respuesta a cambios en tu base de datos de Firestore.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRWplbXBsbyBkZSB1biBkaXNwYXJhZG9yIGRlIEZpcmVzdG9yZQpleHBvcnRzLm9uVXNlckNyZWF0ZSA9IGZ1bmN0aW9ucy5maXJlc3RvcmUKICAuZG9jdW1lbnQoJ3VzZXJzL3t1c2VySWR9JykKICAub25DcmVhdGUoKHNuYXAsIGNvbnRleHQpID0+IHsKICAgIGNvbnN0IG5ld1ZhbHVlID0gc25hcC5kYXRhKCk7CiAgICBjb25zb2xlLmxvZygnTnVldm8gdXN1YXJpbyBjcmVhZG86JywgbmV3VmFsdWUpOwogIH0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Ejemplo de un disparador de Firestore
exports.onUserCreate = functions.firestore
  .document('users/{userId}')
  .onCreate((snap, context) =&gt; {
    const newValue = snap.data();
    console.log('Nuevo usuario creado:', newValue);
  });</pre></div><div class='content'></div><h2>Disparadores de Autenticación</h2>
<div class='content'><p>Los disparadores de autenticación se pueden usar para realizar acciones cuando los usuarios se registran o eliminan sus cuentas.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRWplbXBsbyBkZSB1biBkaXNwYXJhZG9yIGRlIGF1dGVudGljYWNpw7NuCmV4cG9ydHMub25Vc2VyU2lnblVwID0gZnVuY3Rpb25zLmF1dGgudXNlcigpLm9uQ3JlYXRlKCh1c2VyKSA9PiB7CiAgY29uc29sZS5sb2coJ051ZXZvIHVzdWFyaW8gcmVnaXN0cmFkbzonLCB1c2VyLmVtYWlsKTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Ejemplo de un disparador de autenticaci&oacute;n
exports.onUserSignUp = functions.auth.user().onCreate((user) =&gt; {
  console.log('Nuevo usuario registrado:', user.email);
});</pre></div><div class='content'></div><h1>Integración con APIs de Terceros</h1>
<h2>Realizando Solicitudes HTTP</h2>
<div class='content'><p>Usa la biblioteca <code>axios</code> para realizar solicitudes HTTP a APIs de terceros desde tus Cloud Functions.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpOwoKZXhwb3J0cy5jYWxsRXh0ZXJuYWxBUEkgPSBmdW5jdGlvbnMuaHR0cHMub25SZXF1ZXN0KChyZXEsIHJlcykgPT4gewogIGF4aW9zLmdldCgnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20vZGF0YScpCiAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIHJlcy5zZW5kKHJlc3BvbnNlLmRhdGEpOwogICAgfSkKICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGxsYW1hciBhIGxhIEFQSSBleHRlcm5hOicsIGVycm9yKTsKICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoJ0Vycm9yIGFsIGxsYW1hciBhIGxhIEFQSSBleHRlcm5hJyk7CiAgICB9KTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const axios = require('axios');

exports.callExternalAPI = functions.https.onRequest((req, res) =&gt; {
  axios.get('https://api.example.com/data')
    .then(response =&gt; {
      res.send(response.data);
    })
    .catch(error =&gt; {
      console.error('Error al llamar a la API externa:', error);
      res.status(500).send('Error al llamar a la API externa');
    });
});</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, cubrimos temas avanzados en Firebase Cloud Functions, incluyendo técnicas de optimización, manejo de estructuras de datos complejas e integración tanto con servicios de Firebase como con APIs de terceros. Al dominar estos conceptos, puedes construir aplicaciones más eficientes, escalables y ricas en funcionalidades usando Firebase Cloud Functions.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
