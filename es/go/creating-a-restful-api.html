<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es">Castellano</b>
				|
				<a href="https://campusempresa.cat/go/creating-a-restful-api" id="lnk_lang_ca" data-lang="ca">Català</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Proyecto</a>
				<a href="about">Sobre nosotros</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donaciones</a>
				<a href="licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En esta sección, cubriremos los conceptos básicos para crear una API RESTful utilizando el lenguaje de programación Go. Al final de este tema, comprenderás cómo configurar un proyecto en Go, crear endpoints, manejar solicitudes HTTP y responder con datos JSON.</p>
</div><h1>Configurando tu Entorno Go</h1>
<div class='content'><p>Antes de comenzar a codificar, asegúrate de tener Go instalado en tu máquina. Puedes descargarlo desde el <a href="https://golang.org/dl/">sitio web oficial de Go</a>.</p>
<ol>
<li><strong>Instalar Go</strong>: Sigue las instrucciones de instalación para tu sistema operativo.</li>
<li><strong>Verificar la Instalación</strong>: Abre tu terminal y ejecuta:
<pre><code class="language-sh">go version
</code></pre>
Deberías ver la versión instalada de Go.</li>
</ol>
</div><h1>Creando un Nuevo Proyecto en Go</h1>
<div class='content'><ol>
<li><strong>Crear un Directorio de Proyecto</strong>:
<pre><code class="language-sh">mkdir go-rest-api
cd go-rest-api
</code></pre>
</li>
<li><strong>Inicializar un Módulo Go</strong>:
<pre><code class="language-sh">go mod init github.com/tuusuario/go-rest-api
</code></pre>
</li>
</ol>
</div><h1>Construyendo una API RESTful Simple</h1>
<h2>Importando Paquetes Necesarios</h2>
<div class='content'><p>Crea un archivo llamado <code>main.go</code> y comienza importando los paquetes necesarios:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImVuY29kaW5nL2pzb24iCiAgICAibG9nIgogICAgIm5ldC9odHRwIgop"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;encoding/json&quot;
    &quot;log&quot;
    &quot;net/http&quot;
)</pre></div><div class='content'></div><h2>Configurando el Servidor HTTP</h2>
<div class='content'><p>Define un servidor HTTP simple:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBtYWluKCkgewogICAgaHR0cC5IYW5kbGVGdW5jKCIvaGVsbG8iLCBoZWxsb0hhbmRsZXIpCiAgICBsb2cuUHJpbnRsbigiSW5pY2lhbmRvIHNlcnZpZG9yIGVuIDo4MDgwIikKICAgIGxvZy5GYXRhbChodHRwLkxpc3RlbkFuZFNlcnZlKCI6ODA4MCIsIG5pbCkpCn0KCmZ1bmMgaGVsbG9IYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7CiAgICB3LkhlYWRlcigpLlNldCgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKQogICAganNvbi5OZXdFbmNvZGVyKHcpLkVuY29kZShtYXBbc3RyaW5nXXN0cmluZ3sibWVzc2FnZSI6ICLCoUhvbGEsIE11bmRvISJ9KQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func main() {
    http.HandleFunc(&quot;/hello&quot;, helloHandler)
    log.Println(&quot;Iniciando servidor en :8080&quot;)
    log.Fatal(http.ListenAndServe(&quot;:8080&quot;, nil))
}

func helloHandler(w http.ResponseWriter, r *http.Request) {
    w.Header().Set(&quot;Content-Type&quot;, &quot;application/json&quot;)
    json.NewEncoder(w).Encode(map[string]string{&quot;message&quot;: &quot;&iexcl;Hola, Mundo!&quot;})
}</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>:
<ul>
<li><code>http.HandleFunc(&quot;/hello&quot;, helloHandler)</code>: Registra la función <code>helloHandler</code> para manejar solicitudes al endpoint <code>/hello</code>.</li>
<li><code>log.Fatal(http.ListenAndServe(&quot;:8080&quot;, nil))</code>: Inicia el servidor HTTP en el puerto 8080.</li>
<li><code>helloHandler</code>: Responde con un mensaje JSON.</li>
</ul>
</li>
</ul>
</div><h2>Ejecutando el Servidor</h2>
<div class='content'><p>Ejecuta tu servidor:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z28gcnVuIG1haW4uZ28="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>go run main.go</pre></div><div class='content'><p>Visita <code>http://localhost:8080/hello</code> en tu navegador o usa <code>curl</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y3VybCBodHRwOi8vbG9jYWxob3N0OjgwODAvaGVsbG8="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>curl http://localhost:8080/hello</pre></div><div class='content'></div><h1>Manejando Diferentes Métodos HTTP</h1>
<h2>Creando una API CRUD Básica</h2>
<div class='content'><p>Define un almacén de datos en memoria simple y manejadores para operaciones CRUD:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImVuY29kaW5nL2pzb24iCiAgICAibG9nIgogICAgIm5ldC9odHRwIgogICAgInN0cmNvbnYiCiAgICAic3luYyIKKQoKdHlwZSBJdGVtIHN0cnVjdCB7CiAgICBJRCAgIGludCAgICBganNvbjoiaWQiYAogICAgTmFtZSBzdHJpbmcgYGpzb246Im5hbWUiYAp9Cgp2YXIgKAogICAgaXRlbXMgID0gW11JdGVte30KICAgIG5leHRJRCA9IDEKICAgIG11ICAgICBzeW5jLk11dGV4CikKCmZ1bmMgbWFpbigpIHsKICAgIGh0dHAuSGFuZGxlRnVuYygiL2l0ZW1zIiwgaXRlbXNIYW5kbGVyKQogICAgaHR0cC5IYW5kbGVGdW5jKCIvaXRlbXMvIiwgaXRlbUhhbmRsZXIpCiAgICBsb2cuUHJpbnRsbigiSW5pY2lhbmRvIHNlcnZpZG9yIGVuIDo4MDgwIikKICAgIGxvZy5GYXRhbChodHRwLkxpc3RlbkFuZFNlcnZlKCI6ODA4MCIsIG5pbCkpCn0KCmZ1bmMgaXRlbXNIYW5kbGVyKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7CiAgICBzd2l0Y2ggci5NZXRob2QgewogICAgY2FzZSAiR0VUIjoKICAgICAgICBnZXRJdGVtcyh3LCByKQogICAgY2FzZSAiUE9TVCI6CiAgICAgICAgY3JlYXRlSXRlbSh3LCByKQogICAgZGVmYXVsdDoKICAgICAgICBodHRwLkVycm9yKHcsICJNw6l0b2RvIG5vIHBlcm1pdGlkbyIsIGh0dHAuU3RhdHVzTWV0aG9kTm90QWxsb3dlZCkKICAgIH0KfQoKZnVuYyBpdGVtSGFuZGxlcih3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkgewogICAgaWQsIGVyciA6PSBzdHJjb252LkF0b2koci5VUkwuUGF0aFtsZW4oIi9pdGVtcy8iKTpdKQogICAgaWYgZXJyICE9IG5pbCB7CiAgICAgICAgaHR0cC5FcnJvcih3LCAiSUQgZGUgw610ZW0gaW52w6FsaWRvIiwgaHR0cC5TdGF0dXNCYWRSZXF1ZXN0KQogICAgICAgIHJldHVybgogICAgfQoKICAgIHN3aXRjaCByLk1ldGhvZCB7CiAgICBjYXNlICJHRVQiOgogICAgICAgIGdldEl0ZW0odywgciwgaWQpCiAgICBjYXNlICJQVVQiOgogICAgICAgIHVwZGF0ZUl0ZW0odywgciwgaWQpCiAgICBjYXNlICJERUxFVEUiOgogICAgICAgIGRlbGV0ZUl0ZW0odywgciwgaWQpCiAgICBkZWZhdWx0OgogICAgICAgIGh0dHAuRXJyb3IodywgIk3DqXRvZG8gbm8gcGVybWl0aWRvIiwgaHR0cC5TdGF0dXNNZXRob2ROb3RBbGxvd2VkKQogICAgfQp9CgpmdW5jIGdldEl0ZW1zKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7CiAgICB3LkhlYWRlcigpLlNldCgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKQogICAganNvbi5OZXdFbmNvZGVyKHcpLkVuY29kZShpdGVtcykKfQoKZnVuYyBjcmVhdGVJdGVtKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7CiAgICB2YXIgaXRlbSBJdGVtCiAgICBpZiBlcnIgOj0ganNvbi5OZXdEZWNvZGVyKHIuQm9keSkuRGVjb2RlKCZpdGVtKTsgZXJyICE9IG5pbCB7CiAgICAgICAgaHR0cC5FcnJvcih3LCAiU29saWNpdHVkIGluY29ycmVjdGEiLCBodHRwLlN0YXR1c0JhZFJlcXVlc3QpCiAgICAgICAgcmV0dXJuCiAgICB9CgogICAgbXUuTG9jaygpCiAgICBpdGVtLklEID0gbmV4dElECiAgICBuZXh0SUQrKwogICAgaXRlbXMgPSBhcHBlbmQoaXRlbXMsIGl0ZW0pCiAgICBtdS5VbmxvY2soKQoKICAgIHcuSGVhZGVyKCkuU2V0KCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24vanNvbiIpCiAgICBqc29uLk5ld0VuY29kZXIodykuRW5jb2RlKGl0ZW0pCn0KCmZ1bmMgZ2V0SXRlbSh3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCwgaWQgaW50KSB7CiAgICBmb3IgXywgaXRlbSA6PSByYW5nZSBpdGVtcyB7CiAgICAgICAgaWYgaXRlbS5JRCA9PSBpZCB7CiAgICAgICAgICAgIHcuSGVhZGVyKCkuU2V0KCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24vanNvbiIpCiAgICAgICAgICAgIGpzb24uTmV3RW5jb2Rlcih3KS5FbmNvZGUoaXRlbSkKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgfQogICAgaHR0cC5FcnJvcih3LCAiw410ZW0gbm8gZW5jb250cmFkbyIsIGh0dHAuU3RhdHVzTm90Rm91bmQpCn0KCmZ1bmMgdXBkYXRlSXRlbSh3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCwgaWQgaW50KSB7CiAgICB2YXIgdXBkYXRlZEl0ZW0gSXRlbQogICAgaWYgZXJyIDo9IGpzb24uTmV3RGVjb2RlcihyLkJvZHkpLkRlY29kZSgmdXBkYXRlZEl0ZW0pOyBlcnIgIT0gbmlsIHsKICAgICAgICBodHRwLkVycm9yKHcsICJTb2xpY2l0dWQgaW5jb3JyZWN0YSIsIGh0dHAuU3RhdHVzQmFkUmVxdWVzdCkKICAgICAgICByZXR1cm4KICAgIH0KCiAgICBtdS5Mb2NrKCkKICAgIGRlZmVyIG11LlVubG9jaygpCgogICAgZm9yIGksIGl0ZW0gOj0gcmFuZ2UgaXRlbXMgewogICAgICAgIGlmIGl0ZW0uSUQgPT0gaWQgewogICAgICAgICAgICBpdGVtc1tpXS5OYW1lID0gdXBkYXRlZEl0ZW0uTmFtZQogICAgICAgICAgICB3LkhlYWRlcigpLlNldCgiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKQogICAgICAgICAgICBqc29uLk5ld0VuY29kZXIodykuRW5jb2RlKGl0ZW1zW2ldKQogICAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICB9CiAgICBodHRwLkVycm9yKHcsICLDjXRlbSBubyBlbmNvbnRyYWRvIiwgaHR0cC5TdGF0dXNOb3RGb3VuZCkKfQoKZnVuYyBkZWxldGVJdGVtKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0LCBpZCBpbnQpIHsKICAgIG11LkxvY2soKQogICAgZGVmZXIgbXUuVW5sb2NrKCkKCiAgICBmb3IgaSwgaXRlbSA6PSByYW5nZSBpdGVtcyB7CiAgICAgICAgaWYgaXRlbS5JRCA9PSBpZCB7CiAgICAgICAgICAgIGl0ZW1zID0gYXBwZW5kKGl0ZW1zWzppXSwgaXRlbXNbaSsxOl0uLi4pCiAgICAgICAgICAgIHcuV3JpdGVIZWFkZXIoaHR0cC5TdGF0dXNOb0NvbnRlbnQpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgIH0KICAgIGh0dHAuRXJyb3IodywgIsONdGVtIG5vIGVuY29udHJhZG8iLCBodHRwLlN0YXR1c05vdEZvdW5kKQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;encoding/json&quot;
    &quot;log&quot;
    &quot;net/http&quot;
    &quot;strconv&quot;
    &quot;sync&quot;
)

type Item struct {
    ID   int    `json:&quot;id&quot;`
    Name string `json:&quot;name&quot;`
}

var (
    items  = []Item{}
    nextID = 1
    mu     sync.Mutex
)

func main() {
    http.HandleFunc(&quot;/items&quot;, itemsHandler)
    http.HandleFunc(&quot;/items/&quot;, itemHandler)
    log.Println(&quot;Iniciando servidor en :8080&quot;)
    log.Fatal(http.ListenAndServe(&quot;:8080&quot;, nil))
}

func itemsHandler(w http.ResponseWriter, r *http.Request) {
    switch r.Method {
    case &quot;GET&quot;:
        getItems(w, r)
    case &quot;POST&quot;:
        createItem(w, r)
    default:
        http.Error(w, &quot;M&eacute;todo no permitido&quot;, http.StatusMethodNotAllowed)
    }
}

func itemHandler(w http.ResponseWriter, r *http.Request) {
    id, err := strconv.Atoi(r.URL.Path[len(&quot;/items/&quot;):])
    if err != nil {
        http.Error(w, &quot;ID de &iacute;tem inv&aacute;lido&quot;, http.StatusBadRequest)
        return
    }

    switch r.Method {
    case &quot;GET&quot;:
        getItem(w, r, id)
    case &quot;PUT&quot;:
        updateItem(w, r, id)
    case &quot;DELETE&quot;:
        deleteItem(w, r, id)
    default:
        http.Error(w, &quot;M&eacute;todo no permitido&quot;, http.StatusMethodNotAllowed)
    }
}

func getItems(w http.ResponseWriter, r *http.Request) {
    w.Header().Set(&quot;Content-Type&quot;, &quot;application/json&quot;)
    json.NewEncoder(w).Encode(items)
}

func createItem(w http.ResponseWriter, r *http.Request) {
    var item Item
    if err := json.NewDecoder(r.Body).Decode(&amp;item); err != nil {
        http.Error(w, &quot;Solicitud incorrecta&quot;, http.StatusBadRequest)
        return
    }

    mu.Lock()
    item.ID = nextID
    nextID++
    items = append(items, item)
    mu.Unlock()

    w.Header().Set(&quot;Content-Type&quot;, &quot;application/json&quot;)
    json.NewEncoder(w).Encode(item)
}

func getItem(w http.ResponseWriter, r *http.Request, id int) {
    for _, item := range items {
        if item.ID == id {
            w.Header().Set(&quot;Content-Type&quot;, &quot;application/json&quot;)
            json.NewEncoder(w).Encode(item)
            return
        }
    }
    http.Error(w, &quot;&Iacute;tem no encontrado&quot;, http.StatusNotFound)
}

func updateItem(w http.ResponseWriter, r *http.Request, id int) {
    var updatedItem Item
    if err := json.NewDecoder(r.Body).Decode(&amp;updatedItem); err != nil {
        http.Error(w, &quot;Solicitud incorrecta&quot;, http.StatusBadRequest)
        return
    }

    mu.Lock()
    defer mu.Unlock()

    for i, item := range items {
        if item.ID == id {
            items[i].Name = updatedItem.Name
            w.Header().Set(&quot;Content-Type&quot;, &quot;application/json&quot;)
            json.NewEncoder(w).Encode(items[i])
            return
        }
    }
    http.Error(w, &quot;&Iacute;tem no encontrado&quot;, http.StatusNotFound)
}

func deleteItem(w http.ResponseWriter, r *http.Request, id int) {
    mu.Lock()
    defer mu.Unlock()

    for i, item := range items {
        if item.ID == id {
            items = append(items[:i], items[i+1:]...)
            w.WriteHeader(http.StatusNoContent)
            return
        }
    }
    http.Error(w, &quot;&Iacute;tem no encontrado&quot;, http.StatusNotFound)
}</pre></div><div class='content'><ul>
<li><strong>Explicación</strong>:
<ul>
<li><strong>Almacén de Datos</strong>: Una slice en memoria <code>items</code> para almacenar ítems y un mutex <code>mu</code> para manejar el acceso concurrente.</li>
<li><strong>Manejadores</strong>: Funciones para manejar diferentes métodos HTTP para los endpoints <code>/items</code> y <code>/items/{id}</code>.</li>
<li><strong>Operaciones CRUD</strong>: Funciones para crear, leer, actualizar y eliminar ítems.</li>
</ul>
</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>En este tema, cubrimos los conceptos básicos para crear una API RESTful en Go. Configuramos un servidor HTTP simple, creamos endpoints e implementamos operaciones CRUD. Esta base te ayudará a construir APIs más complejas e integrarlas con bases de datos, autenticación y otras características avanzadas.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
