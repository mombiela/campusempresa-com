<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manejo de Errores en CL (Lenguaje de Control)</title>

    <link rel="alternate" href="https://campusempresa.com/es/cl/error-handling" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/cl/error-handling" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/cl/error-handling" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/cl/error-handling" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Proyecto</a>
				<a href="about">Sobre nosotros</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donaciones</a>
				<a href="licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>El manejo de errores es un aspecto crucial de la programación en Lenguaje de Control (CL) en sistemas IBM i. Un manejo adecuado de errores asegura que tus programas puedan manejar situaciones inesperadas de manera elegante y proporcionar retroalimentación significativa a los usuarios. Este tema te guiará desde los conceptos básicos del manejo de errores en CL hasta técnicas más avanzadas.</p>
</div><h1>Introducción al Manejo de Errores</h1>
<div class='content'><p>El manejo de errores en CL implica detectar y responder a errores que ocurren durante la ejecución de un programa CL. Esto puede incluir errores del sistema, errores del usuario o condiciones inesperadas.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Mensajes de Error</strong>: Mensajes generados por el sistema cuando ocurre un error.</li>
<li><strong>Comandos de Manejo de Mensajes</strong>: Comandos utilizados para manejar mensajes, como <code>MONMSG</code> (Monitor Mensaje).</li>
<li><strong>Estructura de Datos de Estado del Programa (PSDS)</strong>: Una estructura de datos que contiene información sobre el estado del programa, incluyendo información de errores.</li>
</ul>
</div><h1>Manejo Básico de Errores</h1>
<div class='content'></div><h2>Uso del Comando MONMSG</h2>
<div class='content'><p>El comando <code>MONMSG</code> se utiliza para monitorear mensajes específicos y tomar acción cuando esos mensajes son recibidos.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICAvKiBJbnRlbnRhciBlbGltaW5hciB1biBhcmNoaXZvICovCiAgICBETFRGIEZJTEUoTVlMSUIvTVlGSUxFKQogICAgLyogTW9uaXRvcmVhciBlcnJvciBkZSBhcmNoaXZvIG5vIGVuY29udHJhZG8gKi8KICAgIE1PTk1TRyBNU0dJRChDUEYyMTA1KSBFWEVDKERPKQogICAgICAgIC8qIE1hbmVqYXIgZWwgZXJyb3IgKi8KICAgICAgICBTTkRQR01NU0cgTVNHKCdBcmNoaXZvIG5vIGVuY29udHJhZG8uIFBvciBmYXZvciwgdmVyaWZpcXVlIGVsIG5vbWJyZSBkZWwgYXJjaGl2by4nKQogICAgRU5ERE8KRU5EUEdN"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    /* Intentar eliminar un archivo */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitorear error de archivo no encontrado */
    MONMSG MSGID(CPF2105) EXEC(DO)
        /* Manejar el error */
        SNDPGMMSG MSG('Archivo no encontrado. Por favor, verifique el nombre del archivo.')
    ENDDO
ENDPGM</pre></div><div class='content'><p>En este ejemplo:</p>
<ul>
<li>El comando <code>DLTF</code> intenta eliminar un archivo.</li>
<li>El comando <code>MONMSG</code> monitorea el mensaje <code>CPF2105</code>, que indica que el archivo no fue encontrado.</li>
<li>Si se recibe el mensaje, se envía un mensaje de programa para informar al usuario.</li>
</ul>
</div><h1>Manejo Intermedio de Errores</h1>
<div class='content'></div><h2>Uso de Múltiples Comandos MONMSG</h2>
<div class='content'><p>Puedes usar múltiples comandos <code>MONMSG</code> para manejar diferentes errores de diferentes maneras.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICAvKiBJbnRlbnRhciBlbGltaW5hciB1biBhcmNoaXZvICovCiAgICBETFRGIEZJTEUoTVlMSUIvTVlGSUxFKQogICAgLyogTW9uaXRvcmVhciBlcnJvciBkZSBhcmNoaXZvIG5vIGVuY29udHJhZG8gKi8KICAgIE1PTk1TRyBNU0dJRChDUEYyMTA1KSBFWEVDKERPKQogICAgICAgIFNORFBHTU1TRyBNU0coJ0FyY2hpdm8gbm8gZW5jb250cmFkby4gUG9yIGZhdm9yLCB2ZXJpZmlxdWUgZWwgbm9tYnJlIGRlbCBhcmNoaXZvLicpCiAgICBFTkRETwogICAgLyogTW9uaXRvcmVhciBlcnJvciBkZSBhcmNoaXZvIGVuIHVzbyAqLwogICAgTU9OTVNHIE1TR0lEKENQRjIxMTApIEVYRUMoRE8pCiAgICAgICAgU05EUEdNTVNHIE1TRygnRWwgYXJjaGl2byBlc3TDoSBhY3R1YWxtZW50ZSBlbiB1c28uIFBvciBmYXZvciwgaW50ZW50ZSBudWV2YW1lbnRlIG3DoXMgdGFyZGUuJykKICAgIEVORERPCkVORFBHTQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    /* Intentar eliminar un archivo */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitorear error de archivo no encontrado */
    MONMSG MSGID(CPF2105) EXEC(DO)
        SNDPGMMSG MSG('Archivo no encontrado. Por favor, verifique el nombre del archivo.')
    ENDDO
    /* Monitorear error de archivo en uso */
    MONMSG MSGID(CPF2110) EXEC(DO)
        SNDPGMMSG MSG('El archivo est&aacute; actualmente en uso. Por favor, intente nuevamente m&aacute;s tarde.')
    ENDDO
ENDPGM</pre></div><div class='content'><p>En este ejemplo:</p>
<ul>
<li>Se utilizan dos comandos <code>MONMSG</code> para manejar diferentes mensajes de error (<code>CPF2105</code> y <code>CPF2110</code>).</li>
</ul>
</div><h2>Uso de IDs de Mensajes Genéricos</h2>
<div class='content'><p>Puedes usar IDs de mensajes genéricos para manejar un rango de errores relacionados.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICAvKiBJbnRlbnRhciBlbGltaW5hciB1biBhcmNoaXZvICovCiAgICBETFRGIEZJTEUoTVlMSUIvTVlGSUxFKQogICAgLyogTW9uaXRvcmVhciBjdWFscXVpZXIgZXJyb3IgQ1BGMjF4eCAqLwogICAgTU9OTVNHIE1TR0lEKENQRjIxIyMpIEVYRUMoRE8pCiAgICAgICAgU05EUEdNTVNHIE1TRygnT2N1cnJpw7MgdW4gZXJyb3IgYWwgZWxpbWluYXIgZWwgYXJjaGl2by4nKQogICAgRU5ERE8KRU5EUEdN"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    /* Intentar eliminar un archivo */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitorear cualquier error CPF21xx */
    MONMSG MSGID(CPF21##) EXEC(DO)
        SNDPGMMSG MSG('Ocurri&oacute; un error al eliminar el archivo.')
    ENDDO
ENDPGM</pre></div><div class='content'><p>En este ejemplo:</p>
<ul>
<li>El comando <code>MONMSG</code> usa el ID de mensaje genérico <code>CPF21##</code> para manejar cualquier error en el rango <code>CPF21xx</code>.</li>
</ul>
</div><h1>Manejo Avanzado de Errores</h1>
<div class='content'></div><h2>Uso de la Estructura de Datos de Estado del Programa (PSDS)</h2>
<div class='content'><p>La PSDS puede ser utilizada para obtener información detallada sobre el error que ocurrió.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgJk1TR0lEICpDSEFSIDcKICAgIERDTCAmTVNHRFRBICpDSEFSIDI1NgogICAgRENMICZNU0dGICpDSEFSIDEwCgogICAgLyogRGVmaW5pciBsYSBQU0RTICovCiAgICBEQ0xGIEZJTEUoUVNZUy9RQURTUFBHTSkKCiAgICAvKiBJbnRlbnRhciBlbGltaW5hciB1biBhcmNoaXZvICovCiAgICBETFRGIEZJTEUoTVlMSUIvTVlGSUxFKQogICAgLyogTW9uaXRvcmVhciBjdWFscXVpZXIgZXJyb3IgKi8KICAgIE1PTk1TRyBNU0dJRChDUEYwMDAwKSBFWEVDKERPKQogICAgICAgIC8qIFJlY3VwZXJhciBlbCBJRCBkZWwgbWVuc2FqZSB5IGxvcyBkYXRvcyBkZWwgbWVuc2FqZSAqLwogICAgICAgIFJDVk1TRyBNU0dUWVBFKCpESUFHKSBNU0dJRCgmTVNHSUQpIE1TR0RUQSgmTVNHRFRBKSBNU0dGKCZNU0dGKQogICAgICAgIC8qIEVudmlhciB1biBtZW5zYWplIGRlIHByb2dyYW1hIGNvbiBsb3MgZGV0YWxsZXMgZGVsIGVycm9yICovCiAgICAgICAgU05EUEdNTVNHIE1TRygnRXJyb3I6ICcgKkNBVCAmTVNHSUQgKkJDQVQgJk1TR0RUQSkKICAgIEVORERPCkVORFBHTQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL &amp;MSGID *CHAR 7
    DCL &amp;MSGDTA *CHAR 256
    DCL &amp;MSGF *CHAR 10

    /* Definir la PSDS */
    DCLF FILE(QSYS/QADSPPGM)

    /* Intentar eliminar un archivo */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitorear cualquier error */
    MONMSG MSGID(CPF0000) EXEC(DO)
        /* Recuperar el ID del mensaje y los datos del mensaje */
        RCVMSG MSGTYPE(*DIAG) MSGID(&amp;MSGID) MSGDTA(&amp;MSGDTA) MSGF(&amp;MSGF)
        /* Enviar un mensaje de programa con los detalles del error */
        SNDPGMMSG MSG('Error: ' *CAT &amp;MSGID *BCAT &amp;MSGDTA)
    ENDDO
ENDPGM</pre></div><div class='content'><p>En este ejemplo:</p>
<ul>
<li>La PSDS se utiliza para recuperar información detallada sobre el error.</li>
<li>El comando <code>RCVMSG</code> recupera el ID del mensaje y los datos del mensaje.</li>
<li>Se envía un mensaje de programa con los detalles del error.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>El manejo de errores en CL es esencial para crear programas robustos y amigables para el usuario. Usando comandos como <code>MONMSG</code> y aprovechando la PSDS, puedes manejar efectivamente los errores y proporcionar retroalimentación significativa a los usuarios. A medida que avances, podrás crear mecanismos de manejo de errores más sofisticados para cubrir una amplia gama de escenarios. Recuerda, un buen manejo de errores no solo mejora la confiabilidad de tus programas, sino que también mejora la experiencia del usuario.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
