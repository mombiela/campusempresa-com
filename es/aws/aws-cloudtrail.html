<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es">Castellano</b>
				|
				<a href="https://campusempresa.cat/aws/aws-cloudtrail" id="lnk_lang_ca" data-lang="ca">Català</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="objective">El Proyecto</a>
				<a href="about">Sobre nosotros</a>
				<a href="contribute">Contribuir</a>
				<a href="donate">Donaciones</a>
				<a href="licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducción a AWS CloudTrail</h1>
<div class='content'><p>AWS CloudTrail es un servicio que permite la gobernanza, el cumplimiento y la auditoría operativa y de riesgos de tu cuenta de AWS. Con CloudTrail, puedes registrar, monitorear continuamente y retener la actividad de la cuenta relacionada con acciones en toda tu infraestructura de AWS.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Evento</strong>: Un registro de una actividad en tu cuenta de AWS. Los eventos incluyen acciones realizadas en la Consola de Administración de AWS, AWS SDKs, herramientas de línea de comandos y otros servicios de AWS.</li>
<li><strong>Trail</strong>: Una configuración que permite la entrega de eventos como archivos de registro a un bucket de Amazon S3.</li>
<li><strong>Eventos de Gestión</strong>: Proporcionan información sobre operaciones de gestión que se realizan en recursos en tu cuenta de AWS.</li>
<li><strong>Eventos de Datos</strong>: Proporcionan información sobre operaciones de recursos realizadas en o dentro de un recurso.</li>
<li><strong>Eventos de Insights</strong>: Detectan actividad inusual en tu cuenta de AWS.</li>
</ul>
</div><h1>Configuración de AWS CloudTrail</h1>
<h2>Creación de un Trail</h2>
<div class='content'><ol>
<li>
<p><strong>Navegar a CloudTrail en la Consola de Administración de AWS</strong>:</p>
<ul>
<li>Ve a la Consola de Administración de AWS.</li>
<li>Busca y selecciona &quot;CloudTrail&quot;.</li>
</ul>
</li>
<li>
<p><strong>Crear un Trail</strong>:</p>
<ul>
<li>Haz clic en &quot;Crear trail&quot;.</li>
<li>Ingresa un nombre para tu trail.</li>
<li>Elige si deseas aplicar el trail a todas las regiones.</li>
<li>Especifica un bucket de S3 para almacenar tus archivos de registro.</li>
</ul>
</li>
<li>
<p><strong>Configurar Ajustes del Trail</strong>:</p>
<ul>
<li>Habilita la validación de archivos de registro.</li>
<li>Elige si deseas habilitar CloudWatch Logs.</li>
<li>Especifica el grupo de logs y el rol de IAM para CloudWatch Logs.</li>
</ul>
</li>
<li>
<p><strong>Revisar y Crear</strong>:</p>
<ul>
<li>Revisa tus configuraciones.</li>
<li>Haz clic en &quot;Crear trail&quot;.</li>
</ul>
</li>
</ol>
</div><h2>Ejemplo: Creación de un Trail usando AWS CLI</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNsb3VkdHJhaWwgY3JlYXRlLXRyYWlsIC0tbmFtZSBteS10cmFpbCAtLXMzLWJ1Y2tldC1uYW1lIG15LWJ1Y2tldCAtLWlzLW11bHRpLXJlZ2lvbi10cmFpbA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws cloudtrail create-trail --name my-trail --s3-bucket-name my-bucket --is-multi-region-trail</pre></div><div class='content'></div><h1>Visualización y Análisis de Logs de CloudTrail</h1>
<h2>Acceso a Logs en S3</h2>
<div class='content'><ul>
<li>Navega al bucket de S3 especificado durante la creación del trail.</li>
<li>Navega por el bucket para encontrar los archivos de registro organizados por año, mes, día y hora.</li>
</ul>
</div><h2>Ejemplo: Visualización de Logs usando AWS CLI</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIHMzIGxzIHMzOi8vbXktYnVja2V0L0FXU0xvZ3MvPGFjY291bnQtaWQ+L0Nsb3VkVHJhaWwv"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws s3 ls s3://my-bucket/AWSLogs/&lt;account-id&gt;/CloudTrail/</pre></div><div class='content'></div><h2>Análisis de Logs con CloudWatch</h2>
<div class='content'><ul>
<li><strong>Habilitar Integración con CloudWatch Logs</strong>: Esto se puede hacer durante la creación del trail o editando un trail existente.</li>
<li><strong>Crear Métricas y Alarmas</strong>: Usa CloudWatch para crear métricas y establecer alarmas basadas en eventos específicos.</li>
</ul>
</div><h2>Ejemplo: Creación de un Filtro de Métricas</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGxvZ3MgcHV0LW1ldHJpYy1maWx0ZXIgXAogIC0tbG9nLWdyb3VwLW5hbWUgQ2xvdWRUcmFpbC9EZWZhdWx0TG9nR3JvdXAgXAogIC0tZmlsdGVyLW5hbWUgVW5hdXRob3JpemVkQVBJQ2FsbHMgXAogIC0tZmlsdGVyLXBhdHRlcm4gJ3sgKCQuZXJyb3JDb2RlID0gIipVbmF1dGhvcml6ZWRPcGVyYXRpb24iKSB8fCAoJC5lcnJvckNvZGUgPSAiQWNjZXNzRGVuaWVkKiIpIH0nIFwKICAtLW1ldHJpYy10cmFuc2Zvcm1hdGlvbnMgbWV0cmljTmFtZT1VbmF1dGhvcml6ZWRBUElDYWxscyxtZXRyaWNOYW1lc3BhY2U9Q2xvdWRUcmFpbE1ldHJpY3MsbWV0cmljVmFsdWU9MQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws logs put-metric-filter \
  --log-group-name CloudTrail/DefaultLogGroup \
  --filter-name UnauthorizedAPICalls \
  --filter-pattern '{ ($.errorCode = &quot;*UnauthorizedOperation&quot;) || ($.errorCode = &quot;AccessDenied*&quot;) }' \
  --metric-transformations metricName=UnauthorizedAPICalls,metricNamespace=CloudTrailMetrics,metricValue=1</pre></div><div class='content'></div><h1>Funcionalidades Avanzadas de CloudTrail</h1>
<h2>CloudTrail Insights</h2>
<div class='content'><ul>
<li><strong>Detectar Anomalías</strong>: CloudTrail Insights te ayuda a identificar actividad operativa inusual en tu cuenta de AWS.</li>
<li><strong>Habilitar Insights</strong>: Esto se puede hacer a través de la consola de CloudTrail editando un trail existente y habilitando Insights.</li>
</ul>
</div><h2>Ejemplo: Habilitar Insights usando AWS CLI</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNsb3VkdHJhaWwgdXBkYXRlLXRyYWlsIC0tbmFtZSBteS10cmFpbCAtLWluc2lnaHQtc2VsZWN0b3JzICdbeyJJbnNpZ2h0VHlwZSI6ICJBcGlDYWxsUmF0ZUluc2lnaHQifV0n"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws cloudtrail update-trail --name my-trail --insight-selectors '[{&quot;InsightType&quot;: &quot;ApiCallRateInsight&quot;}]'</pre></div><div class='content'></div><h2>Integración con AWS Lambda</h2>
<div class='content'><ul>
<li><strong>Automatizar Respuestas</strong>: Usa AWS Lambda para responder automáticamente a eventos específicos de CloudTrail.</li>
<li><strong>Caso de Uso Ejemplo</strong>: Activar una función Lambda para deshabilitar un usuario IAM comprometido.</li>
</ul>
</div><h2>Ejemplo: Disparador de Función Lambda</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJzb3VyY2UiOiBbImF3cy5jbG91ZHRyYWlsIl0sCiAgImRldGFpbC10eXBlIjogWyJBV1MgQVBJIENhbGwgdmlhIENsb3VkVHJhaWwiXSwKICAiZGV0YWlsIjogewogICAgImV2ZW50TmFtZSI6IFsiQ29uc29sZUxvZ2luIl0sCiAgICAiZXJyb3JDb2RlIjogWyJBY2Nlc3NEZW5pZWQiXQogIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;source&quot;: [&quot;aws.cloudtrail&quot;],
  &quot;detail-type&quot;: [&quot;AWS API Call via CloudTrail&quot;],
  &quot;detail&quot;: {
    &quot;eventName&quot;: [&quot;ConsoleLogin&quot;],
    &quot;errorCode&quot;: [&quot;AccessDenied&quot;]
  }
}</pre></div><div class='content'></div><h1>Mejores Prácticas</h1>
<div class='content'><ul>
<li><strong>Habilitar Trails Multi-Región</strong>: Asegúrate de capturar eventos de todas las regiones.</li>
<li><strong>Revisar Logs Regularmente</strong>: Revisa periódicamente los logs de CloudTrail para identificar cualquier actividad inusual.</li>
<li><strong>Integrar con CloudWatch</strong>: Usa CloudWatch para monitoreo y alertas en tiempo real.</li>
<li><strong>Asegurar Buckets de S3</strong>: Asegúrate de que los buckets de S3 que almacenan tus logs de CloudTrail estén debidamente asegurados.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>AWS CloudTrail es una herramienta poderosa para monitorear y auditar la actividad de tu cuenta de AWS. Al entender sus conceptos clave, configurar trails y aprovechar las funcionalidades avanzadas, puedes mejorar la seguridad y el cumplimiento de tu entorno de AWS. Revisar regularmente los logs e integrar con otros servicios de AWS como CloudWatch y Lambda puede ayudarte a mantener una infraestructura robusta y segura.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
       <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
       <a href="cookies">Més informació</a>
   </div>	
	</div>    
</body>
</html>
