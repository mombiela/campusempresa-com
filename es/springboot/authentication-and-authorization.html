<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autenticación y Autorización en Spring Boot</title>

    <link rel="alternate" href="https://campusempresa.com/es/springboot/authentication-and-authorization" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/springboot/authentication-and-authorization" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/springboot/authentication-and-authorization" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/springboot/authentication-and-authorization" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='securing-restful-web-services'>&#x25C4;Asegurando Servicios Web RESTful</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Autenticación y Autorización en Spring Boot</a>
	</div>
	<div class='col-4 text-end'>
					<a href='jwt-authentication'>Autenticación JWT (JSON Web Token) &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>La autenticación y la autorización son componentes críticos de cualquier aplicación segura. En esta sección, exploraremos cómo implementar estos conceptos en una aplicación Spring Boot. Cubriremos los conceptos básicos para principiantes y gradualmente avanzaremos hacia temas más avanzados.</p>
</div><h1>Autenticación</h1>
<div class='content'></div><h2>¿Qué es la Autenticación?</h2>
<div class='content'><p>La autenticación es el proceso de verificar la identidad de un usuario o sistema. Asegura que la entidad que intenta acceder al sistema es quien dice ser.</p>
</div><h2>Autenticación Básica con Spring Security</h2>
<div class='content'><p>Spring Security es un marco de autenticación y control de acceso potente y altamente personalizable. Es el estándar de facto para asegurar aplicaciones basadas en Spring.</p>
<h4>Añadiendo la Dependencia de Spring Security</h4>
<p>Primero, añade la dependencia de Spring Security a tu archivo <code>pom.xml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcuc3ByaW5nZnJhbWV3b3JrLmJvb3Q8L2dyb3VwSWQ+CiAgICA8YXJ0aWZhY3RJZD5zcHJpbmctYm9vdC1zdGFydGVyLXNlY3VyaXR5PC9hcnRpZmFjdElkPgo8L2RlcGVuZGVuY3k+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;</pre></div><div class='content'><h4>Configurando la Autenticación Básica</h4>
<p>Crea una clase de configuración de seguridad para configurar la autenticación básica:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuY29udGV4dC5hbm5vdGF0aW9uLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvbmZpZy5hbm5vdGF0aW9uLmF1dGhlbnRpY2F0aW9uLmJ1aWxkZXJzLkF1dGhlbnRpY2F0aW9uTWFuYWdlckJ1aWxkZXI7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvbmZpZy5hbm5vdGF0aW9uLndlYi5idWlsZGVycy5IdHRwU2VjdXJpdHk7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvbmZpZy5hbm5vdGF0aW9uLndlYi5jb25maWd1cmF0aW9uLkVuYWJsZVdlYlNlY3VyaXR5OwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb25maWcuYW5ub3RhdGlvbi53ZWIuY29uZmlndXJhdGlvbi5XZWJTZWN1cml0eUNvbmZpZ3VyZXJBZGFwdGVyOwoKQENvbmZpZ3VyYXRpb24KQEVuYWJsZVdlYlNlY3VyaXR5CnB1YmxpYyBjbGFzcyBTZWN1cml0eUNvbmZpZyBleHRlbmRzIFdlYlNlY3VyaXR5Q29uZmlndXJlckFkYXB0ZXIgewoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgY29uZmlndXJlKEF1dGhlbnRpY2F0aW9uTWFuYWdlckJ1aWxkZXIgYXV0aCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICAgICAgYXV0aC5pbk1lbW9yeUF1dGhlbnRpY2F0aW9uKCkKICAgICAgICAgICAgLndpdGhVc2VyKCJ1c2VyIikucGFzc3dvcmQoIntub29wfXBhc3N3b3JkIikucm9sZXMoIlVTRVIiKQogICAgICAgICAgICAuYW5kKCkKICAgICAgICAgICAgLndpdGhVc2VyKCJhZG1pbiIpLnBhc3N3b3JkKCJ7bm9vcH1hZG1pbiIpLnJvbGVzKCJBRE1JTiIpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgY29uZmlndXJlKEh0dHBTZWN1cml0eSBodHRwKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBodHRwCiAgICAgICAgICAgIC5hdXRob3JpemVSZXF1ZXN0cygpCiAgICAgICAgICAgICAgICAuYW55UmVxdWVzdCgpLmF1dGhlbnRpY2F0ZWQoKQogICAgICAgICAgICAgICAgLmFuZCgpCiAgICAgICAgICAgIC5odHRwQmFzaWMoKTsKICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;

@Configuration
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(AuthenticationManagerBuilder auth) throws Exception {
        auth.inMemoryAuthentication()
            .withUser(&quot;user&quot;).password(&quot;{noop}password&quot;).roles(&quot;USER&quot;)
            .and()
            .withUser(&quot;admin&quot;).password(&quot;{noop}admin&quot;).roles(&quot;ADMIN&quot;);
    }

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .authorizeRequests()
                .anyRequest().authenticated()
                .and()
            .httpBasic();
    }
}</pre></div><div class='content'><ul>
<li><code>@EnableWebSecurity</code>: Habilita el soporte de seguridad web de Spring Security.</li>
<li><code>configure(AuthenticationManagerBuilder auth)</code>: Configura la autenticación en memoria con dos usuarios.</li>
<li><code>configure(HttpSecurity http)</code>: Configura la autenticación HTTP básica.</li>
</ul>
</div><h2>Autenticación Basada en Formularios</h2>
<div class='content'><p>La autenticación basada en formularios permite a los usuarios iniciar sesión a través de un formulario HTML personalizado.</p>
<h4>Configurando la Autenticación Basada en Formularios</h4>
<p>Modifica la clase <code>SecurityConfig</code> para usar la autenticación basada en formularios:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QE92ZXJyaWRlCnByb3RlY3RlZCB2b2lkIGNvbmZpZ3VyZShIdHRwU2VjdXJpdHkgaHR0cCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICBodHRwCiAgICAgICAgLmF1dGhvcml6ZVJlcXVlc3RzKCkKICAgICAgICAgICAgLmFueVJlcXVlc3QoKS5hdXRoZW50aWNhdGVkKCkKICAgICAgICAgICAgLmFuZCgpCiAgICAgICAgLmZvcm1Mb2dpbigpCiAgICAgICAgICAgIC5sb2dpblBhZ2UoIi9sb2dpbiIpCiAgICAgICAgICAgIC5wZXJtaXRBbGwoKQogICAgICAgICAgICAuYW5kKCkKICAgICAgICAubG9nb3V0KCkKICAgICAgICAgICAgLnBlcm1pdEFsbCgpOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Override
protected void configure(HttpSecurity http) throws Exception {
    http
        .authorizeRequests()
            .anyRequest().authenticated()
            .and()
        .formLogin()
            .loginPage(&quot;/login&quot;)
            .permitAll()
            .and()
        .logout()
            .permitAll();
}</pre></div><div class='content'><ul>
<li><code>formLogin()</code>: Configura el inicio de sesión basado en formularios.</li>
<li><code>loginPage(&quot;/login&quot;)</code>: Especifica la página de inicio de sesión personalizada.</li>
</ul>
<h4>Creando una Página de Inicio de Sesión Personalizada</h4>
<p>Crea un archivo HTML llamado <code>login.html</code> en el directorio <code>src/main/resources/templates</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT5Mb2dpbjwvdGl0bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8aDI+TG9naW48L2gyPgogICAgPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249Ii9sb2dpbiI+CiAgICAgICAgPGRpdj4KICAgICAgICAgICAgPGxhYmVsPlVzZXJuYW1lOjwvbGFiZWw+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJ1c2VybmFtZSIvPgogICAgICAgIDwvZGl2PgogICAgICAgIDxkaXY+CiAgICAgICAgICAgIDxsYWJlbD5QYXNzd29yZDo8L2xhYmVsPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIG5hbWU9InBhc3N3b3JkIi8+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdj4KICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiPkxvZ2luPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICA8L2Zvcm0+CjwvYm9keT4KPC9odG1sPg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Login&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h2&gt;Login&lt;/h2&gt;
    &lt;form method=&quot;post&quot; action=&quot;/login&quot;&gt;
        &lt;div&gt;
            &lt;label&gt;Username:&lt;/label&gt;
            &lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;label&gt;Password:&lt;/label&gt;
            &lt;input type=&quot;password&quot; name=&quot;password&quot;/&gt;
        &lt;/div&gt;
        &lt;div&gt;
            &lt;button type=&quot;submit&quot;&gt;Login&lt;/button&gt;
        &lt;/div&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h1>Autorización</h1>
<div class='content'></div><h2>¿Qué es la Autorización?</h2>
<div class='content'><p>La autorización es el proceso de determinar si un usuario autenticado tiene permiso para acceder a un recurso o realizar una acción.</p>
</div><h2>Control de Acceso Basado en Roles (RBAC)</h2>
<div class='content'><p>RBAC restringe el acceso basado en los roles asignados a los usuarios.</p>
<h4>Configurando el Control de Acceso Basado en Roles</h4>
<p>Actualiza la clase <code>SecurityConfig</code> para restringir el acceso basado en roles:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QE92ZXJyaWRlCnByb3RlY3RlZCB2b2lkIGNvbmZpZ3VyZShIdHRwU2VjdXJpdHkgaHR0cCkgdGhyb3dzIEV4Y2VwdGlvbiB7CiAgICBodHRwCiAgICAgICAgLmF1dGhvcml6ZVJlcXVlc3RzKCkKICAgICAgICAgICAgLmFudE1hdGNoZXJzKCIvYWRtaW4vKioiKS5oYXNSb2xlKCJBRE1JTiIpCiAgICAgICAgICAgIC5hbnRNYXRjaGVycygiL3VzZXIvKioiKS5oYXNSb2xlKCJVU0VSIikKICAgICAgICAgICAgLmFueVJlcXVlc3QoKS5hdXRoZW50aWNhdGVkKCkKICAgICAgICAgICAgLmFuZCgpCiAgICAgICAgLmZvcm1Mb2dpbigpCiAgICAgICAgICAgIC5sb2dpblBhZ2UoIi9sb2dpbiIpCiAgICAgICAgICAgIC5wZXJtaXRBbGwoKQogICAgICAgICAgICAuYW5kKCkKICAgICAgICAubG9nb3V0KCkKICAgICAgICAgICAgLnBlcm1pdEFsbCgpOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Override
protected void configure(HttpSecurity http) throws Exception {
    http
        .authorizeRequests()
            .antMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)
            .antMatchers(&quot;/user/**&quot;).hasRole(&quot;USER&quot;)
            .anyRequest().authenticated()
            .and()
        .formLogin()
            .loginPage(&quot;/login&quot;)
            .permitAll()
            .and()
        .logout()
            .permitAll();
}</pre></div><div class='content'><ul>
<li><code>antMatchers(&quot;/admin/**&quot;).hasRole(&quot;ADMIN&quot;)</code>: Restringe el acceso a URLs que comienzan con <code>/admin</code> a usuarios con el rol <code>ADMIN</code>.</li>
<li><code>antMatchers(&quot;/user/**&quot;).hasRole(&quot;USER&quot;)</code>: Restringe el acceso a URLs que comienzan con <code>/user</code> a usuarios con el rol <code>USER</code>.</li>
</ul>
</div><h2>Seguridad a Nivel de Método</h2>
<div class='content'><p>Spring Security también permite asegurar métodos en tu capa de servicio.</p>
<h4>Habilitando la Seguridad a Nivel de Método</h4>
<p>Habilita la seguridad a nivel de método añadiendo la anotación <code>@EnableGlobalMethodSecurity</code> a tu clase de configuración de seguridad:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29uZmlnLmFubm90YXRpb24ubWV0aG9kLmNvbmZpZ3VyYXRpb24uRW5hYmxlR2xvYmFsTWV0aG9kU2VjdXJpdHk7CgpAQ29uZmlndXJhdGlvbgpARW5hYmxlV2ViU2VjdXJpdHkKQEVuYWJsZUdsb2JhbE1ldGhvZFNlY3VyaXR5KHByZVBvc3RFbmFibGVkID0gdHJ1ZSkKcHVibGljIGNsYXNzIFNlY3VyaXR5Q29uZmlnIGV4dGVuZHMgV2ViU2VjdXJpdHlDb25maWd1cmVyQWRhcHRlciB7CiAgICAvLyBjw7NkaWdvIGV4aXN0ZW50ZQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;

@Configuration
@EnableWebSecurity
@EnableGlobalMethodSecurity(prePostEnabled = true)
public class SecurityConfig extends WebSecurityConfigurerAdapter {
    // c&oacute;digo existente
}</pre></div><div class='content'><h4>Asegurando Métodos con Anotaciones</h4>
<p>Usa anotaciones para asegurar métodos en tus clases de servicio:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuYWNjZXNzLnByZXBvc3QuUHJlQXV0aG9yaXplOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLlNlcnZpY2U7CgpAU2VydmljZQpwdWJsaWMgY2xhc3MgTXlTZXJ2aWNlIHsKCiAgICBAUHJlQXV0aG9yaXplKCJoYXNSb2xlKCdBRE1JTicpIikKICAgIHB1YmxpYyB2b2lkIGFkbWluTWV0aG9kKCkgewogICAgICAgIC8vIGzDs2dpY2EgZGVsIG3DqXRvZG8KICAgIH0KCiAgICBAUHJlQXV0aG9yaXplKCJoYXNSb2xlKCdVU0VSJykiKQogICAgcHVibGljIHZvaWQgdXNlck1ldGhvZCgpIHsKICAgICAgICAvLyBsw7NnaWNhIGRlbCBtw6l0b2RvCiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.stereotype.Service;

@Service
public class MyService {

    @PreAuthorize(&quot;hasRole('ADMIN')&quot;)
    public void adminMethod() {
        // l&oacute;gica del m&eacute;todo
    }

    @PreAuthorize(&quot;hasRole('USER')&quot;)
    public void userMethod() {
        // l&oacute;gica del m&eacute;todo
    }
}</pre></div><div class='content'><ul>
<li><code>@PreAuthorize(&quot;hasRole('ADMIN')&quot;)</code>: Asegura que solo los usuarios con el rol <code>ADMIN</code> puedan acceder al <code>adminMethod</code>.</li>
<li><code>@PreAuthorize(&quot;hasRole('USER')&quot;)</code>: Asegura que solo los usuarios con el rol <code>USER</code> puedan acceder al <code>userMethod</code>.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, cubrimos los conceptos básicos de autenticación y autorización en Spring Boot usando Spring Security. Comenzamos con la autenticación básica, pasamos a la autenticación basada en formularios y luego exploramos el control de acceso basado en roles y la seguridad a nivel de método. Al entender estos conceptos, puedes asegurar tus aplicaciones Spring Boot de manera efectiva.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='securing-restful-web-services'>&#x25C4;Asegurando Servicios Web RESTful</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Autenticación y Autorización en Spring Boot</a>
	</div>
	<div class='col-4 text-end'>
					<a href='jwt-authentication'>Autenticación JWT (JSON Web Token) &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
