<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contenedores de Prueba en Spring Boot</title>

    <link rel="alternate" href="https://campusempresa.com/es/springboot/test-containers" hreflang="es" />
    <link rel="alternate" href="https://campusempresa.com/es/springboot/test-containers" hreflang="x-default" />
	<link rel="alternate" href="https://campusempresa.com/ca/springboot/test-containers" hreflang="ca" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/es/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy<br> y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<b id="lit_lang_es" class="px-2">ES</b>
				|
				<a href="/ca/springboot/test-containers" id="lnk_lang_ca" data-lang="ca" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/es/objective">El Proyecto</a>
				<a href="/es/about">Sobre nosotros</a>
				<a href="/es/contribute">Contribuir</a>
				<a href="/es/donate">Donaciones</a>
				<a href="/es/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introducción a los Contenedores de Prueba</h1>
<div class='content'><p>Test Containers es una biblioteca de Java que soporta pruebas JUnit proporcionando instancias ligeras y desechables de bases de datos comunes, navegadores web Selenium, o cualquier otra cosa que pueda ejecutarse en un contenedor Docker. Esto permite a los desarrolladores escribir pruebas de integración confiables que interactúan con instancias reales de los servicios de los que depende su aplicación.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Contenedores Docker</strong>: Paquetes de software ligeros, autónomos y ejecutables que incluyen todo lo necesario para ejecutar una pieza de software, incluyendo el código, el tiempo de ejecución, las bibliotecas y las configuraciones.</li>
<li><strong>JUnit</strong>: Un marco de pruebas popular para aplicaciones Java.</li>
<li><strong>Pruebas de Integración</strong>: Pruebas en las que los módulos de software se combinan y se prueban como un grupo para asegurar que funcionan juntos como se espera.</li>
</ul>
</div><h1>Configuración de Contenedores de Prueba</h1>
<div class='content'><p>Para usar Test Containers en un proyecto Spring Boot, necesitas agregar las dependencias necesarias a tu archivo <code>pom.xml</code> o <code>build.gradle</code>.</p>
</div><h2>Dependencia de Maven</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcudGVzdGNvbnRhaW5lcnM8L2dyb3VwSWQ+CiAgICA8YXJ0aWZhY3RJZD50ZXN0Y29udGFpbmVyczwvYXJ0aWZhY3RJZD4KICAgIDx2ZXJzaW9uPjEuMTYuMDwvdmVyc2lvbj4KICAgIDxzY29wZT50ZXN0PC9zY29wZT4KPC9kZXBlbmRlbmN5Pgo8ZGVwZW5kZW5jeT4KICAgIDxncm91cElkPm9yZy50ZXN0Y29udGFpbmVyczwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPmp1bml0LWp1cGl0ZXI8L2FydGlmYWN0SWQ+CiAgICA8dmVyc2lvbj4xLjE2LjA8L3ZlcnNpb24+CiAgICA8c2NvcGU+dGVzdDwvc2NvcGU+CjwvZGVwZW5kZW5jeT4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependency&gt;
    &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;
    &lt;artifactId&gt;testcontainers&lt;/artifactId&gt;
    &lt;version&gt;1.16.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;
    &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;
    &lt;version&gt;1.16.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'></div><h2>Dependencia de Gradle</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVzdEltcGxlbWVudGF0aW9uICdvcmcudGVzdGNvbnRhaW5lcnM6dGVzdGNvbnRhaW5lcnM6MS4xNi4wJwp0ZXN0SW1wbGVtZW50YXRpb24gJ29yZy50ZXN0Y29udGFpbmVyczpqdW5pdC1qdXBpdGVyOjEuMTYuMCc="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>testImplementation 'org.testcontainers:testcontainers:1.16.0'
testImplementation 'org.testcontainers:junit-jupiter:1.16.0'</pre></div><div class='content'></div><h1>Uso de Contenedores de Prueba con Spring Boot</h1>
<h2>Ejemplo: Ejecutando un Contenedor PostgreSQL</h2>
<div class='content'><p>Para demostrar cómo usar Test Containers, configuremos un contenedor PostgreSQL para pruebas de integración.</p>
<ol>
<li>
<p><strong>Definir el Contenedor PostgreSQL</strong>:</p>
<pre><code class="language-java">import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;
import org.testcontainers.containers.PostgreSQLContainer;

@SpringBootTest
public class PostgresContainerTest {

    static PostgreSQLContainer&lt;?&gt; postgresContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:13.1&quot;)
            .withDatabaseName(&quot;testdb&quot;)
            .withUsername(&quot;testuser&quot;)
            .withPassword(&quot;testpass&quot;);

    static {
        postgresContainer.start();
    }

    @Test
    void contextLoads() {
        // Tu lógica de prueba aquí
    }
}
</code></pre>
</li>
<li>
<p><strong>Configurar Spring Boot para Usar el Contenedor</strong>:
Actualiza tu <code>application.properties</code> para usar la configuración de la base de datos del contenedor.</p>
<pre><code class="language-properties">spring.datasource.url=jdbc:postgresql://localhost:${postgresContainer.getMappedPort(5432)}/testdb
spring.datasource.username=testuser
spring.datasource.password=testpass
spring.datasource.driver-class-name=org.postgresql.Driver
</code></pre>
</li>
</ol>
</div><h2>Ejemplo: Ejecutando un Contenedor Redis</h2>
<div class='content'><ol>
<li>
<p><strong>Definir el Contenedor Redis</strong>:</p>
<pre><code class="language-java">import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;
import org.testcontainers.containers.GenericContainer;

@SpringBootTest
public class RedisContainerTest {

    static GenericContainer&lt;?&gt; redisContainer = new GenericContainer&lt;&gt;(&quot;redis:6.2.5&quot;)
            .withExposedPorts(6379);

    static {
        redisContainer.start();
    }

    @Test
    void contextLoads() {
        // Tu lógica de prueba aquí
    }
}
</code></pre>
</li>
<li>
<p><strong>Configurar Spring Boot para Usar el Contenedor</strong>:
Actualiza tu <code>application.properties</code> para usar la configuración de Redis del contenedor.</p>
<pre><code class="language-properties">spring.redis.host=localhost
spring.redis.port=${redisContainer.getMappedPort(6379)}
</code></pre>
</li>
</ol>
</div><h1>Uso Avanzado</h1>
<h2>Personalización de Contenedores</h2>
<div class='content'><p>Puedes personalizar los contenedores aún más agregando variables de entorno, montando volúmenes o vinculando contenedores.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UG9zdGdyZVNRTENvbnRhaW5lcjw/PiBwb3N0Z3Jlc0NvbnRhaW5lciA9IG5ldyBQb3N0Z3JlU1FMQ29udGFpbmVyPD4oInBvc3RncmVzOjEzLjEiKQogICAgICAgIC53aXRoRGF0YWJhc2VOYW1lKCJ0ZXN0ZGIiKQogICAgICAgIC53aXRoVXNlcm5hbWUoInRlc3R1c2VyIikKICAgICAgICAud2l0aFBhc3N3b3JkKCJ0ZXN0cGFzcyIpCiAgICAgICAgLndpdGhFbnYoIlBPU1RHUkVTX0lOSVREQl9BUkdTIiwgIi0tZW5jb2Rpbmc9VVRGLTgiKQogICAgICAgIC53aXRoRmlsZVN5c3RlbUJpbmQoIi9wYXRoL3RvL2luaXQuc3FsIiwgIi9kb2NrZXItZW50cnlwb2ludC1pbml0ZGIuZC9pbml0LnNxbCIpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PostgreSQLContainer&lt;?&gt; postgresContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:13.1&quot;)
        .withDatabaseName(&quot;testdb&quot;)
        .withUsername(&quot;testuser&quot;)
        .withPassword(&quot;testpass&quot;)
        .withEnv(&quot;POSTGRES_INITDB_ARGS&quot;, &quot;--encoding=UTF-8&quot;)
        .withFileSystemBind(&quot;/path/to/init.sql&quot;, &quot;/docker-entrypoint-initdb.d/init.sql&quot;);</pre></div><div class='content'></div><h2>Reutilización de Contenedores</h2>
<div class='content'><p>Para acelerar las pruebas, puedes reutilizar contenedores en varias clases de prueba.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5qdW5pdC5qdXBpdGVyLmFwaS5leHRlbnNpb24uRXh0ZW5kV2l0aDsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsudGVzdC5jb250ZXh0Lmp1bml0Lmp1cGl0ZXIuU3ByaW5nRXh0ZW5zaW9uOwppbXBvcnQgb3JnLnRlc3Rjb250YWluZXJzLmp1bml0Lmp1cGl0ZXIuQ29udGFpbmVyOwppbXBvcnQgb3JnLnRlc3Rjb250YWluZXJzLmp1bml0Lmp1cGl0ZXIuVGVzdGNvbnRhaW5lcnM7CgpAVGVzdGNvbnRhaW5lcnMKQEV4dGVuZFdpdGgoU3ByaW5nRXh0ZW5zaW9uLmNsYXNzKQpwdWJsaWMgY2xhc3MgUmV1c2VDb250YWluZXJUZXN0IHsKCiAgICBAQ29udGFpbmVyCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBQb3N0Z3JlU1FMQ29udGFpbmVyPD8+IHBvc3RncmVzQ29udGFpbmVyID0gbmV3IFBvc3RncmVTUUxDb250YWluZXI8PigicG9zdGdyZXM6MTMuMSIpCiAgICAgICAgICAgIC53aXRoRGF0YWJhc2VOYW1lKCJ0ZXN0ZGIiKQogICAgICAgICAgICAud2l0aFVzZXJuYW1lKCJ0ZXN0dXNlciIpCiAgICAgICAgICAgIC53aXRoUGFzc3dvcmQoInRlc3RwYXNzIik7CgogICAgQFRlc3QKICAgIHZvaWQgdGVzdDEoKSB7CiAgICAgICAgLy8gTMOzZ2ljYSBkZSBwcnVlYmEKICAgIH0KCiAgICBAVGVzdAogICAgdm9pZCB0ZXN0MigpIHsKICAgICAgICAvLyBMw7NnaWNhIGRlIHBydWViYQogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.junit.jupiter.api.extension.ExtendWith;
import org.springframework.test.context.junit.jupiter.SpringExtension;
import org.testcontainers.junit.jupiter.Container;
import org.testcontainers.junit.jupiter.Testcontainers;

@Testcontainers
@ExtendWith(SpringExtension.class)
public class ReuseContainerTest {

    @Container
    private static final PostgreSQLContainer&lt;?&gt; postgresContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:13.1&quot;)
            .withDatabaseName(&quot;testdb&quot;)
            .withUsername(&quot;testuser&quot;)
            .withPassword(&quot;testpass&quot;);

    @Test
    void test1() {
        // L&oacute;gica de prueba
    }

    @Test
    void test2() {
        // L&oacute;gica de prueba
    }
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Test Containers proporciona una forma poderosa de realizar pruebas de integración en aplicaciones Spring Boot aprovechando los contenedores Docker. Permiten probar tu aplicación contra instancias reales de los servicios de los que depende, asegurando una mayor fiabilidad y consistencia en tus pruebas. Siguiendo los ejemplos y las pautas proporcionadas, puedes configurar y personalizar Test Containers para adaptarse a tus necesidades de prueba, desde contenedores de bases de datos simples hasta configuraciones más complejas de múltiples servicios.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/es/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
