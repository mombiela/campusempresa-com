<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interfaz con C</title>

    <link rel="alternate" href="https://campusempresa.com/fortran/interfacing-with-c" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/fortran/interfacing-with-c" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/fortran/interfacing-with-c" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/fortran/interfacing-with-c" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/fortran/interfacing-with-c" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='parallel-programming-coarrays'>&#x25C4;Programación Paralela con Coarrays</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Interfaz con C</a>
	</div>
	<div class='col-4 text-end'>
					<a href='optimization-techniques'>Técnicas de Optimización &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Interfaz de Fortran con C puede ser una forma poderosa de aprovechar las fortalezas de ambos lenguajes. Esta sección te guiará a través del proceso de llamar a funciones de C desde Fortran y viceversa, cubriendo conceptos clave, proporcionando ejemplos y ofreciendo ejercicios para solidificar tu comprensión.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Interoperabilidad</strong>: La capacidad de Fortran y C para llamar a las funciones del otro y compartir datos.</li>
<li><strong>Módulo ISO_C_BINDING</strong>: Un módulo de Fortran que proporciona las herramientas necesarias para la interoperabilidad con C.</li>
<li><strong>Atributos de Vinculación con C</strong>: Atributos que especifican cómo las entidades de Fortran corresponden a las entidades de C.</li>
<li><strong>Mapeo de Tipos de Datos</strong>: Comprender cómo los tipos de datos de Fortran se mapean a los tipos de datos de C.</li>
</ul>
</div><h1>Módulo ISO_C_BINDING</h1>
<div class='content'><p>El módulo <code>ISO_C_BINDING</code> es esencial para la interoperabilidad entre Fortran y C. Proporciona constantes con nombre y tipos derivados que ayudan a mapear los tipos de datos de Fortran a los tipos de datos de C.</p>
</div><h2>Ejemplo: Uso de ISO_C_BINDING</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBjX2JpbmRpbmdfZXhhbXBsZQogIHVzZSBpc29fY19iaW5kaW5nCiAgaW1wbGljaXQgbm9uZQoKICBpbnRlZ2VyKGNfaW50KSA6OiBpCiAgcmVhbChjX2Zsb2F0KSA6OiB4CgogIGkgPSA0MgogIHggPSAzLjE0CgogIHByaW50ICosICdJbnRlZ2VyOicsIGkKICBwcmludCAqLCAnUmVhbDonLCB4CgplbmQgcHJvZ3JhbSBjX2JpbmRpbmdfZXhhbXBsZQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program c_binding_example
  use iso_c_binding
  implicit none

  integer(c_int) :: i
  real(c_float) :: x

  i = 42
  x = 3.14

  print *, 'Integer:', i
  print *, 'Real:', x

end program c_binding_example</pre></div><div class='content'><p>En este ejemplo, <code>c_int</code> y <code>c_float</code> son constantes del módulo <code>ISO_C_BINDING</code> que se mapean a los correspondientes tipos de datos de C.</p>
</div><h1>Llamar a Funciones de C desde Fortran</h1>
<div class='content'><p>Para llamar a una función de C desde Fortran, necesitas:</p>
<ol>
<li>Declarar la función de C en Fortran usando el atributo <code>BIND(C)</code>.</li>
<li>Asegurarte de que los tipos de datos coincidan entre Fortran y C.</li>
</ol>
</div><h2>Ejemplo: Llamar a una Función de C</h2>
<div class='content'><h4>Código C (guardar como <code>c_function.c</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+Cgp2b2lkIHByaW50X21lc3NhZ2UoKSB7CiAgICBwcmludGYoIkhlbGxvIGZyb20gQyFcbiIpOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

void print_message() {
    printf(&quot;Hello from C!\n&quot;);
}</pre></div><div class='content'><h4>Código Fortran (guardar como <code>call_c_function.f90</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBjYWxsX2NfZnVuY3Rpb24KICB1c2UgaXNvX2NfYmluZGluZwogIGltcGxpY2l0IG5vbmUKCiAgaW50ZXJmYWNlCiAgICBzdWJyb3V0aW5lIHByaW50X21lc3NhZ2UoKSBiaW5kKEMsIG5hbWU9InByaW50X21lc3NhZ2UiKQogICAgZW5kIHN1YnJvdXRpbmUgcHJpbnRfbWVzc2FnZQogIGVuZCBpbnRlcmZhY2UKCiAgY2FsbCBwcmludF9tZXNzYWdlKCkKCmVuZCBwcm9ncmFtIGNhbGxfY19mdW5jdGlvbg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program call_c_function
  use iso_c_binding
  implicit none

  interface
    subroutine print_message() bind(C, name=&quot;print_message&quot;)
    end subroutine print_message
  end interface

  call print_message()

end program call_c_function</pre></div><div class='content'><p>Para compilar y ejecutar el ejemplo anterior:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2NjIC1jIGNfZnVuY3Rpb24uYwpnZm9ydHJhbiBjYWxsX2NfZnVuY3Rpb24uZjkwIGNfZnVuY3Rpb24ubyAtbyBjYWxsX2NfZnVuY3Rpb24KLi9jYWxsX2NfZnVuY3Rpb24="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcc -c c_function.c
gfortran call_c_function.f90 c_function.o -o call_c_function
./call_c_function</pre></div><div class='content'></div><h1>Llamar a Funciones de Fortran desde C</h1>
<div class='content'><p>Para llamar a una función de Fortran desde C, necesitas:</p>
<ol>
<li>Declarar la función de Fortran con el atributo <code>BIND(C)</code>.</li>
<li>Asegurarte de que los tipos de datos coincidan entre Fortran y C.</li>
</ol>
</div><h2>Ejemplo: Llamar a una Función de Fortran</h2>
<div class='content'><h4>Código Fortran (guardar como <code>fortran_function.f90</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlIGZvcnRyYW5fbW9kdWxlCiAgdXNlIGlzb19jX2JpbmRpbmcKICBpbXBsaWNpdCBub25lCgpjb250YWlucwoKICBzdWJyb3V0aW5lIHByaW50X21lc3NhZ2UoKSBiaW5kKEMsIG5hbWU9InByaW50X21lc3NhZ2UiKQogICAgcHJpbnQgKiwgIkhlbGxvIGZyb20gRm9ydHJhbiEiCiAgZW5kIHN1YnJvdXRpbmUgcHJpbnRfbWVzc2FnZQoKZW5kIG1vZHVsZSBmb3J0cmFuX21vZHVsZQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module fortran_module
  use iso_c_binding
  implicit none

contains

  subroutine print_message() bind(C, name=&quot;print_message&quot;)
    print *, &quot;Hello from Fortran!&quot;
  end subroutine print_message

end module fortran_module</pre></div><div class='content'><h4>Código C (guardar como <code>call_fortran_function.c</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+Cgp2b2lkIHByaW50X21lc3NhZ2UoKTsKCmludCBtYWluKCkgewogICAgcHJpbnRfbWVzc2FnZSgpOwogICAgcmV0dXJuIDA7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

void print_message();

int main() {
    print_message();
    return 0;
}</pre></div><div class='content'><p>Para compilar y ejecutar el ejemplo anterior:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2ZvcnRyYW4gLWMgZm9ydHJhbl9mdW5jdGlvbi5mOTAKZ2NjIGNhbGxfZm9ydHJhbl9mdW5jdGlvbi5jIGZvcnRyYW5fZnVuY3Rpb24ubyAtbyBjYWxsX2ZvcnRyYW5fZnVuY3Rpb24KLi9jYWxsX2ZvcnRyYW5fZnVuY3Rpb24="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gfortran -c fortran_function.f90
gcc call_fortran_function.c fortran_function.o -o call_fortran_function
./call_fortran_function</pre></div><div class='content'></div><h1>Mapeo de Tipos de Datos</h1>
<div class='content'><p>Comprender cómo los tipos de datos de Fortran se mapean a los tipos de datos de C es crucial para la interoperabilidad. La siguiente tabla resume los mapeos comunes:</p>
<p>| Tipo de Datos Fortran | Tipo de Datos C | Constante ISO_C_BINDING |
|-----------------------|-----------------|-------------------------|
| INTEGER               | int             | <code>c_int</code>                 |
| REAL                  | float           | <code>c_float</code>               |
| DOUBLE PRECISION      | double          | <code>c_double</code>              |
| CHARACTER             | char            | <code>c_char</code>                |
| LOGICAL               | _Bool           | <code>c_bool</code>                |</p>
</div><h1>Ejercicios</h1>
<div class='content'><ol>
<li><strong>Llamada a Función Simple</strong>: Escribe un programa en Fortran que llame a una función de C para sumar dos enteros y devuelva el resultado.</li>
<li><strong>Intercambio de Datos</strong>: Crea un programa en Fortran que pase un arreglo a una función de C, que modifique el arreglo, y luego imprima el arreglo modificado en Fortran.</li>
<li><strong>Programa de Lenguaje Mixto</strong>: Desarrolla una pequeña aplicación donde Fortran maneje los cálculos numéricos y C maneje las operaciones de entrada/salida.</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>Interfaz de Fortran con C te permite combinar el poder computacional de Fortran con la versatilidad de C. Al comprender el módulo <code>ISO_C_BINDING</code>, los mapeos de tipos de datos y cómo llamar a funciones entre los dos lenguajes, puedes crear aplicaciones poderosas e interoperables. Practica con los ejemplos y ejercicios proporcionados para solidificar tu comprensión y mejorar tus habilidades de programación.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='parallel-programming-coarrays'>&#x25C4;Programación Paralela con Coarrays</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Interfaz con C</a>
	</div>
	<div class='col-4 text-end'>
					<a href='optimization-techniques'>Técnicas de Optimización &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
