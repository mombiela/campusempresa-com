<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listas de Argumentos Variables</title>

    <link rel="alternate" href="https://campusempresa.com/mod/c/10-03-variable-argument-lists" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/c/10-03-variable-argument-lists" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/c/10-03-variable-argument-lists" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/c/10-03-variable-argument-lists" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/c/10-03-variable-argument-lists" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='10-02-command-line-arguments' title="Argumentos de Línea de Comandos">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Listas de Argumentos Variables</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='10-04-multithreading-in-c' title="Multihilo en C">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En C, las funciones pueden ser diseñadas para aceptar un número variable de argumentos. Esto es útil en situaciones donde no se conoce de antemano cuántos argumentos se pasarán a la función. Un ejemplo clásico de una función con argumentos variables es <code>printf</code>.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ol>
<li><strong>Biblioteca <code>&lt;stdarg.h&gt;</code></strong>: Para manejar listas de argumentos variables, se utiliza la biblioteca <code>&lt;stdarg.h&gt;</code>.</li>
<li><strong>Macros de <code>&lt;stdarg.h&gt;</code></strong>:
<ul>
<li><code>va_list</code>: Tipo de datos para almacenar la información necesaria para acceder a los argumentos variables.</li>
<li><code>va_start</code>: Inicializa una variable de tipo <code>va_list</code> para ser usada con <code>va_arg</code> y <code>va_end</code>.</li>
<li><code>va_arg</code>: Recupera el siguiente argumento en la lista.</li>
<li><code>va_end</code>: Limpia la variable <code>va_list</code>.</li>
</ul>
</li>
</ol>
</div><h1>Ejemplo Práctico</h1>
<div class='content'><p>Vamos a crear una función llamada <code>sum</code> que puede sumar un número variable de enteros.</p>
</div><h2>Paso 1: Incluir la Biblioteca Necesaria</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGFyZy5oPgojaW5jbHVkZSA8c3RkaW8uaD4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdarg.h&gt;
#include &lt;stdio.h&gt;</pre></div><div class='content'></div><h2>Paso 2: Definir la Función con Argumentos Variables</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50IHN1bShpbnQgY291bnQsIC4uLikgewogICAgdmFfbGlzdCBhcmdzOwogICAgaW50IHRvdGFsID0gMDsKCiAgICAvLyBJbmljaWFsaXphciBhcmdzIHBhcmEgYWxtYWNlbmFyIHRvZG9zIGxvcyB2YWxvcmVzIGRlc3B1w6lzIGRlIGNvdW50CiAgICB2YV9zdGFydChhcmdzLCBjb3VudCk7CgogICAgLy8gSXRlcmFyIHNvYnJlIHRvZG9zIGxvcyBhcmd1bWVudG9zCiAgICBmb3IgKGludCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKICAgICAgICB0b3RhbCArPSB2YV9hcmcoYXJncywgaW50KTsKICAgIH0KCiAgICAvLyBMaW1waWFyIGxhIGxpc3RhIGRlIGFyZ3VtZW50b3MKICAgIHZhX2VuZChhcmdzKTsKCiAgICByZXR1cm4gdG90YWw7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int sum(int count, ...) {
    va_list args;
    int total = 0;

    // Inicializar args para almacenar todos los valores despu&eacute;s de count
    va_start(args, count);

    // Iterar sobre todos los argumentos
    for (int i = 0; i &lt; count; i++) {
        total += va_arg(args, int);
    }

    // Limpiar la lista de argumentos
    va_end(args);

    return total;
}</pre></div><div class='content'></div><h2>Paso 3: Usar la Función</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50IG1haW4oKSB7CiAgICBwcmludGYoIlN1bSBvZiAyLCAzLCA0OiAlZFxuIiwgc3VtKDMsIDIsIDMsIDQpKTsgLy8gT3V0cHV0OiA5CiAgICBwcmludGYoIlN1bSBvZiA1LCAxMCwgMTUsIDIwOiAlZFxuIiwgc3VtKDQsIDUsIDEwLCAxNSwgMjApKTsgLy8gT3V0cHV0OiA1MAogICAgcmV0dXJuIDA7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int main() {
    printf(&quot;Sum of 2, 3, 4: %d\n&quot;, sum(3, 2, 3, 4)); // Output: 9
    printf(&quot;Sum of 5, 10, 15, 20: %d\n&quot;, sum(4, 5, 10, 15, 20)); // Output: 50
    return 0;
}</pre></div><div class='content'></div><h2>Explicación del Código</h2>
<div class='content'><ol>
<li><strong>Incluir <code>&lt;stdarg.h&gt;</code></strong>: Necesario para usar las macros <code>va_list</code>, <code>va_start</code>, <code>va_arg</code> y <code>va_end</code>.</li>
<li><strong>Definir la Función <code>sum</code></strong>:
<ul>
<li><code>int count</code>: Primer argumento que indica el número de argumentos adicionales.</li>
<li><code>...</code>: Indica que la función acepta un número variable de argumentos.</li>
<li><code>va_list args</code>: Declara una variable <code>args</code> de tipo <code>va_list</code> para manejar los argumentos variables.</li>
<li><code>va_start(args, count)</code>: Inicializa <code>args</code> para acceder a los argumentos que siguen a <code>count</code>.</li>
<li><code>va_arg(args, int)</code>: Recupera el siguiente argumento de tipo <code>int</code> de la lista <code>args</code>.</li>
<li><code>va_end(args)</code>: Limpia <code>args</code> después de que todos los argumentos han sido procesados.</li>
</ul>
</li>
</ol>
</div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio 1: Crear una Función `average`</h2>
<div class='content'><p>Crea una función llamada <code>average</code> que calcule el promedio de un número variable de enteros.</p>
<h4>Solución</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGFyZy5oPgojaW5jbHVkZSA8c3RkaW8uaD4KCmRvdWJsZSBhdmVyYWdlKGludCBjb3VudCwgLi4uKSB7CiAgICB2YV9saXN0IGFyZ3M7CiAgICBpbnQgc3VtID0gMDsKCiAgICB2YV9zdGFydChhcmdzLCBjb3VudCk7CgogICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CiAgICAgICAgc3VtICs9IHZhX2FyZyhhcmdzLCBpbnQpOwogICAgfQoKICAgIHZhX2VuZChhcmdzKTsKCiAgICByZXR1cm4gKGRvdWJsZSlzdW0gLyBjb3VudDsKfQoKaW50IG1haW4oKSB7CiAgICBwcmludGYoIkF2ZXJhZ2Ugb2YgMiwgMywgNDogJS4yZlxuIiwgYXZlcmFnZSgzLCAyLCAzLCA0KSk7IC8vIE91dHB1dDogMy4wMAogICAgcHJpbnRmKCJBdmVyYWdlIG9mIDUsIDEwLCAxNSwgMjA6ICUuMmZcbiIsIGF2ZXJhZ2UoNCwgNSwgMTAsIDE1LCAyMCkpOyAvLyBPdXRwdXQ6IDEyLjUwCiAgICByZXR1cm4gMDsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdarg.h&gt;
#include &lt;stdio.h&gt;

double average(int count, ...) {
    va_list args;
    int sum = 0;

    va_start(args, count);

    for (int i = 0; i &lt; count; i++) {
        sum += va_arg(args, int);
    }

    va_end(args);

    return (double)sum / count;
}

int main() {
    printf(&quot;Average of 2, 3, 4: %.2f\n&quot;, average(3, 2, 3, 4)); // Output: 3.00
    printf(&quot;Average of 5, 10, 15, 20: %.2f\n&quot;, average(4, 5, 10, 15, 20)); // Output: 12.50
    return 0;
}</pre></div><div class='content'></div><h2>Explicación de la Solución</h2>
<div class='content'><ol>
<li><strong>Definir la Función <code>average</code></strong>:
<ul>
<li><code>double average(int count, ...)</code>: La función devuelve un <code>double</code> y acepta un número variable de argumentos.</li>
<li><code>va_list args</code>: Declara una variable <code>args</code> de tipo <code>va_list</code>.</li>
<li><code>va_start(args, count)</code>: Inicializa <code>args</code>.</li>
<li><code>va_arg(args, int)</code>: Recupera cada argumento de tipo <code>int</code> y lo suma.</li>
<li><code>va_end(args)</code>: Limpia <code>args</code>.</li>
<li><code>return (double)sum / count</code>: Calcula y devuelve el promedio.</li>
</ul>
</li>
</ol>
</div><h1>Errores Comunes y Consejos</h1>
<div class='content'><ol>
<li><strong>Olvidar <code>va_end</code></strong>: Siempre asegúrate de llamar a <code>va_end</code> para limpiar la lista de argumentos.</li>
<li><strong>Tipo Incorrecto en <code>va_arg</code></strong>: Asegúrate de que el tipo especificado en <code>va_arg</code> coincida con el tipo de los argumentos pasados.</li>
<li><strong>No Inicializar <code>va_list</code></strong>: Siempre inicializa <code>va_list</code> con <code>va_start</code> antes de usar <code>va_arg</code>.</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>Las listas de argumentos variables son una característica poderosa en C que permite escribir funciones más flexibles. Sin embargo, es crucial manejarlas con cuidado para evitar errores comunes. En el siguiente tema, exploraremos el multihilo en C, una técnica avanzada para ejecutar múltiples tareas simultáneamente.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='10-02-command-line-arguments' title="Argumentos de Línea de Comandos">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='10-04-multithreading-in-c' title="Multihilo en C">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
