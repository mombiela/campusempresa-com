<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pruebas Unitarias con Groovy</title>

    <link rel="alternate" href="https://campusempresa.com/mod/groovy/06-01-unit-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/groovy/06-01-unit-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/groovy/06-01-unit-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/groovy/06-01-unit-testing" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/groovy/06-01-unit-testing" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-web-development' title="Desarrollo Web con Groovy">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Pruebas Unitarias con Groovy</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-mocking-stubbing' title="Mocking y Stubbing">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Las pruebas unitarias son una parte esencial del desarrollo de software, ya que permiten verificar que las unidades individuales de código (como funciones o métodos) funcionan correctamente. En Groovy, las pruebas unitarias se pueden realizar de manera eficiente utilizando frameworks como JUnit y Spock. En esta sección, aprenderás cómo escribir y ejecutar pruebas unitarias en Groovy.</p>
</div><h1><p>Contenido</p>
</h1>
<div class='content'><ol>
<li><a href="#introducción-a-las-pruebas-unitarias">Introducción a las Pruebas Unitarias</a></li>
<li><a href="#configuración-del-entorno-de-pruebas">Configuración del Entorno de Pruebas</a></li>
<li><a href="#escribiendo-pruebas-con-junit">Escribiendo Pruebas con JUnit</a></li>
<li><a href="#escribiendo-pruebas-con-spock">Escribiendo Pruebas con Spock</a></li>
<li><a href="#ejercicios-prácticos">Ejercicios Prácticos</a></li>
<li><a href="#conclusión">Conclusión</a></li>
</ol>
</div><h1><p>Introducción a las Pruebas Unitarias</p>
</h1>
<div class='content'><p>Las pruebas unitarias son pruebas automatizadas que verifican el comportamiento de una pequeña parte del código, generalmente una función o un método. Estas pruebas son fundamentales para asegurar la calidad del software y facilitar el mantenimiento del código.</p>
</div><h2><p>Beneficios de las Pruebas Unitarias</p>
</h2>
<div class='content'><ul>
<li><strong>Detección temprana de errores</strong>: Permiten identificar errores en el código de manera temprana.</li>
<li><strong>Facilitan el refactoring</strong>: Ayudan a realizar cambios en el código con confianza, ya que las pruebas aseguran que el comportamiento no se ha roto.</li>
<li><strong>Documentación</strong>: Sirven como documentación viva del comportamiento esperado del código.</li>
</ul>
</div><h1><p>Configuración del Entorno de Pruebas</p>
</h1>
<div class='content'><p>Antes de escribir pruebas unitarias, es necesario configurar el entorno de pruebas. En Groovy, esto generalmente implica la configuración de dependencias para frameworks de pruebas como JUnit y Spock.</p>
</div><h2><p>Configuración con Gradle</p>
</h2>
<div class='content'><p>Gradle es una herramienta de construcción que facilita la gestión de dependencias y la ejecución de tareas. A continuación, se muestra cómo configurar Gradle para usar JUnit y Spock.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gYnVpbGQuZ3JhZGxlCnBsdWdpbnMgewogICAgaWQgJ2dyb292eScKICAgIGlkICdqYXZhJwp9CgpyZXBvc2l0b3JpZXMgewogICAgbWF2ZW5DZW50cmFsKCkKfQoKZGVwZW5kZW5jaWVzIHsKICAgIHRlc3RJbXBsZW1lbnRhdGlvbiAnanVuaXQ6anVuaXQ6NC4xMy4yJwogICAgdGVzdEltcGxlbWVudGF0aW9uICdvcmcuc3BvY2tmcmFtZXdvcms6c3BvY2stY29yZToyLjAtZ3Jvb3Z5LTMuMCcKICAgIHRlc3RJbXBsZW1lbnRhdGlvbiAnb3JnLmNvZGVoYXVzLmdyb292eTpncm9vdnktYWxsOjMuMC43Jwp9Cgp0ZXN0IHsKICAgIHVzZUpVbml0UGxhdGZvcm0oKQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// build.gradle
plugins {
    id 'groovy'
    id 'java'
}

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'junit:junit:4.13.2'
    testImplementation 'org.spockframework:spock-core:2.0-groovy-3.0'
    testImplementation 'org.codehaus.groovy:groovy-all:3.0.7'
}

test {
    useJUnitPlatform()
}</pre></div><div class='content'></div><h1><p>Escribiendo Pruebas con JUnit</p>
</h1>
<div class='content'><p>JUnit es uno de los frameworks de pruebas más populares en el ecosistema Java y Groovy. A continuación, se muestra cómo escribir una prueba unitaria básica con JUnit.</p>
</div><h2><p>Ejemplo de Prueba con JUnit</p>
</h2>
<div class='content'><p>Supongamos que tenemos una clase <code>Calculator</code> con un método <code>add</code> que suma dos números.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL21haW4vZ3Jvb3Z5L0NhbGN1bGF0b3IuZ3Jvb3Z5CmNsYXNzIENhbGN1bGF0b3IgewogICAgaW50IGFkZChpbnQgYSwgaW50IGIpIHsKICAgICAgICByZXR1cm4gYSArIGIKICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/main/groovy/Calculator.groovy
class Calculator {
    int add(int a, int b) {
        return a + b
    }
}</pre></div><div class='content'><p>Podemos escribir una prueba unitaria para este método utilizando JUnit.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL3Rlc3QvZ3Jvb3Z5L0NhbGN1bGF0b3JUZXN0Lmdyb292eQppbXBvcnQgb3JnLmp1bml0LlRlc3QKaW1wb3J0IHN0YXRpYyBvcmcuanVuaXQuQXNzZXJ0LioKCmNsYXNzIENhbGN1bGF0b3JUZXN0IHsKCiAgICBAVGVzdAogICAgdm9pZCB0ZXN0QWRkKCkgewogICAgICAgIENhbGN1bGF0b3IgY2FsY3VsYXRvciA9IG5ldyBDYWxjdWxhdG9yKCkKICAgICAgICBpbnQgcmVzdWx0ID0gY2FsY3VsYXRvci5hZGQoMiwgMykKICAgICAgICBhc3NlcnRFcXVhbHMoNSwgcmVzdWx0KQogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/test/groovy/CalculatorTest.groovy
import org.junit.Test
import static org.junit.Assert.*

class CalculatorTest {

    @Test
    void testAdd() {
        Calculator calculator = new Calculator()
        int result = calculator.add(2, 3)
        assertEquals(5, result)
    }
}</pre></div><div class='content'></div><h2><p>Explicación del Código</p>
</h2>
<div class='content'><ul>
<li><code>@Test</code>: Anotación que indica que el método es una prueba unitaria.</li>
<li><code>assertEquals(expected, actual)</code>: Método de aserción que verifica que el valor esperado es igual al valor actual.</li>
</ul>
</div><h1><p>Escribiendo Pruebas con Spock</p>
</h1>
<div class='content'><p>Spock es un framework de pruebas para Groovy que ofrece una sintaxis más expresiva y poderosa que JUnit. A continuación, se muestra cómo escribir una prueba unitaria básica con Spock.</p>
</div><h2><p>Ejemplo de Prueba con Spock</p>
</h2>
<div class='content'><p>Utilizaremos la misma clase <code>Calculator</code> para escribir una prueba con Spock.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL3Rlc3QvZ3Jvb3Z5L0NhbGN1bGF0b3JTcGVjLmdyb292eQppbXBvcnQgc3BvY2subGFuZy5TcGVjaWZpY2F0aW9uCgpjbGFzcyBDYWxjdWxhdG9yU3BlYyBleHRlbmRzIFNwZWNpZmljYXRpb24gewoKICAgIGRlZiAidGVzdCBhZGQgbWV0aG9kIigpIHsKICAgICAgICBnaXZlbjogImEgY2FsY3VsYXRvciIKICAgICAgICBDYWxjdWxhdG9yIGNhbGN1bGF0b3IgPSBuZXcgQ2FsY3VsYXRvcigpCgogICAgICAgIHdoZW46ICJhZGRpbmcgdHdvIG51bWJlcnMiCiAgICAgICAgaW50IHJlc3VsdCA9IGNhbGN1bGF0b3IuYWRkKDIsIDMpCgogICAgICAgIHRoZW46ICJ0aGUgcmVzdWx0IGlzIHRoZSBzdW0gb2YgdGhlIHR3byBudW1iZXJzIgogICAgICAgIHJlc3VsdCA9PSA1CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/test/groovy/CalculatorSpec.groovy
import spock.lang.Specification

class CalculatorSpec extends Specification {

    def &quot;test add method&quot;() {
        given: &quot;a calculator&quot;
        Calculator calculator = new Calculator()

        when: &quot;adding two numbers&quot;
        int result = calculator.add(2, 3)

        then: &quot;the result is the sum of the two numbers&quot;
        result == 5
    }
}</pre></div><div class='content'></div><h2><p>Explicación del Código</p>
</h2>
<div class='content'><ul>
<li><code>Specification</code>: Clase base para todas las especificaciones de Spock.</li>
<li><code>given</code>, <code>when</code>, <code>then</code>: Bloques que describen el comportamiento de la prueba de manera clara y estructurada.</li>
</ul>
</div><h1><p>Ejercicios Prácticos</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Prueba de Multiplicación</p>
</h2>
<div class='content'><ol>
<li>Crea un método <code>multiply</code> en la clase <code>Calculator</code> que multiplique dos números.</li>
<li>Escribe una prueba unitaria para el método <code>multiply</code> utilizando JUnit.</li>
</ol>
</div><h2><p>Ejercicio 2: Prueba de División</p>
</h2>
<div class='content'><ol>
<li>Crea un método <code>divide</code> en la clase <code>Calculator</code> que divida dos números.</li>
<li>Escribe una prueba unitaria para el método <code>divide</code> utilizando Spock.</li>
</ol>
</div><h2><p>Soluciones</p>
</h2>
<div class='content'><h4>Solución Ejercicio 1</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL21haW4vZ3Jvb3Z5L0NhbGN1bGF0b3IuZ3Jvb3Z5CmNsYXNzIENhbGN1bGF0b3IgewogICAgaW50IGFkZChpbnQgYSwgaW50IGIpIHsKICAgICAgICByZXR1cm4gYSArIGIKICAgIH0KCiAgICBpbnQgbXVsdGlwbHkoaW50IGEsIGludCBiKSB7CiAgICAgICAgcmV0dXJuIGEgKiBiCiAgICB9Cn0KCi8vIHNyYy90ZXN0L2dyb292eS9DYWxjdWxhdG9yVGVzdC5ncm9vdnkKaW1wb3J0IG9yZy5qdW5pdC5UZXN0CmltcG9ydCBzdGF0aWMgb3JnLmp1bml0LkFzc2VydC4qCgpjbGFzcyBDYWxjdWxhdG9yVGVzdCB7CgogICAgQFRlc3QKICAgIHZvaWQgdGVzdEFkZCgpIHsKICAgICAgICBDYWxjdWxhdG9yIGNhbGN1bGF0b3IgPSBuZXcgQ2FsY3VsYXRvcigpCiAgICAgICAgaW50IHJlc3VsdCA9IGNhbGN1bGF0b3IuYWRkKDIsIDMpCiAgICAgICAgYXNzZXJ0RXF1YWxzKDUsIHJlc3VsdCkKICAgIH0KCiAgICBAVGVzdAogICAgdm9pZCB0ZXN0TXVsdGlwbHkoKSB7CiAgICAgICAgQ2FsY3VsYXRvciBjYWxjdWxhdG9yID0gbmV3IENhbGN1bGF0b3IoKQogICAgICAgIGludCByZXN1bHQgPSBjYWxjdWxhdG9yLm11bHRpcGx5KDIsIDMpCiAgICAgICAgYXNzZXJ0RXF1YWxzKDYsIHJlc3VsdCkKICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/main/groovy/Calculator.groovy
class Calculator {
    int add(int a, int b) {
        return a + b
    }

    int multiply(int a, int b) {
        return a * b
    }
}

// src/test/groovy/CalculatorTest.groovy
import org.junit.Test
import static org.junit.Assert.*

class CalculatorTest {

    @Test
    void testAdd() {
        Calculator calculator = new Calculator()
        int result = calculator.add(2, 3)
        assertEquals(5, result)
    }

    @Test
    void testMultiply() {
        Calculator calculator = new Calculator()
        int result = calculator.multiply(2, 3)
        assertEquals(6, result)
    }
}</pre></div><div class='content'><h4>Solución Ejercicio 2</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL21haW4vZ3Jvb3Z5L0NhbGN1bGF0b3IuZ3Jvb3Z5CmNsYXNzIENhbGN1bGF0b3IgewogICAgaW50IGFkZChpbnQgYSwgaW50IGIpIHsKICAgICAgICByZXR1cm4gYSArIGIKICAgIH0KCiAgICBpbnQgbXVsdGlwbHkoaW50IGEsIGludCBiKSB7CiAgICAgICAgcmV0dXJuIGEgKiBiCiAgICB9CgogICAgaW50IGRpdmlkZShpbnQgYSwgaW50IGIpIHsKICAgICAgICBpZiAoYiA9PSAwKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oIkRpdmlzaW9uIGJ5IHplcm8iKQogICAgICAgIH0KICAgICAgICByZXR1cm4gYSAvIGIKICAgIH0KfQoKLy8gc3JjL3Rlc3QvZ3Jvb3Z5L0NhbGN1bGF0b3JTcGVjLmdyb292eQppbXBvcnQgc3BvY2subGFuZy5TcGVjaWZpY2F0aW9uCgpjbGFzcyBDYWxjdWxhdG9yU3BlYyBleHRlbmRzIFNwZWNpZmljYXRpb24gewoKICAgIGRlZiAidGVzdCBhZGQgbWV0aG9kIigpIHsKICAgICAgICBnaXZlbjogImEgY2FsY3VsYXRvciIKICAgICAgICBDYWxjdWxhdG9yIGNhbGN1bGF0b3IgPSBuZXcgQ2FsY3VsYXRvcigpCgogICAgICAgIHdoZW46ICJhZGRpbmcgdHdvIG51bWJlcnMiCiAgICAgICAgaW50IHJlc3VsdCA9IGNhbGN1bGF0b3IuYWRkKDIsIDMpCgogICAgICAgIHRoZW46ICJ0aGUgcmVzdWx0IGlzIHRoZSBzdW0gb2YgdGhlIHR3byBudW1iZXJzIgogICAgICAgIHJlc3VsdCA9PSA1CiAgICB9CgogICAgZGVmICJ0ZXN0IGRpdmlkZSBtZXRob2QiKCkgewogICAgICAgIGdpdmVuOiAiYSBjYWxjdWxhdG9yIgogICAgICAgIENhbGN1bGF0b3IgY2FsY3VsYXRvciA9IG5ldyBDYWxjdWxhdG9yKCkKCiAgICAgICAgd2hlbjogImRpdmlkaW5nIHR3byBudW1iZXJzIgogICAgICAgIGludCByZXN1bHQgPSBjYWxjdWxhdG9yLmRpdmlkZSg2LCAzKQoKICAgICAgICB0aGVuOiAidGhlIHJlc3VsdCBpcyB0aGUgZGl2aXNpb24gb2YgdGhlIHR3byBudW1iZXJzIgogICAgICAgIHJlc3VsdCA9PSAyCiAgICB9CgogICAgZGVmICJ0ZXN0IGRpdmlkZSBieSB6ZXJvIigpIHsKICAgICAgICBnaXZlbjogImEgY2FsY3VsYXRvciIKICAgICAgICBDYWxjdWxhdG9yIGNhbGN1bGF0b3IgPSBuZXcgQ2FsY3VsYXRvcigpCgogICAgICAgIHdoZW46ICJkaXZpZGluZyBieSB6ZXJvIgogICAgICAgIGNhbGN1bGF0b3IuZGl2aWRlKDYsIDApCgogICAgICAgIHRoZW46ICJhbiBleGNlcHRpb24gaXMgdGhyb3duIgogICAgICAgIHRocm93bihJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24pCiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/main/groovy/Calculator.groovy
class Calculator {
    int add(int a, int b) {
        return a + b
    }

    int multiply(int a, int b) {
        return a * b
    }

    int divide(int a, int b) {
        if (b == 0) {
            throw new IllegalArgumentException(&quot;Division by zero&quot;)
        }
        return a / b
    }
}

// src/test/groovy/CalculatorSpec.groovy
import spock.lang.Specification

class CalculatorSpec extends Specification {

    def &quot;test add method&quot;() {
        given: &quot;a calculator&quot;
        Calculator calculator = new Calculator()

        when: &quot;adding two numbers&quot;
        int result = calculator.add(2, 3)

        then: &quot;the result is the sum of the two numbers&quot;
        result == 5
    }

    def &quot;test divide method&quot;() {
        given: &quot;a calculator&quot;
        Calculator calculator = new Calculator()

        when: &quot;dividing two numbers&quot;
        int result = calculator.divide(6, 3)

        then: &quot;the result is the division of the two numbers&quot;
        result == 2
    }

    def &quot;test divide by zero&quot;() {
        given: &quot;a calculator&quot;
        Calculator calculator = new Calculator()

        when: &quot;dividing by zero&quot;
        calculator.divide(6, 0)

        then: &quot;an exception is thrown&quot;
        thrown(IllegalArgumentException)
    }
}</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta sección, hemos aprendido la importancia de las pruebas unitarias y cómo escribirlas utilizando JUnit y Spock en Groovy. Las pruebas unitarias son esenciales para asegurar la calidad del software y facilitar el mantenimiento del código. En los siguientes módulos, continuaremos explorando más características avanzadas de Groovy y cómo aplicarlas en proyectos reales.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-web-development' title="Desarrollo Web con Groovy">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-mocking-stubbing' title="Mocking y Stubbing">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
