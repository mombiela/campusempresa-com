<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creando un Servidor Web en Lua</title>

    <link rel="alternate" href="https://campusempresa.com/mod/lua/creating-a-web-server" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/lua/creating-a-web-server" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/lua/creating-a-web-server" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body  class="test" >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/lua/creating-a-web-server" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/lua/creating-a-web-server" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
									<div class="assert">
						<p><b>Atención!</b> Ha habido un error en la generación del curso y puede contener errores de traducción.Estamos trabajando para solucinarlo por lo que se deben usar los contenidos con cuidado.Se puede consultar el contenido correcto en otro idioma en el siguiente enlace:<br>
						<a href="https://enterprisecampus.net/mod/lua/creating-a-web-server">https://enterprisecampus.net/mod/lua/creating-a-web-server</a></p>
					</div>
								<div class='row navigation'>
	<div class='col-4'>
					<a href='building-a-simple-game'>&#x25C4;Construcción de un Juego Simple</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creando un Servidor Web en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='developing-a-gui-application'>Desarrollo de una Aplicación GUI &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En este tema, exploraremos cómo crear un servidor web usando Lua. Comenzaremos con lo básico y gradualmente nos moveremos hacia conceptos más avanzados. Al final de este tema, serás capaz de crear un servidor web funcional en Lua, manejar solicitudes HTTP y servir contenido dinámico.</p>
</div><h1>Requisitos Previos</h1>
<div class='content'><p>Antes de sumergirte en la creación de un servidor web, asegúrate de tener:</p>
<ul>
<li>Comprensión básica de la programación en Lua.</li>
<li>Lua instalado en tu sistema.</li>
<li>Familiaridad con los conceptos básicos del protocolo HTTP.</li>
</ul>
</div><h1>Configuración del Entorno</h1>
<div class='content'><p>Para crear un servidor web en Lua, utilizaremos la biblioteca <code>luasocket</code>, que proporciona soporte de red para el lenguaje Lua.</p>
</div><h2>Instalando LuaSocket</h2>
<div class='content'><p>Para instalar LuaSocket, puedes usar LuaRocks, el gestor de paquetes para Lua.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bHVhcm9ja3MgaW5zdGFsbCBsdWFzb2NrZXQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>luarocks install luasocket</pre></div><div class='content'></div><h1>Servidor Web Básico</h1>
<div class='content'><p>Comencemos creando un servidor web simple que escuche en un puerto específico y responda con un mensaje estático.</p>
</div><h2>Ejemplo de Código: Servidor Web Simple</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgc29ja2V0ID0gcmVxdWlyZSgic29ja2V0IikKCi0tIENyZWFyIHVuIHNvY2tldCBUQ1AgeSBlbmxhemFybG8gYWwgaG9zdCBsb2NhbCwgZW4gY3VhbHF1aWVyIHB1ZXJ0bwpsb2NhbCBzZXJ2ZXIgPSBhc3NlcnQoc29ja2V0LmJpbmQoIioiLCA4MDgwKSkKCi0tIEltcHJpbWlyIGVsIG7Dum1lcm8gZGUgcHVlcnRvCmxvY2FsIGlwLCBwb3J0ID0gc2VydmVyOmdldHNvY2tuYW1lKCkKcHJpbnQoIlBvciBmYXZvciwgY29uw6ljdGF0ZSBhIGxvY2FsaG9zdCBlbiBlbCBwdWVydG8gIiAuLiBwb3J0KQoKLS0gQnVjbGUgaW5maW5pdG8gZXNwZXJhbmRvIGNvbmV4aW9uZXMgZGUgY2xpZW50ZXMKd2hpbGUgdHJ1ZSBkbwogICAgLS0gRXNwZXJhciB1bmEgY29uZXhpw7NuIGRlIGN1YWxxdWllciBjbGllbnRlCiAgICBsb2NhbCBjbGllbnQgPSBzZXJ2ZXI6YWNjZXB0KCkKICAgIAogICAgLS0gQXNlZ3VyYXJzZSBkZSBubyBibG9xdWVhciBlc3BlcmFuZG8gbGEgbMOtbmVhIGRlIGVzdGUgY2xpZW50ZQogICAgY2xpZW50OnNldHRpbWVvdXQoMTApCiAgICAKICAgIC0tIFJlY2liaXIgbGEgc29saWNpdHVkCiAgICBsb2NhbCByZXF1ZXN0LCBlcnIgPSBjbGllbnQ6cmVjZWl2ZSgpCiAgICAKICAgIC0tIFNpIG5vIGh1Ym8gZXJyb3IsIGVudmlhciB1bmEgcmVzcHVlc3RhCiAgICBpZiBub3QgZXJyIHRoZW4KICAgICAgICBwcmludCgiU29saWNpdHVkIHJlY2liaWRhOiAiIC4uIHJlcXVlc3QpCiAgICAgICAgbG9jYWwgcmVzcG9uc2UgPSAiSFRUUC8xLjEgMjAwIE9LXHJcbkNvbnRlbnQtVHlwZTogdGV4dC9wbGFpblxyXG5cclxuwqFIb2xhLCBNdW5kbyEiCiAgICAgICAgY2xpZW50OnNlbmQocmVzcG9uc2UpCiAgICBlbmQKICAgIAogICAgLS0gVGVybWluYXIgY29uIGVsIGNsaWVudGUsIGNlcnJhciBlbCBvYmpldG8KICAgIGNsaWVudDpjbG9zZSgpCmVuZA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local socket = require(&quot;socket&quot;)

-- Crear un socket TCP y enlazarlo al host local, en cualquier puerto
local server = assert(socket.bind(&quot;*&quot;, 8080))

-- Imprimir el n&uacute;mero de puerto
local ip, port = server:getsockname()
print(&quot;Por favor, con&eacute;ctate a localhost en el puerto &quot; .. port)

-- Bucle infinito esperando conexiones de clientes
while true do
    -- Esperar una conexi&oacute;n de cualquier cliente
    local client = server:accept()
    
    -- Asegurarse de no bloquear esperando la l&iacute;nea de este cliente
    client:settimeout(10)
    
    -- Recibir la solicitud
    local request, err = client:receive()
    
    -- Si no hubo error, enviar una respuesta
    if not err then
        print(&quot;Solicitud recibida: &quot; .. request)
        local response = &quot;HTTP/1.1 200 OK\r\nContent-Type: text/plain\r\n\r\n&iexcl;Hola, Mundo!&quot;
        client:send(response)
    end
    
    -- Terminar con el cliente, cerrar el objeto
    client:close()
end</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>socket.bind(&quot;*&quot;, 8080)</strong>: Enlaza el servidor a todas las direcciones IP disponibles en el puerto 8080.</li>
<li><strong>server:accept()</strong>: Espera a que un cliente se conecte.</li>
<li><strong>client:receive()</strong>: Recibe la solicitud HTTP del cliente.</li>
<li><strong>client:send(response)</strong>: Envía una respuesta HTTP de vuelta al cliente.</li>
<li><strong>client:close()</strong>: Cierra la conexión con el cliente.</li>
</ul>
</div><h1>Manejo de Solicitudes HTTP</h1>
<div class='content'><p>Para manejar diferentes tipos de solicitudes HTTP (GET, POST, etc.), necesitamos analizar la solicitud y responder en consecuencia.</p>
</div><h2>Ejemplo de Código: Manejo de Solicitudes GET</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgc29ja2V0ID0gcmVxdWlyZSgic29ja2V0IikKCmxvY2FsIHNlcnZlciA9IGFzc2VydChzb2NrZXQuYmluZCgiKiIsIDgwODApKQpsb2NhbCBpcCwgcG9ydCA9IHNlcnZlcjpnZXRzb2NrbmFtZSgpCnByaW50KCJQb3IgZmF2b3IsIGNvbsOpY3RhdGUgYSBsb2NhbGhvc3QgZW4gZWwgcHVlcnRvICIgLi4gcG9ydCkKCndoaWxlIHRydWUgZG8KICAgIGxvY2FsIGNsaWVudCA9IHNlcnZlcjphY2NlcHQoKQogICAgY2xpZW50OnNldHRpbWVvdXQoMTApCiAgICAKICAgIGxvY2FsIHJlcXVlc3QsIGVyciA9IGNsaWVudDpyZWNlaXZlKCkKICAgIAogICAgaWYgbm90IGVyciB0aGVuCiAgICAgICAgcHJpbnQoIlNvbGljaXR1ZCByZWNpYmlkYTogIiAuLiByZXF1ZXN0KQogICAgICAgIGxvY2FsIG1ldGhvZCwgcGF0aCA9IHJlcXVlc3Q6bWF0Y2goIl4oJXcrKSVzKC8lUyopJXNIVFRQIikKICAgICAgICAKICAgICAgICBpZiBtZXRob2QgPT0gIkdFVCIgdGhlbgogICAgICAgICAgICBsb2NhbCByZXNwb25zZSA9ICJIVFRQLzEuMSAyMDAgT0tcclxuQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluXHJcblxyXG5Tb2xpY2l0YXN0ZTogIiAuLiBwYXRoCiAgICAgICAgICAgIGNsaWVudDpzZW5kKHJlc3BvbnNlKQogICAgICAgIGVsc2UKICAgICAgICAgICAgbG9jYWwgcmVzcG9uc2UgPSAiSFRUUC8xLjEgNDA1IE1ldGhvZCBOb3QgQWxsb3dlZFxyXG5Db250ZW50LVR5cGU6IHRleHQvcGxhaW5cclxuXHJcbk3DqXRvZG8gbm8gcGVybWl0aWRvIgogICAgICAgICAgICBjbGllbnQ6c2VuZChyZXNwb25zZSkKICAgICAgICBlbmQKICAgIGVuZAogICAgCiAgICBjbGllbnQ6Y2xvc2UoKQplbmQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local socket = require(&quot;socket&quot;)

local server = assert(socket.bind(&quot;*&quot;, 8080))
local ip, port = server:getsockname()
print(&quot;Por favor, con&eacute;ctate a localhost en el puerto &quot; .. port)

while true do
    local client = server:accept()
    client:settimeout(10)
    
    local request, err = client:receive()
    
    if not err then
        print(&quot;Solicitud recibida: &quot; .. request)
        local method, path = request:match(&quot;^(%w+)%s(/%S*)%sHTTP&quot;)
        
        if method == &quot;GET&quot; then
            local response = &quot;HTTP/1.1 200 OK\r\nContent-Type: text/plain\r\n\r\nSolicitaste: &quot; .. path
            client:send(response)
        else
            local response = &quot;HTTP/1.1 405 Method Not Allowed\r\nContent-Type: text/plain\r\n\r\nM&eacute;todo no permitido&quot;
            client:send(response)
        end
    end
    
    client:close()
end</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><em><em>request:match(&quot;^(%w+)%s(/%S</em>)%sHTTP&quot;)</em>*: Analiza el método HTTP y la ruta de la solicitud.</li>
<li><strong>method == &quot;GET&quot;</strong>: Verifica si el método de la solicitud es GET y responde en consecuencia.</li>
</ul>
</div><h1>Servir Contenido Dinámico</h1>
<div class='content'><p>Para servir contenido dinámico, podemos usar las capacidades de manipulación de cadenas de Lua para generar HTML u otros tipos de contenido sobre la marcha.</p>
</div><h2>Ejemplo de Código: Contenido Dinámico</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgc29ja2V0ID0gcmVxdWlyZSgic29ja2V0IikKCmxvY2FsIHNlcnZlciA9IGFzc2VydChzb2NrZXQuYmluZCgiKiIsIDgwODApKQpsb2NhbCBpcCwgcG9ydCA9IHNlcnZlcjpnZXRzb2NrbmFtZSgpCnByaW50KCJQb3IgZmF2b3IsIGNvbsOpY3RhdGUgYSBsb2NhbGhvc3QgZW4gZWwgcHVlcnRvICIgLi4gcG9ydCkKCndoaWxlIHRydWUgZG8KICAgIGxvY2FsIGNsaWVudCA9IHNlcnZlcjphY2NlcHQoKQogICAgY2xpZW50OnNldHRpbWVvdXQoMTApCiAgICAKICAgIGxvY2FsIHJlcXVlc3QsIGVyciA9IGNsaWVudDpyZWNlaXZlKCkKICAgIAogICAgaWYgbm90IGVyciB0aGVuCiAgICAgICAgcHJpbnQoIlNvbGljaXR1ZCByZWNpYmlkYTogIiAuLiByZXF1ZXN0KQogICAgICAgIGxvY2FsIG1ldGhvZCwgcGF0aCA9IHJlcXVlc3Q6bWF0Y2goIl4oJXcrKSVzKC8lUyopJXNIVFRQIikKICAgICAgICAKICAgICAgICBpZiBtZXRob2QgPT0gIkdFVCIgdGhlbgogICAgICAgICAgICBsb2NhbCBjb250ZW50ID0gIjxodG1sPjxib2R5PjxoMT7CoUhvbGEsIEx1YSE8L2gxPjxwPlNvbGljaXRhc3RlOiAiIC4uIHBhdGggLi4gIjwvcD48L2JvZHk+PC9odG1sPiIKICAgICAgICAgICAgbG9jYWwgcmVzcG9uc2UgPSAiSFRUUC8xLjEgMjAwIE9LXHJcbkNvbnRlbnQtVHlwZTogdGV4dC9odG1sXHJcblxyXG4iIC4uIGNvbnRlbnQKICAgICAgICAgICAgY2xpZW50OnNlbmQocmVzcG9uc2UpCiAgICAgICAgZWxzZQogICAgICAgICAgICBsb2NhbCByZXNwb25zZSA9ICJIVFRQLzEuMSA0MDUgTWV0aG9kIE5vdCBBbGxvd2VkXHJcbkNvbnRlbnQtVHlwZTogdGV4dC9wbGFpblxyXG5cclxuTcOpdG9kbyBubyBwZXJtaXRpZG8iCiAgICAgICAgICAgIGNsaWVudDpzZW5kKHJlc3BvbnNlKQogICAgICAgIGVuZAogICAgZW5kCiAgICAKICAgIGNsaWVudDpjbG9zZSgpCmVuZA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local socket = require(&quot;socket&quot;)

local server = assert(socket.bind(&quot;*&quot;, 8080))
local ip, port = server:getsockname()
print(&quot;Por favor, con&eacute;ctate a localhost en el puerto &quot; .. port)

while true do
    local client = server:accept()
    client:settimeout(10)
    
    local request, err = client:receive()
    
    if not err then
        print(&quot;Solicitud recibida: &quot; .. request)
        local method, path = request:match(&quot;^(%w+)%s(/%S*)%sHTTP&quot;)
        
        if method == &quot;GET&quot; then
            local content = &quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;&iexcl;Hola, Lua!&lt;/h1&gt;&lt;p&gt;Solicitaste: &quot; .. path .. &quot;&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;&quot;
            local response = &quot;HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n&quot; .. content
            client:send(response)
        else
            local response = &quot;HTTP/1.1 405 Method Not Allowed\r\nContent-Type: text/plain\r\n\r\nM&eacute;todo no permitido&quot;
            client:send(response)
        end
    end
    
    client:close()
end</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>content</strong>: Genera una cadena HTML dinámicamente basada en la ruta solicitada.</li>
<li><strong>Content-Type: text/html</strong>: Establece el tipo de contenido a HTML en el encabezado de la respuesta HTTP.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>En este tema, cubrimos los conceptos básicos de la creación de un servidor web en Lua usando la biblioteca LuaSocket. Comenzamos con un servidor web simple que responde con un mensaje estático, luego pasamos a manejar diferentes métodos de solicitud HTTP y finalmente servimos contenido dinámico. Con estos fundamentos, ahora puedes expandir tu servidor web para manejar escenarios más complejos y servir varios tipos de contenido.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='building-a-simple-game'>&#x25C4;Construcción de un Juego Simple</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creando un Servidor Web en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='developing-a-gui-application'>Desarrollo de una Aplicación GUI &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
