<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manejo de Errores en Lua</title>

    <link rel="alternate" href="https://campusempresa.com/mod/lua/error-handling" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/lua/error-handling" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/lua/error-handling" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/lua/error-handling" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/lua/error-handling" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='modules-and-packages'>&#x25C4;Módulos y Paquetes</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Manejo de Errores en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-oop'>Introducción a la POO &#x25BA;</a>
			</div>
</div>
<div class='content'><p>El manejo de errores es un aspecto crucial de la programación que asegura que tu código pueda manejar situaciones inesperadas de manera elegante. En Lua, el manejo de errores se gestiona utilizando una combinación de funciones y estructuras de control. Esta sección te guiará desde los conceptos básicos hasta técnicas avanzadas en el manejo de errores.</p>
</div><h1>Manejo Básico de Errores</h1>
<div class='content'></div><h2>La Función `error`</h2>
<div class='content'><ul>
<li>La función <code>error</code> se utiliza para generar un error en Lua.</li>
<li>Detiene la ejecución del programa y muestra un mensaje de error.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICBpZiBiID09IDAgdGhlbgogICAgICAgIGVycm9yKCLCoURpdmlzacOzbiBwb3IgY2VybyEiKQogICAgZWxzZQogICAgICAgIHJldHVybiBhIC8gYgogICAgZW5kCmVuZAoKcHJpbnQoZGl2aWRlKDEwLCAyKSkgIC0tIFNhbGlkYTogNQpwcmludChkaXZpZGUoMTAsIDApKSAgLS0gRXJyb3I6IMKhRGl2aXNpw7NuIHBvciBjZXJvIQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function divide(a, b)
    if b == 0 then
        error(&quot;&iexcl;Divisi&oacute;n por cero!&quot;)
    else
        return a / b
    end
end

print(divide(10, 2))  -- Salida: 5
print(divide(10, 0))  -- Error: &iexcl;Divisi&oacute;n por cero!</pre></div><div class='content'></div><h2>La Función `pcall`</h2>
<div class='content'><ul>
<li>La función <code>pcall</code> (llamada protegida) se utiliza para llamar a una función en modo protegido.</li>
<li>Devuelve un booleano que indica éxito o fracaso, seguido de los valores de retorno de la función o el mensaje de error.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICBpZiBiID09IDAgdGhlbgogICAgICAgIGVycm9yKCLCoURpdmlzacOzbiBwb3IgY2VybyEiKQogICAgZWxzZQogICAgICAgIHJldHVybiBhIC8gYgogICAgZW5kCmVuZAoKbG9jYWwgc3RhdHVzLCByZXN1bHQgPSBwY2FsbChkaXZpZGUsIDEwLCAyKQppZiBzdGF0dXMgdGhlbgogICAgcHJpbnQocmVzdWx0KSAgLS0gU2FsaWRhOiA1CmVsc2UKICAgIHByaW50KCJFcnJvcjogIiAuLiByZXN1bHQpCmVuZAoKc3RhdHVzLCByZXN1bHQgPSBwY2FsbChkaXZpZGUsIDEwLCAwKQppZiBzdGF0dXMgdGhlbgogICAgcHJpbnQocmVzdWx0KQplbHNlCiAgICBwcmludCgiRXJyb3I6ICIgLi4gcmVzdWx0KSAgLS0gU2FsaWRhOiBFcnJvcjogwqFEaXZpc2nDs24gcG9yIGNlcm8hCmVuZA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function divide(a, b)
    if b == 0 then
        error(&quot;&iexcl;Divisi&oacute;n por cero!&quot;)
    else
        return a / b
    end
end

local status, result = pcall(divide, 10, 2)
if status then
    print(result)  -- Salida: 5
else
    print(&quot;Error: &quot; .. result)
end

status, result = pcall(divide, 10, 0)
if status then
    print(result)
else
    print(&quot;Error: &quot; .. result)  -- Salida: Error: &iexcl;Divisi&oacute;n por cero!
end</pre></div><div class='content'></div><h1>Manejo Intermedio de Errores</h1>
<div class='content'></div><h2>La Función `xpcall`</h2>
<div class='content'><ul>
<li>La función <code>xpcall</code> es similar a <code>pcall</code> pero te permite especificar un manejador de errores.</li>
<li>Esto puede ser útil para registrar errores o realizar tareas de limpieza.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICBpZiBiID09IDAgdGhlbgogICAgICAgIGVycm9yKCLCoURpdmlzacOzbiBwb3IgY2VybyEiKQogICAgZWxzZQogICAgICAgIHJldHVybiBhIC8gYgogICAgZW5kCmVuZAoKZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGVycikKICAgIHJldHVybiAiRXJyb3IgY2FwdHVyYWRvOiAiIC4uIGVycgplbmQKCmxvY2FsIHN0YXR1cywgcmVzdWx0ID0geHBjYWxsKGRpdmlkZSwgZXJyb3JIYW5kbGVyLCAxMCwgMCkKaWYgc3RhdHVzIHRoZW4KICAgIHByaW50KHJlc3VsdCkKZWxzZQogICAgcHJpbnQocmVzdWx0KSAgLS0gU2FsaWRhOiBFcnJvciBjYXB0dXJhZG86IMKhRGl2aXNpw7NuIHBvciBjZXJvIQplbmQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function divide(a, b)
    if b == 0 then
        error(&quot;&iexcl;Divisi&oacute;n por cero!&quot;)
    else
        return a / b
    end
end

function errorHandler(err)
    return &quot;Error capturado: &quot; .. err
end

local status, result = xpcall(divide, errorHandler, 10, 0)
if status then
    print(result)
else
    print(result)  -- Salida: Error capturado: &iexcl;Divisi&oacute;n por cero!
end</pre></div><div class='content'></div><h2>Mensajes de Error Personalizados</h2>
<div class='content'><ul>
<li>Puedes crear mensajes de error personalizados para proporcionar más contexto sobre el error.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gcmVhZEZpbGUoZmlsZW5hbWUpCiAgICBsb2NhbCBmaWxlLCBlcnIgPSBpby5vcGVuKGZpbGVuYW1lLCAiciIpCiAgICBpZiBub3QgZmlsZSB0aGVuCiAgICAgICAgZXJyb3IoIk5vIHNlIHB1ZG8gYWJyaXIgZWwgYXJjaGl2bzogIiAuLiBlcnIpCiAgICBlbmQKICAgIC0tIExlZXIgY29udGVuaWRvIGRlbCBhcmNoaXZvCiAgICBsb2NhbCBjb250ZW50ID0gZmlsZTpyZWFkKCIqYSIpCiAgICBmaWxlOmNsb3NlKCkKICAgIHJldHVybiBjb250ZW50CmVuZAoKbG9jYWwgc3RhdHVzLCByZXN1bHQgPSBwY2FsbChyZWFkRmlsZSwgIm5vbmV4aXN0ZW50LnR4dCIpCmlmIHN0YXR1cyB0aGVuCiAgICBwcmludChyZXN1bHQpCmVsc2UKICAgIHByaW50KCJFcnJvcjogIiAuLiByZXN1bHQpICAtLSBTYWxpZGE6IEVycm9yOiBObyBzZSBwdWRvIGFicmlyIGVsIGFyY2hpdm86IG5vbmV4aXN0ZW50LnR4dDogTm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeQplbmQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function readFile(filename)
    local file, err = io.open(filename, &quot;r&quot;)
    if not file then
        error(&quot;No se pudo abrir el archivo: &quot; .. err)
    end
    -- Leer contenido del archivo
    local content = file:read(&quot;*a&quot;)
    file:close()
    return content
end

local status, result = pcall(readFile, &quot;nonexistent.txt&quot;)
if status then
    print(result)
else
    print(&quot;Error: &quot; .. result)  -- Salida: Error: No se pudo abrir el archivo: nonexistent.txt: No such file or directory
end</pre></div><div class='content'></div><h1>Manejo Avanzado de Errores</h1>
<div class='content'></div><h2>Propagación de Errores</h2>
<div class='content'><ul>
<li>Los errores pueden propagarse hacia arriba en la pila de llamadas utilizando <code>error</code>.</li>
<li>Esto permite que funciones de nivel superior manejen errores generados por funciones de nivel inferior.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gcmVhZEZpbGUoZmlsZW5hbWUpCiAgICBsb2NhbCBmaWxlLCBlcnIgPSBpby5vcGVuKGZpbGVuYW1lLCAiciIpCiAgICBpZiBub3QgZmlsZSB0aGVuCiAgICAgICAgZXJyb3IoIk5vIHNlIHB1ZG8gYWJyaXIgZWwgYXJjaGl2bzogIiAuLiBlcnIpCiAgICBlbmQKICAgIGxvY2FsIGNvbnRlbnQgPSBmaWxlOnJlYWQoIiphIikKICAgIGZpbGU6Y2xvc2UoKQogICAgcmV0dXJuIGNvbnRlbnQKZW5kCgpmdW5jdGlvbiBwcm9jZXNzRmlsZShmaWxlbmFtZSkKICAgIGxvY2FsIGNvbnRlbnQgPSByZWFkRmlsZShmaWxlbmFtZSkKICAgIC0tIFByb2Nlc2FyIGNvbnRlbmlkbyBkZWwgYXJjaGl2bwogICAgcmV0dXJuIGNvbnRlbnQKZW5kCgpsb2NhbCBzdGF0dXMsIHJlc3VsdCA9IHBjYWxsKHByb2Nlc3NGaWxlLCAibm9uZXhpc3RlbnQudHh0IikKaWYgc3RhdHVzIHRoZW4KICAgIHByaW50KHJlc3VsdCkKZWxzZQogICAgcHJpbnQoIkVycm9yOiAiIC4uIHJlc3VsdCkgIC0tIFNhbGlkYTogRXJyb3I6IE5vIHNlIHB1ZG8gYWJyaXIgZWwgYXJjaGl2bzogbm9uZXhpc3RlbnQudHh0OiBObyBzdWNoIGZpbGUgb3IgZGlyZWN0b3J5CmVuZA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function readFile(filename)
    local file, err = io.open(filename, &quot;r&quot;)
    if not file then
        error(&quot;No se pudo abrir el archivo: &quot; .. err)
    end
    local content = file:read(&quot;*a&quot;)
    file:close()
    return content
end

function processFile(filename)
    local content = readFile(filename)
    -- Procesar contenido del archivo
    return content
end

local status, result = pcall(processFile, &quot;nonexistent.txt&quot;)
if status then
    print(result)
else
    print(&quot;Error: &quot; .. result)  -- Salida: Error: No se pudo abrir el archivo: nonexistent.txt: No such file or directory
end</pre></div><div class='content'></div><h2>Uso de Metatables para el Manejo de Errores</h2>
<div class='content'><ul>
<li>Las metatables pueden usarse para definir comportamientos personalizados para errores.</li>
<li>Esta es una técnica avanzada que permite un manejo de errores más flexible.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgRXJyb3JIYW5kbGVyID0ge30KRXJyb3JIYW5kbGVyLl9faW5kZXggPSBFcnJvckhhbmRsZXIKCmZ1bmN0aW9uIEVycm9ySGFuZGxlcjpuZXcoKQogICAgbG9jYWwgc2VsZiA9IHNldG1ldGF0YWJsZSh7fSwgRXJyb3JIYW5kbGVyKQogICAgcmV0dXJuIHNlbGYKZW5kCgpmdW5jdGlvbiBFcnJvckhhbmRsZXI6aGFuZGxlRXJyb3IoZXJyKQogICAgcHJpbnQoIk1hbmVqYWRvciBkZSBFcnJvcmVzIFBlcnNvbmFsaXphZG86ICIgLi4gZXJyKQplbmQKCmxvY2FsIGhhbmRsZXIgPSBFcnJvckhhbmRsZXI6bmV3KCkKCmZ1bmN0aW9uIGRpdmlkZShhLCBiKQogICAgaWYgYiA9PSAwIHRoZW4KICAgICAgICBlcnJvcigiwqFEaXZpc2nDs24gcG9yIGNlcm8hIikKICAgIGVsc2UKICAgICAgICByZXR1cm4gYSAvIGIKICAgIGVuZAplbmQKCmxvY2FsIHN0YXR1cywgcmVzdWx0ID0geHBjYWxsKGRpdmlkZSwgZnVuY3Rpb24oZXJyKSBoYW5kbGVyOmhhbmRsZUVycm9yKGVycikgZW5kLCAxMCwgMCkKaWYgc3RhdHVzIHRoZW4KICAgIHByaW50KHJlc3VsdCkKZWxzZQogICAgcHJpbnQoIk1hbmVqYWRvIHBvciBlbCBtYW5lamFkb3IgZGUgZXJyb3JlcyBwZXJzb25hbGl6YWRvIikKZW5k"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local ErrorHandler = {}
ErrorHandler.__index = ErrorHandler

function ErrorHandler:new()
    local self = setmetatable({}, ErrorHandler)
    return self
end

function ErrorHandler:handleError(err)
    print(&quot;Manejador de Errores Personalizado: &quot; .. err)
end

local handler = ErrorHandler:new()

function divide(a, b)
    if b == 0 then
        error(&quot;&iexcl;Divisi&oacute;n por cero!&quot;)
    else
        return a / b
    end
end

local status, result = xpcall(divide, function(err) handler:handleError(err) end, 10, 0)
if status then
    print(result)
else
    print(&quot;Manejado por el manejador de errores personalizado&quot;)
end</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>El manejo de errores en Lua abarca desde mensajes de error simples hasta técnicas avanzadas que involucran manejadores de errores personalizados y metatables. Entender estos conceptos es esencial para escribir código robusto y mantenible. Al dominar el manejo de errores, puedes asegurar que tus programas en Lua manejen situaciones inesperadas de manera elegante y proporcionen retroalimentación significativa a usuarios o desarrolladores.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='modules-and-packages'>&#x25C4;Módulos y Paquetes</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Manejo de Errores en Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-oop'>Introducción a la POO &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
