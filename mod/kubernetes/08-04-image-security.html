<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seguridad de Imágenes</title>

    <link rel="alternate" href="https://campusempresa.com/mod/kubernetes/08-04-image-security" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/kubernetes/08-04-image-security" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/kubernetes/08-04-image-security" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/kubernetes/08-04-image-security" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/kubernetes/08-04-image-security" class="px-2">CA</a>
<br>
			<cite>Construyendo la sociedad de hoy y del mañana</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Contenido del curso</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competencias técnicas</a>
				<a href="/all/conocimientos">Conocimientos</a>
				<a href="/all/soft_skills">Competencias sociales</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-03-network-security' title="Seguridad de Red">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Seguridad de Imágenes</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-01-horizontal-pod-autoscaling' title="Autoescalado Horizontal de Pods">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>La seguridad de las imágenes de contenedores es un aspecto crucial en Kubernetes, ya que las imágenes son la base de las aplicaciones que se ejecutan en los clústeres. Asegurar que las imágenes sean seguras y libres de vulnerabilidades es esencial para mantener la integridad y la seguridad de todo el entorno de Kubernetes.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'><ol>
<li><strong>Imágenes de Contenedores</strong>: Son paquetes que contienen todo lo necesario para ejecutar una aplicación, incluyendo el código, las bibliotecas y las dependencias.</li>
<li><strong>Registro de Imágenes</strong>: Un repositorio donde se almacenan y gestionan las imágenes de contenedores.</li>
<li><strong>Escaneo de Vulnerabilidades</strong>: Proceso de analizar las imágenes en busca de vulnerabilidades conocidas.</li>
<li><strong>Firmas de Imágenes</strong>: Método para verificar la autenticidad e integridad de una imagen.</li>
<li><strong>Políticas de Seguridad de Imágenes</strong>: Reglas y directrices para asegurar que solo se utilicen imágenes seguras y aprobadas.</li>
</ol>
</div><h1><p>Prácticas Recomendadas para la Seguridad de Imágenes</p>
</h1>
<div class='content'></div><h2><ol>
<li>Usar Imágenes Oficiales y de Confianza</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Descripción</strong>: Utiliza imágenes oficiales de fuentes confiables como Docker Hub, Red Hat, o Google Container Registry.</li>
<li><strong>Ejemplo</strong>:
<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: myapp
spec:
  containers:
  - name: myapp-container
    image: nginx:latest
</code></pre>
</li>
</ul>
</div><h2><ol start="2">
<li>Escaneo de Vulnerabilidades</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Descripción</strong>: Escanea regularmente las imágenes en busca de vulnerabilidades conocidas utilizando herramientas como Clair, Trivy o Anchore.</li>
<li><strong>Ejemplo</strong>:
<pre><code class="language-bash">trivy image nginx:latest
</code></pre>
</li>
</ul>
</div><h2><ol start="3">
<li>Firmar y Verificar Imágenes</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Descripción</strong>: Firma las imágenes para asegurar su integridad y autenticidad. Utiliza herramientas como Notary o Cosign.</li>
<li><strong>Ejemplo</strong>:
<pre><code class="language-bash">cosign sign --key cosign.key docker.io/nginx:latest
cosign verify --key cosign.pub docker.io/nginx:latest
</code></pre>
</li>
</ul>
</div><h2><ol start="4">
<li>Políticas de Seguridad de Imágenes</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Descripción</strong>: Implementa políticas para asegurar que solo se utilicen imágenes aprobadas y seguras. Utiliza herramientas como Open Policy Agent (OPA) o Kyverno.</li>
<li><strong>Ejemplo</strong>:
<pre><code class="language-yaml">apiVersion: kyverno.io/v1
kind: ClusterPolicy
metadata:
  name: require-trusted-repo
spec:
  rules:
  - name: require-trusted-repo
    match:
      resources:
        kinds:
        - Pod
    validate:
      message: &quot;Images must be from a trusted repository&quot;
      pattern:
        spec:
          containers:
          - image: &quot;trusted-repo/*&quot;
</code></pre>
</li>
</ul>
</div><h2><ol start="5">
<li>Minimizar el Tamaño de las Imágenes</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Descripción</strong>: Utiliza imágenes base mínimas y solo incluye las dependencias necesarias para reducir la superficie de ataque.</li>
<li><strong>Ejemplo</strong>:
<pre><code class="language-Dockerfile">FROM alpine:3.12
RUN apk add --no-cache python3
COPY . /app
CMD [&quot;python3&quot;, &quot;/app/main.py&quot;]
</code></pre>
</li>
</ul>
</div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Escaneo de Vulnerabilidades</p>
</h2>
<div class='content'><ol>
<li><strong>Objetivo</strong>: Escanear una imagen de contenedor en busca de vulnerabilidades.</li>
<li><strong>Instrucciones</strong>:
<ul>
<li>Instala Trivy en tu máquina local.</li>
<li>Escanea la imagen <code>nginx:latest</code> utilizando Trivy.</li>
</ul>
</li>
<li><strong>Código</strong>:
<pre><code class="language-bash">trivy image nginx:latest
</code></pre>
</li>
<li><strong>Solución</strong>:
<ul>
<li>El comando anterior escaneará la imagen <code>nginx:latest</code> y mostrará un reporte de vulnerabilidades.</li>
</ul>
</li>
</ol>
</div><h2><p>Ejercicio 2: Implementación de Políticas de Seguridad</p>
</h2>
<div class='content'><ol>
<li><strong>Objetivo</strong>: Crear una política de seguridad que solo permita imágenes de un repositorio confiable.</li>
<li><strong>Instrucciones</strong>:
<ul>
<li>Instala Kyverno en tu clúster de Kubernetes.</li>
<li>Aplica la política de seguridad proporcionada en el ejemplo anterior.</li>
</ul>
</li>
<li><strong>Código</strong>:
<pre><code class="language-yaml">apiVersion: kyverno.io/v1
kind: ClusterPolicy
metadata:
  name: require-trusted-repo
spec:
  rules:
  - name: require-trusted-repo
    match:
      resources:
        kinds:
        - Pod
    validate:
      message: &quot;Images must be from a trusted repository&quot;
      pattern:
        spec:
          containers:
          - image: &quot;trusted-repo/*&quot;
</code></pre>
</li>
<li><strong>Solución</strong>:
<ul>
<li>Aplica la política utilizando <code>kubectl apply -f policy.yaml</code>.</li>
<li>Intenta desplegar un Pod con una imagen no confiable y verifica que la política lo bloquea.</li>
</ul>
</li>
</ol>
</div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>La seguridad de las imágenes es un componente esencial en la administración de Kubernetes. Al seguir las prácticas recomendadas, como usar imágenes de confianza, escanear vulnerabilidades, firmar imágenes y aplicar políticas de seguridad, puedes asegurar que tus aplicaciones se ejecuten en un entorno seguro y protegido. En el próximo módulo, exploraremos el escalado y rendimiento en Kubernetes, donde aprenderás a optimizar y escalar tus aplicaciones de manera eficiente.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-03-network-security' title="Seguridad de Red">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-01-horizontal-pod-autoscaling' title="Autoescalado Horizontal de Pods">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
