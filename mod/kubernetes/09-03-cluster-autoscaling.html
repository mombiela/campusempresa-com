<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Autoescalado de Clúster</title>

    <link rel="alternate" href="https://campusempresa.com/mod/kubernetes/09-03-cluster-autoscaling" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/kubernetes/09-03-cluster-autoscaling" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/kubernetes/09-03-cluster-autoscaling" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>var DEVELOP = window.location.href.indexOf("localhost")!=-1 && true;</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<p class="mb-0 p-0">	<a href="https://enterprisecampus.net/mod/kubernetes/09-03-cluster-autoscaling" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/kubernetes/09-03-cluster-autoscaling" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>Todo el conocimiento a tu alcance</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>
		<!-- <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Contenido del curso
	</a>

			</div>
		</div>
	</div>
</div>
 -->
 
<div class="top-bar container-fluid">
	<div class="container-xxl">
		<nav class="navbar navbar-expand-md p-0">
			<div class="container-fluid">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				
				<div class="collapse navbar-collapse" id="navbarNav">
					<div class="navbar-nav me-auto">
							<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Contenido del curso
	</a>

					</div>
				</div>			
							</div>
		</nav>
	</div>
</div>				<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-02-vertical-pod-autoscaling' title="Autoescalado Vertical de Pods">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<h2 style="text-decoration:underline">Autoescalado de Clúster</h2>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-04-performance-tuning' title="Ajuste de Rendimiento">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>El autoescalado de clúster en Kubernetes es una funcionalidad avanzada que permite ajustar automáticamente el tamaño del clúster en función de la demanda de recursos. Esta capacidad es crucial para mantener la eficiencia y la disponibilidad de las aplicaciones, especialmente en entornos dinámicos y de alta carga.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ol>
<li><strong>Cluster Autoscaler</strong>: Es el componente principal que se encarga de ajustar el tamaño del clúster. Añade o elimina nodos en función de las necesidades de recursos.</li>
<li><strong>Node Pools</strong>: Conjuntos de nodos que pueden ser escalados de manera independiente.</li>
<li><strong>Escalado Horizontal</strong>: Añadir o eliminar nodos en el clúster.</li>
<li><strong>Escalado Vertical</strong>: Ajustar los recursos (CPU, memoria) de los nodos existentes (no cubierto por el Cluster Autoscaler).</li>
</ol>
</div><h1>¿Cómo Funciona el Autoescalado de Clúster?</h1>
<div class='content'><p>El Cluster Autoscaler monitorea continuamente los recursos del clúster y toma decisiones basadas en las siguientes condiciones:</p>
<ul>
<li><strong>Añadir Nodos</strong>: Si hay pods pendientes que no pueden ser programados debido a la falta de recursos, el Cluster Autoscaler añadirá nodos.</li>
<li><strong>Eliminar Nodos</strong>: Si un nodo está infrautilizado y sus pods pueden ser reprogramados en otros nodos, el Cluster Autoscaler eliminará ese nodo.</li>
</ul>
</div><h1>Configuración del Cluster Autoscaler</h1>
<div class='content'></div><h2>Prerrequisitos</h2>
<div class='content'><ul>
<li>Un clúster de Kubernetes en funcionamiento.</li>
<li>Permisos adecuados para modificar el clúster y sus nodos.</li>
<li>Herramientas de línea de comandos como <code>kubectl</code> y acceso a la consola de administración del proveedor de nube (si se usa un clúster gestionado).</li>
</ul>
</div><h2>Paso a Paso</h2>
<div class='content'><ol>
<li>
<p><strong>Instalación del Cluster Autoscaler</strong>:</p>
<ul>
<li>En clústeres gestionados (como GKE, EKS, AKS), el Cluster Autoscaler suele estar disponible como una opción de configuración.</li>
<li>Para clústeres autogestionados, se puede instalar el Cluster Autoscaler mediante un manifiesto de Kubernetes.</li>
</ul>
</li>
<li>
<p><strong>Configuración del Cluster Autoscaler</strong>:</p>
<ul>
<li>Definir los límites de escalado (mínimo y máximo número de nodos).</li>
<li>Configurar las políticas de escalado.</li>
</ul>
</li>
</ol>
<h4>Ejemplo de Manifiesto para Cluster Autoscaler</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBwcy92MQpraW5kOiBEZXBsb3ltZW50Cm1ldGFkYXRhOgogIG5hbWU6IGNsdXN0ZXItYXV0b3NjYWxlcgogIG5hbWVzcGFjZToga3ViZS1zeXN0ZW0Kc3BlYzoKICByZXBsaWNhczogMQogIHNlbGVjdG9yOgogICAgbWF0Y2hMYWJlbHM6CiAgICAgIGFwcDogY2x1c3Rlci1hdXRvc2NhbGVyCiAgdGVtcGxhdGU6CiAgICBtZXRhZGF0YToKICAgICAgbGFiZWxzOgogICAgICAgIGFwcDogY2x1c3Rlci1hdXRvc2NhbGVyCiAgICBzcGVjOgogICAgICBjb250YWluZXJzOgogICAgICAtIG5hbWU6IGNsdXN0ZXItYXV0b3NjYWxlcgogICAgICAgIGltYWdlOiBrOHMuZ2NyLmlvL2NsdXN0ZXItYXV0b3NjYWxlcjp2MS4yMC4wCiAgICAgICAgY29tbWFuZDoKICAgICAgICAtIC4vY2x1c3Rlci1hdXRvc2NhbGVyCiAgICAgICAgLSAtLXY9NAogICAgICAgIC0gLS1zdGRlcnJ0aHJlc2hvbGQ9aW5mbwogICAgICAgIC0gLS1jbG91ZC1wcm92aWRlcj1nY2UKICAgICAgICAtIC0tbm9kZXM9MToxMDpteS1ub2RlLXBvb2wKICAgICAgICByZXNvdXJjZXM6CiAgICAgICAgICBsaW1pdHM6CiAgICAgICAgICAgIGNwdTogMTAwbQogICAgICAgICAgICBtZW1vcnk6IDMwME1pCiAgICAgICAgICByZXF1ZXN0czoKICAgICAgICAgICAgY3B1OiAxMDBtCiAgICAgICAgICAgIG1lbW9yeTogMzAwTWkKICAgICAgICBlbnY6CiAgICAgICAgLSBuYW1lOiBHT09HTEVfQVBQTElDQVRJT05fQ1JFREVOVElBTFMKICAgICAgICAgIHZhbHVlOiAvZXRjL2djcC9zZXJ2aWNlLWFjY291bnQuanNvbgogICAgICAgIHZvbHVtZU1vdW50czoKICAgICAgICAtIG5hbWU6IHNzbC1jZXJ0cwogICAgICAgICAgbW91bnRQYXRoOiAvZXRjL3NzbC9jZXJ0cy9jYS1jZXJ0aWZpY2F0ZXMuY3J0CiAgICAgICAgICByZWFkT25seTogdHJ1ZQogICAgICAgIC0gbmFtZTogZ2NwLXNlcnZpY2UtYWNjb3VudAogICAgICAgICAgbW91bnRQYXRoOiAvZXRjL2djcAogICAgICAgICAgcmVhZE9ubHk6IHRydWUKICAgICAgdm9sdW1lczoKICAgICAgLSBuYW1lOiBzc2wtY2VydHMKICAgICAgICBob3N0UGF0aDoKICAgICAgICAgIHBhdGg6IC9ldGMvc3NsL2NlcnRzL2NhLWNlcnRpZmljYXRlcy5jcnQKICAgICAgLSBuYW1lOiBnY3Atc2VydmljZS1hY2NvdW50CiAgICAgICAgc2VjcmV0OgogICAgICAgICAgc2VjcmV0TmFtZTogbXktZ2NwLXNlcnZpY2UtYWNjb3VudA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apps/v1
kind: Deployment
metadata:
  name: cluster-autoscaler
  namespace: kube-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app: cluster-autoscaler
  template:
    metadata:
      labels:
        app: cluster-autoscaler
    spec:
      containers:
      - name: cluster-autoscaler
        image: k8s.gcr.io/cluster-autoscaler:v1.20.0
        command:
        - ./cluster-autoscaler
        - --v=4
        - --stderrthreshold=info
        - --cloud-provider=gce
        - --nodes=1:10:my-node-pool
        resources:
          limits:
            cpu: 100m
            memory: 300Mi
          requests:
            cpu: 100m
            memory: 300Mi
        env:
        - name: GOOGLE_APPLICATION_CREDENTIALS
          value: /etc/gcp/service-account.json
        volumeMounts:
        - name: ssl-certs
          mountPath: /etc/ssl/certs/ca-certificates.crt
          readOnly: true
        - name: gcp-service-account
          mountPath: /etc/gcp
          readOnly: true
      volumes:
      - name: ssl-certs
        hostPath:
          path: /etc/ssl/certs/ca-certificates.crt
      - name: gcp-service-account
        secret:
          secretName: my-gcp-service-account</pre></div><div class='content'></div><h2>Ejercicio Práctico</h2>
<div class='content'><ol>
<li>
<p><strong>Configurar un Cluster Autoscaler en un clúster gestionado</strong>:</p>
<ul>
<li>Si estás usando GKE, EKS o AKS, habilita el Cluster Autoscaler desde la consola de administración del proveedor de nube.</li>
<li>Define los límites de escalado (mínimo y máximo número de nodos).</li>
</ul>
</li>
<li>
<p><strong>Verificar el Funcionamiento</strong>:</p>
<ul>
<li>Despliega una aplicación que consuma muchos recursos para forzar el escalado.</li>
<li>Observa cómo el Cluster Autoscaler añade nodos para satisfacer la demanda.</li>
<li>Reduce la carga y observa cómo el Cluster Autoscaler elimina nodos infrautilizados.</li>
</ul>
</li>
</ol>
</div><h2>Solución del Ejercicio</h2>
<div class='content'><ol>
<li>
<p><strong>Habilitar el Cluster Autoscaler en GKE</strong>:</p>
<pre><code class="language-bash">gcloud container clusters update my-cluster <br>     --enable-autoscaling <br>     --min-nodes=1 <br>     --max-nodes=10 <br>     --zone=us-central1-a
</code></pre>
</li>
<li>
<p><strong>Desplegar una Aplicación de Alta Carga</strong>:</p>
<pre><code class="language-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: high-load-app
spec:
  replicas: 10
  selector:
    matchLabels:
      app: high-load-app
  template:
    metadata:
      labels:
        app: high-load-app
    spec:
      containers:
      - name: high-load-app
        image: busybox
        command: [&quot;sh&quot;, &quot;-c&quot;, &quot;while true; do echo 'High Load'; sleep 10; done&quot;]
        resources:
          requests:
            cpu: &quot;500m&quot;
            memory: &quot;512Mi&quot;
</code></pre>
</li>
<li>
<p><strong>Verificar el Escalado</strong>:</p>
<ul>
<li>Usa <code>kubectl get nodes</code> para ver los nodos añadidos.</li>
<li>Usa <code>kubectl get pods</code> para ver los pods distribuidos en los nuevos nodos.</li>
</ul>
</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>El autoescalado de clúster es una herramienta poderosa para gestionar la capacidad y la eficiencia de los recursos en Kubernetes. Permite a los administradores de clústeres mantener un equilibrio entre la disponibilidad de recursos y el costo, ajustando automáticamente el tamaño del clúster según la demanda. Con una configuración adecuada, el Cluster Autoscaler puede mejorar significativamente la resiliencia y la eficiencia operativa de las aplicaciones desplegadas en Kubernetes.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-02-vertical-pod-autoscaling' title="Autoescalado Vertical de Pods">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-04-performance-tuning' title="Ajuste de Rendimiento">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
				<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
	     crossorigin="anonymous"></script>
	<!-- enterprise_campus -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-0611338592562725"
	     data-ad-slot="6914733106"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
	     (adsbygoogle = window.adsbygoogle || []).push({});
	</script>
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>Curso de Kubernetes</h1>
<h2>Módulo 1: Introducción a Kubernetes</h2>
<ul>
<li><a href="01-01-what-is-kubernetes">¿Qué es Kubernetes?</a></li>
<li><a href="01-02-kubernetes-architecture">Arquitectura de Kubernetes</a></li>
<li><a href="01-03-key-concepts-terminology">Conceptos y Terminología Clave</a></li>
<li><a href="01-04-setting-up-cluster">Configuración de un Clúster de Kubernetes</a></li>
<li><a href="01-05-kubernetes-cli">CLI de Kubernetes (kubectl)</a></li>
</ul>
<h2>Módulo 2: Componentes Principales de Kubernetes</h2>
<ul>
<li><a href="02-01-pods">Pods</a></li>
<li><a href="02-02-replicasets">ReplicaSets</a></li>
<li><a href="02-03-deployments">Deployments</a></li>
<li><a href="02-04-services">Servicios</a></li>
<li><a href="02-05-namespaces">Namespaces</a></li>
</ul>
<h2>Módulo 3: Gestión de Configuración y Secretos</h2>
<ul>
<li><a href="03-01-configmaps">ConfigMaps</a></li>
<li><a href="03-02-secrets">Secrets</a></li>
<li><a href="03-03-environment-variables">Variables de Entorno</a></li>
<li><a href="03-04-resource-quotas-limits">Cuotas y Límites de Recursos</a></li>
</ul>
<h2>Módulo 4: Redes en Kubernetes</h2>
<ul>
<li><a href="04-01-cluster-networking">Redes de Clúster</a></li>
<li><a href="04-02-service-types">Tipos de Servicios</a></li>
<li><a href="04-03-ingress-controllers">Controladores de Ingress</a></li>
<li><a href="04-04-network-policies">Políticas de Red</a></li>
</ul>
<h2>Módulo 5: Almacenamiento en Kubernetes</h2>
<ul>
<li><a href="05-01-volumes">Volúmenes</a></li>
<li><a href="05-02-persistent-volumes">Volúmenes Persistentes</a></li>
<li><a href="05-03-persistent-volume-claims">Reclamaciones de Volúmenes Persistentes</a></li>
<li><a href="05-04-storage-classes">Clases de Almacenamiento</a></li>
</ul>
<h2>Módulo 6: Conceptos Avanzados de Kubernetes</h2>
<ul>
<li><a href="06-01-statefulsets">StatefulSets</a></li>
<li><a href="06-02-daemonsets">DaemonSets</a></li>
<li><a href="06-03-jobs-cronjobs">Trabajos y CronJobs</a></li>
<li><a href="06-04-crds">Definiciones de Recursos Personalizados (CRDs)</a></li>
</ul>
<h2>Módulo 7: Monitoreo y Registro</h2>
<ul>
<li><a href="07-01-monitoring-prometheus">Monitoreo con Prometheus</a></li>
<li><a href="07-02-logging-efk">Registro con Elasticsearch, Fluentd y Kibana (EFK)</a></li>
<li><a href="07-03-health-checks-probes">Verificaciones de Salud y Sondas</a></li>
<li><a href="07-04-metrics-server">Servidor de Métricas</a></li>
</ul>
<h2>Módulo 8: Seguridad en Kubernetes</h2>
<ul>
<li><a href="08-01-rbac">Control de Acceso Basado en Roles (RBAC)</a></li>
<li><a href="08-02-pod-security-policies">Políticas de Seguridad de Pods</a></li>
<li><a href="08-03-network-security">Seguridad de Red</a></li>
<li><a href="08-04-image-security">Seguridad de Imágenes</a></li>
</ul>
<h2>Módulo 9: Escalado y Rendimiento</h2>
<ul>
<li><a href="09-01-horizontal-pod-autoscaling">Autoescalado Horizontal de Pods</a></li>
<li><a href="09-02-vertical-pod-autoscaling">Autoescalado Vertical de Pods</a></li>
<li><a href="09-03-cluster-autoscaling">Autoescalado de Clúster</a></li>
<li><a href="09-04-performance-tuning">Ajuste de Rendimiento</a></li>
</ul>
<h2>Módulo 10: Ecosistema y Herramientas de Kubernetes</h2>
<ul>
<li><a href="10-01-helm">Helm</a></li>
<li><a href="10-02-kustomize">Kustomize</a></li>
<li><a href="10-03-kubeadm">Kubeadm</a></li>
<li><a href="10-04-minikube">Minikube</a></li>
</ul>
<h2>Módulo 11: Estudios de Caso y Aplicaciones del Mundo Real</h2>
<ul>
<li><a href="11-01-deploying-web-application">Despliegue de una Aplicación Web</a></li>
<li><a href="11-02-cicd-kubernetes">CI/CD con Kubernetes</a></li>
<li><a href="11-03-running-stateful-applications">Ejecución de Aplicaciones con Estado</a></li>
<li><a href="11-04-multi-cluster-management">Gestión Multi-Clúster</a></li>
</ul>
<h2>Módulo 12: Preparación para la Certificación de Kubernetes</h2>
<ul>
<li><a href="12-01-cka">Administrador Certificado de Kubernetes (CKA)</a></li>
<li><a href="12-02-ckad">Desarrollador de Aplicaciones Certificado de Kubernetes (CKAD)</a></li>
<li><a href="12-03-cks">Especialista en Seguridad Certificado de Kubernetes (CKS)</a></li>
<li><a href="12-04-exam-preparation-tips">Consejos para la Preparación del Examen</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>
