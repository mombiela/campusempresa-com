<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deployments</title>

    <link rel="alternate" href="https://campusempresa.com/mod/kubernetes/02-03-deployments" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/kubernetes/02-03-deployments" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/kubernetes/02-03-deployments" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/kubernetes/02-03-deployments" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/kubernetes/02-03-deployments" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-02-replicasets' title="ReplicaSets">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Deployments</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='02-04-services' title="Servicios">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En Kubernetes, un Deployment es un recurso que proporciona una forma declarativa de gestionar aplicaciones. Permite definir el estado deseado de una aplicación y Kubernetes se encarga de realizar las actualizaciones necesarias para alcanzar ese estado. Los Deployments son fundamentales para gestionar el ciclo de vida de las aplicaciones, incluyendo la creación, actualización y escalado de Pods.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Declarativo</strong>: Especificas el estado deseado y Kubernetes se encarga de alcanzarlo.</li>
<li><strong>ReplicaSets</strong>: Los Deployments gestionan ReplicaSets, que a su vez gestionan los Pods.</li>
<li><strong>Actualizaciones</strong>: Permiten realizar actualizaciones controladas y reversibles de las aplicaciones.</li>
<li><strong>Rollback</strong>: Capacidad de revertir a versiones anteriores en caso de fallos.</li>
</ul>
</div><h1>Creación de un Deployment</h1>
<div class='content'></div><h2>Ejemplo de YAML para un Deployment</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBwcy92MQpraW5kOiBEZXBsb3ltZW50Cm1ldGFkYXRhOgogIG5hbWU6IG5naW54LWRlcGxveW1lbnQKc3BlYzoKICByZXBsaWNhczogMwogIHNlbGVjdG9yOgogICAgbWF0Y2hMYWJlbHM6CiAgICAgIGFwcDogbmdpbngKICB0ZW1wbGF0ZToKICAgIG1ldGFkYXRhOgogICAgICBsYWJlbHM6CiAgICAgICAgYXBwOiBuZ2lueAogICAgc3BlYzoKICAgICAgY29udGFpbmVyczoKICAgICAgLSBuYW1lOiBuZ2lueAogICAgICAgIGltYWdlOiBuZ2lueDoxLjE0LjIKICAgICAgICBwb3J0czoKICAgICAgICAtIGNvbnRhaW5lclBvcnQ6IDgw"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80</pre></div><div class='content'></div><h2>Explicación del YAML</h2>
<div class='content'><ul>
<li><strong>apiVersion</strong>: La versión de la API de Kubernetes que se está utilizando.</li>
<li><strong>kind</strong>: Tipo de recurso, en este caso <code>Deployment</code>.</li>
<li><strong>metadata</strong>: Información sobre el Deployment, como el nombre.</li>
<li><strong>spec</strong>: Especificaciones del Deployment.
<ul>
<li><strong>replicas</strong>: Número de réplicas de Pods que se desean.</li>
<li><strong>selector</strong>: Selector de etiquetas para identificar los Pods gestionados por este Deployment.</li>
<li><strong>template</strong>: Plantilla para los Pods.
<ul>
<li><strong>metadata</strong>: Etiquetas para los Pods.</li>
<li><strong>spec</strong>: Especificaciones de los contenedores dentro de los Pods.
<ul>
<li><strong>containers</strong>: Lista de contenedores.
<ul>
<li><strong>name</strong>: Nombre del contenedor.</li>
<li><strong>image</strong>: Imagen del contenedor.</li>
<li><strong>ports</strong>: Puertos expuestos por el contenedor.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><h1>Comandos Básicos con `kubectl`</h1>
<div class='content'></div><h2>Crear un Deployment</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBuZ2lueC1kZXBsb3ltZW50LnlhbWw="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f nginx-deployment.yaml</pre></div><div class='content'></div><h2>Verificar el Deployment</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBnZXQgZGVwbG95bWVudHM="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl get deployments</pre></div><div class='content'></div><h2>Verificar los Pods</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBnZXQgcG9kcw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl get pods</pre></div><div class='content'></div><h2>Actualizar un Deployment</h2>
<div class='content'><p>Para actualizar un Deployment, puedes modificar el archivo YAML y aplicar los cambios:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBwcy92MQpraW5kOiBEZXBsb3ltZW50Cm1ldGFkYXRhOgogIG5hbWU6IG5naW54LWRlcGxveW1lbnQKc3BlYzoKICByZXBsaWNhczogMwogIHNlbGVjdG9yOgogICAgbWF0Y2hMYWJlbHM6CiAgICAgIGFwcDogbmdpbngKICB0ZW1wbGF0ZToKICAgIG1ldGFkYXRhOgogICAgICBsYWJlbHM6CiAgICAgICAgYXBwOiBuZ2lueAogICAgc3BlYzoKICAgICAgY29udGFpbmVyczoKICAgICAgLSBuYW1lOiBuZ2lueAogICAgICAgIGltYWdlOiBuZ2lueDoxLjE2LjAgICMgQWN0dWFsaXphY2nDs24gZGUgbGEgaW1hZ2VuCiAgICAgICAgcG9ydHM6CiAgICAgICAgLSBjb250YWluZXJQb3J0OiA4MA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.16.0  # Actualizaci&oacute;n de la imagen
        ports:
        - containerPort: 80</pre></div><div class='content'><p>Aplicar los cambios:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBuZ2lueC1kZXBsb3ltZW50LnlhbWw="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f nginx-deployment.yaml</pre></div><div class='content'></div><h2>Rollback de un Deployment</h2>
<div class='content'><p>Para revertir a una versión anterior:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCByb2xsb3V0IHVuZG8gZGVwbG95bWVudC9uZ2lueC1kZXBsb3ltZW50"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl rollout undo deployment/nginx-deployment</pre></div><div class='content'></div><h2>Ver el historial de despliegues</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCByb2xsb3V0IGhpc3RvcnkgZGVwbG95bWVudC9uZ2lueC1kZXBsb3ltZW50"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl rollout history deployment/nginx-deployment</pre></div><div class='content'></div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio 1: Crear y Actualizar un Deployment</h2>
<div class='content'><ol>
<li>
<p><strong>Crear un Deployment</strong>:</p>
<ul>
<li>Crea un archivo YAML para un Deployment que use la imagen <code>nginx:1.14.2</code> y tenga 3 réplicas.</li>
<li>Aplica el archivo YAML para crear el Deployment.</li>
</ul>
</li>
<li>
<p><strong>Actualizar el Deployment</strong>:</p>
<ul>
<li>Modifica el archivo YAML para actualizar la imagen a <code>nginx:1.16.0</code>.</li>
<li>Aplica los cambios y verifica que los Pods se actualicen correctamente.</li>
</ul>
</li>
</ol>
</div><h2>Solución</h2>
<div class='content'><ol>
<li>Crear el archivo <code>nginx-deployment.yaml</code>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBwcy92MQpraW5kOiBEZXBsb3ltZW50Cm1ldGFkYXRhOgogIG5hbWU6IG5naW54LWRlcGxveW1lbnQKc3BlYzoKICByZXBsaWNhczogMwogIHNlbGVjdG9yOgogICAgbWF0Y2hMYWJlbHM6CiAgICAgIGFwcDogbmdpbngKICB0ZW1wbGF0ZToKICAgIG1ldGFkYXRhOgogICAgICBsYWJlbHM6CiAgICAgICAgYXBwOiBuZ2lueAogICAgc3BlYzoKICAgICAgY29udGFpbmVyczoKICAgICAgLSBuYW1lOiBuZ2lueAogICAgICAgIGltYWdlOiBuZ2lueDoxLjE0LjIKICAgICAgICBwb3J0czoKICAgICAgICAtIGNvbnRhaW5lclBvcnQ6IDgw"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80</pre></div><div class='content'><p>Aplicar el archivo:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBuZ2lueC1kZXBsb3ltZW50LnlhbWw="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f nginx-deployment.yaml</pre></div><div class='content'><ol start="2">
<li>Modificar el archivo <code>nginx-deployment.yaml</code> para actualizar la imagen:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBwcy92MQpraW5kOiBEZXBsb3ltZW50Cm1ldGFkYXRhOgogIG5hbWU6IG5naW54LWRlcGxveW1lbnQKc3BlYzoKICByZXBsaWNhczogMwogIHNlbGVjdG9yOgogICAgbWF0Y2hMYWJlbHM6CiAgICAgIGFwcDogbmdpbngKICB0ZW1wbGF0ZToKICAgIG1ldGFkYXRhOgogICAgICBsYWJlbHM6CiAgICAgICAgYXBwOiBuZ2lueAogICAgc3BlYzoKICAgICAgY29udGFpbmVyczoKICAgICAgLSBuYW1lOiBuZ2lueAogICAgICAgIGltYWdlOiBuZ2lueDoxLjE2LjAKICAgICAgICBwb3J0czoKICAgICAgICAtIGNvbnRhaW5lclBvcnQ6IDgw"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.16.0
        ports:
        - containerPort: 80</pre></div><div class='content'><p>Aplicar los cambios:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBuZ2lueC1kZXBsb3ltZW50LnlhbWw="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f nginx-deployment.yaml</pre></div><div class='content'><p>Verificar los Pods:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBnZXQgcG9kcw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl get pods</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, hemos aprendido sobre los Deployments en Kubernetes, cómo crearlos, actualizarlos y revertir cambios. Los Deployments son una herramienta poderosa para gestionar el ciclo de vida de las aplicaciones en Kubernetes, proporcionando una forma declarativa de mantener el estado deseado de las aplicaciones. En el siguiente módulo, exploraremos otros componentes esenciales de Kubernetes, como los Servicios y los Namespaces.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-02-replicasets' title="ReplicaSets">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='02-04-services' title="Servicios">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
