<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Definiciones de Recursos Personalizados (CRDs)</title>

    <link rel="alternate" href="https://campusempresa.com/mod/kubernetes/06-04-crds" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/kubernetes/06-04-crds" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/kubernetes/06-04-crds" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/kubernetes/06-04-crds" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/kubernetes/06-04-crds" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-03-jobs-cronjobs' title="Trabajos y CronJobs">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Definiciones de Recursos Personalizados (CRDs)</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-monitoring-prometheus' title="Monitoreo con Prometheus">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>Las Definiciones de Recursos Personalizados (CRDs, por sus siglas en inglés) son una característica poderosa de Kubernetes que permite a los usuarios extender la API de Kubernetes para crear sus propios recursos personalizados. Esto es especialmente útil para desarrollar aplicaciones complejas que requieren tipos de recursos específicos que no están disponibles en la API estándar de Kubernetes.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'></div><h2>¿Qué es un CRD?</h2>
<div class='content'><ul>
<li><strong>Definición</strong>: Un CRD es un recurso de Kubernetes que permite definir nuevos tipos de recursos en el clúster.</li>
<li><strong>Propósito</strong>: Extender la funcionalidad de Kubernetes sin necesidad de modificar el código fuente del servidor de la API de Kubernetes.</li>
</ul>
</div><h2>Componentes de un CRD</h2>
<div class='content'><ol>
<li><strong>Spec</strong>: Define las propiedades del recurso personalizado.</li>
<li><strong>Status</strong>: Proporciona información sobre el estado actual del recurso.</li>
<li><strong>Metadata</strong>: Incluye información como el nombre, etiquetas y anotaciones del recurso.</li>
</ol>
</div><h2>Ventajas de Usar CRDs</h2>
<div class='content'><ul>
<li><strong>Flexibilidad</strong>: Permite a los desarrolladores definir recursos que se ajusten a las necesidades específicas de sus aplicaciones.</li>
<li><strong>Extensibilidad</strong>: Facilita la integración de nuevas funcionalidades en Kubernetes sin modificar su núcleo.</li>
<li><strong>Reusabilidad</strong>: Los CRDs pueden ser compartidos y reutilizados en diferentes clústeres y proyectos.</li>
</ul>
</div><h1>Creación de un CRD</h1>
<div class='content'></div><h2>Paso 1: Definir el CRD</h2>
<div class='content'><p>Primero, se debe crear un archivo YAML que defina el CRD. A continuación se muestra un ejemplo de un CRD para un recurso personalizado llamado <code>MyResource</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBpZXh0ZW5zaW9ucy5rOHMuaW8vdjEKa2luZDogQ3VzdG9tUmVzb3VyY2VEZWZpbml0aW9uCm1ldGFkYXRhOgogIG5hbWU6IG15cmVzb3VyY2VzLmV4YW1wbGUuY29tCnNwZWM6CiAgZ3JvdXA6IGV4YW1wbGUuY29tCiAgdmVyc2lvbnM6CiAgICAtIG5hbWU6IHYxCiAgICAgIHNlcnZlZDogdHJ1ZQogICAgICBzdG9yYWdlOiB0cnVlCiAgICAgIHNjaGVtYToKICAgICAgICBvcGVuQVBJVjNTY2hlbWE6CiAgICAgICAgICB0eXBlOiBvYmplY3QKICAgICAgICAgIHByb3BlcnRpZXM6CiAgICAgICAgICAgIHNwZWM6CiAgICAgICAgICAgICAgdHlwZTogb2JqZWN0CiAgICAgICAgICAgICAgcHJvcGVydGllczoKICAgICAgICAgICAgICAgIGZpZWxkMToKICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgICAgICAgICBmaWVsZDI6CiAgICAgICAgICAgICAgICAgIHR5cGU6IGludGVnZXIKICBzY29wZTogTmFtZXNwYWNlZAogIG5hbWVzOgogICAgcGx1cmFsOiBteXJlc291cmNlcwogICAgc2luZ3VsYXI6IG15cmVzb3VyY2UKICAgIGtpbmQ6IE15UmVzb3VyY2UKICAgIHNob3J0TmFtZXM6CiAgICAtIG1y"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: myresources.example.com
spec:
  group: example.com
  versions:
    - name: v1
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              properties:
                field1:
                  type: string
                field2:
                  type: integer
  scope: Namespaced
  names:
    plural: myresources
    singular: myresource
    kind: MyResource
    shortNames:
    - mr</pre></div><div class='content'></div><h2>Paso 2: Aplicar el CRD</h2>
<div class='content'><p>Una vez definido el CRD, se aplica al clúster utilizando <code>kubectl</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBteXJlc291cmNlLWNyZC55YW1s"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f myresource-crd.yaml</pre></div><div class='content'></div><h2>Paso 3: Crear Instancias del Recurso Personalizado</h2>
<div class='content'><p>Después de aplicar el CRD, se pueden crear instancias del nuevo recurso personalizado. A continuación se muestra un ejemplo de cómo crear una instancia de <code>MyResource</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogZXhhbXBsZS5jb20vdjEKa2luZDogTXlSZXNvdXJjZQptZXRhZGF0YToKICBuYW1lOiBteXJlc291cmNlLXNhbXBsZQpzcGVjOgogIGZpZWxkMTogInZhbHVlMSIKICBmaWVsZDI6IDQy"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: example.com/v1
kind: MyResource
metadata:
  name: myresource-sample
spec:
  field1: &quot;value1&quot;
  field2: 42</pre></div><div class='content'><p>Aplicar la instancia:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBteXJlc291cmNlLWluc3RhbmNlLnlhbWw="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f myresource-instance.yaml</pre></div><div class='content'></div><h1>Gestión de CRDs</h1>
<div class='content'></div><h2>Listar CRDs</h2>
<div class='content'><p>Para listar todos los CRDs en el clúster:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBnZXQgY3Jkcw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl get crds</pre></div><div class='content'></div><h2>Ver Detalles de un CRD</h2>
<div class='content'><p>Para ver los detalles de un CRD específico:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBkZXNjcmliZSBjcmQgbXlyZXNvdXJjZXMuZXhhbXBsZS5jb20="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl describe crd myresources.example.com</pre></div><div class='content'></div><h2>Eliminar un CRD</h2>
<div class='content'><p>Para eliminar un CRD y todas sus instancias:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBkZWxldGUgY3JkIG15cmVzb3VyY2VzLmV4YW1wbGUuY29t"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl delete crd myresources.example.com</pre></div><div class='content'></div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio 1: Crear un CRD y una Instancia</h2>
<div class='content'><ol>
<li><strong>Definir un CRD</strong>: Crea un archivo YAML para un CRD llamado <code>Book</code> con los campos <code>title</code> (string) y <code>author</code> (string).</li>
<li><strong>Aplicar el CRD</strong>: Usa <code>kubectl</code> para aplicar el CRD al clúster.</li>
<li><strong>Crear una Instancia</strong>: Define y aplica una instancia del recurso <code>Book</code> con un título y un autor de tu elección.</li>
</ol>
<h4>Solución</h4>
<ol>
<li>Definir el CRD:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBpZXh0ZW5zaW9ucy5rOHMuaW8vdjEKa2luZDogQ3VzdG9tUmVzb3VyY2VEZWZpbml0aW9uCm1ldGFkYXRhOgogIG5hbWU6IGJvb2tzLmV4YW1wbGUuY29tCnNwZWM6CiAgZ3JvdXA6IGV4YW1wbGUuY29tCiAgdmVyc2lvbnM6CiAgICAtIG5hbWU6IHYxCiAgICAgIHNlcnZlZDogdHJ1ZQogICAgICBzdG9yYWdlOiB0cnVlCiAgICAgIHNjaGVtYToKICAgICAgICBvcGVuQVBJVjNTY2hlbWE6CiAgICAgICAgICB0eXBlOiBvYmplY3QKICAgICAgICAgIHByb3BlcnRpZXM6CiAgICAgICAgICAgIHNwZWM6CiAgICAgICAgICAgICAgdHlwZTogb2JqZWN0CiAgICAgICAgICAgICAgcHJvcGVydGllczoKICAgICAgICAgICAgICAgIHRpdGxlOgogICAgICAgICAgICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICAgICAgICAgIGF1dGhvcjoKICAgICAgICAgICAgICAgICAgdHlwZTogc3RyaW5nCiAgc2NvcGU6IE5hbWVzcGFjZWQKICBuYW1lczoKICAgIHBsdXJhbDogYm9va3MKICAgIHNpbmd1bGFyOiBib29rCiAgICBraW5kOiBCb29rCiAgICBzaG9ydE5hbWVzOgogICAgLSBiaw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: books.example.com
spec:
  group: example.com
  versions:
    - name: v1
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          properties:
            spec:
              type: object
              properties:
                title:
                  type: string
                author:
                  type: string
  scope: Namespaced
  names:
    plural: books
    singular: book
    kind: Book
    shortNames:
    - bk</pre></div><div class='content'><ol start="2">
<li>Aplicar el CRD:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBib29rLWNyZC55YW1s"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f book-crd.yaml</pre></div><div class='content'><ol start="3">
<li>Crear una instancia:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogZXhhbXBsZS5jb20vdjEKa2luZDogQm9vawptZXRhZGF0YToKICBuYW1lOiBteS1maXJzdC1ib29rCnNwZWM6CiAgdGl0bGU6ICJLdWJlcm5ldGVzIGZvciBCZWdpbm5lcnMiCiAgYXV0aG9yOiAiSm9obiBEb2Ui"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: example.com/v1
kind: Book
metadata:
  name: my-first-book
spec:
  title: &quot;Kubernetes for Beginners&quot;
  author: &quot;John Doe&quot;</pre></div><div class='content'><p>Aplicar la instancia:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBib29rLWluc3RhbmNlLnlhbWw="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f book-instance.yaml</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Las Definiciones de Recursos Personalizados (CRDs) son una herramienta poderosa para extender la funcionalidad de Kubernetes. Permiten a los desarrolladores definir y gestionar recursos personalizados que se ajusten a las necesidades específicas de sus aplicaciones. En este módulo, hemos aprendido a crear, aplicar y gestionar CRDs, así como a crear instancias de recursos personalizados. Con esta base, puedes empezar a explorar y desarrollar tus propios recursos personalizados en Kubernetes.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-03-jobs-cronjobs' title="Trabajos y CronJobs">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-monitoring-prometheus' title="Monitoreo con Prometheus">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
