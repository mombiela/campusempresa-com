<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso de Patrones de Diseño de Software</title>

    <link rel="alternate" href="https://campusempresa.com/mod/patrones_diseno/4-12-visitor" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/patrones_diseno/4-12-visitor" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/patrones_diseno/4-12-visitor" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/patrones_diseno/4-12-visitor" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/patrones_diseno/4-12-visitor" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='4-11-template-method'>&#x25C4;Template Method</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Curso de Patrones de Diseño de Software</a>
	</div>
	<div class='col-4 text-end'>
					<a href='5-1-seleccionar-patron'>Cómo Seleccionar el Patrón Adecuado &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Módulo 4: Patrones de Comportamiento</h1>
<div class='content'></div><h2>4-12: Visitor</h2>
<div class='content'><p>El patrón Visitor es un patrón de diseño de comportamiento que permite definir nuevas operaciones sobre una estructura de objetos sin cambiar las clases de los objetos sobre los que opera. Este patrón es útil cuando se necesita realizar operaciones sobre una estructura de objetos compleja que puede cambiar con el tiempo.</p>
<h4>Conceptos Clave</h4>
<ul>
<li><strong>Separación de Algoritmo y Estructura</strong>: El patrón Visitor separa el algoritmo de la estructura de datos sobre la que opera.</li>
<li><strong>Double Dispatch</strong>: Permite que una operación se ejecute en función del tipo concreto de dos objetos.</li>
<li><strong>Extensibilidad</strong>: Facilita la adición de nuevas operaciones sin modificar las clases de los elementos sobre los que opera.</li>
</ul>
<h4>Estructura del Patrón Visitor</h4>
<ol>
<li><strong>Visitor</strong>: Declara una operación de visita para cada tipo de elemento en la estructura de objetos.</li>
<li><strong>ConcreteVisitor</strong>: Implementa las operaciones declaradas en el Visitor.</li>
<li><strong>Element</strong>: Declara una operación <code>accept</code> que toma un objeto Visitor como argumento.</li>
<li><strong>ConcreteElement</strong>: Implementa la operación <code>accept</code> que llama a la operación de visita correspondiente en el objeto Visitor.</li>
<li><strong>ObjectStructure</strong>: Puede enumerar sus elementos y proporcionar una interfaz para que los visitantes accedan a sus elementos.</li>
</ol>
<h4>Diagrama UML</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ky0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tKwp8ICAgIFZpc2l0b3IgICAgIHw8LS0tLS0tLS0tfCBPYmplY3RTdHJ1Y3R1cmV8CistLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLSsKfCArdmlzaXRFbGVtZW50QSgpfCAgICAgICAgICB8ICthY2NlcHQoKSAgICAgIHwKfCArdmlzaXRFbGVtZW50QigpfCAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLSsKKy0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgICAgfAogICAgICAgIF4gICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKKy0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tKwp8Q29uY3JldGVWaXNpdG9yfCAgICAgICAgICB8ICAgIEVsZW1lbnQgICAgICB8CistLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLSsKfCArdmlzaXRFbGVtZW50QSgpfCAgICAgICAgICB8ICthY2NlcHQodjpWaXNpdG9yKXwKfCArdmlzaXRFbGVtZW50QigpfCAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLSsKKy0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgICAgfAogICAgICAgIF4gICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKKy0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tKwp8Q29uY3JldGVFbGVtZW50QXwgICAgICAgICAgfENvbmNyZXRlRWxlbWVudEJ8CistLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLSsKfCArYWNjZXB0KHY6VmlzaXRvcil8ICAgICAgIHwgK2FjY2VwdCh2OlZpc2l0b3IpfAorLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0r"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>+----------------+          +----------------+
|    Visitor     |&lt;---------| ObjectStructure|
+----------------+          +----------------+
| +visitElementA()|          | +accept()      |
| +visitElementB()|          +----------------+
+----------------+                  |
        ^                           |
        |                           |
+----------------+          +----------------+
|ConcreteVisitor|          |    Element      |
+----------------+          +----------------+
| +visitElementA()|          | +accept(v:Visitor)|
| +visitElementB()|          +----------------+
+----------------+                  |
        ^                           |
        |                           |
+----------------+          +----------------+
|ConcreteElementA|          |ConcreteElementB|
+----------------+          +----------------+
| +accept(v:Visitor)|       | +accept(v:Visitor)|
+----------------+          +----------------+</pre></div><div class='content'><h4>Ejemplo de Código</h4>
<p>Vamos a implementar un ejemplo simple en Python para ilustrar el patrón Visitor.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBhYmMgaW1wb3J0IEFCQywgYWJzdHJhY3RtZXRob2QKCiMgVmlzaXRvciBJbnRlcmZhY2UKY2xhc3MgVmlzaXRvcihBQkMpOgogICAgQGFic3RyYWN0bWV0aG9kCiAgICBkZWYgdmlzaXRfY29uY3JldGVfZWxlbWVudF9hKHNlbGYsIGVsZW1lbnQpOgogICAgICAgIHBhc3MKCiAgICBAYWJzdHJhY3RtZXRob2QKICAgIGRlZiB2aXNpdF9jb25jcmV0ZV9lbGVtZW50X2Ioc2VsZiwgZWxlbWVudCk6CiAgICAgICAgcGFzcwoKIyBDb25jcmV0ZSBWaXNpdG9yCmNsYXNzIENvbmNyZXRlVmlzaXRvcihWaXNpdG9yKToKICAgIGRlZiB2aXNpdF9jb25jcmV0ZV9lbGVtZW50X2Eoc2VsZiwgZWxlbWVudCk6CiAgICAgICAgcHJpbnQoZiJDb25jcmV0ZVZpc2l0b3I6IFZpc2l0aW5nIHtlbGVtZW50Lm9wZXJhdGlvbl9hKCl9IikKCiAgICBkZWYgdmlzaXRfY29uY3JldGVfZWxlbWVudF9iKHNlbGYsIGVsZW1lbnQpOgogICAgICAgIHByaW50KGYiQ29uY3JldGVWaXNpdG9yOiBWaXNpdGluZyB7ZWxlbWVudC5vcGVyYXRpb25fYigpfSIpCgojIEVsZW1lbnQgSW50ZXJmYWNlCmNsYXNzIEVsZW1lbnQoQUJDKToKICAgIEBhYnN0cmFjdG1ldGhvZAogICAgZGVmIGFjY2VwdChzZWxmLCB2aXNpdG9yOiBWaXNpdG9yKToKICAgICAgICBwYXNzCgojIENvbmNyZXRlIEVsZW1lbnRzCmNsYXNzIENvbmNyZXRlRWxlbWVudEEoRWxlbWVudCk6CiAgICBkZWYgYWNjZXB0KHNlbGYsIHZpc2l0b3I6IFZpc2l0b3IpOgogICAgICAgIHZpc2l0b3IudmlzaXRfY29uY3JldGVfZWxlbWVudF9hKHNlbGYpCgogICAgZGVmIG9wZXJhdGlvbl9hKHNlbGYpOgogICAgICAgIHJldHVybiAiQ29uY3JldGVFbGVtZW50QSIKCmNsYXNzIENvbmNyZXRlRWxlbWVudEIoRWxlbWVudCk6CiAgICBkZWYgYWNjZXB0KHNlbGYsIHZpc2l0b3I6IFZpc2l0b3IpOgogICAgICAgIHZpc2l0b3IudmlzaXRfY29uY3JldGVfZWxlbWVudF9iKHNlbGYpCgogICAgZGVmIG9wZXJhdGlvbl9iKHNlbGYpOgogICAgICAgIHJldHVybiAiQ29uY3JldGVFbGVtZW50QiIKCiMgQ2xpZW50IENvZGUKZGVmIGNsaWVudF9jb2RlKGVsZW1lbnRzLCB2aXNpdG9yKToKICAgIGZvciBlbGVtZW50IGluIGVsZW1lbnRzOgogICAgICAgIGVsZW1lbnQuYWNjZXB0KHZpc2l0b3IpCgojIFVzYWdlCmVsZW1lbnRzID0gW0NvbmNyZXRlRWxlbWVudEEoKSwgQ29uY3JldGVFbGVtZW50QigpXQp2aXNpdG9yID0gQ29uY3JldGVWaXNpdG9yKCkKY2xpZW50X2NvZGUoZWxlbWVudHMsIHZpc2l0b3Ip"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from abc import ABC, abstractmethod

# Visitor Interface
class Visitor(ABC):
    @abstractmethod
    def visit_concrete_element_a(self, element):
        pass

    @abstractmethod
    def visit_concrete_element_b(self, element):
        pass

# Concrete Visitor
class ConcreteVisitor(Visitor):
    def visit_concrete_element_a(self, element):
        print(f&quot;ConcreteVisitor: Visiting {element.operation_a()}&quot;)

    def visit_concrete_element_b(self, element):
        print(f&quot;ConcreteVisitor: Visiting {element.operation_b()}&quot;)

# Element Interface
class Element(ABC):
    @abstractmethod
    def accept(self, visitor: Visitor):
        pass

# Concrete Elements
class ConcreteElementA(Element):
    def accept(self, visitor: Visitor):
        visitor.visit_concrete_element_a(self)

    def operation_a(self):
        return &quot;ConcreteElementA&quot;

class ConcreteElementB(Element):
    def accept(self, visitor: Visitor):
        visitor.visit_concrete_element_b(self)

    def operation_b(self):
        return &quot;ConcreteElementB&quot;

# Client Code
def client_code(elements, visitor):
    for element in elements:
        element.accept(visitor)

# Usage
elements = [ConcreteElementA(), ConcreteElementB()]
visitor = ConcreteVisitor()
client_code(elements, visitor)</pre></div><div class='content'><h4>Explicación del Código</h4>
<ol>
<li><strong>Visitor Interface</strong>: Define las operaciones de visita para cada tipo de elemento.</li>
<li><strong>ConcreteVisitor</strong>: Implementa las operaciones de visita específicas.</li>
<li><strong>Element Interface</strong>: Declara la operación <code>accept</code> que toma un objeto Visitor.</li>
<li><strong>ConcreteElementA y ConcreteElementB</strong>: Implementan la operación <code>accept</code> y definen operaciones específicas.</li>
<li><strong>Client Code</strong>: Itera sobre una lista de elementos y llama a la operación <code>accept</code> en cada uno, pasando el Visitor.</li>
</ol>
<h4>Ventajas y Desventajas</h4>
<p><strong>Ventajas</strong>:</p>
<ul>
<li><strong>Extensibilidad</strong>: Facilita la adición de nuevas operaciones sin modificar las clases de los elementos.</li>
<li><strong>Separación de Responsabilidades</strong>: Separa el algoritmo de la estructura de datos.</li>
</ul>
<p><strong>Desventajas</strong>:</p>
<ul>
<li><strong>Complejidad</strong>: Puede aumentar la complejidad del código, especialmente si hay muchas operaciones diferentes.</li>
<li><strong>Mantenimiento</strong>: Requiere modificar todas las clases de Visitor cuando se añade un nuevo tipo de elemento.</li>
</ul>
<h4>Conclusión</h4>
<p>El patrón Visitor es una poderosa herramienta para separar algoritmos de las estructuras de datos sobre las que operan, permitiendo una mayor flexibilidad y extensibilidad. Sin embargo, es importante considerar la complejidad añadida y evaluar si es la solución adecuada para el problema en cuestión.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='4-11-template-method'>&#x25C4;Template Method</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Curso de Patrones de Diseño de Software</a>
	</div>
	<div class='col-4 text-end'>
					<a href='5-1-seleccionar-patron'>Cómo Seleccionar el Patrón Adecuado &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
