<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patrones de Diseño en Microservicios</title>

    <link rel="alternate" href="https://campusempresa.com/mod/patrones_diseno/06-02-patrones-microservicios" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/patrones_diseno/06-02-patrons-microserveis" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/patrones_diseno/06-02-patterns-microservices" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/patrones_diseno/06-02-patterns-microservices" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/patrones_diseno/06-02-patrons-microserveis" class="px-2">CA</a>
								</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Contenido del curso</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competencias técnicas</a>
				<a href="/all/conocimientos">Conocimientos</a>
				<a href="/all/soft_skills">Competencias sociales</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-01-patrones-arquitecturas-modernas' title="Patrones de Diseño en Arquitecturas Modernas">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Patrones de Diseño en Microservicios</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-03-patrones-sistemas-distribuidos' title="Patrones de Diseño en Sistemas Distribuidos">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introducción</p>
</h1>
<div class='content'><p>Los microservicios son una arquitectura de software que estructura una aplicación como un conjunto de servicios pequeños y autónomos, cada uno ejecutándose en su propio proceso y comunicándose a través de mecanismos ligeros, como HTTP o mensajes. Esta arquitectura permite una mayor flexibilidad y escalabilidad, pero también introduce desafíos únicos que pueden ser abordados mediante patrones de diseño específicos.</p>
<p>En esta sección, exploraremos varios patrones de diseño que son particularmente útiles en el contexto de los microservicios.</p>
</div><h1><p>Patrones de Diseño Comunes en Microservicios</p>
</h1>
<div class='content'></div><h2><ol>
<li>API Gateway</li>
</ol>
</h2>
<div class='content'><h4>Descripción</h4>
<p>El patrón API Gateway actúa como un punto de entrada único para todas las solicitudes de clientes. Este patrón es útil para manejar la comunicación entre los clientes y los microservicios, proporcionando una capa de abstracción que puede gestionar la autenticación, el enrutamiento, la agregación de datos y la limitación de tasa.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFamVtcGxvIGRlIHVuIEFQSSBHYXRld2F5IHNpbXBsZSB1c2FuZG8gRmxhc2sgZW4gUHl0aG9uCgpmcm9tIGZsYXNrIGltcG9ydCBGbGFzaywganNvbmlmeSwgcmVxdWVzdAppbXBvcnQgcmVxdWVzdHMKCmFwcCA9IEZsYXNrKF9fbmFtZV9fKQoKQGFwcC5yb3V0ZSgnL2FwaS9zZXJ2aWNlMScpCmRlZiBzZXJ2aWNlMSgpOgogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9zZXJ2aWNlMTo1MDAwLycpCiAgICByZXR1cm4ganNvbmlmeShyZXNwb25zZS5qc29uKCkpCgpAYXBwLnJvdXRlKCcvYXBpL3NlcnZpY2UyJykKZGVmIHNlcnZpY2UyKCk6CiAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL3NlcnZpY2UyOjUwMDAvJykKICAgIHJldHVybiBqc29uaWZ5KHJlc3BvbnNlLmpzb24oKSkKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBhcHAucnVuKGhvc3Q9JzAuMC4wLjAnLCBwb3J0PTgwODAp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Ejemplo de un API Gateway simple usando Flask en Python

from flask import Flask, jsonify, request
import requests

app = Flask(__name__)

@app.route('/api/service1')
def service1():
    response = requests.get('http://service1:5000/')
    return jsonify(response.json())

@app.route('/api/service2')
def service2():
    response = requests.get('http://service2:5000/')
    return jsonify(response.json())

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080)</pre></div><div class='content'><h4>Ventajas</h4>
<ul>
<li>Centraliza la gestión de solicitudes.</li>
<li>Simplifica la comunicación entre clientes y microservicios.</li>
<li>Facilita la implementación de políticas de seguridad y autenticación.</li>
</ul>
<h4>Desventajas</h4>
<ul>
<li>Puede convertirse en un cuello de botella.</li>
<li>Introduce un punto único de fallo.</li>
</ul>
</div><h2><ol start="2">
<li>Circuit Breaker</li>
</ol>
</h2>
<div class='content'><h4>Descripción</h4>
<p>El patrón Circuit Breaker ayuda a prevenir fallos en cascada en un sistema distribuido. Actúa como un interruptor que corta la comunicación con un servicio fallido para evitar que el sistema se sobrecargue con solicitudes fallidas.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFamVtcGxvIGRlIHVuIENpcmN1aXQgQnJlYWtlciB1c2FuZG8gbGEgYmlibGlvdGVjYSBweWJyZWFrZXIgZW4gUHl0aG9uCgppbXBvcnQgcHlicmVha2VyCmltcG9ydCByZXF1ZXN0cwoKYnJlYWtlciA9IHB5YnJlYWtlci5DaXJjdWl0QnJlYWtlcihmYWlsX21heD0zLCByZXNldF90aW1lb3V0PTYwKQoKQGJyZWFrZXIKZGVmIGNhbGxfc2VydmljZSgpOgogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly91bnJlbGlhYmxlLXNlcnZpY2U6NTAwMC8nKQogICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQoKdHJ5OgogICAgZGF0YSA9IGNhbGxfc2VydmljZSgpCmV4Y2VwdCBweWJyZWFrZXIuQ2lyY3VpdEJyZWFrZXJFcnJvcjoKICAgIGRhdGEgPSB7J2Vycm9yJzogJ1NlcnZpY2UgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlJ30KCnByaW50KGRhdGEp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Ejemplo de un Circuit Breaker usando la biblioteca pybreaker en Python

import pybreaker
import requests

breaker = pybreaker.CircuitBreaker(fail_max=3, reset_timeout=60)

@breaker
def call_service():
    response = requests.get('http://unreliable-service:5000/')
    return response.json()

try:
    data = call_service()
except pybreaker.CircuitBreakerError:
    data = {'error': 'Service is currently unavailable'}

print(data)</pre></div><div class='content'><h4>Ventajas</h4>
<ul>
<li>Mejora la resiliencia del sistema.</li>
<li>Evita la sobrecarga de servicios fallidos.</li>
<li>Permite la recuperación automática de servicios.</li>
</ul>
<h4>Desventajas</h4>
<ul>
<li>Puede introducir latencia adicional.</li>
<li>Requiere una configuración cuidadosa para evitar falsos positivos.</li>
</ul>
</div><h2><ol start="3">
<li>Service Discovery</li>
</ol>
</h2>
<div class='content'><h4>Descripción</h4>
<p>El patrón Service Discovery permite que los microservicios encuentren y se comuniquen entre sí sin necesidad de configuraciones estáticas. Utiliza un registro de servicios donde cada microservicio se registra y puede ser descubierto por otros servicios.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFamVtcGxvIGRlIHVuIFNlcnZpY2UgRGlzY292ZXJ5IHVzYW5kbyBDb25zdWwgZW4gUHl0aG9uCgppbXBvcnQgY29uc3VsCgpjID0gY29uc3VsLkNvbnN1bCgpCgojIFJlZ2lzdHJhciB1biBzZXJ2aWNpbwpjLmFnZW50LnNlcnZpY2UucmVnaXN0ZXIoJ3NlcnZpY2UxJywgc2VydmljZV9pZD0nc2VydmljZTEtMScsIGFkZHJlc3M9JzEyNy4wLjAuMScsIHBvcnQ9NTAwMCkKCiMgRGVzY3VicmlyIHVuIHNlcnZpY2lvCnNlcnZpY2VzID0gYy5hZ2VudC5zZXJ2aWNlcygpCnNlcnZpY2UxID0gc2VydmljZXMuZ2V0KCdzZXJ2aWNlMS0xJykKcHJpbnQoc2VydmljZTEp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Ejemplo de un Service Discovery usando Consul en Python

import consul

c = consul.Consul()

# Registrar un servicio
c.agent.service.register('service1', service_id='service1-1', address='127.0.0.1', port=5000)

# Descubrir un servicio
services = c.agent.services()
service1 = services.get('service1-1')
print(service1)</pre></div><div class='content'><h4>Ventajas</h4>
<ul>
<li>Facilita la escalabilidad y la flexibilidad.</li>
<li>Elimina la necesidad de configuraciones estáticas.</li>
<li>Permite la actualización dinámica de servicios.</li>
</ul>
<h4>Desventajas</h4>
<ul>
<li>Introduce complejidad adicional.</li>
<li>Requiere una infraestructura de soporte (por ejemplo, Consul, Eureka).</li>
</ul>
</div><h2><ol start="4">
<li>Event Sourcing</li>
</ol>
</h2>
<div class='content'><h4>Descripción</h4>
<p>El patrón Event Sourcing almacena el estado de una aplicación como una secuencia de eventos. En lugar de almacenar el estado actual, se almacenan todos los cambios de estado como eventos, lo que permite reconstruir el estado actual en cualquier momento.</p>
<h4>Ejemplo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFamVtcGxvIGRlIEV2ZW50IFNvdXJjaW5nIHVzYW5kbyB1bmEgbGlzdGEgZGUgZXZlbnRvcyBlbiBQeXRob24KCmNsYXNzIEV2ZW50U291cmNpbmc6CiAgICBkZWYgX19pbml0X18oc2VsZik6CiAgICAgICAgc2VsZi5ldmVudHMgPSBbXQoKICAgIGRlZiBhZGRfZXZlbnQoc2VsZiwgZXZlbnQpOgogICAgICAgIHNlbGYuZXZlbnRzLmFwcGVuZChldmVudCkKCiAgICBkZWYgZ2V0X3N0YXRlKHNlbGYpOgogICAgICAgIHN0YXRlID0ge30KICAgICAgICBmb3IgZXZlbnQgaW4gc2VsZi5ldmVudHM6CiAgICAgICAgICAgIHN0YXRlLnVwZGF0ZShldmVudCkKICAgICAgICByZXR1cm4gc3RhdGUKCiMgVXNvIGRlbCBwYXRyw7NuIEV2ZW50IFNvdXJjaW5nCmV2ZW50X3N0b3JlID0gRXZlbnRTb3VyY2luZygpCmV2ZW50X3N0b3JlLmFkZF9ldmVudCh7J3VzZXJfY3JlYXRlZCc6IHsnaWQnOiAxLCAnbmFtZSc6ICdBbGljZSd9fSkKZXZlbnRfc3RvcmUuYWRkX2V2ZW50KHsndXNlcl91cGRhdGVkJzogeydpZCc6IDEsICduYW1lJzogJ0FsaWNlIFNtaXRoJ319KQoKY3VycmVudF9zdGF0ZSA9IGV2ZW50X3N0b3JlLmdldF9zdGF0ZSgpCnByaW50KGN1cnJlbnRfc3RhdGUp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Ejemplo de Event Sourcing usando una lista de eventos en Python

class EventSourcing:
    def __init__(self):
        self.events = []

    def add_event(self, event):
        self.events.append(event)

    def get_state(self):
        state = {}
        for event in self.events:
            state.update(event)
        return state

# Uso del patr&oacute;n Event Sourcing
event_store = EventSourcing()
event_store.add_event({'user_created': {'id': 1, 'name': 'Alice'}})
event_store.add_event({'user_updated': {'id': 1, 'name': 'Alice Smith'}})

current_state = event_store.get_state()
print(current_state)</pre></div><div class='content'><h4>Ventajas</h4>
<ul>
<li>Proporciona un historial completo de cambios.</li>
<li>Facilita la auditoría y el análisis.</li>
<li>Permite la recuperación del estado en cualquier punto en el tiempo.</li>
</ul>
<h4>Desventajas</h4>
<ul>
<li>Puede consumir mucho espacio de almacenamiento.</li>
<li>Introduce complejidad en la gestión de eventos.</li>
</ul>
</div><h1><p>Ejercicios Prácticos</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Implementar un API Gateway</p>
</h2>
<div class='content'><p><strong>Objetivo:</strong> Crear un API Gateway que enrute las solicitudes a dos microservicios diferentes.</p>
<p><strong>Instrucciones:</strong></p>
<ol>
<li>Crear dos microservicios simples usando Flask.</li>
<li>Implementar un API Gateway que enrute las solicitudes a estos microservicios.</li>
<li>Probar el API Gateway enviando solicitudes y verificando las respuestas.</li>
</ol>
<p><strong>Solución:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBNaWNyb3NlcnZpY2lvIDEKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIGpzb25pZnkKCmFwcDEgPSBGbGFzayhfX25hbWVfXykKCkBhcHAxLnJvdXRlKCcvJykKZGVmIHNlcnZpY2UxKCk6CiAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiAnUmVzcG9uc2UgZnJvbSBTZXJ2aWNlIDEnfSkKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBhcHAxLnJ1bihob3N0PScwLjAuMC4wJywgcG9ydD01MDAwKQoKIyBNaWNyb3NlcnZpY2lvIDIKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIGpzb25pZnkKCmFwcDIgPSBGbGFzayhfX25hbWVfXykKCkBhcHAyLnJvdXRlKCcvJykKZGVmIHNlcnZpY2UyKCk6CiAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiAnUmVzcG9uc2UgZnJvbSBTZXJ2aWNlIDInfSkKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBhcHAyLnJ1bihob3N0PScwLjAuMC4wJywgcG9ydD01MDAxKQoKIyBBUEkgR2F0ZXdheQpmcm9tIGZsYXNrIGltcG9ydCBGbGFzaywganNvbmlmeSwgcmVxdWVzdAppbXBvcnQgcmVxdWVzdHMKCmFwcF9nYXRld2F5ID0gRmxhc2soX19uYW1lX18pCgpAYXBwX2dhdGV3YXkucm91dGUoJy9hcGkvc2VydmljZTEnKQpkZWYgZ2F0ZXdheV9zZXJ2aWNlMSgpOgogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC8nKQogICAgcmV0dXJuIGpzb25pZnkocmVzcG9uc2UuanNvbigpKQoKQGFwcF9nYXRld2F5LnJvdXRlKCcvYXBpL3NlcnZpY2UyJykKZGVmIGdhdGV3YXlfc2VydmljZTIoKToKICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDEvJykKICAgIHJldHVybiBqc29uaWZ5KHJlc3BvbnNlLmpzb24oKSkKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBhcHBfZ2F0ZXdheS5ydW4oaG9zdD0nMC4wLjAuMCcsIHBvcnQ9ODA4MCk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Microservicio 1
from flask import Flask, jsonify

app1 = Flask(__name__)

@app1.route('/')
def service1():
    return jsonify({'message': 'Response from Service 1'})

if __name__ == '__main__':
    app1.run(host='0.0.0.0', port=5000)

# Microservicio 2
from flask import Flask, jsonify

app2 = Flask(__name__)

@app2.route('/')
def service2():
    return jsonify({'message': 'Response from Service 2'})

if __name__ == '__main__':
    app2.run(host='0.0.0.0', port=5001)

# API Gateway
from flask import Flask, jsonify, request
import requests

app_gateway = Flask(__name__)

@app_gateway.route('/api/service1')
def gateway_service1():
    response = requests.get('http://localhost:5000/')
    return jsonify(response.json())

@app_gateway.route('/api/service2')
def gateway_service2():
    response = requests.get('http://localhost:5001/')
    return jsonify(response.json())

if __name__ == '__main__':
    app_gateway.run(host='0.0.0.0', port=8080)</pre></div><div class='content'></div><h2><p>Ejercicio 2: Implementar un Circuit Breaker</p>
</h2>
<div class='content'><p><strong>Objetivo:</strong> Implementar un Circuit Breaker para manejar fallos en un microservicio.</p>
<p><strong>Instrucciones:</strong></p>
<ol>
<li>Crear un microservicio que falle aleatoriamente.</li>
<li>Implementar un Circuit Breaker para manejar las fallas del microservicio.</li>
<li>Probar el Circuit Breaker enviando múltiples solicitudes y verificando el comportamiento.</li>
</ol>
<p><strong>Solución:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBNaWNyb3NlcnZpY2lvIGNvbiBmYWxsb3MgYWxlYXRvcmlvcwpmcm9tIGZsYXNrIGltcG9ydCBGbGFzaywganNvbmlmeQppbXBvcnQgcmFuZG9tCgphcHBfZmF1bHR5ID0gRmxhc2soX19uYW1lX18pCgpAYXBwX2ZhdWx0eS5yb3V0ZSgnLycpCmRlZiB1bnJlbGlhYmxlX3NlcnZpY2UoKToKICAgIGlmIHJhbmRvbS5jaG9pY2UoW1RydWUsIEZhbHNlXSk6CiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogJ1N1Y2Nlc3MnfSksIDIwMAogICAgZWxzZToKICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiAnRmFpbHVyZSd9KSwgNTAwCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgYXBwX2ZhdWx0eS5ydW4oaG9zdD0nMC4wLjAuMCcsIHBvcnQ9NTAwMCkKCiMgQ2lyY3VpdCBCcmVha2VyCmltcG9ydCBweWJyZWFrZXIKaW1wb3J0IHJlcXVlc3RzCgpicmVha2VyID0gcHlicmVha2VyLkNpcmN1aXRCcmVha2VyKGZhaWxfbWF4PTMsIHJlc2V0X3RpbWVvdXQ9NjApCgpAYnJlYWtlcgpkZWYgY2FsbF91bnJlbGlhYmxlX3NlcnZpY2UoKToKICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvJykKICAgIHJldHVybiByZXNwb25zZS5qc29uKCkKCnRyeToKICAgIGRhdGEgPSBjYWxsX3VucmVsaWFibGVfc2VydmljZSgpCmV4Y2VwdCBweWJyZWFrZXIuQ2lyY3VpdEJyZWFrZXJFcnJvcjoKICAgIGRhdGEgPSB7J2Vycm9yJzogJ1NlcnZpY2UgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlJ30KCnByaW50KGRhdGEp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Microservicio con fallos aleatorios
from flask import Flask, jsonify
import random

app_faulty = Flask(__name__)

@app_faulty.route('/')
def unreliable_service():
    if random.choice([True, False]):
        return jsonify({'message': 'Success'}), 200
    else:
        return jsonify({'message': 'Failure'}), 500

if __name__ == '__main__':
    app_faulty.run(host='0.0.0.0', port=5000)

# Circuit Breaker
import pybreaker
import requests

breaker = pybreaker.CircuitBreaker(fail_max=3, reset_timeout=60)

@breaker
def call_unreliable_service():
    response = requests.get('http://localhost:5000/')
    return response.json()

try:
    data = call_unreliable_service()
except pybreaker.CircuitBreakerError:
    data = {'error': 'Service is currently unavailable'}

print(data)</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta sección, hemos explorado varios patrones de diseño que son particularmente útiles en el contexto de los microservicios, incluyendo el API Gateway, Circuit Breaker, Service Discovery y Event Sourcing. Cada uno de estos patrones aborda desafíos específicos y proporciona soluciones que mejoran la resiliencia, escalabilidad y flexibilidad de las aplicaciones basadas en microservicios.</p>
<p>Al aplicar estos patrones, los desarrolladores pueden construir sistemas más robustos y eficientes, capaces de manejar la complejidad y los desafíos inherentes a las arquitecturas de microservicios.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-01-patrones-arquitecturas-modernas' title="Patrones de Diseño en Arquitecturas Modernas">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-03-patrones-sistemas-distribuidos' title="Patrones de Diseño en Sistemas Distribuidos">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
