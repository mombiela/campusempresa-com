<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curso de Patrones de Diseño de Software</title>

    <link rel="alternate" href="https://campusempresa.com/mod/patrones_diseno/3-7-flyweight" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/patrones_diseno/3-7-flyweight" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/patrones_diseno/3-7-flyweight" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/patrones_diseno/3-7-flyweight" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/patrones_diseno/3-7-flyweight" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='3-6-facade'>&#x25C4;Facade</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Curso de Patrones de Diseño de Software</a>
	</div>
	<div class='col-4 text-end'>
					<a href='3-8-proxy'>Proxy &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Módulo 3: Patrones Estructurales</h1>
<div class='content'></div><h2>Flyweight</h2>
<div class='content'><h4>¿Qué es el Patrón Flyweight?</h4>
<p>El patrón Flyweight es un patrón de diseño estructural que se utiliza para minimizar el uso de memoria y mejorar el rendimiento mediante el uso compartido de objetos. Este patrón es particularmente útil cuando se necesita crear un gran número de objetos similares.</p>
<h4>Conceptos Clave</h4>
<ul>
<li><strong>Flyweight (Peso Ligero):</strong> Un objeto que puede ser compartido para reducir el consumo de memoria.</li>
<li><strong>Estado Intrínseco:</strong> Parte del estado del objeto que es independiente del contexto y puede ser compartido.</li>
<li><strong>Estado Extrínseco:</strong> Parte del estado del objeto que depende del contexto y no puede ser compartido.</li>
<li><strong>Factory:</strong> Una clase que se encarga de crear y gestionar los objetos Flyweight.</li>
</ul>
<h4>Estructura del Patrón Flyweight</h4>
<p>El patrón Flyweight se compone de los siguientes componentes:</p>
<ol>
<li><strong>Flyweight Interface:</strong> Define las operaciones que pueden ser realizadas por los objetos Flyweight.</li>
<li><strong>ConcreteFlyweight:</strong> Implementa la interfaz Flyweight y almacena el estado intrínseco.</li>
<li><strong>FlyweightFactory:</strong> Crea y gestiona los objetos Flyweight, asegurándose de que se reutilicen en lugar de crear nuevos objetos.</li>
<li><strong>Client:</strong> Mantiene referencias a los objetos Flyweight y gestiona el estado extrínseco.</li>
</ol>
<h4>Ejemplo de Código</h4>
<p>A continuación, se presenta un ejemplo en Python para ilustrar el patrón Flyweight:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSB0eXBpbmcgaW1wb3J0IERpY3QKCmNsYXNzIEZseXdlaWdodDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzaGFyZWRfc3RhdGU6IHN0cik6CiAgICAgICAgc2VsZi5zaGFyZWRfc3RhdGUgPSBzaGFyZWRfc3RhdGUKCiAgICBkZWYgb3BlcmF0aW9uKHNlbGYsIHVuaXF1ZV9zdGF0ZTogc3RyKToKICAgICAgICBwcmludChmIkZseXdlaWdodDogQ29tcGFydGllbmRvICd7c2VsZi5zaGFyZWRfc3RhdGV9JyB5IMO6bmljbyAne3VuaXF1ZV9zdGF0ZX0nIikKCmNsYXNzIEZseXdlaWdodEZhY3Rvcnk6CiAgICBfZmx5d2VpZ2h0czogRGljdFtzdHIsIEZseXdlaWdodF0gPSB7fQoKICAgIGRlZiBnZXRfZmx5d2VpZ2h0KHNlbGYsIHNoYXJlZF9zdGF0ZTogc3RyKSAtPiBGbHl3ZWlnaHQ6CiAgICAgICAgaWYgc2hhcmVkX3N0YXRlIG5vdCBpbiBzZWxmLl9mbHl3ZWlnaHRzOgogICAgICAgICAgICBzZWxmLl9mbHl3ZWlnaHRzW3NoYXJlZF9zdGF0ZV0gPSBGbHl3ZWlnaHQoc2hhcmVkX3N0YXRlKQogICAgICAgICAgICBwcmludChmIkZseXdlaWdodEZhY3Rvcnk6IENyZWFuZG8gbnVldm8gZmx5d2VpZ2h0IHBhcmEgJ3tzaGFyZWRfc3RhdGV9JyIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoZiJGbHl3ZWlnaHRGYWN0b3J5OiBSZXV0aWxpemFuZG8gZmx5d2VpZ2h0IGV4aXN0ZW50ZSBwYXJhICd7c2hhcmVkX3N0YXRlfSciKQogICAgICAgIHJldHVybiBzZWxmLl9mbHl3ZWlnaHRzW3NoYXJlZF9zdGF0ZV0KCmRlZiBjbGllbnRfY29kZShmYWN0b3J5OiBGbHl3ZWlnaHRGYWN0b3J5LCBzaGFyZWRfc3RhdGU6IHN0ciwgdW5pcXVlX3N0YXRlOiBzdHIpOgogICAgZmx5d2VpZ2h0ID0gZmFjdG9yeS5nZXRfZmx5d2VpZ2h0KHNoYXJlZF9zdGF0ZSkKICAgIGZseXdlaWdodC5vcGVyYXRpb24odW5pcXVlX3N0YXRlKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGZhY3RvcnkgPSBGbHl3ZWlnaHRGYWN0b3J5KCkKCiAgICBjbGllbnRfY29kZShmYWN0b3J5LCAiRXN0YWRvQ29tcGFydGlkbzEiLCAiRXN0YWRvVW5pY29BIikKICAgIGNsaWVudF9jb2RlKGZhY3RvcnksICJFc3RhZG9Db21wYXJ0aWRvMSIsICJFc3RhZG9Vbmljb0IiKQogICAgY2xpZW50X2NvZGUoZmFjdG9yeSwgIkVzdGFkb0NvbXBhcnRpZG8yIiwgIkVzdGFkb1VuaWNvQyIpCiAgICBjbGllbnRfY29kZShmYWN0b3J5LCAiRXN0YWRvQ29tcGFydGlkbzIiLCAiRXN0YWRvVW5pY29EIik="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from typing import Dict

class Flyweight:
    def __init__(self, shared_state: str):
        self.shared_state = shared_state

    def operation(self, unique_state: str):
        print(f&quot;Flyweight: Compartiendo '{self.shared_state}' y &uacute;nico '{unique_state}'&quot;)

class FlyweightFactory:
    _flyweights: Dict[str, Flyweight] = {}

    def get_flyweight(self, shared_state: str) -&gt; Flyweight:
        if shared_state not in self._flyweights:
            self._flyweights[shared_state] = Flyweight(shared_state)
            print(f&quot;FlyweightFactory: Creando nuevo flyweight para '{shared_state}'&quot;)
        else:
            print(f&quot;FlyweightFactory: Reutilizando flyweight existente para '{shared_state}'&quot;)
        return self._flyweights[shared_state]

def client_code(factory: FlyweightFactory, shared_state: str, unique_state: str):
    flyweight = factory.get_flyweight(shared_state)
    flyweight.operation(unique_state)

if __name__ == &quot;__main__&quot;:
    factory = FlyweightFactory()

    client_code(factory, &quot;EstadoCompartido1&quot;, &quot;EstadoUnicoA&quot;)
    client_code(factory, &quot;EstadoCompartido1&quot;, &quot;EstadoUnicoB&quot;)
    client_code(factory, &quot;EstadoCompartido2&quot;, &quot;EstadoUnicoC&quot;)
    client_code(factory, &quot;EstadoCompartido2&quot;, &quot;EstadoUnicoD&quot;)</pre></div><div class='content'><h4>Explicación del Código</h4>
<ol>
<li><strong>Flyweight Class:</strong> Define el estado compartido (<code>shared_state</code>) y la operación que utiliza tanto el estado compartido como el estado único (<code>unique_state</code>).</li>
<li><strong>FlyweightFactory Class:</strong> Gestiona la creación y reutilización de los objetos Flyweight. Si un objeto con el estado compartido solicitado ya existe, lo reutiliza; de lo contrario, crea uno nuevo.</li>
<li><strong>Client Code:</strong> Demuestra cómo se pueden reutilizar los objetos Flyweight para diferentes estados únicos.</li>
</ol>
<h4>Ventajas y Desventajas del Patrón Flyweight</h4>
<p><strong>Ventajas:</strong></p>
<ul>
<li><strong>Ahorro de Memoria:</strong> Reduce significativamente el consumo de memoria al compartir objetos.</li>
<li><strong>Mejora del Rendimiento:</strong> Puede mejorar el rendimiento al reducir la sobrecarga de creación de objetos.</li>
</ul>
<p><strong>Desventajas:</strong></p>
<ul>
<li><strong>Complejidad:</strong> Añade complejidad al sistema debido a la gestión del estado intrínseco y extrínseco.</li>
<li><strong>No Siempre Aplicable:</strong> No es útil si los objetos no tienen suficiente estado compartido.</li>
</ul>
<h4>Conclusión</h4>
<p>El patrón Flyweight es una poderosa herramienta para optimizar el uso de memoria y mejorar el rendimiento en aplicaciones que requieren la creación de un gran número de objetos similares. Sin embargo, su implementación puede añadir complejidad al sistema, por lo que debe ser utilizado con cuidado y en contextos donde los beneficios superen los costos.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='3-6-facade'>&#x25C4;Facade</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Curso de Patrones de Diseño de Software</a>
	</div>
	<div class='col-4 text-end'>
					<a href='3-8-proxy'>Proxy &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
