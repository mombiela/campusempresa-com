<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Scraping</title>

    <link rel="alternate" href="https://campusempresa.com/mod/r/05-04-web-scraping" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/r/05-04-web-scraping" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/r/05-04-web-scraping" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/r/05-04-web-scraping" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/r/05-04-web-scraping" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-03-working-large-datasets' title="Trabajo con Grandes Conjuntos de Datos">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Web Scraping</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-05-apis-json' title="APIs y JSON">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>El web scraping es una técnica utilizada para extraer información de sitios web. En R, existen varias herramientas y paquetes que facilitan esta tarea, como <code>rvest</code>, <code>httr</code> y <code>xml2</code>. En esta lección, aprenderemos a utilizar estos paquetes para realizar web scraping de manera efectiva.</p>
</div><h1>Objetivos de Aprendizaje</h1>
<div class='content'><ul>
<li>Comprender los conceptos básicos del web scraping.</li>
<li>Aprender a utilizar el paquete <code>rvest</code> para extraer datos de páginas web.</li>
<li>Manejar estructuras HTML y XML.</li>
<li>Realizar operaciones básicas de limpieza y transformación de datos extraídos.</li>
</ul>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>HTML</strong>: Lenguaje de marcado utilizado para crear páginas web.</li>
<li><strong>CSS Selectors</strong>: Herramientas que permiten seleccionar y manipular elementos HTML.</li>
<li><strong>XPath</strong>: Lenguaje utilizado para navegar a través de elementos y atributos en documentos XML.</li>
</ul>
</div><h1>Herramientas y Paquetes</h1>
<div class='content'><ul>
<li><strong>rvest</strong>: Paquete principal para web scraping en R.</li>
<li><strong>httr</strong>: Paquete para realizar solicitudes HTTP.</li>
<li><strong>xml2</strong>: Paquete para trabajar con documentos XML y HTML.</li>
</ul>
</div><h1>Instalación de Paquetes</h1>
<div class='content'><p>Antes de comenzar, asegúrate de tener instalados los paquetes necesarios:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW5zdGFsbC5wYWNrYWdlcygicnZlc3QiKQppbnN0YWxsLnBhY2thZ2VzKCJodHRyIikKaW5zdGFsbC5wYWNrYWdlcygieG1sMiIp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>install.packages(&quot;rvest&quot;)
install.packages(&quot;httr&quot;)
install.packages(&quot;xml2&quot;)</pre></div><div class='content'></div><h1>Ejemplo Práctico: Extracción de Datos de una Página Web</h1>
<div class='content'></div><h2>Paso 1: Cargar los Paquetes</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeShydmVzdCkKbGlicmFyeShodHRyKQpsaWJyYXJ5KHhtbDIp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>library(rvest)
library(httr)
library(xml2)</pre></div><div class='content'></div><h2>Paso 2: Leer el HTML de la Página Web</h2>
<div class='content'><p>Vamos a extraer datos de una página web de ejemplo. Supongamos que queremos extraer los títulos de los artículos de un blog.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXJsIDwtICJodHRwczovL2V4YW1wbGUtYmxvZy5jb20iCndlYnBhZ2UgPC0gcmVhZF9odG1sKHVybCk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>url &lt;- &quot;https://example-blog.com&quot;
webpage &lt;- read_html(url)</pre></div><div class='content'></div><h2>Paso 3: Inspeccionar la Estructura HTML</h2>
<div class='content'><p>Para extraer los datos, primero necesitamos inspeccionar la estructura HTML de la página. Utiliza las herramientas de desarrollo de tu navegador (F12) para identificar los selectores CSS o XPath de los elementos que deseas extraer.</p>
</div><h2>Paso 4: Extraer los Datos</h2>
<div class='content'><p>Supongamos que los títulos de los artículos están en elementos <code>&lt;h2&gt;</code> con la clase <code>post-title</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGl0bGVzIDwtIHdlYnBhZ2UgJT4lCiAgaHRtbF9ub2RlcygiLnBvc3QtdGl0bGUiKSAlPiUKICBodG1sX3RleHQoKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>titles &lt;- webpage %&gt;%
  html_nodes(&quot;.post-title&quot;) %&gt;%
  html_text()</pre></div><div class='content'></div><h2>Paso 5: Limpiar y Transformar los Datos</h2>
<div class='content'><p>A menudo, los datos extraídos necesitan ser limpiados y transformados. Por ejemplo, podríamos querer eliminar espacios en blanco adicionales.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGl0bGVzIDwtIHRyaW13cyh0aXRsZXMp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>titles &lt;- trimws(titles)</pre></div><div class='content'></div><h2>Ejemplo Completo</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeShydmVzdCkKbGlicmFyeShodHRyKQpsaWJyYXJ5KHhtbDIpCgojIFVSTCBkZSBsYSBww6FnaW5hIHdlYgp1cmwgPC0gImh0dHBzOi8vZXhhbXBsZS1ibG9nLmNvbSIKCiMgTGVlciBlbCBIVE1MIGRlIGxhIHDDoWdpbmEgd2ViCndlYnBhZ2UgPC0gcmVhZF9odG1sKHVybCkKCiMgRXh0cmFlciBsb3MgdMOtdHVsb3MgZGUgbG9zIGFydMOtY3Vsb3MKdGl0bGVzIDwtIHdlYnBhZ2UgJT4lCiAgaHRtbF9ub2RlcygiLnBvc3QtdGl0bGUiKSAlPiUKICBodG1sX3RleHQoKQoKIyBMaW1waWFyIGxvcyBkYXRvcwp0aXRsZXMgPC0gdHJpbXdzKHRpdGxlcykKCiMgTW9zdHJhciBsb3MgdMOtdHVsb3MgZXh0cmHDrWRvcwpwcmludCh0aXRsZXMp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>library(rvest)
library(httr)
library(xml2)

# URL de la p&aacute;gina web
url &lt;- &quot;https://example-blog.com&quot;

# Leer el HTML de la p&aacute;gina web
webpage &lt;- read_html(url)

# Extraer los t&iacute;tulos de los art&iacute;culos
titles &lt;- webpage %&gt;%
  html_nodes(&quot;.post-title&quot;) %&gt;%
  html_text()

# Limpiar los datos
titles &lt;- trimws(titles)

# Mostrar los t&iacute;tulos extra&iacute;dos
print(titles)</pre></div><div class='content'></div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio 1: Extracción de Precios de un Sitio de Comercio Electrónico</h2>
<div class='content'><ol>
<li>Encuentra un sitio de comercio electrónico que liste productos y precios.</li>
<li>Utiliza <code>rvest</code> para extraer los nombres y precios de los productos.</li>
<li>Limpia y transforma los datos según sea necesario.</li>
<li>Guarda los datos en un <code>data.frame</code>.</li>
</ol>
<h4>Solución</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeShydmVzdCkKbGlicmFyeShodHRyKQpsaWJyYXJ5KHhtbDIpCgojIFVSTCBkZSBsYSBww6FnaW5hIHdlYgp1cmwgPC0gImh0dHBzOi8vZXhhbXBsZS1lY29tbWVyY2UuY29tIgoKIyBMZWVyIGVsIEhUTUwgZGUgbGEgcMOhZ2luYSB3ZWIKd2VicGFnZSA8LSByZWFkX2h0bWwodXJsKQoKIyBFeHRyYWVyIGxvcyBub21icmVzIGRlIGxvcyBwcm9kdWN0b3MKcHJvZHVjdF9uYW1lcyA8LSB3ZWJwYWdlICU+JQogIGh0bWxfbm9kZXMoIi5wcm9kdWN0LW5hbWUiKSAlPiUKICBodG1sX3RleHQoKQoKIyBFeHRyYWVyIGxvcyBwcmVjaW9zIGRlIGxvcyBwcm9kdWN0b3MKcHJvZHVjdF9wcmljZXMgPC0gd2VicGFnZSAlPiUKICBodG1sX25vZGVzKCIucHJvZHVjdC1wcmljZSIpICU+JQogIGh0bWxfdGV4dCgpCgojIExpbXBpYXIgbG9zIGRhdG9zCnByb2R1Y3RfbmFtZXMgPC0gdHJpbXdzKHByb2R1Y3RfbmFtZXMpCnByb2R1Y3RfcHJpY2VzIDwtIHRyaW13cyhwcm9kdWN0X3ByaWNlcykKCiMgQ3JlYXIgdW4gZGF0YS5mcmFtZQpwcm9kdWN0cyA8LSBkYXRhLmZyYW1lKAogIE5hbWUgPSBwcm9kdWN0X25hbWVzLAogIFByaWNlID0gcHJvZHVjdF9wcmljZXMsCiAgc3RyaW5nc0FzRmFjdG9ycyA9IEZBTFNFCikKCiMgTW9zdHJhciBlbCBkYXRhLmZyYW1lCnByaW50KHByb2R1Y3RzKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>library(rvest)
library(httr)
library(xml2)

# URL de la p&aacute;gina web
url &lt;- &quot;https://example-ecommerce.com&quot;

# Leer el HTML de la p&aacute;gina web
webpage &lt;- read_html(url)

# Extraer los nombres de los productos
product_names &lt;- webpage %&gt;%
  html_nodes(&quot;.product-name&quot;) %&gt;%
  html_text()

# Extraer los precios de los productos
product_prices &lt;- webpage %&gt;%
  html_nodes(&quot;.product-price&quot;) %&gt;%
  html_text()

# Limpiar los datos
product_names &lt;- trimws(product_names)
product_prices &lt;- trimws(product_prices)

# Crear un data.frame
products &lt;- data.frame(
  Name = product_names,
  Price = product_prices,
  stringsAsFactors = FALSE
)

# Mostrar el data.frame
print(products)</pre></div><div class='content'></div><h1>Errores Comunes y Consejos</h1>
<div class='content'><ul>
<li><strong>Error 404</strong>: Asegúrate de que la URL es correcta y que la página web está disponible.</li>
<li><strong>Cambios en la Estructura HTML</strong>: Las páginas web pueden cambiar su estructura HTML, lo que puede romper tu código de scraping. Revisa y actualiza los selectores CSS o XPath regularmente.</li>
<li><strong>Bloqueo por el Sitio Web</strong>: Algunos sitios web tienen medidas para bloquear el scraping. Respeta los términos de servicio y considera usar técnicas como la rotación de IPs si es necesario.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>En esta lección, hemos aprendido los conceptos básicos del web scraping y cómo utilizar el paquete <code>rvest</code> para extraer datos de páginas web. Hemos cubierto desde la lectura del HTML hasta la limpieza y transformación de los datos extraídos. Con esta base, puedes explorar más técnicas avanzadas y aplicaciones de web scraping en R.</p>
<p>En la próxima lección, abordaremos el manejo de APIs y JSON, lo que te permitirá acceder a datos estructurados de manera más eficiente y ética.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-03-working-large-datasets' title="Trabajo con Grandes Conjuntos de Datos">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-05-apis-json' title="APIs y JSON">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
