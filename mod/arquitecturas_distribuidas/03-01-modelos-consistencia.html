<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modelos de Consistencia</title>

    <link rel="alternate" href="https://campusempresa.com/mod/arquitecturas_distribuidas/03-01-modelos-consistencia" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/arquitecturas_distribuidas/03-01-models-consistencia" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/arquitecturas_distribuidas/03-01-consistency-models" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/arquitecturas_distribuidas/03-01-consistency-models" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/arquitecturas_distribuidas/03-01-models-consistencia" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-03-mensajeria-colas' title="Mensajería y Colas de Mensajes">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Modelos de Consistencia</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='03-02-algoritmos-consenso' title="Algoritmos de Consenso">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En este tema, exploraremos los diferentes modelos de consistencia en sistemas distribuidos. La consistencia es un aspecto crucial en el diseño de sistemas distribuidos, ya que define cómo se comportan las operaciones de lectura y escritura en presencia de réplicas de datos. A continuación, desglosaremos los conceptos clave, ejemplos prácticos y ejercicios para reforzar el aprendizaje.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'></div><h2><ol>
<li>Consistencia Estricta</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definición</strong>: Un sistema es estrictamente consistente si una lectura siempre devuelve el valor más reciente escrito.</li>
<li><strong>Características</strong>:
<ul>
<li>Garantiza que todas las operaciones de lectura y escritura son vistas en el mismo orden por todos los nodos.</li>
<li>Difícil de implementar en sistemas distribuidos debido a la latencia de red y la falta de un reloj global.</li>
</ul>
</li>
</ul>
</div><h2><ol start="2">
<li>Consistencia Linealizable</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definición</strong>: También conocida como consistencia secuencial fuerte, asegura que las operaciones parecen ocurrir instantáneamente en algún punto entre su inicio y finalización.</li>
<li><strong>Características</strong>:
<ul>
<li>Cada operación de lectura devuelve el valor más reciente escrito.</li>
<li>Proporciona una visión global consistente del sistema.</li>
</ul>
</li>
</ul>
</div><h2><ol start="3">
<li>Consistencia Secuencial</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definición</strong>: Un sistema es secuencialmente consistente si las operaciones de todos los procesos se intercalan de manera que respeten el orden de cada proceso individual.</li>
<li><strong>Características</strong>:
<ul>
<li>No garantiza que las operaciones de lectura devuelvan el valor más reciente.</li>
<li>Más fácil de implementar que la consistencia linealizable.</li>
</ul>
</li>
</ul>
</div><h2><ol start="4">
<li>Consistencia Causal</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definición</strong>: Asegura que las operaciones que son causalmente relacionadas se ven en el mismo orden por todos los nodos.</li>
<li><strong>Características</strong>:
<ul>
<li>Las operaciones concurrentes pueden ser vistas en diferentes órdenes por diferentes nodos.</li>
<li>Más relajada que la consistencia secuencial.</li>
</ul>
</li>
</ul>
</div><h2><ol start="5">
<li>Consistencia Eventual</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definición</strong>: Un sistema es eventualmente consistente si, en ausencia de nuevas actualizaciones, todas las réplicas convergen al mismo valor.</li>
<li><strong>Características</strong>:
<ul>
<li>No garantiza un orden específico de operaciones.</li>
<li>Utilizada en sistemas donde la disponibilidad es más crítica que la consistencia inmediata.</li>
</ul>
</li>
</ul>
</div><h1><p>Ejemplos Prácticos</p>
</h1>
<div class='content'></div><h2><p>Ejemplo 1: Consistencia Linealizable</p>
</h2>
<div class='content'><p>Imaginemos un sistema de base de datos distribuida con dos nodos, A y B. Si un cliente escribe un valor <code>x=10</code> en el nodo A y luego lee el valor de <code>x</code> en el nodo B, la consistencia linealizable garantiza que el cliente leerá <code>x=10</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBOb2RvIEEKZGF0YWJhc2Uud3JpdGUoJ3gnLCAxMCkKCiMgTm9kbyBCCnZhbHVlID0gZGF0YWJhc2UucmVhZCgneCcpCnByaW50KHZhbHVlKSAgIyBPdXRwdXQ6IDEw"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Nodo A
database.write('x', 10)

# Nodo B
value = database.read('x')
print(value)  # Output: 10</pre></div><div class='content'></div><h2><p>Ejemplo 2: Consistencia Eventual</p>
</h2>
<div class='content'><p>En un sistema de almacenamiento distribuido con tres nodos, A, B y C, si un cliente escribe <code>y=20</code> en el nodo A, y luego otro cliente lee <code>y</code> en el nodo B antes de que la actualización se propague, el cliente podría leer un valor antiguo. Sin embargo, eventualmente, todos los nodos convergerán y <code>y=20</code> será visible en todos los nodos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBOb2RvIEEKZGF0YWJhc2Uud3JpdGUoJ3knLCAyMCkKCiMgTm9kbyBCIChhbnRlcyBkZSBsYSBwcm9wYWdhY2nDs24pCnZhbHVlID0gZGF0YWJhc2UucmVhZCgneScpCnByaW50KHZhbHVlKSAgIyBPdXRwdXQ6IHZhbG9yIGFudGlndW8KCiMgTm9kbyBCIChkZXNwdcOpcyBkZSBsYSBwcm9wYWdhY2nDs24pCnZhbHVlID0gZGF0YWJhc2UucmVhZCgneScpCnByaW50KHZhbHVlKSAgIyBPdXRwdXQ6IDIw"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Nodo A
database.write('y', 20)

# Nodo B (antes de la propagaci&oacute;n)
value = database.read('y')
print(value)  # Output: valor antiguo

# Nodo B (despu&eacute;s de la propagaci&oacute;n)
value = database.read('y')
print(value)  # Output: 20</pre></div><div class='content'></div><h1><p>Ejercicios Prácticos</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Identificar Modelos de Consistencia</p>
</h2>
<div class='content'><p>Dado el siguiente escenario, identifica qué modelo de consistencia se está utilizando:</p>
<ol>
<li>Un sistema de chat donde los mensajes enviados por un usuario se muestran en el mismo orden para todos los participantes.</li>
<li>Un sistema de almacenamiento en caché donde las actualizaciones se propagan lentamente, pero eventualmente todos los nodos tienen el mismo valor.</li>
<li>Un sistema de base de datos donde las lecturas siempre devuelven el valor más reciente escrito.</li>
</ol>
<p><strong>Soluciones</strong>:</p>
<ol>
<li>Consistencia Secuencial</li>
<li>Consistencia Eventual</li>
<li>Consistencia Linealizable</li>
</ol>
</div><h2><p>Ejercicio 2: Implementar Consistencia Eventual</p>
</h2>
<div class='content'><p>Implementa un sistema de almacenamiento distribuido simple que garantice consistencia eventual. Usa un diccionario para simular el almacenamiento en cada nodo y una función para propagar las actualizaciones.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTm9kbzoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLmFsbWFjZW5hbWllbnRvID0ge30KICAgICAgICBzZWxmLnZlY2lub3MgPSBbXQoKICAgIGRlZiBlc2NyaWJpcihzZWxmLCBjbGF2ZSwgdmFsb3IpOgogICAgICAgIHNlbGYuYWxtYWNlbmFtaWVudG9bY2xhdmVdID0gdmFsb3IKICAgICAgICBzZWxmLnByb3BhZ2FyX2FjdHVhbGl6YWNpb24oY2xhdmUsIHZhbG9yKQoKICAgIGRlZiBsZWVyKHNlbGYsIGNsYXZlKToKICAgICAgICByZXR1cm4gc2VsZi5hbG1hY2VuYW1pZW50by5nZXQoY2xhdmUsIE5vbmUpCgogICAgZGVmIGFncmVnYXJfdmVjaW5vKHNlbGYsIHZlY2lubyk6CiAgICAgICAgc2VsZi52ZWNpbm9zLmFwcGVuZCh2ZWNpbm8pCgogICAgZGVmIHByb3BhZ2FyX2FjdHVhbGl6YWNpb24oc2VsZiwgY2xhdmUsIHZhbG9yKToKICAgICAgICBmb3IgdmVjaW5vIGluIHNlbGYudmVjaW5vczoKICAgICAgICAgICAgdmVjaW5vLnJlY2liaXJfYWN0dWFsaXphY2lvbihjbGF2ZSwgdmFsb3IpCgogICAgZGVmIHJlY2liaXJfYWN0dWFsaXphY2lvbihzZWxmLCBjbGF2ZSwgdmFsb3IpOgogICAgICAgIHNlbGYuYWxtYWNlbmFtaWVudG9bY2xhdmVdID0gdmFsb3IKCiMgQ3JlYXIgbm9kb3MKbm9kb0EgPSBOb2RvKCkKbm9kb0IgPSBOb2RvKCkKbm9kb0MgPSBOb2RvKCkKCiMgQ29uZWN0YXIgbm9kb3MKbm9kb0EuYWdyZWdhcl92ZWNpbm8obm9kb0IpCm5vZG9BLmFncmVnYXJfdmVjaW5vKG5vZG9DKQpub2RvQi5hZ3JlZ2FyX3ZlY2lubyhub2RvQSkKbm9kb0IuYWdyZWdhcl92ZWNpbm8obm9kb0MpCm5vZG9DLmFncmVnYXJfdmVjaW5vKG5vZG9BKQpub2RvQy5hZ3JlZ2FyX3ZlY2lubyhub2RvQikKCiMgRXNjcmliaXIgZW4gbm9kb0EKbm9kb0EuZXNjcmliaXIoJ3onLCAzMCkKCiMgTGVlciBlbiBub2RvQiB5IG5vZG9DCnByaW50KG5vZG9CLmxlZXIoJ3onKSkgICMgT3V0cHV0OiAzMApwcmludChub2RvQy5sZWVyKCd6JykpICAjIE91dHB1dDogMzA="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Nodo:
    def __init__(self):
        self.almacenamiento = {}
        self.vecinos = []

    def escribir(self, clave, valor):
        self.almacenamiento[clave] = valor
        self.propagar_actualizacion(clave, valor)

    def leer(self, clave):
        return self.almacenamiento.get(clave, None)

    def agregar_vecino(self, vecino):
        self.vecinos.append(vecino)

    def propagar_actualizacion(self, clave, valor):
        for vecino in self.vecinos:
            vecino.recibir_actualizacion(clave, valor)

    def recibir_actualizacion(self, clave, valor):
        self.almacenamiento[clave] = valor

# Crear nodos
nodoA = Nodo()
nodoB = Nodo()
nodoC = Nodo()

# Conectar nodos
nodoA.agregar_vecino(nodoB)
nodoA.agregar_vecino(nodoC)
nodoB.agregar_vecino(nodoA)
nodoB.agregar_vecino(nodoC)
nodoC.agregar_vecino(nodoA)
nodoC.agregar_vecino(nodoB)

# Escribir en nodoA
nodoA.escribir('z', 30)

# Leer en nodoB y nodoC
print(nodoB.leer('z'))  # Output: 30
print(nodoC.leer('z'))  # Output: 30</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta sección, hemos explorado varios modelos de consistencia en sistemas distribuidos, desde la consistencia estricta hasta la consistencia eventual. Cada modelo tiene sus propias características y trade-offs, y la elección del modelo adecuado depende de los requisitos específicos de la aplicación. A través de ejemplos y ejercicios prácticos, hemos visto cómo se pueden implementar y utilizar estos modelos en sistemas distribuidos. En el próximo tema, profundizaremos en los algoritmos de consenso, que son fundamentales para lograr consistencia en sistemas distribuidos.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-03-mensajeria-colas' title="Mensajería y Colas de Mensajes">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='03-02-algoritmos-consenso' title="Algoritmos de Consenso">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
