<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mensajería y Colas de Mensajes</title>

    <link rel="alternate" href="https://campusempresa.com/mod/arquitecturas_distribuidas/02-03-mensajeria-colas" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/arquitecturas_distribuidas/02-03-missatgeria-cues" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/arquitecturas_distribuidas/02-03-messaging-queues" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/arquitecturas_distribuidas/02-03-messaging-queues" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/arquitecturas_distribuidas/02-03-missatgeria-cues" class="px-2">CA</a>
<br>
			<cite>Construyendo la sociedad de hoy y del mañana</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Lenguajes de Programación</a>
				 					<a href="/categ/frameworks">Frameworks y Librerías</a>
				 					<a href="/categ/tech-tools">Herramientas Técnicas</a>
				 					<a href="/categ/foundations">Fundamentos Teóricos</a>
				 					<a href="/categ/soft-skills">Habilidades Sociales</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-02-rpc-rmi' title="RPC y RMI">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Mensajería y Colas de Mensajes</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-01-modelos-consistencia' title="Modelos de Consistencia">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introducción</p>
</h1>
<div class='content'><p>En los sistemas distribuidos, la comunicación entre diferentes componentes es crucial para el correcto funcionamiento del sistema. Una de las formas más eficientes y flexibles de manejar esta comunicación es a través de la mensajería y las colas de mensajes. Este tema cubre los conceptos básicos, las arquitecturas comunes y los patrones de diseño asociados con la mensajería y las colas de mensajes.</p>
</div><h1><p>Conceptos Básicos</p>
</h1>
<div class='content'></div><h2><p>Mensajería</p>
</h2>
<div class='content'><p>La mensajería es un método de comunicación entre diferentes componentes de un sistema distribuido mediante el intercambio de mensajes. Los mensajes pueden contener datos, comandos o cualquier otra información que necesite ser transmitida entre los componentes.</p>
</div><h2><p>Colas de Mensajes</p>
</h2>
<div class='content'><p>Las colas de mensajes son estructuras de datos que permiten almacenar mensajes de manera temporal hasta que puedan ser procesados por los componentes destinatarios. Las colas de mensajes desacoplan el remitente y el receptor, permitiendo que ambos operen de manera independiente y a su propio ritmo.</p>
</div><h2><p>Ventajas de la Mensajería y las Colas de Mensajes</p>
</h2>
<div class='content'><ul>
<li><strong>Desacoplamiento</strong>: Permiten que los componentes del sistema operen de manera independiente.</li>
<li><strong>Escalabilidad</strong>: Facilitan la distribución de la carga de trabajo entre múltiples componentes.</li>
<li><strong>Fiabilidad</strong>: Aseguran que los mensajes no se pierdan y sean procesados eventualmente.</li>
<li><strong>Flexibilidad</strong>: Soportan diferentes patrones de comunicación como punto a punto y publicación/suscripción.</li>
</ul>
</div><h1><p>Arquitecturas Comunes</p>
</h1>
<div class='content'></div><h2><p>Punto a Punto (Point-to-Point)</p>
</h2>
<div class='content'><p>En este modelo, un mensaje enviado por un remitente es recibido por un solo destinatario. Es útil para tareas que requieren procesamiento secuencial o exclusivo.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UmVtaXRlbnRlIC0+IENvbGEgZGUgTWVuc2FqZXMgLT4gUmVjZXB0b3I="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Remitente -&gt; Cola de Mensajes -&gt; Receptor</pre></div><div class='content'></div><h2><p>Publicación/Suscripción (Publish/Subscribe)</p>
</h2>
<div class='content'><p>En este modelo, un mensaje enviado por un remitente es recibido por múltiples destinatarios que se han suscrito a un tema o canal específico. Es útil para la distribución de eventos o notificaciones.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UmVtaXRlbnRlIC0+IFRlbWEvQ2FuYWwgLT4gU3VzY3JpcHRvcmVz"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Remitente -&gt; Tema/Canal -&gt; Suscriptores</pre></div><div class='content'></div><h1><p>Ejemplos de Sistemas de Mensajería</p>
</h1>
<div class='content'></div><h2><p>RabbitMQ</p>
</h2>
<div class='content'><p>RabbitMQ es un sistema de mensajería basado en el protocolo AMQP (Advanced Message Queuing Protocol). Es conocido por su fiabilidad y flexibilidad.</p>
</div><h2><p>Apache Kafka</p>
</h2>
<div class='content'><p>Apache Kafka es una plataforma de mensajería distribuida diseñada para manejar grandes volúmenes de datos en tiempo real. Es ideal para aplicaciones que requieren procesamiento de flujos de datos.</p>
</div><h1><p>Ejemplo Práctico con RabbitMQ</p>
</h1>
<div class='content'></div><h2><p>Instalación y Configuración</p>
</h2>
<div class='content'><p>Para instalar RabbitMQ, puedes seguir las instrucciones oficiales en <a href="https://www.rabbitmq.com/download.html">RabbitMQ Installation Guide</a>.</p>
</div><h2><p>Enviar y Recibir Mensajes</p>
</h2>
<div class='content'><p>A continuación, se muestra un ejemplo básico de cómo enviar y recibir mensajes utilizando RabbitMQ en Python.</p>
<h4>Enviar Mensaje</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHBpa2EKCiMgQ29uZXhpw7NuIGFsIHNlcnZpZG9yIFJhYmJpdE1RCmNvbm5lY3Rpb24gPSBwaWthLkJsb2NraW5nQ29ubmVjdGlvbihwaWthLkNvbm5lY3Rpb25QYXJhbWV0ZXJzKCdsb2NhbGhvc3QnKSkKY2hhbm5lbCA9IGNvbm5lY3Rpb24uY2hhbm5lbCgpCgojIERlY2xhcmFyIHVuYSBjb2xhCmNoYW5uZWwucXVldWVfZGVjbGFyZShxdWV1ZT0naGVsbG8nKQoKIyBFbnZpYXIgdW4gbWVuc2FqZQpjaGFubmVsLmJhc2ljX3B1Ymxpc2goZXhjaGFuZ2U9JycsIHJvdXRpbmdfa2V5PSdoZWxsbycsIGJvZHk9J0hlbGxvIFdvcmxkIScpCnByaW50KCIgW3hdIFNlbnQgJ0hlbGxvIFdvcmxkISciKQoKIyBDZXJyYXIgbGEgY29uZXhpw7NuCmNvbm5lY3Rpb24uY2xvc2UoKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import pika

# Conexi&oacute;n al servidor RabbitMQ
connection = pika.BlockingConnection(pika.ConnectionParameters('localhost'))
channel = connection.channel()

# Declarar una cola
channel.queue_declare(queue='hello')

# Enviar un mensaje
channel.basic_publish(exchange='', routing_key='hello', body='Hello World!')
print(&quot; [x] Sent 'Hello World!'&quot;)

# Cerrar la conexi&oacute;n
connection.close()</pre></div><div class='content'><h4>Recibir Mensaje</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHBpa2EKCiMgQ29uZXhpw7NuIGFsIHNlcnZpZG9yIFJhYmJpdE1RCmNvbm5lY3Rpb24gPSBwaWthLkJsb2NraW5nQ29ubmVjdGlvbihwaWthLkNvbm5lY3Rpb25QYXJhbWV0ZXJzKCdsb2NhbGhvc3QnKSkKY2hhbm5lbCA9IGNvbm5lY3Rpb24uY2hhbm5lbCgpCgojIERlY2xhcmFyIHVuYSBjb2xhCmNoYW5uZWwucXVldWVfZGVjbGFyZShxdWV1ZT0naGVsbG8nKQoKIyBEZWZpbmlyIHVuYSBmdW5jacOzbiBkZSBjYWxsYmFjayBwYXJhIHByb2Nlc2FyIGxvcyBtZW5zYWplcwpkZWYgY2FsbGJhY2soY2gsIG1ldGhvZCwgcHJvcGVydGllcywgYm9keSk6CiAgICBwcmludCgiIFt4XSBSZWNlaXZlZCAlciIgJSBib2R5KQoKIyBDb25maWd1cmFyIGVsIGNvbnN1bWlkb3IKY2hhbm5lbC5iYXNpY19jb25zdW1lKHF1ZXVlPSdoZWxsbycsIG9uX21lc3NhZ2VfY2FsbGJhY2s9Y2FsbGJhY2ssIGF1dG9fYWNrPVRydWUpCgpwcmludCgnIFsqXSBXYWl0aW5nIGZvciBtZXNzYWdlcy4gVG8gZXhpdCBwcmVzcyBDVFJMK0MnKQpjaGFubmVsLnN0YXJ0X2NvbnN1bWluZygp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import pika

# Conexi&oacute;n al servidor RabbitMQ
connection = pika.BlockingConnection(pika.ConnectionParameters('localhost'))
channel = connection.channel()

# Declarar una cola
channel.queue_declare(queue='hello')

# Definir una funci&oacute;n de callback para procesar los mensajes
def callback(ch, method, properties, body):
    print(&quot; [x] Received %r&quot; % body)

# Configurar el consumidor
channel.basic_consume(queue='hello', on_message_callback=callback, auto_ack=True)

print(' [*] Waiting for messages. To exit press CTRL+C')
channel.start_consuming()</pre></div><div class='content'></div><h2><p>Explicación del Código</p>
</h2>
<div class='content'><ol>
<li><strong>Conexión al Servidor</strong>: Se establece una conexión con el servidor RabbitMQ.</li>
<li><strong>Declaración de la Cola</strong>: Se declara una cola llamada <code>hello</code>.</li>
<li><strong>Envío de Mensaje</strong>: Se publica un mensaje en la cola <code>hello</code>.</li>
<li><strong>Recepción de Mensaje</strong>: Se configura un consumidor que espera mensajes en la cola <code>hello</code> y los procesa utilizando una función de callback.</li>
</ol>
</div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Implementar un Sistema de Mensajería Básico</p>
</h2>
<div class='content'><ol>
<li><strong>Objetivo</strong>: Implementar un sistema de mensajería básico utilizando RabbitMQ.</li>
<li><strong>Instrucciones</strong>:
<ul>
<li>Instala RabbitMQ en tu máquina local.</li>
<li>Crea un script en Python para enviar mensajes a una cola.</li>
<li>Crea otro script en Python para recibir y procesar mensajes de la cola.</li>
</ul>
</li>
<li><strong>Requisitos</strong>:
<ul>
<li>El remitente debe enviar al menos 5 mensajes diferentes.</li>
<li>El receptor debe imprimir cada mensaje recibido.</li>
</ul>
</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'><h4>Script de Envío</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHBpa2EKCmNvbm5lY3Rpb24gPSBwaWthLkJsb2NraW5nQ29ubmVjdGlvbihwaWthLkNvbm5lY3Rpb25QYXJhbWV0ZXJzKCdsb2NhbGhvc3QnKSkKY2hhbm5lbCA9IGNvbm5lY3Rpb24uY2hhbm5lbCgpCmNoYW5uZWwucXVldWVfZGVjbGFyZShxdWV1ZT0ndGVzdF9xdWV1ZScpCgptZXNzYWdlcyA9IFsnTWVzc2FnZSAxJywgJ01lc3NhZ2UgMicsICdNZXNzYWdlIDMnLCAnTWVzc2FnZSA0JywgJ01lc3NhZ2UgNSddCgpmb3IgbWVzc2FnZSBpbiBtZXNzYWdlczoKICAgIGNoYW5uZWwuYmFzaWNfcHVibGlzaChleGNoYW5nZT0nJywgcm91dGluZ19rZXk9J3Rlc3RfcXVldWUnLCBib2R5PW1lc3NhZ2UpCiAgICBwcmludChmIiBbeF0gU2VudCAne21lc3NhZ2V9JyIpCgpjb25uZWN0aW9uLmNsb3NlKCk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import pika

connection = pika.BlockingConnection(pika.ConnectionParameters('localhost'))
channel = connection.channel()
channel.queue_declare(queue='test_queue')

messages = ['Message 1', 'Message 2', 'Message 3', 'Message 4', 'Message 5']

for message in messages:
    channel.basic_publish(exchange='', routing_key='test_queue', body=message)
    print(f&quot; [x] Sent '{message}'&quot;)

connection.close()</pre></div><div class='content'><h4>Script de Recepción</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHBpa2EKCmNvbm5lY3Rpb24gPSBwaWthLkJsb2NraW5nQ29ubmVjdGlvbihwaWthLkNvbm5lY3Rpb25QYXJhbWV0ZXJzKCdsb2NhbGhvc3QnKSkKY2hhbm5lbCA9IGNvbm5lY3Rpb24uY2hhbm5lbCgpCmNoYW5uZWwucXVldWVfZGVjbGFyZShxdWV1ZT0ndGVzdF9xdWV1ZScpCgpkZWYgY2FsbGJhY2soY2gsIG1ldGhvZCwgcHJvcGVydGllcywgYm9keSk6CiAgICBwcmludChmIiBbeF0gUmVjZWl2ZWQge2JvZHl9IikKCmNoYW5uZWwuYmFzaWNfY29uc3VtZShxdWV1ZT0ndGVzdF9xdWV1ZScsIG9uX21lc3NhZ2VfY2FsbGJhY2s9Y2FsbGJhY2ssIGF1dG9fYWNrPVRydWUpCgpwcmludCgnIFsqXSBXYWl0aW5nIGZvciBtZXNzYWdlcy4gVG8gZXhpdCBwcmVzcyBDVFJMK0MnKQpjaGFubmVsLnN0YXJ0X2NvbnN1bWluZygp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import pika

connection = pika.BlockingConnection(pika.ConnectionParameters('localhost'))
channel = connection.channel()
channel.queue_declare(queue='test_queue')

def callback(ch, method, properties, body):
    print(f&quot; [x] Received {body}&quot;)

channel.basic_consume(queue='test_queue', on_message_callback=callback, auto_ack=True)

print(' [*] Waiting for messages. To exit press CTRL+C')
channel.start_consuming()</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta sección, hemos explorado los conceptos básicos de la mensajería y las colas de mensajes en sistemas distribuidos. Hemos visto cómo estas tecnologías pueden ayudar a desacoplar componentes, mejorar la escalabilidad y aumentar la fiabilidad del sistema. También hemos trabajado con un ejemplo práctico utilizando RabbitMQ para enviar y recibir mensajes. En el próximo módulo, profundizaremos en la consistencia y replicación de datos en sistemas distribuidos.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-02-rpc-rmi' title="RPC y RMI">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-01-modelos-consistencia' title="Modelos de Consistencia">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
