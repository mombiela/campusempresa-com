<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Páginas de Error Personalizadas</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nginx/02-03-custom-error-pages" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nginx/02-03-custom-error-pages" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nginx/02-03-custom-error-pages" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/nginx/02-03-custom-error-pages" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/nginx/02-03-custom-error-pages" class="px-2">CA</a>
								</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Contenido del curso</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competencias técnicas</a>
				<a href="/all/conocimientos">Conocimientos</a>
				<a href="/all/soft_skills">Competencias sociales</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-02-directory-listings' title="Listados de Directorios">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Páginas de Error Personalizadas</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-04-logging-log-formats' title="Registro y Formatos de Registro">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En este tema, aprenderemos cómo configurar páginas de error personalizadas en NGINX. Las páginas de error personalizadas son útiles para proporcionar una mejor experiencia de usuario cuando ocurren errores en el servidor, como el famoso &quot;404 Not Found&quot; o &quot;500 Internal Server Error&quot;.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'><ol>
<li><strong>Códigos de Estado HTTP</strong>: Son códigos de respuesta estándar dados por los servidores web en respuesta a una solicitud del cliente. Ejemplos comunes incluyen 404, 500, 502, etc.</li>
<li><strong>Directiva <code>error_page</code></strong>: Es la directiva de configuración en NGINX que se utiliza para definir páginas de error personalizadas.</li>
</ol>
</div><h1><p>Configuración de Páginas de Error Personalizadas</p>
</h1>
<div class='content'></div><h2><p>Paso 1: Crear las Páginas de Error Personalizadas</p>
</h2>
<div class='content'><p>Primero, necesitamos crear las páginas HTML que se mostrarán cuando ocurra un error. Por ejemplo, podemos crear una página <code>404.html</code> y una <code>500.html</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSAvdXNyL3NoYXJlL25naW54L2h0bWwvNDA0Lmh0bWwgLS0+CjwhRE9DVFlQRSBodG1sPgo8aHRtbCBsYW5nPSJlbiI+CjxoZWFkPgogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgPHRpdGxlPjQwNCBOb3QgRm91bmQ8L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGgxPjQwNCBOb3QgRm91bmQ8L2gxPgogICAgPHA+TG8gc2VudGltb3MsIGxhIHDDoWdpbmEgcXVlIGVzdMOhcyBidXNjYW5kbyBubyBzZSBwdWRvIGVuY29udHJhci48L3A+CjwvYm9keT4KPC9odG1sPg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- /usr/share/nginx/html/404.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;404 Not Found&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;404 Not Found&lt;/h1&gt;
    &lt;p&gt;Lo sentimos, la p&aacute;gina que est&aacute;s buscando no se pudo encontrar.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSAvdXNyL3NoYXJlL25naW54L2h0bWwvNTAwLmh0bWwgLS0+CjwhRE9DVFlQRSBodG1sPgo8aHRtbCBsYW5nPSJlbiI+CjxoZWFkPgogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgPHRpdGxlPjUwMCBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3I8L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGgxPjUwMCBJbnRlcm5hbCBTZXJ2ZXIgRXJyb3I8L2gxPgogICAgPHA+TG8gc2VudGltb3MsIGFsZ28gc2FsacOzIG1hbCBlbiBudWVzdHJvIHNlcnZpZG9yLjwvcD4KPC9ib2R5Pgo8L2h0bWw+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- /usr/share/nginx/html/500.html --&gt;
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;500 Internal Server Error&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;500 Internal Server Error&lt;/h1&gt;
    &lt;p&gt;Lo sentimos, algo sali&oacute; mal en nuestro servidor.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h2><p>Paso 2: Configurar NGINX para Usar las Páginas de Error Personalizadas</p>
</h2>
<div class='content'><p>Edita el archivo de configuración de NGINX, generalmente ubicado en <code>/etc/nginx/nginx.conf</code> o en un archivo de configuración de sitio específico en <code>/etc/nginx/sites-available/</code>.</p>
<p>Añade las siguientes directivas dentro del bloque <code>server</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIHNlcnZlcl9uYW1lIHR1X2RvbWluaW8uY29tOwoKICAgICMgT3RyYXMgY29uZmlndXJhY2lvbmVzLi4uCgogICAgIyBDb25maWd1cmFjacOzbiBkZSBww6FnaW5hcyBkZSBlcnJvciBwZXJzb25hbGl6YWRhcwogICAgZXJyb3JfcGFnZSA0MDQgLzQwNC5odG1sOwogICAgbG9jYXRpb24gPSAvNDA0Lmh0bWwgewogICAgICAgIHJvb3QgL3Vzci9zaGFyZS9uZ2lueC9odG1sOwogICAgICAgIGludGVybmFsOwogICAgfQoKICAgIGVycm9yX3BhZ2UgNTAwIDUwMiA1MDMgNTA0IC81MDAuaHRtbDsKICAgIGxvY2F0aW9uID0gLzUwMC5odG1sIHsKICAgICAgICByb290IC91c3Ivc2hhcmUvbmdpbngvaHRtbDsKICAgICAgICBpbnRlcm5hbDsKICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>server {
    listen 80;
    server_name tu_dominio.com;

    # Otras configuraciones...

    # Configuraci&oacute;n de p&aacute;ginas de error personalizadas
    error_page 404 /404.html;
    location = /404.html {
        root /usr/share/nginx/html;
        internal;
    }

    error_page 500 502 503 504 /500.html;
    location = /500.html {
        root /usr/share/nginx/html;
        internal;
    }
}</pre></div><div class='content'></div><h2><p>Explicación del Código</p>
</h2>
<div class='content'><ul>
<li><strong><code>error_page 404 /404.html;</code></strong>: Esta directiva le dice a NGINX que use la página <code>404.html</code> cuando ocurra un error 404.</li>
<li><strong><code>location = /404.html { ... }</code></strong>: Este bloque de configuración define cómo servir la página <code>404.html</code>. La directiva <code>root</code> especifica el directorio donde se encuentra la página. La directiva <code>internal</code> asegura que la página de error no sea accesible directamente desde el exterior.</li>
<li><strong><code>error_page 500 502 503 504 /500.html;</code></strong>: Similar a la configuración anterior, pero para errores 500, 502, 503 y 504.</li>
</ul>
</div><h2><p>Paso 3: Recargar la Configuración de NGINX</p>
</h2>
<div class='content'><p>Después de realizar los cambios en el archivo de configuración, recarga NGINX para aplicar los cambios:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBuZ2lueCAtcyByZWxvYWQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo nginx -s reload</pre></div><div class='content'></div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Configurar una Página de Error 403 Personalizada</p>
</h2>
<div class='content'><ol>
<li>Crea una página <code>403.html</code> en el directorio <code>/usr/share/nginx/html</code> con el siguiente contenido:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+NDAzIEZvcmJpZGRlbjwvdGl0bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8aDE+NDAzIEZvcmJpZGRlbjwvaDE+CiAgICA8cD5ObyB0aWVuZXMgcGVybWlzbyBwYXJhIGFjY2VkZXIgYSBlc3RlIHJlY3Vyc28uPC9wPgo8L2JvZHk+CjwvaHRtbD4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;403 Forbidden&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;403 Forbidden&lt;/h1&gt;
    &lt;p&gt;No tienes permiso para acceder a este recurso.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'><ol start="2">
<li>Edita el archivo de configuración de NGINX para incluir la página de error 403:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIHNlcnZlcl9uYW1lIHR1X2RvbWluaW8uY29tOwoKICAgICMgT3RyYXMgY29uZmlndXJhY2lvbmVzLi4uCgogICAgIyBDb25maWd1cmFjacOzbiBkZSBww6FnaW5hIGRlIGVycm9yIDQwMyBwZXJzb25hbGl6YWRhCiAgICBlcnJvcl9wYWdlIDQwMyAvNDAzLmh0bWw7CiAgICBsb2NhdGlvbiA9IC80MDMuaHRtbCB7CiAgICAgICAgcm9vdCAvdXNyL3NoYXJlL25naW54L2h0bWw7CiAgICAgICAgaW50ZXJuYWw7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>server {
    listen 80;
    server_name tu_dominio.com;

    # Otras configuraciones...

    # Configuraci&oacute;n de p&aacute;gina de error 403 personalizada
    error_page 403 /403.html;
    location = /403.html {
        root /usr/share/nginx/html;
        internal;
    }
}</pre></div><div class='content'><ol start="3">
<li>Recarga la configuración de NGINX:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBuZ2lueCAtcyByZWxvYWQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo nginx -s reload</pre></div><div class='content'></div><h2><p>Solución</p>
</h2>
<div class='content'><p>Si has seguido los pasos correctamente, ahora deberías tener una página de error 403 personalizada que se muestra cuando se produce un error 403.</p>
</div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta sección, hemos aprendido cómo configurar páginas de error personalizadas en NGINX. Esto no solo mejora la experiencia del usuario, sino que también puede proporcionar información útil y enlaces de navegación cuando algo sale mal. En el próximo tema, exploraremos cómo registrar y formatear los registros en NGINX para un mejor monitoreo y análisis.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-02-directory-listings' title="Listados de Directorios">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-04-logging-log-formats' title="Registro y Formatos de Registro">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
