<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mocking en Kotlin</title>

    <link rel="alternate" href="https://campusempresa.com/mod/kotlin/mocking-in-kotlin" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/kotlin/mocking-in-kotlin" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/kotlin/mocking-in-kotlin" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/kotlin/mocking-in-kotlin" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/kotlin/mocking-in-kotlin" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-with-kotlin'>&#x25C4;Pruebas Unitarias con Kotlin</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Mocking en Kotlin</a>
	</div>
	<div class='col-4 text-end'>
					<a href='debugging-techniques'>Técnicas de Depuración &#x25BA;</a>
			</div>
</div>
<div class='content'><p>El mocking es un concepto esencial en las pruebas unitarias, que permite a los desarrolladores simular el comportamiento de objetos y sistemas complejos. Este tema te guiará a través de los conceptos básicos del mocking en Kotlin, utilizando bibliotecas populares como Mockito y MockK, y proporcionará ejemplos prácticos y ejercicios para solidificar tu comprensión.</p>
</div><h1>Introducción al Mocking</h1>
<div class='content'><p>El mocking es el proceso de crear objetos que simulan el comportamiento de objetos reales. Esto es particularmente útil en las pruebas unitarias, donde se desea aislar la unidad de código que se está probando y evitar dependencias de sistemas externos o objetos complejos.</p>
<ul>
<li><strong>¿Por qué Mocking?</strong>
<ul>
<li>Aislar la unidad de código bajo prueba.</li>
<li>Simular objetos y sistemas complejos.</li>
<li>Controlar el comportamiento de las dependencias.</li>
<li>Mejorar la fiabilidad y el rendimiento de las pruebas.</li>
</ul>
</li>
</ul>
</div><h1>Bibliotecas de Mocking en Kotlin</h1>
<div class='content'><p>Kotlin soporta varias bibliotecas de mocking, siendo Mockito y MockK las más populares.</p>
</div><h2>Mockito</h2>
<div class='content'><p>Mockito es un framework de mocking ampliamente utilizado para Java, y puede ser usado en Kotlin con alguna configuración adicional.</p>
<h4>Configuración de Mockito</h4>
<p>Para usar Mockito en tu proyecto de Kotlin, añade las siguientes dependencias a tu archivo <code>build.gradle</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzIHsKICAgIHRlc3RJbXBsZW1lbnRhdGlvbiAib3JnLm1vY2tpdG86bW9ja2l0by1jb3JlOjMuKyIgLy8gVXNhIGxhIMO6bHRpbWEgdmVyc2nDs24KICAgIHRlc3RJbXBsZW1lbnRhdGlvbiAib3JnLm1vY2tpdG86bW9ja2l0by1pbmxpbmU6My4rIgogICAgdGVzdEltcGxlbWVudGF0aW9uICJvcmcuamV0YnJhaW5zLmtvdGxpbjprb3RsaW4tdGVzdDoxLisiIC8vIFVzYSBsYSDDumx0aW1hIHZlcnNpw7NuCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies {
    testImplementation &quot;org.mockito:mockito-core:3.+&quot; // Usa la &uacute;ltima versi&oacute;n
    testImplementation &quot;org.mockito:mockito-inline:3.+&quot;
    testImplementation &quot;org.jetbrains.kotlin:kotlin-test:1.+&quot; // Usa la &uacute;ltima versi&oacute;n
}</pre></div><div class='content'><h4>Ejemplo Básico de Mockito</h4>
<p>Aquí tienes un ejemplo simple de cómo usar Mockito para mockear una dependencia en Kotlin:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5qdW5pdC5UZXN0CmltcG9ydCBvcmcubW9ja2l0by5Nb2NraXRvLioKCmNsYXNzIFVzZXJTZXJ2aWNlVGVzdCB7CgogICAgQFRlc3QKICAgIGZ1biBgc2hvdWxkIHJldHVybiB1c2VyIGRldGFpbHNgKCkgewogICAgICAgIC8vIEFycmFuZ2UKICAgICAgICB2YWwgdXNlclJlcG9zaXRvcnkgPSBtb2NrKFVzZXJSZXBvc2l0b3J5OjpjbGFzcy5qYXZhKQogICAgICAgIHZhbCB1c2VyU2VydmljZSA9IFVzZXJTZXJ2aWNlKHVzZXJSZXBvc2l0b3J5KQogICAgICAgIHZhbCB1c2VyID0gVXNlcigiSm9obiIsICJEb2UiKQogICAgICAgIAogICAgICAgIGB3aGVuYCh1c2VyUmVwb3NpdG9yeS5nZXRVc2VyRGV0YWlscygiSm9obiIpKS50aGVuUmV0dXJuKHVzZXIpCgogICAgICAgIC8vIEFjdAogICAgICAgIHZhbCByZXN1bHQgPSB1c2VyU2VydmljZS5nZXRVc2VyRGV0YWlscygiSm9obiIpCgogICAgICAgIC8vIEFzc2VydAogICAgICAgIGFzc2VydChyZXN1bHQgPT0gdXNlcikKICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.junit.Test
import org.mockito.Mockito.*

class UserServiceTest {

    @Test
    fun `should return user details`() {
        // Arrange
        val userRepository = mock(UserRepository::class.java)
        val userService = UserService(userRepository)
        val user = User(&quot;John&quot;, &quot;Doe&quot;)
        
        `when`(userRepository.getUserDetails(&quot;John&quot;)).thenReturn(user)

        // Act
        val result = userService.getUserDetails(&quot;John&quot;)

        // Assert
        assert(result == user)
    }
}</pre></div><div class='content'><p>En este ejemplo:</p>
<ul>
<li>Mockeamos la dependencia <code>UserRepository</code>.</li>
<li>Definimos el comportamiento del mock usando <code>when</code> y <code>thenReturn</code>.</li>
<li>Verificamos el resultado usando aserciones.</li>
</ul>
</div><h2>MockK</h2>
<div class='content'><p>MockK es una biblioteca de mocking específica para Kotlin que proporciona una experiencia más idiomática en Kotlin.</p>
<h4>Configuración de MockK</h4>
<p>Para usar MockK en tu proyecto de Kotlin, añade las siguientes dependencias a tu archivo <code>build.gradle</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzIHsKICAgIHRlc3RJbXBsZW1lbnRhdGlvbiAiaW8ubW9ja2s6bW9ja2s6MS4rIiAvLyBVc2EgbGEgw7psdGltYSB2ZXJzacOzbgogICAgdGVzdEltcGxlbWVudGF0aW9uICJvcmcuamV0YnJhaW5zLmtvdGxpbjprb3RsaW4tdGVzdDoxLisiIC8vIFVzYSBsYSDDumx0aW1hIHZlcnNpw7NuCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies {
    testImplementation &quot;io.mockk:mockk:1.+&quot; // Usa la &uacute;ltima versi&oacute;n
    testImplementation &quot;org.jetbrains.kotlin:kotlin-test:1.+&quot; // Usa la &uacute;ltima versi&oacute;n
}</pre></div><div class='content'><h4>Ejemplo Básico de MockK</h4>
<p>Aquí tienes un ejemplo simple de cómo usar MockK para mockear una dependencia en Kotlin:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGlvLm1vY2trLmV2ZXJ5CmltcG9ydCBpby5tb2Nray5tb2NrawppbXBvcnQgaW8ubW9ja2sudmVyaWZ5CmltcG9ydCBvcmcuanVuaXQuVGVzdAoKY2xhc3MgVXNlclNlcnZpY2VUZXN0IHsKCiAgICBAVGVzdAogICAgZnVuIGBzaG91bGQgcmV0dXJuIHVzZXIgZGV0YWlsc2AoKSB7CiAgICAgICAgLy8gQXJyYW5nZQogICAgICAgIHZhbCB1c2VyUmVwb3NpdG9yeSA9IG1vY2trPFVzZXJSZXBvc2l0b3J5PigpCiAgICAgICAgdmFsIHVzZXJTZXJ2aWNlID0gVXNlclNlcnZpY2UodXNlclJlcG9zaXRvcnkpCiAgICAgICAgdmFsIHVzZXIgPSBVc2VyKCJKb2huIiwgIkRvZSIpCiAgICAgICAgCiAgICAgICAgZXZlcnkgeyB1c2VyUmVwb3NpdG9yeS5nZXRVc2VyRGV0YWlscygiSm9obiIpIH0gcmV0dXJucyB1c2VyCgogICAgICAgIC8vIEFjdAogICAgICAgIHZhbCByZXN1bHQgPSB1c2VyU2VydmljZS5nZXRVc2VyRGV0YWlscygiSm9obiIpCgogICAgICAgIC8vIEFzc2VydAogICAgICAgIGFzc2VydChyZXN1bHQgPT0gdXNlcikKICAgICAgICB2ZXJpZnkgeyB1c2VyUmVwb3NpdG9yeS5nZXRVc2VyRGV0YWlscygiSm9obiIpIH0KICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import io.mockk.every
import io.mockk.mockk
import io.mockk.verify
import org.junit.Test

class UserServiceTest {

    @Test
    fun `should return user details`() {
        // Arrange
        val userRepository = mockk&lt;UserRepository&gt;()
        val userService = UserService(userRepository)
        val user = User(&quot;John&quot;, &quot;Doe&quot;)
        
        every { userRepository.getUserDetails(&quot;John&quot;) } returns user

        // Act
        val result = userService.getUserDetails(&quot;John&quot;)

        // Assert
        assert(result == user)
        verify { userRepository.getUserDetails(&quot;John&quot;) }
    }
}</pre></div><div class='content'><p>En este ejemplo:</p>
<ul>
<li>Mockeamos la dependencia <code>UserRepository</code> usando <code>mockk</code>.</li>
<li>Definimos el comportamiento del mock usando <code>every</code> y <code>returns</code>.</li>
<li>Verificamos la interacción con el mock usando <code>verify</code>.</li>
</ul>
</div><h1>Técnicas Avanzadas de Mocking</h1>
<div class='content'></div><h2>Coincidencia de Argumentos</h2>
<div class='content'><p>Tanto Mockito como MockK soportan la coincidencia de argumentos, permitiéndote especificar condiciones para los argumentos de los métodos.</p>
<h4>Coincidencia de Argumentos en Mockito</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YHdoZW5gKHVzZXJSZXBvc2l0b3J5LmdldFVzZXJEZXRhaWxzKGFueVN0cmluZygpKSkudGhlblJldHVybih1c2VyKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>`when`(userRepository.getUserDetails(anyString())).thenReturn(user)</pre></div><div class='content'><h4>Coincidencia de Argumentos en MockK</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXZlcnkgeyB1c2VyUmVwb3NpdG9yeS5nZXRVc2VyRGV0YWlscyhhbnkoKSkgfSByZXR1cm5zIHVzZXI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>every { userRepository.getUserDetails(any()) } returns user</pre></div><div class='content'></div><h2>Verificación de Interacciones</h2>
<div class='content'><p>Puedes verificar que ciertas interacciones con los mocks ocurrieron.</p>
<h4>Verificación en Mockito</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmVyaWZ5KHVzZXJSZXBvc2l0b3J5KS5nZXRVc2VyRGV0YWlscygiSm9obiIp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>verify(userRepository).getUserDetails(&quot;John&quot;)</pre></div><div class='content'><h4>Verificación en MockK</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmVyaWZ5IHsgdXNlclJlcG9zaXRvcnkuZ2V0VXNlckRldGFpbHMoIkpvaG4iKSB9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>verify { userRepository.getUserDetails(&quot;John&quot;) }</pre></div><div class='content'></div><h2>Captura de Argumentos</h2>
<div class='content'><p>A veces, necesitas capturar argumentos pasados a métodos mockeados.</p>
<h4>Argument Captor en Mockito</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFsIGNhcHRvciA9IEFyZ3VtZW50Q2FwdG9yLmZvckNsYXNzKFN0cmluZzo6Y2xhc3MuamF2YSkKdmVyaWZ5KHVzZXJSZXBvc2l0b3J5KS5nZXRVc2VyRGV0YWlscyhjYXB0b3IuY2FwdHVyZSgpKQphc3NlcnQoY2FwdG9yLnZhbHVlID09ICJKb2huIik="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>val captor = ArgumentCaptor.forClass(String::class.java)
verify(userRepository).getUserDetails(captor.capture())
assert(captor.value == &quot;John&quot;)</pre></div><div class='content'><h4>Argument Captor en MockK</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFsIHNsb3QgPSBzbG90PFN0cmluZz4oKQp2ZXJpZnkgeyB1c2VyUmVwb3NpdG9yeS5nZXRVc2VyRGV0YWlscyhjYXB0dXJlKHNsb3QpKSB9CmFzc2VydChzbG90LmNhcHR1cmVkID09ICJKb2huIik="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>val slot = slot&lt;String&gt;()
verify { userRepository.getUserDetails(capture(slot)) }
assert(slot.captured == &quot;John&quot;)</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>El mocking es una técnica poderosa en las pruebas unitarias que te permite aislar la unidad de código bajo prueba y simular dependencias complejas. Kotlin soporta varias bibliotecas de mocking, siendo Mockito y MockK las más populares. Al entender los conceptos básicos y las técnicas avanzadas de mocking, puedes escribir pruebas más fiables y mantenibles para tus aplicaciones en Kotlin.</p>
</div><h2>Puntos Clave</h2>
<div class='content'><ul>
<li>El mocking ayuda a aislar la unidad de código bajo prueba.</li>
<li>Mockito y MockK son bibliotecas de mocking populares en Kotlin.</li>
<li>El mocking básico implica crear mocks, definir comportamientos y verificar interacciones.</li>
<li>Las técnicas avanzadas incluyen coincidencia de argumentos, verificación de interacciones y captura de argumentos.</li>
</ul>
<p>Practica usando estas técnicas en tus proyectos para obtener una comprensión más profunda y mejorar tus habilidades de prueba.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-with-kotlin'>&#x25C4;Pruebas Unitarias con Kotlin</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Mocking en Kotlin</a>
	</div>
	<div class='col-4 text-end'>
					<a href='debugging-techniques'>Técnicas de Depuración &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
