<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducción a la Persistencia</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flutter/07-01-introduction-to-persistence" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flutter/07-01-introduction-to-persistence" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flutter/07-01-introduction-to-persistence" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/flutter/07-01-introduction-to-persistence" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/flutter/07-01-introduction-to-persistence" class="px-2">CA</a>
								</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Contenido del curso</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competencias técnicas</a>
				<a href="/all/conocimientos">Conocimientos</a>
				<a href="/all/soft_skills">Competencias sociales</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-05-graphql-integration' title="Integración con GraphQL">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Introducción a la Persistencia</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-02-shared-preferences' title="Preferencias Compartidas">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>La persistencia de datos es un aspecto crucial en el desarrollo de aplicaciones, ya que permite almacenar y recuperar información de manera duradera. En Flutter, existen varias técnicas y herramientas para manejar la persistencia de datos, desde el almacenamiento de preferencias simples hasta el uso de bases de datos locales.</p>
</div><h1><p>Objetivos de Aprendizaje</p>
</h1>
<div class='content'><p>Al final de esta lección, deberías ser capaz de:</p>
<ol>
<li>Entender qué es la persistencia de datos y por qué es importante.</li>
<li>Conocer las diferentes opciones de persistencia disponibles en Flutter.</li>
<li>Implementar técnicas básicas de persistencia en una aplicación Flutter.</li>
</ol>
</div><h1><p>¿Qué es la Persistencia de Datos?</p>
</h1>
<div class='content'><p>La persistencia de datos se refiere a la capacidad de una aplicación para almacenar datos de manera que puedan ser recuperados y utilizados en el futuro, incluso después de que la aplicación se haya cerrado. Esto es esencial para muchas aplicaciones que necesitan mantener el estado del usuario, configuraciones, datos de usuario, etc.</p>
</div><h2><p>Tipos de Persistencia</p>
</h2>
<div class='content'><ol>
<li><strong>Persistencia en Memoria</strong>: Los datos se almacenan en la memoria RAM y se pierden cuando la aplicación se cierra.</li>
<li><strong>Persistencia en Disco</strong>: Los datos se almacenan en el almacenamiento del dispositivo y se mantienen incluso después de cerrar la aplicación.</li>
</ol>
</div><h1><p>Opciones de Persistencia en Flutter</p>
</h1>
<div class='content'><p>Flutter ofrece varias opciones para la persistencia de datos:</p>
<ol>
<li><strong>Preferencias Compartidas (Shared Preferences)</strong>: Ideal para almacenar datos simples como configuraciones de usuario.</li>
<li><strong>Almacenamiento de Archivos</strong>: Permite guardar y leer archivos en el sistema de archivos del dispositivo.</li>
<li><strong>Bases de Datos Locales</strong>: Utiliza SQLite o Hive para almacenar datos estructurados.</li>
<li><strong>Persistencia en la Nube</strong>: Utiliza servicios como Firebase para almacenar datos en la nube.</li>
</ol>
</div><h1><p>Ejemplo Práctico: Uso de Shared Preferences</p>
</h1>
<div class='content'><p>Vamos a ver un ejemplo básico de cómo usar Shared Preferences para almacenar y recuperar datos simples.</p>
</div><h2><p>Paso 1: Añadir Dependencia</p>
</h2>
<div class='content'><p>Primero, necesitamos añadir la dependencia <code>shared_preferences</code> en el archivo <code>pubspec.yaml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzOgogIGZsdXR0ZXI6CiAgICBzZGs6IGZsdXR0ZXIKICBzaGFyZWRfcHJlZmVyZW5jZXM6IF4yLjAuNg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies:
  flutter:
    sdk: flutter
  shared_preferences: ^2.0.6</pre></div><div class='content'></div><h2><p>Paso 2: Importar la Biblioteca</p>
</h2>
<div class='content'><p>Importa la biblioteca <code>shared_preferences</code> en tu archivo Dart:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOnNoYXJlZF9wcmVmZXJlbmNlcy9zaGFyZWRfcHJlZmVyZW5jZXMuZGFydCc7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:shared_preferences/shared_preferences.dart';</pre></div><div class='content'></div><h2><p>Paso 3: Guardar Datos</p>
</h2>
<div class='content'><p>Para guardar datos, utilizamos el método <code>setString</code>, <code>setInt</code>, <code>setBool</code>, etc., dependiendo del tipo de dato que queremos almacenar.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBzYXZlRGF0YSgpIGFzeW5jIHsKICBTaGFyZWRQcmVmZXJlbmNlcyBwcmVmcyA9IGF3YWl0IFNoYXJlZFByZWZlcmVuY2VzLmdldEluc3RhbmNlKCk7CiAgYXdhaXQgcHJlZnMuc2V0U3RyaW5nKCd1c2VybmFtZScsICdKb2huRG9lJyk7CiAgYXdhaXQgcHJlZnMuc2V0SW50KCdhZ2UnLCAzMCk7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void saveData() async {
  SharedPreferences prefs = await SharedPreferences.getInstance();
  await prefs.setString('username', 'JohnDoe');
  await prefs.setInt('age', 30);
}</pre></div><div class='content'></div><h2><p>Paso 4: Recuperar Datos</p>
</h2>
<div class='content'><p>Para recuperar datos, utilizamos los métodos <code>getString</code>, <code>getInt</code>, <code>getBool</code>, etc.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBsb2FkRGF0YSgpIGFzeW5jIHsKICBTaGFyZWRQcmVmZXJlbmNlcyBwcmVmcyA9IGF3YWl0IFNoYXJlZFByZWZlcmVuY2VzLmdldEluc3RhbmNlKCk7CiAgU3RyaW5nPyB1c2VybmFtZSA9IHByZWZzLmdldFN0cmluZygndXNlcm5hbWUnKTsKICBpbnQ/IGFnZSA9IHByZWZzLmdldEludCgnYWdlJyk7CiAgCiAgcHJpbnQoJ1VzZXJuYW1lOiAkdXNlcm5hbWUnKTsKICBwcmludCgnQWdlOiAkYWdlJyk7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void loadData() async {
  SharedPreferences prefs = await SharedPreferences.getInstance();
  String? username = prefs.getString('username');
  int? age = prefs.getInt('age');
  
  print('Username: $username');
  print('Age: $age');
}</pre></div><div class='content'></div><h2><p>Ejercicio Práctico</p>
</h2>
<div class='content'><p><strong>Objetivo</strong>: Implementar una pequeña aplicación que permita al usuario guardar y recuperar su nombre utilizando Shared Preferences.</p>
<ol>
<li>Crea una nueva aplicación Flutter.</li>
<li>Añade la dependencia <code>shared_preferences</code> en el archivo <code>pubspec.yaml</code>.</li>
<li>Crea una interfaz de usuario con un <code>TextField</code> para ingresar el nombre y un <code>RaisedButton</code> para guardar el nombre.</li>
<li>Implementa la lógica para guardar y recuperar el nombre utilizando Shared Preferences.</li>
</ol>
<p><strong>Solución</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpzaGFyZWRfcHJlZmVyZW5jZXMvc2hhcmVkX3ByZWZlcmVuY2VzLmRhcnQnOwoKdm9pZCBtYWluKCkgewogIHJ1bkFwcChNeUFwcCgpKTsKfQoKY2xhc3MgTXlBcHAgZXh0ZW5kcyBTdGF0ZWxlc3NXaWRnZXQgewogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgcmV0dXJuIE1hdGVyaWFsQXBwKAogICAgICBob21lOiBIb21lU2NyZWVuKCksCiAgICApOwogIH0KfQoKY2xhc3MgSG9tZVNjcmVlbiBleHRlbmRzIFN0YXRlZnVsV2lkZ2V0IHsKICBAb3ZlcnJpZGUKICBfSG9tZVNjcmVlblN0YXRlIGNyZWF0ZVN0YXRlKCkgPT4gX0hvbWVTY3JlZW5TdGF0ZSgpOwp9CgpjbGFzcyBfSG9tZVNjcmVlblN0YXRlIGV4dGVuZHMgU3RhdGU8SG9tZVNjcmVlbj4gewogIFRleHRFZGl0aW5nQ29udHJvbGxlciBfY29udHJvbGxlciA9IFRleHRFZGl0aW5nQ29udHJvbGxlcigpOwogIFN0cmluZyBfc2F2ZWROYW1lID0gJyc7CgogIEBvdmVycmlkZQogIHZvaWQgaW5pdFN0YXRlKCkgewogICAgc3VwZXIuaW5pdFN0YXRlKCk7CiAgICBfbG9hZE5hbWUoKTsKICB9CgogIHZvaWQgX3NhdmVOYW1lKCkgYXN5bmMgewogICAgU2hhcmVkUHJlZmVyZW5jZXMgcHJlZnMgPSBhd2FpdCBTaGFyZWRQcmVmZXJlbmNlcy5nZXRJbnN0YW5jZSgpOwogICAgYXdhaXQgcHJlZnMuc2V0U3RyaW5nKCduYW1lJywgX2NvbnRyb2xsZXIudGV4dCk7CiAgICBfbG9hZE5hbWUoKTsKICB9CgogIHZvaWQgX2xvYWROYW1lKCkgYXN5bmMgewogICAgU2hhcmVkUHJlZmVyZW5jZXMgcHJlZnMgPSBhd2FpdCBTaGFyZWRQcmVmZXJlbmNlcy5nZXRJbnN0YW5jZSgpOwogICAgc2V0U3RhdGUoKCkgewogICAgICBfc2F2ZWROYW1lID0gcHJlZnMuZ2V0U3RyaW5nKCduYW1lJykgPz8gJyc7CiAgICB9KTsKICB9CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgcmV0dXJuIFNjYWZmb2xkKAogICAgICBhcHBCYXI6IEFwcEJhcigKICAgICAgICB0aXRsZTogVGV4dCgnUGVyc2lzdGVuY2lhIGNvbiBTaGFyZWQgUHJlZmVyZW5jZXMnKSwKICAgICAgKSwKICAgICAgYm9keTogUGFkZGluZygKICAgICAgICBwYWRkaW5nOiBjb25zdCBFZGdlSW5zZXRzLmFsbCgxNi4wKSwKICAgICAgICBjaGlsZDogQ29sdW1uKAogICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgVGV4dEZpZWxkKAogICAgICAgICAgICAgIGNvbnRyb2xsZXI6IF9jb250cm9sbGVyLAogICAgICAgICAgICAgIGRlY29yYXRpb246IElucHV0RGVjb3JhdGlvbihsYWJlbFRleHQ6ICdJbmdyZXNhIHR1IG5vbWJyZScpLAogICAgICAgICAgICApLAogICAgICAgICAgICBTaXplZEJveChoZWlnaHQ6IDIwKSwKICAgICAgICAgICAgRWxldmF0ZWRCdXR0b24oCiAgICAgICAgICAgICAgb25QcmVzc2VkOiBfc2F2ZU5hbWUsCiAgICAgICAgICAgICAgY2hpbGQ6IFRleHQoJ0d1YXJkYXIgTm9tYnJlJyksCiAgICAgICAgICAgICksCiAgICAgICAgICAgIFNpemVkQm94KGhlaWdodDogMjApLAogICAgICAgICAgICBUZXh0KCdOb21icmUgZ3VhcmRhZG86ICRfc2F2ZWROYW1lJyksCiAgICAgICAgICBdLAogICAgICAgICksCiAgICAgICksCiAgICApOwogIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter/material.dart';
import 'package:shared_preferences/shared_preferences.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: HomeScreen(),
    );
  }
}

class HomeScreen extends StatefulWidget {
  @override
  _HomeScreenState createState() =&gt; _HomeScreenState();
}

class _HomeScreenState extends State&lt;HomeScreen&gt; {
  TextEditingController _controller = TextEditingController();
  String _savedName = '';

  @override
  void initState() {
    super.initState();
    _loadName();
  }

  void _saveName() async {
    SharedPreferences prefs = await SharedPreferences.getInstance();
    await prefs.setString('name', _controller.text);
    _loadName();
  }

  void _loadName() async {
    SharedPreferences prefs = await SharedPreferences.getInstance();
    setState(() {
      _savedName = prefs.getString('name') ?? '';
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Persistencia con Shared Preferences'),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          children: [
            TextField(
              controller: _controller,
              decoration: InputDecoration(labelText: 'Ingresa tu nombre'),
            ),
            SizedBox(height: 20),
            ElevatedButton(
              onPressed: _saveName,
              child: Text('Guardar Nombre'),
            ),
            SizedBox(height: 20),
            Text('Nombre guardado: $_savedName'),
          ],
        ),
      ),
    );
  }
}</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta lección, hemos aprendido qué es la persistencia de datos y por qué es importante en el desarrollo de aplicaciones. También hemos explorado las diferentes opciones de persistencia disponibles en Flutter y hemos implementado un ejemplo práctico utilizando Shared Preferences. En las próximas lecciones, profundizaremos en otras técnicas de persistencia como el almacenamiento de archivos y el uso de bases de datos locales.</p>
<p>¡Continúa con la siguiente lección para aprender más sobre cómo manejar la persistencia de datos en Flutter!</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-05-graphql-integration' title="Integración con GraphQL">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-02-shared-preferences' title="Preferencias Compartidas">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
