<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Almacenamiento de Archivos</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flutter/07-03-file-storage" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flutter/07-03-file-storage" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flutter/07-03-file-storage" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/flutter/07-03-file-storage" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/flutter/07-03-file-storage" class="px-2">CA</a>
								</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Contenido del curso</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competencias técnicas</a>
				<a href="/all/conocimientos">Conocimientos</a>
				<a href="/all/soft_skills">Competencias sociales</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-02-shared-preferences' title="Preferencias Compartidas">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Almacenamiento de Archivos</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-04-sqlite-database' title="Base de Datos SQLite">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En esta sección, aprenderemos cómo manejar el almacenamiento de archivos en Flutter. El almacenamiento de archivos es crucial para muchas aplicaciones que necesitan guardar datos de manera persistente. Exploraremos cómo leer y escribir archivos en el sistema de archivos local del dispositivo.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'><ol>
<li><strong>Directorio de Aplicación</strong>: El lugar donde la aplicación puede almacenar archivos.</li>
<li><strong>Paquete <code>path_provider</code></strong>: Un paquete de Flutter que proporciona una forma fácil de acceder a los directorios comunes del sistema de archivos.</li>
<li><strong>Operaciones de Archivo</strong>: Leer, escribir, eliminar y listar archivos.</li>
</ol>
</div><h1><p>Configuración Inicial</p>
</h1>
<div class='content'><p>Para trabajar con archivos en Flutter, primero necesitamos agregar el paquete <code>path_provider</code> a nuestro proyecto. Este paquete nos ayuda a localizar los directorios donde podemos almacenar archivos.</p>
</div><h2><p>Paso 1: Agregar Dependencia</p>
</h2>
<div class='content'><p>Abre el archivo <code>pubspec.yaml</code> y agrega la dependencia <code>path_provider</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzOgogIGZsdXR0ZXI6CiAgICBzZGs6IGZsdXR0ZXIKICBwYXRoX3Byb3ZpZGVyOiBeMi4wLjI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies:
  flutter:
    sdk: flutter
  path_provider: ^2.0.2</pre></div><div class='content'><p>Luego, ejecuta <code>flutter pub get</code> para instalar el paquete.</p>
</div><h2><p>Paso 2: Importar el Paquete</p>
</h2>
<div class='content'><p>Importa el paquete <code>path_provider</code> en tu archivo Dart:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOnBhdGhfcHJvdmlkZXIvcGF0aF9wcm92aWRlci5kYXJ0JzsKaW1wb3J0ICdkYXJ0OmlvJzs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:path_provider/path_provider.dart';
import 'dart:io';</pre></div><div class='content'></div><h1><p>Escribir en un Archivo</p>
</h1>
<div class='content'><p>Para escribir datos en un archivo, primero necesitamos obtener el directorio donde queremos guardar el archivo y luego escribir los datos.</p>
</div><h2><p>Ejemplo: Guardar Texto en un Archivo</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RnV0dXJlPFN0cmluZz4gZ2V0IF9sb2NhbFBhdGggYXN5bmMgewogIGZpbmFsIGRpcmVjdG9yeSA9IGF3YWl0IGdldEFwcGxpY2F0aW9uRG9jdW1lbnRzRGlyZWN0b3J5KCk7CiAgcmV0dXJuIGRpcmVjdG9yeS5wYXRoOwp9CgpGdXR1cmU8RmlsZT4gZ2V0IF9sb2NhbEZpbGUgYXN5bmMgewogIGZpbmFsIHBhdGggPSBhd2FpdCBfbG9jYWxQYXRoOwogIHJldHVybiBGaWxlKCckcGF0aC9kZW1vLnR4dCcpOwp9CgpGdXR1cmU8RmlsZT4gd3JpdGVDb250ZW50KFN0cmluZyBjb250ZW50KSBhc3luYyB7CiAgZmluYWwgZmlsZSA9IGF3YWl0IF9sb2NhbEZpbGU7CiAgcmV0dXJuIGZpbGUud3JpdGVBc1N0cmluZyhjb250ZW50KTsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Future&lt;String&gt; get _localPath async {
  final directory = await getApplicationDocumentsDirectory();
  return directory.path;
}

Future&lt;File&gt; get _localFile async {
  final path = await _localPath;
  return File('$path/demo.txt');
}

Future&lt;File&gt; writeContent(String content) async {
  final file = await _localFile;
  return file.writeAsString(content);
}</pre></div><div class='content'></div><h2><p>Explicación</p>
</h2>
<div class='content'><ol>
<li><strong>Obtener el Directorio</strong>: <code>getApplicationDocumentsDirectory()</code> obtiene el directorio donde la aplicación puede almacenar archivos.</li>
<li><strong>Crear el Archivo</strong>: <code>File('$path/demo.txt')</code> crea una referencia al archivo <code>demo.txt</code> en el directorio obtenido.</li>
<li><strong>Escribir en el Archivo</strong>: <code>file.writeAsString(content)</code> escribe el contenido en el archivo.</li>
</ol>
</div><h1><p>Leer desde un Archivo</p>
</h1>
<div class='content'><p>Para leer datos de un archivo, necesitamos abrir el archivo y leer su contenido.</p>
</div><h2><p>Ejemplo: Leer Texto desde un Archivo</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RnV0dXJlPFN0cmluZz4gcmVhZENvbnRlbnQoKSBhc3luYyB7CiAgdHJ5IHsKICAgIGZpbmFsIGZpbGUgPSBhd2FpdCBfbG9jYWxGaWxlOwogICAgU3RyaW5nIGNvbnRlbnRzID0gYXdhaXQgZmlsZS5yZWFkQXNTdHJpbmcoKTsKICAgIHJldHVybiBjb250ZW50czsKICB9IGNhdGNoIChlKSB7CiAgICByZXR1cm4gJ0Vycm9yIGFsIGxlZXIgZWwgYXJjaGl2bzogJGUnOwogIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Future&lt;String&gt; readContent() async {
  try {
    final file = await _localFile;
    String contents = await file.readAsString();
    return contents;
  } catch (e) {
    return 'Error al leer el archivo: $e';
  }
}</pre></div><div class='content'></div><h2><p>Explicación</p>
</h2>
<div class='content'><ol>
<li><strong>Abrir el Archivo</strong>: <code>await _localFile</code> obtiene la referencia al archivo.</li>
<li><strong>Leer el Contenido</strong>: <code>file.readAsString()</code> lee el contenido del archivo como una cadena de texto.</li>
<li><strong>Manejo de Errores</strong>: Si ocurre un error al leer el archivo, se captura y se devuelve un mensaje de error.</li>
</ol>
</div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Guardar y Leer Notas</p>
</h2>
<div class='content'><p>Crea una aplicación simple que permita al usuario escribir notas y guardarlas en un archivo. Luego, permite al usuario leer las notas guardadas.</p>
<h4>Pasos</h4>
<ol>
<li><strong>Crear la Interfaz de Usuario</strong>: Un <code>TextField</code> para escribir la nota y un <code>RaisedButton</code> para guardar la nota.</li>
<li><strong>Guardar la Nota</strong>: Usa la función <code>writeContent</code> para guardar la nota en un archivo.</li>
<li><strong>Leer la Nota</strong>: Usa la función <code>readContent</code> para leer la nota del archivo y mostrarla en la pantalla.</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpwYXRoX3Byb3ZpZGVyL3BhdGhfcHJvdmlkZXIuZGFydCc7CmltcG9ydCAnZGFydDppbyc7Cgp2b2lkIG1haW4oKSA9PiBydW5BcHAoTXlBcHAoKSk7CgpjbGFzcyBNeUFwcCBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gTWF0ZXJpYWxBcHAoCiAgICAgIGhvbWU6IE5vdGVBcHAoKSwKICAgICk7CiAgfQp9CgpjbGFzcyBOb3RlQXBwIGV4dGVuZHMgU3RhdGVmdWxXaWRnZXQgewogIEBvdmVycmlkZQogIF9Ob3RlQXBwU3RhdGUgY3JlYXRlU3RhdGUoKSA9PiBfTm90ZUFwcFN0YXRlKCk7Cn0KCmNsYXNzIF9Ob3RlQXBwU3RhdGUgZXh0ZW5kcyBTdGF0ZTxOb3RlQXBwPiB7CiAgZmluYWwgVGV4dEVkaXRpbmdDb250cm9sbGVyIF9jb250cm9sbGVyID0gVGV4dEVkaXRpbmdDb250cm9sbGVyKCk7CiAgU3RyaW5nIF9ub3RlID0gJyc7CgogIEZ1dHVyZTxTdHJpbmc+IGdldCBfbG9jYWxQYXRoIGFzeW5jIHsKICAgIGZpbmFsIGRpcmVjdG9yeSA9IGF3YWl0IGdldEFwcGxpY2F0aW9uRG9jdW1lbnRzRGlyZWN0b3J5KCk7CiAgICByZXR1cm4gZGlyZWN0b3J5LnBhdGg7CiAgfQoKICBGdXR1cmU8RmlsZT4gZ2V0IF9sb2NhbEZpbGUgYXN5bmMgewogICAgZmluYWwgcGF0aCA9IGF3YWl0IF9sb2NhbFBhdGg7CiAgICByZXR1cm4gRmlsZSgnJHBhdGgvbm90ZS50eHQnKTsKICB9CgogIEZ1dHVyZTxGaWxlPiB3cml0ZUNvbnRlbnQoU3RyaW5nIGNvbnRlbnQpIGFzeW5jIHsKICAgIGZpbmFsIGZpbGUgPSBhd2FpdCBfbG9jYWxGaWxlOwogICAgcmV0dXJuIGZpbGUud3JpdGVBc1N0cmluZyhjb250ZW50KTsKICB9CgogIEZ1dHVyZTxTdHJpbmc+IHJlYWRDb250ZW50KCkgYXN5bmMgewogICAgdHJ5IHsKICAgICAgZmluYWwgZmlsZSA9IGF3YWl0IF9sb2NhbEZpbGU7CiAgICAgIFN0cmluZyBjb250ZW50cyA9IGF3YWl0IGZpbGUucmVhZEFzU3RyaW5nKCk7CiAgICAgIHJldHVybiBjb250ZW50czsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuICdFcnJvciBhbCBsZWVyIGVsIGFyY2hpdm86ICRlJzsKICAgIH0KICB9CgogIHZvaWQgX3NhdmVOb3RlKCkgewogICAgd3JpdGVDb250ZW50KF9jb250cm9sbGVyLnRleHQpOwogIH0KCiAgdm9pZCBfbG9hZE5vdGUoKSBhc3luYyB7CiAgICBTdHJpbmcgbm90ZSA9IGF3YWl0IHJlYWRDb250ZW50KCk7CiAgICBzZXRTdGF0ZSgoKSB7CiAgICAgIF9ub3RlID0gbm90ZTsKICAgIH0pOwogIH0KCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gU2NhZmZvbGQoCiAgICAgIGFwcEJhcjogQXBwQmFyKAogICAgICAgIHRpdGxlOiBUZXh0KCdOb3RhcycpLAogICAgICApLAogICAgICBib2R5OiBQYWRkaW5nKAogICAgICAgIHBhZGRpbmc6IGNvbnN0IEVkZ2VJbnNldHMuYWxsKDE2LjApLAogICAgICAgIGNoaWxkOiBDb2x1bW4oCiAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICBUZXh0RmllbGQoCiAgICAgICAgICAgICAgY29udHJvbGxlcjogX2NvbnRyb2xsZXIsCiAgICAgICAgICAgICAgZGVjb3JhdGlvbjogSW5wdXREZWNvcmF0aW9uKGxhYmVsVGV4dDogJ0VzY3JpYmUgdHUgbm90YScpLAogICAgICAgICAgICApLAogICAgICAgICAgICBTaXplZEJveChoZWlnaHQ6IDIwKSwKICAgICAgICAgICAgRWxldmF0ZWRCdXR0b24oCiAgICAgICAgICAgICAgb25QcmVzc2VkOiBfc2F2ZU5vdGUsCiAgICAgICAgICAgICAgY2hpbGQ6IFRleHQoJ0d1YXJkYXIgTm90YScpLAogICAgICAgICAgICApLAogICAgICAgICAgICBTaXplZEJveChoZWlnaHQ6IDIwKSwKICAgICAgICAgICAgRWxldmF0ZWRCdXR0b24oCiAgICAgICAgICAgICAgb25QcmVzc2VkOiBfbG9hZE5vdGUsCiAgICAgICAgICAgICAgY2hpbGQ6IFRleHQoJ0NhcmdhciBOb3RhJyksCiAgICAgICAgICAgICksCiAgICAgICAgICAgIFNpemVkQm94KGhlaWdodDogMjApLAogICAgICAgICAgICBUZXh0KF9ub3RlKSwKICAgICAgICAgIF0sCiAgICAgICAgKSwKICAgICAgKSwKICAgICk7CiAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter/material.dart';
import 'package:path_provider/path_provider.dart';
import 'dart:io';

void main() =&gt; runApp(MyApp());

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: NoteApp(),
    );
  }
}

class NoteApp extends StatefulWidget {
  @override
  _NoteAppState createState() =&gt; _NoteAppState();
}

class _NoteAppState extends State&lt;NoteApp&gt; {
  final TextEditingController _controller = TextEditingController();
  String _note = '';

  Future&lt;String&gt; get _localPath async {
    final directory = await getApplicationDocumentsDirectory();
    return directory.path;
  }

  Future&lt;File&gt; get _localFile async {
    final path = await _localPath;
    return File('$path/note.txt');
  }

  Future&lt;File&gt; writeContent(String content) async {
    final file = await _localFile;
    return file.writeAsString(content);
  }

  Future&lt;String&gt; readContent() async {
    try {
      final file = await _localFile;
      String contents = await file.readAsString();
      return contents;
    } catch (e) {
      return 'Error al leer el archivo: $e';
    }
  }

  void _saveNote() {
    writeContent(_controller.text);
  }

  void _loadNote() async {
    String note = await readContent();
    setState(() {
      _note = note;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Notas'),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          children: [
            TextField(
              controller: _controller,
              decoration: InputDecoration(labelText: 'Escribe tu nota'),
            ),
            SizedBox(height: 20),
            ElevatedButton(
              onPressed: _saveNote,
              child: Text('Guardar Nota'),
            ),
            SizedBox(height: 20),
            ElevatedButton(
              onPressed: _loadNote,
              child: Text('Cargar Nota'),
            ),
            SizedBox(height: 20),
            Text(_note),
          ],
        ),
      ),
    );
  }
}</pre></div><div class='content'></div><h2><p>Explicación</p>
</h2>
<div class='content'><ol>
<li><strong>Interfaz de Usuario</strong>: Un <code>TextField</code> para escribir la nota y dos <code>ElevatedButton</code> para guardar y cargar la nota.</li>
<li><strong>Guardar la Nota</strong>: La función <code>_saveNote</code> llama a <code>writeContent</code> para guardar el texto del <code>TextField</code> en un archivo.</li>
<li><strong>Leer la Nota</strong>: La función <code>_loadNote</code> llama a <code>readContent</code> para leer el contenido del archivo y lo muestra en la pantalla.</li>
</ol>
</div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta sección, hemos aprendido cómo manejar el almacenamiento de archivos en Flutter utilizando el paquete <code>path_provider</code>. Hemos cubierto cómo escribir y leer archivos, y hemos implementado una aplicación práctica para guardar y leer notas. Estos conceptos son fundamentales para cualquier aplicación que necesite almacenar datos de manera persistente. En la siguiente sección, exploraremos cómo trabajar con bases de datos locales utilizando SQLite.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-02-shared-preferences' title="Preferencias Compartidas">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-04-sqlite-database' title="Base de Datos SQLite">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
