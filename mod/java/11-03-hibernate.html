<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hibernate</title>

    <link rel="alternate" href="https://campusempresa.com/mod/java/11-03-hibernate" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/java/11-03-hibernate" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/java/11-03-hibernate" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/java/11-03-hibernate" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/java/11-03-hibernate" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='11-02-spring-framework' title="Spring Framework">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Hibernate</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='11-04-junit' title="JUnit">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Hibernate es un framework de mapeo objeto-relacional (ORM) para Java. Facilita la tarea de trabajar con bases de datos relacionales mediante la abstracción de las operaciones de base de datos en objetos Java. En este módulo, aprenderás los conceptos básicos y avanzados de Hibernate, cómo configurarlo y cómo utilizarlo para interactuar con bases de datos.</p>
</div><h1>Contenido</h1>
<div class='content'><ol>
<li><a href="#introducción-a-hibernate">Introducción a Hibernate</a></li>
<li><a href="#configuración-de-hibernate">Configuración de Hibernate</a></li>
<li><a href="#mapeo-de-entidades">Mapeo de Entidades</a></li>
<li><a href="#consultas-con-hibernate">Consultas con Hibernate</a></li>
<li><a href="#relaciones-entre-entidades">Relaciones entre Entidades</a></li>
<li><a href="#transacciones-y-concurrencia">Transacciones y Concurrencia</a></li>
<li><a href="#caché-en-hibernate">Caché en Hibernate</a></li>
<li><a href="#ejercicios-prácticos">Ejercicios Prácticos</a></li>
</ol>
</div><h1>Introducción a Hibernate</h1>
<div class='content'><p>Hibernate es un framework ORM que permite a los desarrolladores mapear clases Java a tablas de bases de datos y viceversa. Esto simplifica el desarrollo de aplicaciones que interactúan con bases de datos, ya que elimina la necesidad de escribir código SQL manualmente.</p>
</div><h2>Ventajas de Hibernate</h2>
<div class='content'><ul>
<li><strong>Independencia de la base de datos</strong>: Hibernate soporta múltiples bases de datos y permite cambiar de una a otra con mínima configuración.</li>
<li><strong>Reducción de código SQL</strong>: Hibernate genera automáticamente las consultas SQL necesarias.</li>
<li><strong>Gestión de transacciones</strong>: Hibernate facilita la gestión de transacciones y la concurrencia.</li>
<li><strong>Caché</strong>: Hibernate incluye mecanismos de caché para mejorar el rendimiento.</li>
</ul>
</div><h1>Configuración de Hibernate</h1>
<div class='content'><p>Para empezar a usar Hibernate, necesitas configurar tu proyecto y proporcionar la información necesaria para conectarte a la base de datos.</p>
</div><h2>Dependencias</h2>
<div class='content'><p>Primero, agrega las dependencias de Hibernate y la base de datos en tu archivo <code>pom.xml</code> si estás usando Maven:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY2llcz4KICAgIDxkZXBlbmRlbmN5PgogICAgICAgIDxncm91cElkPm9yZy5oaWJlcm5hdGU8L2dyb3VwSWQ+CiAgICAgICAgPGFydGlmYWN0SWQ+aGliZXJuYXRlLWNvcmU8L2FydGlmYWN0SWQ+CiAgICAgICAgPHZlcnNpb24+NS40LjMwLkZpbmFsPC92ZXJzaW9uPgogICAgPC9kZXBlbmRlbmN5PgogICAgPGRlcGVuZGVuY3k+CiAgICAgICAgPGdyb3VwSWQ+bXlzcWw8L2dyb3VwSWQ+CiAgICAgICAgPGFydGlmYWN0SWQ+bXlzcWwtY29ubmVjdG9yLWphdmE8L2FydGlmYWN0SWQ+CiAgICAgICAgPHZlcnNpb24+OC4wLjIzPC92ZXJzaW9uPgogICAgPC9kZXBlbmRlbmN5Pgo8L2RlcGVuZGVuY2llcz4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;
        &lt;version&gt;5.4.30.Final&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;version&gt;8.0.23&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;</pre></div><div class='content'></div><h2>Archivo de Configuración</h2>
<div class='content'><p>Crea un archivo <code>hibernate.cfg.xml</code> en tu carpeta de recursos (<code>src/main/resources</code>):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGhpYmVybmF0ZS1jb25maWd1cmF0aW9uIFBVQkxJQyAiLS8vSGliZXJuYXRlL0hpYmVybmF0ZSBDb25maWd1cmF0aW9uIERURCAzLjAvL0VOIiAiaHR0cDovL2hpYmVybmF0ZS5zb3VyY2Vmb3JnZS5uZXQvaGliZXJuYXRlLWNvbmZpZ3VyYXRpb24tMy4wLmR0ZCI+CjxoaWJlcm5hdGUtY29uZmlndXJhdGlvbj4KICAgIDxzZXNzaW9uLWZhY3Rvcnk+CiAgICAgICAgPHByb3BlcnR5IG5hbWU9ImhpYmVybmF0ZS5kaWFsZWN0Ij5vcmcuaGliZXJuYXRlLmRpYWxlY3QuTXlTUUxEaWFsZWN0PC9wcm9wZXJ0eT4KICAgICAgICA8cHJvcGVydHkgbmFtZT0iaGliZXJuYXRlLmNvbm5lY3Rpb24uZHJpdmVyX2NsYXNzIj5jb20ubXlzcWwuY2ouamRiYy5Ecml2ZXI8L3Byb3BlcnR5PgogICAgICAgIDxwcm9wZXJ0eSBuYW1lPSJoaWJlcm5hdGUuY29ubmVjdGlvbi51cmwiPmpkYmM6bXlzcWw6Ly9sb2NhbGhvc3Q6MzMwNi9taV9iYXNlX2RlX2RhdG9zPC9wcm9wZXJ0eT4KICAgICAgICA8cHJvcGVydHkgbmFtZT0iaGliZXJuYXRlLmNvbm5lY3Rpb24udXNlcm5hbWUiPnVzdWFyaW88L3Byb3BlcnR5PgogICAgICAgIDxwcm9wZXJ0eSBuYW1lPSJoaWJlcm5hdGUuY29ubmVjdGlvbi5wYXNzd29yZCI+Y29udHJhc2XDsWE8L3Byb3BlcnR5PgogICAgICAgIDxwcm9wZXJ0eSBuYW1lPSJoaWJlcm5hdGUuaGJtMmRkbC5hdXRvIj51cGRhdGU8L3Byb3BlcnR5PgogICAgICAgIDxwcm9wZXJ0eSBuYW1lPSJoaWJlcm5hdGUuc2hvd19zcWwiPnRydWU8L3Byb3BlcnR5PgogICAgPC9zZXNzaW9uLWZhY3Rvcnk+CjwvaGliZXJuYXRlLWNvbmZpZ3VyYXRpb24+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE hibernate-configuration PUBLIC &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;
&lt;hibernate-configuration&gt;
    &lt;session-factory&gt;
        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;
        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;
        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost:3306/mi_base_de_datos&lt;/property&gt;
        &lt;property name=&quot;hibernate.connection.username&quot;&gt;usuario&lt;/property&gt;
        &lt;property name=&quot;hibernate.connection.password&quot;&gt;contrase&ntilde;a&lt;/property&gt;
        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;
        &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;
    &lt;/session-factory&gt;
&lt;/hibernate-configuration&gt;</pre></div><div class='content'></div><h2>Clase Utilitaria de Hibernate</h2>
<div class='content'><p>Crea una clase utilitaria para manejar la configuración de Hibernate:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5oaWJlcm5hdGUuU2Vzc2lvbkZhY3Rvcnk7CmltcG9ydCBvcmcuaGliZXJuYXRlLmNmZy5Db25maWd1cmF0aW9uOwoKcHVibGljIGNsYXNzIEhpYmVybmF0ZVV0aWwgewogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU2Vzc2lvbkZhY3Rvcnkgc2Vzc2lvbkZhY3RvcnkgPSBidWlsZFNlc3Npb25GYWN0b3J5KCk7CgogICAgcHJpdmF0ZSBzdGF0aWMgU2Vzc2lvbkZhY3RvcnkgYnVpbGRTZXNzaW9uRmFjdG9yeSgpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICByZXR1cm4gbmV3IENvbmZpZ3VyYXRpb24oKS5jb25maWd1cmUoKS5idWlsZFNlc3Npb25GYWN0b3J5KCk7CiAgICAgICAgfSBjYXRjaCAoVGhyb3dhYmxlIGV4KSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb25JbkluaXRpYWxpemVyRXJyb3IoZXgpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIFNlc3Npb25GYWN0b3J5IGdldFNlc3Npb25GYWN0b3J5KCkgewogICAgICAgIHJldHVybiBzZXNzaW9uRmFjdG9yeTsKICAgIH0KCiAgICBwdWJsaWMgc3RhdGljIHZvaWQgc2h1dGRvd24oKSB7CiAgICAgICAgZ2V0U2Vzc2lvbkZhY3RvcnkoKS5jbG9zZSgpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class HibernateUtil {
    private static final SessionFactory sessionFactory = buildSessionFactory();

    private static SessionFactory buildSessionFactory() {
        try {
            return new Configuration().configure().buildSessionFactory();
        } catch (Throwable ex) {
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    public static void shutdown() {
        getSessionFactory().close();
    }
}</pre></div><div class='content'></div><h1>Mapeo de Entidades</h1>
<div class='content'><p>El mapeo de entidades es el proceso de vincular las clases Java con las tablas de la base de datos.</p>
</div><h2>Ejemplo de Entidad</h2>
<div class='content'><p>Supongamos que tenemos una tabla <code>Usuario</code> en nuestra base de datos. Creamos una clase <code>Usuario</code> y la anotamos con las anotaciones de Hibernate:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLklkOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuVGFibGU7CgpARW50aXR5CkBUYWJsZShuYW1lID0gIlVzdWFyaW8iKQpwdWJsaWMgY2xhc3MgVXN1YXJpbyB7CiAgICBASWQKICAgIHByaXZhdGUgaW50IGlkOwogICAgcHJpdmF0ZSBTdHJpbmcgbm9tYnJlOwogICAgcHJpdmF0ZSBTdHJpbmcgZW1haWw7CgogICAgLy8gR2V0dGVycyB5IFNldHRlcnMKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name = &quot;Usuario&quot;)
public class Usuario {
    @Id
    private int id;
    private String nombre;
    private String email;

    // Getters y Setters
}</pre></div><div class='content'></div><h1>Consultas con Hibernate</h1>
<div class='content'><p>Hibernate proporciona varias formas de realizar consultas a la base de datos, incluyendo HQL (Hibernate Query Language) y Criteria API.</p>
</div><h2>HQL</h2>
<div class='content'><p>HQL es similar a SQL pero opera sobre objetos en lugar de tablas.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5oaWJlcm5hdGUuU2Vzc2lvbjsKaW1wb3J0IG9yZy5oaWJlcm5hdGUuVHJhbnNhY3Rpb247CmltcG9ydCBvcmcuaGliZXJuYXRlLnF1ZXJ5LlF1ZXJ5OwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKcHVibGljIGNsYXNzIFVzdWFyaW9EQU8gewogICAgcHVibGljIExpc3Q8VXN1YXJpbz4gb2J0ZW5lclVzdWFyaW9zKCkgewogICAgICAgIFRyYW5zYWN0aW9uIHRyYW5zYWN0aW9uID0gbnVsbDsKICAgICAgICBMaXN0PFVzdWFyaW8+IHVzdWFyaW9zID0gbnVsbDsKICAgICAgICB0cnkgKFNlc3Npb24gc2Vzc2lvbiA9IEhpYmVybmF0ZVV0aWwuZ2V0U2Vzc2lvbkZhY3RvcnkoKS5vcGVuU2Vzc2lvbigpKSB7CiAgICAgICAgICAgIHRyYW5zYWN0aW9uID0gc2Vzc2lvbi5iZWdpblRyYW5zYWN0aW9uKCk7CiAgICAgICAgICAgIFF1ZXJ5PFVzdWFyaW8+IHF1ZXJ5ID0gc2Vzc2lvbi5jcmVhdGVRdWVyeSgiRlJPTSBVc3VhcmlvIiwgVXN1YXJpby5jbGFzcyk7CiAgICAgICAgICAgIHVzdWFyaW9zID0gcXVlcnkubGlzdCgpOwogICAgICAgICAgICB0cmFuc2FjdGlvbi5jb21taXQoKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkgewogICAgICAgICAgICBpZiAodHJhbnNhY3Rpb24gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ucm9sbGJhY2soKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdXN1YXJpb3M7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.hibernate.Session;
import org.hibernate.Transaction;
import org.hibernate.query.Query;

import java.util.List;

public class UsuarioDAO {
    public List&lt;Usuario&gt; obtenerUsuarios() {
        Transaction transaction = null;
        List&lt;Usuario&gt; usuarios = null;
        try (Session session = HibernateUtil.getSessionFactory().openSession()) {
            transaction = session.beginTransaction();
            Query&lt;Usuario&gt; query = session.createQuery(&quot;FROM Usuario&quot;, Usuario.class);
            usuarios = query.list();
            transaction.commit();
        } catch (Exception e) {
            if (transaction != null) {
                transaction.rollback();
            }
            e.printStackTrace();
        }
        return usuarios;
    }
}</pre></div><div class='content'></div><h1>Relaciones entre Entidades</h1>
<div class='content'><p>Hibernate soporta varios tipos de relaciones entre entidades, como <code>One-to-One</code>, <code>One-to-Many</code>, <code>Many-to-One</code> y <code>Many-to-Many</code>.</p>
</div><h2>Ejemplo de Relación One-to-Many</h2>
<div class='content'><p>Supongamos que un <code>Usuario</code> puede tener múltiples <code>Pedidos</code>. Definimos las entidades de la siguiente manera:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLio7CmltcG9ydCBqYXZhLnV0aWwuU2V0OwoKQEVudGl0eQpAVGFibGUobmFtZSA9ICJVc3VhcmlvIikKcHVibGljIGNsYXNzIFVzdWFyaW8gewogICAgQElkCiAgICBwcml2YXRlIGludCBpZDsKICAgIHByaXZhdGUgU3RyaW5nIG5vbWJyZTsKICAgIHByaXZhdGUgU3RyaW5nIGVtYWlsOwoKICAgIEBPbmVUb01hbnkobWFwcGVkQnkgPSAidXN1YXJpbyIsIGNhc2NhZGUgPSBDYXNjYWRlVHlwZS5BTEwsIGZldGNoID0gRmV0Y2hUeXBlLkxBWlkpCiAgICBwcml2YXRlIFNldDxQZWRpZG8+IHBlZGlkb3M7CgogICAgLy8gR2V0dGVycyB5IFNldHRlcnMKfQoKQEVudGl0eQpAVGFibGUobmFtZSA9ICJQZWRpZG8iKQpwdWJsaWMgY2xhc3MgUGVkaWRvIHsKICAgIEBJZAogICAgcHJpdmF0ZSBpbnQgaWQ7CiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwY2lvbjsKCiAgICBATWFueVRvT25lCiAgICBASm9pbkNvbHVtbihuYW1lID0gInVzdWFyaW9faWQiLCBudWxsYWJsZSA9IGZhbHNlKQogICAgcHJpdmF0ZSBVc3VhcmlvIHVzdWFyaW87CgogICAgLy8gR2V0dGVycyB5IFNldHRlcnMKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import javax.persistence.*;
import java.util.Set;

@Entity
@Table(name = &quot;Usuario&quot;)
public class Usuario {
    @Id
    private int id;
    private String nombre;
    private String email;

    @OneToMany(mappedBy = &quot;usuario&quot;, cascade = CascadeType.ALL, fetch = FetchType.LAZY)
    private Set&lt;Pedido&gt; pedidos;

    // Getters y Setters
}

@Entity
@Table(name = &quot;Pedido&quot;)
public class Pedido {
    @Id
    private int id;
    private String descripcion;

    @ManyToOne
    @JoinColumn(name = &quot;usuario_id&quot;, nullable = false)
    private Usuario usuario;

    // Getters y Setters
}</pre></div><div class='content'></div><h1>Transacciones y Concurrencia</h1>
<div class='content'><p>Hibernate maneja las transacciones de manera automática, pero también puedes gestionarlas manualmente.</p>
</div><h2>Ejemplo de Transacción</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5oaWJlcm5hdGUuU2Vzc2lvbjsKaW1wb3J0IG9yZy5oaWJlcm5hdGUuVHJhbnNhY3Rpb247CgpwdWJsaWMgY2xhc3MgVXN1YXJpb0RBTyB7CiAgICBwdWJsaWMgdm9pZCBndWFyZGFyVXN1YXJpbyhVc3VhcmlvIHVzdWFyaW8pIHsKICAgICAgICBUcmFuc2FjdGlvbiB0cmFuc2FjdGlvbiA9IG51bGw7CiAgICAgICAgdHJ5IChTZXNzaW9uIHNlc3Npb24gPSBIaWJlcm5hdGVVdGlsLmdldFNlc3Npb25GYWN0b3J5KCkub3BlblNlc3Npb24oKSkgewogICAgICAgICAgICB0cmFuc2FjdGlvbiA9IHNlc3Npb24uYmVnaW5UcmFuc2FjdGlvbigpOwogICAgICAgICAgICBzZXNzaW9uLnNhdmUodXN1YXJpbyk7CiAgICAgICAgICAgIHRyYW5zYWN0aW9uLmNvbW1pdCgpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGlmICh0cmFuc2FjdGlvbiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5yb2xsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgfQogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.hibernate.Session;
import org.hibernate.Transaction;

public class UsuarioDAO {
    public void guardarUsuario(Usuario usuario) {
        Transaction transaction = null;
        try (Session session = HibernateUtil.getSessionFactory().openSession()) {
            transaction = session.beginTransaction();
            session.save(usuario);
            transaction.commit();
        } catch (Exception e) {
            if (transaction != null) {
                transaction.rollback();
            }
            e.printStackTrace();
        }
    }
}</pre></div><div class='content'></div><h1>Caché en Hibernate</h1>
<div class='content'><p>Hibernate soporta caché de primer y segundo nivel para mejorar el rendimiento.</p>
</div><h2>Caché de Primer Nivel</h2>
<div class='content'><p>El caché de primer nivel está habilitado por defecto y es específico de la sesión.</p>
</div><h2>Caché de Segundo Nivel</h2>
<div class='content'><p>El caché de segundo nivel es compartido entre sesiones y debe ser configurado explícitamente.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHByb3BlcnR5IG5hbWU9ImhpYmVybmF0ZS5jYWNoZS51c2Vfc2Vjb25kX2xldmVsX2NhY2hlIj50cnVlPC9wcm9wZXJ0eT4KPHByb3BlcnR5IG5hbWU9ImhpYmVybmF0ZS5jYWNoZS5yZWdpb24uZmFjdG9yeV9jbGFzcyI+b3JnLmhpYmVybmF0ZS5jYWNoZS5laGNhY2hlLkVoQ2FjaGVSZWdpb25GYWN0b3J5PC9wcm9wZXJ0eT4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;property name=&quot;hibernate.cache.use_second_level_cache&quot;&gt;true&lt;/property&gt;
&lt;property name=&quot;hibernate.cache.region.factory_class&quot;&gt;org.hibernate.cache.ehcache.EhCacheRegionFactory&lt;/property&gt;</pre></div><div class='content'></div><h1>Ejercicios Prácticos</h1>
<div class='content'></div><h2>Ejercicio 1: Configuración de Hibernate</h2>
<div class='content'><ol>
<li>Configura un proyecto Java con Hibernate y MySQL.</li>
<li>Crea una clase <code>Producto</code> mapeada a una tabla <code>Producto</code> en la base de datos.</li>
<li>Escribe un programa que guarde un nuevo producto en la base de datos.</li>
</ol>
</div><h2>Ejercicio 2: Relaciones entre Entidades</h2>
<div class='content'><ol>
<li>Crea una relación <code>One-to-Many</code> entre <code>Usuario</code> y <code>Pedido</code>.</li>
<li>Escribe un programa que guarde un usuario con varios pedidos en la base de datos.</li>
<li>Escribe un programa que recupere un usuario y sus pedidos desde la base de datos.</li>
</ol>
</div><h2>Ejercicio 3: Consultas y Transacciones</h2>
<div class='content'><ol>
<li>Escribe una consulta HQL para obtener todos los usuarios con un email específico.</li>
<li>Escribe un programa que actualice el nombre de un usuario en una transacción.</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>En este módulo, has aprendido los conceptos básicos y avanzados de Hibernate, cómo configurarlo y cómo utilizarlo para interactuar con bases de datos. Hibernate es una herramienta poderosa que simplifica el desarrollo de aplicaciones Java que requieren acceso a bases de datos relacionales. Con la práctica y la comprensión de los conceptos presentados, estarás bien preparado para utilizar Hibernate en tus proyectos.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='11-02-spring-framework' title="Spring Framework">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='11-04-junit' title="JUnit">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
