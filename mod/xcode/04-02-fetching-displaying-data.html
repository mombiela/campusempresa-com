<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obteniendo y Mostrando Datos</title>

    <link rel="alternate" href="https://campusempresa.com/mod/xcode/04-02-fetching-displaying-data" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/xcode/04-02-fetching-displaying-data" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/xcode/04-02-fetching-displaying-data" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/xcode/04-02-fetching-displaying-data" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/xcode/04-02-fetching-displaying-data" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-01-introduction-core-data' title="Introducción a Core Data">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Obteniendo y Mostrando Datos</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-03-data-persistence' title="Persistencia de Datos">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En este tema, aprenderás cómo obtener datos de diversas fuentes y mostrarlos en tu aplicación utilizando Xcode. Este es un aspecto crucial del desarrollo de aplicaciones, ya que la mayoría de las aplicaciones modernas interactúan con datos de alguna forma. Cubriremos desde la obtención de datos locales hasta la interacción con APIs remotas.</p>
</div><h1>Objetivos de Aprendizaje</h1>
<div class='content'><ul>
<li>Comprender cómo obtener datos de Core Data.</li>
<li>Aprender a mostrar datos en la interfaz de usuario.</li>
<li>Conocer las técnicas para trabajar con APIs y datos remotos.</li>
</ul>
</div><h1>Contenido</h1>
<div class='content'><ol>
<li><a href="#obteniendo-datos-de-core-data">Obteniendo Datos de Core Data</a></li>
<li><a href="#mostrando-datos-en-la-interfaz-de-usuario">Mostrando Datos en la Interfaz de Usuario</a></li>
<li><a href="#trabajando-con-apis-y-datos-remotos">Trabajando con APIs y Datos Remotos</a></li>
<li><a href="#ejercicios-prácticos">Ejercicios Prácticos</a></li>
<li><a href="#conclusión">Conclusión</a></li>
</ol>
</div><h1>Obteniendo Datos de Core Data</h1>
<div class='content'><p>Core Data es el framework de Apple para la persistencia de datos. A continuación, veremos cómo obtener datos almacenados en Core Data.</p>
</div><h2>Paso 1: Configuración del Modelo de Datos</h2>
<div class='content'><p>Primero, asegúrate de tener un modelo de datos configurado en tu proyecto. Si no lo tienes, sigue estos pasos:</p>
<ol>
<li><strong>Crear un Modelo de Datos</strong>: Ve a <code>File &gt; New &gt; File...</code> y selecciona <code>Data Model</code>.</li>
<li><strong>Definir Entidades y Atributos</strong>: Abre el archivo <code>.xcdatamodeld</code> y define tus entidades y atributos.</li>
</ol>
</div><h2>Paso 2: Configuración del Contexto de Core Data</h2>
<div class='content'><p>Asegúrate de tener un contexto de Core Data configurado. Normalmente, esto se hace en el <code>AppDelegate</code> o en una clase de controlador de datos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IENvcmVEYXRhCgpjbGFzcyBEYXRhQ29udHJvbGxlciB7CiAgICBsZXQgcGVyc2lzdGVudENvbnRhaW5lcjogTlNQZXJzaXN0ZW50Q29udGFpbmVyCgogICAgaW5pdChtb2RlbE5hbWU6IFN0cmluZykgewogICAgICAgIHBlcnNpc3RlbnRDb250YWluZXIgPSBOU1BlcnNpc3RlbnRDb250YWluZXIobmFtZTogbW9kZWxOYW1lKQogICAgICAgIHBlcnNpc3RlbnRDb250YWluZXIubG9hZFBlcnNpc3RlbnRTdG9yZXMgeyAoc3RvcmVEZXNjcmlwdGlvbiwgZXJyb3IpIGluCiAgICAgICAgICAgIGlmIGxldCBlcnJvciA9IGVycm9yIGFzIE5TRXJyb3I/IHsKICAgICAgICAgICAgICAgIGZhdGFsRXJyb3IoIlVucmVzb2x2ZWQgZXJyb3IgXChlcnJvciksIFwoZXJyb3IudXNlckluZm8pIikKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICB2YXIgdmlld0NvbnRleHQ6IE5TTWFuYWdlZE9iamVjdENvbnRleHQgewogICAgICAgIHJldHVybiBwZXJzaXN0ZW50Q29udGFpbmVyLnZpZXdDb250ZXh0CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import CoreData

class DataController {
    let persistentContainer: NSPersistentContainer

    init(modelName: String) {
        persistentContainer = NSPersistentContainer(name: modelName)
        persistentContainer.loadPersistentStores { (storeDescription, error) in
            if let error = error as NSError? {
                fatalError(&quot;Unresolved error \(error), \(error.userInfo)&quot;)
            }
        }
    }

    var viewContext: NSManagedObjectContext {
        return persistentContainer.viewContext
    }
}</pre></div><div class='content'></div><h2>Paso 3: Obteniendo Datos</h2>
<div class='content'><p>Para obtener datos, utilizamos <code>NSFetchRequest</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBmZXRjaERhdGEoKSAtPiBbRW50aXR5TmFtZV0gewogICAgbGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8RW50aXR5TmFtZT4gPSBFbnRpdHlOYW1lLmZldGNoUmVxdWVzdCgpCiAgICBkbyB7CiAgICAgICAgbGV0IHJlc3VsdHMgPSB0cnkgdmlld0NvbnRleHQuZmV0Y2goZmV0Y2hSZXF1ZXN0KQogICAgICAgIHJldHVybiByZXN1bHRzCiAgICB9IGNhdGNoIHsKICAgICAgICBwcmludCgiRXJyb3IgZmV0Y2hpbmcgZGF0YTogXChlcnJvcikiKQogICAgICAgIHJldHVybiBbXQogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func fetchData() -&gt; [EntityName] {
    let fetchRequest: NSFetchRequest&lt;EntityName&gt; = EntityName.fetchRequest()
    do {
        let results = try viewContext.fetch(fetchRequest)
        return results
    } catch {
        print(&quot;Error fetching data: \(error)&quot;)
        return []
    }
}</pre></div><div class='content'></div><h1>Mostrando Datos en la Interfaz de Usuario</h1>
<div class='content'><p>Una vez que tenemos los datos, el siguiente paso es mostrarlos en la interfaz de usuario. Utilizaremos una <code>UITableView</code> para este propósito.</p>
</div><h2>Paso 1: Configuración de la UITableView</h2>
<div class='content'><p>Asegúrate de tener una <code>UITableView</code> en tu storyboard o configurada programáticamente.</p>
</div><h2>Paso 2: Configuración del Data Source</h2>
<div class='content'><p>Implementa los métodos del <code>UITableViewDataSource</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgVmlld0NvbnRyb2xsZXI6IFVJVmlld0NvbnRyb2xsZXIsIFVJVGFibGVWaWV3RGF0YVNvdXJjZSB7CiAgICBASUJPdXRsZXQgd2VhayB2YXIgdGFibGVWaWV3OiBVSVRhYmxlVmlldyEKICAgIHZhciBkYXRhOiBbRW50aXR5TmFtZV0gPSBbXQoKICAgIG92ZXJyaWRlIGZ1bmMgdmlld0RpZExvYWQoKSB7CiAgICAgICAgc3VwZXIudmlld0RpZExvYWQoKQogICAgICAgIHRhYmxlVmlldy5kYXRhU291cmNlID0gc2VsZgogICAgICAgIGRhdGEgPSBmZXRjaERhdGEoKQogICAgICAgIHRhYmxlVmlldy5yZWxvYWREYXRhKCkKICAgIH0KCiAgICBmdW5jIHRhYmxlVmlldyhfIHRhYmxlVmlldzogVUlUYWJsZVZpZXcsIG51bWJlck9mUm93c0luU2VjdGlvbiBzZWN0aW9uOiBJbnQpIC0+IEludCB7CiAgICAgICAgcmV0dXJuIGRhdGEuY291bnQKICAgIH0KCiAgICBmdW5jIHRhYmxlVmlldyhfIHRhYmxlVmlldzogVUlUYWJsZVZpZXcsIGNlbGxGb3JSb3dBdCBpbmRleFBhdGg6IEluZGV4UGF0aCkgLT4gVUlUYWJsZVZpZXdDZWxsIHsKICAgICAgICBsZXQgY2VsbCA9IHRhYmxlVmlldy5kZXF1ZXVlUmV1c2FibGVDZWxsKHdpdGhJZGVudGlmaWVyOiAiQ2VsbCIsIGZvcjogaW5kZXhQYXRoKQogICAgICAgIGxldCBlbnRpdHkgPSBkYXRhW2luZGV4UGF0aC5yb3ddCiAgICAgICAgY2VsbC50ZXh0TGFiZWw/LnRleHQgPSBlbnRpdHkuYXR0cmlidXRlTmFtZQogICAgICAgIHJldHVybiBjZWxsCiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class ViewController: UIViewController, UITableViewDataSource {
    @IBOutlet weak var tableView: UITableView!
    var data: [EntityName] = []

    override func viewDidLoad() {
        super.viewDidLoad()
        tableView.dataSource = self
        data = fetchData()
        tableView.reloadData()
    }

    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
        return data.count
    }

    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
        let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath)
        let entity = data[indexPath.row]
        cell.textLabel?.text = entity.attributeName
        return cell
    }
}</pre></div><div class='content'></div><h1>Trabajando con APIs y Datos Remotos</h1>
<div class='content'><p>Para trabajar con datos remotos, utilizamos URLSession para realizar solicitudes HTTP.</p>
</div><h2>Paso 1: Realizando una Solicitud HTTP</h2>
<div class='content'><p>Aquí hay un ejemplo de cómo realizar una solicitud GET.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBmZXRjaFJlbW90ZURhdGEoKSB7CiAgICBndWFyZCBsZXQgdXJsID0gVVJMKHN0cmluZzogImh0dHBzOi8vYXBpLmV4YW1wbGUuY29tL2RhdGEiKSBlbHNlIHsgcmV0dXJuIH0KCiAgICBsZXQgdGFzayA9IFVSTFNlc3Npb24uc2hhcmVkLmRhdGFUYXNrKHdpdGg6IHVybCkgeyBkYXRhLCByZXNwb25zZSwgZXJyb3IgaW4KICAgICAgICBndWFyZCBsZXQgZGF0YSA9IGRhdGEsIGVycm9yID09IG5pbCBlbHNlIHsKICAgICAgICAgICAgcHJpbnQoIkVycm9yIGZldGNoaW5nIGRhdGE6IFwoZXJyb3IhKSIpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIH0KCiAgICAgICAgZG8gewogICAgICAgICAgICBsZXQganNvbkRhdGEgPSB0cnkgSlNPTlNlcmlhbGl6YXRpb24uanNvbk9iamVjdCh3aXRoOiBkYXRhLCBvcHRpb25zOiBbXSkKICAgICAgICAgICAgcHJpbnQoIkRhdGEgcmVjZWl2ZWQ6IFwoanNvbkRhdGEpIikKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgcHJpbnQoIkVycm9yIHBhcnNpbmcgSlNPTjogXChlcnJvcikiKQogICAgICAgIH0KICAgIH0KICAgIHRhc2sucmVzdW1lKCkKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func fetchRemoteData() {
    guard let url = URL(string: &quot;https://api.example.com/data&quot;) else { return }

    let task = URLSession.shared.dataTask(with: url) { data, response, error in
        guard let data = data, error == nil else {
            print(&quot;Error fetching data: \(error!)&quot;)
            return
        }

        do {
            let jsonData = try JSONSerialization.jsonObject(with: data, options: [])
            print(&quot;Data received: \(jsonData)&quot;)
        } catch {
            print(&quot;Error parsing JSON: \(error)&quot;)
        }
    }
    task.resume()
}</pre></div><div class='content'></div><h2>Paso 2: Parseando Datos JSON</h2>
<div class='content'><p>Usa <code>Codable</code> para parsear datos JSON.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IFJlbW90ZURhdGE6IENvZGFibGUgewogICAgbGV0IGlkOiBJbnQKICAgIGxldCBuYW1lOiBTdHJpbmcKfQoKZnVuYyBwYXJzZUpTT04oZGF0YTogRGF0YSkgLT4gW1JlbW90ZURhdGFdPyB7CiAgICBsZXQgZGVjb2RlciA9IEpTT05EZWNvZGVyKCkKICAgIGRvIHsKICAgICAgICBsZXQgZGVjb2RlZERhdGEgPSB0cnkgZGVjb2Rlci5kZWNvZGUoW1JlbW90ZURhdGFdLnNlbGYsIGZyb206IGRhdGEpCiAgICAgICAgcmV0dXJuIGRlY29kZWREYXRhCiAgICB9IGNhdGNoIHsKICAgICAgICBwcmludCgiRXJyb3IgZGVjb2RpbmcgSlNPTjogXChlcnJvcikiKQogICAgICAgIHJldHVybiBuaWwKICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct RemoteData: Codable {
    let id: Int
    let name: String
}

func parseJSON(data: Data) -&gt; [RemoteData]? {
    let decoder = JSONDecoder()
    do {
        let decodedData = try decoder.decode([RemoteData].self, from: data)
        return decodedData
    } catch {
        print(&quot;Error decoding JSON: \(error)&quot;)
        return nil
    }
}</pre></div><div class='content'></div><h1>Ejercicios Prácticos</h1>
<div class='content'></div><h2>Ejercicio 1: Obtener y Mostrar Datos de Core Data</h2>
<div class='content'><ol>
<li>Crea una entidad llamada <code>Person</code> con atributos <code>name</code> y <code>age</code>.</li>
<li>Implementa la lógica para obtener y mostrar una lista de personas en una <code>UITableView</code>.</li>
</ol>
</div><h2>Ejercicio 2: Trabajar con Datos Remotos</h2>
<div class='content'><ol>
<li>Realiza una solicitud a una API pública que devuelva una lista de elementos.</li>
<li>Parsear los datos y mostrarlos en una <code>UITableView</code>.</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, hemos aprendido cómo obtener y mostrar datos tanto de Core Data como de APIs remotas. Estos son conceptos fundamentales para cualquier desarrollador de aplicaciones, ya que la mayoría de las aplicaciones modernas requieren la interacción con datos de alguna forma. Asegúrate de practicar los ejercicios para consolidar tu comprensión y estar preparado para el siguiente módulo.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-01-introduction-core-data' title="Introducción a Core Data">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-03-data-persistence' title="Persistencia de Datos">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
