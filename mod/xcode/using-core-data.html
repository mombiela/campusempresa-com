<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Usando Core Data</title>

    <link rel="alternate" href="https://campusempresa.com/mod/xcode/using-core-data" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/xcode/using-core-data" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/xcode/using-core-data" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/xcode/using-core-data" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/xcode/using-core-data" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-custom-ui-components'>&#x25C4;Creando Componentes de UI Personalizados</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Usando Core Data</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integrating-third-party-libraries'>Integrando Librerías de Terceros &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a Core Data</h1>
<div class='content'><p>Core Data es un marco de persistencia y gráfico de objetos proporcionado por Apple en los sistemas operativos macOS e iOS. Permite que los datos se organicen y gestionen de manera eficiente dentro de una aplicación.</p>
<ul>
<li><strong>Gestión del Gráfico de Objetos</strong>: Core Data gestiona el ciclo de vida y las relaciones de los objetos en tu aplicación.</li>
<li><strong>Persistencia</strong>: Core Data puede guardar objetos en el disco y recuperarlos más tarde.</li>
</ul>
</div><h1>Configuración de Core Data en Xcode</h1>
<div class='content'><p>Para usar Core Data en tu proyecto de Xcode, necesitas configurarlo correctamente.</p>
<ol>
<li>
<p><strong>Crear un Nuevo Proyecto con Core Data</strong>:</p>
<ul>
<li>Al crear un nuevo proyecto, marca la opción &quot;Use Core Data&quot;.</li>
<li>Xcode incluirá automáticamente los archivos y configuraciones necesarios de Core Data.</li>
</ul>
</li>
<li>
<p><strong>Agregar Core Data a un Proyecto Existente</strong>:</p>
<ul>
<li>Agrega un nuevo archivo de Modelo de Datos (<code>.xcdatamodeld</code>) a tu proyecto.</li>
<li>Configura el stack de Core Data en tu AppDelegate o SceneDelegate.</li>
</ul>
</li>
</ol>
</div><h1>Modelo de Core Data</h1>
<div class='content'><p>El modelo de Core Data es donde defines la estructura de tus datos, incluyendo entidades, atributos y relaciones.</p>
<ul>
<li><strong>Entidades</strong>: Representan tablas en la base de datos.</li>
<li><strong>Atributos</strong>: Representan columnas en las tablas.</li>
<li><strong>Relaciones</strong>: Definen cómo las entidades están relacionadas entre sí.</li>
</ul>
</div><h2>Ejemplo: Definiendo un Modelo de Datos Simple</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5lIHVuYSBlbnRpZGFkIGxsYW1hZGEgIlBlcnNvbiIgY29uIGF0cmlidXRvcyAibmFtZSIgKFN0cmluZykgeSAiYWdlIiAoSW50ZWdlcik="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Define una entidad llamada &quot;Person&quot; con atributos &quot;name&quot; (String) y &quot;age&quot; (Integer)</pre></div><div class='content'></div><h1>Stack de Core Data</h1>
<div class='content'><p>El stack de Core Data es el conjunto de componentes que trabajan juntos para gestionar los objetos de la capa de modelo.</p>
<ul>
<li><strong>NSManagedObjectContext</strong>: El contexto en el que trabajas con tus objetos gestionados.</li>
<li><strong>NSPersistentStoreCoordinator</strong>: Coordina el almacén persistente y el modelo de objeto gestionado.</li>
<li><strong>NSManagedObjectModel</strong>: Representa el esquema de tu modelo de datos.</li>
<li><strong>NSPersistentContainer</strong>: Simplifica la creación y gestión del stack de Core Data.</li>
</ul>
</div><h2>Ejemplo: Configuración del Stack de Core Data</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IENvcmVEYXRhCgpjbGFzcyBBcHBEZWxlZ2F0ZTogVUlSZXNwb25kZXIsIFVJQXBwbGljYXRpb25EZWxlZ2F0ZSB7CiAgICBsYXp5IHZhciBwZXJzaXN0ZW50Q29udGFpbmVyOiBOU1BlcnNpc3RlbnRDb250YWluZXIgPSB7CiAgICAgICAgbGV0IGNvbnRhaW5lciA9IE5TUGVyc2lzdGVudENvbnRhaW5lcihuYW1lOiAiTW9kZWxOYW1lIikKICAgICAgICBjb250YWluZXIubG9hZFBlcnNpc3RlbnRTdG9yZXMgeyBzdG9yZURlc2NyaXB0aW9uLCBlcnJvciBpbgogICAgICAgICAgICBpZiBsZXQgZXJyb3IgPSBlcnJvciBhcyBOU0Vycm9yPyB7CiAgICAgICAgICAgICAgICBmYXRhbEVycm9yKCJVbnJlc29sdmVkIGVycm9yIFwoZXJyb3IpLCBcKGVycm9yLnVzZXJJbmZvKSIpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcgogICAgfSgpCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import CoreData

class AppDelegate: UIResponder, UIApplicationDelegate {
    lazy var persistentContainer: NSPersistentContainer = {
        let container = NSPersistentContainer(name: &quot;ModelName&quot;)
        container.loadPersistentStores { storeDescription, error in
            if let error = error as NSError? {
                fatalError(&quot;Unresolved error \(error), \(error.userInfo)&quot;)
            }
        }
        return container
    }()
}</pre></div><div class='content'></div><h1>Trabajando con Objetos Gestionados</h1>
<div class='content'><p>Los objetos gestionados son instancias de las entidades de tu modelo de datos. Puedes crear, leer, actualizar y eliminar estos objetos usando el contexto de objeto gestionado.</p>
</div><h2>Creando un Objeto Gestionado</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGNvbnRleHQgPSBwZXJzaXN0ZW50Q29udGFpbmVyLnZpZXdDb250ZXh0CmxldCBuZXdQZXJzb24gPSBQZXJzb24oY29udGV4dDogY29udGV4dCkKbmV3UGVyc29uLm5hbWUgPSAiSm9obiBEb2UiCm5ld1BlcnNvbi5hZ2UgPSAzMAoKZG8gewogICAgdHJ5IGNvbnRleHQuc2F2ZSgpCn0gY2F0Y2ggewogICAgcHJpbnQoIkZhaWxlZCB0byBzYXZlOiBcKGVycm9yKSIpCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let context = persistentContainer.viewContext
let newPerson = Person(context: context)
newPerson.name = &quot;John Doe&quot;
newPerson.age = 30

do {
    try context.save()
} catch {
    print(&quot;Failed to save: \(error)&quot;)
}</pre></div><div class='content'></div><h2>Recuperando Objetos Gestionados</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8UGVyc29uPiA9IFBlcnNvbi5mZXRjaFJlcXVlc3QoKQoKZG8gewogICAgbGV0IHBlb3BsZSA9IHRyeSBjb250ZXh0LmZldGNoKGZldGNoUmVxdWVzdCkKICAgIGZvciBwZXJzb24gaW4gcGVvcGxlIHsKICAgICAgICBwcmludCgiXChwZXJzb24ubmFtZSksIFwocGVyc29uLmFnZSkiKQogICAgfQp9IGNhdGNoIHsKICAgIHByaW50KCJGYWlsZWQgdG8gZmV0Y2g6IFwoZXJyb3IpIikKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()

do {
    let people = try context.fetch(fetchRequest)
    for person in people {
        print(&quot;\(person.name), \(person.age)&quot;)
    }
} catch {
    print(&quot;Failed to fetch: \(error)&quot;)
}</pre></div><div class='content'></div><h2>Actualizando Objetos Gestionados</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8UGVyc29uPiA9IFBlcnNvbi5mZXRjaFJlcXVlc3QoKQpmZXRjaFJlcXVlc3QucHJlZGljYXRlID0gTlNQcmVkaWNhdGUoZm9ybWF0OiAibmFtZSA9PSAlQCIsICJKb2huIERvZSIpCgpkbyB7CiAgICBsZXQgcGVvcGxlID0gdHJ5IGNvbnRleHQuZmV0Y2goZmV0Y2hSZXF1ZXN0KQogICAgaWYgbGV0IHBlcnNvbiA9IHBlb3BsZS5maXJzdCB7CiAgICAgICAgcGVyc29uLmFnZSA9IDMxCiAgICAgICAgdHJ5IGNvbnRleHQuc2F2ZSgpCiAgICB9Cn0gY2F0Y2ggewogICAgcHJpbnQoIkZhaWxlZCB0byB1cGRhdGU6IFwoZXJyb3IpIikKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()
fetchRequest.predicate = NSPredicate(format: &quot;name == %@&quot;, &quot;John Doe&quot;)

do {
    let people = try context.fetch(fetchRequest)
    if let person = people.first {
        person.age = 31
        try context.save()
    }
} catch {
    print(&quot;Failed to update: \(error)&quot;)
}</pre></div><div class='content'></div><h2>Eliminando Objetos Gestionados</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8UGVyc29uPiA9IFBlcnNvbi5mZXRjaFJlcXVlc3QoKQpmZXRjaFJlcXVlc3QucHJlZGljYXRlID0gTlNQcmVkaWNhdGUoZm9ybWF0OiAibmFtZSA9PSAlQCIsICJKb2huIERvZSIpCgpkbyB7CiAgICBsZXQgcGVvcGxlID0gdHJ5IGNvbnRleHQuZmV0Y2goZmV0Y2hSZXF1ZXN0KQogICAgaWYgbGV0IHBlcnNvbiA9IHBlb3BsZS5maXJzdCB7CiAgICAgICAgY29udGV4dC5kZWxldGUocGVyc29uKQogICAgICAgIHRyeSBjb250ZXh0LnNhdmUoKQogICAgfQp9IGNhdGNoIHsKICAgIHByaW50KCJGYWlsZWQgdG8gZGVsZXRlOiBcKGVycm9yKSIpCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()
fetchRequest.predicate = NSPredicate(format: &quot;name == %@&quot;, &quot;John Doe&quot;)

do {
    let people = try context.fetch(fetchRequest)
    if let person = people.first {
        context.delete(person)
        try context.save()
    }
} catch {
    print(&quot;Failed to delete: \(error)&quot;)
}</pre></div><div class='content'></div><h1>Funciones Avanzadas de Core Data</h1>
<div class='content'><p>Core Data ofrece funciones avanzadas para necesidades de gestión de datos más complejas.</p>
<ul>
<li><strong>Operaciones por Lotes</strong>: Realiza actualizaciones y eliminaciones por lotes para mayor eficiencia.</li>
<li><strong>Fetched Results Controller</strong>: Gestiona eficientemente los resultados de una solicitud de búsqueda de Core Data y actualiza la interfaz de usuario.</li>
<li><strong>Migración</strong>: Maneja cambios en el esquema del modelo de datos a lo largo del tiempo.</li>
</ul>
</div><h2>Ejemplo: Usando NSFetchedResultsController</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IENvcmVEYXRhCgpjbGFzcyBWaWV3Q29udHJvbGxlcjogVUlWaWV3Q29udHJvbGxlciwgTlNGZXRjaGVkUmVzdWx0c0NvbnRyb2xsZXJEZWxlZ2F0ZSB7CiAgICB2YXIgZmV0Y2hlZFJlc3VsdHNDb250cm9sbGVyOiBOU0ZldGNoZWRSZXN1bHRzQ29udHJvbGxlcjxQZXJzb24+IQoKICAgIG92ZXJyaWRlIGZ1bmMgdmlld0RpZExvYWQoKSB7CiAgICAgICAgc3VwZXIudmlld0RpZExvYWQoKQogICAgICAgIGxldCBmZXRjaFJlcXVlc3Q6IE5TRmV0Y2hSZXF1ZXN0PFBlcnNvbj4gPSBQZXJzb24uZmV0Y2hSZXF1ZXN0KCkKICAgICAgICBmZXRjaFJlcXVlc3Quc29ydERlc2NyaXB0b3JzID0gW05TU29ydERlc2NyaXB0b3Ioa2V5OiAibmFtZSIsIGFzY2VuZGluZzogdHJ1ZSldCiAgICAgICAgCiAgICAgICAgZmV0Y2hlZFJlc3VsdHNDb250cm9sbGVyID0gTlNGZXRjaGVkUmVzdWx0c0NvbnRyb2xsZXIoZmV0Y2hSZXF1ZXN0OiBmZXRjaFJlcXVlc3QsIG1hbmFnZWRPYmplY3RDb250ZXh0OiBwZXJzaXN0ZW50Q29udGFpbmVyLnZpZXdDb250ZXh0LCBzZWN0aW9uTmFtZUtleVBhdGg6IG5pbCwgY2FjaGVOYW1lOiBuaWwpCiAgICAgICAgZmV0Y2hlZFJlc3VsdHNDb250cm9sbGVyLmRlbGVnYXRlID0gc2VsZgogICAgICAgIAogICAgICAgIGRvIHsKICAgICAgICAgICAgdHJ5IGZldGNoZWRSZXN1bHRzQ29udHJvbGxlci5wZXJmb3JtRmV0Y2goKQogICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICBwcmludCgiRmFpbGVkIHRvIGZldGNoOiBcKGVycm9yKSIpCiAgICAgICAgfQogICAgfQogICAgCiAgICAvLyBJbXBsZW1lbnRhIGxvcyBtw6l0b2RvcyBkZSBOU0ZldGNoZWRSZXN1bHRzQ29udHJvbGxlckRlbGVnYXRlIHBhcmEgYWN0dWFsaXphciBsYSBpbnRlcmZheiBkZSB1c3VhcmlvCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import CoreData

class ViewController: UIViewController, NSFetchedResultsControllerDelegate {
    var fetchedResultsController: NSFetchedResultsController&lt;Person&gt;!

    override func viewDidLoad() {
        super.viewDidLoad()
        let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()
        fetchRequest.sortDescriptors = [NSSortDescriptor(key: &quot;name&quot;, ascending: true)]
        
        fetchedResultsController = NSFetchedResultsController(fetchRequest: fetchRequest, managedObjectContext: persistentContainer.viewContext, sectionNameKeyPath: nil, cacheName: nil)
        fetchedResultsController.delegate = self
        
        do {
            try fetchedResultsController.performFetch()
        } catch {
            print(&quot;Failed to fetch: \(error)&quot;)
        }
    }
    
    // Implementa los m&eacute;todos de NSFetchedResultsControllerDelegate para actualizar la interfaz de usuario
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Core Data es un potente marco para gestionar y persistir datos en aplicaciones iOS y macOS. Al comprender los conceptos básicos de la configuración de Core Data, trabajar con objetos gestionados y aprovechar las funciones avanzadas, puedes gestionar eficientemente los datos de tu aplicación. Practica con los ejemplos proporcionados y explora la documentación para profundizar tu comprensión de Core Data.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-custom-ui-components'>&#x25C4;Creando Componentes de UI Personalizados</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Usando Core Data</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integrating-third-party-libraries'>Integrando Librerías de Terceros &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
