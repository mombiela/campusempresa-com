<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funciones y Traits Inseguros</title>

    <link rel="alternate" href="https://campusempresa.com/mod/rust/unsafe-functions-and-traits" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/rust/unsafe-functions-and-traits" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/rust/unsafe-functions-and-traits" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body  class="test" >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/rust/unsafe-functions-and-traits" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/rust/unsafe-functions-and-traits" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
									<div class="assert">
						<p><b>Atención!</b> Ha habido un error en la generación del curso y puede contener errores de traducción.Estamos trabajando para solucinarlo por lo que se deben usar los contenidos con cuidado.Se puede consultar el contenido correcto en otro idioma en el siguiente enlace:<br>
						<a href="https://enterprisecampus.net/mod/rust/unsafe-functions-and-traits">https://enterprisecampus.net/mod/rust/unsafe-functions-and-traits</a></p>
					</div>
								<div class='row navigation'>
	<div class='col-4'>
					<a href='raw-pointers'>&#x25C4;Punteros Crudos</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Funciones y Traits Inseguros</a>
	</div>
	<div class='col-4 text-end'>
					<a href='writing-tests'>Escribiendo Pruebas &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a Rust Inseguro</h1>
<div class='content'><p>Rust está diseñado para ser un lenguaje de programación de sistemas seguro, pero hay momentos en los que necesitas realizar operaciones que el compilador de Rust no puede garantizar que sean seguras. Aquí es donde entra en juego <code>unsafe</code>. La palabra clave <code>unsafe</code> en Rust te permite omitir algunas de las comprobaciones de seguridad de Rust, dándote más control pero también más responsabilidad.</p>
<ul>
<li><strong>Conceptos Clave:</strong>
<ul>
<li>Palabra clave <code>unsafe</code></li>
<li>Funciones inseguras</li>
<li>Traits inseguros</li>
<li>Bloques inseguros</li>
</ul>
</li>
</ul>
</div><h1>Palabra Clave Unsafe</h1>
<div class='content'><p>La palabra clave <code>unsafe</code> en Rust se usa para indicar que un bloque de código, una función o un trait tiene operaciones que el compilador de Rust no puede garantizar que sean seguras.</p>
<ul>
<li><strong>Bloques Inseguros:</strong> Te permiten realizar operaciones inseguras dentro de una función segura.</li>
<li><strong>Funciones Inseguras:</strong> Funciones que contienen código inseguro y deben ser llamadas dentro de un bloque inseguro.</li>
<li><strong>Traits Inseguros:</strong> Traits que tienen métodos que solo pueden ser implementados usando código inseguro.</li>
</ul>
</div><h2>Bloques Inseguros</h2>
<div class='content'><p>Un bloque inseguro te permite realizar operaciones que el compilador de Rust no puede verificar como seguras. Esto incluye desreferenciar punteros crudos, llamar funciones inseguras y acceder a variables estáticas mutables.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zm4gbWFpbigpIHsKICAgIGxldCBtdXQgbnVtID0gNTsKICAgIGxldCByMSA9ICZudW0gYXMgKmNvbnN0IGkzMjsKICAgIGxldCByMiA9ICZtdXQgbnVtIGFzICptdXQgaTMyOwoKICAgIHVuc2FmZSB7CiAgICAgICAgcHJpbnRsbiEoInIxIGVzOiB7fSIsICpyMSk7CiAgICAgICAgcHJpbnRsbiEoInIyIGVzOiB7fSIsICpyMik7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>fn main() {
    let mut num = 5;
    let r1 = &amp;num as *const i32;
    let r2 = &amp;mut num as *mut i32;

    unsafe {
        println!(&quot;r1 es: {}&quot;, *r1);
        println!(&quot;r2 es: {}&quot;, *r2);
    }
}</pre></div><div class='content'><p>En este ejemplo, desreferenciar punteros crudos es una operación insegura, por lo que debe hacerse dentro de un bloque inseguro.</p>
</div><h2>Funciones Inseguras</h2>
<div class='content'><p>Las funciones inseguras son funciones que contienen código inseguro. Deben ser llamadas dentro de un bloque inseguro.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5zYWZlIGZuIGRhbmdlcm91cygpIHsKICAgIC8vIE9wZXJhY2lvbmVzIGluc2VndXJhcwp9CgpmbiBtYWluKCkgewogICAgdW5zYWZlIHsKICAgICAgICBkYW5nZXJvdXMoKTsKICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>unsafe fn dangerous() {
    // Operaciones inseguras
}

fn main() {
    unsafe {
        dangerous();
    }
}</pre></div><div class='content'><p>Aquí, la función <code>dangerous</code> está marcada como insegura, y debe ser llamada dentro de un bloque inseguro.</p>
</div><h2>Traits Inseguros</h2>
<div class='content'><p>Los traits inseguros son traits que tienen métodos que solo pueden ser implementados usando código inseguro.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5zYWZlIHRyYWl0IFVuc2FmZVRyYWl0IHsKICAgIC8vIE3DqXRvZG9zIHF1ZSByZXF1aWVyZW4gaW1wbGVtZW50YWNpw7NuIGluc2VndXJhCn0KCnVuc2FmZSBpbXBsIFVuc2FmZVRyYWl0IGZvciBTb21lVHlwZSB7CiAgICAvLyBJbXBsZW1lbnRhY2nDs24gaW5zZWd1cmEKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>unsafe trait UnsafeTrait {
    // M&eacute;todos que requieren implementaci&oacute;n insegura
}

unsafe impl UnsafeTrait for SomeType {
    // Implementaci&oacute;n insegura
}</pre></div><div class='content'><p>En este ejemplo, <code>UnsafeTrait</code> es un trait inseguro, y se implementa para <code>SomeType</code> usando código inseguro.</p>
</div><h1>Cuándo Usar Rust Inseguro</h1>
<div class='content'><p>Usar <code>unsafe</code> en Rust debe hacerse con precaución. Aquí hay algunos escenarios donde <code>unsafe</code> podría ser necesario:</p>
<ul>
<li><strong>Interfaz con C:</strong> Al llamar funciones de C o usar FFI (Interfaz de Función Extranjera).</li>
<li><strong>Optimización de Rendimiento:</strong> Cuando necesitas realizar optimizaciones de bajo nivel que el compilador de Rust no puede garantizar como seguras.</li>
<li><strong>Implementación de Traits Inseguros:</strong> Al implementar traits que requieren código inseguro.</li>
</ul>
</div><h1>Ejemplos y Ejercicios</h1>
<div class='content'></div><h2>Ejemplo 1: Desreferenciando Punteros Crudos</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zm4gbWFpbigpIHsKICAgIGxldCBtdXQgbnVtID0gMTA7CiAgICBsZXQgcjEgPSAmbnVtIGFzICpjb25zdCBpMzI7CiAgICBsZXQgcjIgPSAmbXV0IG51bSBhcyAqbXV0IGkzMjsKCiAgICB1bnNhZmUgewogICAgICAgIHByaW50bG4hKCJyMSBhcHVudGEgYToge30iLCAqcjEpOwogICAgICAgIHByaW50bG4hKCJyMiBhcHVudGEgYToge30iLCAqcjIpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>fn main() {
    let mut num = 10;
    let r1 = &amp;num as *const i32;
    let r2 = &amp;mut num as *mut i32;

    unsafe {
        println!(&quot;r1 apunta a: {}&quot;, *r1);
        println!(&quot;r2 apunta a: {}&quot;, *r2);
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicación:</strong> Este ejemplo demuestra cómo desreferenciar punteros crudos dentro de un bloque inseguro.</li>
</ul>
</div><h2>Ejercicio 1: Crear una Función Insegura</h2>
<div class='content'><p>Crea una función insegura llamada <code>unsafe_add</code> que tome dos punteros crudos a enteros y devuelva su suma.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5zYWZlIGZuIHVuc2FmZV9hZGQoYTogKmNvbnN0IGkzMiwgYjogKmNvbnN0IGkzMikgLT4gaTMyIHsKICAgICphICsgKmIKfQoKZm4gbWFpbigpIHsKICAgIGxldCB4ID0gNTsKICAgIGxldCB5ID0gMTA7CiAgICBsZXQgc3VtID0gdW5zYWZlIHsKICAgICAgICB1bnNhZmVfYWRkKCZ4LCAmeSkKICAgIH07CiAgICBwcmludGxuISgiU3VtYToge30iLCBzdW0pOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>unsafe fn unsafe_add(a: *const i32, b: *const i32) -&gt; i32 {
    *a + *b
}

fn main() {
    let x = 5;
    let y = 10;
    let sum = unsafe {
        unsafe_add(&amp;x, &amp;y)
    };
    println!(&quot;Suma: {}&quot;, sum);
}</pre></div><div class='content'></div><h2>Ejemplo 2: Implementando un Trait Inseguro</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5zYWZlIHRyYWl0IFVuc2FmZVRyYWl0IHsKICAgIGZuIHVuc2FmZV9tZXRob2QoJnNlbGYpOwp9CgpzdHJ1Y3QgTXlTdHJ1Y3Q7Cgp1bnNhZmUgaW1wbCBVbnNhZmVUcmFpdCBmb3IgTXlTdHJ1Y3QgewogICAgZm4gdW5zYWZlX21ldGhvZCgmc2VsZikgewogICAgICAgIHByaW50bG4hKCJNw6l0b2RvIGluc2VndXJvIGxsYW1hZG8iKTsKICAgIH0KfQoKZm4gbWFpbigpIHsKICAgIGxldCBpbnN0YW5jZSA9IE15U3RydWN0OwogICAgdW5zYWZlIHsKICAgICAgICBpbnN0YW5jZS51bnNhZmVfbWV0aG9kKCk7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>unsafe trait UnsafeTrait {
    fn unsafe_method(&amp;self);
}

struct MyStruct;

unsafe impl UnsafeTrait for MyStruct {
    fn unsafe_method(&amp;self) {
        println!(&quot;M&eacute;todo inseguro llamado&quot;);
    }
}

fn main() {
    let instance = MyStruct;
    unsafe {
        instance.unsafe_method();
    }
}</pre></div><div class='content'><ul>
<li><strong>Explicación:</strong> Este ejemplo muestra cómo definir e implementar un trait inseguro.</li>
</ul>
</div><h2>Ejercicio 2: Implementar un Trait Inseguro</h2>
<div class='content'><p>Define un trait inseguro llamado <code>UnsafeMath</code> con un método <code>unsafe_multiply</code> que multiplique dos enteros. Implementa este trait para una estructura llamada <code>Calculator</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5zYWZlIHRyYWl0IFVuc2FmZU1hdGggewogICAgZm4gdW5zYWZlX211bHRpcGx5KCZzZWxmLCBhOiBpMzIsIGI6IGkzMikgLT4gaTMyOwp9CgpzdHJ1Y3QgQ2FsY3VsYXRvcjsKCnVuc2FmZSBpbXBsIFVuc2FmZU1hdGggZm9yIENhbGN1bGF0b3IgewogICAgZm4gdW5zYWZlX211bHRpcGx5KCZzZWxmLCBhOiBpMzIsIGI6IGkzMikgLT4gaTMyIHsKICAgICAgICBhICogYgogICAgfQp9CgpmbiBtYWluKCkgewogICAgbGV0IGNhbGMgPSBDYWxjdWxhdG9yOwogICAgbGV0IHJlc3VsdCA9IHVuc2FmZSB7CiAgICAgICAgY2FsYy51bnNhZmVfbXVsdGlwbHkoMywgNCkKICAgIH07CiAgICBwcmludGxuISgiUmVzdWx0YWRvOiB7fSIsIHJlc3VsdCk7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>unsafe trait UnsafeMath {
    fn unsafe_multiply(&amp;self, a: i32, b: i32) -&gt; i32;
}

struct Calculator;

unsafe impl UnsafeMath for Calculator {
    fn unsafe_multiply(&amp;self, a: i32, b: i32) -&gt; i32 {
        a * b
    }
}

fn main() {
    let calc = Calculator;
    let result = unsafe {
        calc.unsafe_multiply(3, 4)
    };
    println!(&quot;Resultado: {}&quot;, result);
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Usar <code>unsafe</code> en Rust te permite realizar operaciones que el compilador no puede garantizar que sean seguras. Si bien proporciona más control y flexibilidad, también conlleva una mayor responsabilidad. Siempre usa <code>unsafe</code> con precaución y asegúrate de entender las implicaciones de omitir las comprobaciones de seguridad de Rust.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='raw-pointers'>&#x25C4;Punteros Crudos</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Funciones y Traits Inseguros</a>
	</div>
	<div class='col-4 text-end'>
					<a href='writing-tests'>Escribiendo Pruebas &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
