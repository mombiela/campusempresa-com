<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async/Await</title>

    <link rel="alternate" href="https://campusempresa.com/mod/typescript/05-02-async-await" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/typescript/05-02-async-await" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/typescript/05-02-async-await" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/typescript/05-02-async-await" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/typescript/05-02-async-await" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-promises' title="Promesas">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Async/Await</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-working-with-apis' title="Trabajando con APIs">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En este tema, aprenderemos sobre <code>async</code> y <code>await</code>, dos palabras clave que facilitan el trabajo con código asíncrono en TypeScript. Estas características permiten escribir código asíncrono que se lee y se comporta de manera similar al código síncrono, lo que hace que sea más fácil de entender y mantener.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ol>
<li>
<p><strong>Funciones Asíncronas (<code>async</code>)</strong>:</p>
<ul>
<li>Una función marcada con <code>async</code> siempre devuelve una promesa.</li>
<li>Dentro de una función <code>async</code>, puedes usar la palabra clave <code>await</code> para esperar a que una promesa se resuelva.</li>
</ul>
</li>
<li>
<p><strong><code>await</code></strong>:</p>
<ul>
<li><code>await</code> solo puede ser usado dentro de funciones <code>async</code>.</li>
<li>Pausa la ejecución de la función <code>async</code> y espera a que la promesa se resuelva o rechace.</li>
</ul>
</li>
</ol>
</div><h1>Ejemplo Básico</h1>
<div class='content'><p>Veamos un ejemplo básico para entender cómo funcionan <code>async</code> y <code>await</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gU2ltdWxhIHVuYSBvcGVyYWNpw7NuIGFzw61uY3JvbmEgdXNhbmRvIHVuYSBwcm9tZXNhCmZ1bmN0aW9uIGRlbGF5KG1zOiBudW1iZXIpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTsKfQoKLy8gRnVuY2nDs24gYXPDrW5jcm9uYSBxdWUgdXNhIGF3YWl0CmFzeW5jIGZ1bmN0aW9uIGFzeW5jRnVuY3Rpb24oKSB7CiAgICBjb25zb2xlLmxvZygnSW5pY2lvJyk7CiAgICBhd2FpdCBkZWxheSgyMDAwKTsgLy8gRXNwZXJhIDIgc2VndW5kb3MKICAgIGNvbnNvbGUubG9nKCdGaW4nKTsKfQoKYXN5bmNGdW5jdGlvbigpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Simula una operaci&oacute;n as&iacute;ncrona usando una promesa
function delay(ms: number) {
    return new Promise(resolve =&gt; setTimeout(resolve, ms));
}

// Funci&oacute;n as&iacute;ncrona que usa await
async function asyncFunction() {
    console.log('Inicio');
    await delay(2000); // Espera 2 segundos
    console.log('Fin');
}

asyncFunction();</pre></div><div class='content'></div><h2>Explicación del Código</h2>
<div class='content'><ol>
<li>
<p><strong>Función <code>delay</code></strong>:</p>
<ul>
<li>Esta función devuelve una promesa que se resuelve después de un tiempo especificado (en milisegundos).</li>
</ul>
</li>
<li>
<p><strong>Función <code>asyncFunction</code></strong>:</p>
<ul>
<li>La función está marcada con <code>async</code>, lo que significa que devolverá una promesa.</li>
<li>Usa <code>await</code> para esperar a que la promesa devuelta por <code>delay</code> se resuelva antes de continuar con la ejecución.</li>
</ul>
</li>
</ol>
</div><h1>Ejemplo Práctico: Llamadas a APIs</h1>
<div class='content'><p>Vamos a ver un ejemplo más práctico donde hacemos una llamada a una API usando <code>fetch</code> y <code>async/await</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRnVuY2nDs24gYXPDrW5jcm9uYSBwYXJhIG9idGVuZXIgZGF0b3MgZGUgdW5hIEFQSQphc3luYyBmdW5jdGlvbiBmZXRjaERhdGEodXJsOiBzdHJpbmcpIHsKICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwpOwogICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZXR3b3JrIHJlc3BvbnNlIHdhcyBub3Qgb2snKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgICAgICByZXR1cm4gZGF0YTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRmV0Y2ggZXJyb3I6JywgZXJyb3IpOwogICAgfQp9CgovLyBVc28gZGUgbGEgZnVuY2nDs24gZmV0Y2hEYXRhCmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7CiAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3Bvc3RzLzEnOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IGZldGNoRGF0YSh1cmwpOwogICAgY29uc29sZS5sb2coZGF0YSk7Cn0KCm1haW4oKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Funci&oacute;n as&iacute;ncrona para obtener datos de una API
async function fetchData(url: string) {
    try {
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const data = await response.json();
        return data;
    } catch (error) {
        console.error('Fetch error:', error);
    }
}

// Uso de la funci&oacute;n fetchData
async function main() {
    const url = 'https://jsonplaceholder.typicode.com/posts/1';
    const data = await fetchData(url);
    console.log(data);
}

main();</pre></div><div class='content'></div><h2>Explicación del Código</h2>
<div class='content'><ol>
<li>
<p><strong>Función <code>fetchData</code></strong>:</p>
<ul>
<li>Usa <code>fetch</code> para hacer una llamada a la API.</li>
<li><code>await</code> se usa para esperar a que la promesa de <code>fetch</code> se resuelva.</li>
<li>Si la respuesta no es correcta (<code>response.ok</code>), lanza un error.</li>
<li>Usa <code>await</code> nuevamente para esperar a que la promesa de <code>response.json()</code> se resuelva y devuelva los datos.</li>
</ul>
</li>
<li>
<p><strong>Función <code>main</code></strong>:</p>
<ul>
<li>Llama a <code>fetchData</code> y espera a que se resuelva antes de imprimir los datos.</li>
</ul>
</li>
</ol>
</div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio</h2>
<div class='content'><p>Crea una función asíncrona que haga una llamada a la API de GitHub para obtener información sobre un usuario específico y luego imprima el nombre del usuario y el número de repositorios públicos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZ2V0R2l0SHViVXNlckluZm8odXNlcm5hbWU6IHN0cmluZykgewogICAgLy8gVHUgY8OzZGlnbyBhcXXDrQp9CgovLyBMbGFtYSBhIGxhIGZ1bmNpw7NuIGNvbiB1biBub21icmUgZGUgdXN1YXJpbyBkZSBHaXRIdWIKZ2V0R2l0SHViVXNlckluZm8oJ29jdG9jYXQnKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function getGitHubUserInfo(username: string) {
    // Tu c&oacute;digo aqu&iacute;
}

// Llama a la funci&oacute;n con un nombre de usuario de GitHub
getGitHubUserInfo('octocat');</pre></div><div class='content'></div><h2>Solución</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZ2V0R2l0SHViVXNlckluZm8odXNlcm5hbWU6IHN0cmluZykgewogICAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vdXNlcnMvJHt1c2VybmFtZX1gOwogICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7CiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05ldHdvcmsgcmVzcG9uc2Ugd2FzIG5vdCBvaycpOwogICAgICAgIH0KICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICAgIGNvbnNvbGUubG9nKGBOb21icmU6ICR7ZGF0YS5uYW1lfWApOwogICAgICAgIGNvbnNvbGUubG9nKGBSZXBvc2l0b3Jpb3MgUMO6YmxpY29zOiAke2RhdGEucHVibGljX3JlcG9zfWApOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdGZXRjaCBlcnJvcjonLCBlcnJvcik7CiAgICB9Cn0KCi8vIExsYW1hIGEgbGEgZnVuY2nDs24gY29uIHVuIG5vbWJyZSBkZSB1c3VhcmlvIGRlIEdpdEh1YgpnZXRHaXRIdWJVc2VySW5mbygnb2N0b2NhdCcpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function getGitHubUserInfo(username: string) {
    const url = `https://api.github.com/users/${username}`;
    try {
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        const data = await response.json();
        console.log(`Nombre: ${data.name}`);
        console.log(`Repositorios P&uacute;blicos: ${data.public_repos}`);
    } catch (error) {
        console.error('Fetch error:', error);
    }
}

// Llama a la funci&oacute;n con un nombre de usuario de GitHub
getGitHubUserInfo('octocat');</pre></div><div class='content'></div><h2>Explicación de la Solución</h2>
<div class='content'><ol>
<li>
<p><strong>Construcción de la URL</strong>:</p>
<ul>
<li>La URL se construye usando el nombre de usuario proporcionado.</li>
</ul>
</li>
<li>
<p><strong>Llamada a la API</strong>:</p>
<ul>
<li><code>fetch</code> se usa para hacer la llamada a la API de GitHub.</li>
<li><code>await</code> se usa para esperar a que la promesa de <code>fetch</code> se resuelva.</li>
</ul>
</li>
<li>
<p><strong>Manejo de Errores</strong>:</p>
<ul>
<li>Si la respuesta no es correcta, se lanza un error.</li>
<li>Se captura cualquier error y se imprime en la consola.</li>
</ul>
</li>
<li>
<p><strong>Impresión de Datos</strong>:</p>
<ul>
<li>Se imprimen el nombre del usuario y el número de repositorios públicos.</li>
</ul>
</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, hemos aprendido cómo <code>async</code> y <code>await</code> pueden simplificar el manejo de código asíncrono en TypeScript. Hemos visto ejemplos básicos y prácticos, y hemos realizado un ejercicio para reforzar los conceptos. Ahora deberías sentirte más cómodo trabajando con promesas y funciones asíncronas en TypeScript.</p>
<p>En el próximo módulo, profundizaremos en herramientas y mejores prácticas para trabajar con TypeScript en proyectos reales.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-promises' title="Promesas">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-working-with-apis' title="Trabajando con APIs">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
