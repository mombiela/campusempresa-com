<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metadatos de archivos y seguridad</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/05-04-file-metadata-and-security" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/05-04-file-metadata-and-security" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/05-04-file-metadata-and-security" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/firebase/05-04-file-metadata-and-security" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/firebase/05-04-file-metadata-and-security" class="px-2">CA</a>
<br>
			<cite>Construyendo la sociedad de hoy y del mañana</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Lenguajes de Programación</a>
				 					<a href="/categ/frameworks">Frameworks y Librerías</a>
				 					<a href="/categ/tech-tools">Herramientas Técnicas</a>
				 					<a href="/categ/foundations">Fundamentos Teóricos</a>
				 					<a href="/categ/soft-skills">Habilidades Sociales</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-03-downloading-files' title="Descarga de archivos">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Metadatos de archivos y seguridad</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-01-introduction-to-cloud-messaging' title="Introducción a la mensajería en la nube">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introducción</p>
</h1>
<div class='content'><p>En este tema, exploraremos cómo manejar los metadatos de archivos en Firebase Storage y cómo implementar medidas de seguridad para proteger los datos almacenados. Los metadatos son información adicional sobre los archivos que puede ser útil para la gestión y organización de los mismos. La seguridad es crucial para garantizar que solo los usuarios autorizados puedan acceder y manipular los archivos.</p>
</div><h1><p>Metadatos de Archivos</p>
</h1>
<div class='content'></div><h2><p>¿Qué son los Metadatos?</p>
</h2>
<div class='content'><p>Los metadatos son datos que describen otros datos. En el contexto de Firebase Storage, los metadatos de archivos pueden incluir información como el nombre del archivo, el tipo de contenido (MIME type), la fecha de creación, y cualquier otra información personalizada que desees agregar.</p>
</div><h2><p>Ejemplo de Metadatos</p>
</h2>
<div class='content'><p>Aquí hay un ejemplo de cómo se pueden definir y agregar metadatos a un archivo en Firebase Storage:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUmVmZXJlbmNpYSBhbCBhcmNoaXZvIGVuIEZpcmViYXNlIFN0b3JhZ2UKdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCd1cGxvYWRzL215RmlsZS50eHQnKTsKCi8vIE1ldGFkYXRvcyBkZWwgYXJjaGl2bwp2YXIgbWV0YWRhdGEgPSB7CiAgY29udGVudFR5cGU6ICd0ZXh0L3BsYWluJywKICBjdXN0b21NZXRhZGF0YTogewogICAgJ3VwbG9hZGVkQnknOiAndXNlcjEyMycsCiAgICAnZGVzY3JpcHRpb24nOiAnQXJjaGl2byBkZSB0ZXh0byBkZSBlamVtcGxvJwogIH0KfTsKCi8vIFN1YmlyIGVsIGFyY2hpdm8gY29uIG1ldGFkYXRvcwp2YXIgZmlsZSA9IC4uLiAvLyBFbCBhcmNoaXZvIHF1ZSBkZXNlYXMgc3ViaXIKc3RvcmFnZVJlZi5wdXQoZmlsZSwgbWV0YWRhdGEpLnRoZW4oKHNuYXBzaG90KSA9PiB7CiAgY29uc29sZS5sb2coJ0FyY2hpdm8gc3ViaWRvIGNvbiBtZXRhZGF0b3M6Jywgc25hcHNob3QubWV0YWRhdGEpOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Referencia al archivo en Firebase Storage
var storageRef = firebase.storage().ref('uploads/myFile.txt');

// Metadatos del archivo
var metadata = {
  contentType: 'text/plain',
  customMetadata: {
    'uploadedBy': 'user123',
    'description': 'Archivo de texto de ejemplo'
  }
};

// Subir el archivo con metadatos
var file = ... // El archivo que deseas subir
storageRef.put(file, metadata).then((snapshot) =&gt; {
  console.log('Archivo subido con metadatos:', snapshot.metadata);
});</pre></div><div class='content'></div><h2><p>Explicación del Código</p>
</h2>
<div class='content'><ol>
<li><strong>Referencia al archivo</strong>: <code>storageRef</code> es una referencia al archivo en Firebase Storage.</li>
<li><strong>Definición de metadatos</strong>: <code>metadata</code> es un objeto que contiene el tipo de contenido (<code>contentType</code>) y metadatos personalizados (<code>customMetadata</code>).</li>
<li><strong>Subida del archivo</strong>: <code>storageRef.put(file, metadata)</code> sube el archivo junto con los metadatos definidos.</li>
</ol>
</div><h1><p>Seguridad en Firebase Storage</p>
</h1>
<div class='content'></div><h2><p>Reglas de Seguridad</p>
</h2>
<div class='content'><p>Firebase Storage utiliza reglas de seguridad basadas en Firebase Authentication para controlar el acceso a los archivos. Estas reglas se definen en la consola de Firebase y permiten especificar quién puede leer o escribir en determinadas ubicaciones de almacenamiento.</p>
</div><h2><p>Ejemplo de Reglas de Seguridad</p>
</h2>
<div class='content'><p>Aquí hay un ejemplo de reglas de seguridad que permiten a los usuarios autenticados leer y escribir en su propio directorio de archivos:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmljZSBmaXJlYmFzZS5zdG9yYWdlIHsKICBtYXRjaCAvYi97YnVja2V0fS9vIHsKICAgIG1hdGNoIC91cGxvYWRzL3t1c2VySWR9L3thbGxQYXRocz0qKn0gewogICAgICBhbGxvdyByZWFkLCB3cml0ZTogaWYgcmVxdWVzdC5hdXRoICE9IG51bGwgJiYgcmVxdWVzdC5hdXRoLnVpZCA9PSB1c2VySWQ7CiAgICB9CiAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>service firebase.storage {
  match /b/{bucket}/o {
    match /uploads/{userId}/{allPaths=**} {
      allow read, write: if request.auth != null &amp;&amp; request.auth.uid == userId;
    }
  }
}</pre></div><div class='content'></div><h2><p>Explicación de las Reglas</p>
</h2>
<div class='content'><ol>
<li><strong>Estructura de las reglas</strong>: <code>service firebase.storage</code> define el servicio de almacenamiento.</li>
<li><strong>Coincidencia de rutas</strong>: <code>match /uploads/{userId}/{allPaths=**}</code> coincide con todas las rutas dentro del directorio <code>uploads</code> para cada <code>userId</code>.</li>
<li><strong>Permisos de lectura y escritura</strong>: <code>allow read, write</code> permite leer y escribir si el usuario está autenticado (<code>request.auth != null</code>) y el <code>userId</code> en la ruta coincide con el <code>uid</code> del usuario autenticado (<code>request.auth.uid == userId</code>).</li>
</ol>
</div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio</p>
</h2>
<div class='content'><ol>
<li><strong>Subir un archivo con metadatos personalizados</strong>: Crea una aplicación que permita a los usuarios subir archivos a Firebase Storage con metadatos personalizados, como el nombre del usuario y una descripción del archivo.</li>
<li><strong>Implementar reglas de seguridad</strong>: Define reglas de seguridad que permitan a los usuarios autenticados leer y escribir solo en sus propios directorios de archivos.</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'><h4>Subir un archivo con metadatos personalizados</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUmVmZXJlbmNpYSBhbCBhcmNoaXZvIGVuIEZpcmViYXNlIFN0b3JhZ2UKdmFyIHN0b3JhZ2VSZWYgPSBmaXJlYmFzZS5zdG9yYWdlKCkucmVmKCd1cGxvYWRzL3VzZXIxMjMvbXlGaWxlLnR4dCcpOwoKLy8gTWV0YWRhdG9zIGRlbCBhcmNoaXZvCnZhciBtZXRhZGF0YSA9IHsKICBjb250ZW50VHlwZTogJ3RleHQvcGxhaW4nLAogIGN1c3RvbU1ldGFkYXRhOiB7CiAgICAndXBsb2FkZWRCeSc6ICd1c2VyMTIzJywKICAgICdkZXNjcmlwdGlvbic6ICdBcmNoaXZvIGRlIHRleHRvIGRlIGVqZW1wbG8nCiAgfQp9OwoKLy8gU3ViaXIgZWwgYXJjaGl2byBjb24gbWV0YWRhdG9zCnZhciBmaWxlID0gLi4uIC8vIEVsIGFyY2hpdm8gcXVlIGRlc2VhcyBzdWJpcgpzdG9yYWdlUmVmLnB1dChmaWxlLCBtZXRhZGF0YSkudGhlbigoc25hcHNob3QpID0+IHsKICBjb25zb2xlLmxvZygnQXJjaGl2byBzdWJpZG8gY29uIG1ldGFkYXRvczonLCBzbmFwc2hvdC5tZXRhZGF0YSk7Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Referencia al archivo en Firebase Storage
var storageRef = firebase.storage().ref('uploads/user123/myFile.txt');

// Metadatos del archivo
var metadata = {
  contentType: 'text/plain',
  customMetadata: {
    'uploadedBy': 'user123',
    'description': 'Archivo de texto de ejemplo'
  }
};

// Subir el archivo con metadatos
var file = ... // El archivo que deseas subir
storageRef.put(file, metadata).then((snapshot) =&gt; {
  console.log('Archivo subido con metadatos:', snapshot.metadata);
});</pre></div><div class='content'><h4>Reglas de seguridad</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmljZSBmaXJlYmFzZS5zdG9yYWdlIHsKICBtYXRjaCAvYi97YnVja2V0fS9vIHsKICAgIG1hdGNoIC91cGxvYWRzL3t1c2VySWR9L3thbGxQYXRocz0qKn0gewogICAgICBhbGxvdyByZWFkLCB3cml0ZTogaWYgcmVxdWVzdC5hdXRoICE9IG51bGwgJiYgcmVxdWVzdC5hdXRoLnVpZCA9PSB1c2VySWQ7CiAgICB9CiAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>service firebase.storage {
  match /b/{bucket}/o {
    match /uploads/{userId}/{allPaths=**} {
      allow read, write: if request.auth != null &amp;&amp; request.auth.uid == userId;
    }
  }
}</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En este tema, hemos aprendido cómo manejar los metadatos de archivos en Firebase Storage y cómo implementar reglas de seguridad para proteger los datos almacenados. Los metadatos son útiles para agregar información adicional a los archivos, y las reglas de seguridad son esenciales para controlar el acceso a los mismos. Con estos conocimientos, estás preparado para gestionar y proteger los archivos en tu aplicación de manera efectiva.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-03-downloading-files' title="Descarga de archivos">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-01-introduction-to-cloud-messaging' title="Introducción a la mensajería en la nube">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
