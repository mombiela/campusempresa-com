<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Descarga de archivos</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/05-03-downloading-files" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/05-03-downloading-files" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/05-03-downloading-files" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=3" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<a href="https://enterprisecampus.net/mod/firebase/05-03-downloading-files" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/firebase/05-03-downloading-files" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>Construyendo la sociedad de hoy y del mañana</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Lenguajes</a>
				 					<a href="/categ/frameworks">Frameworks</a>
				 					<a href="/categ/tech-tools">Herramientas</a>
				 					<a href="/categ/foundations">Fundamentos</a>
				 					<a href="/categ/soft-skills">Competencias</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-02-uploading-files' title="Subida de archivos">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Descarga de archivos</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-04-file-metadata-and-security' title="Metadatos de archivos y seguridad">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En este tema, aprenderemos cómo descargar archivos desde Firebase Storage a nuestra aplicación. Firebase Storage es una solución poderosa para almacenar y servir contenido generado por el usuario, como fotos y videos. La descarga de archivos es una funcionalidad esencial para muchas aplicaciones, y Firebase Storage facilita este proceso.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'><ol>
<li><strong>Referencia de archivo</strong>: Para descargar un archivo, primero necesitamos una referencia al archivo en Firebase Storage.</li>
<li><strong>Métodos de descarga</strong>: Firebase proporciona varios métodos para descargar archivos, incluyendo la descarga directa a un <code>URL</code> o a un <code>byte array</code>.</li>
<li><strong>Manejo de errores</strong>: Es importante manejar adecuadamente los errores que pueden ocurrir durante la descarga, como problemas de red o permisos insuficientes.</li>
</ol>
</div><h1><p>Pasos para Descargar Archivos</p>
</h1>
<div class='content'></div><h2><ol>
<li>Configuración Inicial</li>
</ol>
</h2>
<div class='content'><p>Antes de comenzar, asegúrate de haber configurado Firebase en tu proyecto y de tener acceso a Firebase Storage. Si no lo has hecho, revisa el módulo de configuración de Firebase.</p>
</div><h2><ol start="2">
<li>Obtener una Referencia al Archivo</li>
</ol>
</h2>
<div class='content'><p>Primero, necesitamos obtener una referencia al archivo que queremos descargar. Esto se hace utilizando la ruta del archivo en Firebase Storage.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gT2J0ZW5lciB1bmEgaW5zdGFuY2lhIGRlIEZpcmViYXNlU3RvcmFnZQpGaXJlYmFzZVN0b3JhZ2Ugc3RvcmFnZSA9IEZpcmViYXNlU3RvcmFnZS5nZXRJbnN0YW5jZSgpOwoKLy8gQ3JlYXIgdW5hIHJlZmVyZW5jaWEgYWwgYXJjaGl2bwpTdG9yYWdlUmVmZXJlbmNlIHN0b3JhZ2VSZWYgPSBzdG9yYWdlLmdldFJlZmVyZW5jZSgpLmNoaWxkKCJwYXRoL3RvL3lvdXIvZmlsZS5qcGciKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Obtener una instancia de FirebaseStorage
FirebaseStorage storage = FirebaseStorage.getInstance();

// Crear una referencia al archivo
StorageReference storageRef = storage.getReference().child(&quot;path/to/your/file.jpg&quot;);</pre></div><div class='content'></div><h2><ol start="3">
<li>Descargar el Archivo</li>
</ol>
</h2>
<div class='content'><p>Firebase Storage proporciona varios métodos para descargar archivos. Aquí veremos dos métodos comunes: descarga a un <code>byte array</code> y descarga a un <code>URL</code>.</p>
<h4>Método 1: Descargar a un Byte Array</h4>
<p>Este método es útil cuando necesitas manipular los datos del archivo directamente en tu aplicación.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmluYWwgbG9uZyBPTkVfTUVHQUJZVEUgPSAxMDI0ICogMTAyNDsKc3RvcmFnZVJlZi5nZXRCeXRlcyhPTkVfTUVHQUJZVEUpLmFkZE9uU3VjY2Vzc0xpc3RlbmVyKG5ldyBPblN1Y2Nlc3NMaXN0ZW5lcjxieXRlW10+KCkgewogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBvblN1Y2Nlc3MoYnl0ZVtdIGJ5dGVzKSB7CiAgICAgICAgLy8gTG9zIGRhdG9zIGRlbCBhcmNoaXZvIGVzdMOhbiBlbiBlbCBhcnJheSBkZSBieXRlcwogICAgICAgIC8vIFB1ZWRlcyBjb252ZXJ0aXIgbG9zIGJ5dGVzIGEgdW5hIGltYWdlbiwgdGV4dG8sIGV0Yy4KICAgIH0KfSkuYWRkT25GYWlsdXJlTGlzdGVuZXIobmV3IE9uRmFpbHVyZUxpc3RlbmVyKCkgewogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBvbkZhaWx1cmUoQE5vbk51bGwgRXhjZXB0aW9uIGV4Y2VwdGlvbikgewogICAgICAgIC8vIE1hbmVqYXIgY3VhbHF1aWVyIGVycm9yIHF1ZSBvY3VycmEgZHVyYW50ZSBsYSBkZXNjYXJnYQogICAgfQp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>final long ONE_MEGABYTE = 1024 * 1024;
storageRef.getBytes(ONE_MEGABYTE).addOnSuccessListener(new OnSuccessListener&lt;byte[]&gt;() {
    @Override
    public void onSuccess(byte[] bytes) {
        // Los datos del archivo est&aacute;n en el array de bytes
        // Puedes convertir los bytes a una imagen, texto, etc.
    }
}).addOnFailureListener(new OnFailureListener() {
    @Override
    public void onFailure(@NonNull Exception exception) {
        // Manejar cualquier error que ocurra durante la descarga
    }
});</pre></div><div class='content'><h4>Método 2: Descargar a un URL</h4>
<p>Este método es útil cuando necesitas mostrar el archivo directamente en la interfaz de usuario, como una imagen en un <code>ImageView</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RvcmFnZVJlZi5nZXREb3dubG9hZFVybCgpLmFkZE9uU3VjY2Vzc0xpc3RlbmVyKG5ldyBPblN1Y2Nlc3NMaXN0ZW5lcjxVcmk+KCkgewogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBvblN1Y2Nlc3MoVXJpIHVyaSkgewogICAgICAgIC8vIEVsIFVSTCBkZSBkZXNjYXJnYSBlc3TDoSBkaXNwb25pYmxlCiAgICAgICAgLy8gUHVlZGVzIHVzYXIgdW5hIGJpYmxpb3RlY2EgY29tbyBHbGlkZSBvIFBpY2Fzc28gcGFyYSBjYXJnYXIgbGEgaW1hZ2VuIGVuIHVuIEltYWdlVmlldwogICAgICAgIEdsaWRlLndpdGgoY29udGV4dCkubG9hZCh1cmkpLmludG8oaW1hZ2VWaWV3KTsKICAgIH0KfSkuYWRkT25GYWlsdXJlTGlzdGVuZXIobmV3IE9uRmFpbHVyZUxpc3RlbmVyKCkgewogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBvbkZhaWx1cmUoQE5vbk51bGwgRXhjZXB0aW9uIGV4Y2VwdGlvbikgewogICAgICAgIC8vIE1hbmVqYXIgY3VhbHF1aWVyIGVycm9yIHF1ZSBvY3VycmEgZHVyYW50ZSBsYSBkZXNjYXJnYQogICAgfQp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>storageRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {
    @Override
    public void onSuccess(Uri uri) {
        // El URL de descarga est&aacute; disponible
        // Puedes usar una biblioteca como Glide o Picasso para cargar la imagen en un ImageView
        Glide.with(context).load(uri).into(imageView);
    }
}).addOnFailureListener(new OnFailureListener() {
    @Override
    public void onFailure(@NonNull Exception exception) {
        // Manejar cualquier error que ocurra durante la descarga
    }
});</pre></div><div class='content'></div><h2><ol start="4">
<li>Manejo de Errores</li>
</ol>
</h2>
<div class='content'><p>Es crucial manejar los errores que pueden ocurrir durante la descarga. Algunos errores comunes incluyen:</p>
<ul>
<li><strong>StorageException</strong>: Problemas con Firebase Storage, como permisos insuficientes.</li>
<li><strong>NetworkError</strong>: Problemas de conectividad de red.</li>
</ul>
<p>Asegúrate de proporcionar retroalimentación adecuada al usuario en caso de que ocurra un error.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RvcmFnZVJlZi5nZXRCeXRlcyhPTkVfTUVHQUJZVEUpLmFkZE9uRmFpbHVyZUxpc3RlbmVyKG5ldyBPbkZhaWx1cmVMaXN0ZW5lcigpIHsKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgb25GYWlsdXJlKEBOb25OdWxsIEV4Y2VwdGlvbiBleGNlcHRpb24pIHsKICAgICAgICBpZiAoZXhjZXB0aW9uIGluc3RhbmNlb2YgU3RvcmFnZUV4Y2VwdGlvbikgewogICAgICAgICAgICAvLyBNYW5lamFyIGVycm9yZXMgZXNwZWPDrWZpY29zIGRlIEZpcmViYXNlIFN0b3JhZ2UKICAgICAgICB9IGVsc2UgaWYgKGV4Y2VwdGlvbiBpbnN0YW5jZW9mIE5ldHdvcmtFcnJvcikgewogICAgICAgICAgICAvLyBNYW5lamFyIGVycm9yZXMgZGUgcmVkCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gTWFuZWphciBvdHJvcyB0aXBvcyBkZSBlcnJvcmVzCiAgICAgICAgfQogICAgfQp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>storageRef.getBytes(ONE_MEGABYTE).addOnFailureListener(new OnFailureListener() {
    @Override
    public void onFailure(@NonNull Exception exception) {
        if (exception instanceof StorageException) {
            // Manejar errores espec&iacute;ficos de Firebase Storage
        } else if (exception instanceof NetworkError) {
            // Manejar errores de red
        } else {
            // Manejar otros tipos de errores
        }
    }
});</pre></div><div class='content'></div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Descargar y Mostrar una Imagen</p>
</h2>
<div class='content'><p><strong>Objetivo</strong>: Descargar una imagen desde Firebase Storage y mostrarla en un <code>ImageView</code>.</p>
<p><strong>Instrucciones</strong>:</p>
<ol>
<li>Configura Firebase Storage en tu proyecto.</li>
<li>Sube una imagen a Firebase Storage.</li>
<li>Escribe el código para descargar la imagen y mostrarla en un <code>ImageView</code>.</li>
</ol>
<p><strong>Solución</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUGFzbyAxOiBDb25maWd1cmFyIEZpcmViYXNlIFN0b3JhZ2UKRmlyZWJhc2VTdG9yYWdlIHN0b3JhZ2UgPSBGaXJlYmFzZVN0b3JhZ2UuZ2V0SW5zdGFuY2UoKTsKU3RvcmFnZVJlZmVyZW5jZSBzdG9yYWdlUmVmID0gc3RvcmFnZS5nZXRSZWZlcmVuY2UoKS5jaGlsZCgiaW1hZ2VzL215SW1hZ2UuanBnIik7CgovLyBQYXNvIDI6IERlc2NhcmdhciBsYSBpbWFnZW4geSBtb3N0cmFybGEgZW4gdW4gSW1hZ2VWaWV3CnN0b3JhZ2VSZWYuZ2V0RG93bmxvYWRVcmwoKS5hZGRPblN1Y2Nlc3NMaXN0ZW5lcihuZXcgT25TdWNjZXNzTGlzdGVuZXI8VXJpPigpIHsKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgb25TdWNjZXNzKFVyaSB1cmkpIHsKICAgICAgICAvLyBVc2FyIEdsaWRlIHBhcmEgY2FyZ2FyIGxhIGltYWdlbiBlbiBlbCBJbWFnZVZpZXcKICAgICAgICBHbGlkZS53aXRoKGNvbnRleHQpLmxvYWQodXJpKS5pbnRvKGltYWdlVmlldyk7CiAgICB9Cn0pLmFkZE9uRmFpbHVyZUxpc3RlbmVyKG5ldyBPbkZhaWx1cmVMaXN0ZW5lcigpIHsKICAgIEBPdmVycmlkZQogICAgcHVibGljIHZvaWQgb25GYWlsdXJlKEBOb25OdWxsIEV4Y2VwdGlvbiBleGNlcHRpb24pIHsKICAgICAgICAvLyBNYW5lamFyIGN1YWxxdWllciBlcnJvciBxdWUgb2N1cnJhIGR1cmFudGUgbGEgZGVzY2FyZ2EKICAgICAgICBUb2FzdC5tYWtlVGV4dChjb250ZXh0LCAiRXJyb3IgYWwgZGVzY2FyZ2FyIGxhIGltYWdlbiIsIFRvYXN0LkxFTkdUSF9TSE9SVCkuc2hvdygpOwogICAgfQp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Paso 1: Configurar Firebase Storage
FirebaseStorage storage = FirebaseStorage.getInstance();
StorageReference storageRef = storage.getReference().child(&quot;images/myImage.jpg&quot;);

// Paso 2: Descargar la imagen y mostrarla en un ImageView
storageRef.getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {
    @Override
    public void onSuccess(Uri uri) {
        // Usar Glide para cargar la imagen en el ImageView
        Glide.with(context).load(uri).into(imageView);
    }
}).addOnFailureListener(new OnFailureListener() {
    @Override
    public void onFailure(@NonNull Exception exception) {
        // Manejar cualquier error que ocurra durante la descarga
        Toast.makeText(context, &quot;Error al descargar la imagen&quot;, Toast.LENGTH_SHORT).show();
    }
});</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En este tema, hemos aprendido cómo descargar archivos desde Firebase Storage utilizando referencias de archivo y métodos de descarga proporcionados por Firebase. También hemos visto cómo manejar errores comunes que pueden ocurrir durante la descarga. Con estos conocimientos, puedes integrar la funcionalidad de descarga de archivos en tu aplicación de manera efectiva.</p>
<p>En el próximo tema, exploraremos los metadatos de archivos y las reglas de seguridad en Firebase Storage.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-02-uploading-files' title="Subida de archivos">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-04-file-metadata-and-security' title="Metadatos de archivos y seguridad">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Publicidad</h1>
<p>Este espacio está destinado a publicidad.</p>
<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>¡Gracias por colaborar!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
