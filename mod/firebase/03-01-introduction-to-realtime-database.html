<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducción a la base de datos en tiempo real</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/03-01-introduction-to-realtime-database" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/03-01-introduction-to-realtime-database" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/03-01-introduction-to-realtime-database" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/firebase/03-01-introduction-to-realtime-database" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/firebase/03-01-introduction-to-realtime-database" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-04-managing-users' title="Gestión de usuarios">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Introducción a la base de datos en tiempo real</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='03-02-reading-and-writing-data' title="Lectura y escritura de datos">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1><p>¿Qué es la base de datos en tiempo real de Firebase?</p>
</h1>
<div class='content'><p>La base de datos en tiempo real de Firebase es una base de datos NoSQL alojada en la nube que permite almacenar y sincronizar datos entre tus usuarios en tiempo real. Esta base de datos es ideal para aplicaciones que requieren actualizaciones instantáneas, como aplicaciones de chat, juegos multijugador, o cualquier aplicación que necesite reflejar cambios de datos en tiempo real.</p>
</div><h2><p>Características clave:</p>
</h2>
<div class='content'><ul>
<li><strong>Sincronización en tiempo real</strong>: Los datos se sincronizan automáticamente entre todos los clientes conectados.</li>
<li><strong>Soporte sin conexión</strong>: Los datos se almacenan en caché localmente y se sincronizan cuando el dispositivo vuelve a estar en línea.</li>
<li><strong>Escalabilidad</strong>: Diseñada para manejar grandes cantidades de datos y usuarios simultáneos.</li>
<li><strong>Seguridad</strong>: Reglas de seguridad basadas en JSON que permiten definir quién tiene acceso a qué datos.</li>
</ul>
</div><h1><p>Configuración inicial</p>
</h1>
<div class='content'></div><h2><p>Paso 1: Crear un proyecto en Firebase</p>
</h2>
<div class='content'><ol>
<li>Ve a la <a href="https://console.firebase.google.com/">consola de Firebase</a>.</li>
<li>Haz clic en &quot;Agregar proyecto&quot; y sigue las instrucciones para crear un nuevo proyecto.</li>
</ol>
</div><h2><p>Paso 2: Agregar la base de datos en tiempo real a tu proyecto</p>
</h2>
<div class='content'><ol>
<li>En la consola de Firebase, selecciona tu proyecto.</li>
<li>En el menú de la izquierda, selecciona &quot;Base de datos&quot; y luego &quot;Base de datos en tiempo real&quot;.</li>
<li>Haz clic en &quot;Crear base de datos&quot; y selecciona el modo de inicio (puedes elegir entre &quot;Modo bloqueado&quot; o &quot;Modo de prueba&quot;).</li>
</ol>
</div><h2><p>Paso 3: Configurar las reglas de seguridad</p>
</h2>
<div class='content'><p>Las reglas de seguridad determinan quién puede leer y escribir en tu base de datos. Para empezar, puedes usar las siguientes reglas de prueba:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICIucmVhZCI6ICJhdXRoICE9IG51bGwiLAogICAgIi53cml0ZSI6ICJhdXRoICE9IG51bGwiCiAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;.read&quot;: &quot;auth != null&quot;,
    &quot;.write&quot;: &quot;auth != null&quot;
  }
}</pre></div><div class='content'><p>Estas reglas permiten que solo los usuarios autenticados puedan leer y escribir en la base de datos.</p>
</div><h1><p>Estructura de la base de datos</p>
</h1>
<div class='content'><p>La base de datos en tiempo real de Firebase utiliza una estructura de árbol JSON. Aquí tienes un ejemplo de cómo podría verse una base de datos para una aplicación de chat:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJjaGF0cyI6IHsKICAgICJjaGF0MSI6IHsKICAgICAgIm1lc3NhZ2UiOiAiSG9sYSwgwr9jw7NtbyBlc3TDoXM/IiwKICAgICAgInRpbWVzdGFtcCI6IDE2MzMwMjQ4MDAsCiAgICAgICJ1c2VyIjogInVzZXIxIgogICAgfSwKICAgICJjaGF0MiI6IHsKICAgICAgIm1lc3NhZ2UiOiAiwqFFc3RveSBiaWVuLCBncmFjaWFzISIsCiAgICAgICJ0aW1lc3RhbXAiOiAxNjMzMDI0OTAwLAogICAgICAidXNlciI6ICJ1c2VyMiIKICAgIH0KICB9LAogICJ1c2VycyI6IHsKICAgICJ1c2VyMSI6IHsKICAgICAgIm5hbWUiOiAiSnVhbiIsCiAgICAgICJlbWFpbCI6ICJqdWFuQGV4YW1wbGUuY29tIgogICAgfSwKICAgICJ1c2VyMiI6IHsKICAgICAgIm5hbWUiOiAiTWFyw61hIiwKICAgICAgImVtYWlsIjogIm1hcmlhQGV4YW1wbGUuY29tIgogICAgfQogIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;chats&quot;: {
    &quot;chat1&quot;: {
      &quot;message&quot;: &quot;Hola, &iquest;c&oacute;mo est&aacute;s?&quot;,
      &quot;timestamp&quot;: 1633024800,
      &quot;user&quot;: &quot;user1&quot;
    },
    &quot;chat2&quot;: {
      &quot;message&quot;: &quot;&iexcl;Estoy bien, gracias!&quot;,
      &quot;timestamp&quot;: 1633024900,
      &quot;user&quot;: &quot;user2&quot;
    }
  },
  &quot;users&quot;: {
    &quot;user1&quot;: {
      &quot;name&quot;: &quot;Juan&quot;,
      &quot;email&quot;: &quot;juan@example.com&quot;
    },
    &quot;user2&quot;: {
      &quot;name&quot;: &quot;Mar&iacute;a&quot;,
      &quot;email&quot;: &quot;maria@example.com&quot;
    }
  }
}</pre></div><div class='content'></div><h1><p>Lectura y escritura de datos</p>
</h1>
<div class='content'></div><h2><p>Lectura de datos</p>
</h2>
<div class='content'><p>Para leer datos de la base de datos en tiempo real, puedes usar el siguiente código en JavaScript:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pY2lhbGl6YSBGaXJlYmFzZQpmaXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTsKCi8vIFJlZmVyZW5jaWEgYSBsYSBiYXNlIGRlIGRhdG9zCnZhciBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCk7CgovLyBMZWUgZGF0b3MgZGUgbGEgYmFzZSBkZSBkYXRvcwpkYXRhYmFzZS5yZWYoJ2NoYXRzJykub24oJ3ZhbHVlJywgKHNuYXBzaG90KSA9PiB7CiAgY29uc3QgZGF0YSA9IHNuYXBzaG90LnZhbCgpOwogIGNvbnNvbGUubG9nKGRhdGEpOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Inicializa Firebase
firebase.initializeApp(firebaseConfig);

// Referencia a la base de datos
var database = firebase.database();

// Lee datos de la base de datos
database.ref('chats').on('value', (snapshot) =&gt; {
  const data = snapshot.val();
  console.log(data);
});</pre></div><div class='content'></div><h2><p>Escritura de datos</p>
</h2>
<div class='content'><p>Para escribir datos en la base de datos, puedes usar el siguiente código en JavaScript:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pY2lhbGl6YSBGaXJlYmFzZQpmaXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTsKCi8vIFJlZmVyZW5jaWEgYSBsYSBiYXNlIGRlIGRhdG9zCnZhciBkYXRhYmFzZSA9IGZpcmViYXNlLmRhdGFiYXNlKCk7CgovLyBFc2NyaWJlIGRhdG9zIGVuIGxhIGJhc2UgZGUgZGF0b3MKZGF0YWJhc2UucmVmKCdjaGF0cy9jaGF0MycpLnNldCh7CiAgbWVzc2FnZTogIsKhSG9sYSBhIHRvZG9zISIsCiAgdGltZXN0YW1wOiAxNjMzMDI1MDAwLAogIHVzZXI6ICJ1c2VyMyIKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Inicializa Firebase
firebase.initializeApp(firebaseConfig);

// Referencia a la base de datos
var database = firebase.database();

// Escribe datos en la base de datos
database.ref('chats/chat3').set({
  message: &quot;&iexcl;Hola a todos!&quot;,
  timestamp: 1633025000,
  user: &quot;user3&quot;
});</pre></div><div class='content'></div><h1><p>Ejercicio práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Crear una aplicación de chat simple</p>
</h2>
<div class='content'><p><strong>Objetivo</strong>: Crear una aplicación de chat que permita a los usuarios enviar y recibir mensajes en tiempo real.</p>
<p><strong>Pasos</strong>:</p>
<ol>
<li>Configura un nuevo proyecto en Firebase y agrega la base de datos en tiempo real.</li>
<li>Configura las reglas de seguridad para permitir solo a los usuarios autenticados leer y escribir datos.</li>
<li>Crea una interfaz de usuario simple con un campo de entrada para el mensaje y un botón para enviar.</li>
<li>Implementa la lógica para escribir mensajes en la base de datos cuando el usuario haga clic en el botón de enviar.</li>
<li>Implementa la lógica para leer mensajes de la base de datos y mostrarlos en la interfaz de usuario en tiempo real.</li>
</ol>
<p><strong>Solución</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICA8dGl0bGU+Q2hhdCBlbiB0aWVtcG8gcmVhbDwvdGl0bGU+CiAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vd3d3LmdzdGF0aWMuY29tL2ZpcmViYXNlanMvOC42LjgvZmlyZWJhc2UtYXBwLmpzIj48L3NjcmlwdD4KICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly93d3cuZ3N0YXRpYy5jb20vZmlyZWJhc2Vqcy84LjYuOC9maXJlYmFzZS1kYXRhYmFzZS5qcyI+PC9zY3JpcHQ+CjwvaGVhZD4KPGJvZHk+CiAgPGgxPkNoYXQgZW4gdGllbXBvIHJlYWw8L2gxPgogIDxkaXYgaWQ9ImNoYXQiPgogICAgPCEtLSBMb3MgbWVuc2FqZXMgc2UgbW9zdHJhcsOhbiBhcXXDrSAtLT4KICA8L2Rpdj4KICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Im1lc3NhZ2VJbnB1dCIgcGxhY2Vob2xkZXI9IkVzY3JpYmUgdW4gbWVuc2FqZS4uLiI+CiAgPGJ1dHRvbiBvbmNsaWNrPSJzZW5kTWVzc2FnZSgpIj5FbnZpYXI8L2J1dHRvbj4KCiAgPHNjcmlwdD4KICAgIC8vIENvbmZpZ3VyYWNpw7NuIGRlIEZpcmViYXNlCiAgICB2YXIgZmlyZWJhc2VDb25maWcgPSB7CiAgICAgIGFwaUtleTogIlRVX0FQSV9LRVkiLAogICAgICBhdXRoRG9tYWluOiAiVFVfQVVUSF9ET01BSU4iLAogICAgICBkYXRhYmFzZVVSTDogIlRVX0RBVEFCQVNFX1VSTCIsCiAgICAgIHByb2plY3RJZDogIlRVX1BST0pFQ1RfSUQiLAogICAgICBzdG9yYWdlQnVja2V0OiAiVFVfU1RPUkFHRV9CVUNLRVQiLAogICAgICBtZXNzYWdpbmdTZW5kZXJJZDogIlRVX01FU1NBR0lOR19TRU5ERVJfSUQiLAogICAgICBhcHBJZDogIlRVX0FQUF9JRCIKICAgIH07CiAgICAvLyBJbmljaWFsaXphIEZpcmViYXNlCiAgICBmaXJlYmFzZS5pbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTsKCiAgICAvLyBSZWZlcmVuY2lhIGEgbGEgYmFzZSBkZSBkYXRvcwogICAgdmFyIGRhdGFiYXNlID0gZmlyZWJhc2UuZGF0YWJhc2UoKTsKCiAgICAvLyBGdW5jacOzbiBwYXJhIGVudmlhciBtZW5zYWplcwogICAgZnVuY3Rpb24gc2VuZE1lc3NhZ2UoKSB7CiAgICAgIHZhciBtZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lc3NhZ2VJbnB1dCcpLnZhbHVlOwogICAgICB2YXIgdGltZXN0YW1wID0gRGF0ZS5ub3coKTsKICAgICAgdmFyIHVzZXIgPSAidXNlcjEiOyAvLyBFbiB1bmEgYXBsaWNhY2nDs24gcmVhbCwgZXN0byBzZXLDrWEgZWwgSUQgZGVsIHVzdWFyaW8gYXV0ZW50aWNhZG8KCiAgICAgIGRhdGFiYXNlLnJlZignY2hhdHMnKS5wdXNoKHsKICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgIHRpbWVzdGFtcDogdGltZXN0YW1wLAogICAgICAgIHVzZXI6IHVzZXIKICAgICAgfSk7CgogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVzc2FnZUlucHV0JykudmFsdWUgPSAnJzsKICAgIH0KCiAgICAvLyBFc2N1Y2hhIGxvcyBtZW5zYWplcyBudWV2b3MgeSBsb3MgbXVlc3RyYSBlbiBsYSBpbnRlcmZheiBkZSB1c3VhcmlvCiAgICBkYXRhYmFzZS5yZWYoJ2NoYXRzJykub24oJ2NoaWxkX2FkZGVkJywgKHNuYXBzaG90KSA9PiB7CiAgICAgIHZhciBtZXNzYWdlID0gc25hcHNob3QudmFsKCk7CiAgICAgIHZhciBtZXNzYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICBtZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IG1lc3NhZ2UudXNlciArICI6ICIgKyBtZXNzYWdlLm1lc3NhZ2U7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0JykuYXBwZW5kQ2hpbGQobWVzc2FnZUVsZW1lbnQpOwogICAgfSk7CiAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Chat en tiempo real&lt;/title&gt;
  &lt;script src=&quot;https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Chat en tiempo real&lt;/h1&gt;
  &lt;div id=&quot;chat&quot;&gt;
    &lt;!-- Los mensajes se mostrar&aacute;n aqu&iacute; --&gt;
  &lt;/div&gt;
  &lt;input type=&quot;text&quot; id=&quot;messageInput&quot; placeholder=&quot;Escribe un mensaje...&quot;&gt;
  &lt;button onclick=&quot;sendMessage()&quot;&gt;Enviar&lt;/button&gt;

  &lt;script&gt;
    // Configuraci&oacute;n de Firebase
    var firebaseConfig = {
      apiKey: &quot;TU_API_KEY&quot;,
      authDomain: &quot;TU_AUTH_DOMAIN&quot;,
      databaseURL: &quot;TU_DATABASE_URL&quot;,
      projectId: &quot;TU_PROJECT_ID&quot;,
      storageBucket: &quot;TU_STORAGE_BUCKET&quot;,
      messagingSenderId: &quot;TU_MESSAGING_SENDER_ID&quot;,
      appId: &quot;TU_APP_ID&quot;
    };
    // Inicializa Firebase
    firebase.initializeApp(firebaseConfig);

    // Referencia a la base de datos
    var database = firebase.database();

    // Funci&oacute;n para enviar mensajes
    function sendMessage() {
      var message = document.getElementById('messageInput').value;
      var timestamp = Date.now();
      var user = &quot;user1&quot;; // En una aplicaci&oacute;n real, esto ser&iacute;a el ID del usuario autenticado

      database.ref('chats').push({
        message: message,
        timestamp: timestamp,
        user: user
      });

      document.getElementById('messageInput').value = '';
    }

    // Escucha los mensajes nuevos y los muestra en la interfaz de usuario
    database.ref('chats').on('child_added', (snapshot) =&gt; {
      var message = snapshot.val();
      var messageElement = document.createElement('div');
      messageElement.textContent = message.user + &quot;: &quot; + message.message;
      document.getElementById('chat').appendChild(messageElement);
    });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta lección, hemos aprendido qué es la base de datos en tiempo real de Firebase, cómo configurarla y cómo leer y escribir datos en ella. También hemos creado una aplicación de chat simple para poner en práctica estos conceptos. En la próxima lección, profundizaremos en la lectura y escritura de datos, así como en la estructura de datos y las reglas de seguridad.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-04-managing-users' title="Gestión de usuarios">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='03-02-reading-and-writing-data' title="Lectura y escritura de datos">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
