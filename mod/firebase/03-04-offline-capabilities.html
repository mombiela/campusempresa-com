<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capacidades sin conexión</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/03-04-offline-capabilities" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/03-04-offline-capabilities" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/03-04-offline-capabilities" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/firebase/03-04-offline-capabilities" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/firebase/03-04-offline-capabilities" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='03-03-data-structure-and-security-rules' title="Estructura de datos y reglas de seguridad">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Capacidades sin conexión</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-01-introduction-to-cloud-firestore' title="Introducción a Cloud Firestore">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En este tema, exploraremos cómo la base de datos en tiempo real de Firebase maneja las capacidades sin conexión. Firebase proporciona una funcionalidad robusta para que las aplicaciones sigan funcionando incluso cuando no hay conexión a Internet. Esto es crucial para aplicaciones móviles que necesitan ser resilientes y ofrecer una experiencia de usuario fluida.</p>
</div><h1><p>Objetivos de Aprendizaje</p>
</h1>
<div class='content'><ul>
<li>Comprender cómo Firebase maneja los datos sin conexión.</li>
<li>Aprender a habilitar las capacidades sin conexión en una aplicación.</li>
<li>Explorar cómo se sincronizan los datos cuando la conexión se restablece.</li>
<li>Implementar ejemplos prácticos de capacidades sin conexión.</li>
</ul>
</div><h1><ol>
<li>¿Cómo maneja Firebase los datos sin conexión?</li>
</ol>
</h1>
<div class='content'><p>Firebase permite que las aplicaciones sigan funcionando sin conexión mediante el almacenamiento en caché de los datos localmente en el dispositivo. Cuando la aplicación vuelve a estar en línea, Firebase sincroniza automáticamente los datos locales con la base de datos en tiempo real.</p>
</div><h2><p>Características Clave:</p>
</h2>
<div class='content'><ul>
<li><strong>Almacenamiento en caché local:</strong> Los datos se almacenan en el dispositivo del usuario.</li>
<li><strong>Sincronización automática:</strong> Los cambios se sincronizan automáticamente cuando la conexión se restablece.</li>
<li><strong>Eventos en tiempo real:</strong> Los eventos de la base de datos se siguen disparando incluso sin conexión.</li>
</ul>
</div><h1><ol start="2">
<li>Habilitar las capacidades sin conexión</li>
</ol>
</h1>
<div class='content'><p>Para habilitar las capacidades sin conexión en Firebase, se debe configurar la persistencia de datos. A continuación, se muestra cómo hacerlo en diferentes plataformas.</p>
</div><h2><p>Android</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSGFiaWxpdGFyIGxhIHBlcnNpc3RlbmNpYSBkZSBkYXRvcwpGaXJlYmFzZURhdGFiYXNlLmdldEluc3RhbmNlKCkuc2V0UGVyc2lzdGVuY2VFbmFibGVkKHRydWUpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Habilitar la persistencia de datos
FirebaseDatabase.getInstance().setPersistenceEnabled(true);</pre></div><div class='content'></div><h2><p>iOS (Swift)</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSGFiaWxpdGFyIGxhIHBlcnNpc3RlbmNpYSBkZSBkYXRvcwpEYXRhYmFzZS5kYXRhYmFzZSgpLmlzUGVyc2lzdGVuY2VFbmFibGVkID0gdHJ1ZQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Habilitar la persistencia de datos
Database.database().isPersistenceEnabled = true</pre></div><div class='content'></div><h2><p>Web (JavaScript)</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSGFiaWxpdGFyIGxhIHBlcnNpc3RlbmNpYSBkZSBkYXRvcwpmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmtlZXBTeW5jZWQodHJ1ZSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Habilitar la persistencia de datos
firebase.database().ref().keepSynced(true);</pre></div><div class='content'></div><h1><ol start="3">
<li>Sincronización de datos</li>
</ol>
</h1>
<div class='content'><p>Cuando la aplicación vuelve a estar en línea, Firebase sincroniza automáticamente los datos locales con la base de datos en tiempo real. Esto incluye:</p>
<ul>
<li><strong>Datos nuevos:</strong> Datos que se han agregado mientras la aplicación estaba sin conexión.</li>
<li><strong>Actualizaciones:</strong> Cambios en los datos existentes.</li>
<li><strong>Eliminaciones:</strong> Datos que se han eliminado.</li>
</ul>
</div><h2><p>Ejemplo Práctico</p>
</h2>
<div class='content'><p>Supongamos que estamos desarrollando una aplicación de lista de tareas. Queremos que los usuarios puedan agregar tareas incluso cuando no tienen conexión a Internet.</p>
</div><h2><p>Código de Ejemplo (JavaScript)</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSGFiaWxpdGFyIGxhIHBlcnNpc3RlbmNpYSBkZSBkYXRvcwpmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmtlZXBTeW5jZWQodHJ1ZSk7CgovLyBSZWZlcmVuY2lhIGEgbGEgYmFzZSBkZSBkYXRvcwp2YXIgdGFza3NSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigndGFza3MnKTsKCi8vIEFncmVnYXIgdW5hIG51ZXZhIHRhcmVhCmZ1bmN0aW9uIGFkZFRhc2sodGFzaykgewogICAgdGFza3NSZWYucHVzaCh7CiAgICAgICAgbmFtZTogdGFzaywKICAgICAgICBjb21wbGV0ZWQ6IGZhbHNlCiAgICB9KTsKfQoKLy8gRXNjdWNoYXIgY2FtYmlvcyBlbiBsYSBiYXNlIGRlIGRhdG9zCnRhc2tzUmVmLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7CiAgICB2YXIgdGFza3MgPSBzbmFwc2hvdC52YWwoKTsKICAgIC8vIEFjdHVhbGl6YXIgbGEgVUkgY29uIGxhcyB0YXJlYXMKICAgIHVwZGF0ZVVJKHRhc2tzKTsKfSk7CgovLyBGdW5jacOzbiBwYXJhIGFjdHVhbGl6YXIgbGEgVUkKZnVuY3Rpb24gdXBkYXRlVUkodGFza3MpIHsKICAgIC8vIEzDs2dpY2EgcGFyYSBhY3R1YWxpemFyIGxhIGludGVyZmF6IGRlIHVzdWFyaW8gY29uIGxhcyB0YXJlYXMKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Habilitar la persistencia de datos
firebase.database().ref().keepSynced(true);

// Referencia a la base de datos
var tasksRef = firebase.database().ref('tasks');

// Agregar una nueva tarea
function addTask(task) {
    tasksRef.push({
        name: task,
        completed: false
    });
}

// Escuchar cambios en la base de datos
tasksRef.on('value', function(snapshot) {
    var tasks = snapshot.val();
    // Actualizar la UI con las tareas
    updateUI(tasks);
});

// Funci&oacute;n para actualizar la UI
function updateUI(tasks) {
    // L&oacute;gica para actualizar la interfaz de usuario con las tareas
}</pre></div><div class='content'></div><h1><ol start="4">
<li>Ejercicio Práctico</li>
</ol>
</h1>
<div class='content'></div><h2><p>Ejercicio</p>
</h2>
<div class='content'><p>Implementa una aplicación simple de notas que permita a los usuarios agregar, editar y eliminar notas. Asegúrate de que la aplicación funcione sin conexión y que los datos se sincronicen automáticamente cuando la conexión se restablezca.</p>
</div><h2><p>Solución</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSGFiaWxpdGFyIGxhIHBlcnNpc3RlbmNpYSBkZSBkYXRvcwpmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigpLmtlZXBTeW5jZWQodHJ1ZSk7CgovLyBSZWZlcmVuY2lhIGEgbGEgYmFzZSBkZSBkYXRvcwp2YXIgbm90ZXNSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZignbm90ZXMnKTsKCi8vIEFncmVnYXIgdW5hIG51ZXZhIG5vdGEKZnVuY3Rpb24gYWRkTm90ZShub3RlKSB7CiAgICBub3Rlc1JlZi5wdXNoKHsKICAgICAgICBjb250ZW50OiBub3RlLAogICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKQogICAgfSk7Cn0KCi8vIEVkaXRhciB1bmEgbm90YSBleGlzdGVudGUKZnVuY3Rpb24gZWRpdE5vdGUobm90ZUlkLCBuZXdDb250ZW50KSB7CiAgICBub3Rlc1JlZi5jaGlsZChub3RlSWQpLnVwZGF0ZSh7CiAgICAgICAgY29udGVudDogbmV3Q29udGVudCwKICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkKICAgIH0pOwp9CgovLyBFbGltaW5hciB1bmEgbm90YQpmdW5jdGlvbiBkZWxldGVOb3RlKG5vdGVJZCkgewogICAgbm90ZXNSZWYuY2hpbGQobm90ZUlkKS5yZW1vdmUoKTsKfQoKLy8gRXNjdWNoYXIgY2FtYmlvcyBlbiBsYSBiYXNlIGRlIGRhdG9zCm5vdGVzUmVmLm9uKCd2YWx1ZScsIGZ1bmN0aW9uKHNuYXBzaG90KSB7CiAgICB2YXIgbm90ZXMgPSBzbmFwc2hvdC52YWwoKTsKICAgIC8vIEFjdHVhbGl6YXIgbGEgVUkgY29uIGxhcyBub3RhcwogICAgdXBkYXRlVUkobm90ZXMpOwp9KTsKCi8vIEZ1bmNpw7NuIHBhcmEgYWN0dWFsaXphciBsYSBVSQpmdW5jdGlvbiB1cGRhdGVVSShub3RlcykgewogICAgLy8gTMOzZ2ljYSBwYXJhIGFjdHVhbGl6YXIgbGEgaW50ZXJmYXogZGUgdXN1YXJpbyBjb24gbGFzIG5vdGFzCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Habilitar la persistencia de datos
firebase.database().ref().keepSynced(true);

// Referencia a la base de datos
var notesRef = firebase.database().ref('notes');

// Agregar una nueva nota
function addNote(note) {
    notesRef.push({
        content: note,
        timestamp: Date.now()
    });
}

// Editar una nota existente
function editNote(noteId, newContent) {
    notesRef.child(noteId).update({
        content: newContent,
        timestamp: Date.now()
    });
}

// Eliminar una nota
function deleteNote(noteId) {
    notesRef.child(noteId).remove();
}

// Escuchar cambios en la base de datos
notesRef.on('value', function(snapshot) {
    var notes = snapshot.val();
    // Actualizar la UI con las notas
    updateUI(notes);
});

// Funci&oacute;n para actualizar la UI
function updateUI(notes) {
    // L&oacute;gica para actualizar la interfaz de usuario con las notas
}</pre></div><div class='content'></div><h1><p>Retroalimentación y Consejos</p>
</h1>
<div class='content'></div><h2><p>Errores Comunes</p>
</h2>
<div class='content'><ul>
<li><strong>No habilitar la persistencia de datos:</strong> Asegúrate de habilitar la persistencia de datos para que la aplicación funcione sin conexión.</li>
<li><strong>No manejar correctamente los eventos de la base de datos:</strong> Asegúrate de actualizar la UI en respuesta a los cambios en la base de datos.</li>
</ul>
</div><h2><p>Consejos Adicionales</p>
</h2>
<div class='content'><ul>
<li><strong>Prueba tu aplicación sin conexión:</strong> Desconecta tu dispositivo de Internet y verifica que la aplicación funcione correctamente.</li>
<li><strong>Manejo de conflictos:</strong> Considera cómo manejar los conflictos de datos cuando la aplicación vuelve a estar en línea.</li>
</ul>
</div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta sección, hemos aprendido cómo habilitar y utilizar las capacidades sin conexión de Firebase. Esta funcionalidad es esencial para crear aplicaciones resilientes que ofrezcan una experiencia de usuario fluida, incluso en condiciones de red inestables. En el próximo módulo, exploraremos Cloud Firestore y sus capacidades avanzadas.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='03-03-data-structure-and-security-rules' title="Estructura de datos y reglas de seguridad">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-01-introduction-to-cloud-firestore' title="Introducción a Cloud Firestore">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
