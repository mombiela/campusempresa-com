<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducción a COBOL-DB2</title>

    <link rel="alternate" href="https://campusempresa.com/mod/cobol/08-01-introduction-cobol-db2" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/cobol/08-01-introduction-cobol-db2" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/cobol/08-01-introduction-cobol-db2" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/cobol/08-01-introduction-cobol-db2" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/cobol/08-01-introduction-cobol-db2" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-03-common-errors-solutions' title="Errores Comunes y Soluciones">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Introducción a COBOL-DB2</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-embedded-sql-cobol' title="SQL Embebido en COBOL">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En este módulo, exploraremos la integración de COBOL con DB2, una base de datos relacional ampliamente utilizada en entornos empresariales. Aprenderemos cómo utilizar SQL embebido en programas COBOL para interactuar con bases de datos DB2, lo que nos permitirá realizar operaciones de consulta, inserción, actualización y eliminación de datos.</p>
</div><h1><p>¿Qué es DB2?</p>
</h1>
<div class='content'><p>DB2 es un sistema de gestión de bases de datos relacional (RDBMS) desarrollado por IBM. Es conocido por su robustez, escalabilidad y capacidad para manejar grandes volúmenes de datos. DB2 se utiliza en una variedad de aplicaciones empresariales, desde sistemas bancarios hasta gestión de inventarios.</p>
</div><h1><p>¿Por qué Integrar COBOL con DB2?</p>
</h1>
<div class='content'><p>La integración de COBOL con DB2 permite a los desarrolladores aprovechar la potencia de COBOL para el procesamiento de datos y la capacidad de DB2 para gestionar y almacenar datos de manera eficiente. Algunas ventajas de esta integración incluyen:</p>
<ul>
<li><strong>Acceso a Datos Relacionales:</strong> Permite a los programas COBOL acceder y manipular datos almacenados en bases de datos relacionales.</li>
<li><strong>Eficiencia:</strong> Mejora la eficiencia del procesamiento de datos al utilizar SQL para realizar operaciones complejas directamente en la base de datos.</li>
<li><strong>Escalabilidad:</strong> Facilita la gestión de grandes volúmenes de datos y mejora la escalabilidad de las aplicaciones.</li>
</ul>
</div><h1><p>Configuración del Entorno COBOL-DB2</p>
</h1>
<div class='content'><p>Antes de comenzar a escribir programas COBOL que interactúen con DB2, es necesario configurar el entorno de desarrollo. A continuación, se describen los pasos básicos para configurar el entorno:</p>
<ol>
<li>
<p><strong>Instalar DB2:</strong></p>
<ul>
<li>Descargue e instale DB2 desde el sitio web de IBM.</li>
<li>Siga las instrucciones de instalación para configurar el servidor DB2 y crear una base de datos.</li>
</ul>
</li>
<li>
<p><strong>Configurar el Precompilador DB2:</strong></p>
<ul>
<li>El precompilador DB2 es una herramienta que convierte el código SQL embebido en un programa COBOL en llamadas a la API de DB2.</li>
<li>Asegúrese de que el precompilador DB2 esté instalado y configurado correctamente en su entorno de desarrollo.</li>
</ul>
</li>
<li>
<p><strong>Configurar el Compilador COBOL:</strong></p>
<ul>
<li>Asegúrese de que el compilador COBOL esté instalado y configurado correctamente.</li>
<li>Verifique que el compilador pueda acceder a las bibliotecas necesarias para la integración con DB2.</li>
</ul>
</li>
</ol>
</div><h1><p>Estructura de un Programa COBOL-DB2</p>
</h1>
<div class='content'><p>Un programa COBOL que interactúa con DB2 sigue una estructura específica. A continuación, se presenta un ejemplo básico de un programa COBOL-DB2:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SURFTlRJRklDQVRJT04gRElWSVNJT04uClBST0dSQU0tSUQuIEVqZW1wbG9EQjIuCgpFTlZJUk9OTUVOVCBESVZJU0lPTi4KQ09ORklHVVJBVElPTiBTRUNUSU9OLgpTT1VSQ0UtQ09NUFVURVIuIElCTS0zNzAuCk9CSkVDVC1DT01QVVRFUi4gSUJNLTM3MC4KCkRBVEEgRElWSVNJT04uCldPUktJTkctU1RPUkFHRSBTRUNUSU9OLgowMSBFTVAtTlVNQkVSIFBJQyA5KDUpLgowMSBFTVAtTkFNRSBQSUMgWCgzMCkuCgpFWEVDIFNRTAogICAgSU5DTFVERSBTUUxDQQpFTkQtRVhFQy4KClBST0NFRFVSRSBESVZJU0lPTi4KQkVHSU4uCiAgICBFWEVDIFNRTAogICAgICAgIENPTk5FQ1QgVE8gJ0RCMkRCJyBVU0VSICd1c3VhcmlvJyBVU0lORyAnY29udHJhc2XDsWEnCiAgICBFTkQtRVhFQy4KCiAgICBJRiBTUUxDT0RFID0gMAogICAgICAgIERJU1BMQVkgJ0NvbmV4acOzbiBleGl0b3NhIGEgREIyJwogICAgRUxTRQogICAgICAgIERJU1BMQVkgJ0Vycm9yIGVuIGxhIGNvbmV4acOzbiBhIERCMjogJyBTUUxDT0RFLgoKICAgIEVYRUMgU1FMCiAgICAgICAgU0VMRUNUIEVNUF9OQU1FIElOVE8gOkVNUC1OQU1FCiAgICAgICAgRlJPTSBFTVBMT1lFRVMKICAgICAgICBXSEVSRSBFTVBfTlVNQkVSID0gOkVNUC1OVU1CRVIKICAgIEVORC1FWEVDLgoKICAgIElGIFNRTENPREUgPSAwCiAgICAgICAgRElTUExBWSAnTm9tYnJlIGRlbCBlbXBsZWFkbzogJyBFTVAtTkFNRQogICAgRUxTRQogICAgICAgIERJU1BMQVkgJ0Vycm9yIGVuIGxhIGNvbnN1bHRhOiAnIFNRTENPREUuCgogICAgRVhFQyBTUUwKICAgICAgICBDT01NSVQKICAgIEVORC1FWEVDLgoKICAgIEVYRUMgU1FMCiAgICAgICAgRElTQ09OTkVDVCBDVVJSRU5UCiAgICBFTkQtRVhFQy4KCiAgICBTVE9QIFJVTi4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>IDENTIFICATION DIVISION.
PROGRAM-ID. EjemploDB2.

ENVIRONMENT DIVISION.
CONFIGURATION SECTION.
SOURCE-COMPUTER. IBM-370.
OBJECT-COMPUTER. IBM-370.

DATA DIVISION.
WORKING-STORAGE SECTION.
01 EMP-NUMBER PIC 9(5).
01 EMP-NAME PIC X(30).

EXEC SQL
    INCLUDE SQLCA
END-EXEC.

PROCEDURE DIVISION.
BEGIN.
    EXEC SQL
        CONNECT TO 'DB2DB' USER 'usuario' USING 'contrase&ntilde;a'
    END-EXEC.

    IF SQLCODE = 0
        DISPLAY 'Conexi&oacute;n exitosa a DB2'
    ELSE
        DISPLAY 'Error en la conexi&oacute;n a DB2: ' SQLCODE.

    EXEC SQL
        SELECT EMP_NAME INTO :EMP-NAME
        FROM EMPLOYEES
        WHERE EMP_NUMBER = :EMP-NUMBER
    END-EXEC.

    IF SQLCODE = 0
        DISPLAY 'Nombre del empleado: ' EMP-NAME
    ELSE
        DISPLAY 'Error en la consulta: ' SQLCODE.

    EXEC SQL
        COMMIT
    END-EXEC.

    EXEC SQL
        DISCONNECT CURRENT
    END-EXEC.

    STOP RUN.</pre></div><div class='content'></div><h2><p>Explicación del Código</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>IDENTIFICATION DIVISION:</strong></p>
<ul>
<li>Define el nombre del programa.</li>
</ul>
</li>
<li>
<p><strong>ENVIRONMENT DIVISION:</strong></p>
<ul>
<li>Especifica la configuración del entorno.</li>
</ul>
</li>
<li>
<p><strong>DATA DIVISION:</strong></p>
<ul>
<li>Define las variables de trabajo y la estructura de datos.</li>
<li>Incluye la declaración <code>EXEC SQL INCLUDE SQLCA</code> para incluir el área de comunicación SQL (SQLCA), que contiene información sobre el estado de las operaciones SQL.</li>
</ul>
</li>
<li>
<p><strong>PROCEDURE DIVISION:</strong></p>
<ul>
<li>Contiene la lógica del programa.</li>
<li><code>EXEC SQL CONNECT TO 'DB2DB' USER 'usuario' USING 'contraseña' END-EXEC;</code> establece una conexión con la base de datos DB2.</li>
<li><code>EXEC SQL SELECT EMP_NAME INTO :EMP-NAME FROM EMPLOYEES WHERE EMP_NUMBER = :EMP-NUMBER END-EXEC;</code> realiza una consulta SQL para obtener el nombre de un empleado basado en su número.</li>
<li><code>EXEC SQL COMMIT END-EXEC;</code> confirma las transacciones.</li>
<li><code>EXEC SQL DISCONNECT CURRENT END-EXEC;</code> cierra la conexión con la base de datos.</li>
</ul>
</li>
</ol>
</div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Conexión a DB2 y Consulta Básica</p>
</h2>
<div class='content'><p><strong>Objetivo:</strong> Escribir un programa COBOL que se conecte a una base de datos DB2 y realice una consulta básica para obtener información de una tabla.</p>
<p><strong>Instrucciones:</strong></p>
<ol>
<li>
<p>Cree una base de datos DB2 y una tabla llamada <code>DEPARTMENTS</code> con las siguientes columnas:</p>
<ul>
<li><code>DEPT_ID</code> (INTEGER)</li>
<li><code>DEPT_NAME</code> (VARCHAR(50))</li>
</ul>
</li>
<li>
<p>Inserte algunos registros en la tabla <code>DEPARTMENTS</code>.</p>
</li>
<li>
<p>Escriba un programa COBOL que:</p>
<ul>
<li>Se conecte a la base de datos DB2.</li>
<li>Realice una consulta para obtener el nombre de un departamento basado en su ID.</li>
<li>Muestre el nombre del departamento en la pantalla.</li>
</ul>
</li>
</ol>
<p><strong>Solución:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SURFTlRJRklDQVRJT04gRElWSVNJT04uClBST0dSQU0tSUQuIENvbnN1bHRhRGVwYXJ0YW1lbnRvLgoKRU5WSVJPTk1FTlQgRElWSVNJT04uCkNPTkZJR1VSQVRJT04gU0VDVElPTi4KU09VUkNFLUNPTVBVVEVSLiBJQk0tMzcwLgpPQkpFQ1QtQ09NUFVURVIuIElCTS0zNzAuCgpEQVRBIERJVklTSU9OLgpXT1JLSU5HLVNUT1JBR0UgU0VDVElPTi4KMDEgREVQVC1JRCBQSUMgOSg1KSBWQUxVRSAxLgowMSBERVBULU5BTUUgUElDIFgoNTApLgoKRVhFQyBTUUwKICAgIElOQ0xVREUgU1FMQ0EKRU5ELUVYRUMuCgpQUk9DRURVUkUgRElWSVNJT04uCkJFR0lOLgogICAgRVhFQyBTUUwKICAgICAgICBDT05ORUNUIFRPICdEQjJEQicgVVNFUiAndXN1YXJpbycgVVNJTkcgJ2NvbnRyYXNlw7FhJwogICAgRU5ELUVYRUMuCgogICAgSUYgU1FMQ09ERSA9IDAKICAgICAgICBESVNQTEFZICdDb25leGnDs24gZXhpdG9zYSBhIERCMicKICAgIEVMU0UKICAgICAgICBESVNQTEFZICdFcnJvciBlbiBsYSBjb25leGnDs24gYSBEQjI6ICcgU1FMQ09ERS4KCiAgICBFWEVDIFNRTAogICAgICAgIFNFTEVDVCBERVBUX05BTUUgSU5UTyA6REVQVC1OQU1FCiAgICAgICAgRlJPTSBERVBBUlRNRU5UUwogICAgICAgIFdIRVJFIERFUFRfSUQgPSA6REVQVC1JRAogICAgRU5ELUVYRUMuCgogICAgSUYgU1FMQ09ERSA9IDAKICAgICAgICBESVNQTEFZICdOb21icmUgZGVsIGRlcGFydGFtZW50bzogJyBERVBULU5BTUUKICAgIEVMU0UKICAgICAgICBESVNQTEFZICdFcnJvciBlbiBsYSBjb25zdWx0YTogJyBTUUxDT0RFLgoKICAgIEVYRUMgU1FMCiAgICAgICAgQ09NTUlUCiAgICBFTkQtRVhFQy4KCiAgICBFWEVDIFNRTAogICAgICAgIERJU0NPTk5FQ1QgQ1VSUkVOVAogICAgRU5ELUVYRUMuCgogICAgU1RPUCBSVU4u"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>IDENTIFICATION DIVISION.
PROGRAM-ID. ConsultaDepartamento.

ENVIRONMENT DIVISION.
CONFIGURATION SECTION.
SOURCE-COMPUTER. IBM-370.
OBJECT-COMPUTER. IBM-370.

DATA DIVISION.
WORKING-STORAGE SECTION.
01 DEPT-ID PIC 9(5) VALUE 1.
01 DEPT-NAME PIC X(50).

EXEC SQL
    INCLUDE SQLCA
END-EXEC.

PROCEDURE DIVISION.
BEGIN.
    EXEC SQL
        CONNECT TO 'DB2DB' USER 'usuario' USING 'contrase&ntilde;a'
    END-EXEC.

    IF SQLCODE = 0
        DISPLAY 'Conexi&oacute;n exitosa a DB2'
    ELSE
        DISPLAY 'Error en la conexi&oacute;n a DB2: ' SQLCODE.

    EXEC SQL
        SELECT DEPT_NAME INTO :DEPT-NAME
        FROM DEPARTMENTS
        WHERE DEPT_ID = :DEPT-ID
    END-EXEC.

    IF SQLCODE = 0
        DISPLAY 'Nombre del departamento: ' DEPT-NAME
    ELSE
        DISPLAY 'Error en la consulta: ' SQLCODE.

    EXEC SQL
        COMMIT
    END-EXEC.

    EXEC SQL
        DISCONNECT CURRENT
    END-EXEC.

    STOP RUN.</pre></div><div class='content'></div><h2><p>Retroalimentación y Consejos</p>
</h2>
<div class='content'><ul>
<li>
<p><strong>Errores Comunes:</strong></p>
<ul>
<li><strong>SQLCODE -104:</strong> Error de sintaxis en la consulta SQL. Verifique la sintaxis de su consulta.</li>
<li><strong>SQLCODE -204:</strong> La tabla o vista no existe. Asegúrese de que la tabla <code>DEPARTMENTS</code> exista en la base de datos.</li>
<li><strong>SQLCODE -805:</strong> El paquete no se encuentra. Asegúrese de que el precompilador DB2 esté configurado correctamente.</li>
</ul>
</li>
<li>
<p><strong>Consejos Adicionales:</strong></p>
<ul>
<li>Siempre verifique el valor de <code>SQLCODE</code> después de cada operación SQL para manejar errores de manera adecuada.</li>
<li>Utilice transacciones (<code>COMMIT</code> y <code>ROLLBACK</code>) para asegurar la integridad de los datos.</li>
</ul>
</li>
</ul>
</div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta sección, hemos aprendido sobre la integración de COBOL con DB2 y cómo escribir programas COBOL que interactúan con bases de datos DB2 utilizando SQL embebido. Hemos cubierto la configuración del entorno, la estructura básica de un programa COBOL-DB2 y hemos realizado un ejercicio práctico para reforzar los conceptos aprendidos. En el próximo tema, profundizaremos en el uso de SQL embebido en COBOL para realizar operaciones más avanzadas en bases de datos DB2.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-03-common-errors-solutions' title="Errores Comunes y Soluciones">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-embedded-sql-cobol' title="SQL Embebido en COBOL">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
