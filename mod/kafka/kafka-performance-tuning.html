<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajuste de Rendimiento de Kafka</title>

    <link rel="alternate" href="https://campusempresa.com/mod/kafka/kafka-performance-tuning" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/kafka/kafka-performance-tuning" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/kafka/kafka-performance-tuning" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/kafka/kafka-performance-tuning" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/kafka/kafka-performance-tuning" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='kafka-monitoring-and-management'>&#x25C4;Monitoreo y Gestión de Kafka</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Ajuste de Rendimiento de Kafka</a>
	</div>
	<div class='col-4 text-end'>
					<a href='kafka-in-a-multi-data-center-setup'>Kafka en una Configuración Multi-Centro de Datos &#x25BA;</a>
			</div>
</div>
<div class='content'><p>El ajuste de rendimiento de Kafka es esencial para garantizar que tu clúster de Kafka opere de manera eficiente y pueda manejar el rendimiento y la latencia requeridos. Este tema cubrirá varios aspectos del ajuste de rendimiento, incluidas las configuraciones del broker, optimizaciones del productor y consumidor, y herramientas de monitoreo.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Rendimiento</strong>: La cantidad de datos procesados por Kafka en un período de tiempo determinado.</li>
<li><strong>Latencia</strong>: El tiempo que tarda un mensaje en viajar del productor al consumidor.</li>
<li><strong>Broker</strong>: Un servidor de Kafka que almacena y sirve mensajes.</li>
<li><strong>Productor</strong>: Una aplicación que envía mensajes a Kafka.</li>
<li><strong>Consumidor</strong>: Una aplicación que lee mensajes de Kafka.</li>
</ul>
</div><h1>Configuraciones del Broker</h1>
<div class='content'><p>Optimizar las configuraciones del broker es crucial para mejorar el rendimiento de Kafka. Aquí hay algunas configuraciones clave a considerar:</p>
<ul>
<li><strong>num.network.threads</strong>: Número de hilos que manejan solicitudes de red.</li>
<li><strong>num.io.threads</strong>: Número de hilos que manejan E/S de disco.</li>
<li><strong>socket.send.buffer.bytes</strong>: Tamaño del búfer de envío TCP.</li>
<li><strong>socket.receive.buffer.bytes</strong>: Tamaño del búfer de recepción TCP.</li>
<li><strong>log.segment.bytes</strong>: Tamaño de un solo archivo de segmento de registro.</li>
<li><strong>log.retention.hours</strong>: Tiempo para retener un segmento de registro antes de su eliminación.</li>
</ul>
</div><h2>Ejemplo de Configuración</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnVtLm5ldHdvcmsudGhyZWFkcz0zCm51bS5pby50aHJlYWRzPTgKc29ja2V0LnNlbmQuYnVmZmVyLmJ5dGVzPTEwMjQwMApzb2NrZXQucmVjZWl2ZS5idWZmZXIuYnl0ZXM9MTAyNDAwCmxvZy5zZWdtZW50LmJ5dGVzPTEwNzM3NDE4MjQKbG9nLnJldGVudGlvbi5ob3Vycz0xNjg="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>num.network.threads=3
num.io.threads=8
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
log.segment.bytes=1073741824
log.retention.hours=168</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>num.network.threads=3</code>: Asigna tres hilos para manejar solicitudes de red.</li>
<li><code>num.io.threads=8</code>: Asigna ocho hilos para manejar operaciones de E/S de disco.</li>
<li><code>socket.send.buffer.bytes=102400</code>: Establece el tamaño del búfer de envío TCP a 100 KB.</li>
<li><code>socket.receive.buffer.bytes=102400</code>: Establece el tamaño del búfer de recepción TCP a 100 KB.</li>
<li><code>log.segment.bytes=1073741824</code>: Establece el tamaño del segmento de registro a 1 GB.</li>
<li><code>log.retention.hours=168</code>: Retiene segmentos de registro durante 7 días (168 horas).</li>
</ul>
</div><h1>Optimización del Productor</h1>
<div class='content'><p>Los productores juegan un papel significativo en el rendimiento de Kafka. Aquí hay algunas configuraciones para optimizar el rendimiento del productor:</p>
<ul>
<li><strong>batch.size</strong>: Tamaño del lote para enviar mensajes.</li>
<li><strong>linger.ms</strong>: Tiempo de espera antes de enviar un lote.</li>
<li><strong>compression.type</strong>: Tipo de compresión a usar (none, gzip, snappy, lz4, zstd).</li>
<li><strong>acks</strong>: Número de confirmaciones que requiere el productor (0, 1, all).</li>
</ul>
</div><h2>Ejemplo de Configuración</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YmF0Y2guc2l6ZT0xNjM4NApsaW5nZXIubXM9NQpjb21wcmVzc2lvbi50eXBlPXNuYXBweQphY2tzPTE="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>batch.size=16384
linger.ms=5
compression.type=snappy
acks=1</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>batch.size=16384</code>: Establece el tamaño del lote a 16 KB.</li>
<li><code>linger.ms=5</code>: Espera 5 milisegundos antes de enviar un lote.</li>
<li><code>compression.type=snappy</code>: Usa compresión Snappy para los mensajes.</li>
<li><code>acks=1</code>: Requiere confirmación solo del líder.</li>
</ul>
</div><h1>Optimización del Consumidor</h1>
<div class='content'><p>Los consumidores también necesitan ser optimizados para un mejor rendimiento. Las configuraciones clave incluyen:</p>
<ul>
<li><strong>fetch.min.bytes</strong>: Cantidad mínima de datos que el servidor debe devolver para una solicitud de obtención.</li>
<li><strong>fetch.max.wait.ms</strong>: Tiempo máximo que el servidor bloqueará antes de responder a una solicitud de obtención.</li>
<li><strong>max.partition.fetch.bytes</strong>: Máxima cantidad de datos por partición que el servidor devolverá.</li>
</ul>
</div><h2>Ejemplo de Configuración</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmV0Y2gubWluLmJ5dGVzPTEKZmV0Y2gubWF4LndhaXQubXM9NTAwCm1heC5wYXJ0aXRpb24uZmV0Y2guYnl0ZXM9MTA0ODU3Ng=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>fetch.min.bytes=1
fetch.max.wait.ms=500
max.partition.fetch.bytes=1048576</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>fetch.min.bytes=1</code>: Establece la cantidad mínima de datos a 1 byte.</li>
<li><code>fetch.max.wait.ms=500</code>: Espera hasta 500 milisegundos antes de responder a una solicitud de obtención.</li>
<li><code>max.partition.fetch.bytes=1048576</code>: Establece la cantidad máxima de datos por partición a 1 MB.</li>
</ul>
</div><h1>Herramientas de Monitoreo</h1>
<div class='content'><p>Monitorear el rendimiento de Kafka es esencial para identificar cuellos de botella y garantizar una operación óptima. Las herramientas clave incluyen:</p>
<ul>
<li><strong>Kafka Manager</strong>: Una herramienta basada en web para gestionar y monitorear clústeres de Kafka.</li>
<li><strong>Prometheus y Grafana</strong>: Herramientas de código abierto para monitorear y visualizar métricas.</li>
<li><strong>JMX (Java Management Extensions)</strong>: Utilizado para monitorear métricas de Kafka.</li>
</ul>
</div><h2>Ejemplo: Usando Prometheus y Grafana</h2>
<div class='content'><ol>
<li><strong>Instalar Prometheus</strong>: Sigue la guía de instalación en el <a href="https://prometheus.io/docs/introduction/first_steps/">sitio web de Prometheus</a>.</li>
<li><strong>Instalar Grafana</strong>: Sigue la guía de instalación en el <a href="https://grafana.com/docs/grafana/latest/getting-started/getting-started-prometheus/">sitio web de Grafana</a>.</li>
<li><strong>Configurar el Exportador JMX de Kafka</strong>: Agrega el exportador JMX a tus brokers de Kafka para exponer métricas.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBwcm9tZXRoZXVzLnltbApzY3JhcGVfY29uZmlnczoKICAtIGpvYl9uYW1lOiAna2Fma2EnCiAgICBzdGF0aWNfY29uZmlnczoKICAgICAgLSB0YXJnZXRzOiBbJ2xvY2FsaG9zdDo3MDcxJ10="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># prometheus.yml
scrape_configs:
  - job_name: 'kafka'
    static_configs:
      - targets: ['localhost:7071']</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>Prometheus</strong>: Recoge métricas de los brokers de Kafka.</li>
<li><strong>Grafana</strong>: Visualiza las métricas recogidas.</li>
<li><strong>Exportador JMX</strong>: Expone métricas de Kafka para que Prometheus las recoja.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>El ajuste de rendimiento de Kafka implica optimizar las configuraciones del broker, los ajustes del productor y del consumidor, y usar herramientas de monitoreo para garantizar una operación eficiente. Al ajustar cuidadosamente estos parámetros y monitorear continuamente el sistema, puedes lograr un rendimiento óptimo y una latencia adecuada para tu clúster de Kafka.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='kafka-monitoring-and-management'>&#x25C4;Monitoreo y Gestión de Kafka</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Ajuste de Rendimiento de Kafka</a>
	</div>
	<div class='col-4 text-end'>
					<a href='kafka-in-a-multi-data-center-setup'>Kafka en una Configuración Multi-Centro de Datos &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
