<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grupos de Consumidores</title>

    <link rel="alternate" href="https://campusempresa.com/mod/kafka/consumer-groups" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/kafka/consumer-groups" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/kafka/consumer-groups" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/kafka/consumer-groups" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/kafka/consumer-groups" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='consuming-messages'>&#x25C4;Consumo de Mensajes</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Grupos de Consumidores</a>
	</div>
	<div class='col-4 text-end'>
					<a href='offset-management'>Gestión de Desplazamientos &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En esta sección, exploraremos el concepto de Grupos de Consumidores en Apache Kafka. Entender los Grupos de Consumidores es crucial para consumir mensajes de manera eficiente desde los temas de Kafka, especialmente en un entorno distribuido.</p>
</div><h1>¿Qué son los Grupos de Consumidores?</h1>
<div class='content'><ul>
<li><strong>Definición</strong>: Un Grupo de Consumidores es un grupo de consumidores que trabajan juntos para consumir mensajes de los temas de Kafka.</li>
<li><strong>Propósito</strong>: Permiten el procesamiento paralelo de mensajes y proporcionan tolerancia a fallos.</li>
<li><strong>Concepto Clave</strong>: Cada mensaje en una partición de un tema es consumido por solo un consumidor en el grupo.</li>
</ul>
</div><h1>Cómo Funcionan los Grupos de Consumidores</h1>
<div class='content'><ul>
<li><strong>Asignación de Particiones</strong>: Kafka divide las particiones de un tema entre los consumidores en un grupo. Cada partición es consumida por solo un consumidor en el grupo.</li>
<li><strong>Rebalanceo</strong>: Cuando un consumidor se une o deja el grupo, Kafka reasigna las particiones entre los consumidores restantes.</li>
<li><strong>Gestión de Desplazamientos</strong>: Kafka lleva un registro del desplazamiento de cada partición para cada grupo de consumidores, asegurando que los mensajes no se reprocesen.</li>
</ul>
</div><h2>Ejemplo: Grupo de Consumidores con Dos Consumidores</h2>
<div class='content'><p>Consideremos un tema con cuatro particiones (P0, P1, P2, P3) y un grupo de consumidores con dos consumidores (C1, C2).</p>
<ul>
<li>
<p><strong>Asignación Inicial</strong>:</p>
<ul>
<li>C1: P0, P1</li>
<li>C2: P2, P3</li>
</ul>
</li>
<li>
<p><strong>Después de que C1 se Va</strong>:</p>
<ul>
<li>C2: P0, P1, P2, P3</li>
</ul>
</li>
</ul>
</div><h1>Creación y Gestión de Grupos de Consumidores</h1>
<div class='content'></div><h2>Creación de un Grupo de Consumidores</h2>
<div class='content'><p>Para crear un grupo de consumidores, simplemente inicie múltiples instancias de consumidores con el mismo ID de grupo.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UHJvcGVydGllcyBwcm9wcyA9IG5ldyBQcm9wZXJ0aWVzKCk7CnByb3BzLnB1dCgiYm9vdHN0cmFwLnNlcnZlcnMiLCAibG9jYWxob3N0OjkwOTIiKTsKcHJvcHMucHV0KCJncm91cC5pZCIsICJteS1ncm91cCIpOwpwcm9wcy5wdXQoImtleS5kZXNlcmlhbGl6ZXIiLCAib3JnLmFwYWNoZS5rYWZrYS5jb21tb24uc2VyaWFsaXphdGlvbi5TdHJpbmdEZXNlcmlhbGl6ZXIiKTsKcHJvcHMucHV0KCJ2YWx1ZS5kZXNlcmlhbGl6ZXIiLCAib3JnLmFwYWNoZS5rYWZrYS5jb21tb24uc2VyaWFsaXphdGlvbi5TdHJpbmdEZXNlcmlhbGl6ZXIiKTsKCkthZmthQ29uc3VtZXI8U3RyaW5nLCBTdHJpbmc+IGNvbnN1bWVyID0gbmV3IEthZmthQ29uc3VtZXI8Pihwcm9wcyk7CmNvbnN1bWVyLnN1YnNjcmliZShBcnJheXMuYXNMaXN0KCJteS10b3BpYyIpKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Properties props = new Properties();
props.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);
props.put(&quot;group.id&quot;, &quot;my-group&quot;);
props.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);
props.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);

KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(props);
consumer.subscribe(Arrays.asList(&quot;my-topic&quot;));</pre></div><div class='content'></div><h2>Gestión de Desplazamientos</h2>
<div class='content'><p>Kafka gestiona automáticamente los desplazamientos para los grupos de consumidores, pero también puede comprometer manualmente los desplazamientos.</p>
<ul>
<li>
<p><strong>Compromiso Automático de Desplazamientos</strong>:</p>
<pre><code class="language-java">props.put(&quot;enable.auto.commit&quot;, &quot;true&quot;);
props.put(&quot;auto.commit.interval.ms&quot;, &quot;1000&quot;);
</code></pre>
</li>
<li>
<p><strong>Compromiso Manual de Desplazamientos</strong>:</p>
<pre><code class="language-java">props.put(&quot;enable.auto.commit&quot;, &quot;false&quot;);

// Después de procesar los registros
consumer.commitSync();
</code></pre>
</li>
</ul>
</div><h2>Rebalanceo</h2>
<div class='content'><p>El rebalanceo ocurre cuando:</p>
<ul>
<li>Un nuevo consumidor se une al grupo.</li>
<li>Un consumidor existente deja el grupo.</li>
<li>Se modifican las particiones de un tema.</li>
</ul>
<p>El rebalanceo asegura que todas las particiones sean asignadas a consumidores, pero puede interrumpir temporalmente el procesamiento de mensajes.</p>
</div><h1>Monitoreo de Grupos de Consumidores</h1>
<div class='content'><p>Kafka proporciona herramientas para monitorear los grupos de consumidores:</p>
<ul>
<li>
<p><strong>Comando de Grupo de Consumidores de Kafka</strong>:</p>
<pre><code class="language-sh">kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group
</code></pre>
</li>
<li>
<p><strong>Métricas</strong>: Kafka expone varias métricas relacionadas con los grupos de consumidores, como el retraso, que se pueden monitorear usando JMX u otras herramientas de monitoreo.</p>
</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Los Grupos de Consumidores son un concepto fundamental en Kafka que permite un consumo de mensajes escalable y tolerante a fallos. Al distribuir particiones entre múltiples consumidores, permiten el procesamiento paralelo y aseguran que cada mensaje sea procesado por solo un consumidor en el grupo. Entender cómo crear, gestionar y monitorear los grupos de consumidores es esencial para construir aplicaciones robustas basadas en Kafka.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='consuming-messages'>&#x25C4;Consumo de Mensajes</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Grupos de Consumidores</a>
	</div>
	<div class='col-4 text-end'>
					<a href='offset-management'>Gestión de Desplazamientos &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
