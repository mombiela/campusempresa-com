<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conceptos Básicos de Dockerfile</title>

    <link rel="alternate" href="https://campusempresa.com/mod/docker/02-03-dockerfile-basics" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/docker/02-03-dockerfile-basics" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/docker/02-03-dockerfile-basics" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/docker/02-03-dockerfile-basics" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/docker/02-03-dockerfile-basics" class="px-2">CA</a>
<br>
			<cite>Construyendo la sociedad de hoy y del mañana</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Contenido del curso</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competencias técnicas</a>
				<a href="/all/conocimientos">Conocimientos</a>
				<a href="/all/soft_skills">Competencias sociales</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-02-building-docker-images' title="Construyendo Imágenes Docker">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Conceptos Básicos de Dockerfile</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-04-managing-docker-images' title="Gestionando Imágenes Docker">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introducción</p>
</h1>
<div class='content'><p>Un Dockerfile es un archivo de texto que contiene una serie de instrucciones que Docker utiliza para construir una imagen. Cada instrucción en un Dockerfile crea una capa en la imagen, lo que permite que Docker reutilice capas anteriores para optimizar el proceso de construcción.</p>
</div><h1><p>Estructura de un Dockerfile</p>
</h1>
<div class='content'><p>Un Dockerfile se compone de varias instrucciones que se ejecutan en secuencia. A continuación, se presentan algunas de las instrucciones más comunes:</p>
<ol>
<li><strong>FROM</strong>: Especifica la imagen base a partir de la cual se construirá la nueva imagen.</li>
<li><strong>RUN</strong>: Ejecuta comandos en la imagen.</li>
<li><strong>COPY</strong>: Copia archivos o directorios desde el sistema de archivos del host al sistema de archivos de la imagen.</li>
<li><strong>ADD</strong>: Similar a COPY, pero también puede descomprimir archivos y descargar archivos desde URLs.</li>
<li><strong>CMD</strong>: Especifica el comando que se ejecutará cuando se inicie un contenedor a partir de la imagen.</li>
<li><strong>ENTRYPOINT</strong>: Configura un contenedor para que se ejecute como un ejecutable.</li>
<li><strong>WORKDIR</strong>: Establece el directorio de trabajo para las instrucciones RUN, CMD, ENTRYPOINT, COPY y ADD.</li>
<li><strong>ENV</strong>: Establece variables de entorno.</li>
<li><strong>EXPOSE</strong>: Informa a Docker que el contenedor escucha en puertos de red especificados en tiempo de ejecución.</li>
</ol>
</div><h1><p>Ejemplo de Dockerfile</p>
</h1>
<div class='content'><p>A continuación, se muestra un ejemplo de un Dockerfile simple para una aplicación Node.js:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2FyIHVuYSBpbWFnZW4gYmFzZSBvZmljaWFsIGRlIE5vZGUuanMKRlJPTSBub2RlOjE0CgojIEVzdGFibGVjZXIgZWwgZGlyZWN0b3JpbyBkZSB0cmFiYWpvIGVuIGVsIGNvbnRlbmVkb3IKV09SS0RJUiAvYXBwCgojIENvcGlhciBlbCBhcmNoaXZvIHBhY2thZ2UuanNvbiB5IHBhY2thZ2UtbG9jay5qc29uCkNPUFkgcGFja2FnZSouanNvbiAuLwoKIyBJbnN0YWxhciBsYXMgZGVwZW5kZW5jaWFzIGRlbCBwcm95ZWN0bwpSVU4gbnBtIGluc3RhbGwKCiMgQ29waWFyIGVsIHJlc3RvIGRlbCBjw7NkaWdvIGRlIGxhIGFwbGljYWNpw7NuCkNPUFkgLiAuCgojIEV4cG9uZXIgZWwgcHVlcnRvIGVuIGVsIHF1ZSBsYSBhcGxpY2FjacOzbiBlc2N1Y2hhcsOhCkVYUE9TRSAzMDAwCgojIENvbWFuZG8gcGFyYSBlamVjdXRhciBsYSBhcGxpY2FjacOzbgpDTUQgWyJub2RlIiwgImFwcC5qcyJd"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Usar una imagen base oficial de Node.js
FROM node:14

# Establecer el directorio de trabajo en el contenedor
WORKDIR /app

# Copiar el archivo package.json y package-lock.json
COPY package*.json ./

# Instalar las dependencias del proyecto
RUN npm install

# Copiar el resto del c&oacute;digo de la aplicaci&oacute;n
COPY . .

# Exponer el puerto en el que la aplicaci&oacute;n escuchar&aacute;
EXPOSE 3000

# Comando para ejecutar la aplicaci&oacute;n
CMD [&quot;node&quot;, &quot;app.js&quot;]</pre></div><div class='content'></div><h2><p>Explicación del Dockerfile</p>
</h2>
<div class='content'><ol>
<li><strong>FROM node:14</strong>: Utiliza la imagen oficial de Node.js versión 14 como base.</li>
<li><strong>WORKDIR /app</strong>: Establece el directorio de trabajo en <code>/app</code>.</li>
<li><em><em>COPY package</em>.json ./</em>*: Copia los archivos <code>package.json</code> y <code>package-lock.json</code> al directorio de trabajo.</li>
<li><strong>RUN npm install</strong>: Ejecuta <code>npm install</code> para instalar las dependencias del proyecto.</li>
<li><strong>COPY . .</strong>: Copia el resto del código de la aplicación al directorio de trabajo.</li>
<li><strong>EXPOSE 3000</strong>: Informa a Docker que el contenedor escuchará en el puerto 3000.</li>
<li><strong>CMD [&quot;node&quot;, &quot;app.js&quot;]</strong>: Especifica el comando para ejecutar la aplicación cuando se inicie el contenedor.</li>
</ol>
</div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Crear un Dockerfile para una Aplicación Python</p>
</h2>
<div class='content'><p>Crea un Dockerfile para una aplicación Python simple que utiliza Flask. La aplicación debe mostrar &quot;Hello, World!&quot; cuando se accede a ella en el puerto 5000.</p>
<h4>Pasos:</h4>
<ol>
<li>
<p>Crea un archivo <code>app.py</code> con el siguiente contenido:</p>
<pre><code class="language-python">from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello_world():
    return 'Hello, World!'

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
</code></pre>
</li>
<li>
<p>Crea un archivo <code>requirements.txt</code> con el siguiente contenido:</p>
<pre><code>Flask==2.0.1
</code></pre>
</li>
<li>
<p>Crea un Dockerfile con las siguientes instrucciones:</p>
<pre><code class="language-Dockerfile"># Usar una imagen base oficial de Python
FROM python:3.9

# Establecer el directorio de trabajo en el contenedor
WORKDIR /app

# Copiar el archivo requirements.txt
COPY requirements.txt ./

# Instalar las dependencias del proyecto
RUN pip install --no-cache-dir -r requirements.txt

# Copiar el resto del código de la aplicación
COPY . .

# Exponer el puerto en el que la aplicación escuchará
EXPOSE 5000

# Comando para ejecutar la aplicación
CMD [&quot;python&quot;, &quot;app.py&quot;]
</code></pre>
</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'><p>El Dockerfile completo para la aplicación Python sería:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2FyIHVuYSBpbWFnZW4gYmFzZSBvZmljaWFsIGRlIFB5dGhvbgpGUk9NIHB5dGhvbjozLjkKCiMgRXN0YWJsZWNlciBlbCBkaXJlY3RvcmlvIGRlIHRyYWJham8gZW4gZWwgY29udGVuZWRvcgpXT1JLRElSIC9hcHAKCiMgQ29waWFyIGVsIGFyY2hpdm8gcmVxdWlyZW1lbnRzLnR4dApDT1BZIHJlcXVpcmVtZW50cy50eHQgLi8KCiMgSW5zdGFsYXIgbGFzIGRlcGVuZGVuY2lhcyBkZWwgcHJveWVjdG8KUlVOIHBpcCBpbnN0YWxsIC0tbm8tY2FjaGUtZGlyIC1yIHJlcXVpcmVtZW50cy50eHQKCiMgQ29waWFyIGVsIHJlc3RvIGRlbCBjw7NkaWdvIGRlIGxhIGFwbGljYWNpw7NuCkNPUFkgLiAuCgojIEV4cG9uZXIgZWwgcHVlcnRvIGVuIGVsIHF1ZSBsYSBhcGxpY2FjacOzbiBlc2N1Y2hhcsOhCkVYUE9TRSA1MDAwCgojIENvbWFuZG8gcGFyYSBlamVjdXRhciBsYSBhcGxpY2FjacOzbgpDTUQgWyJweXRob24iLCAiYXBwLnB5Il0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Usar una imagen base oficial de Python
FROM python:3.9

# Establecer el directorio de trabajo en el contenedor
WORKDIR /app

# Copiar el archivo requirements.txt
COPY requirements.txt ./

# Instalar las dependencias del proyecto
RUN pip install --no-cache-dir -r requirements.txt

# Copiar el resto del c&oacute;digo de la aplicaci&oacute;n
COPY . .

# Exponer el puerto en el que la aplicaci&oacute;n escuchar&aacute;
EXPOSE 5000

# Comando para ejecutar la aplicaci&oacute;n
CMD [&quot;python&quot;, &quot;app.py&quot;]</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta sección, hemos aprendido los conceptos básicos de Dockerfile y cómo utilizarlo para construir imágenes Docker. Hemos cubierto las instrucciones más comunes y hemos visto un ejemplo práctico de cómo crear un Dockerfile para una aplicación Node.js. Además, hemos realizado un ejercicio práctico para crear un Dockerfile para una aplicación Python utilizando Flask. Con estos conocimientos, estás preparado para construir tus propias imágenes Docker personalizadas. En el próximo módulo, profundizaremos en la gestión de imágenes Docker.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-02-building-docker-images' title="Construyendo Imágenes Docker">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-04-managing-docker-images' title="Gestionando Imágenes Docker">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
