<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimización de Imágenes Docker</title>

    <link rel="alternate" href="https://campusempresa.com/mod/docker/optimizing-docker-images" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/docker/optimizing-docker-images" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/docker/optimizing-docker-images" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/docker/optimizing-docker-images" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/docker/optimizing-docker-images" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='deploying-docker-applications'>&#x25C4;Desplegando Aplicaciones Docker</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Optimización de Imágenes Docker</a>
	</div>
	<div class='col-4 text-end'>
					<a href='backup-recovery'>Respaldo y Recuperación &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Optimizar las imágenes Docker es crucial para mejorar el rendimiento, la seguridad y la eficiencia de tus aplicaciones en contenedores. Esta sección te guiará a través de varias técnicas y mejores prácticas para crear imágenes Docker optimizadas.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Tamaño de la Imagen</strong>: Imágenes más pequeñas son más rápidas de construir, transferir y desplegar.</li>
<li><strong>Caché de Capas</strong>: El uso eficiente del caché de capas de Docker puede acelerar el proceso de construcción.</li>
<li><strong>Seguridad</strong>: Minimizar vulnerabilidades utilizando imágenes base seguras y reduciendo la superficie de ataque.</li>
<li><strong>Contexto de Construcción</strong>: Reducir el tamaño del contexto de construcción para acelerar el proceso de construcción.</li>
<li><strong>Construcciones Multi-Etapa</strong>: Utilizar construcciones multi-etapa para mantener la imagen final ligera.</li>
</ul>
</div><h1>Reducción del Tamaño de la Imagen</h1>
<div class='content'></div><h2>Usar Imágenes Base Oficiales</h2>
<div class='content'><p>Comienza con una imagen base mínima para reducir el tamaño general de tu imagen Docker.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2FyIHVuYSBpbWFnZW4gYmFzZSBtw61uaW1hCkZST00gYWxwaW5lOmxhdGVzdAoKIyBJbnN0YWxhciBwYXF1ZXRlcyBuZWNlc2FyaW9zClJVTiBhcGsgYWRkIC0tbm8tY2FjaGUgcHl0aG9uMyBweTMtcGlw"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Usar una imagen base m&iacute;nima
FROM alpine:latest

# Instalar paquetes necesarios
RUN apk add --no-cache python3 py3-pip</pre></div><div class='content'></div><h2>Eliminar Archivos Innecesarios</h2>
<div class='content'><p>Limpia archivos y dependencias innecesarias para mantener el tamaño de la imagen pequeño.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFbGltaW5hciBhcmNoaXZvcyBkZSBjYWNow6kgZGVzcHXDqXMgZGUgaW5zdGFsYXIgcGFxdWV0ZXMKUlVOIGFwayBhZGQgLS1uby1jYWNoZSBweXRob24zIHB5My1waXAgJiYgXAogICAgcm0gLXJmIC92YXIvY2FjaGUvYXBrLyo="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Eliminar archivos de cach&eacute; despu&eacute;s de instalar paquetes
RUN apk add --no-cache python3 py3-pip &amp;&amp; \
    rm -rf /var/cache/apk/*</pre></div><div class='content'></div><h2>Usar .dockerignore</h2>
<div class='content'><p>Usa un archivo <code>.dockerignore</code> para excluir archivos innecesarios del contexto de construcción.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyAuZG9ja2VyaWdub3JlCm5vZGVfbW9kdWxlcwoqLmxvZwoqLm1k"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># .dockerignore
node_modules
*.log
*.md</pre></div><div class='content'></div><h1>Caché de Capas</h1>
<div class='content'></div><h2>Orden de Instrucciones</h2>
<div class='content'><p>Ordena las instrucciones de tu Dockerfile para maximizar el uso del caché de capas de Docker.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBJbnN0YWxhciBkZXBlbmRlbmNpYXMgcHJpbWVybyBwYXJhIGFwcm92ZWNoYXIgZWwgY2FjaMOpCkNPUFkgcmVxdWlyZW1lbnRzLnR4dCAvYXBwLwpSVU4gcGlwIGluc3RhbGwgLS1uby1jYWNoZS1kaXIgLXIgL2FwcC9yZXF1aXJlbWVudHMudHh0CgojIENvcGlhciBlbCByZXN0byBkZWwgY8OzZGlnbyBkZSBsYSBhcGxpY2FjacOzbgpDT1BZIC4gL2FwcC8="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Instalar dependencias primero para aprovechar el cach&eacute;
COPY requirements.txt /app/
RUN pip install --no-cache-dir -r /app/requirements.txt

# Copiar el resto del c&oacute;digo de la aplicaci&oacute;n
COPY . /app/</pre></div><div class='content'></div><h2>Minimizar Capas</h2>
<div class='content'><p>Combina múltiples comandos en una sola instrucción <code>RUN</code> para reducir el número de capas.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb21iaW5hciBjb21hbmRvcyBwYXJhIG1pbmltaXphciBjYXBhcwpSVU4gYXB0LWdldCB1cGRhdGUgJiYgYXB0LWdldCBpbnN0YWxsIC15IFwKICAgIHB5dGhvbjMgXAogICAgcHl0aG9uMy1waXAgJiYgXAogICAgYXB0LWdldCBjbGVhbiAmJiBcCiAgICBybSAtcmYgL3Zhci9saWIvYXB0L2xpc3RzLyo="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Combinar comandos para minimizar capas
RUN apt-get update &amp;&amp; apt-get install -y \
    python3 \
    python3-pip &amp;&amp; \
    apt-get clean &amp;&amp; \
    rm -rf /var/lib/apt/lists/*</pre></div><div class='content'></div><h1>Seguridad</h1>
<div class='content'></div><h2>Usar Imágenes Base Confiables</h2>
<div class='content'><p>Siempre usa imágenes base oficiales o confiables para minimizar riesgos de seguridad.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2FyIHVuYSBpbWFnZW4gb2ZpY2lhbCBkZSBQeXRob24KRlJPTSBweXRob246My45LXNsaW0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Usar una imagen oficial de Python
FROM python:3.9-slim</pre></div><div class='content'></div><h2>Actualizaciones Regulares</h2>
<div class='content'><p>Actualiza regularmente tus imágenes base y dependencias para incluir los últimos parches de seguridad.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBBY3R1YWxpemFyIGltYWdlbiBiYXNlIHkgZGVwZW5kZW5jaWFzCkZST00gcHl0aG9uOjMuOS1zbGltClJVTiBhcHQtZ2V0IHVwZGF0ZSAmJiBhcHQtZ2V0IHVwZ3JhZGUgLXk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Actualizar imagen base y dependencias
FROM python:3.9-slim
RUN apt-get update &amp;&amp; apt-get upgrade -y</pre></div><div class='content'></div><h1>Contexto de Construcción</h1>
<div class='content'></div><h2>Reducir el Tamaño del Contexto de Construcción</h2>
<div class='content'><p>Mantén tu contexto de construcción pequeño excluyendo archivos y directorios innecesarios.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2FyIC5kb2NrZXJpZ25vcmUgcGFyYSBleGNsdWlyIGFyY2hpdm9zIGlubmVjZXNhcmlvcwpDT1BZIC4gL2FwcC8="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Usar .dockerignore para excluir archivos innecesarios
COPY . /app/</pre></div><div class='content'></div><h1>Construcciones Multi-Etapa</h1>
<div class='content'></div><h2>Ejemplo de Construcción Multi-Etapa</h2>
<div class='content'><p>Usa construcciones multi-etapa para crear imágenes finales ligeras copiando solo los artefactos necesarios de la etapa de construcción.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBQcmltZXJhIGV0YXBhOiBjb25zdHJ1aXIgbGEgYXBsaWNhY2nDs24KRlJPTSBnb2xhbmc6MS4xNiBBUyBidWlsZGVyCldPUktESVIgL2FwcApDT1BZIC4gLgpSVU4gZ28gYnVpbGQgLW8gbXlhcHAKCiMgU2VndW5kYSBldGFwYTogY3JlYXIgbGEgaW1hZ2VuIGZpbmFsCkZST00gYWxwaW5lOmxhdGVzdApXT1JLRElSIC9hcHAKQ09QWSAtLWZyb209YnVpbGRlciAvYXBwL215YXBwIC4KQ01EIFsiLi9teWFwcCJd"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Primera etapa: construir la aplicaci&oacute;n
FROM golang:1.16 AS builder
WORKDIR /app
COPY . .
RUN go build -o myapp

# Segunda etapa: crear la imagen final
FROM alpine:latest
WORKDIR /app
COPY --from=builder /app/myapp .
CMD [&quot;./myapp&quot;]</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Optimizar las imágenes Docker implica varias mejores prácticas, incluyendo la reducción del tamaño de la imagen, el aprovechamiento del caché de capas, asegurar la seguridad, minimizar el contexto de construcción y usar construcciones multi-etapa. Siguiendo estas pautas, puedes crear imágenes Docker eficientes, seguras y de alto rendimiento que son más fáciles de gestionar y desplegar.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='deploying-docker-applications'>&#x25C4;Desplegando Aplicaciones Docker</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Optimización de Imágenes Docker</a>
	</div>
	<div class='col-4 text-end'>
					<a href='backup-recovery'>Respaldo y Recuperación &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
