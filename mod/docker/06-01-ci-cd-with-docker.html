<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CI/CD con Docker</title>

    <link rel="alternate" href="https://campusempresa.com/mod/docker/06-01-ci-cd-with-docker" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/docker/06-01-ci-cd-with-docker" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/docker/06-01-ci-cd-with-docker" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/docker/06-01-ci-cd-with-docker" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/docker/06-01-ci-cd-with-docker" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-05-docker-logging-and-monitoring' title="Registro y Monitoreo en Docker">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">CI/CD con Docker</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-orchestrating-containers-with-docker-swarm' title="Orquestando Contenedores con Docker Swarm">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>La integración continua (CI) y la entrega continua (CD) son prácticas esenciales en el desarrollo de software moderno. Docker facilita estas prácticas al proporcionar un entorno consistente y reproducible para construir, probar y desplegar aplicaciones. En esta sección, aprenderás cómo integrar Docker en tus pipelines de CI/CD para mejorar la eficiencia y la fiabilidad de tus despliegues.</p>
</div><h1>Objetivos</h1>
<div class='content'><ul>
<li>Entender los conceptos básicos de CI/CD.</li>
<li>Configurar un pipeline de CI/CD utilizando Docker.</li>
<li>Integrar Docker con herramientas populares de CI/CD como Jenkins, GitLab CI y GitHub Actions.</li>
<li>Automatizar la construcción, prueba y despliegue de aplicaciones Dockerizadas.</li>
</ul>
</div><h1>Conceptos Básicos de CI/CD</h1>
<div class='content'></div><h2>Integración Continua (CI)</h2>
<div class='content'><p>La integración continua es una práctica de desarrollo de software en la que los desarrolladores integran su código en un repositorio compartido varias veces al día. Cada integración es verificada por una build automatizada (incluyendo pruebas) para detectar errores lo antes posible.</p>
</div><h2>Entrega Continua (CD)</h2>
<div class='content'><p>La entrega continua es una extensión de la integración continua que asegura que el código puede ser desplegado en producción en cualquier momento. Esto se logra automatizando el proceso de despliegue para que las aplicaciones puedan ser lanzadas de manera rápida y segura.</p>
</div><h1>Configurando un Pipeline de CI/CD con Docker</h1>
<div class='content'></div><h2>Paso 1: Preparar el Repositorio</h2>
<div class='content'><ol>
<li>
<p><strong>Estructura del Proyecto</strong>: Asegúrate de que tu proyecto esté organizado de manera que sea fácil de construir y desplegar. Un ejemplo de estructura de proyecto podría ser:</p>
<pre><code>my-app/
├── Dockerfile
├── src/
├── tests/
├── .gitlab-ci.yml
└── .github/
    └── workflows/
        └── ci-cd.yml
</code></pre>
</li>
<li>
<p><strong>Dockerfile</strong>: Define un <code>Dockerfile</code> para construir la imagen de tu aplicación.</p>
<pre><code class="language-dockerfile"># Dockerfile
FROM python:3.8-slim

WORKDIR /app

COPY requirements.txt requirements.txt
RUN pip install -r requirements.txt

COPY . .

CMD [&quot;python&quot;, &quot;app.py&quot;]
</code></pre>
</li>
</ol>
</div><h2>Paso 2: Configurar Jenkins para CI/CD</h2>
<div class='content'><ol>
<li>
<p><strong>Instalar Jenkins</strong>: Si no tienes Jenkins instalado, puedes usar Docker para instalarlo rápidamente.</p>
<pre><code class="language-bash">docker run -d -p 8080:8080 -p 50000:50000 --name jenkins jenkins/jenkins:lts
</code></pre>
</li>
<li>
<p><strong>Configurar Jenkins Pipeline</strong>: Crea un nuevo pipeline en Jenkins y configura el <code>Jenkinsfile</code>.</p>
<pre><code class="language-groovy">pipeline {
    agent any

    stages {
        stage('Build') {
            steps {
                script {
                    docker.build('my-app')
                }
            }
        }
        stage('Test') {
            steps {
                script {
                    docker.image('my-app').inside {
                        sh 'pytest tests/'
                    }
                }
            }
        }
        stage('Deploy') {
            steps {
                script {
                    docker.image('my-app').push('my-repo/my-app:latest')
                }
            }
        }
    }
}
</code></pre>
</li>
</ol>
</div><h2>Paso 3: Configurar GitLab CI/CD</h2>
<div class='content'><ol>
<li>
<p><strong>Archivo <code>.gitlab-ci.yml</code></strong>: Define el pipeline en el archivo <code>.gitlab-ci.yml</code>.</p>
<pre><code class="language-yaml">stages:
  - build
  - test
  - deploy

build:
  stage: build
  script:
    - docker build -t my-app .

test:
  stage: test
  script:
    - docker run my-app pytest tests/

deploy:
  stage: deploy
  script:
    - docker tag my-app my-repo/my-app:latest
    - docker push my-repo/my-app:latest
</code></pre>
</li>
</ol>
</div><h2>Paso 4: Configurar GitHub Actions</h2>
<div class='content'><ol>
<li>
<p><strong>Archivo de Workflow</strong>: Define el workflow en <code>.github/workflows/ci-cd.yml</code>.</p>
<pre><code class="language-yaml">name: CI/CD

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v1

      - name: Build Docker image
        run: docker build -t my-app .

      - name: Run tests
        run: docker run my-app pytest tests/

      - name: Log in to Docker Hub
        run: echo &quot;${{ secrets.DOCKER_PASSWORD }}&quot; | docker login -u &quot;${{ secrets.DOCKER_USERNAME }}&quot; --password-stdin

      - name: Push Docker image
        run: docker push my-repo/my-app:latest
</code></pre>
</li>
</ol>
</div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio 1: Configurar un Pipeline de CI/CD con GitHub Actions</h2>
<div class='content'><ol>
<li><strong>Objetivo</strong>: Configurar un pipeline de CI/CD para una aplicación Dockerizada utilizando GitHub Actions.</li>
<li><strong>Instrucciones</strong>:
<ul>
<li>Crea un repositorio en GitHub.</li>
<li>Añade un <code>Dockerfile</code> y un archivo de workflow en <code>.github/workflows/ci-cd.yml</code>.</li>
<li>Configura el workflow para construir, probar y desplegar la imagen Docker.</li>
<li>Asegúrate de que el pipeline se ejecute correctamente al hacer push a la rama <code>main</code>.</li>
</ul>
</li>
</ol>
</div><h2>Solución</h2>
<div class='content'><ol>
<li>
<p><strong>Crear Repositorio</strong>: Crea un nuevo repositorio en GitHub.</p>
</li>
<li>
<p><strong>Añadir Dockerfile</strong>: Añade el siguiente <code>Dockerfile</code> al repositorio.</p>
<pre><code class="language-dockerfile">FROM python:3.8-slim

WORKDIR /app

COPY requirements.txt requirements.txt
RUN pip install -r requirements.txt

COPY . .

CMD [&quot;python&quot;, &quot;app.py&quot;]
</code></pre>
</li>
<li>
<p><strong>Añadir Workflow</strong>: Añade el siguiente archivo de workflow en <code>.github/workflows/ci-cd.yml</code>.</p>
<pre><code class="language-yaml">name: CI/CD

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v1

      - name: Build Docker image
        run: docker build -t my-app .

      - name: Run tests
        run: docker run my-app pytest tests/

      - name: Log in to Docker Hub
        run: echo &quot;${{ secrets.DOCKER_PASSWORD }}&quot; | docker login -u &quot;${{ secrets.DOCKER_USERNAME }}&quot; --password-stdin

      - name: Push Docker image
        run: docker push my-repo/my-app:latest
</code></pre>
</li>
<li>
<p><strong>Configurar Secretos</strong>: Añade los secretos <code>DOCKER_USERNAME</code> y <code>DOCKER_PASSWORD</code> en la configuración del repositorio en GitHub.</p>
</li>
<li>
<p><strong>Probar Pipeline</strong>: Haz push a la rama <code>main</code> y verifica que el pipeline se ejecute correctamente.</p>
</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, has aprendido cómo configurar un pipeline de CI/CD utilizando Docker. Has visto ejemplos prácticos de cómo integrar Docker con Jenkins, GitLab CI y GitHub Actions. Estas habilidades te permitirán automatizar la construcción, prueba y despliegue de tus aplicaciones Dockerizadas, mejorando la eficiencia y fiabilidad de tus despliegues.</p>
<p>En el próximo módulo, profundizaremos en la orquestación de contenedores con Docker Swarm y Kubernetes, lo que te permitirá gestionar aplicaciones complejas en producción.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-05-docker-logging-and-monitoring' title="Registro y Monitoreo en Docker">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-orchestrating-containers-with-docker-swarm' title="Orquestando Contenedores con Docker Swarm">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
