<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obteniendo Datos de APIs</title>

    <link rel="alternate" href="https://campusempresa.com/mod/d3_js/07-01-fetching-data-apis" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/d3_js/07-01-fetching-data-apis" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/d3_js/07-01-fetching-data-apis" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/d3_js/07-01-fetching-data-apis" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/d3_js/07-01-fetching-data-apis" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-04-animating-visualizations' title="Animando Visualizaciones">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Obteniendo Datos de APIs</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-02-data-cleaning-transformation' title="Limpieza y Transformación de Datos">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En este módulo, aprenderemos cómo obtener datos de APIs (Application Programming Interfaces) utilizando D3.js. Las APIs son una fuente común de datos en aplicaciones web modernas, y saber cómo interactuar con ellas es una habilidad esencial para cualquier desarrollador de visualizaciones de datos.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ol>
<li><strong>API (Application Programming Interface)</strong>: Un conjunto de reglas y protocolos para construir y interactuar con software. Las APIs permiten que diferentes aplicaciones se comuniquen entre sí.</li>
<li><strong>HTTP (Hypertext Transfer Protocol)</strong>: El protocolo utilizado para enviar y recibir datos en la web.</li>
<li><strong>JSON (JavaScript Object Notation)</strong>: Un formato de datos ligero y fácil de leer/escribir para el intercambio de datos.</li>
</ol>
</div><h1>Pasos para Obtener Datos de una API</h1>
<div class='content'><ol>
<li><strong>Identificar la API y su Endpoint</strong>: Encuentra la API que proporciona los datos que necesitas y el endpoint específico que debes usar.</li>
<li><strong>Realizar una Solicitud HTTP</strong>: Utiliza métodos como <code>GET</code> para solicitar datos del servidor.</li>
<li><strong>Procesar la Respuesta</strong>: Una vez que recibes los datos, necesitas procesarlos y convertirlos en un formato que D3.js pueda utilizar.</li>
</ol>
</div><h1>Ejemplo Práctico</h1>
<div class='content'><p>Vamos a obtener datos de una API pública y visualizarlos utilizando D3.js. En este ejemplo, usaremos la API de OpenWeatherMap para obtener datos meteorológicos.</p>
</div><h2>Paso 1: Configurar el Entorno</h2>
<div class='content'><p>Asegúrate de tener un archivo HTML básico con D3.js incluido:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+RmV0Y2hpbmcgRGF0YSBmcm9tIEFQSXM8L3RpdGxlPgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vZDNqcy5vcmcvZDMudjYubWluLmpzIj48L3NjcmlwdD4KPC9oZWFkPgo8Ym9keT4KICAgIDxzY3JpcHQgc3JjPSJzY3JpcHQuanMiPjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Fetching Data from APIs&lt;/title&gt;
    &lt;script src=&quot;https://d3js.org/d3.v6.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h2>Paso 2: Realizar una Solicitud HTTP</h2>
<div class='content'><p>En tu archivo <code>script.js</code>, realiza una solicitud HTTP para obtener datos de la API de OpenWeatherMap:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUmVlbXBsYXphICdZT1VSX0FQSV9LRVknIGNvbiB0dSBjbGF2ZSBkZSBBUEkgZGUgT3BlbldlYXRoZXJNYXAKY29uc3QgYXBpS2V5ID0gJ1lPVVJfQVBJX0tFWSc7CmNvbnN0IGNpdHkgPSAnTG9uZG9uJzsKY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP3E9JHtjaXR5fSZhcHBpZD0ke2FwaUtleX1gOwoKZDMuanNvbih1cmwpLnRoZW4oZGF0YSA9PiB7CiAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgIC8vIFByb2Nlc2EgeSB2aXN1YWxpemEgbG9zIGRhdG9zIGFxdcOtCn0pLmNhdGNoKGVycm9yID0+IHsKICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGRhdGE6JywgZXJyb3IpOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Reemplaza 'YOUR_API_KEY' con tu clave de API de OpenWeatherMap
const apiKey = 'YOUR_API_KEY';
const city = 'London';
const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&amp;appid=${apiKey}`;

d3.json(url).then(data =&gt; {
    console.log(data);
    // Procesa y visualiza los datos aqu&iacute;
}).catch(error =&gt; {
    console.error('Error fetching data:', error);
});</pre></div><div class='content'></div><h2>Paso 3: Procesar y Visualizar los Datos</h2>
<div class='content'><p>Una vez que tengas los datos, puedes procesarlos y visualizarlos. Por ejemplo, podrías crear un gráfico de barras que muestre la temperatura actual, la temperatura mínima y la temperatura máxima.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuanNvbih1cmwpLnRoZW4oZGF0YSA9PiB7CiAgICBjb25zdCB0ZW1wZXJhdHVyZXMgPSBbCiAgICAgICAgeyB0eXBlOiAnQ3VycmVudCcsIHZhbHVlOiBkYXRhLm1haW4udGVtcCB9LAogICAgICAgIHsgdHlwZTogJ01pbicsIHZhbHVlOiBkYXRhLm1haW4udGVtcF9taW4gfSwKICAgICAgICB7IHR5cGU6ICdNYXgnLCB2YWx1ZTogZGF0YS5tYWluLnRlbXBfbWF4IH0KICAgIF07CgogICAgY29uc3Qgd2lkdGggPSA1MDA7CiAgICBjb25zdCBoZWlnaHQgPSAzMDA7CiAgICBjb25zdCBtYXJnaW4gPSB7IHRvcDogMjAsIHJpZ2h0OiAzMCwgYm90dG9tOiA0MCwgbGVmdDogNDAgfTsKCiAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoJ2JvZHknKS5hcHBlbmQoJ3N2ZycpCiAgICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpCiAgICAgICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodCk7CgogICAgY29uc3QgeCA9IGQzLnNjYWxlQmFuZCgpCiAgICAgICAgLmRvbWFpbih0ZW1wZXJhdHVyZXMubWFwKGQgPT4gZC50eXBlKSkKICAgICAgICAucmFuZ2UoW21hcmdpbi5sZWZ0LCB3aWR0aCAtIG1hcmdpbi5yaWdodF0pCiAgICAgICAgLnBhZGRpbmcoMC4xKTsKCiAgICBjb25zdCB5ID0gZDMuc2NhbGVMaW5lYXIoKQogICAgICAgIC5kb21haW4oWzAsIGQzLm1heCh0ZW1wZXJhdHVyZXMsIGQgPT4gZC52YWx1ZSldKQogICAgICAgIC5uaWNlKCkKICAgICAgICAucmFuZ2UoW2hlaWdodCAtIG1hcmdpbi5ib3R0b20sIG1hcmdpbi50b3BdKTsKCiAgICBzdmcuYXBwZW5kKCdnJykKICAgICAgICAuYXR0cignZmlsbCcsICdzdGVlbGJsdWUnKQogICAgICAgIC5zZWxlY3RBbGwoJ3JlY3QnKQogICAgICAgIC5kYXRhKHRlbXBlcmF0dXJlcykKICAgICAgICAuam9pbigncmVjdCcpCiAgICAgICAgLmF0dHIoJ3gnLCBkID0+IHgoZC50eXBlKSkKICAgICAgICAuYXR0cigneScsIGQgPT4geShkLnZhbHVlKSkKICAgICAgICAuYXR0cignaGVpZ2h0JywgZCA9PiB5KDApIC0geShkLnZhbHVlKSkKICAgICAgICAuYXR0cignd2lkdGgnLCB4LmJhbmR3aWR0aCgpKTsKCiAgICBzdmcuYXBwZW5kKCdnJykKICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgwLCR7aGVpZ2h0IC0gbWFyZ2luLmJvdHRvbX0pYCkKICAgICAgICAuY2FsbChkMy5heGlzQm90dG9tKHgpKTsKCiAgICBzdmcuYXBwZW5kKCdnJykKICAgICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke21hcmdpbi5sZWZ0fSwwKWApCiAgICAgICAgLmNhbGwoZDMuYXhpc0xlZnQoeSkpOwp9KS5jYXRjaChlcnJvciA9PiB7CiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBkYXRhOicsIGVycm9yKTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.json(url).then(data =&gt; {
    const temperatures = [
        { type: 'Current', value: data.main.temp },
        { type: 'Min', value: data.main.temp_min },
        { type: 'Max', value: data.main.temp_max }
    ];

    const width = 500;
    const height = 300;
    const margin = { top: 20, right: 30, bottom: 40, left: 40 };

    const svg = d3.select('body').append('svg')
        .attr('width', width)
        .attr('height', height);

    const x = d3.scaleBand()
        .domain(temperatures.map(d =&gt; d.type))
        .range([margin.left, width - margin.right])
        .padding(0.1);

    const y = d3.scaleLinear()
        .domain([0, d3.max(temperatures, d =&gt; d.value)])
        .nice()
        .range([height - margin.bottom, margin.top]);

    svg.append('g')
        .attr('fill', 'steelblue')
        .selectAll('rect')
        .data(temperatures)
        .join('rect')
        .attr('x', d =&gt; x(d.type))
        .attr('y', d =&gt; y(d.value))
        .attr('height', d =&gt; y(0) - y(d.value))
        .attr('width', x.bandwidth());

    svg.append('g')
        .attr('transform', `translate(0,${height - margin.bottom})`)
        .call(d3.axisBottom(x));

    svg.append('g')
        .attr('transform', `translate(${margin.left},0)`)
        .call(d3.axisLeft(y));
}).catch(error =&gt; {
    console.error('Error fetching data:', error);
});</pre></div><div class='content'></div><h2>Ejercicio Práctico</h2>
<div class='content'><p><strong>Objetivo</strong>: Obtener datos de una API diferente y visualizarlos.</p>
<ol>
<li><strong>Selecciona una API pública</strong>: Por ejemplo, la API de SpaceX (https://api.spacexdata.com/v4/launches/latest).</li>
<li><strong>Realiza una solicitud HTTP</strong>: Usa <code>d3.json</code> para obtener los datos.</li>
<li><strong>Procesa los datos</strong>: Extrae la información relevante.</li>
<li><strong>Visualiza los datos</strong>: Crea una visualización simple (por ejemplo, un gráfico de barras o un gráfico de líneas).</li>
</ol>
<p><strong>Solución</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgdXJsID0gJ2h0dHBzOi8vYXBpLnNwYWNleGRhdGEuY29tL3Y0L2xhdW5jaGVzL2xhdGVzdCc7CgpkMy5qc29uKHVybCkudGhlbihkYXRhID0+IHsKICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgY29uc3QgbGF1bmNoRGF0YSA9IFsKICAgICAgICB7IHR5cGU6ICdGbGlnaHQgTnVtYmVyJywgdmFsdWU6IGRhdGEuZmxpZ2h0X251bWJlciB9LAogICAgICAgIHsgdHlwZTogJ1N1Y2Nlc3MnLCB2YWx1ZTogZGF0YS5zdWNjZXNzID8gMSA6IDAgfQogICAgXTsKCiAgICBjb25zdCB3aWR0aCA9IDUwMDsKICAgIGNvbnN0IGhlaWdodCA9IDMwMDsKICAgIGNvbnN0IG1hcmdpbiA9IHsgdG9wOiAyMCwgcmlnaHQ6IDMwLCBib3R0b206IDQwLCBsZWZ0OiA0MCB9OwoKICAgIGNvbnN0IHN2ZyA9IGQzLnNlbGVjdCgnYm9keScpLmFwcGVuZCgnc3ZnJykKICAgICAgICAuYXR0cignd2lkdGgnLCB3aWR0aCkKICAgICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KTsKCiAgICBjb25zdCB4ID0gZDMuc2NhbGVCYW5kKCkKICAgICAgICAuZG9tYWluKGxhdW5jaERhdGEubWFwKGQgPT4gZC50eXBlKSkKICAgICAgICAucmFuZ2UoW21hcmdpbi5sZWZ0LCB3aWR0aCAtIG1hcmdpbi5yaWdodF0pCiAgICAgICAgLnBhZGRpbmcoMC4xKTsKCiAgICBjb25zdCB5ID0gZDMuc2NhbGVMaW5lYXIoKQogICAgICAgIC5kb21haW4oWzAsIGQzLm1heChsYXVuY2hEYXRhLCBkID0+IGQudmFsdWUpXSkKICAgICAgICAubmljZSgpCiAgICAgICAgLnJhbmdlKFtoZWlnaHQgLSBtYXJnaW4uYm90dG9tLCBtYXJnaW4udG9wXSk7CgogICAgc3ZnLmFwcGVuZCgnZycpCiAgICAgICAgLmF0dHIoJ2ZpbGwnLCAnc3RlZWxibHVlJykKICAgICAgICAuc2VsZWN0QWxsKCdyZWN0JykKICAgICAgICAuZGF0YShsYXVuY2hEYXRhKQogICAgICAgIC5qb2luKCdyZWN0JykKICAgICAgICAuYXR0cigneCcsIGQgPT4geChkLnR5cGUpKQogICAgICAgIC5hdHRyKCd5JywgZCA9PiB5KGQudmFsdWUpKQogICAgICAgIC5hdHRyKCdoZWlnaHQnLCBkID0+IHkoMCkgLSB5KGQudmFsdWUpKQogICAgICAgIC5hdHRyKCd3aWR0aCcsIHguYmFuZHdpZHRoKCkpOwoKICAgIHN2Zy5hcHBlbmQoJ2cnKQogICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDAsJHtoZWlnaHQgLSBtYXJnaW4uYm90dG9tfSlgKQogICAgICAgIC5jYWxsKGQzLmF4aXNCb3R0b20oeCkpOwoKICAgIHN2Zy5hcHBlbmQoJ2cnKQogICAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7bWFyZ2luLmxlZnR9LDApYCkKICAgICAgICAuY2FsbChkMy5heGlzTGVmdCh5KSk7Cn0pLmNhdGNoKGVycm9yID0+IHsKICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGRhdGE6JywgZXJyb3IpOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const url = 'https://api.spacexdata.com/v4/launches/latest';

d3.json(url).then(data =&gt; {
    console.log(data);
    const launchData = [
        { type: 'Flight Number', value: data.flight_number },
        { type: 'Success', value: data.success ? 1 : 0 }
    ];

    const width = 500;
    const height = 300;
    const margin = { top: 20, right: 30, bottom: 40, left: 40 };

    const svg = d3.select('body').append('svg')
        .attr('width', width)
        .attr('height', height);

    const x = d3.scaleBand()
        .domain(launchData.map(d =&gt; d.type))
        .range([margin.left, width - margin.right])
        .padding(0.1);

    const y = d3.scaleLinear()
        .domain([0, d3.max(launchData, d =&gt; d.value)])
        .nice()
        .range([height - margin.bottom, margin.top]);

    svg.append('g')
        .attr('fill', 'steelblue')
        .selectAll('rect')
        .data(launchData)
        .join('rect')
        .attr('x', d =&gt; x(d.type))
        .attr('y', d =&gt; y(d.value))
        .attr('height', d =&gt; y(0) - y(d.value))
        .attr('width', x.bandwidth());

    svg.append('g')
        .attr('transform', `translate(0,${height - margin.bottom})`)
        .call(d3.axisBottom(x));

    svg.append('g')
        .attr('transform', `translate(${margin.left},0)`)
        .call(d3.axisLeft(y));
}).catch(error =&gt; {
    console.error('Error fetching data:', error);
});</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>En esta lección, hemos aprendido cómo obtener datos de APIs utilizando D3.js. Hemos cubierto los conceptos básicos de las APIs, cómo realizar solicitudes HTTP y cómo procesar y visualizar los datos obtenidos. Esta habilidad es fundamental para trabajar con datos en tiempo real y crear visualizaciones dinámicas y actualizadas.</p>
<p>En el próximo módulo, profundizaremos en la limpieza y transformación de datos, lo cual es crucial para preparar los datos antes de visualizarlos.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-04-animating-visualizations' title="Animando Visualizaciones">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-02-data-cleaning-transformation' title="Limpieza y Transformación de Datos">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
