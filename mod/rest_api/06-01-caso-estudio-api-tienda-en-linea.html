<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caso de estudio: API de una tienda en línea</title>

    <link rel="alternate" href="https://campusempresa.com/mod/rest_api/06-01-caso-estudio-api-tienda-en-linea" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/rest_api/06-01-caso-estudio-api-tienda-en-linea" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/rest_api/06-01-case-study-online-store-api" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/rest_api/06-01-case-study-online-store-api" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/rest_api/06-01-caso-estudio-api-tienda-en-linea" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-integracion-continua-despliegue' title="Integración continua y despliegue">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Caso de estudio: API de una tienda en línea</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-caso-estudio-api-red-social' title="Caso de estudio: API de una red social">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En este caso de estudio, diseñaremos y desarrollaremos una API RESTful para una tienda en línea. Este ejercicio práctico te permitirá aplicar los conceptos aprendidos en los módulos anteriores y comprender cómo se integran en un proyecto real.</p>
</div><h1>Objetivos del Caso de Estudio</h1>
<div class='content'><ol>
<li><strong>Diseñar la estructura de la API</strong>: Definir los recursos, URIs, métodos HTTP y códigos de estado.</li>
<li><strong>Desarrollar la API</strong>: Implementar la API utilizando un framework popular.</li>
<li><strong>Asegurar la API</strong>: Implementar autenticación, autorización y manejo de errores.</li>
<li><strong>Documentar y probar la API</strong>: Utilizar herramientas como Swagger y Postman.</li>
</ol>
</div><h1>1. Diseño de la API</h1>
<div class='content'></div><h2>1.1 Recursos y URIs</h2>
<div class='content'><p>Los recursos principales de nuestra tienda en línea serán:</p>
<ul>
<li><strong>Productos</strong>: Información sobre los productos disponibles.</li>
<li><strong>Usuarios</strong>: Información sobre los usuarios registrados.</li>
<li><strong>Órdenes</strong>: Información sobre las órdenes de compra.</li>
</ul>
<h4>Estructura de URIs</h4>
<table>
<thead>
<tr>
<th>Recurso</th>
<th>URI Base</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td>Productos</td>
<td><code>/api/products</code></td>
<td>Gestión de productos</td>
</tr>
<tr>
<td>Usuarios</td>
<td><code>/api/users</code></td>
<td>Gestión de usuarios</td>
</tr>
<tr>
<td>Órdenes</td>
<td><code>/api/orders</code></td>
<td>Gestión de órdenes de compra</td>
</tr>
</tbody>
</table>
</div><h2>1.2 Métodos HTTP</h2>
<div class='content'><table>
<thead>
<tr>
<th>Recurso</th>
<th>Método HTTP</th>
<th>URI</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td>Productos</td>
<td>GET</td>
<td><code>/api/products</code></td>
<td>Obtener lista de productos</td>
</tr>
<tr>
<td>Productos</td>
<td>GET</td>
<td><code>/api/products/{id}</code></td>
<td>Obtener un producto específico</td>
</tr>
<tr>
<td>Productos</td>
<td>POST</td>
<td><code>/api/products</code></td>
<td>Crear un nuevo producto</td>
</tr>
<tr>
<td>Productos</td>
<td>PUT</td>
<td><code>/api/products/{id}</code></td>
<td>Actualizar un producto existente</td>
</tr>
<tr>
<td>Productos</td>
<td>DELETE</td>
<td><code>/api/products/{id}</code></td>
<td>Eliminar un producto</td>
</tr>
<tr>
<td>Usuarios</td>
<td>GET</td>
<td><code>/api/users</code></td>
<td>Obtener lista de usuarios</td>
</tr>
<tr>
<td>Usuarios</td>
<td>GET</td>
<td><code>/api/users/{id}</code></td>
<td>Obtener un usuario específico</td>
</tr>
<tr>
<td>Usuarios</td>
<td>POST</td>
<td><code>/api/users</code></td>
<td>Crear un nuevo usuario</td>
</tr>
<tr>
<td>Usuarios</td>
<td>PUT</td>
<td><code>/api/users/{id}</code></td>
<td>Actualizar un usuario existente</td>
</tr>
<tr>
<td>Usuarios</td>
<td>DELETE</td>
<td><code>/api/users/{id}</code></td>
<td>Eliminar un usuario</td>
</tr>
<tr>
<td>Órdenes</td>
<td>GET</td>
<td><code>/api/orders</code></td>
<td>Obtener lista de órdenes</td>
</tr>
<tr>
<td>Órdenes</td>
<td>GET</td>
<td><code>/api/orders/{id}</code></td>
<td>Obtener una orden específica</td>
</tr>
<tr>
<td>Órdenes</td>
<td>POST</td>
<td><code>/api/orders</code></td>
<td>Crear una nueva orden</td>
</tr>
<tr>
<td>Órdenes</td>
<td>PUT</td>
<td><code>/api/orders/{id}</code></td>
<td>Actualizar una orden existente</td>
</tr>
<tr>
<td>Órdenes</td>
<td>DELETE</td>
<td><code>/api/orders/{id}</code></td>
<td>Eliminar una orden</td>
</tr>
</tbody>
</table>
</div><h2>1.3 Códigos de Estado HTTP</h2>
<div class='content'><table>
<thead>
<tr>
<th>Código</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
</tr>
<tr>
<td>204</td>
<td>No Content</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
</tr>
</tbody>
</table>
</div><h1>2. Desarrollo de la API</h1>
<div class='content'></div><h2>2.1 Configuración del Entorno de Desarrollo</h2>
<div class='content'><p>Para este caso de estudio, utilizaremos Node.js con el framework Express.</p>
<h4>Instalación de Node.js y Express</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBJbnN0YWxhciBOb2RlLmpzCnN1ZG8gYXB0LWdldCBpbnN0YWxsIG5vZGVqcwoKIyBJbnN0YWxhciBucG0gKE5vZGUgUGFja2FnZSBNYW5hZ2VyKQpzdWRvIGFwdC1nZXQgaW5zdGFsbCBucG0KCiMgQ3JlYXIgdW4gbnVldm8gcHJveWVjdG8KbWtkaXIgb25saW5lLXN0b3JlLWFwaQpjZCBvbmxpbmUtc3RvcmUtYXBpCm5wbSBpbml0IC15CgojIEluc3RhbGFyIEV4cHJlc3MKbnBtIGluc3RhbGwgZXhwcmVzcw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Instalar Node.js
sudo apt-get install nodejs

# Instalar npm (Node Package Manager)
sudo apt-get install npm

# Crear un nuevo proyecto
mkdir online-store-api
cd online-store-api
npm init -y

# Instalar Express
npm install express</pre></div><div class='content'></div><h2>2.2 Creación de un Servidor Básico</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc2VydmVyLmpzCmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7CmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsKY29uc3QgcG9ydCA9IDMwMDA7CgphcHAudXNlKGV4cHJlc3MuanNvbigpKTsKCmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHsKICByZXMuc2VuZCgnQmllbnZlbmlkbyBhIGxhIEFQSSBkZSBsYSB0aWVuZGEgZW4gbMOtbmVhJyk7Cn0pOwoKYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7CiAgY29uc29sZS5sb2coYFNlcnZpZG9yIGVzY3VjaGFuZG8gZW4gaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9YCk7Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// server.js
const express = require('express');
const app = express();
const port = 3000;

app.use(express.json());

app.get('/', (req, res) =&gt; {
  res.send('Bienvenido a la API de la tienda en l&iacute;nea');
});

app.listen(port, () =&gt; {
  console.log(`Servidor escuchando en http://localhost:${port}`);
});</pre></div><div class='content'></div><h2>2.3 Manejo de Peticiones y Respuestas</h2>
<div class='content'><h4>Ejemplo: Obtener lista de productos</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gcHJvZHVjdHMuanMKY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTsKCmxldCBwcm9kdWN0cyA9IFsKICB7IGlkOiAxLCBuYW1lOiAnUHJvZHVjdG8gMScsIHByaWNlOiAxMDAgfSwKICB7IGlkOiAyLCBuYW1lOiAnUHJvZHVjdG8gMicsIHByaWNlOiAyMDAgfSwKXTsKCnJvdXRlci5nZXQoJy8nLCAocmVxLCByZXMpID0+IHsKICByZXMuc3RhdHVzKDIwMCkuanNvbihwcm9kdWN0cyk7Cn0pOwoKcm91dGVyLmdldCgnLzppZCcsIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHByb2R1Y3QgPSBwcm9kdWN0cy5maW5kKHAgPT4gcC5pZCA9PT0gcGFyc2VJbnQocmVxLnBhcmFtcy5pZCkpOwogIGlmICghcHJvZHVjdCkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKCdQcm9kdWN0byBubyBlbmNvbnRyYWRvJyk7CiAgcmVzLnN0YXR1cygyMDApLmpzb24ocHJvZHVjdCk7Cn0pOwoKcm91dGVyLnBvc3QoJy8nLCAocmVxLCByZXMpID0+IHsKICBjb25zdCBwcm9kdWN0ID0gewogICAgaWQ6IHByb2R1Y3RzLmxlbmd0aCArIDEsCiAgICBuYW1lOiByZXEuYm9keS5uYW1lLAogICAgcHJpY2U6IHJlcS5ib2R5LnByaWNlLAogIH07CiAgcHJvZHVjdHMucHVzaChwcm9kdWN0KTsKICByZXMuc3RhdHVzKDIwMSkuanNvbihwcm9kdWN0KTsKfSk7Cgpyb3V0ZXIucHV0KCcvOmlkJywgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgcHJvZHVjdCA9IHByb2R1Y3RzLmZpbmQocCA9PiBwLmlkID09PSBwYXJzZUludChyZXEucGFyYW1zLmlkKSk7CiAgaWYgKCFwcm9kdWN0KSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoJ1Byb2R1Y3RvIG5vIGVuY29udHJhZG8nKTsKCiAgcHJvZHVjdC5uYW1lID0gcmVxLmJvZHkubmFtZTsKICBwcm9kdWN0LnByaWNlID0gcmVxLmJvZHkucHJpY2U7CiAgcmVzLnN0YXR1cygyMDApLmpzb24ocHJvZHVjdCk7Cn0pOwoKcm91dGVyLmRlbGV0ZSgnLzppZCcsIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHByb2R1Y3RJbmRleCA9IHByb2R1Y3RzLmZpbmRJbmRleChwID0+IHAuaWQgPT09IHBhcnNlSW50KHJlcS5wYXJhbXMuaWQpKTsKICBpZiAocHJvZHVjdEluZGV4ID09PSAtMSkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKCdQcm9kdWN0byBubyBlbmNvbnRyYWRvJyk7CgogIHByb2R1Y3RzLnNwbGljZShwcm9kdWN0SW5kZXgsIDEpOwogIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7Cn0pOwoKbW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// products.js
const express = require('express');
const router = express.Router();

let products = [
  { id: 1, name: 'Producto 1', price: 100 },
  { id: 2, name: 'Producto 2', price: 200 },
];

router.get('/', (req, res) =&gt; {
  res.status(200).json(products);
});

router.get('/:id', (req, res) =&gt; {
  const product = products.find(p =&gt; p.id === parseInt(req.params.id));
  if (!product) return res.status(404).send('Producto no encontrado');
  res.status(200).json(product);
});

router.post('/', (req, res) =&gt; {
  const product = {
    id: products.length + 1,
    name: req.body.name,
    price: req.body.price,
  };
  products.push(product);
  res.status(201).json(product);
});

router.put('/:id', (req, res) =&gt; {
  const product = products.find(p =&gt; p.id === parseInt(req.params.id));
  if (!product) return res.status(404).send('Producto no encontrado');

  product.name = req.body.name;
  product.price = req.body.price;
  res.status(200).json(product);
});

router.delete('/:id', (req, res) =&gt; {
  const productIndex = products.findIndex(p =&gt; p.id === parseInt(req.params.id));
  if (productIndex === -1) return res.status(404).send('Producto no encontrado');

  products.splice(productIndex, 1);
  res.status(204).send();
});

module.exports = router;</pre></div><div class='content'><h4>Integración del Router en el Servidor Principal</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc2VydmVyLmpzCmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7CmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsKY29uc3QgcG9ydCA9IDMwMDA7CgphcHAudXNlKGV4cHJlc3MuanNvbigpKTsKCmNvbnN0IHByb2R1Y3RzUm91dGVyID0gcmVxdWlyZSgnLi9wcm9kdWN0cycpOwphcHAudXNlKCcvYXBpL3Byb2R1Y3RzJywgcHJvZHVjdHNSb3V0ZXIpOwoKYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7CiAgY29uc29sZS5sb2coYFNlcnZpZG9yIGVzY3VjaGFuZG8gZW4gaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9YCk7Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// server.js
const express = require('express');
const app = express();
const port = 3000;

app.use(express.json());

const productsRouter = require('./products');
app.use('/api/products', productsRouter);

app.listen(port, () =&gt; {
  console.log(`Servidor escuchando en http://localhost:${port}`);
});</pre></div><div class='content'></div><h1>3. Asegurar la API</h1>
<div class='content'></div><h2>3.1 Autenticación y Autorización</h2>
<div class='content'><p>Para la autenticación, utilizaremos JSON Web Tokens (JWT).</p>
<h4>Instalación de JWT</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwganNvbndlYnRva2Vu"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install jsonwebtoken</pre></div><div class='content'><h4>Implementación de Autenticación</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gYXV0aC5qcwpjb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTsKY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTsKCmNvbnN0IHVzZXJzID0gWwogIHsgaWQ6IDEsIHVzZXJuYW1lOiAndXNlcjEnLCBwYXNzd29yZDogJ3Bhc3N3b3JkMScgfSwKICB7IGlkOiAyLCB1c2VybmFtZTogJ3VzZXIyJywgcGFzc3dvcmQ6ICdwYXNzd29yZDInIH0sCl07Cgpyb3V0ZXIucG9zdCgnL2xvZ2luJywgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgdXNlciA9IHVzZXJzLmZpbmQodSA9PiB1LnVzZXJuYW1lID09PSByZXEuYm9keS51c2VybmFtZSAmJiB1LnBhc3N3b3JkID09PSByZXEuYm9keS5wYXNzd29yZCk7CiAgaWYgKCF1c2VyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoJ0NyZWRlbmNpYWxlcyBpbnbDoWxpZGFzJyk7CgogIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBpZDogdXNlci5pZCB9LCAnc2VjcmV0S2V5JywgeyBleHBpcmVzSW46ICcxaCcgfSk7CiAgcmVzLnN0YXR1cygyMDApLmpzb24oeyB0b2tlbiB9KTsKfSk7Cgptb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// auth.js
const jwt = require('jsonwebtoken');
const express = require('express');
const router = express.Router();

const users = [
  { id: 1, username: 'user1', password: 'password1' },
  { id: 2, username: 'user2', password: 'password2' },
];

router.post('/login', (req, res) =&gt; {
  const user = users.find(u =&gt; u.username === req.body.username &amp;&amp; u.password === req.body.password);
  if (!user) return res.status(401).send('Credenciales inv&aacute;lidas');

  const token = jwt.sign({ id: user.id }, 'secretKey', { expiresIn: '1h' });
  res.status(200).json({ token });
});

module.exports = router;</pre></div><div class='content'><h4>Middleware de Autorización</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gYXV0aE1pZGRsZXdhcmUuanMKY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CgpmdW5jdGlvbiBhdXRoTWlkZGxld2FyZShyZXEsIHJlcywgbmV4dCkgewogIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcignQXV0aG9yaXphdGlvbicpOwogIGlmICghdG9rZW4pIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCgnQWNjZXNvIGRlbmVnYWRvLiBObyBzZSBwcm9wb3JjaW9uw7MgdW4gdG9rZW4uJyk7CgogIHRyeSB7CiAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgJ3NlY3JldEtleScpOwogICAgcmVxLnVzZXIgPSBkZWNvZGVkOwogICAgbmV4dCgpOwogIH0gY2F0Y2ggKGV4KSB7CiAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCgnVG9rZW4gaW52w6FsaWRvLicpOwogIH0KfQoKbW9kdWxlLmV4cG9ydHMgPSBhdXRoTWlkZGxld2FyZTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// authMiddleware.js
const jwt = require('jsonwebtoken');

function authMiddleware(req, res, next) {
  const token = req.header('Authorization');
  if (!token) return res.status(401).send('Acceso denegado. No se proporcion&oacute; un token.');

  try {
    const decoded = jwt.verify(token, 'secretKey');
    req.user = decoded;
    next();
  } catch (ex) {
    res.status(400).send('Token inv&aacute;lido.');
  }
}

module.exports = authMiddleware;</pre></div><div class='content'><h4>Protección de Rutas</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc2VydmVyLmpzCmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7CmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsKY29uc3QgcG9ydCA9IDMwMDA7CgphcHAudXNlKGV4cHJlc3MuanNvbigpKTsKCmNvbnN0IHByb2R1Y3RzUm91dGVyID0gcmVxdWlyZSgnLi9wcm9kdWN0cycpOwpjb25zdCBhdXRoUm91dGVyID0gcmVxdWlyZSgnLi9hdXRoJyk7CmNvbnN0IGF1dGhNaWRkbGV3YXJlID0gcmVxdWlyZSgnLi9hdXRoTWlkZGxld2FyZScpOwoKYXBwLnVzZSgnL2FwaS9hdXRoJywgYXV0aFJvdXRlcik7CmFwcC51c2UoJy9hcGkvcHJvZHVjdHMnLCBhdXRoTWlkZGxld2FyZSwgcHJvZHVjdHNSb3V0ZXIpOwoKYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7CiAgY29uc29sZS5sb2coYFNlcnZpZG9yIGVzY3VjaGFuZG8gZW4gaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9YCk7Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// server.js
const express = require('express');
const app = express();
const port = 3000;

app.use(express.json());

const productsRouter = require('./products');
const authRouter = require('./auth');
const authMiddleware = require('./authMiddleware');

app.use('/api/auth', authRouter);
app.use('/api/products', authMiddleware, productsRouter);

app.listen(port, () =&gt; {
  console.log(`Servidor escuchando en http://localhost:${port}`);
});</pre></div><div class='content'></div><h1>4. Documentar y Probar la API</h1>
<div class='content'></div><h2>4.1 Documentación con Swagger</h2>
<div class='content'><h4>Instalación de Swagger</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgc3dhZ2dlci11aS1leHByZXNzIHN3YWdnZXItanNkb2M="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install swagger-ui-express swagger-jsdoc</pre></div><div class='content'><h4>Configuración de Swagger</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3dhZ2dlci5qcwpjb25zdCBzd2FnZ2VyVWkgPSByZXF1aXJlKCdzd2FnZ2VyLXVpLWV4cHJlc3MnKTsKY29uc3Qgc3dhZ2dlckpzZG9jID0gcmVxdWlyZSgnc3dhZ2dlci1qc2RvYycpOwoKY29uc3Qgb3B0aW9ucyA9IHsKICBkZWZpbml0aW9uOiB7CiAgICBvcGVuYXBpOiAnMy4wLjAnLAogICAgaW5mbzogewogICAgICB0aXRsZTogJ0FQSSBkZSBUaWVuZGEgZW4gTMOtbmVhJywKICAgICAgdmVyc2lvbjogJzEuMC4wJywKICAgIH0sCiAgfSwKICBhcGlzOiBbJy4vcHJvZHVjdHMuanMnXSwgLy8gQXJjaGl2b3MgcXVlIGNvbnRpZW5lbiBhbm90YWNpb25lcyBTd2FnZ2VyCn07Cgpjb25zdCBzcGVjcyA9IHN3YWdnZXJKc2RvYyhvcHRpb25zKTsKCm1vZHVsZS5leHBvcnRzID0gKGFwcCkgPT4gewogIGFwcC51c2UoJy9hcGktZG9jcycsIHN3YWdnZXJVaS5zZXJ2ZSwgc3dhZ2dlclVpLnNldHVwKHNwZWNzKSk7Cn07"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// swagger.js
const swaggerUi = require('swagger-ui-express');
const swaggerJsdoc = require('swagger-jsdoc');

const options = {
  definition: {
    openapi: '3.0.0',
    info: {
      title: 'API de Tienda en L&iacute;nea',
      version: '1.0.0',
    },
  },
  apis: ['./products.js'], // Archivos que contienen anotaciones Swagger
};

const specs = swaggerJsdoc(options);

module.exports = (app) =&gt; {
  app.use('/api-docs', swaggerUi.serve, swaggerUi.setup(specs));
};</pre></div><div class='content'><h4>Integración de Swagger en el Servidor</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc2VydmVyLmpzCmNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7CmNvbnN0IGFwcCA9IGV4cHJlc3MoKTsKY29uc3QgcG9ydCA9IDMwMDA7CgphcHAudXNlKGV4cHJlc3MuanNvbigpKTsKCmNvbnN0IHByb2R1Y3RzUm91dGVyID0gcmVxdWlyZSgnLi9wcm9kdWN0cycpOwpjb25zdCBhdXRoUm91dGVyID0gcmVxdWlyZSgnLi9hdXRoJyk7CmNvbnN0IGF1dGhNaWRkbGV3YXJlID0gcmVxdWlyZSgnLi9hdXRoTWlkZGxld2FyZScpOwpjb25zdCBzd2FnZ2VyU2V0dXAgPSByZXF1aXJlKCcuL3N3YWdnZXInKTsKCmFwcC51c2UoJy9hcGkvYXV0aCcsIGF1dGhSb3V0ZXIpOwphcHAudXNlKCcvYXBpL3Byb2R1Y3RzJywgYXV0aE1pZGRsZXdhcmUsIHByb2R1Y3RzUm91dGVyKTsKCnN3YWdnZXJTZXR1cChhcHApOwoKYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7CiAgY29uc29sZS5sb2coYFNlcnZpZG9yIGVzY3VjaGFuZG8gZW4gaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9YCk7Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// server.js
const express = require('express');
const app = express();
const port = 3000;

app.use(express.json());

const productsRouter = require('./products');
const authRouter = require('./auth');
const authMiddleware = require('./authMiddleware');
const swaggerSetup = require('./swagger');

app.use('/api/auth', authRouter);
app.use('/api/products', authMiddleware, productsRouter);

swaggerSetup(app);

app.listen(port, () =&gt; {
  console.log(`Servidor escuchando en http://localhost:${port}`);
});</pre></div><div class='content'></div><h2>4.2 Pruebas con Postman</h2>
<div class='content'><ol>
<li><strong>Crear una colección en Postman</strong>: Agrupa todas las peticiones relacionadas con la API de la tienda en línea.</li>
<li><strong>Añadir peticiones</strong>: Añade peticiones para cada endpoint de la API.</li>
<li><strong>Configurar autenticación</strong>: Añade el token JWT en el encabezado de las peticiones que requieren autenticación.</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>En este caso de estudio, hemos diseñado y desarrollado una API RESTful para una tienda en línea, cubriendo desde la definición de recursos y URIs hasta la implementación de autenticación y documentación. Este ejercicio práctico te ha permitido aplicar los principios y técnicas aprendidos en los módulos anteriores, proporcionando una comprensión integral del desarrollo de APIs RESTful.</p>
</div><h2>Próximos Pasos</h2>
<div class='content'><ul>
<li><strong>Optimización y escalabilidad</strong>: Considera cómo optimizar y escalar la API para manejar un mayor volumen de tráfico.</li>
<li><strong>Monitoreo y mantenimiento</strong>: Implementa herramientas de monitoreo y establece un plan de mantenimiento para asegurar la disponibilidad y rendimiento de la API.</li>
</ul>
<p>¡Felicidades por completar este caso de estudio! Ahora estás listo para abordar el siguiente caso de estudio o comenzar tu propio proyecto de API RESTful.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-integracion-continua-despliegue' title="Integración continua y despliegue">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-caso-estudio-api-red-social' title="Caso de estudio: API de una red social">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
