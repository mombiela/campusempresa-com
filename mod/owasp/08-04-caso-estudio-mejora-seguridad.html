<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caso de Estudio 2: Mejora de la Seguridad en una Aplicación Web</title>

    <link rel="alternate" href="https://campusempresa.com/mod/owasp/08-04-caso-estudio-mejora-seguridad" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/owasp/08-04-cas-estudi-millora-seguretat" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/owasp/08-04-case-study-improving-security" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/owasp/08-04-case-study-improving-security" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/owasp/08-04-cas-estudi-millora-seguretat" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='08-03-caso-estudio-analisis-incidente' title="Caso de Estudio 1: Análisis de un Incidente de Seguridad">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Caso de Estudio 2: Mejora de la Seguridad en una Aplicación Web</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-01-evaluacion-final' title="Evaluación Final">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En este caso de estudio, analizaremos un escenario realista en el que una aplicación web presenta varias vulnerabilidades de seguridad. A través de este análisis, aprenderemos cómo identificar, priorizar y mitigar estas vulnerabilidades utilizando las directrices y herramientas de OWASP.</p>
</div><h1><p>Escenario</p>
</h1>
<div class='content'><p>Una empresa de comercio electrónico, &quot;E-Shop&quot;, ha lanzado recientemente una nueva plataforma web. Sin embargo, después de una auditoría de seguridad, se han identificado varias vulnerabilidades críticas que podrían comprometer la seguridad de los datos de los clientes y la integridad del sistema.</p>
</div><h2><p>Vulnerabilidades Identificadas</p>
</h2>
<div class='content'><ol>
<li><strong>Inyección SQL</strong></li>
<li><strong>Cross-Site Scripting (XSS)</strong></li>
<li><strong>Pérdida de Autenticación y Gestión de Sesiones</strong></li>
<li><strong>Exposición de Datos Sensibles</strong></li>
<li><strong>Configuración Incorrecta de Seguridad</strong></li>
</ol>
</div><h1><p>Paso 1: Identificación y Priorización de Vulnerabilidades</p>
</h1>
<div class='content'></div><h2><ol>
<li>Inyección SQL</li>
</ol>
</h2>
<div class='content'><p><strong>Descripción:</strong> La aplicación permite la entrada de datos no sanitizados en las consultas SQL, lo que permite a los atacantes ejecutar comandos SQL arbitrarios.</p>
<p><strong>Ejemplo de Código Vulnerable:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JHVzZXJJZCA9ICRfR0VUWyd1c2VyX2lkJ107CiRxdWVyeSA9ICJTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGlkID0gJyR1c2VySWQnIjsKJHJlc3VsdCA9IG15c3FsaV9xdWVyeSgkY29ubiwgJHF1ZXJ5KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$userId = $_GET['user_id'];
$query = &quot;SELECT * FROM users WHERE id = '$userId'&quot;;
$result = mysqli_query($conn, $query);</pre></div><div class='content'><p><strong>Riesgo:</strong> Alto. Puede permitir el acceso no autorizado a la base de datos.</p>
</div><h2><ol start="2">
<li>Cross-Site Scripting (XSS)</li>
</ol>
</h2>
<div class='content'><p><strong>Descripción:</strong> La aplicación no valida ni escapa adecuadamente las entradas del usuario, permitiendo la inyección de scripts maliciosos.</p>
<p><strong>Ejemplo de Código Vulnerable:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGlucHV0IHR5cGU9InRleHQiIG5hbWU9InVzZXJuYW1lIiB2YWx1ZT0iPD9waHAgZWNobyAkX0dFVFsndXNlcm5hbWUnXTsgPz4iPg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;&lt;?php echo $_GET['username']; ?&gt;&quot;&gt;</pre></div><div class='content'><p><strong>Riesgo:</strong> Alto. Puede permitir el robo de cookies, redirección a sitios maliciosos, etc.</p>
</div><h2><ol start="3">
<li>Pérdida de Autenticación y Gestión de Sesiones</li>
</ol>
</h2>
<div class='content'><p><strong>Descripción:</strong> Las sesiones de usuario no están protegidas adecuadamente, lo que permite el secuestro de sesiones.</p>
<p><strong>Ejemplo de Código Vulnerable:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2Vzc2lvbl9zdGFydCgpOwokX1NFU1NJT05bJ3VzZXInXSA9ICR1c2VybmFtZTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>session_start();
$_SESSION['user'] = $username;</pre></div><div class='content'><p><strong>Riesgo:</strong> Alto. Puede permitir a los atacantes hacerse pasar por otros usuarios.</p>
</div><h2><ol start="4">
<li>Exposición de Datos Sensibles</li>
</ol>
</h2>
<div class='content'><p><strong>Descripción:</strong> La aplicación transmite datos sensibles sin cifrado y almacena información sensible sin protección adecuada.</p>
<p><strong>Ejemplo de Código Vulnerable:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZWNobyAiWW91ciBwYXNzd29yZCBpczogIiAuICRwYXNzd29yZDs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>echo &quot;Your password is: &quot; . $password;</pre></div><div class='content'><p><strong>Riesgo:</strong> Alto. Puede permitir el robo de información sensible como contraseñas y datos personales.</p>
</div><h2><ol start="5">
<li>Configuración Incorrecta de Seguridad</li>
</ol>
</h2>
<div class='content'><p><strong>Descripción:</strong> La configuración del servidor y la aplicación no sigue las mejores prácticas de seguridad.</p>
<p><strong>Ejemplo de Configuración Vulnerable:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U2VydmVyVG9rZW5zIEZ1bGwKU2VydmVyU2lnbmF0dXJlIE9u"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ServerTokens Full
ServerSignature On</pre></div><div class='content'><p><strong>Riesgo:</strong> Medio. Puede proporcionar información innecesaria a los atacantes.</p>
</div><h1><p>Paso 2: Mitigación de Vulnerabilidades</p>
</h1>
<div class='content'></div><h2><ol>
<li>Inyección SQL</li>
</ol>
</h2>
<div class='content'><p><strong>Solución: Uso de Sentencias Preparadas</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JHN0bXQgPSAkY29ubi0+cHJlcGFyZSgiU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSBpZCA9ID8iKTsKJHN0bXQtPmJpbmRfcGFyYW0oImkiLCAkdXNlcklkKTsKJHN0bXQtPmV4ZWN1dGUoKTsKJHJlc3VsdCA9ICRzdG10LT5nZXRfcmVzdWx0KCk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$stmt = $conn-&gt;prepare(&quot;SELECT * FROM users WHERE id = ?&quot;);
$stmt-&gt;bind_param(&quot;i&quot;, $userId);
$stmt-&gt;execute();
$result = $stmt-&gt;get_result();</pre></div><div class='content'><p><strong>Explicación:</strong> Las sentencias preparadas aseguran que los datos del usuario se traten como parámetros y no como parte de la consulta SQL.</p>
</div><h2><ol start="2">
<li>Cross-Site Scripting (XSS)</li>
</ol>
</h2>
<div class='content'><p><strong>Solución: Escapar la Salida</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGlucHV0IHR5cGU9InRleHQiIG5hbWU9InVzZXJuYW1lIiB2YWx1ZT0iPD9waHAgZWNobyBodG1sc3BlY2lhbGNoYXJzKCRfR0VUWyd1c2VybmFtZSddLCBFTlRfUVVPVEVTLCAnVVRGLTgnKTsgPz4iPg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;&lt;?php echo htmlspecialchars($_GET['username'], ENT_QUOTES, 'UTF-8'); ?&gt;&quot;&gt;</pre></div><div class='content'><p><strong>Explicación:</strong> <code>htmlspecialchars</code> convierte caracteres especiales en entidades HTML, evitando la ejecución de scripts.</p>
</div><h2><ol start="3">
<li>Pérdida de Autenticación y Gestión de Sesiones</li>
</ol>
</h2>
<div class='content'><p><strong>Solución: Regenerar ID de Sesión y Usar Cookies Seguras</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2Vzc2lvbl9zdGFydCgpOwpzZXNzaW9uX3JlZ2VuZXJhdGVfaWQodHJ1ZSk7CiRfU0VTU0lPTlsndXNlciddID0gJHVzZXJuYW1lOwpzZXRjb29raWUoc2Vzc2lvbl9uYW1lKCksIHNlc3Npb25faWQoKSwgWwogICAgJ3NlY3VyZScgPT4gdHJ1ZSwKICAgICdodHRwb25seScgPT4gdHJ1ZSwKICAgICdzYW1lc2l0ZScgPT4gJ1N0cmljdCcsCl0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>session_start();
session_regenerate_id(true);
$_SESSION['user'] = $username;
setcookie(session_name(), session_id(), [
    'secure' =&gt; true,
    'httponly' =&gt; true,
    'samesite' =&gt; 'Strict',
]);</pre></div><div class='content'><p><strong>Explicación:</strong> Regenerar el ID de sesión y configurar cookies seguras ayuda a prevenir el secuestro de sesiones.</p>
</div><h2><ol start="4">
<li>Exposición de Datos Sensibles</li>
</ol>
</h2>
<div class='content'><p><strong>Solución: Uso de Cifrado y Buenas Prácticas de Almacenamiento</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JHBhc3N3b3JkSGFzaCA9IHBhc3N3b3JkX2hhc2goJHBhc3N3b3JkLCBQQVNTV09SRF9CQ1JZUFQpOwplY2hvICJZb3VyIHBhc3N3b3JkIGhhcyBiZWVuIHNlY3VyZWx5IHN0b3JlZC4iOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$passwordHash = password_hash($password, PASSWORD_BCRYPT);
echo &quot;Your password has been securely stored.&quot;;</pre></div><div class='content'><p><strong>Explicación:</strong> <code>password_hash</code> crea un hash seguro de la contraseña, y nunca se debe mostrar la contraseña en texto claro.</p>
</div><h2><ol start="5">
<li>Configuración Incorrecta de Seguridad</li>
</ol>
</h2>
<div class='content'><p><strong>Solución: Configuración Segura del Servidor</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U2VydmVyVG9rZW5zIFByb2QKU2VydmVyU2lnbmF0dXJlIE9mZg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ServerTokens Prod
ServerSignature Off</pre></div><div class='content'><p><strong>Explicación:</strong> Estas configuraciones reducen la cantidad de información sobre el servidor que se expone a los atacantes.</p>
</div><h1><p>Paso 3: Implementación y Verificación</p>
</h1>
<div class='content'></div><h2><p>Implementación</p>
</h2>
<div class='content'><ol>
<li><strong>Actualizar el Código:</strong> Implementar las soluciones mencionadas en el código de la aplicación.</li>
<li><strong>Revisar Configuraciones:</strong> Asegurarse de que las configuraciones del servidor y la aplicación sigan las mejores prácticas de seguridad.</li>
</ol>
</div><h2><p>Verificación</p>
</h2>
<div class='content'><ol>
<li><strong>Pruebas de Penetración:</strong> Realizar pruebas de penetración para verificar que las vulnerabilidades han sido mitigadas.</li>
<li><strong>Escaneo de Vulnerabilidades:</strong> Utilizar herramientas como OWASP ZAP para escanear la aplicación en busca de nuevas vulnerabilidades.</li>
</ol>
</div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En este caso de estudio, hemos aprendido a identificar y mitigar varias vulnerabilidades críticas en una aplicación web utilizando las directrices y herramientas de OWASP. La implementación de estas soluciones no solo mejora la seguridad de la aplicación, sino que también protege los datos de los usuarios y la integridad del sistema.</p>
</div><h2><p>Resumen</p>
</h2>
<div class='content'><ul>
<li><strong>Identificación de Vulnerabilidades:</strong> Inyección SQL, XSS, Pérdida de Autenticación, Exposición de Datos Sensibles, Configuración Incorrecta.</li>
<li><strong>Mitigación:</strong> Uso de sentencias preparadas, escapar la salida, regenerar ID de sesión, uso de cifrado, configuración segura del servidor.</li>
<li><strong>Implementación y Verificación:</strong> Actualización del código, revisión de configuraciones, pruebas de penetración, escaneo de vulnerabilidades.</li>
</ul>
<p>Este enfoque sistemático asegura que las aplicaciones web sean más seguras y estén mejor protegidas contra ataques comunes.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='08-03-caso-estudio-analisis-incidente' title="Caso de Estudio 1: Análisis de un Incidente de Seguridad">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-01-evaluacion-final' title="Evaluación Final">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
