<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modelos y Bases de Datos</title>

    <link rel="alternate" href="https://campusempresa.com/mod/django/02-04-models-and-databases" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/django/02-04-models-and-databases" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/django/02-04-models-and-databases" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/django/02-04-models-and-databases" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/django/02-04-models-and-databases" class="px-2">CA</a>
<br>
			<cite>Construyendo la sociedad de hoy y del mañana</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Contenido del curso</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competencias técnicas</a>
				<a href="/all/conocimientos">Conocimientos</a>
				<a href="/all/soft_skills">Competencias sociales</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-03-templates-and-static-files' title="Plantillas y Archivos Estáticos">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Modelos y Bases de Datos</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-05-django-admin-interface' title="Interfaz de Administración de Django">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En este tema, aprenderemos sobre los modelos en Django y cómo interactúan con las bases de datos. Los modelos son una parte fundamental de cualquier aplicación Django, ya que representan la estructura de los datos y proporcionan una interfaz para interactuar con la base de datos.</p>
</div><h1><p>Objetivos</p>
</h1>
<div class='content'><ul>
<li>Comprender qué son los modelos en Django.</li>
<li>Aprender a definir modelos y sus campos.</li>
<li>Conocer cómo realizar migraciones para aplicar cambios en la base de datos.</li>
<li>Entender cómo utilizar el ORM (Object-Relational Mapping) de Django para realizar operaciones CRUD (Crear, Leer, Actualizar, Eliminar).</li>
</ul>
</div><h1><p>¿Qué es un Modelo en Django?</p>
</h1>
<div class='content'><p>Un modelo en Django es una clase que representa una tabla en la base de datos. Cada atributo de la clase corresponde a una columna de la tabla. Django proporciona un ORM que permite interactuar con la base de datos utilizando objetos Python en lugar de escribir consultas SQL directamente.</p>
</div><h1><p>Definiendo un Modelo</p>
</h1>
<div class='content'><p>Para definir un modelo, debes crear una clase que herede de <code>django.db.models.Model</code>. Cada atributo de la clase representa un campo en la base de datos.</p>
</div><h2><p>Ejemplo de un Modelo</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1vZGVscwoKY2xhc3MgQXV0aG9yKG1vZGVscy5Nb2RlbCk6CiAgICBmaXJzdF9uYW1lID0gbW9kZWxzLkNoYXJGaWVsZChtYXhfbGVuZ3RoPTMwKQogICAgbGFzdF9uYW1lID0gbW9kZWxzLkNoYXJGaWVsZChtYXhfbGVuZ3RoPTMwKQogICAgYmlydGhfZGF0ZSA9IG1vZGVscy5EYXRlRmllbGQoKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiBmIntzZWxmLmZpcnN0X25hbWV9IHtzZWxmLmxhc3RfbmFtZX0i"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.db import models

class Author(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30)
    birth_date = models.DateField()

    def __str__(self):
        return f&quot;{self.first_name} {self.last_name}&quot;</pre></div><div class='content'></div><h2><p>Explicación del Código</p>
</h2>
<div class='content'><ul>
<li><code>Author</code> es una clase que hereda de <code>models.Model</code>.</li>
<li><code>first_name</code>, <code>last_name</code> y <code>birth_date</code> son atributos de la clase que representan columnas en la tabla de la base de datos.</li>
<li><code>models.CharField</code> y <code>models.DateField</code> son tipos de campo proporcionados por Django.</li>
<li><code>__str__</code> es un método especial que define cómo se representará el objeto como una cadena.</li>
</ul>
</div><h1><p>Tipos de Campos Comunes</p>
</h1>
<div class='content'><table>
<thead>
<tr>
<th>Tipo de Campo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CharField</code></td>
<td>Campo de texto con longitud máxima.</td>
</tr>
<tr>
<td><code>TextField</code></td>
<td>Campo de texto largo.</td>
</tr>
<tr>
<td><code>IntegerField</code></td>
<td>Campo de número entero.</td>
</tr>
<tr>
<td><code>FloatField</code></td>
<td>Campo de número decimal.</td>
</tr>
<tr>
<td><code>BooleanField</code></td>
<td>Campo de valor booleano (True/False).</td>
</tr>
<tr>
<td><code>DateField</code></td>
<td>Campo de fecha.</td>
</tr>
<tr>
<td><code>DateTimeField</code></td>
<td>Campo de fecha y hora.</td>
</tr>
<tr>
<td><code>ForeignKey</code></td>
<td>Campo de clave foránea para relaciones uno a muchos.</td>
</tr>
<tr>
<td><code>ManyToManyField</code></td>
<td>Campo de relación muchos a muchos.</td>
</tr>
</tbody>
</table>
</div><h1><p>Migraciones</p>
</h1>
<div class='content'><p>Las migraciones son una forma de aplicar cambios en la estructura de la base de datos. Cada vez que se crea o modifica un modelo, es necesario crear y aplicar una migración.</p>
</div><h2><p>Creando una Migración</p>
</h2>
<div class='content'><p>Para crear una migración, utiliza el siguiente comando:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0aG9uIG1hbmFnZS5weSBtYWtlbWlncmF0aW9ucw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>python manage.py makemigrations</pre></div><div class='content'></div><h2><p>Aplicando una Migración</p>
</h2>
<div class='content'><p>Para aplicar las migraciones y actualizar la base de datos, utiliza el siguiente comando:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0aG9uIG1hbmFnZS5weSBtaWdyYXRl"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>python manage.py migrate</pre></div><div class='content'></div><h1><p>Operaciones CRUD con el ORM de Django</p>
</h1>
<div class='content'></div><h2><p>Crear</p>
</h2>
<div class='content'><p>Para crear un nuevo registro en la base de datos, utiliza el método <code>create</code> o crea una instancia del modelo y llama al método <code>save</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2FuZG8gZWwgbcOpdG9kbyBjcmVhdGUKYXV0aG9yID0gQXV0aG9yLm9iamVjdHMuY3JlYXRlKGZpcnN0X25hbWU9IkpvaG4iLCBsYXN0X25hbWU9IkRvZSIsIGJpcnRoX2RhdGU9IjE5ODAtMDEtMDEiKQoKIyBVc2FuZG8gZWwgbcOpdG9kbyBzYXZlCmF1dGhvciA9IEF1dGhvcihmaXJzdF9uYW1lPSJKYW5lIiwgbGFzdF9uYW1lPSJEb2UiLCBiaXJ0aF9kYXRlPSIxOTkwLTAyLTAyIikKYXV0aG9yLnNhdmUoKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Usando el m&eacute;todo create
author = Author.objects.create(first_name=&quot;John&quot;, last_name=&quot;Doe&quot;, birth_date=&quot;1980-01-01&quot;)

# Usando el m&eacute;todo save
author = Author(first_name=&quot;Jane&quot;, last_name=&quot;Doe&quot;, birth_date=&quot;1990-02-02&quot;)
author.save()</pre></div><div class='content'></div><h2><p>Leer</p>
</h2>
<div class='content'><p>Para leer registros de la base de datos, utiliza el método <code>all</code> o <code>filter</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBPYnRlbmVyIHRvZG9zIGxvcyBhdXRvcmVzCmF1dGhvcnMgPSBBdXRob3Iub2JqZWN0cy5hbGwoKQoKIyBGaWx0cmFyIGF1dG9yZXMgcG9yIGFwZWxsaWRvCmRvZV9hdXRob3JzID0gQXV0aG9yLm9iamVjdHMuZmlsdGVyKGxhc3RfbmFtZT0iRG9lIik="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Obtener todos los autores
authors = Author.objects.all()

# Filtrar autores por apellido
doe_authors = Author.objects.filter(last_name=&quot;Doe&quot;)</pre></div><div class='content'></div><h2><p>Actualizar</p>
</h2>
<div class='content'><p>Para actualizar un registro, primero obtén la instancia, modifica los atributos y luego llama al método <code>save</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXV0aG9yID0gQXV0aG9yLm9iamVjdHMuZ2V0KGlkPTEpCmF1dGhvci5maXJzdF9uYW1lID0gIkpvbmF0aGFuIgphdXRob3Iuc2F2ZSgp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>author = Author.objects.get(id=1)
author.first_name = &quot;Jonathan&quot;
author.save()</pre></div><div class='content'></div><h2><p>Eliminar</p>
</h2>
<div class='content'><p>Para eliminar un registro, obtén la instancia y llama al método <code>delete</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXV0aG9yID0gQXV0aG9yLm9iamVjdHMuZ2V0KGlkPTEpCmF1dGhvci5kZWxldGUoKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>author = Author.objects.get(id=1)
author.delete()</pre></div><div class='content'></div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Definir un Modelo de Libro</p>
</h2>
<div class='content'><p>Define un modelo <code>Book</code> con los siguientes campos:</p>
<ul>
<li><code>title</code> (CharField, max_length=100)</li>
<li><code>author</code> (ForeignKey a <code>Author</code>)</li>
<li><code>published_date</code> (DateField)</li>
<li><code>isbn</code> (CharField, max_length=13)</li>
</ul>
</div><h2><p>Solución</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1vZGVscwoKY2xhc3MgQm9vayhtb2RlbHMuTW9kZWwpOgogICAgdGl0bGUgPSBtb2RlbHMuQ2hhckZpZWxkKG1heF9sZW5ndGg9MTAwKQogICAgYXV0aG9yID0gbW9kZWxzLkZvcmVpZ25LZXkoQXV0aG9yLCBvbl9kZWxldGU9bW9kZWxzLkNBU0NBREUpCiAgICBwdWJsaXNoZWRfZGF0ZSA9IG1vZGVscy5EYXRlRmllbGQoKQogICAgaXNibiA9IG1vZGVscy5DaGFyRmllbGQobWF4X2xlbmd0aD0xMykKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi50aXRsZQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.db import models

class Book(models.Model):
    title = models.CharField(max_length=100)
    author = models.ForeignKey(Author, on_delete=models.CASCADE)
    published_date = models.DateField()
    isbn = models.CharField(max_length=13)

    def __str__(self):
        return self.title</pre></div><div class='content'></div><h2><p>Ejercicio 2: Crear y Leer Registros</p>
</h2>
<div class='content'><ol>
<li>Crea un nuevo autor y un nuevo libro.</li>
<li>Obtén todos los libros y filtra los libros por un autor específico.</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhciB1biBudWV2byBhdXRvcgphdXRob3IgPSBBdXRob3Iub2JqZWN0cy5jcmVhdGUoZmlyc3RfbmFtZT0iR2VvcmdlIiwgbGFzdF9uYW1lPSJPcndlbGwiLCBiaXJ0aF9kYXRlPSIxOTAzLTA2LTI1IikKCiMgQ3JlYXIgdW4gbnVldm8gbGlicm8KYm9vayA9IEJvb2sub2JqZWN0cy5jcmVhdGUodGl0bGU9IjE5ODQiLCBhdXRob3I9YXV0aG9yLCBwdWJsaXNoZWRfZGF0ZT0iMTk0OS0wNi0wOCIsIGlzYm49IjEyMzQ1Njc4OTAxMjMiKQoKIyBPYnRlbmVyIHRvZG9zIGxvcyBsaWJyb3MKYm9va3MgPSBCb29rLm9iamVjdHMuYWxsKCkKCiMgRmlsdHJhciBsaWJyb3MgcG9yIGF1dG9yCm9yd2VsbF9ib29rcyA9IEJvb2sub2JqZWN0cy5maWx0ZXIoYXV0aG9yPWF1dGhvcik="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Crear un nuevo autor
author = Author.objects.create(first_name=&quot;George&quot;, last_name=&quot;Orwell&quot;, birth_date=&quot;1903-06-25&quot;)

# Crear un nuevo libro
book = Book.objects.create(title=&quot;1984&quot;, author=author, published_date=&quot;1949-06-08&quot;, isbn=&quot;1234567890123&quot;)

# Obtener todos los libros
books = Book.objects.all()

# Filtrar libros por autor
orwell_books = Book.objects.filter(author=author)</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta sección, hemos aprendido sobre los modelos en Django y cómo interactúan con las bases de datos. Hemos cubierto cómo definir modelos, realizar migraciones y utilizar el ORM de Django para realizar operaciones CRUD. Estos conceptos son fundamentales para el desarrollo de aplicaciones web con Django y te preparan para trabajar con datos de manera eficiente y efectiva. En el próximo módulo, exploraremos cómo manejar formularios en Django.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-03-templates-and-static-files' title="Plantillas y Archivos Estáticos">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-05-django-admin-interface' title="Interfaz de Administración de Django">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
