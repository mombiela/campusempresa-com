<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comandos de Gestión Personalizados</title>

    <link rel="alternate" href="https://campusempresa.com/mod/django/custom-management-commands" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/django/custom-management-commands" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/django/custom-management-commands" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/django/custom-management-commands" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/django/custom-management-commands" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-querying-techniques'>&#x25C4;Técnicas Avanzadas de Consulta</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Comandos de Gestión Personalizados</a>
	</div>
	<div class='col-4 text-end'>
					<a href='django-community-and-contributing'>Comunidad de Django y Contribuciones &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>Django proporciona una potente utilidad de línea de comandos llamada <code>manage.py</code> que permite a los desarrolladores realizar varias tareas administrativas. Aunque Django viene con un conjunto de comandos integrados, también puedes crear tus propios comandos de gestión personalizados para automatizar tareas específicas de tu proyecto.</p>
</div><h1>¿Por Qué Usar Comandos de Gestión Personalizados?</h1>
<div class='content'><ul>
<li><strong>Automatización</strong>: Automatiza tareas repetitivas como la importación/exportación de datos, limpieza o procesamiento por lotes.</li>
<li><strong>Comodidad</strong>: Simplifica operaciones complejas en comandos únicos.</li>
<li><strong>Integración</strong>: Integra fácilmente con otras herramientas y scripts.</li>
</ul>
</div><h1>Creando un Comando de Gestión Personalizado</h1>
<div class='content'></div><h2>Guía Paso a Paso</h2>
<div class='content'><ol>
<li>
<p><strong>Crear el Directorio de Comandos</strong>:</p>
<ul>
<li>Navega a tu directorio de la aplicación Django.</li>
<li>Crea un directorio llamado <code>management/commands</code> dentro de tu directorio de la aplicación.</li>
</ul>
<pre><code class="language-bash">mkdir -p myapp/management/commands
</code></pre>
</li>
<li>
<p><strong>Crear el Archivo de Comando</strong>:</p>
<ul>
<li>Dentro del directorio <code>commands</code>, crea un archivo Python para tu comando. El nombre del archivo será el nombre del comando.</li>
</ul>
<pre><code class="language-bash">touch myapp/management/commands/mycommand.py
</code></pre>
</li>
<li>
<p><strong>Escribir el Código del Comando</strong>:</p>
<ul>
<li>Abre el archivo recién creado y define tu comando extendiendo <code>BaseCommand</code>.</li>
</ul>
<pre><code class="language-python">from django.core.management.base import BaseCommand

class Command(BaseCommand):
    help = 'Descripción de tu comando'

    def handle(self, *args, **kwargs):
        self.stdout.write('¡Hola, este es mi comando personalizado!')
</code></pre>
</li>
</ol>
</div><h2>Añadiendo Argumentos a Tu Comando</h2>
<div class='content'><p>Puedes añadir argumentos a tu comando para hacerlo más flexible.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28uY29yZS5tYW5hZ2VtZW50LmJhc2UgaW1wb3J0IEJhc2VDb21tYW5kCgpjbGFzcyBDb21tYW5kKEJhc2VDb21tYW5kKToKICAgIGhlbHAgPSAnRGVzY3JpcGNpw7NuIGRlIHR1IGNvbWFuZG8nCgogICAgZGVmIGFkZF9hcmd1bWVudHMoc2VsZiwgcGFyc2VyKToKICAgICAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCduYW1lJywgdHlwZT1zdHIsIGhlbHA9J05vbWJyZSBkZSBsYSBwZXJzb25hIGEgc2FsdWRhcicpCgogICAgZGVmIGhhbmRsZShzZWxmLCAqYXJncywgKiprd2FyZ3MpOgogICAgICAgIG5hbWUgPSBrd2FyZ3NbJ25hbWUnXQogICAgICAgIHNlbGYuc3Rkb3V0LndyaXRlKGYnwqFIb2xhLCB7bmFtZX0hJyk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.core.management.base import BaseCommand

class Command(BaseCommand):
    help = 'Descripci&oacute;n de tu comando'

    def add_arguments(self, parser):
        parser.add_argument('name', type=str, help='Nombre de la persona a saludar')

    def handle(self, *args, **kwargs):
        name = kwargs['name']
        self.stdout.write(f'&iexcl;Hola, {name}!')</pre></div><div class='content'></div><h2>Ejemplo: Un Comando para Limpiar Datos Antiguos</h2>
<div class='content'><p>Vamos a crear un comando que elimine registros más antiguos que un número especificado de días.</p>
<ol>
<li>
<p><strong>Crear el Archivo de Comando</strong>:</p>
<pre><code class="language-bash">touch myapp/management/commands/cleanup_old_data.py
</code></pre>
</li>
<li>
<p><strong>Escribir el Código del Comando</strong>:</p>
<pre><code class="language-python">from django.core.management.base import BaseCommand
from myapp.models import MyModel
from datetime import datetime, timedelta

class Command(BaseCommand):
    help = 'Eliminar registros más antiguos que un número especificado de días'

    def add_arguments(self, parser):
        parser.add_argument('days', type=int, help='Número de días')

    def handle(self, *args, **kwargs):
        days = kwargs['days']
        cutoff_date = datetime.now() - timedelta(days=days)
        old_records = MyModel.objects.filter(created_at__lt=cutoff_date)
        count = old_records.count()
        old_records.delete()
        self.stdout.write(f'Se eliminaron {count} registros más antiguos que {days} días')
</code></pre>
</li>
</ol>
</div><h2>Ejecutando Tu Comando Personalizado</h2>
<div class='content'><p>Para ejecutar tu comando personalizado, usa el script <code>manage.py</code> seguido del nombre del comando y cualquier argumento.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0aG9uIG1hbmFnZS5weSBteWNvbW1hbmQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>python manage.py mycommand</pre></div><div class='content'><p>Para el ejemplo de limpieza:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0aG9uIG1hbmFnZS5weSBjbGVhbnVwX29sZF9kYXRhIDMw"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>python manage.py cleanup_old_data 30</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Los comandos de gestión personalizados en Django proporcionan una forma poderosa de automatizar y simplificar tareas administrativas. Siguiendo los pasos descritos en este tema, puedes crear tus propios comandos adaptados a las necesidades específicas de tu proyecto. Ya sea para la limpieza de datos, el procesamiento por lotes o la integración con otras herramientas, los comandos personalizados pueden mejorar significativamente tu productividad y agilizar tu flujo de trabajo.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-querying-techniques'>&#x25C4;Técnicas Avanzadas de Consulta</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Comandos de Gestión Personalizados</a>
	</div>
	<div class='col-4 text-end'>
					<a href='django-community-and-contributing'>Comunidad de Django y Contribuciones &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
