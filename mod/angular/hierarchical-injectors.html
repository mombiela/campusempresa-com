<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inyectores Jerárquicos</title>

    <link rel="alternate" href="https://campusempresa.com/mod/angular/hierarchical-injectors" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/angular/hierarchical-injectors" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/angular/hierarchical-injectors" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/angular/hierarchical-injectors" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/angular/hierarchical-injectors" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='dependency-injection'>&#x25C4;Inyección de Dependencias</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Inyectores Jerárquicos</a>
	</div>
	<div class='col-4 text-end'>
					<a href='http-client'>Cliente HTTP &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En Angular, la inyección de dependencias (DI) es un patrón de diseño poderoso que permite a las clases recibir dependencias de una fuente externa en lugar de crearlas. Una de las características avanzadas del sistema DI de Angular es el concepto de inyectores jerárquicos. Este tema te guiará a través de los conceptos básicos y avanzados de los inyectores jerárquicos en Angular.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Injector</strong>: Un inyector es un localizador de servicios que es responsable de instanciar dependencias e inyectarlas en las clases.</li>
<li><strong>Inyectores Jerárquicos</strong>: Los inyectores de Angular son jerárquicos, lo que significa que forman una estructura de árbol. Esto permite que diferentes inyectores proporcionen diferentes instancias de una dependencia.</li>
</ul>
</div><h1>Cómo Funcionan los Inyectores Jerárquicos</h1>
<div class='content'><p>Las aplicaciones de Angular tienen un inyector raíz y una jerarquía de inyectores secundarios. Cada componente tiene su propio inyector, que puede heredar dependencias de su inyector padre o proporcionar sus propias dependencias.</p>
</div><h2>Ejemplo: Inyector Jerárquico Básico</h2>
<div class='content'><p>Considera el siguiente ejemplo donde tenemos un inyector raíz y un inyector secundario:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgSW5qZWN0YWJsZSwgQ29tcG9uZW50LCBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgeyBCcm93c2VyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7CgpASW5qZWN0YWJsZSgpCmNsYXNzIFJvb3RTZXJ2aWNlIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIGNvbnNvbGUubG9nKCdSb290U2VydmljZSBpbnN0YW5jZSBjcmVhdGVkJyk7CiAgfQp9CgpASW5qZWN0YWJsZSgpCmNsYXNzIENoaWxkU2VydmljZSB7CiAgY29uc3RydWN0b3IoKSB7CiAgICBjb25zb2xlLmxvZygnQ2hpbGRTZXJ2aWNlIGluc3RhbmNlIGNyZWF0ZWQnKTsKICB9Cn0KCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnY2hpbGQtY29tcG9uZW50JywKICB0ZW1wbGF0ZTogYDxwPkNoaWxkIENvbXBvbmVudDwvcD5gLAogIHByb3ZpZGVyczogW0NoaWxkU2VydmljZV0KfSkKY2xhc3MgQ2hpbGRDb21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByaXZhdGUgY2hpbGRTZXJ2aWNlOiBDaGlsZFNlcnZpY2UpIHt9Cn0KCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLXJvb3QnLAogIHRlbXBsYXRlOiBgPGNoaWxkLWNvbXBvbmVudD48L2NoaWxkLWNvbXBvbmVudD5gLAogIHByb3ZpZGVyczogW1Jvb3RTZXJ2aWNlXQp9KQpjbGFzcyBBcHBDb21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByaXZhdGUgcm9vdFNlcnZpY2U6IFJvb3RTZXJ2aWNlKSB7fQp9CgpATmdNb2R1bGUoewogIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudCwgQ2hpbGRDb21wb25lbnRdLAogIGltcG9ydHM6IFtCcm93c2VyTW9kdWxlXSwKICBib290c3RyYXA6IFtBcHBDb21wb25lbnRdCn0pCmNsYXNzIEFwcE1vZHVsZSB7fQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Injectable, Component, NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';

@Injectable()
class RootService {
  constructor() {
    console.log('RootService instance created');
  }
}

@Injectable()
class ChildService {
  constructor() {
    console.log('ChildService instance created');
  }
}

@Component({
  selector: 'child-component',
  template: `&lt;p&gt;Child Component&lt;/p&gt;`,
  providers: [ChildService]
})
class ChildComponent {
  constructor(private childService: ChildService) {}
}

@Component({
  selector: 'app-root',
  template: `&lt;child-component&gt;&lt;/child-component&gt;`,
  providers: [RootService]
})
class AppComponent {
  constructor(private rootService: RootService) {}
}

@NgModule({
  declarations: [AppComponent, ChildComponent],
  imports: [BrowserModule],
  bootstrap: [AppComponent]
})
class AppModule {}</pre></div><div class='content'><p>En este ejemplo:</p>
<ul>
<li><code>RootService</code> se proporciona a nivel raíz.</li>
<li><code>ChildService</code> se proporciona a nivel del <code>ChildComponent</code>.</li>
</ul>
<p>Cuando se instancian <code>AppComponent</code> y <code>ChildComponent</code>, se crean e inyectan sus respectivos servicios.</p>
</div><h1>Proveedores e Inyectores Jerárquicos</h1>
<div class='content'></div><h2>Usando Proveedores `@Injectable` y `@Component`</h2>
<div class='content'><p>Angular te permite definir proveedores en diferentes niveles:</p>
<ul>
<li><strong>Nivel Raíz</strong>: Usando <code>@Injectable({ providedIn: 'root' })</code>.</li>
<li><strong>Nivel de Componente</strong>: Usando el array <code>providers</code> en el decorador <code>@Component</code>.</li>
</ul>
</div><h2>Ejemplo: Proveedor a Nivel Raíz</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QEluamVjdGFibGUoewogIHByb3ZpZGVkSW46ICdyb290Jwp9KQpjbGFzcyBHbG9iYWxTZXJ2aWNlIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIGNvbnNvbGUubG9nKCdHbG9iYWxTZXJ2aWNlIGluc3RhbmNlIGNyZWF0ZWQnKTsKICB9Cn0KCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLXJvb3QnLAogIHRlbXBsYXRlOiBgPHA+Um9vdCBDb21wb25lbnQ8L3A+YAp9KQpjbGFzcyBBcHBDb21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByaXZhdGUgZ2xvYmFsU2VydmljZTogR2xvYmFsU2VydmljZSkge30KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Injectable({
  providedIn: 'root'
})
class GlobalService {
  constructor() {
    console.log('GlobalService instance created');
  }
}

@Component({
  selector: 'app-root',
  template: `&lt;p&gt;Root Component&lt;/p&gt;`
})
class AppComponent {
  constructor(private globalService: GlobalService) {}
}</pre></div><div class='content'><p>En este ejemplo, <code>GlobalService</code> se proporciona a nivel raíz, lo que significa que será un singleton y se compartirá en toda la aplicación.</p>
</div><h2>Ejemplo: Proveedor a Nivel de Componente</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QENvbXBvbmVudCh7CiAgc2VsZWN0b3I6ICdjaGlsZC1jb21wb25lbnQnLAogIHRlbXBsYXRlOiBgPHA+Q2hpbGQgQ29tcG9uZW50PC9wPmAsCiAgcHJvdmlkZXJzOiBbQ2hpbGRTZXJ2aWNlXQp9KQpjbGFzcyBDaGlsZENvbXBvbmVudCB7CiAgY29uc3RydWN0b3IocHJpdmF0ZSBjaGlsZFNlcnZpY2U6IENoaWxkU2VydmljZSkge30KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Component({
  selector: 'child-component',
  template: `&lt;p&gt;Child Component&lt;/p&gt;`,
  providers: [ChildService]
})
class ChildComponent {
  constructor(private childService: ChildService) {}
}</pre></div><div class='content'><p>En este ejemplo, <code>ChildService</code> se proporciona a nivel de componente, lo que significa que cada instancia de <code>ChildComponent</code> obtendrá su propia instancia de <code>ChildService</code>.</p>
</div><h1>Comparando Proveedores a Nivel Raíz y a Nivel de Componente</h1>
<div class='content'><p>| Característica           | Proveedor a Nivel Raíz                | Proveedor a Nivel de Componente       |
|--------------------------|---------------------------------------|---------------------------------------|
| Alcance                  | Toda la aplicación                    | Limitado al componente y sus hijos    |
| Creación de Instancia    | Singleton                             | Nueva instancia por instancia de componente |
| Caso de Uso              | Servicios compartidos como logging, config | Servicios específicos del componente  |</p>
</div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio: Crear un Inyector Jerárquico</h2>
<div class='content'><ol>
<li>Crea un nuevo servicio de Angular llamado <code>LoggingService</code> y proporciónalo a nivel raíz.</li>
<li>Crea otro servicio llamado <code>FeatureService</code> y proporciónalo a nivel de un componente específico.</li>
<li>Inyecta estos servicios en sus respectivos componentes y registra mensajes en la consola para observar la creación de instancias.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbG9nZ2luZy5zZXJ2aWNlLnRzCmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKCkBJbmplY3RhYmxlKHsKICBwcm92aWRlZEluOiAncm9vdCcKfSkKZXhwb3J0IGNsYXNzIExvZ2dpbmdTZXJ2aWNlIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIGNvbnNvbGUubG9nKCdMb2dnaW5nU2VydmljZSBpbnN0YW5jZSBjcmVhdGVkJyk7CiAgfQp9CgovLyBmZWF0dXJlLnNlcnZpY2UudHMKaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwoKQEluamVjdGFibGUoKQpleHBvcnQgY2xhc3MgRmVhdHVyZVNlcnZpY2UgewogIGNvbnN0cnVjdG9yKCkgewogICAgY29uc29sZS5sb2coJ0ZlYXR1cmVTZXJ2aWNlIGluc3RhbmNlIGNyZWF0ZWQnKTsKICB9Cn0KCi8vIGZlYXR1cmUuY29tcG9uZW50LnRzCmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgeyBGZWF0dXJlU2VydmljZSB9IGZyb20gJy4vZmVhdHVyZS5zZXJ2aWNlJzsKCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLWZlYXR1cmUnLAogIHRlbXBsYXRlOiBgPHA+RmVhdHVyZSBDb21wb25lbnQ8L3A+YCwKICBwcm92aWRlcnM6IFtGZWF0dXJlU2VydmljZV0KfSkKZXhwb3J0IGNsYXNzIEZlYXR1cmVDb21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByaXZhdGUgZmVhdHVyZVNlcnZpY2U6IEZlYXR1cmVTZXJ2aWNlKSB7fQp9CgovLyBhcHAuY29tcG9uZW50LnRzCmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgeyBMb2dnaW5nU2VydmljZSB9IGZyb20gJy4vbG9nZ2luZy5zZXJ2aWNlJzsKCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLXJvb3QnLAogIHRlbXBsYXRlOiBgPGFwcC1mZWF0dXJlPjwvYXBwLWZlYXR1cmU+YAp9KQpleHBvcnQgY2xhc3MgQXBwQ29tcG9uZW50IHsKICBjb25zdHJ1Y3Rvcihwcml2YXRlIGxvZ2dpbmdTZXJ2aWNlOiBMb2dnaW5nU2VydmljZSkge30KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// logging.service.ts
import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class LoggingService {
  constructor() {
    console.log('LoggingService instance created');
  }
}

// feature.service.ts
import { Injectable } from '@angular/core';

@Injectable()
export class FeatureService {
  constructor() {
    console.log('FeatureService instance created');
  }
}

// feature.component.ts
import { Component } from '@angular/core';
import { FeatureService } from './feature.service';

@Component({
  selector: 'app-feature',
  template: `&lt;p&gt;Feature Component&lt;/p&gt;`,
  providers: [FeatureService]
})
export class FeatureComponent {
  constructor(private featureService: FeatureService) {}
}

// app.component.ts
import { Component } from '@angular/core';
import { LoggingService } from './logging.service';

@Component({
  selector: 'app-root',
  template: `&lt;app-feature&gt;&lt;/app-feature&gt;`
})
export class AppComponent {
  constructor(private loggingService: LoggingService) {}
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Los inyectores jerárquicos en Angular proporcionan una forma flexible y poderosa de gestionar dependencias en tu aplicación. Al entender cómo usar proveedores a nivel raíz y a nivel de componente, puedes controlar el alcance y el ciclo de vida de tus servicios de manera efectiva. Esto permite una mejor organización y modularización de tu código, haciéndolo más fácil de mantener y extender.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='dependency-injection'>&#x25C4;Inyección de Dependencias</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Inyectores Jerárquicos</a>
	</div>
	<div class='col-4 text-end'>
					<a href='http-client'>Cliente HTTP &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
