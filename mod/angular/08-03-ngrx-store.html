<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NgRx Store</title>

    <link rel="alternate" href="https://campusempresa.com/mod/angular/08-03-ngrx-store" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/angular/08-03-ngrx-store" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/angular/08-03-ngrx-store" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/angular/08-03-ngrx-store" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/angular/08-03-ngrx-store" class="px-2">CA</a>
								</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Contenido del curso</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competencias técnicas</a>
				<a href="/all/conocimientos">Conocimientos</a>
				<a href="/all/soft_skills">Competencias sociales</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-02-using-services-state-management' title="Uso de Servicios para la Gestión de Estado">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">NgRx Store</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-04-ngrx-effects' title="NgRx Effects">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>NgRx Store es una biblioteca para la gestión de estado en aplicaciones Angular, basada en el patrón Redux. Proporciona una forma clara y predecible de gestionar el estado de la aplicación, facilitando la escalabilidad y el mantenimiento del código.</p>
</div><h1><p>Objetivos de Aprendizaje</p>
</h1>
<div class='content'><p>Al final de esta sección, deberías ser capaz de:</p>
<ul>
<li>Comprender los conceptos básicos de NgRx Store.</li>
<li>Configurar NgRx Store en una aplicación Angular.</li>
<li>Crear acciones, reducers y efectos.</li>
<li>Seleccionar datos del estado de la aplicación.</li>
</ul>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'></div><h2><ol>
<li>¿Qué es NgRx Store?</li>
</ol>
</h2>
<div class='content'><p>NgRx Store es una implementación de Redux para Angular. Redux es un patrón de gestión de estado que utiliza un único almacén (store) para toda la aplicación, lo que facilita la gestión del estado de manera predecible.</p>
</div><h2><ol start="2">
<li>Beneficios de Usar NgRx Store</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Predecibilidad</strong>: El estado de la aplicación es predecible y fácil de depurar.</li>
<li><strong>Escalabilidad</strong>: Facilita la gestión del estado en aplicaciones grandes.</li>
<li><strong>Desacoplamiento</strong>: Separa la lógica de negocio del componente, mejorando la mantenibilidad.</li>
</ul>
</div><h2><ol start="3">
<li>Componentes Principales de NgRx Store</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Store</strong>: El almacén central que contiene el estado de la aplicación.</li>
<li><strong>Actions</strong>: Eventos que describen algo que ha sucedido en la aplicación.</li>
<li><strong>Reducers</strong>: Funciones puras que determinan cómo cambia el estado en respuesta a una acción.</li>
<li><strong>Selectors</strong>: Funciones que seleccionan partes del estado del almacén.</li>
<li><strong>Effects</strong>: Manejan efectos secundarios como llamadas a APIs.</li>
</ul>
</div><h1><p>Configuración de NgRx Store</p>
</h1>
<div class='content'></div><h2><p>Paso 1: Instalación</p>
</h2>
<div class='content'><p>Primero, instala las dependencias necesarias:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgQG5ncngvc3RvcmUgQG5ncngvZWZmZWN0cyBAbmdyeC9zdG9yZS1kZXZ0b29scw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install @ngrx/store @ngrx/effects @ngrx/store-devtools</pre></div><div class='content'></div><h2><p>Paso 2: Configuración del Store</p>
</h2>
<div class='content'><p>Crea un archivo <code>app.module.ts</code> y configura el Store:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKaW1wb3J0IHsgQnJvd3Nlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInOwppbXBvcnQgeyBTdG9yZU1vZHVsZSB9IGZyb20gJ0BuZ3J4L3N0b3JlJzsKaW1wb3J0IHsgRWZmZWN0c01vZHVsZSB9IGZyb20gJ0BuZ3J4L2VmZmVjdHMnOwppbXBvcnQgeyBTdG9yZURldnRvb2xzTW9kdWxlIH0gZnJvbSAnQG5ncngvc3RvcmUtZGV2dG9vbHMnOwppbXBvcnQgeyBBcHBDb21wb25lbnQgfSBmcm9tICcuL2FwcC5jb21wb25lbnQnOwppbXBvcnQgeyByZWR1Y2VycywgbWV0YVJlZHVjZXJzIH0gZnJvbSAnLi9yZWR1Y2Vycyc7CgpATmdNb2R1bGUoewogIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudF0sCiAgaW1wb3J0czogWwogICAgQnJvd3Nlck1vZHVsZSwKICAgIFN0b3JlTW9kdWxlLmZvclJvb3QocmVkdWNlcnMsIHsgbWV0YVJlZHVjZXJzIH0pLAogICAgRWZmZWN0c01vZHVsZS5mb3JSb290KFtdKSwKICAgIFN0b3JlRGV2dG9vbHNNb2R1bGUuaW5zdHJ1bWVudCh7IG1heEFnZTogMjUsIGxvZ09ubHk6IGVudmlyb25tZW50LnByb2R1Y3Rpb24gfSksCiAgXSwKICBwcm92aWRlcnM6IFtdLAogIGJvb3RzdHJhcDogW0FwcENvbXBvbmVudF0sCn0pCmV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge30="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { StoreModule } from '@ngrx/store';
import { EffectsModule } from '@ngrx/effects';
import { StoreDevtoolsModule } from '@ngrx/store-devtools';
import { AppComponent } from './app.component';
import { reducers, metaReducers } from './reducers';

@NgModule({
  declarations: [AppComponent],
  imports: [
    BrowserModule,
    StoreModule.forRoot(reducers, { metaReducers }),
    EffectsModule.forRoot([]),
    StoreDevtoolsModule.instrument({ maxAge: 25, logOnly: environment.production }),
  ],
  providers: [],
  bootstrap: [AppComponent],
})
export class AppModule {}</pre></div><div class='content'></div><h2><p>Paso 3: Definir el Estado y Reducers</p>
</h2>
<div class='content'><p>Crea un archivo <code>state.ts</code> para definir el estado y los reducers:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQWN0aW9uLCBjcmVhdGVSZWR1Y2VyLCBvbiB9IGZyb20gJ0BuZ3J4L3N0b3JlJzsKaW1wb3J0ICogYXMgZnJvbUFjdGlvbnMgZnJvbSAnLi9hY3Rpb25zJzsKCmV4cG9ydCBpbnRlcmZhY2UgQXBwU3RhdGUgewogIGNvdW50OiBudW1iZXI7Cn0KCmV4cG9ydCBjb25zdCBpbml0aWFsU3RhdGU6IEFwcFN0YXRlID0gewogIGNvdW50OiAwLAp9OwoKY29uc3QgX2NvdW50ZXJSZWR1Y2VyID0gY3JlYXRlUmVkdWNlcigKICBpbml0aWFsU3RhdGUsCiAgb24oZnJvbUFjdGlvbnMuaW5jcmVtZW50LCAoc3RhdGUpID0+ICh7IC4uLnN0YXRlLCBjb3VudDogc3RhdGUuY291bnQgKyAxIH0pKSwKICBvbihmcm9tQWN0aW9ucy5kZWNyZW1lbnQsIChzdGF0ZSkgPT4gKHsgLi4uc3RhdGUsIGNvdW50OiBzdGF0ZS5jb3VudCAtIDEgfSkpLAogIG9uKGZyb21BY3Rpb25zLnJlc2V0LCAoc3RhdGUpID0+ICh7IC4uLnN0YXRlLCBjb3VudDogMCB9KSkKKTsKCmV4cG9ydCBmdW5jdGlvbiBjb3VudGVyUmVkdWNlcihzdGF0ZTogQXBwU3RhdGUgfCB1bmRlZmluZWQsIGFjdGlvbjogQWN0aW9uKSB7CiAgcmV0dXJuIF9jb3VudGVyUmVkdWNlcihzdGF0ZSwgYWN0aW9uKTsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Action, createReducer, on } from '@ngrx/store';
import * as fromActions from './actions';

export interface AppState {
  count: number;
}

export const initialState: AppState = {
  count: 0,
};

const _counterReducer = createReducer(
  initialState,
  on(fromActions.increment, (state) =&gt; ({ ...state, count: state.count + 1 })),
  on(fromActions.decrement, (state) =&gt; ({ ...state, count: state.count - 1 })),
  on(fromActions.reset, (state) =&gt; ({ ...state, count: 0 }))
);

export function counterReducer(state: AppState | undefined, action: Action) {
  return _counterReducer(state, action);
}</pre></div><div class='content'></div><h2><p>Paso 4: Definir Acciones</p>
</h2>
<div class='content'><p>Crea un archivo <code>actions.ts</code> para definir las acciones:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgY3JlYXRlQWN0aW9uIH0gZnJvbSAnQG5ncngvc3RvcmUnOwoKZXhwb3J0IGNvbnN0IGluY3JlbWVudCA9IGNyZWF0ZUFjdGlvbignW0NvdW50ZXIgQ29tcG9uZW50XSBJbmNyZW1lbnQnKTsKZXhwb3J0IGNvbnN0IGRlY3JlbWVudCA9IGNyZWF0ZUFjdGlvbignW0NvdW50ZXIgQ29tcG9uZW50XSBEZWNyZW1lbnQnKTsKZXhwb3J0IGNvbnN0IHJlc2V0ID0gY3JlYXRlQWN0aW9uKCdbQ291bnRlciBDb21wb25lbnRdIFJlc2V0Jyk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { createAction } from '@ngrx/store';

export const increment = createAction('[Counter Component] Increment');
export const decrement = createAction('[Counter Component] Decrement');
export const reset = createAction('[Counter Component] Reset');</pre></div><div class='content'></div><h2><p>Paso 5: Seleccionar Datos del Estado</p>
</h2>
<div class='content'><p>Crea un archivo <code>selectors.ts</code> para definir los selectores:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgY3JlYXRlU2VsZWN0b3IsIGNyZWF0ZUZlYXR1cmVTZWxlY3RvciB9IGZyb20gJ0BuZ3J4L3N0b3JlJzsKaW1wb3J0IHsgQXBwU3RhdGUgfSBmcm9tICcuL3N0YXRlJzsKCmV4cG9ydCBjb25zdCBzZWxlY3RGZWF0dXJlID0gY3JlYXRlRmVhdHVyZVNlbGVjdG9yPEFwcFN0YXRlPignZmVhdHVyZScpOwoKZXhwb3J0IGNvbnN0IHNlbGVjdENvdW50ID0gY3JlYXRlU2VsZWN0b3IoCiAgc2VsZWN0RmVhdHVyZSwKICAoc3RhdGU6IEFwcFN0YXRlKSA9PiBzdGF0ZS5jb3VudAopOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { createSelector, createFeatureSelector } from '@ngrx/store';
import { AppState } from './state';

export const selectFeature = createFeatureSelector&lt;AppState&gt;('feature');

export const selectCount = createSelector(
  selectFeature,
  (state: AppState) =&gt; state.count
);</pre></div><div class='content'></div><h2><p>Paso 6: Usar el Store en Componentes</p>
</h2>
<div class='content'><p>Inyecta el Store en un componente y usa las acciones y selectores:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IFN0b3JlIH0gZnJvbSAnQG5ncngvc3RvcmUnOwppbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7CmltcG9ydCB7IEFwcFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSc7CmltcG9ydCAqIGFzIGZyb21BY3Rpb25zIGZyb20gJy4vYWN0aW9ucyc7CmltcG9ydCAqIGFzIGZyb21TZWxlY3RvcnMgZnJvbSAnLi9zZWxlY3RvcnMnOwoKQENvbXBvbmVudCh7CiAgc2VsZWN0b3I6ICdhcHAtY291bnRlcicsCiAgdGVtcGxhdGU6IGAKICAgIDxkaXY+CiAgICAgIDxidXR0b24gKGNsaWNrKT0iaW5jcmVtZW50KCkiPkluY3JlbWVudDwvYnV0dG9uPgogICAgICA8YnV0dG9uIChjbGljayk9ImRlY3JlbWVudCgpIj5EZWNyZW1lbnQ8L2J1dHRvbj4KICAgICAgPGJ1dHRvbiAoY2xpY2spPSJyZXNldCgpIj5SZXNldDwvYnV0dG9uPgogICAgICA8ZGl2PkN1cnJlbnQgQ291bnQ6IHt7IGNvdW50JCB8IGFzeW5jIH19PC9kaXY+CiAgICA8L2Rpdj4KICBgLAp9KQpleHBvcnQgY2xhc3MgQ291bnRlckNvbXBvbmVudCB7CiAgY291bnQkOiBPYnNlcnZhYmxlPG51bWJlcj47CgogIGNvbnN0cnVjdG9yKHByaXZhdGUgc3RvcmU6IFN0b3JlPEFwcFN0YXRlPikgewogICAgdGhpcy5jb3VudCQgPSB0aGlzLnN0b3JlLnNlbGVjdChmcm9tU2VsZWN0b3JzLnNlbGVjdENvdW50KTsKICB9CgogIGluY3JlbWVudCgpIHsKICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goZnJvbUFjdGlvbnMuaW5jcmVtZW50KCkpOwogIH0KCiAgZGVjcmVtZW50KCkgewogICAgdGhpcy5zdG9yZS5kaXNwYXRjaChmcm9tQWN0aW9ucy5kZWNyZW1lbnQoKSk7CiAgfQoKICByZXNldCgpIHsKICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goZnJvbUFjdGlvbnMucmVzZXQoKSk7CiAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component } from '@angular/core';
import { Store } from '@ngrx/store';
import { Observable } from 'rxjs';
import { AppState } from './state';
import * as fromActions from './actions';
import * as fromSelectors from './selectors';

@Component({
  selector: 'app-counter',
  template: `
    &lt;div&gt;
      &lt;button (click)=&quot;increment()&quot;&gt;Increment&lt;/button&gt;
      &lt;button (click)=&quot;decrement()&quot;&gt;Decrement&lt;/button&gt;
      &lt;button (click)=&quot;reset()&quot;&gt;Reset&lt;/button&gt;
      &lt;div&gt;Current Count: {{ count$ | async }}&lt;/div&gt;
    &lt;/div&gt;
  `,
})
export class CounterComponent {
  count$: Observable&lt;number&gt;;

  constructor(private store: Store&lt;AppState&gt;) {
    this.count$ = this.store.select(fromSelectors.selectCount);
  }

  increment() {
    this.store.dispatch(fromActions.increment());
  }

  decrement() {
    this.store.dispatch(fromActions.decrement());
  }

  reset() {
    this.store.dispatch(fromActions.reset());
  }
}</pre></div><div class='content'></div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Contador con NgRx Store</p>
</h2>
<div class='content'><ol>
<li><strong>Objetivo</strong>: Crear una aplicación de contador utilizando NgRx Store.</li>
<li><strong>Pasos</strong>:
<ul>
<li>Configura NgRx Store en tu aplicación.</li>
<li>Define el estado inicial y los reducers.</li>
<li>Crea acciones para incrementar, decrementar y resetear el contador.</li>
<li>Define selectores para obtener el valor del contador.</li>
<li>Usa el Store en un componente para despachar acciones y seleccionar el estado.</li>
</ul>
</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'><p>Sigue los pasos descritos anteriormente para configurar NgRx Store y crear la aplicación de contador.</p>
</div><h1><p>Resumen</p>
</h1>
<div class='content'><p>En esta sección, hemos aprendido los conceptos básicos de NgRx Store y cómo configurarlo en una aplicación Angular. Hemos cubierto cómo definir el estado, acciones, reducers y selectores, y cómo usar el Store en componentes. NgRx Store es una herramienta poderosa para la gestión de estado en aplicaciones Angular, proporcionando una forma clara y predecible de manejar el estado de la aplicación.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-02-using-services-state-management' title="Uso de Servicios para la Gestión de Estado">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-04-ngrx-effects' title="NgRx Effects">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
