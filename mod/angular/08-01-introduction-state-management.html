<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducción a la Gestión de Estado</title>

    <link rel="alternate" href="https://campusempresa.com/mod/angular/08-01-introduction-state-management" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/angular/08-01-introduction-state-management" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/angular/08-01-introduction-state-management" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/angular/08-01-introduction-state-management" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/angular/08-01-introduction-state-management" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-05-error-handling' title="Manejo de Errores">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Introducción a la Gestión de Estado</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-using-services-state-management' title="Uso de Servicios para la Gestión de Estado">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La gestión de estado es un concepto crucial en el desarrollo de aplicaciones modernas, especialmente en aplicaciones de una sola página (SPA) como las que se crean con Angular. En este tema, exploraremos qué es la gestión de estado, por qué es importante y cómo se puede implementar en Angular.</p>
</div><h1>¿Qué es la Gestión de Estado?</h1>
<div class='content'><p>La gestión de estado se refiere al manejo de los datos que una aplicación necesita para funcionar correctamente. Estos datos pueden incluir:</p>
<ul>
<li><strong>Datos de usuario</strong>: Información sobre el usuario actual, como su nombre, preferencias, etc.</li>
<li><strong>Datos de la aplicación</strong>: Información que la aplicación necesita para funcionar, como configuraciones, estados de carga, etc.</li>
<li><strong>Datos de la interfaz de usuario</strong>: Estados de la interfaz, como si un modal está abierto o cerrado, qué pestaña está activa, etc.</li>
</ul>
</div><h1>Importancia de la Gestión de Estado</h1>
<div class='content'><p>Una gestión de estado adecuada es crucial por varias razones:</p>
<ol>
<li><strong>Consistencia</strong>: Asegura que todos los componentes de la aplicación tengan acceso a los mismos datos y que estos datos sean consistentes en toda la aplicación.</li>
<li><strong>Mantenibilidad</strong>: Facilita el mantenimiento del código al centralizar la lógica de manejo de datos.</li>
<li><strong>Escalabilidad</strong>: Permite que la aplicación crezca en complejidad sin que el manejo de datos se vuelva inmanejable.</li>
<li><strong>Depuración</strong>: Facilita la depuración y el seguimiento de errores al tener un único lugar donde se maneja el estado de la aplicación.</li>
</ol>
</div><h1>Métodos de Gestión de Estado en Angular</h1>
<div class='content'><p>En Angular, hay varias formas de gestionar el estado de la aplicación. A continuación, se describen algunas de las más comunes:</p>
</div><h2>1. Servicios</h2>
<div class='content'><p>Los servicios en Angular son una forma común de gestionar el estado. Los servicios permiten compartir datos y lógica entre diferentes componentes de la aplicación.</p>
<h4>Ejemplo de Servicio para Gestión de Estado</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwoKQEluamVjdGFibGUoewogIHByb3ZpZGVkSW46ICdyb290Jwp9KQpleHBvcnQgY2xhc3MgU3RhdGVTZXJ2aWNlIHsKICBwcml2YXRlIF9zdGF0ZTogYW55ID0ge307CgogIGdldFN0YXRlKGtleTogc3RyaW5nKTogYW55IHsKICAgIHJldHVybiB0aGlzLl9zdGF0ZVtrZXldOwogIH0KCiAgc2V0U3RhdGUoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnkpOiB2b2lkIHsKICAgIHRoaXMuX3N0YXRlW2tleV0gPSB2YWx1ZTsKICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class StateService {
  private _state: any = {};

  getState(key: string): any {
    return this._state[key];
  }

  setState(key: string, value: any): void {
    this._state[key] = value;
  }
}</pre></div><div class='content'><p>En este ejemplo, <code>StateService</code> es un servicio simple que almacena el estado en un objeto privado <code>_state</code>. Los métodos <code>getState</code> y <code>setState</code> permiten obtener y establecer el estado respectivamente.</p>
</div><h2>2. NgRx</h2>
<div class='content'><p>NgRx es una biblioteca para la gestión de estado en Angular basada en el patrón Redux. Proporciona una forma más estructurada y escalable de manejar el estado de la aplicación.</p>
<h4>Conceptos Clave de NgRx</h4>
<ul>
<li><strong>Store</strong>: El almacén centralizado donde se guarda el estado de la aplicación.</li>
<li><strong>Actions</strong>: Eventos que describen algo que ha ocurrido en la aplicación.</li>
<li><strong>Reducers</strong>: Funciones puras que determinan cómo cambia el estado en respuesta a una acción.</li>
<li><strong>Selectors</strong>: Funciones que seleccionan partes del estado desde el store.</li>
</ul>
<h4>Ejemplo Básico de NgRx</h4>
<ol>
<li><strong>Definir Acciones</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgY3JlYXRlQWN0aW9uLCBwcm9wcyB9IGZyb20gJ0BuZ3J4L3N0b3JlJzsKCmV4cG9ydCBjb25zdCBzZXRVc2VyID0gY3JlYXRlQWN0aW9uKAogICdbVXNlcl0gU2V0IFVzZXInLAogIHByb3BzPHsgdXNlcjogYW55IH0+KCkKKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { createAction, props } from '@ngrx/store';

export const setUser = createAction(
  '[User] Set User',
  props&lt;{ user: any }&gt;()
);</pre></div><div class='content'><ol start="2">
<li><strong>Crear Reducer</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgY3JlYXRlUmVkdWNlciwgb24gfSBmcm9tICdAbmdyeC9zdG9yZSc7CmltcG9ydCB7IHNldFVzZXIgfSBmcm9tICcuL3VzZXIuYWN0aW9ucyc7CgpleHBvcnQgY29uc3QgaW5pdGlhbFN0YXRlID0ge307Cgpjb25zdCBfdXNlclJlZHVjZXIgPSBjcmVhdGVSZWR1Y2VyKAogIGluaXRpYWxTdGF0ZSwKICBvbihzZXRVc2VyLCAoc3RhdGUsIHsgdXNlciB9KSA9PiAoeyAuLi5zdGF0ZSwgdXNlciB9KSkKKTsKCmV4cG9ydCBmdW5jdGlvbiB1c2VyUmVkdWNlcihzdGF0ZTogYW55LCBhY3Rpb246IGFueSkgewogIHJldHVybiBfdXNlclJlZHVjZXIoc3RhdGUsIGFjdGlvbik7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { createReducer, on } from '@ngrx/store';
import { setUser } from './user.actions';

export const initialState = {};

const _userReducer = createReducer(
  initialState,
  on(setUser, (state, { user }) =&gt; ({ ...state, user }))
);

export function userReducer(state: any, action: any) {
  return _userReducer(state, action);
}</pre></div><div class='content'><ol start="3">
<li><strong>Configurar el Store</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKaW1wb3J0IHsgU3RvcmVNb2R1bGUgfSBmcm9tICdAbmdyeC9zdG9yZSc7CmltcG9ydCB7IHVzZXJSZWR1Y2VyIH0gZnJvbSAnLi91c2VyLnJlZHVjZXInOwoKQE5nTW9kdWxlKHsKICBpbXBvcnRzOiBbCiAgICBTdG9yZU1vZHVsZS5mb3JSb290KHsgdXNlcjogdXNlclJlZHVjZXIgfSkKICBdCn0pCmV4cG9ydCBjbGFzcyBBcHBNb2R1bGUgeyB9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { NgModule } from '@angular/core';
import { StoreModule } from '@ngrx/store';
import { userReducer } from './user.reducer';

@NgModule({
  imports: [
    StoreModule.forRoot({ user: userReducer })
  ]
})
export class AppModule { }</pre></div><div class='content'><ol start="4">
<li><strong>Usar el Store en Componentes</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IFN0b3JlIH0gZnJvbSAnQG5ncngvc3RvcmUnOwppbXBvcnQgeyBzZXRVc2VyIH0gZnJvbSAnLi91c2VyLmFjdGlvbnMnOwoKQENvbXBvbmVudCh7CiAgc2VsZWN0b3I6ICdhcHAtcm9vdCcsCiAgdGVtcGxhdGU6IGA8YnV0dG9uIChjbGljayk9InVwZGF0ZVVzZXIoKSI+VXBkYXRlIFVzZXI8L2J1dHRvbj5gCn0pCmV4cG9ydCBjbGFzcyBBcHBDb21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByaXZhdGUgc3RvcmU6IFN0b3JlKSB7fQoKICB1cGRhdGVVc2VyKCkgewogICAgdGhpcy5zdG9yZS5kaXNwYXRjaChzZXRVc2VyKHsgdXNlcjogeyBuYW1lOiAnSm9obiBEb2UnIH0gfSkpOwogIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component } from '@angular/core';
import { Store } from '@ngrx/store';
import { setUser } from './user.actions';

@Component({
  selector: 'app-root',
  template: `&lt;button (click)=&quot;updateUser()&quot;&gt;Update User&lt;/button&gt;`
})
export class AppComponent {
  constructor(private store: Store) {}

  updateUser() {
    this.store.dispatch(setUser({ user: { name: 'John Doe' } }));
  }
}</pre></div><div class='content'></div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio 1: Crear un Servicio de Gestión de Estado</h2>
<div class='content'><ol>
<li><strong>Objetivo</strong>: Crear un servicio que gestione el estado de un contador.</li>
<li><strong>Instrucciones</strong>:
<ul>
<li>Crear un servicio <code>CounterService</code> con métodos para incrementar, decrementar y obtener el valor del contador.</li>
<li>Crear un componente <code>CounterComponent</code> que use el <code>CounterService</code> para mostrar y modificar el valor del contador.</li>
</ul>
</li>
</ol>
<h4>Solución</h4>
<ol>
<li><strong>Crear el Servicio</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwoKQEluamVjdGFibGUoewogIHByb3ZpZGVkSW46ICdyb290Jwp9KQpleHBvcnQgY2xhc3MgQ291bnRlclNlcnZpY2UgewogIHByaXZhdGUgY291bnRlciA9IDA7CgogIGluY3JlbWVudCgpIHsKICAgIHRoaXMuY291bnRlcisrOwogIH0KCiAgZGVjcmVtZW50KCkgewogICAgdGhpcy5jb3VudGVyLS07CiAgfQoKICBnZXRDb3VudGVyKCkgewogICAgcmV0dXJuIHRoaXMuY291bnRlcjsKICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class CounterService {
  private counter = 0;

  increment() {
    this.counter++;
  }

  decrement() {
    this.counter--;
  }

  getCounter() {
    return this.counter;
  }
}</pre></div><div class='content'><ol start="2">
<li><strong>Crear el Componente</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IENvdW50ZXJTZXJ2aWNlIH0gZnJvbSAnLi9jb3VudGVyLnNlcnZpY2UnOwoKQENvbXBvbmVudCh7CiAgc2VsZWN0b3I6ICdhcHAtY291bnRlcicsCiAgdGVtcGxhdGU6IGAKICAgIDxkaXY+CiAgICAgIDxwPkNvdW50ZXI6IHt7IGNvdW50ZXIgfX08L3A+CiAgICAgIDxidXR0b24gKGNsaWNrKT0iaW5jcmVtZW50KCkiPkluY3JlbWVudDwvYnV0dG9uPgogICAgICA8YnV0dG9uIChjbGljayk9ImRlY3JlbWVudCgpIj5EZWNyZW1lbnQ8L2J1dHRvbj4KICAgIDwvZGl2PgogIGAKfSkKZXhwb3J0IGNsYXNzIENvdW50ZXJDb21wb25lbnQgewogIGNvdW50ZXI6IG51bWJlcjsKCiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb3VudGVyU2VydmljZTogQ291bnRlclNlcnZpY2UpIHsKICAgIHRoaXMuY291bnRlciA9IHRoaXMuY291bnRlclNlcnZpY2UuZ2V0Q291bnRlcigpOwogIH0KCiAgaW5jcmVtZW50KCkgewogICAgdGhpcy5jb3VudGVyU2VydmljZS5pbmNyZW1lbnQoKTsKICAgIHRoaXMuY291bnRlciA9IHRoaXMuY291bnRlclNlcnZpY2UuZ2V0Q291bnRlcigpOwogIH0KCiAgZGVjcmVtZW50KCkgewogICAgdGhpcy5jb3VudGVyU2VydmljZS5kZWNyZW1lbnQoKTsKICAgIHRoaXMuY291bnRlciA9IHRoaXMuY291bnRlclNlcnZpY2UuZ2V0Q291bnRlcigpOwogIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component } from '@angular/core';
import { CounterService } from './counter.service';

@Component({
  selector: 'app-counter',
  template: `
    &lt;div&gt;
      &lt;p&gt;Counter: {{ counter }}&lt;/p&gt;
      &lt;button (click)=&quot;increment()&quot;&gt;Increment&lt;/button&gt;
      &lt;button (click)=&quot;decrement()&quot;&gt;Decrement&lt;/button&gt;
    &lt;/div&gt;
  `
})
export class CounterComponent {
  counter: number;

  constructor(private counterService: CounterService) {
    this.counter = this.counterService.getCounter();
  }

  increment() {
    this.counterService.increment();
    this.counter = this.counterService.getCounter();
  }

  decrement() {
    this.counterService.decrement();
    this.counter = this.counterService.getCounter();
  }
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>En esta lección, hemos introducido el concepto de gestión de estado y su importancia en aplicaciones Angular. Hemos explorado dos métodos comunes para gestionar el estado: servicios y NgRx. Además, hemos proporcionado un ejercicio práctico para reforzar los conceptos aprendidos. En el próximo tema, profundizaremos en el uso de servicios para la gestión de estado en Angular.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-05-error-handling' title="Manejo de Errores">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-using-services-state-management' title="Uso de Servicios para la Gestión de Estado">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
