<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pruebas de Componentes</title>

    <link rel="alternate" href="https://campusempresa.com/mod/angular/09-02-component-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/angular/09-02-component-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/angular/09-02-component-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/angular/09-02-component-testing" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/angular/09-02-component-testing" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-01-unit-testing' title="Pruebas Unitarias">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Pruebas de Componentes</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-03-service-testing' title="Pruebas de Servicios">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Las pruebas de componentes en Angular son esenciales para asegurar que cada componente de tu aplicación funcione correctamente de manera aislada. En este tema, aprenderás cómo configurar y escribir pruebas unitarias para componentes utilizando herramientas como Jasmine y Karma.</p>
</div><h1>Objetivos de Aprendizaje</h1>
<div class='content'><ul>
<li>Comprender la importancia de las pruebas de componentes.</li>
<li>Configurar el entorno de pruebas en Angular.</li>
<li>Escribir y ejecutar pruebas unitarias para componentes.</li>
<li>Utilizar <code>TestBed</code> para configurar y probar componentes.</li>
<li>Simular dependencias y eventos en las pruebas.</li>
</ul>
</div><h1>1. Importancia de las Pruebas de Componentes</h1>
<div class='content'><p>Las pruebas de componentes ayudan a:</p>
<ul>
<li>Verificar que los componentes se comporten como se espera.</li>
<li>Detectar errores en el código antes de que lleguen a producción.</li>
<li>Facilitar el mantenimiento y la refactorización del código.</li>
<li>Asegurar que los cambios en el código no rompan funcionalidades existentes.</li>
</ul>
</div><h1>2. Configuración del Entorno de Pruebas</h1>
<div class='content'><p>Angular CLI viene preconfigurado con Jasmine y Karma para realizar pruebas unitarias. Para comenzar, asegúrate de que tu proyecto Angular esté configurado correctamente.</p>
</div><h2>Instalación de Dependencias</h2>
<div class='content'><p>Si no tienes Jasmine y Karma instalados, puedes instalarlos con los siguientes comandos:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgLS1zYXZlLWRldiBqYXNtaW5lLWNvcmUga2FybWEga2FybWEtY2hyb21lLWxhdW5jaGVyIGthcm1hLWphc21pbmUga2FybWEtamFzbWluZS1odG1sLXJlcG9ydGVy"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install --save-dev jasmine-core karma karma-chrome-launcher karma-jasmine karma-jasmine-html-reporter</pre></div><div class='content'></div><h2>Configuración de Karma</h2>
<div class='content'><p>El archivo <code>karma.conf.js</code> contiene la configuración de Karma. Asegúrate de que esté configurado correctamente para tu proyecto.</p>
</div><h1>3. Escribiendo Pruebas Unitarias para Componentes</h1>
<h2>Estructura Básica de una Prueba de Componente</h2>
<div class='content'><p>Cada componente tiene un archivo de prueba asociado con la extensión <code>.spec.ts</code>. Aquí hay un ejemplo básico de una prueba de componente:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50Rml4dHVyZSwgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IE15Q29tcG9uZW50IH0gZnJvbSAnLi9teS1jb21wb25lbnQuY29tcG9uZW50JzsKCmRlc2NyaWJlKCdNeUNvbXBvbmVudCcsICgpID0+IHsKICBsZXQgY29tcG9uZW50OiBNeUNvbXBvbmVudDsKICBsZXQgZml4dHVyZTogQ29tcG9uZW50Rml4dHVyZTxNeUNvbXBvbmVudD47CgogIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4gewogICAgYXdhaXQgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgZGVjbGFyYXRpb25zOiBbIE15Q29tcG9uZW50IF0KICAgIH0pCiAgICAuY29tcGlsZUNvbXBvbmVudHMoKTsKICB9KTsKCiAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICBmaXh0dXJlID0gVGVzdEJlZC5jcmVhdGVDb21wb25lbnQoTXlDb21wb25lbnQpOwogICAgY29tcG9uZW50ID0gZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZTsKICAgIGZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpOwogIH0pOwoKICBpdCgnc2hvdWxkIGNyZWF0ZScsICgpID0+IHsKICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVUcnV0aHkoKTsKICB9KTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ComponentFixture, TestBed } from '@angular/core/testing';
import { MyComponent } from './my-component.component';

describe('MyComponent', () =&gt; {
  let component: MyComponent;
  let fixture: ComponentFixture&lt;MyComponent&gt;;

  beforeEach(async () =&gt; {
    await TestBed.configureTestingModule({
      declarations: [ MyComponent ]
    })
    .compileComponents();
  });

  beforeEach(() =&gt; {
    fixture = TestBed.createComponent(MyComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () =&gt; {
    expect(component).toBeTruthy();
  });
});</pre></div><div class='content'></div><h2>Explicación del Código</h2>
<div class='content'><ul>
<li><strong>Importaciones</strong>: Importamos <code>ComponentFixture</code>, <code>TestBed</code> y el componente que vamos a probar.</li>
<li><strong>describe</strong>: Define un grupo de pruebas.</li>
<li><strong>beforeEach (async)</strong>: Configura el entorno de pruebas. <code>TestBed.configureTestingModule</code> se utiliza para declarar el componente y sus dependencias.</li>
<li><strong>beforeEach</strong>: Crea una instancia del componente y lo inicializa.</li>
<li><strong>it</strong>: Define una prueba individual. En este caso, estamos verificando que el componente se crea correctamente.</li>
</ul>
</div><h1>4. Utilizando `TestBed` para Configurar y Probar Componentes</h1>
<div class='content'><p><code>TestBed</code> es una utilidad de Angular que permite configurar y crear un entorno de pruebas para componentes y servicios.</p>
</div><h2>Configuración de `TestBed`</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YmVmb3JlRWFjaChhc3luYyAoKSA9PiB7CiAgYXdhaXQgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgIGRlY2xhcmF0aW9uczogWyBNeUNvbXBvbmVudCBdLAogICAgaW1wb3J0czogWyBGb3Jtc01vZHVsZSBdLCAvLyBJbXBvcnRhIG3Ds2R1bG9zIG5lY2VzYXJpb3MKICAgIHByb3ZpZGVyczogWyBNeVNlcnZpY2UgXSAvLyBQcm92ZWUgc2VydmljaW9zIG5lY2VzYXJpb3MKICB9KQogIC5jb21waWxlQ29tcG9uZW50cygpOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>beforeEach(async () =&gt; {
  await TestBed.configureTestingModule({
    declarations: [ MyComponent ],
    imports: [ FormsModule ], // Importa m&oacute;dulos necesarios
    providers: [ MyService ] // Provee servicios necesarios
  })
  .compileComponents();
});</pre></div><div class='content'></div><h2>Creación de la Instancia del Componente</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YmVmb3JlRWFjaCgoKSA9PiB7CiAgZml4dHVyZSA9IFRlc3RCZWQuY3JlYXRlQ29tcG9uZW50KE15Q29tcG9uZW50KTsKICBjb21wb25lbnQgPSBmaXh0dXJlLmNvbXBvbmVudEluc3RhbmNlOwogIGZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>beforeEach(() =&gt; {
  fixture = TestBed.createComponent(MyComponent);
  component = fixture.componentInstance;
  fixture.detectChanges();
});</pre></div><div class='content'></div><h1>5. Simulación de Dependencias y Eventos</h1>
<h2>Simulación de Servicios</h2>
<div class='content'><p>Puedes simular servicios utilizando <code>spyOn</code> de Jasmine:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbXlTZXJ2aWNlID0gamFzbWluZS5jcmVhdGVTcHlPYmooJ015U2VydmljZScsIFsnZ2V0RGF0YSddKTsKbXlTZXJ2aWNlLmdldERhdGEuYW5kLnJldHVyblZhbHVlKG9mKG1vY2tEYXRhKSk7CgpiZWZvcmVFYWNoKGFzeW5jICgpID0+IHsKICBhd2FpdCBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoewogICAgZGVjbGFyYXRpb25zOiBbIE15Q29tcG9uZW50IF0sCiAgICBwcm92aWRlcnM6IFsKICAgICAgeyBwcm92aWRlOiBNeVNlcnZpY2UsIHVzZVZhbHVlOiBteVNlcnZpY2UgfQogICAgXQogIH0pCiAgLmNvbXBpbGVDb21wb25lbnRzKCk7Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const myService = jasmine.createSpyObj('MyService', ['getData']);
myService.getData.and.returnValue(of(mockData));

beforeEach(async () =&gt; {
  await TestBed.configureTestingModule({
    declarations: [ MyComponent ],
    providers: [
      { provide: MyService, useValue: myService }
    ]
  })
  .compileComponents();
});</pre></div><div class='content'></div><h2>Simulación de Eventos</h2>
<div class='content'><p>Puedes simular eventos utilizando <code>dispatchEvent</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aXQoJ3Nob3VsZCBjYWxsIG9uQ2xpY2sgbWV0aG9kJywgKCkgPT4gewogIHNweU9uKGNvbXBvbmVudCwgJ29uQ2xpY2snKTsKICBsZXQgYnV0dG9uID0gZml4dHVyZS5kZWJ1Z0VsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKTsKICBidXR0b24uY2xpY2soKTsKICBleHBlY3QoY29tcG9uZW50Lm9uQ2xpY2spLnRvSGF2ZUJlZW5DYWxsZWQoKTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>it('should call onClick method', () =&gt; {
  spyOn(component, 'onClick');
  let button = fixture.debugElement.nativeElement.querySelector('button');
  button.click();
  expect(component.onClick).toHaveBeenCalled();
});</pre></div><div class='content'></div><h1>Ejercicio Práctico</h1>
<h2>Ejercicio</h2>
<div class='content'><p>Crea una prueba para un componente que tenga un botón que incremente un contador al hacer clic.</p>
<ol>
<li>Crea un componente <code>CounterComponent</code> con un botón y un contador.</li>
<li>Escribe una prueba que verifique que el contador se incrementa al hacer clic en el botón.</li>
</ol>
</div><h2>Solución</h2>
<div class='content'><h4>counter.component.ts</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CgpAQ29tcG9uZW50KHsKICBzZWxlY3RvcjogJ2FwcC1jb3VudGVyJywKICB0ZW1wbGF0ZTogYAogICAgPGJ1dHRvbiAoY2xpY2spPSJpbmNyZW1lbnQoKSI+SW5jcmVtZW50PC9idXR0b24+CiAgICA8cD57eyBjb3VudCB9fTwvcD4KICBgCn0pCmV4cG9ydCBjbGFzcyBDb3VudGVyQ29tcG9uZW50IHsKICBjb3VudCA9IDA7CgogIGluY3JlbWVudCgpIHsKICAgIHRoaXMuY291bnQrKzsKICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component } from '@angular/core';

@Component({
  selector: 'app-counter',
  template: `
    &lt;button (click)=&quot;increment()&quot;&gt;Increment&lt;/button&gt;
    &lt;p&gt;{{ count }}&lt;/p&gt;
  `
})
export class CounterComponent {
  count = 0;

  increment() {
    this.count++;
  }
}</pre></div><div class='content'><h4>counter.component.spec.ts</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50Rml4dHVyZSwgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IENvdW50ZXJDb21wb25lbnQgfSBmcm9tICcuL2NvdW50ZXIuY29tcG9uZW50JzsKCmRlc2NyaWJlKCdDb3VudGVyQ29tcG9uZW50JywgKCkgPT4gewogIGxldCBjb21wb25lbnQ6IENvdW50ZXJDb21wb25lbnQ7CiAgbGV0IGZpeHR1cmU6IENvbXBvbmVudEZpeHR1cmU8Q291bnRlckNvbXBvbmVudD47CgogIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4gewogICAgYXdhaXQgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgZGVjbGFyYXRpb25zOiBbIENvdW50ZXJDb21wb25lbnQgXQogICAgfSkKICAgIC5jb21waWxlQ29tcG9uZW50cygpOwogIH0pOwoKICBiZWZvcmVFYWNoKCgpID0+IHsKICAgIGZpeHR1cmUgPSBUZXN0QmVkLmNyZWF0ZUNvbXBvbmVudChDb3VudGVyQ29tcG9uZW50KTsKICAgIGNvbXBvbmVudCA9IGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2U7CiAgICBmaXh0dXJlLmRldGVjdENoYW5nZXMoKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCBjcmVhdGUnLCAoKSA9PiB7CiAgICBleHBlY3QoY29tcG9uZW50KS50b0JlVHJ1dGh5KCk7CiAgfSk7CgogIGl0KCdzaG91bGQgaW5jcmVtZW50IGNvdW50IG9uIGJ1dHRvbiBjbGljaycsICgpID0+IHsKICAgIGNvbnN0IGJ1dHRvbiA9IGZpeHR1cmUuZGVidWdFbGVtZW50Lm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uJyk7CiAgICBidXR0b24uY2xpY2soKTsKICAgIGZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpOwogICAgZXhwZWN0KGNvbXBvbmVudC5jb3VudCkudG9CZSgxKTsKICB9KTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ComponentFixture, TestBed } from '@angular/core/testing';
import { CounterComponent } from './counter.component';

describe('CounterComponent', () =&gt; {
  let component: CounterComponent;
  let fixture: ComponentFixture&lt;CounterComponent&gt;;

  beforeEach(async () =&gt; {
    await TestBed.configureTestingModule({
      declarations: [ CounterComponent ]
    })
    .compileComponents();
  });

  beforeEach(() =&gt; {
    fixture = TestBed.createComponent(CounterComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () =&gt; {
    expect(component).toBeTruthy();
  });

  it('should increment count on button click', () =&gt; {
    const button = fixture.debugElement.nativeElement.querySelector('button');
    button.click();
    fixture.detectChanges();
    expect(component.count).toBe(1);
  });
});</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, aprendiste cómo configurar y escribir pruebas unitarias para componentes en Angular. Las pruebas de componentes son cruciales para asegurar que cada parte de tu aplicación funcione correctamente de manera aislada. Practica escribiendo pruebas para diferentes componentes y escenarios para fortalecer tus habilidades en pruebas de Angular. En el próximo módulo, exploraremos las pruebas de servicios en Angular.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-01-unit-testing' title="Pruebas Unitarias">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-03-service-testing' title="Pruebas de Servicios">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
