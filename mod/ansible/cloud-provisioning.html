<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aprovisionamiento en la Nube con Ansible</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ansible/cloud-provisioning" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ansible/cloud-provisioning" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ansible/cloud-provisioning" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/ansible/cloud-provisioning" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/ansible/cloud-provisioning" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='network-automation'>&#x25C4;Automatización de Redes</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Aprovisionamiento en la Nube con Ansible</a>
	</div>
	<div class='col-4 text-end'>
					<a href='continuous-integration-and-continuous-deployment'>Integración y Despliegue Continuos (CI/CD) &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción al Aprovisionamiento en la Nube</h1>
<div class='content'><p>El aprovisionamiento en la nube es el proceso de configurar y gestionar recursos en la nube. Ansible, una poderosa herramienta de automatización, simplifica este proceso al permitirte definir tu infraestructura como código. Esta sección te guiará desde los conceptos básicos del aprovisionamiento en la nube con Ansible hasta conceptos más avanzados.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Infraestructura como Código (IaC):</strong> Gestión y aprovisionamiento de infraestructura informática a través de archivos de definición legibles por máquina.</li>
<li><strong>Playbooks:</strong> Archivos YAML que definen las tareas a ejecutar en máquinas remotas.</li>
<li><strong>Módulos:</strong> Scripts reutilizables e independientes que Ansible ejecuta en tu nombre.</li>
<li><strong>Inventario:</strong> Una lista de hosts o nodos que Ansible gestiona.</li>
<li><strong>Proveedores de Nube:</strong> Servicios como AWS, Azure y Google Cloud que ofrecen recursos de computación en la nube.</li>
</ul>
</div><h1>Configuración de Ansible para el Aprovisionamiento en la Nube</h1>
<div class='content'><p>Antes de comenzar a aprovisionar recursos en la nube, necesitas configurar Ansible y configurarlo para interactuar con tu proveedor de nube.</p>
</div><h2>Instalación de Ansible</h2>
<div class='content'><p>Para instalar Ansible, ejecuta el siguiente comando:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhcHQgdXBkYXRlCnN1ZG8gYXB0IGluc3RhbGwgYW5zaWJsZQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo apt update
sudo apt install ansible</pre></div><div class='content'></div><h2>Configuración de Credenciales del Proveedor de Nube</h2>
<div class='content'><p>Necesitas configurar las credenciales de tu proveedor de nube para que Ansible pueda interactuar con tus recursos en la nube. Por ejemplo, para configurar las credenciales de AWS, puedes usar la CLI de AWS:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNvbmZpZ3VyZQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws configure</pre></div><div class='content'><p>Este comando te pedirá que ingreses tu ID de clave de acceso de AWS, clave de acceso secreta, región y formato de salida.</p>
</div><h1>Escribiendo tu Primer Playbook para el Aprovisionamiento en la Nube</h1>
<div class='content'><p>Un playbook es un archivo YAML que describe las tareas a ejecutar. Aquí hay un ejemplo simple de un playbook que aprovisiona una instancia EC2 en AWS.</p>
</div><h2>Ejemplo de Playbook</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogUHJvdmlzaW9uYXIgdW5hIGluc3RhbmNpYSBFQzIKICBob3N0czogbG9jYWxob3N0CiAgZ2F0aGVyX2ZhY3RzOiBubwogIHRhc2tzOgogICAgLSBuYW1lOiBMYW56YXIgaW5zdGFuY2lhIEVDMgogICAgICBlYzI6CiAgICAgICAga2V5X25hbWU6IG15X2tleQogICAgICAgIGluc3RhbmNlX3R5cGU6IHQyLm1pY3JvCiAgICAgICAgaW1hZ2U6IGFtaS0wYzU1YjE1OWNiZmFmZTFmMAogICAgICAgIHdhaXQ6IHllcwogICAgICAgIHJlZ2lvbjogdXMtd2VzdC0yCiAgICAgICAgY291bnQ6IDEKICAgICAgcmVnaXN0ZXI6IGVjMgogICAgLSBuYW1lOiBBw7FhZGlyIG51ZXZhIGluc3RhbmNpYSBhbCBncnVwbyBkZSBob3N0cwogICAgICBhZGRfaG9zdDoKICAgICAgICBob3N0bmFtZTogInt7IGl0ZW0ucHVibGljX2lwIH19IgogICAgICAgIGdyb3VwbmFtZTogbGF1bmNoZWQKICAgICAgd2l0aF9pdGVtczogInt7IGVjMi5pbnN0YW5jZXMgfX0iCiAgICAtIG5hbWU6IEVzcGVyYXIgYSBxdWUgU1NIIGVzdMOpIGRpc3BvbmlibGUKICAgICAgd2FpdF9mb3I6CiAgICAgICAgaG9zdDogInt7IGl0ZW0ucHVibGljX2lwIH19IgogICAgICAgIHBvcnQ6IDIyCiAgICAgICAgZGVsYXk6IDYwCiAgICAgICAgdGltZW91dDogMzIwCiAgICAgICAgc3RhdGU6IHN0YXJ0ZWQKICAgICAgd2l0aF9pdGVtczogInt7IGVjMi5pbnN0YW5jZXMgfX0i"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Provisionar una instancia EC2
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Lanzar instancia EC2
      ec2:
        key_name: my_key
        instance_type: t2.micro
        image: ami-0c55b159cbfafe1f0
        wait: yes
        region: us-west-2
        count: 1
      register: ec2
    - name: A&ntilde;adir nueva instancia al grupo de hosts
      add_host:
        hostname: &quot;{{ item.public_ip }}&quot;
        groupname: launched
      with_items: &quot;{{ ec2.instances }}&quot;
    - name: Esperar a que SSH est&eacute; disponible
      wait_for:
        host: &quot;{{ item.public_ip }}&quot;
        port: 22
        delay: 60
        timeout: 320
        state: started
      with_items: &quot;{{ ec2.instances }}&quot;</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>hosts:</strong> Especifica los hosts de destino. Aquí, se usa <code>localhost</code> porque el aprovisionamiento se realiza desde la máquina local.</li>
<li><strong>gather_facts:</strong> Se establece en <code>no</code> para omitir la recopilación de hechos sobre el localhost.</li>
<li><strong>tasks:</strong> Una lista de tareas a ejecutar.
<ul>
<li><strong>ec2:</strong> Lanza una instancia EC2 con los parámetros especificados.</li>
<li><strong>register:</strong> Almacena la salida del módulo EC2 en una variable llamada <code>ec2</code>.</li>
<li><strong>add_host:</strong> Añade la nueva instancia a un grupo de hosts llamado <code>launched</code>.</li>
<li><strong>wait_for:</strong> Espera a que SSH esté disponible en la nueva instancia.</li>
</ul>
</li>
</ul>
</div><h1>Técnicas Avanzadas de Aprovisionamiento en la Nube</h1>
<div class='content'><p>A medida que te sientas más cómodo con Ansible, puedes explorar técnicas más avanzadas para el aprovisionamiento en la nube.</p>
</div><h2>Inventario Dinámico</h2>
<div class='content'><p>El inventario dinámico permite a Ansible consultar a los proveedores de nube sobre el estado actual de los recursos. Esto es útil para gestionar entornos donde la infraestructura cambia frecuentemente.</p>
<h4>Ejemplo: Inventario Dinámico de AWS</h4>
<p>Para usar inventario dinámico con AWS, necesitas instalar las bibliotecas de Python <code>boto3</code> y <code>botocore</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgYm90bzMgYm90b2NvcmU="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install boto3 botocore</pre></div><div class='content'><p>Luego, configura el plugin <code>aws_ec2</code> en tu <code>ansible.cfg</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("W2RlZmF1bHRzXQppbnZlbnRvcnkgPSAuL2F3c19lYzIueW1s"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>[defaults]
inventory = ./aws_ec2.yml</pre></div><div class='content'><p>Crea un archivo <code>aws_ec2.yml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGx1Z2luOiBhd3NfZWMyCnJlZ2lvbnM6CiAgLSB1cy13ZXN0LTIKZmlsdGVyczoKICBpbnN0YW5jZS1zdGF0ZS1uYW1lOiBydW5uaW5nCmtleWVkX2dyb3VwczoKICAtIGtleTogdGFncy5OYW1lCiAgICBwcmVmaXg6IHRhZw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>plugin: aws_ec2
regions:
  - us-west-2
filters:
  instance-state-name: running
keyed_groups:
  - key: tags.Name
    prefix: tag</pre></div><div class='content'></div><h2>Uso de Roles para Reutilización</h2>
<div class='content'><p>Los roles te permiten organizar playbooks en componentes reutilizables. Un rol típicamente contiene tareas, manejadores, variables, archivos y plantillas.</p>
<h4>Ejemplo de Estructura de Rol</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bWlfcm9sLwrilJzilIDilIAgdGFza3MvCuKUgiAgIOKUlOKUgOKUgCBtYWluLnltbArilJzilIDilIAgaGFuZGxlcnMvCuKUgiAgIOKUlOKUgOKUgCBtYWluLnltbArilJzilIDilIAgdGVtcGxhdGVzLwrilIIgICDilJTilIDilIAgbWlfcGxhbnRpbGxhLmoyCuKUnOKUgOKUgCBmaWxlcy8K4pSCICAg4pSU4pSA4pSAIG1pX2FyY2hpdm8K4pSc4pSA4pSAIHZhcnMvCuKUgiAgIOKUlOKUgOKUgCBtYWluLnltbArilJzilIDilIAgZGVmYXVsdHMvCuKUgiAgIOKUlOKUgOKUgCBtYWluLnltbArilJzilIDilIAgbWV0YS8K4pSCICAg4pSU4pSA4pSAIG1haW4ueW1s"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mi_rol/
├── tasks/
│   └── main.yml
├── handlers/
│   └── main.yml
├── templates/
│   └── mi_plantilla.j2
├── files/
│   └── mi_archivo
├── vars/
│   └── main.yml
├── defaults/
│   └── main.yml
├── meta/
│   └── main.yml</pre></div><div class='content'></div><h2>Ejemplo de Uso de Rol</h2>
<div class='content'><p>En tu playbook, puedes incluir un rol de la siguiente manera:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gaG9zdHM6IGxhdW5jaGVkCiAgcm9sZXM6CiAgICAtIG1pX3JvbA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- hosts: launched
  roles:
    - mi_rol</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>El aprovisionamiento en la nube con Ansible te permite automatizar la configuración y gestión de recursos en la nube de manera eficiente. Desde playbooks básicos hasta técnicas avanzadas como inventario dinámico y roles, Ansible proporciona herramientas poderosas para gestionar tu infraestructura como código. Al dominar estos conceptos, puedes optimizar tus operaciones en la nube y asegurar la consistencia en tus entornos.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='network-automation'>&#x25C4;Automatización de Redes</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Aprovisionamiento en la Nube con Ansible</a>
	</div>
	<div class='col-4 text-end'>
					<a href='continuous-integration-and-continuous-deployment'>Integración y Despliegue Continuos (CI/CD) &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
