<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimización del Rendimiento de Ansible</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ansible/optimizing-ansible-performance" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ansible/optimizing-ansible-performance" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ansible/optimizing-ansible-performance" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body  class="test" >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/ansible/optimizing-ansible-performance" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/ansible/optimizing-ansible-performance" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
									<div class="assert">
						<p><b>Atención!</b> Ha habido un error en la generación del curso y puede contener errores de traducción.Estamos trabajando para solucinarlo por lo que se deben usar los contenidos con cuidado.Se puede consultar el contenido correcto en otro idioma en el siguiente enlace:<br>
						<a href="https://enterprisecampus.net/mod/ansible/optimizing-ansible-performance">https://enterprisecampus.net/mod/ansible/optimizing-ansible-performance</a></p>
					</div>
								<div class='row navigation'>
	<div class='col-4'>
					<a href='error-handling-and-debugging'>&#x25C4;Manejo de Errores y Depuración</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Optimización del Rendimiento de Ansible</a>
	</div>
	<div class='col-4 text-end'>
					<a href='managing-linux-servers'>Gestionando Servidores Linux &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Optimizar el rendimiento de Ansible es crucial para asegurar procesos de automatización eficientes y rápidos. Este tema cubrirá varias técnicas y mejores prácticas para mejorar el rendimiento de tus playbooks y roles de Ansible.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Paralelismo y Forks</strong>: Ejecutar tareas en paralelo para acelerar la ejecución.</li>
<li><strong>Caché de Hechos</strong>: Almacenar hechos recopilados para evitar la recolección repetida.</li>
<li><strong>Diseño Eficiente de Playbooks</strong>: Estructurar los playbooks para minimizar tareas innecesarias.</li>
<li><strong>Delegación de Tareas</strong>: Delegar tareas a otros hosts para distribuir la carga.</li>
<li><strong>Uso Eficiente de Módulos de Ansible</strong>: Elegir los módulos correctos para el trabajo.</li>
<li><strong>Reducir la Sobrecarga de SSH</strong>: Optimizar las conexiones SSH para un mejor rendimiento.</li>
<li><strong>Evitar Handlers Innecesarios</strong>: Minimizar el uso de handlers para reducir la sobrecarga.</li>
<li><strong>Perfilado y Benchmarking</strong>: Medir el rendimiento para identificar cuellos de botella.</li>
</ul>
</div><h1>Paralelismo y Forks</h1>
<div class='content'><p>Ansible puede ejecutar múltiples tareas en paralelo ajustando el número de forks. El número predeterminado de forks es 5, pero esto se puede aumentar para mejorar el rendimiento.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBhbnNpYmxlLmNmZwpbZGVmYXVsdHNdCmZvcmtzID0gMTA="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># ansible.cfg
[defaults]
forks = 10</pre></div><div class='content'><ul>
<li>Aumentar el número de forks puede acelerar significativamente la ejecución de los playbooks, especialmente en entornos grandes.</li>
<li>Ten cuidado con valores muy altos ya que pueden sobrecargar la máquina de control o la red.</li>
</ul>
</div><h1>Caché de Hechos</h1>
<div class='content'><p>El caché de hechos permite a Ansible almacenar hechos recopilados de los hosts, reduciendo la necesidad de recolectarlos repetidamente.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBhbnNpYmxlLmNmZwpbZGVmYXVsdHNdCmdhdGhlcmluZyA9IHNtYXJ0CmZhY3RfY2FjaGluZyA9IGpzb25maWxlCmZhY3RfY2FjaGluZ19jb25uZWN0aW9uID0gL3BhdGgvdG8vZmFjdF9jYWNoZQpmYWN0X2NhY2hpbmdfdGltZW91dCA9IDg2NDAwICAjIENhY2hlYXIgaGVjaG9zIHBvciAyNCBob3Jhcw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># ansible.cfg
[defaults]
gathering = smart
fact_caching = jsonfile
fact_caching_connection = /path/to/fact_cache
fact_caching_timeout = 86400  # Cachear hechos por 24 horas</pre></div><div class='content'><ul>
<li>El caché de hechos puede reducir drásticamente el tiempo dedicado a recopilar hechos, especialmente en entornos grandes.</li>
<li>Elige un backend de caché adecuado (por ejemplo, archivo JSON, Redis, etc.) según tus necesidades.</li>
</ul>
</div><h1>Diseño Eficiente de Playbooks</h1>
<div class='content'><p>Diseñar playbooks eficientes implica minimizar tareas innecesarias y optimizar la ejecución de tareas.</p>
<ul>
<li><strong>Usa declaraciones <code>when</code></strong> para ejecutar tareas condicionalmente solo cuando sea necesario.</li>
<li><strong>Combina tareas</strong> cuando sea posible para reducir el número de conexiones SSH.</li>
<li><strong>Evita usar los módulos <code>command</code> o <code>shell</code></strong> cuando exista un módulo dedicado.</li>
</ul>
<p>Ejemplo de combinación de tareas:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBJbnN0YWxhciB5IGFycmFuY2FyIEFwYWNoZQogIGhvc3RzOiB3ZWJzZXJ2ZXJzCiAgdGFza3M6CiAgICAtIG5hbWU6IEluc3RhbGFyIEFwYWNoZQogICAgICBhcHQ6CiAgICAgICAgbmFtZTogYXBhY2hlMgogICAgICAgIHN0YXRlOiBwcmVzZW50CiAgICAtIG5hbWU6IEFycmFuY2FyIEFwYWNoZQogICAgICBzZXJ2aWNlOgogICAgICAgIG5hbWU6IGFwYWNoZTIKICAgICAgICBzdGF0ZTogc3RhcnRlZA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Instalar y arrancar Apache
  hosts: webservers
  tasks:
    - name: Instalar Apache
      apt:
        name: apache2
        state: present
    - name: Arrancar Apache
      service:
        name: apache2
        state: started</pre></div><div class='content'></div><h1>Delegación de Tareas</h1>
<div class='content'><p>Delegar tareas a otros hosts puede ayudar a distribuir la carga y mejorar el rendimiento.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBEZWxlZ2FyIHRhcmVhIGEgb3RybyBob3N0CiAgaG9zdHM6IHdlYnNlcnZlcnMKICB0YXNrczoKICAgIC0gbmFtZTogRWplY3V0YXIgdGFyZWEgZW4gdW4gaG9zdCBkaWZlcmVudGUKICAgICAgY29tbWFuZDogL3Vzci9iaW4vc29tZV9jb21tYW5kCiAgICAgIGRlbGVnYXRlX3RvOiBvdGhlcl9ob3N0"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Delegar tarea a otro host
  hosts: webservers
  tasks:
    - name: Ejecutar tarea en un host diferente
      command: /usr/bin/some_command
      delegate_to: other_host</pre></div><div class='content'><ul>
<li>La delegación de tareas es útil para tareas que pueden ser descargadas a otros hosts, como actualizaciones de bases de datos o transferencias de archivos.</li>
</ul>
</div><h1>Uso Eficiente de Módulos de Ansible</h1>
<div class='content'><p>Elegir los módulos correctos para tus tareas puede mejorar el rendimiento.</p>
<ul>
<li>Prefiere usar módulos integrados en lugar de los módulos <code>command</code> o <code>shell</code>.</li>
<li>Usa módulos que soporten operaciones en lote para reducir el número de tareas.</li>
</ul>
<p>Ejemplo de uso de una operación en lote:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBDcmVhciBtw7psdGlwbGVzIHVzdWFyaW9zCiAgaG9zdHM6IGFsbAogIHRhc2tzOgogICAgLSBuYW1lOiBBw7FhZGlyIHVzdWFyaW9zCiAgICAgIHVzZXI6CiAgICAgICAgbmFtZTogInt7IGl0ZW0ubmFtZSB9fSIKICAgICAgICBzdGF0ZTogcHJlc2VudAogICAgICB3aXRoX2l0ZW1zOgogICAgICAgIC0geyBuYW1lOiAndXNlcjEnIH0KICAgICAgICAtIHsgbmFtZTogJ3VzZXIyJyB9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Crear m&uacute;ltiples usuarios
  hosts: all
  tasks:
    - name: A&ntilde;adir usuarios
      user:
        name: &quot;{{ item.name }}&quot;
        state: present
      with_items:
        - { name: 'user1' }
        - { name: 'user2' }</pre></div><div class='content'></div><h1>Reducir la Sobrecarga de SSH</h1>
<div class='content'><p>Optimizar las conexiones SSH puede reducir la sobrecarga y mejorar el rendimiento.</p>
<ul>
<li>Usa conexiones SSH persistentes con <code>ControlPersist</code>.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBhbnNpYmxlLmNmZwpbc3NoX2Nvbm5lY3Rpb25dCnNzaF9hcmdzID0gLW8gQ29udHJvbE1hc3Rlcj1hdXRvIC1vIENvbnRyb2xQZXJzaXN0PTYwcw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># ansible.cfg
[ssh_connection]
ssh_args = -o ControlMaster=auto -o ControlPersist=60s</pre></div><div class='content'><ul>
<li>Ajusta la configuración de la conexión SSH para reducir la latencia.</li>
</ul>
</div><h1>Evitar Handlers Innecesarios</h1>
<div class='content'><p>Los handlers pueden introducir sobrecarga si se usan en exceso. Minimiza su uso combinando tareas o usando handlers condicionales.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBSZWluaWNpYXIgQXBhY2hlIHNvbG8gc2kgY2FtYmlhIGxhIGNvbmZpZ3VyYWNpw7NuCiAgaG9zdHM6IHdlYnNlcnZlcnMKICB0YXNrczoKICAgIC0gbmFtZTogQWN0dWFsaXphciBjb25maWd1cmFjacOzbiBkZSBBcGFjaGUKICAgICAgdGVtcGxhdGU6CiAgICAgICAgc3JjOiBhcGFjaGUuY29uZi5qMgogICAgICAgIGRlc3Q6IC9ldGMvYXBhY2hlMi9hcGFjaGUyLmNvbmYKICAgICAgbm90aWZ5OiBSZWluaWNpYXIgQXBhY2hlCgogIGhhbmRsZXJzOgogICAgLSBuYW1lOiBSZWluaWNpYXIgQXBhY2hlCiAgICAgIHNlcnZpY2U6CiAgICAgICAgbmFtZTogYXBhY2hlMgogICAgICAgIHN0YXRlOiByZXN0YXJ0ZWQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Reiniciar Apache solo si cambia la configuraci&oacute;n
  hosts: webservers
  tasks:
    - name: Actualizar configuraci&oacute;n de Apache
      template:
        src: apache.conf.j2
        dest: /etc/apache2/apache2.conf
      notify: Reiniciar Apache

  handlers:
    - name: Reiniciar Apache
      service:
        name: apache2
        state: restarted</pre></div><div class='content'></div><h1>Perfilado y Benchmarking</h1>
<div class='content'><p>El perfilado y benchmarking ayudan a identificar cuellos de botella en el rendimiento.</p>
<ul>
<li>Usa el comando <code>ansible-playbook</code> con la opción <code>--profile</code> para recopilar datos de rendimiento.</li>
<li>Analiza la salida para identificar tareas lentas y optimizarlas.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS1wbGF5Ym9vayBwbGF5Ym9vay55bWwgLS1wcm9maWxl"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-playbook playbook.yml --profile</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Optimizar el rendimiento de Ansible implica una combinación de técnicas y mejores prácticas. Ajustando el paralelismo, usando caché de hechos, diseñando playbooks eficientes, delegando tareas, eligiendo los módulos correctos, reduciendo la sobrecarga de SSH, minimizando handlers y perfilando los playbooks, puedes mejorar significativamente el rendimiento de tu automatización con Ansible. Implementa estas estrategias para asegurar que tus playbooks de Ansible se ejecuten de manera eficiente y efectiva.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='error-handling-and-debugging'>&#x25C4;Manejo de Errores y Depuración</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Optimización del Rendimiento de Ansible</a>
	</div>
	<div class='col-4 text-end'>
					<a href='managing-linux-servers'>Gestionando Servidores Linux &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
