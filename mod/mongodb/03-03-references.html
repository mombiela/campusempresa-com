<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Referencias</title>

    <link rel="alternate" href="https://campusempresa.com/mod/mongodb/03-03-references" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/mongodb/03-03-references" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/mongodb/03-03-references" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/mongodb/03-03-references" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/mongodb/03-03-references" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='03-02-embedded-documents' title="Documentos Anidados">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Referencias</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='03-04-data-types' title="Tipos de Datos">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En MongoDB, los documentos pueden estar relacionados entre sí de varias maneras. Una de las formas más comunes de establecer relaciones entre documentos es mediante referencias. Las referencias permiten que un documento apunte a otro documento, lo que es útil para modelar relaciones entre entidades en una base de datos.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'><ol>
<li><strong>Referencias Manuales</strong>: Son referencias explícitas donde un documento contiene el <code>_id</code> de otro documento.</li>
<li><strong>DBRefs</strong>: Son una forma especial de referencia que incluye el nombre de la colección y el <code>_id</code> del documento referenciado.</li>
</ol>
</div><h1><p>Referencias Manuales</p>
</h1>
<div class='content'><p>Las referencias manuales son simples y directas. Un documento contiene el <code>_id</code> de otro documento, lo que permite establecer una relación entre ellos.</p>
</div><h2><p>Ejemplo Práctico</p>
</h2>
<div class='content'><p>Supongamos que tenemos dos colecciones: <code>authors</code> y <code>books</code>. Queremos que cada libro tenga una referencia al autor que lo escribió.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRG9jdW1lbnRvIGVuIGxhIGNvbGVjY2nDs24gImF1dGhvcnMiCnsKICAiX2lkIjogT2JqZWN0SWQoIjYwYzcyYjJmOWIxZDhiM2Y0YzhiNDU2NyIpLAogICJuYW1lIjogIkouSy4gUm93bGluZyIKfQoKLy8gRG9jdW1lbnRvIGVuIGxhIGNvbGVjY2nDs24gImJvb2tzIgp7CiAgInRpdGxlIjogIkhhcnJ5IFBvdHRlciBhbmQgdGhlIFBoaWxvc29waGVyJ3MgU3RvbmUiLAogICJhdXRob3JfaWQiOiBPYmplY3RJZCgiNjBjNzJiMmY5YjFkOGIzZjRjOGI0NTY3IikKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Documento en la colecci&oacute;n &quot;authors&quot;
{
  &quot;_id&quot;: ObjectId(&quot;60c72b2f9b1d8b3f4c8b4567&quot;),
  &quot;name&quot;: &quot;J.K. Rowling&quot;
}

// Documento en la colecci&oacute;n &quot;books&quot;
{
  &quot;title&quot;: &quot;Harry Potter and the Philosopher's Stone&quot;,
  &quot;author_id&quot;: ObjectId(&quot;60c72b2f9b1d8b3f4c8b4567&quot;)
}</pre></div><div class='content'><p>En este ejemplo, el documento del libro contiene un campo <code>author_id</code> que almacena el <code>_id</code> del autor correspondiente.</p>
</div><h2><p>Consultas con Referencias Manuales</p>
</h2>
<div class='content'><p>Para obtener el autor de un libro, primero necesitamos leer el documento del libro y luego usar el <code>author_id</code> para buscar el autor en la colección <code>authors</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gT2J0ZW5lciBlbCBsaWJybwpjb25zdCBib29rID0gZGIuYm9va3MuZmluZE9uZSh7IHRpdGxlOiAiSGFycnkgUG90dGVyIGFuZCB0aGUgUGhpbG9zb3BoZXIncyBTdG9uZSIgfSk7CgovLyBPYnRlbmVyIGVsIGF1dG9yIHVzYW5kbyBlbCBhdXRob3JfaWQgZGVsIGxpYnJvCmNvbnN0IGF1dGhvciA9IGRiLmF1dGhvcnMuZmluZE9uZSh7IF9pZDogYm9vay5hdXRob3JfaWQgfSk7CgpwcmludChgRWwgYXV0b3IgZGVsIGxpYnJvIGVzOiAke2F1dGhvci5uYW1lfWApOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Obtener el libro
const book = db.books.findOne({ title: &quot;Harry Potter and the Philosopher's Stone&quot; });

// Obtener el autor usando el author_id del libro
const author = db.authors.findOne({ _id: book.author_id });

print(`El autor del libro es: ${author.name}`);</pre></div><div class='content'></div><h1><p>DBRefs</p>
</h1>
<div class='content'><p>DBRefs son una forma más estructurada de referencias en MongoDB. Incluyen el nombre de la colección y el <code>_id</code> del documento referenciado.</p>
</div><h2><p>Ejemplo Práctico</p>
</h2>
<div class='content'><p>Usando el mismo ejemplo de <code>authors</code> y <code>books</code>, un DBRef se vería así:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRG9jdW1lbnRvIGVuIGxhIGNvbGVjY2nDs24gImJvb2tzIiB1c2FuZG8gREJSZWYKewogICJ0aXRsZSI6ICJIYXJyeSBQb3R0ZXIgYW5kIHRoZSBQaGlsb3NvcGhlcidzIFN0b25lIiwKICAiYXV0aG9yIjogewogICAgIiRyZWYiOiAiYXV0aG9ycyIsCiAgICAiJGlkIjogT2JqZWN0SWQoIjYwYzcyYjJmOWIxZDhiM2Y0YzhiNDU2NyIpCiAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Documento en la colecci&oacute;n &quot;books&quot; usando DBRef
{
  &quot;title&quot;: &quot;Harry Potter and the Philosopher's Stone&quot;,
  &quot;author&quot;: {
    &quot;$ref&quot;: &quot;authors&quot;,
    &quot;$id&quot;: ObjectId(&quot;60c72b2f9b1d8b3f4c8b4567&quot;)
  }
}</pre></div><div class='content'></div><h2><p>Consultas con DBRefs</p>
</h2>
<div class='content'><p>Para resolver un DBRef, MongoDB no proporciona soporte automático en las consultas. Necesitamos realizar dos consultas manualmente, similar a las referencias manuales.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gT2J0ZW5lciBlbCBsaWJybwpjb25zdCBib29rID0gZGIuYm9va3MuZmluZE9uZSh7IHRpdGxlOiAiSGFycnkgUG90dGVyIGFuZCB0aGUgUGhpbG9zb3BoZXIncyBTdG9uZSIgfSk7CgovLyBPYnRlbmVyIGVsIGF1dG9yIHVzYW5kbyBlbCBEQlJlZgpjb25zdCBhdXRob3IgPSBkYltib29rLmF1dGhvci4kcmVmXS5maW5kT25lKHsgX2lkOiBib29rLmF1dGhvci4kaWQgfSk7CgpwcmludChgRWwgYXV0b3IgZGVsIGxpYnJvIGVzOiAke2F1dGhvci5uYW1lfWApOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Obtener el libro
const book = db.books.findOne({ title: &quot;Harry Potter and the Philosopher's Stone&quot; });

// Obtener el autor usando el DBRef
const author = db[book.author.$ref].findOne({ _id: book.author.$id });

print(`El autor del libro es: ${author.name}`);</pre></div><div class='content'></div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio</p>
</h2>
<div class='content'><ol>
<li>Crea dos colecciones: <code>students</code> y <code>courses</code>.</li>
<li>Inserta documentos en ambas colecciones.</li>
<li>Establece una referencia manual en los documentos de <code>students</code> para apuntar a los cursos que están tomando.</li>
<li>Escribe una consulta para obtener el nombre del curso que está tomando un estudiante específico.</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYXIgY29sZWNjaW9uZXMgeSBkb2N1bWVudG9zCmRiLnN0dWRlbnRzLmluc2VydE9uZSh7CiAgIl9pZCI6IE9iamVjdElkKCI2MGM3MmIyZjliMWQ4YjNmNGM4YjQ1NjgiKSwKICAibmFtZSI6ICJBbGljZSIsCiAgImNvdXJzZV9pZCI6IE9iamVjdElkKCI2MGM3MmIyZjliMWQ4YjNmNGM4YjQ1NjkiKQp9KTsKCmRiLmNvdXJzZXMuaW5zZXJ0T25lKHsKICAiX2lkIjogT2JqZWN0SWQoIjYwYzcyYjJmOWIxZDhiM2Y0YzhiNDU2OSIpLAogICJ0aXRsZSI6ICJJbnRyb2R1Y3Rpb24gdG8gTW9uZ29EQiIKfSk7CgovLyBPYnRlbmVyIGVsIGVzdHVkaWFudGUKY29uc3Qgc3R1ZGVudCA9IGRiLnN0dWRlbnRzLmZpbmRPbmUoeyBuYW1lOiAiQWxpY2UiIH0pOwoKLy8gT2J0ZW5lciBlbCBjdXJzbyB1c2FuZG8gZWwgY291cnNlX2lkIGRlbCBlc3R1ZGlhbnRlCmNvbnN0IGNvdXJzZSA9IGRiLmNvdXJzZXMuZmluZE9uZSh7IF9pZDogc3R1ZGVudC5jb3Vyc2VfaWQgfSk7CgpwcmludChgRWwgY3Vyc28gcXVlIGVzdMOhIHRvbWFuZG8gQWxpY2UgZXM6ICR7Y291cnNlLnRpdGxlfWApOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Crear colecciones y documentos
db.students.insertOne({
  &quot;_id&quot;: ObjectId(&quot;60c72b2f9b1d8b3f4c8b4568&quot;),
  &quot;name&quot;: &quot;Alice&quot;,
  &quot;course_id&quot;: ObjectId(&quot;60c72b2f9b1d8b3f4c8b4569&quot;)
});

db.courses.insertOne({
  &quot;_id&quot;: ObjectId(&quot;60c72b2f9b1d8b3f4c8b4569&quot;),
  &quot;title&quot;: &quot;Introduction to MongoDB&quot;
});

// Obtener el estudiante
const student = db.students.findOne({ name: &quot;Alice&quot; });

// Obtener el curso usando el course_id del estudiante
const course = db.courses.findOne({ _id: student.course_id });

print(`El curso que est&aacute; tomando Alice es: ${course.title}`);</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>Las referencias en MongoDB son una herramienta poderosa para modelar relaciones entre documentos. Las referencias manuales son simples y directas, mientras que los DBRefs proporcionan una estructura más formal. Comprender cómo usar y consultar estas referencias es crucial para diseñar esquemas de datos eficientes y efectivos en MongoDB.</p>
<p>En el próximo tema, exploraremos los diferentes tipos de datos que se pueden utilizar en MongoDB, lo que nos permitirá aprovechar al máximo las capacidades de esta base de datos NoSQL.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='03-02-embedded-documents' title="Documentos Anidados">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='03-04-data-types' title="Tipos de Datos">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
