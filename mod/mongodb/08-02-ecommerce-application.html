<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicación de Comercio Electrónico</title>

    <link rel="alternate" href="https://campusempresa.com/mod/mongodb/08-02-ecommerce-application" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/mongodb/08-02-ecommerce-application" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/mongodb/08-02-ecommerce-application" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/mongodb/08-02-ecommerce-application" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/mongodb/08-02-ecommerce-application" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='08-01-building-rest-api' title="Construyendo una API REST con MongoDB">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Aplicación de Comercio Electrónico</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='08-03-social-media-application' title="Aplicación de Redes Sociales">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En este tema, aprenderemos a construir una aplicación de comercio electrónico utilizando MongoDB. Este tipo de aplicación es un excelente ejemplo para entender cómo manejar datos complejos y realizar operaciones avanzadas en MongoDB. Cubriremos desde el diseño del esquema hasta la implementación de operaciones CRUD y características avanzadas como la búsqueda y la agregación.</p>
</div><h1><p>Objetivos del Tema</p>
</h1>
<div class='content'><ul>
<li>Diseñar un esquema de base de datos para una aplicación de comercio electrónico.</li>
<li>Implementar operaciones CRUD para productos, usuarios y pedidos.</li>
<li>Utilizar índices y agregaciones para mejorar el rendimiento y la funcionalidad.</li>
<li>Integrar MongoDB con una aplicación web.</li>
</ul>
</div><h1><ol>
<li>Diseño del Esquema</li>
</ol>
</h1>
<div class='content'></div><h2><p>1.1. Colección de Productos</p>
</h2>
<div class='content'><p>Cada producto en nuestra tienda tendrá varios atributos como nombre, descripción, precio, categoría, y stock.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJfaWQiOiBPYmplY3RJZCgiLi4uIiksCiAgIm5hbWUiOiAiQ2FtaXNldGEiLAogICJkZXNjcmlwdGlvbiI6ICJDYW1pc2V0YSBkZSBhbGdvZMOzbiAxMDAlIiwKICAicHJpY2UiOiAxOS45OSwKICAiY2F0ZWdvcnkiOiAiUm9wYSIsCiAgInN0b2NrIjogMTAwLAogICJjcmVhdGVkX2F0IjogSVNPRGF0ZSgiMjAyMy0xMC0wMVQwMDowMDowMFoiKSwKICAidXBkYXRlZF9hdCI6IElTT0RhdGUoIjIwMjMtMTAtMDFUMDA6MDA6MDBaIikKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;_id&quot;: ObjectId(&quot;...&quot;),
  &quot;name&quot;: &quot;Camiseta&quot;,
  &quot;description&quot;: &quot;Camiseta de algod&oacute;n 100%&quot;,
  &quot;price&quot;: 19.99,
  &quot;category&quot;: &quot;Ropa&quot;,
  &quot;stock&quot;: 100,
  &quot;created_at&quot;: ISODate(&quot;2023-10-01T00:00:00Z&quot;),
  &quot;updated_at&quot;: ISODate(&quot;2023-10-01T00:00:00Z&quot;)
}</pre></div><div class='content'></div><h2><p>1.2. Colección de Usuarios</p>
</h2>
<div class='content'><p>Los usuarios tendrán información básica como nombre, correo electrónico, y una lista de direcciones.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJfaWQiOiBPYmplY3RJZCgiLi4uIiksCiAgIm5hbWUiOiAiSnVhbiBQw6lyZXoiLAogICJlbWFpbCI6ICJqdWFuLnBlcmV6QGV4YW1wbGUuY29tIiwKICAiYWRkcmVzc2VzIjogWwogICAgewogICAgICAic3RyZWV0IjogIkNhbGxlIEZhbHNhIDEyMyIsCiAgICAgICJjaXR5IjogIkNpdWRhZCIsCiAgICAgICJzdGF0ZSI6ICJFc3RhZG8iLAogICAgICAiemlwIjogIjEyMzQ1IgogICAgfQogIF0sCiAgImNyZWF0ZWRfYXQiOiBJU09EYXRlKCIyMDIzLTEwLTAxVDAwOjAwOjAwWiIpLAogICJ1cGRhdGVkX2F0IjogSVNPRGF0ZSgiMjAyMy0xMC0wMVQwMDowMDowMFoiKQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;_id&quot;: ObjectId(&quot;...&quot;),
  &quot;name&quot;: &quot;Juan P&eacute;rez&quot;,
  &quot;email&quot;: &quot;juan.perez@example.com&quot;,
  &quot;addresses&quot;: [
    {
      &quot;street&quot;: &quot;Calle Falsa 123&quot;,
      &quot;city&quot;: &quot;Ciudad&quot;,
      &quot;state&quot;: &quot;Estado&quot;,
      &quot;zip&quot;: &quot;12345&quot;
    }
  ],
  &quot;created_at&quot;: ISODate(&quot;2023-10-01T00:00:00Z&quot;),
  &quot;updated_at&quot;: ISODate(&quot;2023-10-01T00:00:00Z&quot;)
}</pre></div><div class='content'></div><h2><p>1.3. Colección de Pedidos</p>
</h2>
<div class='content'><p>Cada pedido contendrá información sobre el usuario, los productos comprados, y el estado del pedido.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJfaWQiOiBPYmplY3RJZCgiLi4uIiksCiAgInVzZXJfaWQiOiBPYmplY3RJZCgiLi4uIiksCiAgInByb2R1Y3RzIjogWwogICAgewogICAgICAicHJvZHVjdF9pZCI6IE9iamVjdElkKCIuLi4iKSwKICAgICAgInF1YW50aXR5IjogMiwKICAgICAgInByaWNlIjogMTkuOTkKICAgIH0KICBdLAogICJ0b3RhbCI6IDM5Ljk4LAogICJzdGF0dXMiOiAiUGVuZGllbnRlIiwKICAiY3JlYXRlZF9hdCI6IElTT0RhdGUoIjIwMjMtMTAtMDFUMDA6MDA6MDBaIiksCiAgInVwZGF0ZWRfYXQiOiBJU09EYXRlKCIyMDIzLTEwLTAxVDAwOjAwOjAwWiIpCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;_id&quot;: ObjectId(&quot;...&quot;),
  &quot;user_id&quot;: ObjectId(&quot;...&quot;),
  &quot;products&quot;: [
    {
      &quot;product_id&quot;: ObjectId(&quot;...&quot;),
      &quot;quantity&quot;: 2,
      &quot;price&quot;: 19.99
    }
  ],
  &quot;total&quot;: 39.98,
  &quot;status&quot;: &quot;Pendiente&quot;,
  &quot;created_at&quot;: ISODate(&quot;2023-10-01T00:00:00Z&quot;),
  &quot;updated_at&quot;: ISODate(&quot;2023-10-01T00:00:00Z&quot;)
}</pre></div><div class='content'></div><h1><ol start="2">
<li>Operaciones CRUD</li>
</ol>
</h1>
<div class='content'></div><h2><p>2.1. Creando Productos</p>
</h2>
<div class='content'><p>Para crear un nuevo producto, utilizamos la operación <code>insertOne</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIucHJvZHVjdHMuaW5zZXJ0T25lKHsKICAibmFtZSI6ICJDYW1pc2V0YSIsCiAgImRlc2NyaXB0aW9uIjogIkNhbWlzZXRhIGRlIGFsZ29kw7NuIDEwMCUiLAogICJwcmljZSI6IDE5Ljk5LAogICJjYXRlZ29yeSI6ICJSb3BhIiwKICAic3RvY2siOiAxMDAsCiAgImNyZWF0ZWRfYXQiOiBuZXcgRGF0ZSgpLAogICJ1cGRhdGVkX2F0IjogbmV3IERhdGUoKQp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.products.insertOne({
  &quot;name&quot;: &quot;Camiseta&quot;,
  &quot;description&quot;: &quot;Camiseta de algod&oacute;n 100%&quot;,
  &quot;price&quot;: 19.99,
  &quot;category&quot;: &quot;Ropa&quot;,
  &quot;stock&quot;: 100,
  &quot;created_at&quot;: new Date(),
  &quot;updated_at&quot;: new Date()
});</pre></div><div class='content'></div><h2><p>2.2. Leyendo Productos</p>
</h2>
<div class='content'><p>Para leer productos, podemos utilizar la operación <code>find</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIucHJvZHVjdHMuZmluZCh7ICJjYXRlZ29yeSI6ICJSb3BhIiB9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.products.find({ &quot;category&quot;: &quot;Ropa&quot; });</pre></div><div class='content'></div><h2><p>2.3. Actualizando Productos</p>
</h2>
<div class='content'><p>Para actualizar un producto, utilizamos la operación <code>updateOne</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIucHJvZHVjdHMudXBkYXRlT25lKAogIHsgIl9pZCI6IE9iamVjdElkKCIuLi4iKSB9LAogIHsgJHNldDogeyAicHJpY2UiOiAyNC45OSwgInVwZGF0ZWRfYXQiOiBuZXcgRGF0ZSgpIH0gfQopOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.products.updateOne(
  { &quot;_id&quot;: ObjectId(&quot;...&quot;) },
  { $set: { &quot;price&quot;: 24.99, &quot;updated_at&quot;: new Date() } }
);</pre></div><div class='content'></div><h2><p>2.4. Eliminando Productos</p>
</h2>
<div class='content'><p>Para eliminar un producto, utilizamos la operación <code>deleteOne</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIucHJvZHVjdHMuZGVsZXRlT25lKHsgIl9pZCI6IE9iamVjdElkKCIuLi4iKSB9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.products.deleteOne({ &quot;_id&quot;: ObjectId(&quot;...&quot;) });</pre></div><div class='content'></div><h1><ol start="3">
<li>Índices y Agregaciones</li>
</ol>
</h1>
<div class='content'></div><h2><p>3.1. Creando Índices</p>
</h2>
<div class='content'><p>Para mejorar el rendimiento de las consultas, podemos crear índices en los campos más consultados.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIucHJvZHVjdHMuY3JlYXRlSW5kZXgoeyAiY2F0ZWdvcnkiOiAxIH0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.products.createIndex({ &quot;category&quot;: 1 });</pre></div><div class='content'></div><h2><p>3.2. Usando Agregaciones</p>
</h2>
<div class='content'><p>Las agregaciones nos permiten realizar operaciones complejas como cálculos y transformaciones de datos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIub3JkZXJzLmFnZ3JlZ2F0ZShbCiAgeyAkbWF0Y2g6IHsgInN0YXR1cyI6ICJDb21wbGV0YWRvIiB9IH0sCiAgeyAkZ3JvdXA6IHsgX2lkOiAiJHVzZXJfaWQiLCB0b3RhbFNwZW50OiB7ICRzdW06ICIkdG90YWwiIH0gfSB9Cl0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.orders.aggregate([
  { $match: { &quot;status&quot;: &quot;Completado&quot; } },
  { $group: { _id: &quot;$user_id&quot;, totalSpent: { $sum: &quot;$total&quot; } } }
]);</pre></div><div class='content'></div><h1><ol start="4">
<li>Integración con una Aplicación Web</li>
</ol>
</h1>
<div class='content'></div><h2><p>4.1. Configuración del Servidor</p>
</h2>
<div class='content'><p>Utilizaremos Node.js y Express para crear una API REST que interactúe con nuestra base de datos MongoDB.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpOwoKY29uc3QgYXBwID0gZXhwcmVzcygpOwphcHAudXNlKGV4cHJlc3MuanNvbigpKTsKCm1vbmdvb3NlLmNvbm5lY3QoJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvZWNvbW1lcmNlJywgeyB1c2VOZXdVcmxQYXJzZXI6IHRydWUsIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSB9KTsKCmNvbnN0IHByb2R1Y3RTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHsKICBuYW1lOiBTdHJpbmcsCiAgZGVzY3JpcHRpb246IFN0cmluZywKICBwcmljZTogTnVtYmVyLAogIGNhdGVnb3J5OiBTdHJpbmcsCiAgc3RvY2s6IE51bWJlciwKICBjcmVhdGVkX2F0OiBEYXRlLAogIHVwZGF0ZWRfYXQ6IERhdGUKfSk7Cgpjb25zdCBQcm9kdWN0ID0gbW9uZ29vc2UubW9kZWwoJ1Byb2R1Y3QnLCBwcm9kdWN0U2NoZW1hKTsKCmFwcC5wb3N0KCcvcHJvZHVjdHMnLCBhc3luYyAocmVxLCByZXMpID0+IHsKICBjb25zdCBwcm9kdWN0ID0gbmV3IFByb2R1Y3QocmVxLmJvZHkpOwogIGF3YWl0IHByb2R1Y3Quc2F2ZSgpOwogIHJlcy5zZW5kKHByb2R1Y3QpOwp9KTsKCmFwcC5nZXQoJy9wcm9kdWN0cycsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgUHJvZHVjdC5maW5kKCk7CiAgcmVzLnNlbmQocHJvZHVjdHMpOwp9KTsKCmFwcC5saXN0ZW4oMzAwMCwgKCkgPT4gewogIGNvbnNvbGUubG9nKCdTZXJ2ZXIgaXMgcnVubmluZyBvbiBwb3J0IDMwMDAnKTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const mongoose = require('mongoose');

const app = express();
app.use(express.json());

mongoose.connect('mongodb://localhost:27017/ecommerce', { useNewUrlParser: true, useUnifiedTopology: true });

const productSchema = new mongoose.Schema({
  name: String,
  description: String,
  price: Number,
  category: String,
  stock: Number,
  created_at: Date,
  updated_at: Date
});

const Product = mongoose.model('Product', productSchema);

app.post('/products', async (req, res) =&gt; {
  const product = new Product(req.body);
  await product.save();
  res.send(product);
});

app.get('/products', async (req, res) =&gt; {
  const products = await Product.find();
  res.send(products);
});

app.listen(3000, () =&gt; {
  console.log('Server is running on port 3000');
});</pre></div><div class='content'></div><h2><p>4.2. Operaciones CRUD en la API</p>
</h2>
<div class='content'><p>Ya hemos implementado las operaciones de creación y lectura. De manera similar, podemos implementar las operaciones de actualización y eliminación.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwLnB1dCgnL3Byb2R1Y3RzLzppZCcsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkQW5kVXBkYXRlKHJlcS5wYXJhbXMuaWQsIHJlcS5ib2R5LCB7IG5ldzogdHJ1ZSB9KTsKICByZXMuc2VuZChwcm9kdWN0KTsKfSk7CgphcHAuZGVsZXRlKCcvcHJvZHVjdHMvOmlkJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgYXdhaXQgUHJvZHVjdC5maW5kQnlJZEFuZERlbGV0ZShyZXEucGFyYW1zLmlkKTsKICByZXMuc2VuZCh7IG1lc3NhZ2U6ICdQcm9kdWN0IGRlbGV0ZWQnIH0pOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>app.put('/products/:id', async (req, res) =&gt; {
  const product = await Product.findByIdAndUpdate(req.params.id, req.body, { new: true });
  res.send(product);
});

app.delete('/products/:id', async (req, res) =&gt; {
  await Product.findByIdAndDelete(req.params.id);
  res.send({ message: 'Product deleted' });
});</pre></div><div class='content'></div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio</p>
</h2>
<div class='content'><ol>
<li>Diseña una colección para almacenar reseñas de productos. Cada reseña debe contener el ID del producto, el ID del usuario, una calificación y un comentario.</li>
<li>Implementa las operaciones CRUD para la colección de reseñas.</li>
<li>Crea un índice en el campo <code>product_id</code> de la colección de reseñas.</li>
<li>Utiliza una agregación para calcular la calificación promedio de un producto.</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'><h4>1. Diseño de la Colección de Reseñas</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJfaWQiOiBPYmplY3RJZCgiLi4uIiksCiAgInByb2R1Y3RfaWQiOiBPYmplY3RJZCgiLi4uIiksCiAgInVzZXJfaWQiOiBPYmplY3RJZCgiLi4uIiksCiAgInJhdGluZyI6IDQuNSwKICAiY29tbWVudCI6ICJFeGNlbGVudGUgcHJvZHVjdG8iLAogICJjcmVhdGVkX2F0IjogSVNPRGF0ZSgiMjAyMy0xMC0wMVQwMDowMDowMFoiKSwKICAidXBkYXRlZF9hdCI6IElTT0RhdGUoIjIwMjMtMTAtMDFUMDA6MDA6MDBaIikKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;_id&quot;: ObjectId(&quot;...&quot;),
  &quot;product_id&quot;: ObjectId(&quot;...&quot;),
  &quot;user_id&quot;: ObjectId(&quot;...&quot;),
  &quot;rating&quot;: 4.5,
  &quot;comment&quot;: &quot;Excelente producto&quot;,
  &quot;created_at&quot;: ISODate(&quot;2023-10-01T00:00:00Z&quot;),
  &quot;updated_at&quot;: ISODate(&quot;2023-10-01T00:00:00Z&quot;)
}</pre></div><div class='content'><h4>2. Operaciones CRUD</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYW5kbyB1bmEgcmVzZcOxYQpkYi5yZXZpZXdzLmluc2VydE9uZSh7CiAgInByb2R1Y3RfaWQiOiBPYmplY3RJZCgiLi4uIiksCiAgInVzZXJfaWQiOiBPYmplY3RJZCgiLi4uIiksCiAgInJhdGluZyI6IDQuNSwKICAiY29tbWVudCI6ICJFeGNlbGVudGUgcHJvZHVjdG8iLAogICJjcmVhdGVkX2F0IjogbmV3IERhdGUoKSwKICAidXBkYXRlZF9hdCI6IG5ldyBEYXRlKCkKfSk7CgovLyBMZXllbmRvIHJlc2XDsWFzCmRiLnJldmlld3MuZmluZCh7ICJwcm9kdWN0X2lkIjogT2JqZWN0SWQoIi4uLiIpIH0pOwoKLy8gQWN0dWFsaXphbmRvIHVuYSByZXNlw7FhCmRiLnJldmlld3MudXBkYXRlT25lKAogIHsgIl9pZCI6IE9iamVjdElkKCIuLi4iKSB9LAogIHsgJHNldDogeyAicmF0aW5nIjogNSwgInVwZGF0ZWRfYXQiOiBuZXcgRGF0ZSgpIH0gfQopOwoKLy8gRWxpbWluYW5kbyB1bmEgcmVzZcOxYQpkYi5yZXZpZXdzLmRlbGV0ZU9uZSh7ICJfaWQiOiBPYmplY3RJZCgiLi4uIikgfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Creando una rese&ntilde;a
db.reviews.insertOne({
  &quot;product_id&quot;: ObjectId(&quot;...&quot;),
  &quot;user_id&quot;: ObjectId(&quot;...&quot;),
  &quot;rating&quot;: 4.5,
  &quot;comment&quot;: &quot;Excelente producto&quot;,
  &quot;created_at&quot;: new Date(),
  &quot;updated_at&quot;: new Date()
});

// Leyendo rese&ntilde;as
db.reviews.find({ &quot;product_id&quot;: ObjectId(&quot;...&quot;) });

// Actualizando una rese&ntilde;a
db.reviews.updateOne(
  { &quot;_id&quot;: ObjectId(&quot;...&quot;) },
  { $set: { &quot;rating&quot;: 5, &quot;updated_at&quot;: new Date() } }
);

// Eliminando una rese&ntilde;a
db.reviews.deleteOne({ &quot;_id&quot;: ObjectId(&quot;...&quot;) });</pre></div><div class='content'><h4>3. Creando un Índice</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIucmV2aWV3cy5jcmVhdGVJbmRleCh7ICJwcm9kdWN0X2lkIjogMSB9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.reviews.createIndex({ &quot;product_id&quot;: 1 });</pre></div><div class='content'><h4>4. Agregación para Calcular la Calificación Promedio</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIucmV2aWV3cy5hZ2dyZWdhdGUoWwogIHsgJG1hdGNoOiB7ICJwcm9kdWN0X2lkIjogT2JqZWN0SWQoIi4uLiIpIH0gfSwKICB7ICRncm91cDogeyBfaWQ6ICIkcHJvZHVjdF9pZCIsIGF2ZXJhZ2VSYXRpbmc6IHsgJGF2ZzogIiRyYXRpbmciIH0gfSB9Cl0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.reviews.aggregate([
  { $match: { &quot;product_id&quot;: ObjectId(&quot;...&quot;) } },
  { $group: { _id: &quot;$product_id&quot;, averageRating: { $avg: &quot;$rating&quot; } } }
]);</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En este tema, hemos aprendido a diseñar y construir una aplicación de comercio electrónico utilizando MongoDB. Hemos cubierto desde el diseño del esquema hasta la implementación de operaciones CRUD y características avanzadas como índices y agregaciones. Además, hemos integrado MongoDB con una aplicación web utilizando Node.js y Express. Con estos conocimientos, estás preparado para construir aplicaciones complejas y eficientes utilizando MongoDB.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='08-01-building-rest-api' title="Construyendo una API REST con MongoDB">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='08-03-social-media-application' title="Aplicación de Redes Sociales">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
