<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renderizado de Terreno en DirectX</title>

    <link rel="alternate" href="https://campusempresa.com/mod/direct_x/terrain-rendering" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/direct_x/terrain-rendering" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/direct_x/terrain-rendering" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body  class="test" >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/direct_x/terrain-rendering" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/direct_x/terrain-rendering" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
									<div class="assert">
						<p><b>Atención!</b> Ha habido un error en la generación del curso y puede contener errores de traducción.Estamos trabajando para solucinarlo por lo que se deben usar los contenidos con cuidado.Se puede consultar el contenido correcto en otro idioma en el siguiente enlace:<br>
						<a href="https://enterprisecampus.net/mod/direct_x/terrain-rendering">https://enterprisecampus.net/mod/direct_x/terrain-rendering</a></p>
					</div>
								<div class='row navigation'>
	<div class='col-4'>
					<a href='particle-systems'>&#x25C4;Sistemas de Partículas</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Renderizado de Terreno en DirectX</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-game-development-with-directx'>Introducción al Desarrollo de Juegos con DirectX &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción al Renderizado de Terreno</h1>
<div class='content'><p>El renderizado de terreno es un aspecto crucial de muchas aplicaciones 3D, especialmente en juegos y simulaciones. Este tema te guiará a través del proceso de renderizado de terreno usando DirectX, comenzando desde conceptos básicos y avanzando gradualmente hacia técnicas avanzadas.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Mapas de Altura</strong>: Una imagen 2D donde cada píxel representa la altura en ese punto del terreno.</li>
<li><strong>Buffers de Vértices e Índices</strong>: Estructuras utilizadas para almacenar datos de vértices e índices para un renderizado eficiente.</li>
<li><strong>Shaders</strong>: Programas que se ejecutan en la GPU para controlar la tubería de renderizado.</li>
<li><strong>Nivel de Detalle (LOD)</strong>: Técnicas para gestionar la complejidad de la malla del terreno en función de la distancia de la cámara.</li>
</ul>
</div><h1>Configuración del Entorno</h1>
<div class='content'><p>Antes de sumergirte en el renderizado de terreno, asegúrate de tener una configuración de DirectX funcional. Esto incluye:</p>
<ul>
<li>Instalar el SDK de DirectX.</li>
<li>Configurar una aplicación básica de DirectX con un bucle de renderizado.</li>
</ul>
</div><h1>Creación de un Mapa de Altura</h1>
<div class='content'><p>Un mapa de altura es una imagen en escala de grises donde el brillo de cada píxel representa la altura del terreno en ese punto.</p>
</div><h2>Cargando un Mapa de Altura</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ym9vbCBMb2FkSGVpZ2h0bWFwKGNvbnN0IHN0ZDo6c3RyaW5nJiBmaWxlbmFtZSwgc3RkOjp2ZWN0b3I8ZmxvYXQ+JiBoZWlnaHREYXRhLCBpbnQmIHdpZHRoLCBpbnQmIGhlaWdodCkgewogICAgLy8gQ2FyZ2FyIGxhIGltYWdlbiB1c2FuZG8gdW5hIGJpYmxpb3RlY2EgY29tbyBzdGJfaW1hZ2UKICAgIGludCBjaGFubmVsczsKICAgIHVuc2lnbmVkIGNoYXIqIGRhdGEgPSBzdGJpX2xvYWQoZmlsZW5hbWUuY19zdHIoKSwgJndpZHRoLCAmaGVpZ2h0LCAmY2hhbm5lbHMsIDEpOwogICAgaWYgKCFkYXRhKSByZXR1cm4gZmFsc2U7CgogICAgaGVpZ2h0RGF0YS5yZXNpemUod2lkdGggKiBoZWlnaHQpOwogICAgZm9yIChpbnQgaSA9IDA7IGkgPCB3aWR0aCAqIGhlaWdodDsgKytpKSB7CiAgICAgICAgaGVpZ2h0RGF0YVtpXSA9IHN0YXRpY19jYXN0PGZsb2F0PihkYXRhW2ldKSAvIDI1NS4wZjsKICAgIH0KCiAgICBzdGJpX2ltYWdlX2ZyZWUoZGF0YSk7CiAgICByZXR1cm4gdHJ1ZTsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>bool LoadHeightmap(const std::string&amp; filename, std::vector&lt;float&gt;&amp; heightData, int&amp; width, int&amp; height) {
    // Cargar la imagen usando una biblioteca como stb_image
    int channels;
    unsigned char* data = stbi_load(filename.c_str(), &amp;width, &amp;height, &amp;channels, 1);
    if (!data) return false;

    heightData.resize(width * height);
    for (int i = 0; i &lt; width * height; ++i) {
        heightData[i] = static_cast&lt;float&gt;(data[i]) / 255.0f;
    }

    stbi_image_free(data);
    return true;
}</pre></div><div class='content'><p>Este fragmento de código demuestra cómo cargar un mapa de altura usando la biblioteca stb_image. Los datos de altura se normalizan a un rango de 0.0 a 1.0.</p>
</div><h1>Generación de la Malla del Terreno</h1>
<div class='content'><p>Una vez cargado el mapa de altura, el siguiente paso es generar la malla del terreno.</p>
</div><h2>Creación de Buffers de Vértices e Índices</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBDcmVhdGVUZXJyYWluTWVzaChjb25zdCBzdGQ6OnZlY3RvcjxmbG9hdD4mIGhlaWdodERhdGEsIGludCB3aWR0aCwgaW50IGhlaWdodCwgc3RkOjp2ZWN0b3I8VmVydGV4PiYgdmVydGljZXMsIHN0ZDo6dmVjdG9yPHVpbnQzMl90PiYgaW5kaWNlcykgewogICAgLy8gR2VuZXJhciB2w6lydGljZXMKICAgIGZvciAoaW50IHogPSAwOyB6IDwgaGVpZ2h0OyArK3opIHsKICAgICAgICBmb3IgKGludCB4ID0gMDsgeCA8IHdpZHRoOyArK3gpIHsKICAgICAgICAgICAgZmxvYXQgeSA9IGhlaWdodERhdGFbeiAqIHdpZHRoICsgeF07CiAgICAgICAgICAgIHZlcnRpY2VzLnB1c2hfYmFjayhWZXJ0ZXh7IFhNRkxPQVQzKHgsIHksIHopLCBYTUZMT0FUMygwLjBmLCAxLjBmLCAwLjBmKSwgWE1GTE9BVDIoeCAvIChmbG9hdCl3aWR0aCwgeiAvIChmbG9hdCloZWlnaHQpIH0pOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBHZW5lcmFyIMOtbmRpY2VzCiAgICBmb3IgKGludCB6ID0gMDsgeiA8IGhlaWdodCAtIDE7ICsreikgewogICAgICAgIGZvciAoaW50IHggPSAwOyB4IDwgd2lkdGggLSAxOyArK3gpIHsKICAgICAgICAgICAgaW50IHRvcExlZnQgPSB6ICogd2lkdGggKyB4OwogICAgICAgICAgICBpbnQgdG9wUmlnaHQgPSB0b3BMZWZ0ICsgMTsKICAgICAgICAgICAgaW50IGJvdHRvbUxlZnQgPSAoeiArIDEpICogd2lkdGggKyB4OwogICAgICAgICAgICBpbnQgYm90dG9tUmlnaHQgPSBib3R0b21MZWZ0ICsgMTsKCiAgICAgICAgICAgIGluZGljZXMucHVzaF9iYWNrKHRvcExlZnQpOwogICAgICAgICAgICBpbmRpY2VzLnB1c2hfYmFjayhib3R0b21MZWZ0KTsKICAgICAgICAgICAgaW5kaWNlcy5wdXNoX2JhY2sodG9wUmlnaHQpOwoKICAgICAgICAgICAgaW5kaWNlcy5wdXNoX2JhY2sodG9wUmlnaHQpOwogICAgICAgICAgICBpbmRpY2VzLnB1c2hfYmFjayhib3R0b21MZWZ0KTsKICAgICAgICAgICAgaW5kaWNlcy5wdXNoX2JhY2soYm90dG9tUmlnaHQpOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void CreateTerrainMesh(const std::vector&lt;float&gt;&amp; heightData, int width, int height, std::vector&lt;Vertex&gt;&amp; vertices, std::vector&lt;uint32_t&gt;&amp; indices) {
    // Generar v&eacute;rtices
    for (int z = 0; z &lt; height; ++z) {
        for (int x = 0; x &lt; width; ++x) {
            float y = heightData[z * width + x];
            vertices.push_back(Vertex{ XMFLOAT3(x, y, z), XMFLOAT3(0.0f, 1.0f, 0.0f), XMFLOAT2(x / (float)width, z / (float)height) });
        }
    }

    // Generar &iacute;ndices
    for (int z = 0; z &lt; height - 1; ++z) {
        for (int x = 0; x &lt; width - 1; ++x) {
            int topLeft = z * width + x;
            int topRight = topLeft + 1;
            int bottomLeft = (z + 1) * width + x;
            int bottomRight = bottomLeft + 1;

            indices.push_back(topLeft);
            indices.push_back(bottomLeft);
            indices.push_back(topRight);

            indices.push_back(topRight);
            indices.push_back(bottomLeft);
            indices.push_back(bottomRight);
        }
    }
}</pre></div><div class='content'><p>Esta función genera vértices e índices para la malla del terreno basándose en los datos del mapa de altura.</p>
</div><h1>Aplicación de Shaders</h1>
<div class='content'><p>Los shaders son esenciales para renderizar el terreno con iluminación y texturas.</p>
</div><h2>Vertex Shader</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2J1ZmZlciBDb25zdGFudEJ1ZmZlciA6IHJlZ2lzdGVyKGIwKSB7CiAgICBtYXRyaXggd29ybGRNYXRyaXg7CiAgICBtYXRyaXggdmlld01hdHJpeDsKICAgIG1hdHJpeCBwcm9qZWN0aW9uTWF0cml4Owp9CgpzdHJ1Y3QgVlNfSU5QVVQgewogICAgZmxvYXQzIHBvcyA6IFBPU0lUSU9OOwogICAgZmxvYXQzIG5vcm1hbCA6IE5PUk1BTDsKICAgIGZsb2F0MiB0ZXggOiBURVhDT09SRDA7Cn07CgpzdHJ1Y3QgUFNfSU5QVVQgewogICAgZmxvYXQ0IHBvcyA6IFNWX1BPU0lUSU9OOwogICAgZmxvYXQzIG5vcm1hbCA6IE5PUk1BTDsKICAgIGZsb2F0MiB0ZXggOiBURVhDT09SRDA7Cn07CgpQU19JTlBVVCBWUyhWU19JTlBVVCBpbnB1dCkgewogICAgUFNfSU5QVVQgb3V0cHV0OwogICAgZmxvYXQ0IHdvcmxkUG9zID0gbXVsKGZsb2F0NChpbnB1dC5wb3MsIDEuMGYpLCB3b3JsZE1hdHJpeCk7CiAgICBvdXRwdXQucG9zID0gbXVsKHdvcmxkUG9zLCB2aWV3TWF0cml4KTsKICAgIG91dHB1dC5wb3MgPSBtdWwob3V0cHV0LnBvcywgcHJvamVjdGlvbk1hdHJpeCk7CiAgICBvdXRwdXQubm9ybWFsID0gbXVsKGlucHV0Lm5vcm1hbCwgKGZsb2F0M3gzKXdvcmxkTWF0cml4KTsKICAgIG91dHB1dC50ZXggPSBpbnB1dC50ZXg7CiAgICByZXR1cm4gb3V0cHV0Owp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cbuffer ConstantBuffer : register(b0) {
    matrix worldMatrix;
    matrix viewMatrix;
    matrix projectionMatrix;
}

struct VS_INPUT {
    float3 pos : POSITION;
    float3 normal : NORMAL;
    float2 tex : TEXCOORD0;
};

struct PS_INPUT {
    float4 pos : SV_POSITION;
    float3 normal : NORMAL;
    float2 tex : TEXCOORD0;
};

PS_INPUT VS(VS_INPUT input) {
    PS_INPUT output;
    float4 worldPos = mul(float4(input.pos, 1.0f), worldMatrix);
    output.pos = mul(worldPos, viewMatrix);
    output.pos = mul(output.pos, projectionMatrix);
    output.normal = mul(input.normal, (float3x3)worldMatrix);
    output.tex = input.tex;
    return output;
}</pre></div><div class='content'></div><h2>Pixel Shader</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VGV4dHVyZTJEIHRlcnJhaW5UZXh0dXJlIDogcmVnaXN0ZXIodDApOwpTYW1wbGVyU3RhdGUgc2FtcGxlclN0YXRlIDogcmVnaXN0ZXIoczApOwoKc3RydWN0IFBTX0lOUFVUIHsKICAgIGZsb2F0NCBwb3MgOiBTVl9QT1NJVElPTjsKICAgIGZsb2F0MyBub3JtYWwgOiBOT1JNQUw7CiAgICBmbG9hdDIgdGV4IDogVEVYQ09PUkQwOwp9OwoKZmxvYXQ0IFBTKFBTX0lOUFVUIGlucHV0KSA6IFNWX1RBUkdFVCB7CiAgICBmbG9hdDQgY29sb3IgPSB0ZXJyYWluVGV4dHVyZS5TYW1wbGUoc2FtcGxlclN0YXRlLCBpbnB1dC50ZXgpOwogICAgcmV0dXJuIGNvbG9yOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Texture2D terrainTexture : register(t0);
SamplerState samplerState : register(s0);

struct PS_INPUT {
    float4 pos : SV_POSITION;
    float3 normal : NORMAL;
    float2 tex : TEXCOORD0;
};

float4 PS(PS_INPUT input) : SV_TARGET {
    float4 color = terrainTexture.Sample(samplerState, input.tex);
    return color;
}</pre></div><div class='content'><p>Estos shaders manejan la transformación de vértices y aplican una textura al terreno.</p>
</div><h1>Nivel de Detalle (LOD)</h1>
<div class='content'><p>Para optimizar el rendimiento, usa técnicas de LOD para reducir la complejidad de la malla del terreno en función de la distancia de la cámara.</p>
</div><h2>Implementación de LOD</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBVcGRhdGVMT0QoY29uc3QgQ2FtZXJhJiBjYW1lcmEsIHN0ZDo6dmVjdG9yPFZlcnRleD4mIHZlcnRpY2VzLCBzdGQ6OnZlY3Rvcjx1aW50MzJfdD4mIGluZGljZXMpIHsKICAgIC8vIFNpbXBsaWZpY2FyIGxhIG1hbGxhIGRlbCB0ZXJyZW5vIGVuIGZ1bmNpw7NuIGRlIGxhIGRpc3RhbmNpYSBkZSBsYSBjw6FtYXJhCiAgICAvLyBFc3RvIGVzIHVuIG1hcmNhZG9yIGRlIHBvc2ljacOzbiBwYXJhIGxhIGltcGxlbWVudGFjacOzbiBkZSBMT0QKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void UpdateLOD(const Camera&amp; camera, std::vector&lt;Vertex&gt;&amp; vertices, std::vector&lt;uint32_t&gt;&amp; indices) {
    // Simplificar la malla del terreno en funci&oacute;n de la distancia de la c&aacute;mara
    // Esto es un marcador de posici&oacute;n para la implementaci&oacute;n de LOD
}</pre></div><div class='content'><p>Esta función debería ajustar la complejidad de la malla del terreno en función de la distancia de la cámara al terreno.</p>
</div><h1>Conclusión</h1>
<div class='content'><p>El renderizado de terreno en DirectX implica varios pasos, incluyendo la carga de mapas de altura, la generación de mallas, la aplicación de shaders y la optimización con técnicas de LOD. Siguiendo estos pasos, puedes crear terrenos detallados y eficientes para tus aplicaciones 3D. Practica con diferentes mapas de altura y shaders para mejorar tu comprensión y habilidades en el renderizado de terreno.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='particle-systems'>&#x25C4;Sistemas de Partículas</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Renderizado de Terreno en DirectX</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-game-development-with-directx'>Introducción al Desarrollo de Juegos con DirectX &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
