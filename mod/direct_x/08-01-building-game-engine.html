<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Construyendo un Motor de Juego</title>

    <link rel="alternate" href="https://campusempresa.com/mod/direct_x/08-01-building-game-engine" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/direct_x/08-01-building-game-engine" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/direct_x/08-01-building-game-engine" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/direct_x/08-01-building-game-engine" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/direct_x/08-01-building-game-engine" class="px-2">CA</a>
								</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Contenido del curso</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competencias técnicas</a>
				<a href="/all/conocimientos">Conocimientos</a>
				<a href="/all/soft_skills">Competencias sociales</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-04-ray-tracing' title="Trazado de Rayos">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Construyendo un Motor de Juego</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-02-integrating-physics' title="Integrando Física">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En este módulo, aprenderás a construir un motor de juego utilizando DirectX. Este es un tema avanzado que integra muchos de los conceptos que has aprendido en los módulos anteriores. Un motor de juego es una pieza de software que proporciona las funcionalidades básicas necesarias para crear y ejecutar videojuegos. Estas funcionalidades incluyen renderizado gráfico, física, entrada del usuario, y más.</p>
</div><h1><p>Objetivos del Módulo</p>
</h1>
<div class='content'><ul>
<li>Comprender los componentes básicos de un motor de juego.</li>
<li>Implementar un sistema de renderizado utilizando DirectX.</li>
<li>Integrar sistemas de física y entrada del usuario.</li>
<li>Crear una estructura modular y escalable para el motor de juego.</li>
</ul>
</div><h1><ol>
<li>Componentes Básicos de un Motor de Juego</li>
</ol>
</h1>
<div class='content'><p>Un motor de juego típico incluye los siguientes componentes:</p>
<ol>
<li><strong>Sistema de Renderizado</strong>: Maneja la representación gráfica del juego.</li>
<li><strong>Sistema de Física</strong>: Simula las leyes físicas en el juego.</li>
<li><strong>Sistema de Entrada</strong>: Captura y procesa la entrada del usuario.</li>
<li><strong>Sistema de Audio</strong>: Maneja la reproducción de sonidos y música.</li>
<li><strong>Sistema de Red</strong>: Permite la comunicación en juegos multijugador.</li>
<li><strong>Gestión de Recursos</strong>: Carga y gestiona los recursos del juego como texturas, modelos y sonidos.</li>
<li><strong>Sistema de Escena</strong>: Organiza y gestiona los objetos del juego.</li>
</ol>
</div><h1><ol start="2">
<li>Implementando el Sistema de Renderizado</li>
</ol>
</h1>
<div class='content'></div><h2><p>2.1 Inicialización de Direct3D</p>
</h2>
<div class='content'><p>Primero, necesitamos inicializar Direct3D. Aquí hay un ejemplo básico de cómo hacerlo:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGQzZDExLmg+CiNpbmNsdWRlIDxkeGdpLmg+CgpJRFhHSVN3YXBDaGFpbiogc3dhcENoYWluOwpJRDNEMTFEZXZpY2UqIGRldmljZTsKSUQzRDExRGV2aWNlQ29udGV4dCogZGV2aWNlQ29udGV4dDsKSUQzRDExUmVuZGVyVGFyZ2V0VmlldyogcmVuZGVyVGFyZ2V0VmlldzsKCnZvaWQgSW5pdGlhbGl6ZURpcmVjdDNEKEhXTkQgaHduZCkgewogICAgRFhHSV9TV0FQX0NIQUlOX0RFU0Mgc3dhcENoYWluRGVzYyA9IHt9OwogICAgc3dhcENoYWluRGVzYy5CdWZmZXJDb3VudCA9IDE7CiAgICBzd2FwQ2hhaW5EZXNjLkJ1ZmZlckRlc2MuRm9ybWF0ID0gRFhHSV9GT1JNQVRfUjhHOEI4QThfVU5PUk07CiAgICBzd2FwQ2hhaW5EZXNjLkJ1ZmZlclVzYWdlID0gRFhHSV9VU0FHRV9SRU5ERVJfVEFSR0VUX09VVFBVVDsKICAgIHN3YXBDaGFpbkRlc2MuT3V0cHV0V2luZG93ID0gaHduZDsKICAgIHN3YXBDaGFpbkRlc2MuU2FtcGxlRGVzYy5Db3VudCA9IDE7CiAgICBzd2FwQ2hhaW5EZXNjLldpbmRvd2VkID0gVFJVRTsKCiAgICBEM0QxMUNyZWF0ZURldmljZUFuZFN3YXBDaGFpbigKICAgICAgICBudWxscHRyLAogICAgICAgIEQzRF9EUklWRVJfVFlQRV9IQVJEV0FSRSwKICAgICAgICBudWxscHRyLAogICAgICAgIDAsCiAgICAgICAgbnVsbHB0ciwKICAgICAgICAwLAogICAgICAgIEQzRDExX1NES19WRVJTSU9OLAogICAgICAgICZzd2FwQ2hhaW5EZXNjLAogICAgICAgICZzd2FwQ2hhaW4sCiAgICAgICAgJmRldmljZSwKICAgICAgICBudWxscHRyLAogICAgICAgICZkZXZpY2VDb250ZXh0CiAgICApOwoKICAgIElEM0QxMVRleHR1cmUyRCogYmFja0J1ZmZlcjsKICAgIHN3YXBDaGFpbi0+R2V0QnVmZmVyKDAsIF9fdXVpZG9mKElEM0QxMVRleHR1cmUyRCksICh2b2lkKiopJmJhY2tCdWZmZXIpOwogICAgZGV2aWNlLT5DcmVhdGVSZW5kZXJUYXJnZXRWaWV3KGJhY2tCdWZmZXIsIG51bGxwdHIsICZyZW5kZXJUYXJnZXRWaWV3KTsKICAgIGJhY2tCdWZmZXItPlJlbGVhc2UoKTsKCiAgICBkZXZpY2VDb250ZXh0LT5PTVNldFJlbmRlclRhcmdldHMoMSwgJnJlbmRlclRhcmdldFZpZXcsIG51bGxwdHIpOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;d3d11.h&gt;
#include &lt;dxgi.h&gt;

IDXGISwapChain* swapChain;
ID3D11Device* device;
ID3D11DeviceContext* deviceContext;
ID3D11RenderTargetView* renderTargetView;

void InitializeDirect3D(HWND hwnd) {
    DXGI_SWAP_CHAIN_DESC swapChainDesc = {};
    swapChainDesc.BufferCount = 1;
    swapChainDesc.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
    swapChainDesc.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;
    swapChainDesc.OutputWindow = hwnd;
    swapChainDesc.SampleDesc.Count = 1;
    swapChainDesc.Windowed = TRUE;

    D3D11CreateDeviceAndSwapChain(
        nullptr,
        D3D_DRIVER_TYPE_HARDWARE,
        nullptr,
        0,
        nullptr,
        0,
        D3D11_SDK_VERSION,
        &amp;swapChainDesc,
        &amp;swapChain,
        &amp;device,
        nullptr,
        &amp;deviceContext
    );

    ID3D11Texture2D* backBuffer;
    swapChain-&gt;GetBuffer(0, __uuidof(ID3D11Texture2D), (void**)&amp;backBuffer);
    device-&gt;CreateRenderTargetView(backBuffer, nullptr, &amp;renderTargetView);
    backBuffer-&gt;Release();

    deviceContext-&gt;OMSetRenderTargets(1, &amp;renderTargetView, nullptr);
}</pre></div><div class='content'></div><h2><p>2.2 Renderizando una Escena</p>
</h2>
<div class='content'><p>Para renderizar una escena, necesitamos limpiar el buffer de color y presentar el swap chain:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBSZW5kZXIoKSB7CiAgICBmbG9hdCBjbGVhckNvbG9yW10gPSB7IDAuMGYsIDAuMmYsIDAuNGYsIDEuMGYgfTsKICAgIGRldmljZUNvbnRleHQtPkNsZWFyUmVuZGVyVGFyZ2V0VmlldyhyZW5kZXJUYXJnZXRWaWV3LCBjbGVhckNvbG9yKTsKCiAgICAvLyBBcXXDrSBpcsOtYSBlbCBjw7NkaWdvIHBhcmEgcmVuZGVyaXphciBvYmpldG9zCgogICAgc3dhcENoYWluLT5QcmVzZW50KDEsIDApOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void Render() {
    float clearColor[] = { 0.0f, 0.2f, 0.4f, 1.0f };
    deviceContext-&gt;ClearRenderTargetView(renderTargetView, clearColor);

    // Aqu&iacute; ir&iacute;a el c&oacute;digo para renderizar objetos

    swapChain-&gt;Present(1, 0);
}</pre></div><div class='content'></div><h2><p>2.3 Manejando el Bucle de Juego</p>
</h2>
<div class='content'><p>El bucle de juego es el corazón de cualquier motor de juego. Aquí es donde se actualizan y renderizan los objetos del juego:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBHYW1lTG9vcCgpIHsKICAgIE1TRyBtc2cgPSB7fTsKICAgIHdoaWxlIChtc2cubWVzc2FnZSAhPSBXTV9RVUlUKSB7CiAgICAgICAgaWYgKFBlZWtNZXNzYWdlKCZtc2csIG51bGxwdHIsIDAsIDAsIFBNX1JFTU9WRSkpIHsKICAgICAgICAgICAgVHJhbnNsYXRlTWVzc2FnZSgmbXNnKTsKICAgICAgICAgICAgRGlzcGF0Y2hNZXNzYWdlKCZtc2cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIEFjdHVhbGl6YXIgbMOzZ2ljYSBkZWwganVlZ28KICAgICAgICAgICAgVXBkYXRlKCk7CgogICAgICAgICAgICAvLyBSZW5kZXJpemFyIGxhIGVzY2VuYQogICAgICAgICAgICBSZW5kZXIoKTsKICAgICAgICB9CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void GameLoop() {
    MSG msg = {};
    while (msg.message != WM_QUIT) {
        if (PeekMessage(&amp;msg, nullptr, 0, 0, PM_REMOVE)) {
            TranslateMessage(&amp;msg);
            DispatchMessage(&amp;msg);
        } else {
            // Actualizar l&oacute;gica del juego
            Update();

            // Renderizar la escena
            Render();
        }
    }
}</pre></div><div class='content'></div><h1><ol start="3">
<li>Integrando Sistemas de Física y Entrada</li>
</ol>
</h1>
<div class='content'></div><h2><p>3.1 Sistema de Física</p>
</h2>
<div class='content'><p>Para integrar un sistema de física, puedes usar una biblioteca como Bullet Physics. Aquí hay un ejemplo básico de cómo inicializar Bullet Physics:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGJ0QnVsbGV0RHluYW1pY3NDb21tb24uaD4KCmJ0RGlzY3JldGVEeW5hbWljc1dvcmxkKiBkeW5hbWljc1dvcmxkOwoKdm9pZCBJbml0aWFsaXplUGh5c2ljcygpIHsKICAgIGJ0QnJvYWRwaGFzZUludGVyZmFjZSogYnJvYWRwaGFzZSA9IG5ldyBidERidnRCcm9hZHBoYXNlKCk7CiAgICBidERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uKiBjb2xsaXNpb25Db25maWd1cmF0aW9uID0gbmV3IGJ0RGVmYXVsdENvbGxpc2lvbkNvbmZpZ3VyYXRpb24oKTsKICAgIGJ0Q29sbGlzaW9uRGlzcGF0Y2hlciogZGlzcGF0Y2hlciA9IG5ldyBidENvbGxpc2lvbkRpc3BhdGNoZXIoY29sbGlzaW9uQ29uZmlndXJhdGlvbik7CiAgICBidFNlcXVlbnRpYWxJbXB1bHNlQ29uc3RyYWludFNvbHZlciogc29sdmVyID0gbmV3IGJ0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyKCk7CgogICAgZHluYW1pY3NXb3JsZCA9IG5ldyBidERpc2NyZXRlRHluYW1pY3NXb3JsZChkaXNwYXRjaGVyLCBicm9hZHBoYXNlLCBzb2x2ZXIsIGNvbGxpc2lvbkNvbmZpZ3VyYXRpb24pOwogICAgZHluYW1pY3NXb3JsZC0+c2V0R3Jhdml0eShidFZlY3RvcjMoMCwgLTkuODFmLCAwKSk7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;btBulletDynamicsCommon.h&gt;

btDiscreteDynamicsWorld* dynamicsWorld;

void InitializePhysics() {
    btBroadphaseInterface* broadphase = new btDbvtBroadphase();
    btDefaultCollisionConfiguration* collisionConfiguration = new btDefaultCollisionConfiguration();
    btCollisionDispatcher* dispatcher = new btCollisionDispatcher(collisionConfiguration);
    btSequentialImpulseConstraintSolver* solver = new btSequentialImpulseConstraintSolver();

    dynamicsWorld = new btDiscreteDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration);
    dynamicsWorld-&gt;setGravity(btVector3(0, -9.81f, 0));
}</pre></div><div class='content'></div><h2><p>3.2 Sistema de Entrada</p>
</h2>
<div class='content'><p>Para capturar la entrada del usuario, puedes usar la API de Windows. Aquí hay un ejemplo básico de cómo capturar la entrada del teclado:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TFJFU1VMVCBDQUxMQkFDSyBXaW5kb3dQcm9jKEhXTkQgaHduZCwgVUlOVCB1TXNnLCBXUEFSQU0gd1BhcmFtLCBMUEFSQU0gbFBhcmFtKSB7CiAgICBzd2l0Y2ggKHVNc2cpIHsKICAgICAgICBjYXNlIFdNX0tFWURPV046CiAgICAgICAgICAgIGlmICh3UGFyYW0gPT0gVktfRVNDQVBFKSB7CiAgICAgICAgICAgICAgICBQb3N0UXVpdE1lc3NhZ2UoMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBXTV9ERVNUUk9ZOgogICAgICAgICAgICBQb3N0UXVpdE1lc3NhZ2UoMCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgIHJldHVybiBEZWZXaW5kb3dQcm9jKGh3bmQsIHVNc2csIHdQYXJhbSwgbFBhcmFtKTsKICAgIH0KICAgIHJldHVybiAwOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {
    switch (uMsg) {
        case WM_KEYDOWN:
            if (wParam == VK_ESCAPE) {
                PostQuitMessage(0);
            }
            break;
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        default:
            return DefWindowProc(hwnd, uMsg, wParam, lParam);
    }
    return 0;
}</pre></div><div class='content'></div><h1><ol start="4">
<li>Estructura Modular y Escalable</li>
</ol>
</h1>
<div class='content'><p>Para mantener el código organizado y escalable, es importante estructurar el motor de juego de manera modular. Aquí hay un ejemplo de cómo podrías organizar tu proyecto:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("L0dhbWVFbmdpbmUKICAgIC9Db3JlCiAgICAgICAgLSBHYW1lLmNwcAogICAgICAgIC0gR2FtZS5oCiAgICAvR3JhcGhpY3MKICAgICAgICAtIFJlbmRlcmVyLmNwcAogICAgICAgIC0gUmVuZGVyZXIuaAogICAgL1BoeXNpY3MKICAgICAgICAtIFBoeXNpY3NFbmdpbmUuY3BwCiAgICAgICAgLSBQaHlzaWNzRW5naW5lLmgKICAgIC9JbnB1dAogICAgICAgIC0gSW5wdXRNYW5hZ2VyLmNwcAogICAgICAgIC0gSW5wdXRNYW5hZ2VyLmgKICAgIC9BdWRpbwogICAgICAgIC0gQXVkaW9NYW5hZ2VyLmNwcAogICAgICAgIC0gQXVkaW9NYW5hZ2VyLmgKICAgIC9SZXNvdXJjZXMKICAgICAgICAtIFJlc291cmNlTWFuYWdlci5jcHAKICAgICAgICAtIFJlc291cmNlTWFuYWdlci5oCiAgICAvU2NlbmVzCiAgICAgICAgLSBTY2VuZS5jcHAKICAgICAgICAtIFNjZW5lLmg="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>/GameEngine
    /Core
        - Game.cpp
        - Game.h
    /Graphics
        - Renderer.cpp
        - Renderer.h
    /Physics
        - PhysicsEngine.cpp
        - PhysicsEngine.h
    /Input
        - InputManager.cpp
        - InputManager.h
    /Audio
        - AudioManager.cpp
        - AudioManager.h
    /Resources
        - ResourceManager.cpp
        - ResourceManager.h
    /Scenes
        - Scene.cpp
        - Scene.h</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En este módulo, hemos cubierto los conceptos básicos de cómo construir un motor de juego utilizando DirectX. Hemos visto cómo inicializar Direct3D, renderizar una escena, manejar el bucle de juego, e integrar sistemas de física y entrada. También hemos discutido la importancia de una estructura modular y escalable para mantener el código organizado.</p>
<p>Este es solo el comienzo de la construcción de un motor de juego completo. A medida que avances, puedes agregar más funcionalidades y optimizaciones para mejorar el rendimiento y la calidad de tu motor de juego. ¡Buena suerte y feliz programación!</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-04-ray-tracing' title="Trazado de Rayos">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-02-integrating-physics' title="Integrando Física">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
