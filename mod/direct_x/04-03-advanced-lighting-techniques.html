<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Técnicas Avanzadas de Iluminación</title>

    <link rel="alternate" href="https://campusempresa.com/mod/direct_x/04-03-advanced-lighting-techniques" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/direct_x/04-03-advanced-lighting-techniques" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/direct_x/04-03-advanced-lighting-techniques" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/direct_x/04-03-advanced-lighting-techniques" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/direct_x/04-03-advanced-lighting-techniques" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-lighting-and-materials' title="Iluminación y Materiales">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Técnicas Avanzadas de Iluminación</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-shadow-mapping' title="Mapeo de Sombras">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En este módulo, exploraremos técnicas avanzadas de iluminación que pueden llevar tus aplicaciones DirectX al siguiente nivel. La iluminación es un componente crucial en la creación de gráficos realistas y atractivos. Aprenderemos sobre diferentes métodos y algoritmos que se utilizan para simular la interacción de la luz con los objetos en una escena.</p>
</div><h1>Contenido</h1>
<div class='content'><ol>
<li><a href="#iluminación-diferida">Iluminación Diferida</a></li>
<li><a href="#iluminación-global">Iluminación Global</a></li>
<li><a href="#iluminación-basada-en-físicas-pbr">Iluminación Basada en Físicas (PBR)</a></li>
<li><a href="#iluminación-volumétrica">Iluminación Volumétrica</a></li>
<li><a href="#ejercicios-prácticos">Ejercicios Prácticos</a></li>
</ol>
</div><h1>Iluminación Diferida</h1>
<div class='content'><p>La iluminación diferida es una técnica que permite manejar múltiples luces de manera eficiente. En lugar de calcular la iluminación en el mismo paso que el renderizado de geometría, se separa en dos fases: la fase de geometría y la fase de iluminación.</p>
</div><h2>Fase de Geometría</h2>
<div class='content'><p>En esta fase, se renderiza la geometría de la escena y se almacenan varios atributos en diferentes buffers, conocidos como G-buffers. Estos atributos incluyen:</p>
<ul>
<li>Posición</li>
<li>Normal</li>
<li>Color difuso</li>
<li>Especular</li>
</ul>
</div><h2>Fase de Iluminación</h2>
<div class='content'><p>En la fase de iluminación, se utilizan los G-buffers para calcular la iluminación. Esto permite aplicar múltiples luces sin necesidad de renderizar la geometría de nuevo.</p>
</div><h2>Ejemplo de Código</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUHNldWRvLWPDs2RpZ28gcGFyYSBsYSBmYXNlIGRlIGdlb21ldHLDrWEKdm9pZCBSZW5kZXJHZW9tZXRyeVBhc3MoKSB7CiAgICAvLyBCaW5kIEctYnVmZmVycwogICAgQmluZEdCdWZmZXIoKTsKICAgIAogICAgLy8gUmVuZGVyaXphciBnZW9tZXRyw61hCiAgICBmb3IgKGF1dG8mIG9iamVjdCA6IHNjZW5lT2JqZWN0cykgewogICAgICAgIG9iamVjdC5SZW5kZXIoKTsKICAgIH0KfQoKLy8gUHNldWRvLWPDs2RpZ28gcGFyYSBsYSBmYXNlIGRlIGlsdW1pbmFjacOzbgp2b2lkIFJlbmRlckxpZ2h0aW5nUGFzcygpIHsKICAgIC8vIEJpbmQgRy1idWZmZXJzIGNvbW8gdGV4dHVyYXMKICAgIEJpbmRHQnVmZmVyVGV4dHVyZXMoKTsKICAgIAogICAgLy8gQ2FsY3VsYXIgaWx1bWluYWNpw7NuCiAgICBmb3IgKGF1dG8mIGxpZ2h0IDogc2NlbmVMaWdodHMpIHsKICAgICAgICBsaWdodC5DYWxjdWxhdGVMaWdodGluZygpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Pseudo-c&oacute;digo para la fase de geometr&iacute;a
void RenderGeometryPass() {
    // Bind G-buffers
    BindGBuffer();
    
    // Renderizar geometr&iacute;a
    for (auto&amp; object : sceneObjects) {
        object.Render();
    }
}

// Pseudo-c&oacute;digo para la fase de iluminaci&oacute;n
void RenderLightingPass() {
    // Bind G-buffers como texturas
    BindGBufferTextures();
    
    // Calcular iluminaci&oacute;n
    for (auto&amp; light : sceneLights) {
        light.CalculateLighting();
    }
}</pre></div><div class='content'></div><h1>Iluminación Global</h1>
<div class='content'><p>La iluminación global (GI) simula cómo la luz se refleja y refracta en una escena, proporcionando un realismo adicional. Existen varias técnicas para implementar GI, como el trazado de rayos y el mapeo de fotones.</p>
</div><h2>Trazado de Rayos</h2>
<div class='content'><p>El trazado de rayos es una técnica que simula el comportamiento de la luz al seguir su trayectoria a través de la escena. Es computacionalmente intensivo pero produce resultados muy realistas.</p>
</div><h2>Mapeo de Fotones</h2>
<div class='content'><p>El mapeo de fotones es una técnica que utiliza fotones para simular la iluminación indirecta. Los fotones se emiten desde las fuentes de luz y se almacenan en un mapa de fotones, que luego se utiliza para calcular la iluminación.</p>
</div><h1>Iluminación Basada en Físicas (PBR)</h1>
<div class='content'><p>La iluminación basada en físicas (PBR) utiliza modelos matemáticos que simulan cómo la luz interactúa con diferentes materiales de manera realista. PBR se basa en dos componentes principales: el modelo de iluminación y el modelo de material.</p>
</div><h2>Modelo de Iluminación</h2>
<div class='content'><p>El modelo de iluminación en PBR generalmente utiliza la ecuación de renderizado de Cook-Torrance, que incluye términos para la reflexión difusa y especular.</p>
</div><h2>Modelo de Material</h2>
<div class='content'><p>El modelo de material en PBR define cómo los diferentes materiales reflejan la luz. Los parámetros comunes incluyen:</p>
<ul>
<li>Albedo</li>
<li>Rugosidad</li>
<li>Metalicidad</li>
</ul>
</div><h2>Ejemplo de Código</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUHNldWRvLWPDs2RpZ28gcGFyYSBjYWxjdWxhciBpbHVtaW5hY2nDs24gUEJSCnZlYzMgQ2FsY3VsYXRlUEJSTGlnaHRpbmcodmVjMyBhbGJlZG8sIGZsb2F0IHJvdWdobmVzcywgZmxvYXQgbWV0YWxsaWMsIHZlYzMgbm9ybWFsLCB2ZWMzIHZpZXdEaXIsIHZlYzMgbGlnaHREaXIpIHsKICAgIC8vIENhbGN1bGFyIEJSREYKICAgIHZlYzMgRjAgPSBtaXgodmVjMygwLjA0KSwgYWxiZWRvLCBtZXRhbGxpYyk7CiAgICB2ZWMzIEYgPSBGcmVzbmVsU2NobGljayhtYXgoZG90KHZpZXdEaXIsIGhhbGZEaXIpLCAwLjApLCBGMCk7CiAgICBmbG9hdCBOREYgPSBEaXN0cmlidXRpb25HR1gobm9ybWFsLCBoYWxmRGlyLCByb3VnaG5lc3MpOwogICAgZmxvYXQgRyA9IEdlb21ldHJ5U21pdGgobm9ybWFsLCB2aWV3RGlyLCBsaWdodERpciwgcm91Z2huZXNzKTsKICAgIAogICAgdmVjMyBudW1lcmF0b3IgPSBOREYgKiBHICogRjsKICAgIGZsb2F0IGRlbm9taW5hdG9yID0gNC4wICogbWF4KGRvdChub3JtYWwsIHZpZXdEaXIpLCAwLjApICogbWF4KGRvdChub3JtYWwsIGxpZ2h0RGlyKSwgMC4wKTsKICAgIHZlYzMgc3BlY3VsYXIgPSBudW1lcmF0b3IgLyBtYXgoZGVub21pbmF0b3IsIDAuMDAxKTsKICAgIAogICAgLy8gQ29tcG9uZW50ZSBkaWZ1c2EKICAgIHZlYzMga0QgPSB2ZWMzKDEuMCkgLSBGOwogICAga0QgKj0gMS4wIC0gbWV0YWxsaWM7CiAgICAKICAgIC8vIElsdW1pbmFjacOzbiBmaW5hbAogICAgdmVjMyBpcnJhZGlhbmNlID0gbGlnaHRDb2xvciAqIG1heChkb3Qobm9ybWFsLCBsaWdodERpciksIDAuMCk7CiAgICB2ZWMzIGRpZmZ1c2UgPSBpcnJhZGlhbmNlICogYWxiZWRvIC8gUEk7CiAgICB2ZWMzIGFtYmllbnQgPSB2ZWMzKDAuMDMpICogYWxiZWRvICogYW87CiAgICAKICAgIHJldHVybiBhbWJpZW50ICsgKGtEICogZGlmZnVzZSArIHNwZWN1bGFyKSAqIGlycmFkaWFuY2U7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Pseudo-c&oacute;digo para calcular iluminaci&oacute;n PBR
vec3 CalculatePBRLighting(vec3 albedo, float roughness, float metallic, vec3 normal, vec3 viewDir, vec3 lightDir) {
    // Calcular BRDF
    vec3 F0 = mix(vec3(0.04), albedo, metallic);
    vec3 F = FresnelSchlick(max(dot(viewDir, halfDir), 0.0), F0);
    float NDF = DistributionGGX(normal, halfDir, roughness);
    float G = GeometrySmith(normal, viewDir, lightDir, roughness);
    
    vec3 numerator = NDF * G * F;
    float denominator = 4.0 * max(dot(normal, viewDir), 0.0) * max(dot(normal, lightDir), 0.0);
    vec3 specular = numerator / max(denominator, 0.001);
    
    // Componente difusa
    vec3 kD = vec3(1.0) - F;
    kD *= 1.0 - metallic;
    
    // Iluminaci&oacute;n final
    vec3 irradiance = lightColor * max(dot(normal, lightDir), 0.0);
    vec3 diffuse = irradiance * albedo / PI;
    vec3 ambient = vec3(0.03) * albedo * ao;
    
    return ambient + (kD * diffuse + specular) * irradiance;
}</pre></div><div class='content'></div><h1>Iluminación Volumétrica</h1>
<div class='content'><p>La iluminación volumétrica simula cómo la luz interactúa con los medios volumétricos, como la niebla o el humo. Esto añade un nivel adicional de realismo a la escena.</p>
</div><h2>Ejemplo de Código</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUHNldWRvLWPDs2RpZ28gcGFyYSBjYWxjdWxhciBpbHVtaW5hY2nDs24gdm9sdW3DqXRyaWNhCnZvaWQgUmVuZGVyVm9sdW1ldHJpY0xpZ2h0aW5nKCkgewogICAgLy8gQ29uZmlndXJhciBwYXLDoW1ldHJvcyBkZSBuaWVibGEKICAgIGZsb2F0IGZvZ0RlbnNpdHkgPSAwLjA1OwogICAgdmVjMyBmb2dDb2xvciA9IHZlYzMoMC41LCAwLjUsIDAuNSk7CiAgICAKICAgIC8vIENhbGN1bGFyIGZhY3RvciBkZSBuaWVibGEKICAgIGZsb2F0IGRpc3RhbmNlID0gbGVuZ3RoKGZyYWdtZW50UG9zaXRpb24gLSBjYW1lcmFQb3NpdGlvbik7CiAgICBmbG9hdCBmb2dGYWN0b3IgPSBleHAoLWZvZ0RlbnNpdHkgKiBkaXN0YW5jZSk7CiAgICAKICAgIC8vIE1lemNsYXIgY29sb3IgZGUgbmllYmxhIGNvbiBjb2xvciBvcmlnaW5hbAogICAgdmVjMyBmaW5hbENvbG9yID0gbWl4KGZvZ0NvbG9yLCBvcmlnaW5hbENvbG9yLCBmb2dGYWN0b3IpOwogICAgCiAgICAvLyBSZW5kZXJpemFyIGZyYWdtZW50bwogICAgb3V0cHV0Q29sb3IgPSBmaW5hbENvbG9yOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Pseudo-c&oacute;digo para calcular iluminaci&oacute;n volum&eacute;trica
void RenderVolumetricLighting() {
    // Configurar par&aacute;metros de niebla
    float fogDensity = 0.05;
    vec3 fogColor = vec3(0.5, 0.5, 0.5);
    
    // Calcular factor de niebla
    float distance = length(fragmentPosition - cameraPosition);
    float fogFactor = exp(-fogDensity * distance);
    
    // Mezclar color de niebla con color original
    vec3 finalColor = mix(fogColor, originalColor, fogFactor);
    
    // Renderizar fragmento
    outputColor = finalColor;
}</pre></div><div class='content'></div><h1>Ejercicios Prácticos</h1>
<div class='content'></div><h2>Ejercicio 1: Implementar Iluminación Diferida</h2>
<div class='content'><p><strong>Objetivo:</strong> Implementar un sistema de iluminación diferida en tu aplicación DirectX.</p>
<p><strong>Pasos:</strong></p>
<ol>
<li>Crear y configurar los G-buffers.</li>
<li>Implementar la fase de geometría para almacenar los atributos en los G-buffers.</li>
<li>Implementar la fase de iluminación utilizando los datos de los G-buffers.</li>
</ol>
</div><h2>Ejercicio 2: Implementar Iluminación PBR</h2>
<div class='content'><p><strong>Objetivo:</strong> Implementar un modelo de iluminación PBR en tu aplicación DirectX.</p>
<p><strong>Pasos:</strong></p>
<ol>
<li>Definir los parámetros del material (albedo, rugosidad, metalicidad).</li>
<li>Implementar la ecuación de iluminación de Cook-Torrance.</li>
<li>Aplicar la iluminación PBR a los objetos de la escena.</li>
</ol>
</div><h2>Ejercicio 3: Implementar Iluminación Volumétrica</h2>
<div class='content'><p><strong>Objetivo:</strong> Implementar un sistema de iluminación volumétrica en tu aplicación DirectX.</p>
<p><strong>Pasos:</strong></p>
<ol>
<li>Configurar los parámetros de niebla (densidad, color).</li>
<li>Calcular el factor de niebla basado en la distancia.</li>
<li>Mezclar el color de la niebla con el color original del fragmento.</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, hemos explorado varias técnicas avanzadas de iluminación que pueden mejorar significativamente la calidad visual de tus aplicaciones DirectX. Desde la iluminación diferida hasta la iluminación volumétrica, cada técnica tiene sus propias ventajas y desafíos. Asegúrate de practicar los ejercicios para consolidar tu comprensión y estar preparado para aplicar estas técnicas en proyectos más complejos. En el próximo módulo, nos adentraremos en el mapeo de sombras, una técnica esencial para añadir profundidad y realismo a tus escenas.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-lighting-and-materials' title="Iluminación y Materiales">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-shadow-mapping' title="Mapeo de Sombras">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
