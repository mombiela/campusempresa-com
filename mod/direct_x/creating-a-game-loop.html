<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creando un Bucle de Juego</title>

    <link rel="alternate" href="https://campusempresa.com/mod/direct_x/creating-a-game-loop" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/direct_x/creating-a-game-loop" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/direct_x/creating-a-game-loop" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/direct_x/creating-a-game-loop" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/direct_x/creating-a-game-loop" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-game-development-with-directx'>&#x25C4;Introducción al Desarrollo de Juegos con DirectX</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creando un Bucle de Juego</a>
	</div>
	<div class='col-4 text-end'>
					<a href='handling-input'>Manejo de Entrada &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>Un bucle de juego es el núcleo de cualquier motor de juego. Continuamente actualiza el estado del juego y renderiza el mundo del juego. En esta sección, cubriremos cómo crear un bucle de juego usando DirectX, comenzando desde lo básico y avanzando hacia conceptos más avanzados.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ul>
<li><strong>Bucle de Juego</strong>: Un ciclo que maneja las actualizaciones del juego y el renderizado.</li>
<li><strong>Tasa de Fotogramas</strong>: La frecuencia con la que se ejecuta el bucle de juego, típicamente medida en fotogramas por segundo (FPS).</li>
<li><strong>Tiempo Delta</strong>: La diferencia de tiempo entre el fotograma actual y el anterior, utilizada para asegurar movimientos y animaciones suaves.</li>
</ul>
</div><h1>Estructura Básica del Bucle de Juego</h1>
<div class='content'><p>Un bucle de juego básico consta de tres partes principales:</p>
<ol>
<li><strong>Inicialización</strong>: Configuración del entorno del juego.</li>
<li><strong>Actualización</strong>: Actualización del estado del juego.</li>
<li><strong>Renderizado</strong>: Dibujo del mundo del juego.</li>
</ol>
</div><h2>Inicialización</h2>
<div class='content'><p>Antes de entrar en el bucle de juego, necesitas inicializar DirectX y configurar los recursos necesarios.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pY2lhbGl6YXIgRGlyZWN0WApib29sIEluaXRpYWxpemVEaXJlY3RYKEhXTkQgaHduZCkgewogICAgLy8gQ3JlYXIgZWwgZGlzcG9zaXRpdm8geSBlbCBjb250ZXh0byBkZWwgZGlzcG9zaXRpdm8KICAgIEhSRVNVTFQgaHIgPSBEM0QxMUNyZWF0ZURldmljZSgKICAgICAgICBudWxscHRyLCAgICAgICAgICAgICAgICAgICAgLy8gQWRhcHRhZG9yIHByZWRldGVybWluYWRvCiAgICAgICAgRDNEX0RSSVZFUl9UWVBFX0hBUkRXQVJFLCAgIC8vIENvbnRyb2xhZG9yIGRlIGhhcmR3YXJlCiAgICAgICAgbnVsbHB0ciwgICAgICAgICAgICAgICAgICAgIC8vIFNpbiBkaXNwb3NpdGl2byBkZSBzb2Z0d2FyZQogICAgICAgIDAsICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGbGFncwogICAgICAgIG51bGxwdHIsIDAsICAgICAgICAgICAgICAgICAvLyBOaXZlbGVzIGRlIGNhcmFjdGVyw61zdGljYXMKICAgICAgICBEM0QxMV9TREtfVkVSU0lPTiwgICAgICAgICAgLy8gVmVyc2nDs24gZGVsIFNESwogICAgICAgICZkZXZpY2UsICAgICAgICAgICAgICAgICAgICAvLyBEaXNwb3NpdGl2bwogICAgICAgIG51bGxwdHIsICAgICAgICAgICAgICAgICAgICAvLyBOaXZlbCBkZSBjYXJhY3RlcsOtc3RpY2FzCiAgICAgICAgJmRldmljZUNvbnRleHQgICAgICAgICAgICAgIC8vIENvbnRleHRvIGRlbCBkaXNwb3NpdGl2bwogICAgKTsKCiAgICBpZiAoRkFJTEVEKGhyKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICAvLyBDw7NkaWdvIGRlIGNvbmZpZ3VyYWNpw7NuIGFkaWNpb25hbC4uLgoKICAgIHJldHVybiB0cnVlOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Inicializar DirectX
bool InitializeDirectX(HWND hwnd) {
    // Crear el dispositivo y el contexto del dispositivo
    HRESULT hr = D3D11CreateDevice(
        nullptr,                    // Adaptador predeterminado
        D3D_DRIVER_TYPE_HARDWARE,   // Controlador de hardware
        nullptr,                    // Sin dispositivo de software
        0,                          // Flags
        nullptr, 0,                 // Niveles de caracter&iacute;sticas
        D3D11_SDK_VERSION,          // Versi&oacute;n del SDK
        &amp;device,                    // Dispositivo
        nullptr,                    // Nivel de caracter&iacute;sticas
        &amp;deviceContext              // Contexto del dispositivo
    );

    if (FAILED(hr)) {
        return false;
    }

    // C&oacute;digo de configuraci&oacute;n adicional...

    return true;
}</pre></div><div class='content'></div><h2>Actualización</h2>
<div class='content'><p>La función de actualización maneja toda la lógica del juego, como mover personajes, verificar colisiones y actualizar el estado del juego.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBVcGRhdGUoZmxvYXQgZGVsdGFUaW1lKSB7CiAgICAvLyBFamVtcGxvOiBNb3ZlciB1biBwZXJzb25hamUKICAgIGNoYXJhY3RlclBvc2l0aW9uLnggKz0gY2hhcmFjdGVyU3BlZWQgKiBkZWx0YVRpbWU7Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void Update(float deltaTime) {
    // Ejemplo: Mover un personaje
    characterPosition.x += characterSpeed * deltaTime;
}</pre></div><div class='content'></div><h2>Renderizado</h2>
<div class='content'><p>La función de renderizado dibuja el mundo del juego en la pantalla.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBSZW5kZXIoKSB7CiAgICAvLyBMaW1waWFyIGVsIGJ1ZmZlciBkZSBmb25kbwogICAgZmxvYXQgY2xlYXJDb2xvcltdID0geyAwLjBmLCAwLjJmLCAwLjRmLCAxLjBmIH07CiAgICBkZXZpY2VDb250ZXh0LT5DbGVhclJlbmRlclRhcmdldFZpZXcocmVuZGVyVGFyZ2V0VmlldywgY2xlYXJDb2xvcik7CgogICAgLy8gRGlidWphciBvYmpldG9zIGRlbCBqdWVnbwogICAgLy8gRWplbXBsbzogRGlidWphciB1biBwZXJzb25hamUKICAgIERyYXdDaGFyYWN0ZXIoY2hhcmFjdGVyUG9zaXRpb24pOwoKICAgIC8vIFByZXNlbnRhciBlbCBidWZmZXIgZGUgZm9uZG8gZW4gbGEgcGFudGFsbGEKICAgIHN3YXBDaGFpbi0+UHJlc2VudCgxLCAwKTsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void Render() {
    // Limpiar el buffer de fondo
    float clearColor[] = { 0.0f, 0.2f, 0.4f, 1.0f };
    deviceContext-&gt;ClearRenderTargetView(renderTargetView, clearColor);

    // Dibujar objetos del juego
    // Ejemplo: Dibujar un personaje
    DrawCharacter(characterPosition);

    // Presentar el buffer de fondo en la pantalla
    swapChain-&gt;Present(1, 0);
}</pre></div><div class='content'></div><h1>Implementando el Bucle de Juego</h1>
<div class='content'><p>Ahora que tenemos los componentes básicos, pongámoslos juntos en un bucle de juego.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBHYW1lTG9vcCgpIHsKICAgIE1TRyBtc2cgPSB7IDAgfTsKICAgIHdoaWxlIChtc2cubWVzc2FnZSAhPSBXTV9RVUlUKSB7CiAgICAgICAgaWYgKFBlZWtNZXNzYWdlKCZtc2csIG51bGxwdHIsIDAsIDAsIFBNX1JFTU9WRSkpIHsKICAgICAgICAgICAgVHJhbnNsYXRlTWVzc2FnZSgmbXNnKTsKICAgICAgICAgICAgRGlzcGF0Y2hNZXNzYWdlKCZtc2cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIENhbGN1bGFyIGVsIHRpZW1wbyBkZWx0YQogICAgICAgICAgICBzdGF0aWMgRFdPUkQgcHJldlRpbWUgPSB0aW1lR2V0VGltZSgpOwogICAgICAgICAgICBEV09SRCBjdXJyVGltZSA9IHRpbWVHZXRUaW1lKCk7CiAgICAgICAgICAgIGZsb2F0IGRlbHRhVGltZSA9IChjdXJyVGltZSAtIHByZXZUaW1lKSAvIDEwMDAuMGY7CiAgICAgICAgICAgIHByZXZUaW1lID0gY3VyclRpbWU7CgogICAgICAgICAgICAvLyBBY3R1YWxpemFyIHkgcmVuZGVyaXphcgogICAgICAgICAgICBVcGRhdGUoZGVsdGFUaW1lKTsKICAgICAgICAgICAgUmVuZGVyKCk7CiAgICAgICAgfQogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void GameLoop() {
    MSG msg = { 0 };
    while (msg.message != WM_QUIT) {
        if (PeekMessage(&amp;msg, nullptr, 0, 0, PM_REMOVE)) {
            TranslateMessage(&amp;msg);
            DispatchMessage(&amp;msg);
        } else {
            // Calcular el tiempo delta
            static DWORD prevTime = timeGetTime();
            DWORD currTime = timeGetTime();
            float deltaTime = (currTime - prevTime) / 1000.0f;
            prevTime = currTime;

            // Actualizar y renderizar
            Update(deltaTime);
            Render();
        }
    }
}</pre></div><div class='content'></div><h1>Temas Avanzados</h1>
<h2>Control de la Tasa de Fotogramas</h2>
<div class='content'><p>Para asegurar una tasa de fotogramas consistente, puedes implementar el control de la tasa de fotogramas.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgaW50IFRBUkdFVF9GUFMgPSA2MDsKY29uc3QgZmxvYXQgVEFSR0VUX0ZSQU1FX1RJTUUgPSAxLjBmIC8gVEFSR0VUX0ZQUzsKCnZvaWQgR2FtZUxvb3AoKSB7CiAgICBNU0cgbXNnID0geyAwIH07CiAgICB3aGlsZSAobXNnLm1lc3NhZ2UgIT0gV01fUVVJVCkgewogICAgICAgIGlmIChQZWVrTWVzc2FnZSgmbXNnLCBudWxscHRyLCAwLCAwLCBQTV9SRU1PVkUpKSB7CiAgICAgICAgICAgIFRyYW5zbGF0ZU1lc3NhZ2UoJm1zZyk7CiAgICAgICAgICAgIERpc3BhdGNoTWVzc2FnZSgmbXNnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBDYWxjdWxhciBlbCB0aWVtcG8gZGVsdGEKICAgICAgICAgICAgc3RhdGljIERXT1JEIHByZXZUaW1lID0gdGltZUdldFRpbWUoKTsKICAgICAgICAgICAgRFdPUkQgY3VyclRpbWUgPSB0aW1lR2V0VGltZSgpOwogICAgICAgICAgICBmbG9hdCBkZWx0YVRpbWUgPSAoY3VyclRpbWUgLSBwcmV2VGltZSkgLyAxMDAwLjBmOwoKICAgICAgICAgICAgaWYgKGRlbHRhVGltZSA+PSBUQVJHRVRfRlJBTUVfVElNRSkgewogICAgICAgICAgICAgICAgcHJldlRpbWUgPSBjdXJyVGltZTsKCiAgICAgICAgICAgICAgICAvLyBBY3R1YWxpemFyIHkgcmVuZGVyaXphcgogICAgICAgICAgICAgICAgVXBkYXRlKGRlbHRhVGltZSk7CiAgICAgICAgICAgICAgICBSZW5kZXIoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const int TARGET_FPS = 60;
const float TARGET_FRAME_TIME = 1.0f / TARGET_FPS;

void GameLoop() {
    MSG msg = { 0 };
    while (msg.message != WM_QUIT) {
        if (PeekMessage(&amp;msg, nullptr, 0, 0, PM_REMOVE)) {
            TranslateMessage(&amp;msg);
            DispatchMessage(&amp;msg);
        } else {
            // Calcular el tiempo delta
            static DWORD prevTime = timeGetTime();
            DWORD currTime = timeGetTime();
            float deltaTime = (currTime - prevTime) / 1000.0f;

            if (deltaTime &gt;= TARGET_FRAME_TIME) {
                prevTime = currTime;

                // Actualizar y renderizar
                Update(deltaTime);
                Render();
            }
        }
    }
}</pre></div><div class='content'></div><h2>Manejo de Tasa de Fotogramas Variable</h2>
<div class='content'><p>Para manejar tasas de fotogramas variables, puedes usar un paso de tiempo fijo para las actualizaciones e interpolar el renderizado.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZmxvYXQgRklYRURfVElNRV9TVEVQID0gMC4wMTZmOyAvLyA2MCBGUFMKCnZvaWQgR2FtZUxvb3AoKSB7CiAgICBNU0cgbXNnID0geyAwIH07CiAgICBmbG9hdCBhY2N1bXVsYXRvciA9IDAuMGY7CgogICAgd2hpbGUgKG1zZy5tZXNzYWdlICE9IFdNX1FVSVQpIHsKICAgICAgICBpZiAoUGVla01lc3NhZ2UoJm1zZywgbnVsbHB0ciwgMCwgMCwgUE1fUkVNT1ZFKSkgewogICAgICAgICAgICBUcmFuc2xhdGVNZXNzYWdlKCZtc2cpOwogICAgICAgICAgICBEaXNwYXRjaE1lc3NhZ2UoJm1zZyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gQ2FsY3VsYXIgZWwgdGllbXBvIGRlbHRhCiAgICAgICAgICAgIHN0YXRpYyBEV09SRCBwcmV2VGltZSA9IHRpbWVHZXRUaW1lKCk7CiAgICAgICAgICAgIERXT1JEIGN1cnJUaW1lID0gdGltZUdldFRpbWUoKTsKICAgICAgICAgICAgZmxvYXQgZGVsdGFUaW1lID0gKGN1cnJUaW1lIC0gcHJldlRpbWUpIC8gMTAwMC4wZjsKICAgICAgICAgICAgcHJldlRpbWUgPSBjdXJyVGltZTsKCiAgICAgICAgICAgIGFjY3VtdWxhdG9yICs9IGRlbHRhVGltZTsKCiAgICAgICAgICAgIHdoaWxlIChhY2N1bXVsYXRvciA+PSBGSVhFRF9USU1FX1NURVApIHsKICAgICAgICAgICAgICAgIFVwZGF0ZShGSVhFRF9USU1FX1NURVApOwogICAgICAgICAgICAgICAgYWNjdW11bGF0b3IgLT0gRklYRURfVElNRV9TVEVQOwogICAgICAgICAgICB9CgogICAgICAgICAgICBSZW5kZXIoKTsKICAgICAgICB9CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const float FIXED_TIME_STEP = 0.016f; // 60 FPS

void GameLoop() {
    MSG msg = { 0 };
    float accumulator = 0.0f;

    while (msg.message != WM_QUIT) {
        if (PeekMessage(&amp;msg, nullptr, 0, 0, PM_REMOVE)) {
            TranslateMessage(&amp;msg);
            DispatchMessage(&amp;msg);
        } else {
            // Calcular el tiempo delta
            static DWORD prevTime = timeGetTime();
            DWORD currTime = timeGetTime();
            float deltaTime = (currTime - prevTime) / 1000.0f;
            prevTime = currTime;

            accumulator += deltaTime;

            while (accumulator &gt;= FIXED_TIME_STEP) {
                Update(FIXED_TIME_STEP);
                accumulator -= FIXED_TIME_STEP;
            }

            Render();
        }
    }
}</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Crear un bucle de juego es fundamental para el desarrollo de juegos. Al entender e implementar un bucle de juego, puedes controlar el flujo de tu juego, asegurando actualizaciones y renderizados suaves. A medida que avances, puedes incorporar técnicas más sofisticadas como el control de la tasa de fotogramas y el manejo de tasas de fotogramas variables para mejorar el rendimiento y la experiencia del usuario en tu juego.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-game-development-with-directx'>&#x25C4;Introducción al Desarrollo de Juegos con DirectX</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creando un Bucle de Juego</a>
	</div>
	<div class='col-4 text-end'>
					<a href='handling-input'>Manejo de Entrada &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
