<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firewall y Seguridad</title>

    <link rel="alternate" href="https://campusempresa.com/mod/linux/06-02-firewall-and-security" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/linux/06-02-tallafocs-i-seguretat" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/linux/06-02-firewall-and-security" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/linux/06-02-firewall-and-security" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/linux/06-02-firewall-and-security" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-01-network-configuration' title="Configuración de Redes">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Firewall y Seguridad</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-03-ssh-and-remote-access' title="SSH y Acceso Remoto">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En este módulo, aprenderás sobre la configuración y gestión de firewalls en sistemas Linux, así como las mejores prácticas de seguridad para proteger tu sistema. Los firewalls son una parte esencial de la seguridad de la red, ya que controlan el tráfico de red entrante y saliente basado en reglas de seguridad predefinidas.</p>
</div><h1>1. Introducción a los Firewalls</h1>
<div class='content'></div><h2>¿Qué es un Firewall?</h2>
<div class='content'><p>Un firewall es un sistema de seguridad de red que monitorea y controla el tráfico de red entrante y saliente basado en reglas de seguridad predefinidas. Los firewalls pueden ser hardware, software o una combinación de ambos.</p>
</div><h2>Tipos de Firewalls</h2>
<div class='content'><ul>
<li><strong>Firewalls de Red</strong>: Protegen redes enteras y se implementan en el perímetro de la red.</li>
<li><strong>Firewalls de Host</strong>: Protegen un solo dispositivo y se implementan en el sistema operativo del dispositivo.</li>
</ul>
</div><h1>2. Firewalls en Linux</h1>
<div class='content'></div><h2>iptables</h2>
<div class='content'><p><code>iptables</code> es una herramienta de línea de comandos utilizada para configurar las reglas del firewall en sistemas Linux. Es parte del paquete de software <code>netfilter</code>.</p>
<h4>Comandos Básicos de iptables</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBMaXN0YXIgdG9kYXMgbGFzIHJlZ2xhcwpzdWRvIGlwdGFibGVzIC1MCgojIEHDsWFkaXIgdW5hIHJlZ2xhIHBhcmEgcGVybWl0aXIgZWwgdHLDoWZpY28gSFRUUCBlbnRyYW50ZQpzdWRvIGlwdGFibGVzIC1BIElOUFVUIC1wIHRjcCAtLWRwb3J0IDgwIC1qIEFDQ0VQVAoKIyBBw7FhZGlyIHVuYSByZWdsYSBwYXJhIGJsb3F1ZWFyIGVsIHRyw6FmaWNvIFNTSCBlbnRyYW50ZQpzdWRvIGlwdGFibGVzIC1BIElOUFVUIC1wIHRjcCAtLWRwb3J0IDIyIC1qIERST1AKCiMgR3VhcmRhciBsYXMgcmVnbGFzCnN1ZG8gaXB0YWJsZXMtc2F2ZSA+IC9ldGMvaXB0YWJsZXMvcnVsZXMudjQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Listar todas las reglas
sudo iptables -L

# A&ntilde;adir una regla para permitir el tr&aacute;fico HTTP entrante
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT

# A&ntilde;adir una regla para bloquear el tr&aacute;fico SSH entrante
sudo iptables -A INPUT -p tcp --dport 22 -j DROP

# Guardar las reglas
sudo iptables-save &gt; /etc/iptables/rules.v4</pre></div><div class='content'></div><h2>ufw (Uncomplicated Firewall)</h2>
<div class='content'><p><code>ufw</code> es una interfaz simplificada para <code>iptables</code>, diseñada para facilitar la configuración del firewall.</p>
<h4>Comandos Básicos de ufw</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBIYWJpbGl0YXIgdWZ3CnN1ZG8gdWZ3IGVuYWJsZQoKIyBQZXJtaXRpciBlbCB0csOhZmljbyBIVFRQCnN1ZG8gdWZ3IGFsbG93IDgwL3RjcAoKIyBCbG9xdWVhciBlbCB0csOhZmljbyBTU0gKc3VkbyB1ZncgZGVueSAyMi90Y3AKCiMgVmVyIGVsIGVzdGFkbyB5IGxhcyByZWdsYXMgYWN0dWFsZXMKc3VkbyB1Zncgc3RhdHVz"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Habilitar ufw
sudo ufw enable

# Permitir el tr&aacute;fico HTTP
sudo ufw allow 80/tcp

# Bloquear el tr&aacute;fico SSH
sudo ufw deny 22/tcp

# Ver el estado y las reglas actuales
sudo ufw status</pre></div><div class='content'></div><h1>3. Configuración de Firewalls</h1>
<div class='content'></div><h2>Configuración Básica de iptables</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBMaW1waWFyIHRvZGFzIGxhcyByZWdsYXMgZXhpc3RlbnRlcwpzdWRvIGlwdGFibGVzIC1GCgojIEVzdGFibGVjZXIgcG9sw610aWNhcyBwb3IgZGVmZWN0bwpzdWRvIGlwdGFibGVzIC1QIElOUFVUIERST1AKc3VkbyBpcHRhYmxlcyAtUCBGT1JXQVJEIERST1AKc3VkbyBpcHRhYmxlcyAtUCBPVVRQVVQgQUNDRVBUCgojIFBlcm1pdGlyIHRyw6FmaWNvIGVudHJhbnRlIHJlbGFjaW9uYWRvIHkgZXN0YWJsZWNpZG8Kc3VkbyBpcHRhYmxlcyAtQSBJTlBVVCAtbSBzdGF0ZSAtLXN0YXRlIEVTVEFCTElTSEVELFJFTEFURUQgLWogQUNDRVBUCgojIFBlcm1pdGlyIHRyw6FmaWNvIGVudHJhbnRlIGVuIGVsIHB1ZXJ0byAyMiAoU1NIKQpzdWRvIGlwdGFibGVzIC1BIElOUFVUIC1wIHRjcCAtLWRwb3J0IDIyIC1qIEFDQ0VQVAoKIyBQZXJtaXRpciB0csOhZmljbyBlbnRyYW50ZSBlbiBlbCBwdWVydG8gODAgKEhUVFApCnN1ZG8gaXB0YWJsZXMgLUEgSU5QVVQgLXAgdGNwIC0tZHBvcnQgODAgLWogQUNDRVBUCgojIEd1YXJkYXIgbGFzIHJlZ2xhcwpzdWRvIGlwdGFibGVzLXNhdmUgPiAvZXRjL2lwdGFibGVzL3J1bGVzLnY0"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Limpiar todas las reglas existentes
sudo iptables -F

# Establecer pol&iacute;ticas por defecto
sudo iptables -P INPUT DROP
sudo iptables -P FORWARD DROP
sudo iptables -P OUTPUT ACCEPT

# Permitir tr&aacute;fico entrante relacionado y establecido
sudo iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# Permitir tr&aacute;fico entrante en el puerto 22 (SSH)
sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT

# Permitir tr&aacute;fico entrante en el puerto 80 (HTTP)
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT

# Guardar las reglas
sudo iptables-save &gt; /etc/iptables/rules.v4</pre></div><div class='content'></div><h2>Configuración Básica de ufw</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBIYWJpbGl0YXIgdWZ3CnN1ZG8gdWZ3IGVuYWJsZQoKIyBFc3RhYmxlY2VyIHBvbMOtdGljYXMgcG9yIGRlZmVjdG8Kc3VkbyB1ZncgZGVmYXVsdCBkZW55IGluY29taW5nCnN1ZG8gdWZ3IGRlZmF1bHQgYWxsb3cgb3V0Z29pbmcKCiMgUGVybWl0aXIgdHLDoWZpY28gZW50cmFudGUgZW4gZWwgcHVlcnRvIDIyIChTU0gpCnN1ZG8gdWZ3IGFsbG93IDIyL3RjcAoKIyBQZXJtaXRpciB0csOhZmljbyBlbnRyYW50ZSBlbiBlbCBwdWVydG8gODAgKEhUVFApCnN1ZG8gdWZ3IGFsbG93IDgwL3RjcAoKIyBWZXIgZWwgZXN0YWRvIHkgbGFzIHJlZ2xhcyBhY3R1YWxlcwpzdWRvIHVmdyBzdGF0dXM="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Habilitar ufw
sudo ufw enable

# Establecer pol&iacute;ticas por defecto
sudo ufw default deny incoming
sudo ufw default allow outgoing

# Permitir tr&aacute;fico entrante en el puerto 22 (SSH)
sudo ufw allow 22/tcp

# Permitir tr&aacute;fico entrante en el puerto 80 (HTTP)
sudo ufw allow 80/tcp

# Ver el estado y las reglas actuales
sudo ufw status</pre></div><div class='content'></div><h1>4. Seguridad Adicional</h1>
<div class='content'></div><h2>Fail2ban</h2>
<div class='content'><p><code>fail2ban</code> es una herramienta que monitorea los archivos de registro en busca de intentos de intrusión y bloquea las direcciones IP que muestran comportamientos maliciosos.</p>
<h4>Instalación y Configuración de fail2ban</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBJbnN0YWxhciBmYWlsMmJhbgpzdWRvIGFwdC1nZXQgaW5zdGFsbCBmYWlsMmJhbgoKIyBDb25maWd1cmFyIGZhaWwyYmFuCnN1ZG8gY3AgL2V0Yy9mYWlsMmJhbi9qYWlsLmNvbmYgL2V0Yy9mYWlsMmJhbi9qYWlsLmxvY2FsCnN1ZG8gbmFubyAvZXRjL2ZhaWwyYmFuL2phaWwubG9jYWwKCiMgQcOxYWRpciBsYSBjb25maWd1cmFjacOzbiBwYXJhIHByb3RlZ2VyIFNTSApbc3NoZF0KZW5hYmxlZCA9IHRydWUKcG9ydCA9IDIyCmZpbHRlciA9IHNzaGQKbG9ncGF0aCA9IC92YXIvbG9nL2F1dGgubG9nCm1heHJldHJ5ID0gNQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Instalar fail2ban
sudo apt-get install fail2ban

# Configurar fail2ban
sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local
sudo nano /etc/fail2ban/jail.local

# A&ntilde;adir la configuraci&oacute;n para proteger SSH
[sshd]
enabled = true
port = 22
filter = sshd
logpath = /var/log/auth.log
maxretry = 5</pre></div><div class='content'></div><h2>SELinux y AppArmor</h2>
<div class='content'><p>SELinux y AppArmor son sistemas de control de acceso obligatorio que proporcionan una capa adicional de seguridad al restringir las capacidades de los procesos.</p>
<h4>Habilitar y Configurar SELinux</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBWZXJpZmljYXIgZWwgZXN0YWRvIGRlIFNFTGludXgKc2VzdGF0dXMKCiMgSGFiaWxpdGFyIFNFTGludXgKc3VkbyBzZXRlbmZvcmNlIDEKCiMgQ29uZmlndXJhciBTRUxpbnV4IGVuIG1vZG8gcGVybWlzaXZvCnN1ZG8gc2V0ZW5mb3JjZSAw"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Verificar el estado de SELinux
sestatus

# Habilitar SELinux
sudo setenforce 1

# Configurar SELinux en modo permisivo
sudo setenforce 0</pre></div><div class='content'><h4>Habilitar y Configurar AppArmor</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBWZXJpZmljYXIgZWwgZXN0YWRvIGRlIEFwcEFybW9yCnN1ZG8gYWEtc3RhdHVzCgojIEhhYmlsaXRhciBBcHBBcm1vcgpzdWRvIHN5c3RlbWN0bCBlbmFibGUgYXBwYXJtb3IKc3VkbyBzeXN0ZW1jdGwgc3RhcnQgYXBwYXJtb3IKCiMgQ29uZmlndXJhciBwZXJmaWxlcyBkZSBBcHBBcm1vcgpzdWRvIGFhLWNvbXBsYWluIC9ldGMvYXBwYXJtb3IuZC91c3Iuc2Jpbi5teXNxbGQKc3VkbyBhYS1lbmZvcmNlIC9ldGMvYXBwYXJtb3IuZC91c3Iuc2Jpbi5teXNxbGQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Verificar el estado de AppArmor
sudo aa-status

# Habilitar AppArmor
sudo systemctl enable apparmor
sudo systemctl start apparmor

# Configurar perfiles de AppArmor
sudo aa-complain /etc/apparmor.d/usr.sbin.mysqld
sudo aa-enforce /etc/apparmor.d/usr.sbin.mysqld</pre></div><div class='content'></div><h1>5. Ejercicios Prácticos</h1>
<div class='content'></div><h2>Ejercicio 1: Configuración de iptables</h2>
<div class='content'><ol>
<li>Limpia todas las reglas existentes en <code>iptables</code>.</li>
<li>Establece políticas por defecto para denegar todo el tráfico entrante y permitir todo el tráfico saliente.</li>
<li>Permite el tráfico entrante en los puertos 22 (SSH) y 80 (HTTP).</li>
<li>Guarda las reglas.</li>
</ol>
<h4>Solución</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBpcHRhYmxlcyAtRgpzdWRvIGlwdGFibGVzIC1QIElOUFVUIERST1AKc3VkbyBpcHRhYmxlcyAtUCBGT1JXQVJEIERST1AKc3VkbyBpcHRhYmxlcyAtUCBPVVRQVVQgQUNDRVBUCnN1ZG8gaXB0YWJsZXMgLUEgSU5QVVQgLW0gc3RhdGUgLS1zdGF0ZSBFU1RBQkxJU0hFRCxSRUxBVEVEIC1qIEFDQ0VQVApzdWRvIGlwdGFibGVzIC1BIElOUFVUIC1wIHRjcCAtLWRwb3J0IDIyIC1qIEFDQ0VQVApzdWRvIGlwdGFibGVzIC1BIElOUFVUIC1wIHRjcCAtLWRwb3J0IDgwIC1qIEFDQ0VQVApzdWRvIGlwdGFibGVzLXNhdmUgPiAvZXRjL2lwdGFibGVzL3J1bGVzLnY0"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo iptables -F
sudo iptables -P INPUT DROP
sudo iptables -P FORWARD DROP
sudo iptables -P OUTPUT ACCEPT
sudo iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 22 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT
sudo iptables-save &gt; /etc/iptables/rules.v4</pre></div><div class='content'></div><h2>Ejercicio 2: Configuración de ufw</h2>
<div class='content'><ol>
<li>Habilita <code>ufw</code>.</li>
<li>Establece políticas por defecto para denegar todo el tráfico entrante y permitir todo el tráfico saliente.</li>
<li>Permite el tráfico entrante en los puertos 22 (SSH) y 80 (HTTP).</li>
<li>Verifica el estado y las reglas actuales.</li>
</ol>
<h4>Solución</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyB1ZncgZW5hYmxlCnN1ZG8gdWZ3IGRlZmF1bHQgZGVueSBpbmNvbWluZwpzdWRvIHVmdyBkZWZhdWx0IGFsbG93IG91dGdvaW5nCnN1ZG8gdWZ3IGFsbG93IDIyL3RjcApzdWRvIHVmdyBhbGxvdyA4MC90Y3AKc3VkbyB1Zncgc3RhdHVz"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo ufw enable
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw status</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, has aprendido sobre la importancia de los firewalls y cómo configurarlos en sistemas Linux utilizando <code>iptables</code> y <code>ufw</code>. También has explorado herramientas adicionales como <code>fail2ban</code>, SELinux y AppArmor para mejorar la seguridad de tu sistema. Con estos conocimientos, estás mejor preparado para proteger tu sistema Linux contra amenazas de red y mantener un entorno seguro.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-01-network-configuration' title="Configuración de Redes">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-03-ssh-and-remote-access' title="SSH y Acceso Remoto">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
