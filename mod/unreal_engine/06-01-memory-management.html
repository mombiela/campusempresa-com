<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Memoria</title>

    <link rel="alternate" href="https://campusempresa.com/mod/unreal_engine/06-01-memory-management" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/unreal_engine/06-01-gestio-de-memoria" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/unreal_engine/06-01-memory-management" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/unreal_engine/06-01-memory-management" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/unreal_engine/06-01-gestio-de-memoria" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-integrating-cpp-with-blueprints' title="Integrando C++ con Blueprints">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Gestión de Memoria</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-multithreading' title="Multithreading">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La gestión de memoria es un aspecto crucial en el desarrollo de videojuegos, especialmente cuando se trabaja con un motor tan potente como Unreal Engine. En este módulo, aprenderás cómo manejar la memoria de manera eficiente en C++ dentro de Unreal Engine, lo que te permitirá crear juegos más optimizados y con mejor rendimiento.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Memoria Dinámica vs. Memoria Estática</strong>:</p>
<ul>
<li><strong>Memoria Estática</strong>: Se asigna en tiempo de compilación y su tamaño no cambia durante la ejecución del programa.</li>
<li><strong>Memoria Dinámica</strong>: Se asigna en tiempo de ejecución y puede cambiar de tamaño según las necesidades del programa.</li>
</ul>
</li>
<li>
<p><strong>Punteros y Referencias</strong>:</p>
<ul>
<li><strong>Punteros</strong>: Variables que almacenan la dirección de memoria de otra variable.</li>
<li><strong>Referencias</strong>: Alias para otra variable, más seguras y fáciles de usar que los punteros.</li>
</ul>
</li>
<li>
<p><strong>Gestión de Memoria en C++</strong>:</p>
<ul>
<li><strong>new y delete</strong>: Operadores para asignar y liberar memoria dinámica.</li>
<li><strong>Smart Pointers</strong>: Punteros inteligentes que ayudan a gestionar la memoria automáticamente.</li>
</ul>
</li>
<li>
<p><strong>Garbage Collection</strong>:</p>
<ul>
<li>Unreal Engine utiliza un sistema de recolección de basura para gestionar la memoria de los objetos UObjects.</li>
</ul>
</li>
</ol>
</div><h1><p>Asignación y Liberación de Memoria</p>
</h1>
<div class='content'></div><h2><p>Asignación de Memoria</p>
</h2>
<div class='content'><p>En C++, puedes asignar memoria dinámica utilizando el operador <code>new</code>. Aquí hay un ejemplo básico:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50KiBteUludCA9IG5ldyBpbnQ7IC8vIEFzaWduYSBtZW1vcmlhIHBhcmEgdW4gZW50ZXJvCipteUludCA9IDEwOyAvLyBBc2lnbmEgZWwgdmFsb3IgMTAgYSBsYSBtZW1vcmlhIGFzaWduYWRh"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int* myInt = new int; // Asigna memoria para un entero
*myInt = 10; // Asigna el valor 10 a la memoria asignada</pre></div><div class='content'></div><h2><p>Liberación de Memoria</p>
</h2>
<div class='content'><p>Es crucial liberar la memoria asignada dinámicamente para evitar fugas de memoria. Esto se hace con el operador <code>delete</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVsZXRlIG15SW50OyAvLyBMaWJlcmEgbGEgbWVtb3JpYSBhc2lnbmFkYQpteUludCA9IG51bGxwdHI7IC8vIEV2aXRhIHB1bnRlcm9zIGNvbGdhbnRlcw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>delete myInt; // Libera la memoria asignada
myInt = nullptr; // Evita punteros colgantes</pre></div><div class='content'></div><h2><p>Ejemplo Completo</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgoKaW50IG1haW4oKSB7CiAgICBpbnQqIG15SW50ID0gbmV3IGludDsgLy8gQXNpZ25hIG1lbW9yaWEgcGFyYSB1biBlbnRlcm8KICAgICpteUludCA9IDEwOyAvLyBBc2lnbmEgZWwgdmFsb3IgMTAgYSBsYSBtZW1vcmlhIGFzaWduYWRhCgogICAgc3RkOjpjb3V0IDw8ICJWYWxvcjogIiA8PCAqbXlJbnQgPDwgc3RkOjplbmRsOyAvLyBJbXByaW1lIGVsIHZhbG9yCgogICAgZGVsZXRlIG15SW50OyAvLyBMaWJlcmEgbGEgbWVtb3JpYSBhc2lnbmFkYQogICAgbXlJbnQgPSBudWxscHRyOyAvLyBFdml0YSBwdW50ZXJvcyBjb2xnYW50ZXMKCiAgICByZXR1cm4gMDsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;

int main() {
    int* myInt = new int; // Asigna memoria para un entero
    *myInt = 10; // Asigna el valor 10 a la memoria asignada

    std::cout &lt;&lt; &quot;Valor: &quot; &lt;&lt; *myInt &lt;&lt; std::endl; // Imprime el valor

    delete myInt; // Libera la memoria asignada
    myInt = nullptr; // Evita punteros colgantes

    return 0;
}</pre></div><div class='content'></div><h1><p>Punteros Inteligentes (Smart Pointers)</p>
</h1>
<div class='content'><p>Unreal Engine recomienda el uso de punteros inteligentes para gestionar la memoria de manera más segura y eficiente. Los punteros inteligentes se encuentran en la biblioteca estándar de C++ (<code>&lt;memory&gt;</code>).</p>
</div><h2><p>Tipos de Punteros Inteligentes</p>
</h2>
<div class='content'><ol>
<li><strong>std::unique_ptr</strong>: Posee la memoria y la libera cuando el puntero sale de su ámbito.</li>
<li><strong>std::shared_ptr</strong>: Permite múltiples propietarios de la misma memoria, liberándola cuando el último propietario se destruye.</li>
<li><strong>std::weak_ptr</strong>: Referencia no propietaria a un <code>std::shared_ptr</code>.</li>
</ol>
</div><h2><p>Ejemplo de std::unique_ptr</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8bWVtb3J5PgoKaW50IG1haW4oKSB7CiAgICBzdGQ6OnVuaXF1ZV9wdHI8aW50PiBteUludCA9IHN0ZDo6bWFrZV91bmlxdWU8aW50PigxMCk7IC8vIEFzaWduYSB5IGdlc3Rpb25hIG1lbW9yaWEKCiAgICBzdGQ6OmNvdXQgPDwgIlZhbG9yOiAiIDw8ICpteUludCA8PCBzdGQ6OmVuZGw7IC8vIEltcHJpbWUgZWwgdmFsb3IKCiAgICAvLyBObyBlcyBuZWNlc2FyaW8gbGliZXJhciBsYSBtZW1vcmlhIG1hbnVhbG1lbnRlCiAgICByZXR1cm4gMDsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;memory&gt;

int main() {
    std::unique_ptr&lt;int&gt; myInt = std::make_unique&lt;int&gt;(10); // Asigna y gestiona memoria

    std::cout &lt;&lt; &quot;Valor: &quot; &lt;&lt; *myInt &lt;&lt; std::endl; // Imprime el valor

    // No es necesario liberar la memoria manualmente
    return 0;
}</pre></div><div class='content'></div><h1><p>Gestión de Memoria en Unreal Engine</p>
</h1>
<div class='content'></div><h2><p>UObjects y Garbage Collection</p>
</h2>
<div class='content'><p>Unreal Engine utiliza un sistema de recolección de basura para gestionar la memoria de los objetos derivados de <code>UObject</code>. Esto simplifica la gestión de memoria, pero es importante entender cómo funciona para evitar problemas de rendimiento.</p>
</div><h2><p>Creación de UObjects</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VUNMQVNTKCkKY2xhc3MgTVlHQU1FX0FQSSBBTXlBY3RvciA6IHB1YmxpYyBBQWN0b3IgewogICAgR0VORVJBVEVEX0JPRFkoKQoKcHVibGljOgogICAgQU15QWN0b3IoKTsKfTsKCkFNeUFjdG9yOjpBTXlBY3RvcigpIHsKICAgIC8vIENvbnN0cnVjdG9yCn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>UCLASS()
class MYGAME_API AMyActor : public AActor {
    GENERATED_BODY()

public:
    AMyActor();
};

AMyActor::AMyActor() {
    // Constructor
}</pre></div><div class='content'></div><h2><p>Referencias Inteligentes en Unreal Engine</p>
</h2>
<div class='content'><p>Unreal Engine proporciona sus propias clases de punteros inteligentes, como <code>TSharedPtr</code> y <code>TWeakPtr</code>.</p>
</div><h2><p>Ejemplo de TSharedPtr</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VFNoYXJlZFB0cjxpbnQzMj4gTXlTaGFyZWRJbnQgPSBNYWtlU2hhcmVhYmxlKG5ldyBpbnQzMigxMCkpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>TSharedPtr&lt;int32&gt; MySharedInt = MakeShareable(new int32(10));</pre></div><div class='content'></div><h1><p>Ejercicios Prácticos</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Asignación y Liberación de Memoria</p>
</h2>
<div class='content'><ol>
<li>Asigna memoria para un array de enteros de tamaño 5.</li>
<li>Asigna valores a cada elemento del array.</li>
<li>Imprime los valores del array.</li>
<li>Libera la memoria asignada.</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgoKaW50IG1haW4oKSB7CiAgICBpbnQqIG15QXJyYXkgPSBuZXcgaW50WzVdOyAvLyBBc2lnbmEgbWVtb3JpYSBwYXJhIHVuIGFycmF5IGRlIGVudGVyb3MKCiAgICBmb3IgKGludCBpID0gMDsgaSA8IDU7ICsraSkgewogICAgICAgIG15QXJyYXlbaV0gPSBpICogMTA7IC8vIEFzaWduYSB2YWxvcmVzCiAgICB9CgogICAgZm9yIChpbnQgaSA9IDA7IGkgPCA1OyArK2kpIHsKICAgICAgICBzdGQ6OmNvdXQgPDwgIlZhbG9yOiAiIDw8IG15QXJyYXlbaV0gPDwgc3RkOjplbmRsOyAvLyBJbXByaW1lIHZhbG9yZXMKICAgIH0KCiAgICBkZWxldGVbXSBteUFycmF5OyAvLyBMaWJlcmEgbGEgbWVtb3JpYSBhc2lnbmFkYQogICAgbXlBcnJheSA9IG51bGxwdHI7IC8vIEV2aXRhIHB1bnRlcm9zIGNvbGdhbnRlcwoKICAgIHJldHVybiAwOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;

int main() {
    int* myArray = new int[5]; // Asigna memoria para un array de enteros

    for (int i = 0; i &lt; 5; ++i) {
        myArray[i] = i * 10; // Asigna valores
    }

    for (int i = 0; i &lt; 5; ++i) {
        std::cout &lt;&lt; &quot;Valor: &quot; &lt;&lt; myArray[i] &lt;&lt; std::endl; // Imprime valores
    }

    delete[] myArray; // Libera la memoria asignada
    myArray = nullptr; // Evita punteros colgantes

    return 0;
}</pre></div><div class='content'></div><h2><p>Ejercicio 2: Uso de std::unique_ptr</p>
</h2>
<div class='content'><ol>
<li>Crea un <code>std::unique_ptr</code> para un entero.</li>
<li>Asigna un valor al entero.</li>
<li>Imprime el valor.</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8bWVtb3J5PgoKaW50IG1haW4oKSB7CiAgICBzdGQ6OnVuaXF1ZV9wdHI8aW50PiBteUludCA9IHN0ZDo6bWFrZV91bmlxdWU8aW50PigyMCk7IC8vIEFzaWduYSB5IGdlc3Rpb25hIG1lbW9yaWEKCiAgICBzdGQ6OmNvdXQgPDwgIlZhbG9yOiAiIDw8ICpteUludCA8PCBzdGQ6OmVuZGw7IC8vIEltcHJpbWUgZWwgdmFsb3IKCiAgICAvLyBObyBlcyBuZWNlc2FyaW8gbGliZXJhciBsYSBtZW1vcmlhIG1hbnVhbG1lbnRlCiAgICByZXR1cm4gMDsKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;memory&gt;

int main() {
    std::unique_ptr&lt;int&gt; myInt = std::make_unique&lt;int&gt;(20); // Asigna y gestiona memoria

    std::cout &lt;&lt; &quot;Valor: &quot; &lt;&lt; *myInt &lt;&lt; std::endl; // Imprime el valor

    // No es necesario liberar la memoria manualmente
    return 0;
}</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>La gestión de memoria es un aspecto fundamental en el desarrollo de videojuegos con Unreal Engine. Comprender cómo asignar y liberar memoria, así como utilizar punteros inteligentes, te permitirá crear aplicaciones más eficientes y robustas. En el próximo módulo, exploraremos el multithreading y cómo puede mejorar el rendimiento de tu juego.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-integrating-cpp-with-blueprints' title="Integrando C++ con Blueprints">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-multithreading' title="Multithreading">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
