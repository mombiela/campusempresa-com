<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trabajando con Bloques</title>

    <link rel="alternate" href="https://campusempresa.com/mod/objective_c/working-with-blocks" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/objective_c/working-with-blocks" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/objective_c/working-with-blocks" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/objective_c/working-with-blocks" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/objective_c/working-with-blocks" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='switch-statements'>&#x25C4;Sentencias Switch</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Trabajando con Bloques</a>
	</div>
	<div class='col-4 text-end'>
					<a href='defining-and-calling-functions'>Definición y Llamada de Funciones &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a los Bloques</h1>
<div class='content'><p>Los bloques son una característica poderosa en Objective-C que te permite crear y pasar fragmentos de código. Son similares a los closures o lambdas en otros lenguajes de programación. Los bloques pueden capturar y almacenar referencias a variables y constantes del contexto circundante.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Definición</strong>: Un bloque es un fragmento de código que puede ser ejecutado en un momento posterior.</li>
<li><strong>Sintaxis</strong>: Los bloques tienen una sintaxis distinta que incluye el carácter <code>^</code>.</li>
<li><strong>Captura de Variables</strong>: Los bloques pueden capturar y modificar variables de su ámbito circundante.</li>
<li><strong>Tipos de Bloques</strong>: Los bloques pueden ser usados como variables locales, propiedades o parámetros de métodos.</li>
</ul>
</div><h1>Sintaxis Básica y Uso</h1>
<h2>Definiendo y Usando Bloques</h2>
<div class='content'><p>Para definir un bloque, se utiliza el carácter <code>^</code> seguido de un par de llaves <code>{}</code> que contienen el código a ejecutar.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5lIHVuIGJsb3F1ZSBxdWUgbm8gdG9tYSBwYXLDoW1ldHJvcyB5IGRldnVlbHZlIHZvaWQKdm9pZCAoXnNpbXBsZUJsb2NrKSh2b2lkKSA9IF57CiAgICBOU0xvZyhAIsKhRXN0ZSBlcyB1biBibG9xdWUgc2ltcGxlISIpOwp9OwoKLy8gRWplY3V0YSBlbCBibG9xdWUKc2ltcGxlQmxvY2soKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Define un bloque que no toma par&aacute;metros y devuelve void
void (^simpleBlock)(void) = ^{
    NSLog(@&quot;&iexcl;Este es un bloque simple!&quot;);
};

// Ejecuta el bloque
simpleBlock();</pre></div><div class='content'></div><h2>Bloques con Parámetros y Valores de Retorno</h2>
<div class='content'><p>Los bloques también pueden tomar parámetros y devolver valores. La sintaxis para esto es similar a la definición de una función.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5lIHVuIGJsb3F1ZSBxdWUgdG9tYSBkb3MgZW50ZXJvcyB5IGRldnVlbHZlIHN1IHN1bWEKaW50IChec3VtQmxvY2spKGludCwgaW50KSA9IF4oaW50IGEsIGludCBiKSB7CiAgICByZXR1cm4gYSArIGI7Cn07CgovLyBFamVjdXRhIGVsIGJsb3F1ZQppbnQgcmVzdWx0ID0gc3VtQmxvY2soMywgNCk7Ck5TTG9nKEAiTGEgc3VtYSBlcyAlZCIsIHJlc3VsdCk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Define un bloque que toma dos enteros y devuelve su suma
int (^sumBlock)(int, int) = ^(int a, int b) {
    return a + b;
};

// Ejecuta el bloque
int result = sumBlock(3, 4);
NSLog(@&quot;La suma es %d&quot;, result);</pre></div><div class='content'></div><h1>Captura de Variables</h1>
<div class='content'><p>Los bloques pueden capturar variables del ámbito circundante. Por defecto, estas variables son capturadas como constantes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50IG11bHRpcGxpZXIgPSAzOwppbnQgKF5tdWx0aXBseUJsb2NrKShpbnQpID0gXihpbnQgbnVtKSB7CiAgICByZXR1cm4gbnVtICogbXVsdGlwbGllcjsKfTsKCmludCByZXN1bHQgPSBtdWx0aXBseUJsb2NrKDUpOwpOU0xvZyhAIkVsIHJlc3VsdGFkbyBlcyAlZCIsIHJlc3VsdCk7IC8vIFNhbGlkYTogRWwgcmVzdWx0YWRvIGVzIDE1"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int multiplier = 3;
int (^multiplyBlock)(int) = ^(int num) {
    return num * multiplier;
};

int result = multiplyBlock(5);
NSLog(@&quot;El resultado es %d&quot;, result); // Salida: El resultado es 15</pre></div><div class='content'></div><h2>Modificando Variables Capturadas</h2>
<div class='content'><p>Para modificar una variable capturada, necesitas usar el tipo de almacenamiento <code>__block</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("X19ibG9jayBpbnQgY291bnRlciA9IDA7CnZvaWQgKF5pbmNyZW1lbnRCbG9jaykodm9pZCkgPSBeewogICAgY291bnRlcisrOwp9OwoKaW5jcmVtZW50QmxvY2soKTsKaW5jcmVtZW50QmxvY2soKTsKTlNMb2coQCJFbCBjb250YWRvciBlcyAlZCIsIGNvdW50ZXIpOyAvLyBTYWxpZGE6IEVsIGNvbnRhZG9yIGVzIDI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>__block int counter = 0;
void (^incrementBlock)(void) = ^{
    counter++;
};

incrementBlock();
incrementBlock();
NSLog(@&quot;El contador es %d&quot;, counter); // Salida: El contador es 2</pre></div><div class='content'></div><h1>Bloques como Parámetros de Métodos</h1>
<div class='content'><p>Los bloques pueden ser pasados como parámetros a métodos, lo cual es particularmente útil para funciones de callback.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSAodm9pZClwZXJmb3JtT3BlcmF0aW9uV2l0aENvbXBsZXRpb246KHZvaWQgKF4pKEJPT0wgc3VjY2VzcykpY29tcGxldGlvbiB7CiAgICAvLyBSZWFsaXphIGFsZ3VuYSBvcGVyYWNpw7NuCiAgICBCT09MIG9wZXJhdGlvblN1Y2Nlc3MgPSBZRVM7CiAgICAKICAgIC8vIExsYW1hIGFsIGJsb3F1ZSBkZSBmaW5hbGl6YWNpw7NuCiAgICBzaSAoY29tcGxldGlvbikgewogICAgICAgIGNvbXBsZXRpb24ob3BlcmF0aW9uU3VjY2Vzcyk7CiAgICB9Cn0KCi8vIFVzbwpbc2VsZiBwZXJmb3JtT3BlcmF0aW9uV2l0aENvbXBsZXRpb246XihCT09MIHN1Y2Nlc3MpIHsKICAgIHNpIChzdWNjZXNzKSB7CiAgICAgICAgTlNMb2coQCLCoUxhIG9wZXJhY2nDs24gZnVlIGV4aXRvc2EhIik7CiAgICB9IGVsc2UgewogICAgICAgIE5TTG9nKEAiTGEgb3BlcmFjacOzbiBmYWxsw7MuIik7CiAgICB9Cn1dOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- (void)performOperationWithCompletion:(void (^)(BOOL success))completion {
    // Realiza alguna operaci&oacute;n
    BOOL operationSuccess = YES;
    
    // Llama al bloque de finalizaci&oacute;n
    si (completion) {
        completion(operationSuccess);
    }
}

// Uso
[self performOperationWithCompletion:^(BOOL success) {
    si (success) {
        NSLog(@&quot;&iexcl;La operaci&oacute;n fue exitosa!&quot;);
    } else {
        NSLog(@&quot;La operaci&oacute;n fall&oacute;.&quot;);
    }
}];</pre></div><div class='content'></div><h1>Bloques como Propiedades</h1>
<div class='content'><p>Los bloques también pueden ser almacenados como propiedades en clases.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBNeUNsYXNzIDogTlNPYmplY3QKQHByb3BlcnR5IChub25hdG9taWMsIGNvcHkpIHZvaWQgKF5jb21wbGV0aW9uSGFuZGxlcikoQk9PTCBzdWNjZXNzKTsKQGVuZAoKQGltcGxlbWVudGF0aW9uIE15Q2xhc3MKLSAodm9pZClzdGFydE9wZXJhdGlvbiB7CiAgICAvLyBSZWFsaXphIGFsZ3VuYSBvcGVyYWNpw7NuCiAgICBCT09MIG9wZXJhdGlvblN1Y2Nlc3MgPSBZRVM7CiAgICAKICAgIC8vIExsYW1hIGFsIG1hbmVqYWRvciBkZSBmaW5hbGl6YWNpw7NuIHNpIGV4aXN0ZQogICAgc2kgKHNlbGYuY29tcGxldGlvbkhhbmRsZXIpIHsKICAgICAgICBzZWxmLmNvbXBsZXRpb25IYW5kbGVyKG9wZXJhdGlvblN1Y2Nlc3MpOwogICAgfQp9CkBlbmQKCi8vIFVzbwpNeUNsYXNzICpteU9iamVjdCA9IFtbTXlDbGFzcyBhbGxvY10gaW5pdF07Cm15T2JqZWN0LmNvbXBsZXRpb25IYW5kbGVyID0gXihCT09MIHN1Y2Nlc3MpIHsKICAgIHNpIChzdWNjZXNzKSB7CiAgICAgICAgTlNMb2coQCLCoUxhIG9wZXJhY2nDs24gc2UgY29tcGxldMOzIGNvbiDDqXhpdG8hIik7CiAgICB9IGVsc2UgewogICAgICAgIE5TTG9nKEAiTGEgb3BlcmFjacOzbiBmYWxsw7MuIik7CiAgICB9Cn07CltteU9iamVjdCBzdGFydE9wZXJhdGlvbl07"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface MyClass : NSObject
@property (nonatomic, copy) void (^completionHandler)(BOOL success);
@end

@implementation MyClass
- (void)startOperation {
    // Realiza alguna operaci&oacute;n
    BOOL operationSuccess = YES;
    
    // Llama al manejador de finalizaci&oacute;n si existe
    si (self.completionHandler) {
        self.completionHandler(operationSuccess);
    }
}
@end

// Uso
MyClass *myObject = [[MyClass alloc] init];
myObject.completionHandler = ^(BOOL success) {
    si (success) {
        NSLog(@&quot;&iexcl;La operaci&oacute;n se complet&oacute; con &eacute;xito!&quot;);
    } else {
        NSLog(@&quot;La operaci&oacute;n fall&oacute;.&quot;);
    }
};
[myObject startOperation];</pre></div><div class='content'></div><h1>Uso Avanzado</h1>
<h2>Usando Bloques con Colecciones</h2>
<div class='content'><p>Los bloques son frecuentemente usados con clases de colección como <code>NSArray</code> y <code>NSDictionary</code> para enumeración y filtrado.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TlNBcnJheSAqbnVtYmVycyA9IEBbQDEsIEAyLCBAMywgQDQsIEA1XTsKTlNBcnJheSAqc3F1YXJlZE51bWJlcnMgPSBbbnVtYmVycyBtYXBVc2luZ0Jsb2NrOl5pZChOU051bWJlciAqbnVtYmVyKSB7CiAgICByZXR1cm4gQChudW1iZXIuaW50VmFsdWUgKiBudW1iZXIuaW50VmFsdWUpOwp9XTsKCk5TTG9nKEAiTsO6bWVyb3MgYWwgY3VhZHJhZG86ICVAIiwgc3F1YXJlZE51bWJlcnMpOyAvLyBTYWxpZGE6IE7Dum1lcm9zIGFsIGN1YWRyYWRvOiAoMSwgNCwgOSwgMTYsIDI1KQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NSArray *numbers = @[@1, @2, @3, @4, @5];
NSArray *squaredNumbers = [numbers mapUsingBlock:^id(NSNumber *number) {
    return @(number.intValue * number.intValue);
}];

NSLog(@&quot;N&uacute;meros al cuadrado: %@&quot;, squaredNumbers); // Salida: N&uacute;meros al cuadrado: (1, 4, 9, 16, 25)</pre></div><div class='content'></div><h2>Comparando Bloques y Punteros a Funciones</h2>
<div class='content'><p>Los bloques proporcionan una manera más moderna y flexible de manejar callbacks en comparación con los punteros a funciones tradicionales.</p>
<p>| Característica   | Bloques                        | Punteros a Funciones         |
|------------------|--------------------------------|------------------------------|
| Sintaxis         | Moderna, concisa               | Tradicional, verbosa         |
| Captura de Estado| Puede capturar variables locales| No puede capturar estado local|
| Flexibilidad     | Puede ser usado como propiedades, parámetros, etc. | Limitado a callbacks de funciones |</p>
</div><h1>Conclusión</h1>
<div class='content'><p>Los bloques en Objective-C son una característica versátil y poderosa que te permite encapsular código y pasarlo por tu aplicación. Pueden capturar y modificar variables de su contexto circundante, haciéndolos ideales para callbacks, operaciones asíncronas y más. Entender cómo definir, usar y pasar bloques mejorará enormemente tus habilidades de programación en Objective-C.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='switch-statements'>&#x25C4;Sentencias Switch</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Trabajando con Bloques</a>
	</div>
	<div class='col-4 text-end'>
					<a href='defining-and-calling-functions'>Definición y Llamada de Funciones &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
