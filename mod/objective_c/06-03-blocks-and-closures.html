<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bloques y Closures</title>

    <link rel="alternate" href="https://campusempresa.com/mod/objective_c/06-03-blocks-and-closures" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/objective_c/06-03-blocks-and-closures" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/objective_c/06-03-blocks-and-closures" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/objective_c/06-03-blocks-and-closures" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/objective_c/06-03-blocks-and-closures" class="px-2">CA</a>
<br>
			<cite>Construyendo la sociedad de hoy y del mañana</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Lenguajes de Programación</a>
				 					<a href="/categ/frameworks">Frameworks y Librerías</a>
				 					<a href="/categ/tech-tools">Herramientas Técnicas</a>
				 					<a href="/categ/foundations">Fundamentos Teóricos</a>
				 					<a href="/categ/soft-skills">Habilidades Sociales</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-02-categories-and-extensions' title="Categorías y Extensiones">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Bloques y Closures</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-04-multithreading-and-concurrency' title="Multihilo y Concurrencia">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En Objective-C, los bloques (también conocidos como closures o lambdas en otros lenguajes) son una forma de definir y pasar fragmentos de código que pueden ser ejecutados más tarde. Los bloques son similares a las funciones, pero tienen la capacidad de capturar y almacenar variables del contexto en el que fueron definidos.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'><ol>
<li><strong>Definición de Bloques</strong>: Un bloque es un fragmento de código que puede ser almacenado en una variable y ejecutado en cualquier momento.</li>
<li><strong>Sintaxis de Bloques</strong>: La sintaxis de los bloques en Objective-C puede parecer un poco compleja al principio, pero es muy poderosa.</li>
<li><strong>Captura de Variables</strong>: Los bloques pueden capturar variables del contexto en el que fueron definidos.</li>
<li><strong>Uso de Bloques</strong>: Los bloques se utilizan comúnmente en APIs de Cocoa y Cocoa Touch para manejar callbacks y operaciones asíncronas.</li>
</ol>
</div><h1><p>Definición y Sintaxis de Bloques</p>
</h1>
<div class='content'></div><h2><p>Definición Básica</p>
</h2>
<div class='content'><p>Un bloque se define utilizando la siguiente sintaxis:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("XnJldHVyblR5cGUgKHBhcmFtZXRlcnMpIHsKICAgIC8vIEPDs2RpZ28gZGVsIGJsb3F1ZQp9Ow=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>^returnType (parameters) {
    // C&oacute;digo del bloque
};</pre></div><div class='content'></div><h2><p>Ejemplo de un Bloque Simple</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5pY2nDs24gZGUgdW4gYmxvcXVlIHF1ZSBubyB0b21hIHBhcsOhbWV0cm9zIHkgbm8gcmV0b3JuYSBuYWRhCnZvaWQgKF5zaW1wbGVCbG9jaykodm9pZCkgPSBeewogICAgTlNMb2coQCJFc3RlIGVzIHVuIGJsb3F1ZSBzaW1wbGUuIik7Cn07CgovLyBFamVjdWNpw7NuIGRlbCBibG9xdWUKc2ltcGxlQmxvY2soKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Definici&oacute;n de un bloque que no toma par&aacute;metros y no retorna nada
void (^simpleBlock)(void) = ^{
    NSLog(@&quot;Este es un bloque simple.&quot;);
};

// Ejecuci&oacute;n del bloque
simpleBlock();</pre></div><div class='content'></div><h2><p>Bloques con Parámetros y Valores de Retorno</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5pY2nDs24gZGUgdW4gYmxvcXVlIHF1ZSB0b21hIHVuIHBhcsOhbWV0cm8gZW50ZXJvIHkgcmV0b3JuYSB1biBlbnRlcm8KaW50IChec3F1YXJlQmxvY2spKGludCkgPSBeKGludCBudW0pIHsKICAgIHJldHVybiBudW0gKiBudW07Cn07CgovLyBFamVjdWNpw7NuIGRlbCBibG9xdWUKaW50IHJlc3VsdCA9IHNxdWFyZUJsb2NrKDUpOwpOU0xvZyhAIkVsIGN1YWRyYWRvIGRlIDUgZXMgJWQiLCByZXN1bHQpOyAvLyBTYWxpZGE6IEVsIGN1YWRyYWRvIGRlIDUgZXMgMjU="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Definici&oacute;n de un bloque que toma un par&aacute;metro entero y retorna un entero
int (^squareBlock)(int) = ^(int num) {
    return num * num;
};

// Ejecuci&oacute;n del bloque
int result = squareBlock(5);
NSLog(@&quot;El cuadrado de 5 es %d&quot;, result); // Salida: El cuadrado de 5 es 25</pre></div><div class='content'></div><h1><p>Captura de Variables</p>
</h1>
<div class='content'><p>Los bloques pueden capturar y almacenar variables del contexto en el que fueron definidos. Esto se conoce como &quot;captura de variables&quot;.</p>
</div><h2><p>Ejemplo de Captura de Variables</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50IG11bHRpcGxpZXIgPSAzOwppbnQgKF5tdWx0aXBseUJsb2NrKShpbnQpID0gXihpbnQgbnVtKSB7CiAgICByZXR1cm4gbnVtICogbXVsdGlwbGllcjsKfTsKCmludCByZXN1bHQgPSBtdWx0aXBseUJsb2NrKDQpOwpOU0xvZyhAIjQgbXVsdGlwbGljYWRvIHBvciAzIGVzICVkIiwgcmVzdWx0KTsgLy8gU2FsaWRhOiA0IG11bHRpcGxpY2FkbyBwb3IgMyBlcyAxMg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int multiplier = 3;
int (^multiplyBlock)(int) = ^(int num) {
    return num * multiplier;
};

int result = multiplyBlock(4);
NSLog(@&quot;4 multiplicado por 3 es %d&quot;, result); // Salida: 4 multiplicado por 3 es 12</pre></div><div class='content'><p>En este ejemplo, el bloque captura la variable <code>multiplier</code> del contexto en el que fue definido.</p>
</div><h1><p>Uso de Bloques en APIs</p>
</h1>
<div class='content'><p>Los bloques son ampliamente utilizados en las APIs de Cocoa y Cocoa Touch para manejar callbacks y operaciones asíncronas.</p>
</div><h2><p>Ejemplo de Uso de Bloques en una API</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gVXNvIGRlIHVuIGJsb3F1ZSBwYXJhIG1hbmVqYXIgbGEgZmluYWxpemFjacOzbiBkZSB1bmEgYW5pbWFjacOzbgpbVUlWaWV3IGFuaW1hdGVXaXRoRHVyYXRpb246MS4wIGFuaW1hdGlvbnM6XnsKICAgIC8vIEFuaW1hY2lvbmVzCiAgICB2aWV3LmFscGhhID0gMC4wOwp9IGNvbXBsZXRpb246XihCT09MIGZpbmlzaGVkKSB7CiAgICAvLyBDw7NkaWdvIGEgZWplY3V0YXIgY3VhbmRvIGxhIGFuaW1hY2nDs24gZmluYWxpemEKICAgIE5TTG9nKEAiQW5pbWFjacOzbiBjb21wbGV0YWRhIik7Cn1dOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Uso de un bloque para manejar la finalizaci&oacute;n de una animaci&oacute;n
[UIView animateWithDuration:1.0 animations:^{
    // Animaciones
    view.alpha = 0.0;
} completion:^(BOOL finished) {
    // C&oacute;digo a ejecutar cuando la animaci&oacute;n finaliza
    NSLog(@&quot;Animaci&oacute;n completada&quot;);
}];</pre></div><div class='content'></div><h1><p>Ejercicios Prácticos</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Definir y Ejecutar un Bloque</p>
</h2>
<div class='content'><p><strong>Instrucciones</strong>: Define un bloque que tome dos enteros como parámetros y retorne su suma. Luego, ejecuta el bloque con los valores 10 y 20 y muestra el resultado en la consola.</p>
<p><strong>Solución</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50IChec3VtQmxvY2spKGludCwgaW50KSA9IF4oaW50IGEsIGludCBiKSB7CiAgICByZXR1cm4gYSArIGI7Cn07CgppbnQgcmVzdWx0ID0gc3VtQmxvY2soMTAsIDIwKTsKTlNMb2coQCJMYSBzdW1hIGRlIDEwIHkgMjAgZXMgJWQiLCByZXN1bHQpOyAvLyBTYWxpZGE6IExhIHN1bWEgZGUgMTAgeSAyMCBlcyAzMA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int (^sumBlock)(int, int) = ^(int a, int b) {
    return a + b;
};

int result = sumBlock(10, 20);
NSLog(@&quot;La suma de 10 y 20 es %d&quot;, result); // Salida: La suma de 10 y 20 es 30</pre></div><div class='content'></div><h2><p>Ejercicio 2: Captura de Variables</p>
</h2>
<div class='content'><p><strong>Instrucciones</strong>: Define un bloque que capture una variable del contexto y la utilice para multiplicar un número. Luego, ejecuta el bloque con diferentes valores y muestra los resultados en la consola.</p>
<p><strong>Solución</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50IGZhY3RvciA9IDU7CmludCAoXm11bHRpcGx5QmxvY2spKGludCkgPSBeKGludCBudW0pIHsKICAgIHJldHVybiBudW0gKiBmYWN0b3I7Cn07CgpOU0xvZyhAIjIgbXVsdGlwbGljYWRvIHBvciA1IGVzICVkIiwgbXVsdGlwbHlCbG9jaygyKSk7IC8vIFNhbGlkYTogMiBtdWx0aXBsaWNhZG8gcG9yIDUgZXMgMTAKTlNMb2coQCIzIG11bHRpcGxpY2FkbyBwb3IgNSBlcyAlZCIsIG11bHRpcGx5QmxvY2soMykpOyAvLyBTYWxpZGE6IDMgbXVsdGlwbGljYWRvIHBvciA1IGVzIDE1"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int factor = 5;
int (^multiplyBlock)(int) = ^(int num) {
    return num * factor;
};

NSLog(@&quot;2 multiplicado por 5 es %d&quot;, multiplyBlock(2)); // Salida: 2 multiplicado por 5 es 10
NSLog(@&quot;3 multiplicado por 5 es %d&quot;, multiplyBlock(3)); // Salida: 3 multiplicado por 5 es 15</pre></div><div class='content'></div><h1><p>Errores Comunes y Consejos</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Captura de Variables por Valor</strong>: Las variables capturadas por un bloque son capturadas por valor, lo que significa que si la variable cambia después de que el bloque ha sido definido, el bloque no verá esos cambios. Para capturar una variable por referencia, utiliza la palabra clave <code>__block</code>.</p>
<pre><code class="language-objective-c">__block int counter = 0;
void (^incrementBlock)(void) = ^{
    counter++;
};

incrementBlock();
NSLog(@&quot;Counter: %d&quot;, counter); // Salida: Counter: 1
</code></pre>
</li>
<li>
<p><strong>Retención de Objetos</strong>: Los bloques retienen los objetos que capturan, lo que puede llevar a ciclos de retención si no se manejan adecuadamente. Utiliza <code>__weak</code> o <code>__unsafe_unretained</code> para evitar ciclos de retención.</p>
<pre><code class="language-objective-c">__weak typeof(self) weakSelf = self;
void (^exampleBlock)(void) = ^{
    [weakSelf doSomething];
};
</code></pre>
</li>
</ol>
</div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>Los bloques son una característica poderosa de Objective-C que permiten definir y pasar fragmentos de código que pueden ser ejecutados más tarde. Son especialmente útiles para manejar callbacks y operaciones asíncronas en las APIs de Cocoa y Cocoa Touch. Asegúrate de comprender cómo funcionan los bloques y cómo capturan variables para utilizarlos de manera efectiva en tus aplicaciones.</p>
<p>En el próximo tema, exploraremos el multihilo y la concurrencia en Objective-C, lo que te permitirá ejecutar tareas en paralelo y mejorar el rendimiento de tus aplicaciones.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-02-categories-and-extensions' title="Categorías y Extensiones">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-04-multithreading-and-concurrency' title="Multihilo y Concurrencia">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Publicidad</h1>
<p>Este espacio está destinado a publicidad.</p>
<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>¡Gracias por colaborar!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
