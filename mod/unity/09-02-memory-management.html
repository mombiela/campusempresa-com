<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Memoria</title>

    <link rel="alternate" href="https://campusempresa.com/mod/unity/09-02-memory-management" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/unity/09-02-memory-management" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/unity/09-02-memory-management" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/unity/09-02-memory-management" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/unity/09-02-memory-management" class="px-2">CA</a>
<br>
			<cite>Construyendo la sociedad de hoy y del mañana</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Lenguajes de Programación</a>
				 					<a href="/categ/frameworks">Frameworks y Librerías</a>
				 					<a href="/categ/tech-tools">Herramientas Técnicas</a>
				 					<a href="/categ/foundations">Fundamentos Teóricos</a>
				 					<a href="/categ/soft-skills">Habilidades Sociales</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-01-profiling-optimization-techniques' title="Técnicas de Perfilado y Optimización">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Gestión de Memoria</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-03-reducing-draw-calls' title="Reducción de Llamadas de Dibujo">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>La gestión de memoria es un aspecto crucial en el desarrollo de juegos, especialmente cuando se trabaja con plataformas que tienen recursos limitados. En Unity, una gestión eficiente de la memoria puede significar la diferencia entre un juego que funciona sin problemas y uno que se cuelga o tiene un rendimiento deficiente. En esta sección, aprenderás sobre las mejores prácticas y técnicas para gestionar la memoria en Unity.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Memoria RAM vs. Memoria VRAM</strong>:</p>
<ul>
<li><strong>RAM (Random Access Memory)</strong>: Utilizada para almacenar datos temporales que el CPU necesita acceder rápidamente.</li>
<li><strong>VRAM (Video RAM)</strong>: Utilizada por la GPU para almacenar texturas, modelos y otros datos gráficos.</li>
</ul>
</li>
<li>
<p><strong>Garbage Collection (GC)</strong>:</p>
<ul>
<li>El proceso de liberar memoria que ya no está en uso. En Unity, el GC puede causar pausas notables si no se maneja adecuadamente.</li>
</ul>
</li>
<li>
<p><strong>Pooling de Objetos</strong>:</p>
<ul>
<li>Técnica para reutilizar objetos en lugar de destruirlos y crearlos nuevamente, reduciendo la carga en el GC.</li>
</ul>
</li>
<li>
<p><strong>Texturas y Modelos</strong>:</p>
<ul>
<li>Las texturas y modelos pueden consumir una gran cantidad de memoria. Es importante optimizarlos para reducir su tamaño sin sacrificar la calidad visual.</li>
</ul>
</li>
</ol>
</div><h1><p>Buenas Prácticas para la Gestión de Memoria</p>
</h1>
<div class='content'></div><h2><ol>
<li>Minimizar la Asignación de Memoria en Tiempo de Ejecución</li>
</ol>
</h2>
<div class='content'><p>Evita asignar memoria en el bucle de juego principal. En su lugar, preasigna la memoria que necesitarás.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRWplbXBsbyBkZSBtYWxhIHByw6FjdGljYQp2b2lkIFVwZGF0ZSgpIHsKICAgIGludFtdIG51bWJlcnMgPSBuZXcgaW50WzEwMDBdOyAvLyBBc2lnbmFjacOzbiBlbiBjYWRhIGZyYW1lCn0KCi8vIEVqZW1wbG8gZGUgYnVlbmEgcHLDoWN0aWNhCmludFtdIG51bWJlcnM7CnZvaWQgU3RhcnQoKSB7CiAgICBudW1iZXJzID0gbmV3IGludFsxMDAwXTsgLy8gQXNpZ25hY2nDs24gdW5hIHZlegp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Ejemplo de mala pr&aacute;ctica
void Update() {
    int[] numbers = new int[1000]; // Asignaci&oacute;n en cada frame
}

// Ejemplo de buena pr&aacute;ctica
int[] numbers;
void Start() {
    numbers = new int[1000]; // Asignaci&oacute;n una vez
}</pre></div><div class='content'></div><h2><ol start="2">
<li>Uso de Pooling de Objetos</li>
</ol>
</h2>
<div class='content'><p>El pooling de objetos es una técnica para reutilizar objetos en lugar de destruirlos y crearlos nuevamente. Esto es especialmente útil para objetos que se crean y destruyen frecuentemente, como balas o enemigos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIE9iamVjdFBvb2wgOiBNb25vQmVoYXZpb3VyIHsKICAgIHB1YmxpYyBHYW1lT2JqZWN0IG9iamVjdFByZWZhYjsKICAgIHByaXZhdGUgTGlzdDxHYW1lT2JqZWN0PiBwb29sID0gbmV3IExpc3Q8R2FtZU9iamVjdD4oKTsKCiAgICBwdWJsaWMgR2FtZU9iamVjdCBHZXRPYmplY3QoKSB7CiAgICAgICAgZm9yZWFjaCAodmFyIG9iaiBpbiBwb29sKSB7CiAgICAgICAgICAgIGlmICghb2JqLmFjdGl2ZUluSGllcmFyY2h5KSB7CiAgICAgICAgICAgICAgICBvYmouU2V0QWN0aXZlKHRydWUpOwogICAgICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBHYW1lT2JqZWN0IG5ld09iaiA9IEluc3RhbnRpYXRlKG9iamVjdFByZWZhYik7CiAgICAgICAgcG9vbC5BZGQobmV3T2JqKTsKICAgICAgICByZXR1cm4gbmV3T2JqOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIFJldHVybk9iamVjdChHYW1lT2JqZWN0IG9iaikgewogICAgICAgIG9iai5TZXRBY3RpdmUoZmFsc2UpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class ObjectPool : MonoBehaviour {
    public GameObject objectPrefab;
    private List&lt;GameObject&gt; pool = new List&lt;GameObject&gt;();

    public GameObject GetObject() {
        foreach (var obj in pool) {
            if (!obj.activeInHierarchy) {
                obj.SetActive(true);
                return obj;
            }
        }
        GameObject newObj = Instantiate(objectPrefab);
        pool.Add(newObj);
        return newObj;
    }

    public void ReturnObject(GameObject obj) {
        obj.SetActive(false);
    }
}</pre></div><div class='content'></div><h2><ol start="3">
<li>Optimización de Texturas y Modelos</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Texturas</strong>: Utiliza formatos de compresión adecuados (como DXT para texturas en PC) y mipmaps para reducir el uso de memoria.</li>
<li><strong>Modelos</strong>: Reduce el número de polígonos y elimina vértices innecesarios.</li>
</ul>
</div><h2><ol start="4">
<li>Uso Eficiente de Audio</li>
</ol>
</h2>
<div class='content'><p>El audio también puede consumir una cantidad significativa de memoria. Utiliza formatos de compresión como MP3 o Ogg Vorbis y carga clips de audio de manera asíncrona cuando sea posible.</p>
</div><h2><ol start="5">
<li>Monitoreo y Perfilado</li>
</ol>
</h2>
<div class='content'><p>Utiliza las herramientas de perfilado de Unity para monitorear el uso de memoria y detectar problemas.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("fCBIZXJyYW1pZW50YSBkZSBQZXJmaWxhZG8gfCBEZXNjcmlwY2nDs24gfAp8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLXwKfCBQcm9maWxlciBXaW5kb3cgICAgICAgICAgfCBQZXJtaXRlIHZlciBlbCB1c28gZGUgQ1BVLCBHUFUgeSBtZW1vcmlhIGVuIHRpZW1wbyByZWFsLiB8CnwgTWVtb3J5IFByb2ZpbGVyICAgICAgICAgIHwgUHJvcG9yY2lvbmEgdW5hIHZpc3RhIGRldGFsbGFkYSBkZWwgdXNvIGRlIG1lbW9yaWEsIGluY2x1eWVuZG8gb2JqZXRvcyB5IHRleHR1cmFzLiB8"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>| Herramienta de Perfilado | Descripci&oacute;n |
|--------------------------|-------------|
| Profiler Window          | Permite ver el uso de CPU, GPU y memoria en tiempo real. |
| Memory Profiler          | Proporciona una vista detallada del uso de memoria, incluyendo objetos y texturas. |</pre></div><div class='content'></div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Implementar un Pool de Objetos</p>
</h2>
<div class='content'><ol>
<li><strong>Objetivo</strong>: Crear un sistema de pooling para un juego de disparos.</li>
<li><strong>Instrucciones</strong>:
<ul>
<li>Crea un prefab de una bala.</li>
<li>Implementa un script de pooling que gestione la creación y reutilización de balas.</li>
<li>Modifica el script de disparo para utilizar el pool de objetos en lugar de instanciar y destruir balas.</li>
</ul>
</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQnVsbGV0UG9vbC5jcwp1c2luZyBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYzsKdXNpbmcgVW5pdHlFbmdpbmU7CgpwdWJsaWMgY2xhc3MgQnVsbGV0UG9vbCA6IE1vbm9CZWhhdmlvdXIgewogICAgcHVibGljIEdhbWVPYmplY3QgYnVsbGV0UHJlZmFiOwogICAgcHJpdmF0ZSBMaXN0PEdhbWVPYmplY3Q+IHBvb2wgPSBuZXcgTGlzdDxHYW1lT2JqZWN0PigpOwoKICAgIHB1YmxpYyBHYW1lT2JqZWN0IEdldEJ1bGxldCgpIHsKICAgICAgICBmb3JlYWNoICh2YXIgYnVsbGV0IGluIHBvb2wpIHsKICAgICAgICAgICAgaWYgKCFidWxsZXQuYWN0aXZlSW5IaWVyYXJjaHkpIHsKICAgICAgICAgICAgICAgIGJ1bGxldC5TZXRBY3RpdmUodHJ1ZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gYnVsbGV0OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIEdhbWVPYmplY3QgbmV3QnVsbGV0ID0gSW5zdGFudGlhdGUoYnVsbGV0UHJlZmFiKTsKICAgICAgICBwb29sLkFkZChuZXdCdWxsZXQpOwogICAgICAgIHJldHVybiBuZXdCdWxsZXQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgUmV0dXJuQnVsbGV0KEdhbWVPYmplY3QgYnVsbGV0KSB7CiAgICAgICAgYnVsbGV0LlNldEFjdGl2ZShmYWxzZSk7CiAgICB9Cn0KCi8vIFNob290aW5nU2NyaXB0LmNzCnVzaW5nIFVuaXR5RW5naW5lOwoKcHVibGljIGNsYXNzIFNob290aW5nU2NyaXB0IDogTW9ub0JlaGF2aW91ciB7CiAgICBwdWJsaWMgQnVsbGV0UG9vbCBidWxsZXRQb29sOwogICAgcHVibGljIFRyYW5zZm9ybSBmaXJlUG9pbnQ7CgogICAgdm9pZCBVcGRhdGUoKSB7CiAgICAgICAgaWYgKElucHV0LkdldEJ1dHRvbkRvd24oIkZpcmUxIikpIHsKICAgICAgICAgICAgU2hvb3QoKTsKICAgICAgICB9CiAgICB9CgogICAgdm9pZCBTaG9vdCgpIHsKICAgICAgICBHYW1lT2JqZWN0IGJ1bGxldCA9IGJ1bGxldFBvb2wuR2V0QnVsbGV0KCk7CiAgICAgICAgYnVsbGV0LnRyYW5zZm9ybS5wb3NpdGlvbiA9IGZpcmVQb2ludC5wb3NpdGlvbjsKICAgICAgICBidWxsZXQudHJhbnNmb3JtLnJvdGF0aW9uID0gZmlyZVBvaW50LnJvdGF0aW9uOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// BulletPool.cs
using System.Collections.Generic;
using UnityEngine;

public class BulletPool : MonoBehaviour {
    public GameObject bulletPrefab;
    private List&lt;GameObject&gt; pool = new List&lt;GameObject&gt;();

    public GameObject GetBullet() {
        foreach (var bullet in pool) {
            if (!bullet.activeInHierarchy) {
                bullet.SetActive(true);
                return bullet;
            }
        }
        GameObject newBullet = Instantiate(bulletPrefab);
        pool.Add(newBullet);
        return newBullet;
    }

    public void ReturnBullet(GameObject bullet) {
        bullet.SetActive(false);
    }
}

// ShootingScript.cs
using UnityEngine;

public class ShootingScript : MonoBehaviour {
    public BulletPool bulletPool;
    public Transform firePoint;

    void Update() {
        if (Input.GetButtonDown(&quot;Fire1&quot;)) {
            Shoot();
        }
    }

    void Shoot() {
        GameObject bullet = bulletPool.GetBullet();
        bullet.transform.position = firePoint.position;
        bullet.transform.rotation = firePoint.rotation;
    }
}</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>La gestión de memoria es esencial para garantizar un rendimiento óptimo en tus juegos de Unity. Al seguir las mejores prácticas y utilizar técnicas como el pooling de objetos y la optimización de recursos, puedes minimizar el impacto del garbage collection y mejorar la experiencia del jugador. Asegúrate de utilizar las herramientas de perfilado de Unity para monitorear y ajustar el uso de memoria a lo largo del desarrollo de tu juego.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-01-profiling-optimization-techniques' title="Técnicas de Perfilado y Optimización">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-03-reducing-draw-calls' title="Reducción de Llamadas de Dibujo">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
