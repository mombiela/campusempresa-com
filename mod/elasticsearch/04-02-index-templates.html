<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plantillas de Índices</title>

    <link rel="alternate" href="https://campusempresa.com/mod/elasticsearch/04-02-index-templates" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/elasticsearch/04-02-index-templates" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/elasticsearch/04-02-index-templates" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/elasticsearch/04-02-index-templates" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/elasticsearch/04-02-index-templates" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-01-mapping-analyzers' title="Mapeo y Analizadores">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Plantillas de Índices</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-03-aliases-reindexing' title="Alias y Reindexación">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='index'><p>Las plantillas de índices en Elasticsearch son una herramienta poderosa que permite definir configuraciones predeterminadas para los índices que se crearán en el futuro. Estas configuraciones pueden incluir mapeos, configuraciones de análisis, y ajustes de configuración de índice. Las plantillas de índices son especialmente útiles para mantener la consistencia y simplificar la gestión de múltiples índices.</p>
</div><h2>Conceptos Clave</h2>
<div class='index'><ol>
<li><strong>Plantilla de Índice</strong>: Un conjunto de configuraciones que se aplican automáticamente a los índices que coinciden con un patrón de nombre específico.</li>
<li><strong>Mapeo</strong>: Define la estructura de los documentos y los tipos de datos de los campos.</li>
<li><strong>Configuración de Análisis</strong>: Incluye analizadores, tokenizadores y filtros de token.</li>
<li><strong>Ajustes de Configuración de Índice</strong>: Configuraciones específicas del índice, como el número de réplicas y fragmentos.</li>
</ol>
</div><h2>Creación de una Plantilla de Índice</h2>
<div class='index'><p>Para crear una plantilla de índice, se utiliza la API de plantillas de índice de Elasticsearch. A continuación, se muestra un ejemplo de cómo crear una plantilla de índice básica.</p>
</div><h2>Ejemplo Práctico</h2>
<div class='index'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIF90ZW1wbGF0ZS9teV90ZW1wbGF0ZQp7CiAgImluZGV4X3BhdHRlcm5zIjogWyJsb2ctKiJdLAogICJzZXR0aW5ncyI6IHsKICAgICJudW1iZXJfb2Zfc2hhcmRzIjogMSwKICAgICJudW1iZXJfb2ZfcmVwbGljYXMiOiAxCiAgfSwKICAibWFwcGluZ3MiOiB7CiAgICAicHJvcGVydGllcyI6IHsKICAgICAgInRpbWVzdGFtcCI6IHsKICAgICAgICAidHlwZSI6ICJkYXRlIgogICAgICB9LAogICAgICAibWVzc2FnZSI6IHsKICAgICAgICAidHlwZSI6ICJ0ZXh0IgogICAgICB9LAogICAgICAidXNlcl9pZCI6IHsKICAgICAgICAidHlwZSI6ICJrZXl3b3JkIgogICAgICB9CiAgICB9CiAgfSwKICAiYWxpYXNlcyI6IHsKICAgICJsb2dzIjoge30KICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT _template/my_template
{
  &quot;index_patterns&quot;: [&quot;log-*&quot;],
  &quot;settings&quot;: {
    &quot;number_of_shards&quot;: 1,
    &quot;number_of_replicas&quot;: 1
  },
  &quot;mappings&quot;: {
    &quot;properties&quot;: {
      &quot;timestamp&quot;: {
        &quot;type&quot;: &quot;date&quot;
      },
      &quot;message&quot;: {
        &quot;type&quot;: &quot;text&quot;
      },
      &quot;user_id&quot;: {
        &quot;type&quot;: &quot;keyword&quot;
      }
    }
  },
  &quot;aliases&quot;: {
    &quot;logs&quot;: {}
  }
}</pre></div><div class='index'></div><h2>Explicación del Código</h2>
<div class='index'><ul>
<li><strong>index_patterns</strong>: Define los patrones de nombres de los índices a los que se aplicará esta plantilla. En este caso, se aplicará a todos los índices que comiencen con &quot;log-&quot;.</li>
<li><strong>settings</strong>: Configuraciones del índice, como el número de fragmentos y réplicas.</li>
<li><strong>mappings</strong>: Define la estructura de los documentos en el índice. En este ejemplo, se definen tres campos: <code>timestamp</code> (tipo <code>date</code>), <code>message</code> (tipo <code>text</code>) y <code>user_id</code> (tipo <code>keyword</code>).</li>
<li><strong>aliases</strong>: Define un alias para los índices que coincidan con el patrón. En este caso, se crea un alias llamado &quot;logs&quot;.</li>
</ul>
</div><h2>Ejercicio Práctico</h2>
<div class='index'></div><h2>Ejercicio 1: Crear una Plantilla de Índice</h2>
<div class='index'><p>Crea una plantilla de índice llamada <code>ecommerce_template</code> que se aplique a todos los índices que comiencen con &quot;ecommerce-&quot;. La plantilla debe tener las siguientes configuraciones:</p>
<ul>
<li><strong>settings</strong>:
<ul>
<li><code>number_of_shards</code>: 3</li>
<li><code>number_of_replicas</code>: 2</li>
</ul>
</li>
<li><strong>mappings</strong>:
<ul>
<li><code>order_id</code>: tipo <code>keyword</code></li>
<li><code>product_name</code>: tipo <code>text</code></li>
<li><code>price</code>: tipo <code>float</code></li>
<li><code>order_date</code>: tipo <code>date</code></li>
</ul>
</li>
<li><strong>aliases</strong>:
<ul>
<li><code>ecommerce_orders</code></li>
</ul>
</li>
</ul>
</div><h2>Solución</h2>
<div class='index'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIF90ZW1wbGF0ZS9lY29tbWVyY2VfdGVtcGxhdGUKewogICJpbmRleF9wYXR0ZXJucyI6IFsiZWNvbW1lcmNlLSoiXSwKICAic2V0dGluZ3MiOiB7CiAgICAibnVtYmVyX29mX3NoYXJkcyI6IDMsCiAgICAibnVtYmVyX29mX3JlcGxpY2FzIjogMgogIH0sCiAgIm1hcHBpbmdzIjogewogICAgInByb3BlcnRpZXMiOiB7CiAgICAgICJvcmRlcl9pZCI6IHsKICAgICAgICAidHlwZSI6ICJrZXl3b3JkIgogICAgICB9LAogICAgICAicHJvZHVjdF9uYW1lIjogewogICAgICAgICJ0eXBlIjogInRleHQiCiAgICAgIH0sCiAgICAgICJwcmljZSI6IHsKICAgICAgICAidHlwZSI6ICJmbG9hdCIKICAgICAgfSwKICAgICAgIm9yZGVyX2RhdGUiOiB7CiAgICAgICAgInR5cGUiOiAiZGF0ZSIKICAgICAgfQogICAgfQogIH0sCiAgImFsaWFzZXMiOiB7CiAgICAiZWNvbW1lcmNlX29yZGVycyI6IHt9CiAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT _template/ecommerce_template
{
  &quot;index_patterns&quot;: [&quot;ecommerce-*&quot;],
  &quot;settings&quot;: {
    &quot;number_of_shards&quot;: 3,
    &quot;number_of_replicas&quot;: 2
  },
  &quot;mappings&quot;: {
    &quot;properties&quot;: {
      &quot;order_id&quot;: {
        &quot;type&quot;: &quot;keyword&quot;
      },
      &quot;product_name&quot;: {
        &quot;type&quot;: &quot;text&quot;
      },
      &quot;price&quot;: {
        &quot;type&quot;: &quot;float&quot;
      },
      &quot;order_date&quot;: {
        &quot;type&quot;: &quot;date&quot;
      }
    }
  },
  &quot;aliases&quot;: {
    &quot;ecommerce_orders&quot;: {}
  }
}</pre></div><div class='index'></div><h2>Errores Comunes y Consejos</h2>
<div class='index'><ol>
<li><strong>Patrones de Índice Incorrectos</strong>: Asegúrate de que los patrones de índice en <code>index_patterns</code> coincidan correctamente con los nombres de los índices que deseas afectar.</li>
<li><strong>Configuraciones de Mapeo Incorrectas</strong>: Verifica que los tipos de datos en <code>mappings</code> sean correctos y compatibles con los datos que se indexarán.</li>
<li><strong>Falta de Aliases</strong>: Utiliza aliases para facilitar la consulta y gestión de múltiples índices relacionados.</li>
</ol>
</div><h2>Conclusión</h2>
<div class='index'><p>Las plantillas de índices son una herramienta esencial para gestionar configuraciones consistentes en múltiples índices en Elasticsearch. Al definir plantillas, puedes asegurarte de que todos los índices que coincidan con un patrón específico tengan la misma estructura y configuraciones, lo que simplifica la administración y mejora la coherencia de los datos.</p>
<p>En el próximo tema, exploraremos cómo utilizar alias y realizar reindexaciones para gestionar y migrar datos de manera eficiente en Elasticsearch.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-01-mapping-analyzers' title="Mapeo y Analizadores">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-03-aliases-reindexing' title="Alias y Reindexación">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
