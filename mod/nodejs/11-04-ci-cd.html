<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integración y Despliegue Continuos</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nodejs/11-04-ci-cd" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nodejs/11-04-ci-cd" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nodejs/11-04-ci-cd" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/nodejs/11-04-ci-cd" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/nodejs/11-04-ci-cd" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='11-03-deploying-heroku' title="Desplegando en Heroku">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Integración y Despliegue Continuos</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='12-01-building-chat-app' title="Construcción de una Aplicación de Chat">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>La Integración y Despliegue Continuos (CI/CD) son prácticas esenciales en el desarrollo moderno de software. Estas prácticas permiten a los equipos de desarrollo entregar cambios de código de manera más rápida y segura, automatizando las pruebas y el despliegue de aplicaciones. En este módulo, aprenderás cómo implementar CI/CD en tus proyectos de Node.js.</p>
</div><h1>¿Qué es CI/CD?</h1>
<div class='content'></div><h2>Integración Continua (CI)</h2>
<div class='content'><p>La Integración Continua es una práctica de desarrollo de software en la que los desarrolladores integran su código en un repositorio compartido varias veces al día. Cada integración es verificada por una construcción automatizada (incluyendo pruebas) para detectar errores lo antes posible.</p>
</div><h2>Despliegue Continuo (CD)</h2>
<div class='content'><p>El Despliegue Continuo es una extensión de la Integración Continua que automatiza el despliegue de una aplicación a un entorno de producción. Esto asegura que el software puede ser liberado de manera rápida y segura en cualquier momento.</p>
</div><h1>Beneficios de CI/CD</h1>
<div class='content'><ul>
<li><strong>Detección temprana de errores:</strong> Los errores se detectan y corrigen rápidamente.</li>
<li><strong>Entrega rápida:</strong> Los cambios se despliegan más rápidamente.</li>
<li><strong>Mejora de la calidad:</strong> Las pruebas automatizadas aseguran que el código cumple con los estándares de calidad.</li>
<li><strong>Reducción de riesgos:</strong> Los despliegues frecuentes y pequeños reducen el riesgo de errores en producción.</li>
</ul>
</div><h1>Herramientas de CI/CD</h1>
<div class='content'><p>Existen varias herramientas populares para implementar CI/CD en proyectos de Node.js. Algunas de las más utilizadas son:</p>
<ul>
<li><strong>Jenkins</strong></li>
<li><strong>Travis CI</strong></li>
<li><strong>CircleCI</strong></li>
<li><strong>GitHub Actions</strong></li>
<li><strong>GitLab CI/CD</strong></li>
</ul>
<p>En este módulo, nos centraremos en GitHub Actions debido a su integración directa con GitHub y su facilidad de uso.</p>
</div><h1>Configuración de CI/CD con GitHub Actions</h1>
<div class='content'></div><h2>Paso 1: Crear un Repositorio en GitHub</h2>
<div class='content'><ol>
<li>Ve a <a href="https://github.com">GitHub</a> y crea un nuevo repositorio.</li>
<li>Clona el repositorio en tu máquina local.</li>
</ol>
</div><h2>Paso 2: Crear un Archivo de Workflow</h2>
<div class='content'><ol>
<li>En tu repositorio, crea un directorio <code>.github/workflows</code>.</li>
<li>Dentro de este directorio, crea un archivo <code>ci.yml</code>.</li>
</ol>
</div><h2>Paso 3: Definir el Workflow</h2>
<div class='content'><p>En el archivo <code>ci.yml</code>, define el workflow de CI/CD. Aquí hay un ejemplo básico para un proyecto de Node.js:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmFtZTogQ0kvQ0QgUGlwZWxpbmUKCm9uOgogIHB1c2g6CiAgICBicmFuY2hlczoKICAgICAgLSBtYWluCiAgcHVsbF9yZXF1ZXN0OgogICAgYnJhbmNoZXM6CiAgICAgIC0gbWFpbgoKam9iczoKICBidWlsZDoKICAgIHJ1bnMtb246IHVidW50dS1sYXRlc3QKCiAgICBzdGVwczoKICAgIC0gbmFtZTogQ2hlY2tvdXQgY29kZQogICAgICB1c2VzOiBhY3Rpb25zL2NoZWNrb3V0QHYyCgogICAgLSBuYW1lOiBTZXQgdXAgTm9kZS5qcwogICAgICB1c2VzOiBhY3Rpb25zL3NldHVwLW5vZGVAdjIKICAgICAgd2l0aDoKICAgICAgICBub2RlLXZlcnNpb246ICcxNCcKCiAgICAtIG5hbWU6IEluc3RhbGwgZGVwZW5kZW5jaWVzCiAgICAgIHJ1bjogbnBtIGluc3RhbGwKCiAgICAtIG5hbWU6IFJ1biB0ZXN0cwogICAgICBydW46IG5wbSB0ZXN0CgogIGRlcGxveToKICAgIG5lZWRzOiBidWlsZAogICAgcnVucy1vbjogdWJ1bnR1LWxhdGVzdAogICAgaWY6IGdpdGh1Yi5yZWYgPT0gJ3JlZnMvaGVhZHMvbWFpbicKCiAgICBzdGVwczoKICAgIC0gbmFtZTogQ2hlY2tvdXQgY29kZQogICAgICB1c2VzOiBhY3Rpb25zL2NoZWNrb3V0QHYyCgogICAgLSBuYW1lOiBTZXQgdXAgTm9kZS5qcwogICAgICB1c2VzOiBhY3Rpb25zL3NldHVwLW5vZGVAdjIKICAgICAgd2l0aDoKICAgICAgICBub2RlLXZlcnNpb246ICcxNCcKCiAgICAtIG5hbWU6IEluc3RhbGwgZGVwZW5kZW5jaWVzCiAgICAgIHJ1bjogbnBtIGluc3RhbGwKCiAgICAtIG5hbWU6IERlcGxveSB0byBIZXJva3UKICAgICAgZW52OgogICAgICAgIEhFUk9LVV9BUElfS0VZOiAke3sgc2VjcmV0cy5IRVJPS1VfQVBJX0tFWSB9fQogICAgICBydW46IHwKICAgICAgICBnaXQgcmVtb3RlIGFkZCBoZXJva3UgaHR0cHM6Ly9naXQuaGVyb2t1LmNvbS88eW91ci1hcHAtbmFtZT4uZ2l0CiAgICAgICAgZ2l0IHB1c2ggaGVyb2t1IG1haW4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>name: CI/CD Pipeline

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'

    - name: Install dependencies
      run: npm install

    - name: Run tests
      run: npm test

  deploy:
    needs: build
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'

    - name: Install dependencies
      run: npm install

    - name: Deploy to Heroku
      env:
        HEROKU_API_KEY: ${{ secrets.HEROKU_API_KEY }}
      run: |
        git remote add heroku https://git.heroku.com/&lt;your-app-name&gt;.git
        git push heroku main</pre></div><div class='content'></div><h2>Explicación del Workflow</h2>
<div class='content'><ul>
<li><strong>name:</strong> Nombre del workflow.</li>
<li><strong>on:</strong> Define los eventos que activan el workflow (push y pull_request en la rama main).</li>
<li><strong>jobs:</strong> Define los trabajos que se ejecutarán.
<ul>
<li><strong>build:</strong> Trabajo de construcción y pruebas.
<ul>
<li><strong>runs-on:</strong> Define el sistema operativo en el que se ejecutará el trabajo.</li>
<li><strong>steps:</strong> Pasos a seguir en el trabajo.
<ul>
<li><strong>Checkout code:</strong> Clona el repositorio.</li>
<li><strong>Set up Node.js:</strong> Configura la versión de Node.js.</li>
<li><strong>Install dependencies:</strong> Instala las dependencias del proyecto.</li>
<li><strong>Run tests:</strong> Ejecuta las pruebas.</li>
</ul>
</li>
</ul>
</li>
<li><strong>deploy:</strong> Trabajo de despliegue.
<ul>
<li><strong>needs:</strong> Define que este trabajo depende del trabajo de construcción.</li>
<li><strong>if:</strong> Condición para ejecutar el trabajo (solo en la rama main).</li>
<li><strong>steps:</strong> Pasos a seguir en el trabajo.
<ul>
<li><strong>Checkout code:</strong> Clona el repositorio.</li>
<li><strong>Set up Node.js:</strong> Configura la versión de Node.js.</li>
<li><strong>Install dependencies:</strong> Instala las dependencias del proyecto.</li>
<li><strong>Deploy to Heroku:</strong> Despliega la aplicación en Heroku.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><h2>Paso 4: Configurar Secretos en GitHub</h2>
<div class='content'><ol>
<li>Ve a la configuración de tu repositorio en GitHub.</li>
<li>En la sección &quot;Secrets&quot;, agrega un nuevo secreto llamado <code>HEROKU_API_KEY</code> con tu clave API de Heroku.</li>
</ol>
</div><h2>Paso 5: Probar el Workflow</h2>
<div class='content'><ol>
<li>Realiza un commit y push de tus cambios al repositorio.</li>
<li>Ve a la pestaña &quot;Actions&quot; en tu repositorio de GitHub para ver el progreso del workflow.</li>
</ol>
</div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio 1: Configurar CI/CD para un Proyecto de Node.js</h2>
<div class='content'><ol>
<li>Crea un nuevo proyecto de Node.js con un simple script de prueba.</li>
<li>Configura un repositorio en GitHub y sube tu proyecto.</li>
<li>Configura GitHub Actions siguiendo los pasos anteriores.</li>
<li>Realiza un commit y push para activar el workflow.</li>
<li>Verifica que el workflow se ejecute correctamente y que la aplicación se despliegue en Heroku.</li>
</ol>
</div><h2>Solución del Ejercicio 1</h2>
<div class='content'><ol>
<li>Crea un nuevo proyecto de Node.js:
<pre><code class="language-bash">mkdir my-nodejs-app
cd my-nodejs-app
npm init -y
npm install --save-dev jest
</code></pre>
</li>
<li>Crea un archivo <code>sum.js</code>:
<pre><code class="language-javascript">function sum(a, b) {
  return a + b;
}
module.exports = sum;
</code></pre>
</li>
<li>Crea un archivo <code>sum.test.js</code>:
<pre><code class="language-javascript">const sum = require('./sum');

test('adds 1 + 2 to equal 3', () =&gt; {
  expect(sum(1, 2)).toBe(3);
});
</code></pre>
</li>
<li>Agrega un script de prueba en <code>package.json</code>:
<pre><code class="language-json">&quot;scripts&quot;: {
  &quot;test&quot;: &quot;jest&quot;
}
</code></pre>
</li>
<li>Sube el proyecto a un nuevo repositorio en GitHub.</li>
<li>Configura GitHub Actions siguiendo los pasos anteriores.</li>
<li>Realiza un commit y push para activar el workflow.</li>
<li>Verifica que el workflow se ejecute correctamente y que la aplicación se despliegue en Heroku.</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>En este módulo, aprendiste sobre la importancia de la Integración y Despliegue Continuos (CI/CD) y cómo implementarlos en un proyecto de Node.js utilizando GitHub Actions. Estas prácticas te ayudarán a entregar software de alta calidad de manera rápida y segura. En el próximo módulo, aplicaremos estos conocimientos en proyectos del mundo real.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='11-03-deploying-heroku' title="Desplegando en Heroku">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='12-01-building-chat-app' title="Construcción de una Aplicación de Chat">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
