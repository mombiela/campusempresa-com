<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Construyendo una Aplicación de Chat en Tiempo Real</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nodejs/real-time-chat" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nodejs/real-time-chat" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nodejs/real-time-chat" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/nodejs/real-time-chat" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/nodejs/real-time-chat" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='socket-io'>&#x25C4;Usando Socket.io</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Construyendo una Aplicación de Chat en Tiempo Real</a>
	</div>
	<div class='col-4 text-end'>
					<a href='unit-testing-mocha-chai'>Pruebas Unitarias con Mocha y Chai &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En este módulo, aprenderemos a construir una aplicación de chat en tiempo real usando Node.js. Esto implicará configurar un servidor Node.js, usar WebSockets para la comunicación en tiempo real y crear un front-end simple para interactuar con nuestro servidor.</p>
</div><h1>Prerrequisitos</h1>
<div class='content'><p>Antes de comenzar este módulo, debes tener:</p>
<ul>
<li>Comprensión básica de JavaScript.</li>
<li>Node.js y npm instalados en tu máquina.</li>
<li>Conocimientos básicos de HTML y CSS.</li>
</ul>
</div><h1>Configuración del Proyecto</h1>
<div class='content'><p>Primero, necesitamos configurar nuestro directorio de proyecto e inicializar un nuevo proyecto Node.js.</p>
<ol>
<li>
<p><strong>Crea un nuevo directorio para tu proyecto:</strong></p>
<pre><code class="language-bash">mkdir chat-app
cd chat-app
</code></pre>
</li>
<li>
<p><strong>Inicializa un nuevo proyecto Node.js:</strong></p>
<pre><code class="language-bash">npm init -y
</code></pre>
</li>
<li>
<p><strong>Instala las dependencias necesarias:</strong></p>
<pre><code class="language-bash">npm install express socket.io
</code></pre>
</li>
</ol>
</div><h1>Creando el Servidor</h1>
<div class='content'><p>Crearemos un servidor simple con Express y configuraremos Socket.io para la comunicación en tiempo real.</p>
<ol>
<li>
<p><strong>Crea un archivo llamado <code>server.js</code>:</strong></p>
<pre><code class="language-javascript">const express = require('express');
const http = require('http');
const socketIo = require('socket.io');

const app = express();
const server = http.createServer(app);
const io = socketIo(server);

const PORT = process.env.PORT || 3000;

app.get('/', (req, res) =&gt; {
    res.sendFile(__dirname + '/index.html');
});

io.on('connection', (socket) =&gt; {
    console.log('a user connected');
    socket.on('disconnect', () =&gt; {
        console.log('user disconnected');
    });
});

server.listen(PORT, () =&gt; {
    console.log(`Server is running on port ${PORT}`);
});
</code></pre>
</li>
<li>
<p><strong>Crea un archivo <code>index.html</code> en el directorio raíz:</strong></p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Chat App&lt;/title&gt;
    &lt;style&gt;
        /* Añade algo de estilo básico */
        body { font-family: Arial, sans-serif; }
        #messages { list-style-type: none; margin: 0; padding: 0; }
        #messages li { padding: 8px; margin-bottom: 10px; background-color: #f4f4f4; }
        #form { display: flex; }
        #input { flex: 1; padding: 10px; }
        #send { padding: 10px; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;ul id=&quot;messages&quot;&gt;&lt;/ul&gt;
    &lt;form id=&quot;form&quot; action=&quot;&quot;&gt;
        &lt;input id=&quot;input&quot; autocomplete=&quot;off&quot; /&gt;&lt;button id=&quot;send&quot;&gt;Send&lt;/button&gt;
    &lt;/form&gt;
    &lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
        var socket = io();
        var form = document.getElementById('form');
        var input = document.getElementById('input');

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            if (input.value) {
                socket.emit('chat message', input.value);
                input.value = '';
            }
        });

        socket.on('chat message', function(msg) {
            var item = document.createElement('li');
            item.textContent = msg;
            document.getElementById('messages').appendChild(item);
            window.scrollTo(0, document.body.scrollHeight);
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
</li>
</ol>
</div><h1>Manejo de la Comunicación en Tiempo Real</h1>
<div class='content'><p>Ahora manejaremos el envío y recepción de mensajes en tiempo real usando Socket.io.</p>
<ol>
<li>
<p><strong>Actualiza el archivo <code>server.js</code> para manejar mensajes de chat:</strong></p>
<pre><code class="language-javascript">io.on('connection', (socket) =&gt; {
    console.log('a user connected');
    socket.on('chat message', (msg) =&gt; {
        io.emit('chat message', msg);
    });
    socket.on('disconnect', () =&gt; {
        console.log('user disconnected');
    });
});
</code></pre>
</li>
<li>
<p><strong>Actualiza el script del lado del cliente en <code>index.html</code> para manejar mensajes entrantes:</strong></p>
<pre><code class="language-html">&lt;script&gt;
    var socket = io();
    var form = document.getElementById('form');
    var input = document.getElementById('input');

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        if (input.value) {
            socket.emit('chat message', input.value);
            input.value = '';
        }
    });

    socket.on('chat message', function(msg) {
        var item = document.createElement('li');
        item.textContent = msg;
        document.getElementById('messages').appendChild(item);
        window.scrollTo(0, document.body.scrollHeight);
    });
&lt;/script&gt;
</code></pre>
</li>
</ol>
</div><h1>Mejorando la Aplicación de Chat</h1>
<div class='content'><p>Para hacer nuestra aplicación de chat más robusta y amigable para el usuario, podemos agregar características como:</p>
<ul>
<li><strong>Nombres de usuario:</strong> Permitir a los usuarios establecer sus nombres de usuario.</li>
<li><strong>Timestamps:</strong> Mostrar la hora en que se envió cada mensaje.</li>
<li><strong>Estilización:</strong> Mejorar la interfaz de usuario con mejor estilización.</li>
</ul>
</div><h2>Añadiendo Nombres de Usuario</h2>
<div class='content'><ol>
<li>
<p><strong>Actualiza <code>index.html</code> para incluir un input de nombre de usuario:</strong></p>
<pre><code class="language-html">&lt;input id=&quot;username&quot; placeholder=&quot;Enter your username&quot; autocomplete=&quot;off&quot; /&gt;
</code></pre>
</li>
<li>
<p><strong>Modifica el script del lado del cliente para incluir el nombre de usuario:</strong></p>
<pre><code class="language-html">&lt;script&gt;
    var socket = io();
    var form = document.getElementById('form');
    var input = document.getElementById('input');
    var usernameInput = document.getElementById('username');

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        if (input.value &amp;&amp; usernameInput.value) {
            socket.emit('chat message', {
                username: usernameInput.value,
                message: input.value
            });
            input.value = '';
        }
    });

    socket.on('chat message', function(data) {
        var item = document.createElement('li');
        item.textContent = `${data.username}: ${data.message}`;
        document.getElementById('messages').appendChild(item);
        window.scrollTo(0, document.body.scrollHeight);
    });
&lt;/script&gt;
</code></pre>
</li>
<li>
<p><strong>Actualiza <code>server.js</code> para manejar el nuevo formato de mensaje:</strong></p>
<pre><code class="language-javascript">io.on('connection', (socket) =&gt; {
    console.log('a user connected');
    socket.on('chat message', (data) =&gt; {
        io.emit('chat message', data);
    });
    socket.on('disconnect', () =&gt; {
        console.log('user disconnected');
    });
});
</code></pre>
</li>
</ol>
</div><h1>Conclusión</h1>
<div class='content'><p>En este módulo, hemos construido una aplicación de chat en tiempo real básica usando Node.js y Socket.io. Comenzamos configurando un servidor Node.js, luego agregamos capacidades de comunicación en tiempo real con Socket.io, y finalmente mejoramos la aplicación con características adicionales como nombres de usuario. Este proyecto sirve como una base para aplicaciones en tiempo real más complejas que puedas querer construir en el futuro.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='socket-io'>&#x25C4;Usando Socket.io</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Construyendo una Aplicación de Chat en Tiempo Real</a>
	</div>
	<div class='col-4 text-end'>
					<a href='unit-testing-mocha-chai'>Pruebas Unitarias con Mocha y Chai &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
