<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async/Await en Node.js</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nodejs/async-await" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nodejs/async-await" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nodejs/async-await" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body  class="test" >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/nodejs/async-await" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/nodejs/async-await" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
									<div class="assert">
						<p><b>Atención!</b> Ha habido un error en la generación del curso y puede contener errores de traducción.Estamos trabajando para solucinarlo por lo que se deben usar los contenidos con cuidado.Se puede consultar el contenido correcto en otro idioma en el siguiente enlace:<br>
						<a href="https://enterprisecampus.net/mod/nodejs/async-await">https://enterprisecampus.net/mod/nodejs/async-await</a></p>
					</div>
								<div class='row navigation'>
	<div class='col-4'>
					<a href='promises'>&#x25C4;Promises</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Async/Await en Node.js</a>
	</div>
	<div class='col-4 text-end'>
					<a href='handling-errors'>Manejo de Errores &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a Async/Await</h1>
<div class='content'><p>Async/Await es una forma moderna de manejar operaciones asíncronas en JavaScript, haciendo que el código sea más fácil de leer y escribir en comparación con métodos tradicionales como callbacks y promesas.</p>
<ul>
<li><strong>Async</strong>: Declara una función como asíncrona, permitiendo el uso de <code>await</code> dentro de ella.</li>
<li><strong>Await</strong>: Pausa la ejecución de una función async hasta que una promesa se resuelva o sea rechazada.</li>
</ul>
</div><h1>¿Por qué usar Async/Await?</h1>
<div class='content'><ul>
<li><strong>Legibilidad</strong>: El código parece síncrono, lo que facilita su comprensión.</li>
<li><strong>Manejo de errores</strong>: Simplifica el manejo de errores con bloques <code>try/catch</code>.</li>
<li><strong>Encadenamiento</strong>: Evita la complejidad de encadenar múltiples llamadas <code>.then()</code>.</li>
</ul>
</div><h1>Sintaxis básica</h1>
<h2>Función Async</h2>
<div class='content'><p>Para definir una función async, usa la palabra clave <code>async</code> antes de la declaración de la función.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogIC8vIGN1ZXJwbyBkZSBsYSBmdW5jacOzbgp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchData() {
  // cuerpo de la funci&oacute;n
}</pre></div><div class='content'></div><h2>Palabra clave Await</h2>
<div class='content'><p>Usa la palabra clave <code>await</code> para pausar la ejecución de la función async hasta que la promesa se resuelva.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmV4YW1wbGUuY29tL2RhdGEnKTsKICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogIHJldHVybiBkYXRhOwp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchData() {
  const response = await fetch('https://api.example.com/data');
  const data = await response.json();
  return data;
}</pre></div><div class='content'></div><h1>Ejemplo: Obtener datos de una API</h1>
<div class='content'><p>Veamos un ejemplo simple de cómo obtener datos de una API usando async/await.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7Cgphc3luYyBmdW5jdGlvbiBnZXRVc2VyRGF0YSh1c2VySWQpIHsKICB0cnkgewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3VzZXJzLyR7dXNlcklkfWApOwogICAgY29uc3QgdXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIGNvbnNvbGUubG9nKHVzZXIpOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGRhdGE6JywgZXJyb3IpOwogIH0KfQoKZ2V0VXNlckRhdGEoMSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const fetch = require('node-fetch');

async function getUserData(userId) {
  try {
    const response = await fetch(`https://jsonplaceholder.typicode.com/users/${userId}`);
    const user = await response.json();
    console.log(user);
  } catch (error) {
    console.error('Error fetching user data:', error);
  }
}

getUserData(1);</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>fetch</strong>: Usado para hacer solicitudes HTTP.</li>
<li><strong>await fetch</strong>: Espera a que la llamada fetch se complete.</li>
<li><strong>await response.json()</strong>: Espera a que la respuesta se convierta en JSON.</li>
<li><strong>try/catch</strong>: Maneja cualquier error que ocurra durante las operaciones asíncronas.</li>
</ul>
</div><h1>Manejo de múltiples promesas</h1>
<div class='content'><p>Puedes usar <code>await</code> con múltiples promesas usando <code>Promise.all</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZ2V0TXVsdGlwbGVVc2Vycyh1c2VySWRzKSB7CiAgdHJ5IHsKICAgIGNvbnN0IHVzZXJQcm9taXNlcyA9IHVzZXJJZHMubWFwKGlkID0+IGZldGNoKGBodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vdXNlcnMvJHtpZH1gKSk7CiAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbCh1c2VyUHJvbWlzZXMpOwogICAgY29uc3QgdXNlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChyZXNwb25zZXMubWFwKHJlcyA9PiByZXMuanNvbigpKSk7CiAgICBjb25zb2xlLmxvZyh1c2Vycyk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG11bHRpcGxlIHVzZXJzOicsIGVycm9yKTsKICB9Cn0KCmdldE11bHRpcGxlVXNlcnMoWzEsIDIsIDNdKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function getMultipleUsers(userIds) {
  try {
    const userPromises = userIds.map(id =&gt; fetch(`https://jsonplaceholder.typicode.com/users/${id}`));
    const responses = await Promise.all(userPromises);
    const users = await Promise.all(responses.map(res =&gt; res.json()));
    console.log(users);
  } catch (error) {
    console.error('Error fetching multiple users:', error);
  }
}

getMultipleUsers([1, 2, 3]);</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>userPromises</strong>: Array de promesas para obtener datos de usuarios.</li>
<li><strong>Promise.all(userPromises)</strong>: Espera a que todas las promesas fetch se resuelvan.</li>
<li><strong>responses.map(res =&gt; res.json())</strong>: Convierte cada respuesta a JSON.</li>
<li><strong>Promise.all</strong>: Espera a que todas las promesas de conversión a JSON se resuelvan.</li>
</ul>
</div><h1>Conceptos avanzados</h1>
<h2>Ejecución secuencial vs paralela</h2>
<div class='content'><ul>
<li><strong>Secuencial</strong>: Cada operación espera a que la anterior se complete.</li>
<li><strong>Paralela</strong>: Múltiples operaciones se ejecutan concurrentemente.</li>
</ul>
<h4>Ejemplo secuencial</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hTZXF1ZW50aWFsKCkgewogIGNvbnN0IHVzZXIxID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS91c2Vycy8xJykudGhlbihyZXMgPT4gcmVzLmpzb24oKSk7CiAgY29uc3QgdXNlcjIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3VzZXJzLzInKS50aGVuKHJlcyA9PiByZXMuanNvbigpKTsKICBjb25zb2xlLmxvZyh1c2VyMSwgdXNlcjIpOwp9CgpmZXRjaFNlcXVlbnRpYWwoKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchSequential() {
  const user1 = await fetch('https://jsonplaceholder.typicode.com/users/1').then(res =&gt; res.json());
  const user2 = await fetch('https://jsonplaceholder.typicode.com/users/2').then(res =&gt; res.json());
  console.log(user1, user2);
}

fetchSequential();</pre></div><div class='content'><h4>Ejemplo paralelo</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hQYXJhbGxlbCgpIHsKICBjb25zdCBbdXNlcjEsIHVzZXIyXSA9IGF3YWl0IFByb21pc2UuYWxsKFsKICAgIGZldGNoKCdodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vdXNlcnMvMScpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpLAogICAgZmV0Y2goJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS91c2Vycy8yJykudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICBdKTsKICBjb25zb2xlLmxvZyh1c2VyMSwgdXNlcjIpOwp9CgpmZXRjaFBhcmFsbGVsKCk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchParallel() {
  const [user1, user2] = await Promise.all([
    fetch('https://jsonplaceholder.typicode.com/users/1').then(res =&gt; res.json()),
    fetch('https://jsonplaceholder.typicode.com/users/2').then(res =&gt; res.json())
  ]);
  console.log(user1, user2);
}

fetchParallel();</pre></div><div class='content'></div><h2>Manejo de errores con múltiples promesas</h2>
<div class='content'><p>Cuando usas <code>Promise.all</code>, si una promesa falla, toda la operación falla. Puedes manejar esto envolviendo cada promesa en un bloque try/catch o usando <code>Promise.allSettled</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hXaXRoRXJyb3JIYW5kbGluZygpIHsKICBjb25zdCB1c2VyUHJvbWlzZXMgPSBbMSwgMiwgM10ubWFwKGlkID0+IAogICAgZmV0Y2goYGh0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS91c2Vycy8ke2lkfWApCiAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQogICAgICAuY2F0Y2goZXJyb3IgPT4gKHsgZXJyb3IgfSkpCiAgKTsKICBjb25zdCB1c2VycyA9IGF3YWl0IFByb21pc2UuYWxsKHVzZXJQcm9taXNlcyk7CiAgY29uc29sZS5sb2codXNlcnMpOwp9CgpmZXRjaFdpdGhFcnJvckhhbmRsaW5nKCk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchWithErrorHandling() {
  const userPromises = [1, 2, 3].map(id =&gt; 
    fetch(`https://jsonplaceholder.typicode.com/users/${id}`)
      .then(res =&gt; res.json())
      .catch(error =&gt; ({ error }))
  );
  const users = await Promise.all(userPromises);
  console.log(users);
}

fetchWithErrorHandling();</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Async/Await simplifica la programación asíncrona en Node.js haciendo que el código sea más legible y fácil de manejar. Permite un manejo de errores directo y puede manejar múltiples operaciones asíncronas de manera eficiente. Al entender y utilizar async/await, puedes escribir código más limpio y mantenible.</p>
<ul>
<li><strong>Puntos clave</strong>:
<ul>
<li>Usa <code>async</code> para declarar una función asíncrona.</li>
<li>Usa <code>await</code> para pausar la ejecución hasta que una promesa se resuelva.</li>
<li>Maneja errores usando bloques <code>try/catch</code>.</li>
<li>Usa <code>Promise.all</code> para la ejecución paralela de múltiples promesas.</li>
<li>Considera estrategias de manejo de errores para múltiples promesas.</li>
</ul>
</li>
</ul>
<p>Al dominar async/await, estarás bien equipado para manejar operaciones asíncronas complejas en tus aplicaciones Node.js.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='promises'>&#x25C4;Promises</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Async/Await en Node.js</a>
	</div>
	<div class='col-4 text-end'>
					<a href='handling-errors'>Manejo de Errores &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
