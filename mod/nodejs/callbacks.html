<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Callbacks en Node.js</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nodejs/callbacks" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nodejs/callbacks" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nodejs/callbacks" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/nodejs/callbacks" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/nodejs/callbacks" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='streams-and-events'>&#x25C4;Streams y Eventos</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Callbacks en Node.js</a>
	</div>
	<div class='col-4 text-end'>
					<a href='promises'>Promises &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a los Callbacks</h1>
<div class='content'><p>Los callbacks son un concepto fundamental en Node.js, permitiendo la programación asíncrona. Un callback es una función que se pasa a otra función como argumento, y luego se invoca dentro de la función externa para completar algún tipo de rutina o acción.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Programación Asíncrona</strong>: Node.js usa callbacks para manejar operaciones asíncronas, permitiendo que el programa continúe ejecutando otro código mientras espera que operaciones como la lectura de archivos o solicitudes de red se completen.</li>
<li><strong>Función de Callback</strong>: Una función que se pasa como argumento a otra función y se ejecuta después de que alguna operación se haya completado.</li>
</ul>
</div><h1>Ejemplo Básico de Callbacks</h1>
<div class='content'><p>Comencemos con un ejemplo simple para entender cómo funcionan los callbacks en Node.js.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZ3JlZXQobmFtZSwgY2FsbGJhY2spIHsKICAgIGNvbnNvbGUubG9nKCdIb2xhICcgKyBuYW1lKTsKICAgIGNhbGxiYWNrKCk7Cn0KCmZ1bmN0aW9uIHNheUdvb2RieWUoKSB7CiAgICBjb25zb2xlLmxvZygnwqFBZGnDs3MhJyk7Cn0KCmdyZWV0KCdBbGljZScsIHNheUdvb2RieWUpOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function greet(name, callback) {
    console.log('Hola ' + name);
    callback();
}

function sayGoodbye() {
    console.log('&iexcl;Adi&oacute;s!');
}

greet('Alice', sayGoodbye);</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li>La función <code>greet</code> toma dos parámetros: <code>name</code> y <code>callback</code>.</li>
<li>Primero, registra un mensaje de saludo en la consola.</li>
<li>Luego, llama a la función <code>callback</code>.</li>
<li>En este ejemplo, <code>sayGoodbye</code> se pasa como la función de callback, que registra &quot;¡Adiós!&quot; en la consola después del saludo.</li>
</ul>
</div><h1>Callbacks Asíncronos</h1>
<div class='content'><p>Node.js está diseñado para ser no bloqueante y dirigido por eventos. Esto significa que las operaciones de E/S (como la lectura de archivos, hacer solicitudes HTTP, etc.) se realizan de manera asíncrona usando callbacks.</p>
</div><h2>Ejemplo: Leyendo un Archivo Asíncronamente</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnMgPSByZXF1aXJlKCdmcycpOwoKZnMucmVhZEZpbGUoJ2V4YW1wbGUudHh0JywgJ3V0ZjgnLCBmdW5jdGlvbihlcnIsIGRhdGEpIHsKICAgIGlmIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBsZWVyIGVsIGFyY2hpdm86JywgZXJyKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICBjb25zb2xlLmxvZygnQ29udGVuaWRvIGRlbCBhcmNoaXZvOicsIGRhdGEpOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const fs = require('fs');

fs.readFile('example.txt', 'utf8', function(err, data) {
    if (err) {
        console.error('Error al leer el archivo:', err);
        return;
    }
    console.log('Contenido del archivo:', data);
});</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>fs.readFile</code> es una función asíncrona que lee el contenido de un archivo.</li>
<li>Toma tres argumentos: la ruta del archivo, la codificación y una función de callback.</li>
<li>La función de callback tiene dos parámetros: <code>err</code> y <code>data</code>.
<ul>
<li><code>err</code>: Si ocurre un error durante la operación de lectura del archivo, este parámetro contendrá el objeto de error.</li>
<li><code>data</code>: Si el archivo se lee con éxito, este parámetro contendrá el contenido del archivo.</li>
</ul>
</li>
<li>La función de callback registra el contenido del archivo en la consola si no hay error.</li>
</ul>
</div><h1>Manejo de Errores en Callbacks</h1>
<div class='content'><p>El manejo de errores es crucial en la programación asíncrona. Node.js sigue una convención donde el primer argumento de la función de callback es un objeto de error (si lo hay), seguido del resultado.</p>
</div><h2>Ejemplo: Manejo de Errores en Callbacks</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnMgPSByZXF1aXJlKCdmcycpOwoKZnMucmVhZEZpbGUoJ25vbmV4aXN0ZW50LnR4dCcsICd1dGY4JywgZnVuY3Rpb24oZXJyLCBkYXRhKSB7CiAgICBpZiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgbGVlciBlbCBhcmNoaXZvOicsIGVyci5tZXNzYWdlKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICBjb25zb2xlLmxvZygnQ29udGVuaWRvIGRlbCBhcmNoaXZvOicsIGRhdGEpOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const fs = require('fs');

fs.readFile('nonexistent.txt', 'utf8', function(err, data) {
    if (err) {
        console.error('Error al leer el archivo:', err.message);
        return;
    }
    console.log('Contenido del archivo:', data);
});</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li>La función de callback verifica si <code>err</code> no es nulo.</li>
<li>Si ocurre un error, registra el mensaje de error en la consola y sale de la función usando <code>return</code>.</li>
<li>Si no ocurre ningún error, registra el contenido del archivo.</li>
</ul>
</div><h1>Callbacks Anidados y Callback Hell</h1>
<div class='content'><p>Cuando se realizan múltiples operaciones asíncronas en secuencia, los callbacks pueden volverse profundamente anidados, llevando a lo que se conoce como &quot;callback hell&quot;.</p>
</div><h2>Ejemplo: Callbacks Anidados</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnMgPSByZXF1aXJlKCdmcycpOwoKZnMucmVhZEZpbGUoJ2ZpbGUxLnR4dCcsICd1dGY4JywgZnVuY3Rpb24oZXJyLCBkYXRhMSkgewogICAgaWYgKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGxlZXIgZmlsZTE6JywgZXJyKTsKICAgICAgICByZXR1cm47CiAgICB9CiAgICBmcy5yZWFkRmlsZSgnZmlsZTIudHh0JywgJ3V0ZjgnLCBmdW5jdGlvbihlcnIsIGRhdGEyKSB7CiAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBsZWVyIGZpbGUyOicsIGVycik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgZnMucmVhZEZpbGUoJ2ZpbGUzLnR4dCcsICd1dGY4JywgZnVuY3Rpb24oZXJyLCBkYXRhMykgewogICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBsZWVyIGZpbGUzOicsIGVycik7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbnRlbmlkbyBkZSBmaWxlMTonLCBkYXRhMSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb250ZW5pZG8gZGUgZmlsZTI6JywgZGF0YTIpOwogICAgICAgICAgICBjb25zb2xlLmxvZygnQ29udGVuaWRvIGRlIGZpbGUzOicsIGRhdGEzKTsKICAgICAgICB9KTsKICAgIH0pOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const fs = require('fs');

fs.readFile('file1.txt', 'utf8', function(err, data1) {
    if (err) {
        console.error('Error al leer file1:', err);
        return;
    }
    fs.readFile('file2.txt', 'utf8', function(err, data2) {
        if (err) {
            console.error('Error al leer file2:', err);
            return;
        }
        fs.readFile('file3.txt', 'utf8', function(err, data3) {
            if (err) {
                console.error('Error al leer file3:', err);
                return;
            }
            console.log('Contenido de file1:', data1);
            console.log('Contenido de file2:', data2);
            console.log('Contenido de file3:', data3);
        });
    });
});</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li>Este ejemplo demuestra la lectura de tres archivos secuencialmente.</li>
<li>Cada llamada a <code>fs.readFile</code> está anidada dentro del callback de la anterior.</li>
<li>Esta anidación hace que el código sea más difícil de leer y mantener.</li>
</ul>
</div><h1>Evitando el Callback Hell</h1>
<div class='content'><p>Para evitar el callback hell, puedes usar técnicas como:</p>
<ul>
<li><strong>Modularización de Funciones</strong>: Desglosa los callbacks anidados en funciones separadas.</li>
<li><strong>Promesas</strong>: Usa promesas para manejar operaciones asíncronas de manera más elegante.</li>
<li><strong>Async/Await</strong>: Usa la sintaxis <code>async</code> y <code>await</code> para un flujo de código que parezca más sincrónico.</li>
</ul>
</div><h2>Ejemplo: Usando Promesas</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnMgPSByZXF1aXJlKCdmcycpLnByb21pc2VzOwoKYXN5bmMgZnVuY3Rpb24gcmVhZEZpbGVzKCkgewogICAgdHJ5IHsKICAgICAgICBjb25zdCBkYXRhMSA9IGF3YWl0IGZzLnJlYWRGaWxlKCdmaWxlMS50eHQnLCAndXRmOCcpOwogICAgICAgIGNvbnN0IGRhdGEyID0gYXdhaXQgZnMucmVhZEZpbGUoJ2ZpbGUyLnR4dCcsICd1dGY4Jyk7CiAgICAgICAgY29uc3QgZGF0YTMgPSBhd2FpdCBmcy5yZWFkRmlsZSgnZmlsZTMudHh0JywgJ3V0ZjgnKTsKICAgICAgICBjb25zb2xlLmxvZygnQ29udGVuaWRvIGRlIGZpbGUxOicsIGRhdGExKTsKICAgICAgICBjb25zb2xlLmxvZygnQ29udGVuaWRvIGRlIGZpbGUyOicsIGRhdGEyKTsKICAgICAgICBjb25zb2xlLmxvZygnQ29udGVuaWRvIGRlIGZpbGUzOicsIGRhdGEzKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGxlZXIgZWwgYXJjaGl2bzonLCBlcnIpOwogICAgfQp9CgpyZWFkRmlsZXMoKTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const fs = require('fs').promises;

async function readFiles() {
    try {
        const data1 = await fs.readFile('file1.txt', 'utf8');
        const data2 = await fs.readFile('file2.txt', 'utf8');
        const data3 = await fs.readFile('file3.txt', 'utf8');
        console.log('Contenido de file1:', data1);
        console.log('Contenido de file2:', data2);
        console.log('Contenido de file3:', data3);
    } catch (err) {
        console.error('Error al leer el archivo:', err);
    }
}

readFiles();</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li>La función <code>fs.readFile</code> se usa con promesas al requerir <code>fs.promises</code>.</li>
<li>La función <code>readFiles</code> se declara como <code>async</code>, permitiendo el uso de <code>await</code> dentro de ella.</li>
<li>Cada expresión <code>await</code> pausa la ejecución de la función <code>readFiles</code> hasta que la promesa se resuelva.</li>
<li>Los errores se capturan usando un bloque <code>try...catch</code>.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Los callbacks son esenciales para manejar operaciones asíncronas en Node.js. Entender cómo usarlos efectivamente, manejar errores y evitar el callback hell es crucial para escribir código limpio y mantenible. A medida que avances, considera usar promesas y async/await para manejar el código asíncrono de manera más eficiente.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='streams-and-events'>&#x25C4;Streams y Eventos</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Callbacks en Node.js</a>
	</div>
	<div class='col-4 text-end'>
					<a href='promises'>Promises &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
