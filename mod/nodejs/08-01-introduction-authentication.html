<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducción a la Autenticación</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nodejs/08-01-introduction-authentication" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nodejs/08-01-introduction-authentication" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nodejs/08-01-introduction-authentication" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<a href="https://enterprisecampus.net/mod/nodejs/08-01-introduction-authentication" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/nodejs/08-01-introduction-authentication" class="px-2">CA</a>
<br>
			<cite>Construyendo la sociedad de hoy y del mañana</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Lenguajes de Programación</a>
				 					<a href="/categ/frameworks">Frameworks y Librerías</a>
				 					<a href="/categ/tech-tools">Herramientas Técnicas</a>
				 					<a href="/categ/foundations">Fundamentos Teóricos</a>
				 					<a href="/categ/soft-skills">Habilidades Sociales</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-04-crud-operations' title="Operaciones CRUD">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Introducción a la Autenticación</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-02-using-passport' title="Usando Passport.js">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>La autenticación es un proceso fundamental en el desarrollo de aplicaciones web y móviles, ya que permite verificar la identidad de los usuarios que intentan acceder a un sistema. En este módulo, aprenderemos los conceptos básicos de la autenticación, los diferentes métodos disponibles y cómo implementarlos en una aplicación Node.js.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Autenticación vs. Autorización</strong>:</p>
<ul>
<li><strong>Autenticación</strong>: Proceso de verificar la identidad de un usuario. Ejemplo: Iniciar sesión con un nombre de usuario y contraseña.</li>
<li><strong>Autorización</strong>: Proceso de determinar si un usuario autenticado tiene permiso para realizar una acción específica. Ejemplo: Acceder a una página de administración.</li>
</ul>
</li>
<li>
<p><strong>Métodos de Autenticación</strong>:</p>
<ul>
<li><strong>Contraseñas</strong>: El método más común, donde los usuarios proporcionan un nombre de usuario y una contraseña.</li>
<li><strong>Tokens</strong>: Utilización de tokens (como JWT) para autenticar usuarios sin necesidad de enviar credenciales en cada solicitud.</li>
<li><strong>OAuth</strong>: Protocolo que permite a los usuarios autorizar aplicaciones de terceros para acceder a sus recursos sin compartir sus credenciales.</li>
</ul>
</li>
<li>
<p><strong>Almacenamiento Seguro de Contraseñas</strong>:</p>
<ul>
<li><strong>Hashing</strong>: Transformar una contraseña en una cadena de caracteres irreversibles utilizando algoritmos como bcrypt.</li>
<li><strong>Salting</strong>: Añadir una cadena aleatoria a la contraseña antes de hashearla para proteger contra ataques de diccionario y de fuerza bruta.</li>
</ul>
</li>
</ol>
</div><h1><p>Ejemplo Práctico: Autenticación Básica con Contraseñas</p>
</h1>
<div class='content'></div><h2><p>Paso 1: Configuración del Proyecto</p>
</h2>
<div class='content'><p>Primero, crea un nuevo proyecto Node.js e instala las dependencias necesarias:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bWtkaXIgYXV0aC1leGFtcGxlCmNkIGF1dGgtZXhhbXBsZQpucG0gaW5pdCAteQpucG0gaW5zdGFsbCBleHByZXNzIGJjcnlwdGpzIGpzb253ZWJ0b2tlbiBib2R5LXBhcnNlcg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mkdir auth-example
cd auth-example
npm init -y
npm install express bcryptjs jsonwebtoken body-parser</pre></div><div class='content'></div><h2><p>Paso 2: Configuración del Servidor Express</p>
</h2>
<div class='content'><p>Crea un archivo <code>server.js</code> y configura un servidor básico con Express:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7CmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7CmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpOwoKY29uc3QgYXBwID0gZXhwcmVzcygpOwphcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTsKCmNvbnN0IHVzZXJzID0gW107IC8vIEFycmF5IHBhcmEgYWxtYWNlbmFyIHVzdWFyaW9zIChlbiB1biBlbnRvcm5vIHJlYWwsIHVzYXIgdW5hIGJhc2UgZGUgZGF0b3MpCgphcHAubGlzdGVuKDMwMDAsICgpID0+IHsKICBjb25zb2xlLmxvZygnU2VydmVyIHJ1bm5pbmcgb24gcG9ydCAzMDAwJyk7Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const bodyParser = require('body-parser');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');

const app = express();
app.use(bodyParser.json());

const users = []; // Array para almacenar usuarios (en un entorno real, usar una base de datos)

app.listen(3000, () =&gt; {
  console.log('Server running on port 3000');
});</pre></div><div class='content'></div><h2><p>Paso 3: Registro de Usuarios</p>
</h2>
<div class='content'><p>Añade una ruta para registrar nuevos usuarios. Las contraseñas se hashean antes de almacenarse:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwLnBvc3QoJy9yZWdpc3RlcicsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSByZXEuYm9keTsKICBjb25zdCBoYXNoZWRQYXNzd29yZCA9IGF3YWl0IGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMCk7CiAgdXNlcnMucHVzaCh7IHVzZXJuYW1lLCBwYXNzd29yZDogaGFzaGVkUGFzc3dvcmQgfSk7CiAgcmVzLnN0YXR1cygyMDEpLnNlbmQoJ1VzZXIgcmVnaXN0ZXJlZCcpOwp9KTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>app.post('/register', async (req, res) =&gt; {
  const { username, password } = req.body;
  const hashedPassword = await bcrypt.hash(password, 10);
  users.push({ username, password: hashedPassword });
  res.status(201).send('User registered');
});</pre></div><div class='content'></div><h2><p>Paso 4: Inicio de Sesión</p>
</h2>
<div class='content'><p>Añade una ruta para que los usuarios inicien sesión. Si las credenciales son correctas, se genera un token JWT:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwLnBvc3QoJy9sb2dpbicsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkIH0gPSByZXEuYm9keTsKICBjb25zdCB1c2VyID0gdXNlcnMuZmluZCh1ID0+IHUudXNlcm5hbWUgPT09IHVzZXJuYW1lKTsKICBpZiAodXNlciAmJiBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgdXNlci5wYXNzd29yZCkpIHsKICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyB1c2VybmFtZTogdXNlci51c2VybmFtZSB9LCAnc2VjcmV0X2tleScsIHsgZXhwaXJlc0luOiAnMWgnIH0pOwogICAgcmVzLmpzb24oeyB0b2tlbiB9KTsKICB9IGVsc2UgewogICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoJ0ludmFsaWQgY3JlZGVudGlhbHMnKTsKICB9Cn0pOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>app.post('/login', async (req, res) =&gt; {
  const { username, password } = req.body;
  const user = users.find(u =&gt; u.username === username);
  if (user &amp;&amp; await bcrypt.compare(password, user.password)) {
    const token = jwt.sign({ username: user.username }, 'secret_key', { expiresIn: '1h' });
    res.json({ token });
  } else {
    res.status(401).send('Invalid credentials');
  }
});</pre></div><div class='content'></div><h2><p>Paso 5: Middleware de Autenticación</p>
</h2>
<div class='content'><p>Crea un middleware para proteger rutas que requieren autenticación:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgYXV0aGVudGljYXRlID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7CiAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVyKCdBdXRob3JpemF0aW9uJykucmVwbGFjZSgnQmVhcmVyICcsICcnKTsKICB0cnkgewogICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sICdzZWNyZXRfa2V5Jyk7CiAgICByZXEudXNlciA9IGRlY29kZWQ7CiAgICBuZXh0KCk7CiAgfSBjYXRjaCAoZXJyKSB7CiAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCgnVW5hdXRob3JpemVkJyk7CiAgfQp9OwoKYXBwLmdldCgnL3Byb3RlY3RlZCcsIGF1dGhlbnRpY2F0ZSwgKHJlcSwgcmVzKSA9PiB7CiAgcmVzLnNlbmQoJ1RoaXMgaXMgYSBwcm90ZWN0ZWQgcm91dGUnKTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const authenticate = (req, res, next) =&gt; {
  const token = req.header('Authorization').replace('Bearer ', '');
  try {
    const decoded = jwt.verify(token, 'secret_key');
    req.user = decoded;
    next();
  } catch (err) {
    res.status(401).send('Unauthorized');
  }
};

app.get('/protected', authenticate, (req, res) =&gt; {
  res.send('This is a protected route');
});</pre></div><div class='content'></div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Implementar Logout</p>
</h2>
<div class='content'><p>Implementa una ruta <code>/logout</code> que invalide el token JWT. (Pista: Puedes mantener una lista de tokens inválidos en memoria o en una base de datos).</p>
</div><h2><p>Ejercicio 2: Autenticación con OAuth</p>
</h2>
<div class='content'><p>Investiga e implementa la autenticación con OAuth utilizando un proveedor como Google o GitHub.</p>
</div><h1><p>Resumen</p>
</h1>
<div class='content'><p>En esta sección, hemos cubierto los conceptos básicos de la autenticación, incluyendo la diferencia entre autenticación y autorización, métodos de autenticación y almacenamiento seguro de contraseñas. También hemos implementado un ejemplo práctico de autenticación básica con contraseñas utilizando Node.js y Express. En los próximos temas, profundizaremos en técnicas más avanzadas de autenticación y autorización.</p>
<p>¡Continúa con el siguiente tema para aprender a usar Passport.js para la autenticación en Node.js!</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-04-crud-operations' title="Operaciones CRUD">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-02-using-passport' title="Usando Passport.js">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Publicidad</h1>
<p>Este espacio está destinado a publicidad.</p>
<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>¡Gracias por colaborar!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
