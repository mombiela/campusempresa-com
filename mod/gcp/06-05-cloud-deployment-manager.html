<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Deployment Manager</title>

    <link rel="alternate" href="https://campusempresa.com/mod/gcp/06-05-cloud-deployment-manager" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/gcp/06-05-cloud-deployment-manager" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/gcp/06-05-cloud-deployment-manager" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/gcp/06-05-cloud-deployment-manager" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/gcp/06-05-cloud-deployment-manager" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-04-stackdriver-monitoring' title="Monitoreo de Stackdriver">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Cloud Deployment Manager</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-anthos' title="Híbrido y multi-nube con Anthos">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>Google Cloud Deployment Manager es una herramienta de infraestructura como código (IaC) que permite definir, desplegar y gestionar recursos de Google Cloud Platform (GCP) utilizando archivos de configuración. Con Deployment Manager, puedes automatizar la creación y gestión de tus recursos en GCP, asegurando consistencia y eficiencia en tus despliegues.</p>
</div><h1>Objetivos de Aprendizaje</h1>
<div class='content'><p>Al final de este tema, deberías ser capaz de:</p>
<ol>
<li>Comprender los conceptos básicos de Google Cloud Deployment Manager.</li>
<li>Crear y gestionar plantillas de configuración.</li>
<li>Desplegar recursos en GCP utilizando Deployment Manager.</li>
<li>Actualizar y eliminar despliegues.</li>
</ol>
</div><h1>Conceptos Clave</h1>
<div class='content'></div><h2>1. Archivos de Configuración</h2>
<div class='content'><p>Los archivos de configuración son documentos YAML o JSON que describen los recursos que deseas crear y gestionar en GCP.</p>
</div><h2>2. Plantillas</h2>
<div class='content'><p>Las plantillas son archivos Python o Jinja2 que permiten reutilizar configuraciones y parametrizar despliegues.</p>
</div><h2>3. Despliegues</h2>
<div class='content'><p>Un despliegue es una instancia de recursos creados y gestionados por Deployment Manager a partir de un archivo de configuración.</p>
</div><h1>Ejemplo Práctico</h1>
<div class='content'></div><h2>Paso 1: Crear un Archivo de Configuración</h2>
<div class='content'><p>Vamos a crear un archivo de configuración simple en YAML para desplegar una instancia de Compute Engine.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2bS1jb25maWcueWFtbApyZXNvdXJjZXM6CiAgLSBuYW1lOiBteS12bQogICAgdHlwZTogY29tcHV0ZS52MS5pbnN0YW5jZQogICAgcHJvcGVydGllczoKICAgICAgem9uZTogdXMtY2VudHJhbDEtYQogICAgICBtYWNoaW5lVHlwZTogem9uZXMvdXMtY2VudHJhbDEtYS9tYWNoaW5lVHlwZXMvbjEtc3RhbmRhcmQtMQogICAgICBkaXNrczoKICAgICAgICAtIGRldmljZU5hbWU6IGJvb3QKICAgICAgICAgIHR5cGU6IFBFUlNJU1RFTlQKICAgICAgICAgIGJvb3Q6IHRydWUKICAgICAgICAgIGF1dG9EZWxldGU6IHRydWUKICAgICAgICAgIGluaXRpYWxpemVQYXJhbXM6CiAgICAgICAgICAgIHNvdXJjZUltYWdlOiBwcm9qZWN0cy9kZWJpYW4tY2xvdWQvZ2xvYmFsL2ltYWdlcy9mYW1pbHkvZGViaWFuLTkKICAgICAgbmV0d29ya0ludGVyZmFjZXM6CiAgICAgICAgLSBuZXR3b3JrOiBnbG9iYWwvbmV0d29ya3MvZGVmYXVsdAogICAgICAgICAgYWNjZXNzQ29uZmlnczoKICAgICAgICAgICAgLSBuYW1lOiBFeHRlcm5hbCBOQVQKICAgICAgICAgICAgICB0eXBlOiBPTkVfVE9fT05FX05BVA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># vm-config.yaml
resources:
  - name: my-vm
    type: compute.v1.instance
    properties:
      zone: us-central1-a
      machineType: zones/us-central1-a/machineTypes/n1-standard-1
      disks:
        - deviceName: boot
          type: PERSISTENT
          boot: true
          autoDelete: true
          initializeParams:
            sourceImage: projects/debian-cloud/global/images/family/debian-9
      networkInterfaces:
        - network: global/networks/default
          accessConfigs:
            - name: External NAT
              type: ONE_TO_ONE_NAT</pre></div><div class='content'></div><h2>Paso 2: Desplegar el Archivo de Configuración</h2>
<div class='content'><p>Utiliza el comando <code>gcloud</code> para desplegar el archivo de configuración.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2Nsb3VkIGRlcGxveW1lbnQtbWFuYWdlciBkZXBsb3ltZW50cyBjcmVhdGUgbXktZGVwbG95bWVudCAtLWNvbmZpZyB2bS1jb25maWcueWFtbA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcloud deployment-manager deployments create my-deployment --config vm-config.yaml</pre></div><div class='content'></div><h2>Paso 3: Verificar el Despliegue</h2>
<div class='content'><p>Puedes verificar el estado del despliegue utilizando el siguiente comando:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2Nsb3VkIGRlcGxveW1lbnQtbWFuYWdlciBkZXBsb3ltZW50cyBkZXNjcmliZSBteS1kZXBsb3ltZW50"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcloud deployment-manager deployments describe my-deployment</pre></div><div class='content'></div><h2>Paso 4: Actualizar el Despliegue</h2>
<div class='content'><p>Para actualizar un despliegue, modifica el archivo de configuración y luego ejecuta:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2Nsb3VkIGRlcGxveW1lbnQtbWFuYWdlciBkZXBsb3ltZW50cyB1cGRhdGUgbXktZGVwbG95bWVudCAtLWNvbmZpZyB2bS1jb25maWcueWFtbA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcloud deployment-manager deployments update my-deployment --config vm-config.yaml</pre></div><div class='content'></div><h2>Paso 5: Eliminar el Despliegue</h2>
<div class='content'><p>Para eliminar un despliegue y todos los recursos asociados, utiliza:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2Nsb3VkIGRlcGxveW1lbnQtbWFuYWdlciBkZXBsb3ltZW50cyBkZWxldGUgbXktZGVwbG95bWVudA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcloud deployment-manager deployments delete my-deployment</pre></div><div class='content'></div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio 1: Desplegar una Red VPC y una Instancia de VM</h2>
<div class='content'><ol>
<li><strong>Crear el archivo de configuración</strong>: Crea un archivo YAML que despliegue una red VPC personalizada y una instancia de VM dentro de esa red.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2cGMtdm0tY29uZmlnLnlhbWwKcmVzb3VyY2VzOgogIC0gbmFtZTogY3VzdG9tLW5ldHdvcmsKICAgIHR5cGU6IGNvbXB1dGUudjEubmV0d29yawogICAgcHJvcGVydGllczoKICAgICAgYXV0b0NyZWF0ZVN1Ym5ldHdvcmtzOiBmYWxzZQoKICAtIG5hbWU6IGN1c3RvbS1zdWJuZXR3b3JrCiAgICB0eXBlOiBjb21wdXRlLnYxLnN1Ym5ldHdvcmsKICAgIHByb3BlcnRpZXM6CiAgICAgIGlwQ2lkclJhbmdlOiAxMC4wLjAuMC8yNAogICAgICByZWdpb246IHVzLWNlbnRyYWwxCiAgICAgIG5ldHdvcms6ICQocmVmLmN1c3RvbS1uZXR3b3JrLnNlbGZMaW5rKQoKICAtIG5hbWU6IG15LXZtCiAgICB0eXBlOiBjb21wdXRlLnYxLmluc3RhbmNlCiAgICBwcm9wZXJ0aWVzOgogICAgICB6b25lOiB1cy1jZW50cmFsMS1hCiAgICAgIG1hY2hpbmVUeXBlOiB6b25lcy91cy1jZW50cmFsMS1hL21hY2hpbmVUeXBlcy9uMS1zdGFuZGFyZC0xCiAgICAgIGRpc2tzOgogICAgICAgIC0gZGV2aWNlTmFtZTogYm9vdAogICAgICAgICAgdHlwZTogUEVSU0lTVEVOVAogICAgICAgICAgYm9vdDogdHJ1ZQogICAgICAgICAgYXV0b0RlbGV0ZTogdHJ1ZQogICAgICAgICAgaW5pdGlhbGl6ZVBhcmFtczoKICAgICAgICAgICAgc291cmNlSW1hZ2U6IHByb2plY3RzL2RlYmlhbi1jbG91ZC9nbG9iYWwvaW1hZ2VzL2ZhbWlseS9kZWJpYW4tOQogICAgICBuZXR3b3JrSW50ZXJmYWNlczoKICAgICAgICAtIHN1Ym5ldHdvcms6ICQocmVmLmN1c3RvbS1zdWJuZXR3b3JrLnNlbGZMaW5rKQogICAgICAgICAgYWNjZXNzQ29uZmlnczoKICAgICAgICAgICAgLSBuYW1lOiBFeHRlcm5hbCBOQVQKICAgICAgICAgICAgICB0eXBlOiBPTkVfVE9fT05FX05BVA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># vpc-vm-config.yaml
resources:
  - name: custom-network
    type: compute.v1.network
    properties:
      autoCreateSubnetworks: false

  - name: custom-subnetwork
    type: compute.v1.subnetwork
    properties:
      ipCidrRange: 10.0.0.0/24
      region: us-central1
      network: $(ref.custom-network.selfLink)

  - name: my-vm
    type: compute.v1.instance
    properties:
      zone: us-central1-a
      machineType: zones/us-central1-a/machineTypes/n1-standard-1
      disks:
        - deviceName: boot
          type: PERSISTENT
          boot: true
          autoDelete: true
          initializeParams:
            sourceImage: projects/debian-cloud/global/images/family/debian-9
      networkInterfaces:
        - subnetwork: $(ref.custom-subnetwork.selfLink)
          accessConfigs:
            - name: External NAT
              type: ONE_TO_ONE_NAT</pre></div><div class='content'><ol start="2">
<li><strong>Desplegar el archivo de configuración</strong>: Utiliza el comando <code>gcloud</code> para desplegar el archivo de configuración.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2Nsb3VkIGRlcGxveW1lbnQtbWFuYWdlciBkZXBsb3ltZW50cyBjcmVhdGUgdnBjLXZtLWRlcGxveW1lbnQgLS1jb25maWcgdnBjLXZtLWNvbmZpZy55YW1s"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcloud deployment-manager deployments create vpc-vm-deployment --config vpc-vm-config.yaml</pre></div><div class='content'><ol start="3">
<li><strong>Verificar el despliegue</strong>: Asegúrate de que la red VPC y la instancia de VM se hayan creado correctamente.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2Nsb3VkIGRlcGxveW1lbnQtbWFuYWdlciBkZXBsb3ltZW50cyBkZXNjcmliZSB2cGMtdm0tZGVwbG95bWVudA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcloud deployment-manager deployments describe vpc-vm-deployment</pre></div><div class='content'></div><h2>Solución del Ejercicio</h2>
<div class='content'><p>Si has seguido los pasos correctamente, deberías ver una red VPC personalizada y una instancia de VM desplegada en GCP. Si encuentras algún error, revisa los mensajes de error proporcionados por <code>gcloud</code> y asegúrate de que tu archivo de configuración esté correctamente formateado.</p>
</div><h1>Conclusión</h1>
<div class='content'><p>En este tema, hemos aprendido a utilizar Google Cloud Deployment Manager para definir, desplegar y gestionar recursos en GCP. Hemos cubierto los conceptos básicos, creado archivos de configuración, y realizado despliegues, actualizaciones y eliminaciones de recursos. Con esta herramienta, puedes automatizar y gestionar tus infraestructuras en GCP de manera eficiente y consistente.</p>
<p>En el próximo tema, exploraremos cómo utilizar <strong>Cloud Build</strong> para automatizar tus procesos de construcción y despliegue de aplicaciones.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-04-stackdriver-monitoring' title="Monitoreo de Stackdriver">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-anthos' title="Híbrido y multi-nube con Anthos">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
