<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Mejores Prácticas de Seguridad</title>

    <link rel="alternate" href="https://campusempresa.com/mod/powershell/09-03-security-best-practices" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/powershell/09-03-security-best-practices" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/powershell/09-03-security-best-practices" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<a href="https://enterprisecampus.net/mod/powershell/09-03-security-best-practices" class="px-2">EN</a></b>
	|
	<b class="px-2">ES</b>
	|
	<a href="https://campusempresa.cat/mod/powershell/09-03-security-best-practices" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>Todo el conocimiento a tu alcance</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					 				<a href="/"><i class="bi bi-house-fill"></i> HOME</a>
											</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-02-performance-optimization' title="Optimización del Rendimiento">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Mejores Prácticas de Seguridad</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-04-version-control-git' title="Control de Versiones con Git">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En este tema, abordaremos las mejores prácticas de seguridad en PowerShell. La seguridad es un aspecto crucial en cualquier entorno de scripting y automatización, y PowerShell no es una excepción. A continuación, desglosaremos los conceptos clave, proporcionaremos ejemplos prácticos y ejercicios para reforzar el aprendizaje.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ol>
<li><strong>Ejecución de Políticas (Execution Policies)</strong></li>
<li><strong>Firmado de Scripts</strong></li>
<li><strong>Uso de Credenciales Seguras</strong></li>
<li><strong>Control de Acceso Basado en Roles (RBAC)</strong></li>
<li><strong>Auditoría y Registro de Actividades</strong></li>
<li><strong>Prácticas de Codificación Segura</strong></li>
</ol>
</div><h1><ol>
<li>Ejecución de Políticas (Execution Policies)</li>
</ol></h1>
<div class='content'><p>Las políticas de ejecución determinan qué scripts pueden ejecutarse en un sistema. PowerShell tiene varias políticas de ejecución que se pueden configurar para mejorar la seguridad.</p>
</div><h2>Tipos de Políticas de Ejecución</h2>
<div class='content'><table>
<thead>
<tr>
<th>Política</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td>Restricted</td>
<td>No permite la ejecución de scripts.</td>
</tr>
<tr>
<td>AllSigned</td>
<td>Permite la ejecución de scripts firmados por un editor de confianza.</td>
</tr>
<tr>
<td>RemoteSigned</td>
<td>Permite la ejecución de scripts locales sin firmar y scripts remotos firmados.</td>
</tr>
<tr>
<td>Unrestricted</td>
<td>Permite la ejecución de todos los scripts, pero advierte sobre scripts descargados.</td>
</tr>
<tr>
<td>Bypass</td>
<td>No bloquea nada y no muestra advertencias ni mensajes.</td>
</tr>
</tbody>
</table>
</div><h2>Ejemplo de Configuración de Política de Ejecución</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBWZXJpZmljYXIgbGEgcG9sw610aWNhIGRlIGVqZWN1Y2nDs24gYWN0dWFsCkdldC1FeGVjdXRpb25Qb2xpY3kKCiMgRXN0YWJsZWNlciBsYSBwb2zDrXRpY2EgZGUgZWplY3VjacOzbiBhIFJlbW90ZVNpZ25lZApTZXQtRXhlY3V0aW9uUG9saWN5IFJlbW90ZVNpZ25lZCAtU2NvcGUgQ3VycmVudFVzZXI="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Verificar la pol&iacute;tica de ejecuci&oacute;n actual
Get-ExecutionPolicy

# Establecer la pol&iacute;tica de ejecuci&oacute;n a RemoteSigned
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser</pre></div><div class='content'></div><h1><ol start="2">
<li>Firmado de Scripts</li>
</ol></h1>
<div class='content'><p>Firmar scripts es una práctica recomendada para asegurar que los scripts no han sido alterados y provienen de una fuente confiable.</p>
</div><h2>Firmar un Script</h2>
<div class='content'><ol>
<li>
<p><strong>Obtener un Certificado de Firma de Código</strong>: Puedes obtener un certificado de una autoridad de certificación (CA) o crear uno propio para pruebas.</p>
</li>
<li>
<p><strong>Firmar el Script</strong>: Utiliza el cmdlet <code>Set-AuthenticodeSignature</code>.</p>
</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBGaXJtYXIgdW4gc2NyaXB0IGNvbiB1biBjZXJ0aWZpY2FkbwokY2VydCA9IEdldC1DaGlsZEl0ZW0gLVBhdGggQ2VydDpcQ3VycmVudFVzZXJcTXkgLUNvZGVTaWduaW5nQ2VydApTZXQtQXV0aGVudGljb2RlU2lnbmF0dXJlIC1GaWxlUGF0aCAuXG1pLXNjcmlwdC5wczEgLUNlcnRpZmljYXRlICRjZXJ0"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Firmar un script con un certificado
$cert = Get-ChildItem -Path Cert:\CurrentUser\My -CodeSigningCert
Set-AuthenticodeSignature -FilePath .\mi-script.ps1 -Certificate $cert</pre></div><div class='content'></div><h1><ol start="3">
<li>Uso de Credenciales Seguras</li>
</ol></h1>
<div class='content'><p>Evita almacenar credenciales en texto plano. Utiliza el cmdlet <code>Get-Credential</code> para solicitar credenciales de manera segura.</p>
</div><h2>Ejemplo de Uso de Credenciales Seguras</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTb2xpY2l0YXIgY3JlZGVuY2lhbGVzIGFsIHVzdWFyaW8KJGNyZWQgPSBHZXQtQ3JlZGVudGlhbAoKIyBVc2FyIGxhcyBjcmVkZW5jaWFsZXMgZW4gdW4gY29tYW5kbwpJbnZva2UtQ29tbWFuZCAtQ29tcHV0ZXJOYW1lICJTZXJ2aWRvclJlbW90byIgLUNyZWRlbnRpYWwgJGNyZWQgLVNjcmlwdEJsb2NrIHsgR2V0LVByb2Nlc3MgfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Solicitar credenciales al usuario
$cred = Get-Credential

# Usar las credenciales en un comando
Invoke-Command -ComputerName &quot;ServidorRemoto&quot; -Credential $cred -ScriptBlock { Get-Process }</pre></div><div class='content'></div><h1><ol start="4">
<li>Control de Acceso Basado en Roles (RBAC)</li>
</ol></h1>
<div class='content'><p>Implementa RBAC para limitar el acceso a cmdlets y funciones específicas según el rol del usuario.</p>
</div><h2>Ejemplo de Configuración de RBAC</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhciB1biByb2wgcGVyc29uYWxpemFkbwpOZXctUm9sZURlZmluaXRpb24gLU5hbWUgIk9wZXJhZG9yRGVTaXN0ZW1hIiAtRGVzY3JpcHRpb24gIlBlcm1pdGUgZWplY3V0YXIgY21kbGV0cyBkZSBhZG1pbmlzdHJhY2nDs24gZGVsIHNpc3RlbWEiIC1DbWRsZXRzICJHZXQtUHJvY2VzcyIsICJSZXN0YXJ0LVNlcnZpY2UiCgojIEFzaWduYXIgZWwgcm9sIGEgdW4gdXN1YXJpbwpBZGQtUm9sZUFzc2lnbm1lbnQgLVJvbGVEZWZpbml0aW9uTmFtZSAiT3BlcmFkb3JEZVNpc3RlbWEiIC1QcmluY2lwYWxOYW1lICJ1c3VhcmlvQGRvbWluaW8uY29tIg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Crear un rol personalizado
New-RoleDefinition -Name &quot;OperadorDeSistema&quot; -Description &quot;Permite ejecutar cmdlets de administraci&oacute;n del sistema&quot; -Cmdlets &quot;Get-Process&quot;, &quot;Restart-Service&quot;

# Asignar el rol a un usuario
Add-RoleAssignment -RoleDefinitionName &quot;OperadorDeSistema&quot; -PrincipalName &quot;usuario@dominio.com&quot;</pre></div><div class='content'></div><h1><ol start="5">
<li>Auditoría y Registro de Actividades</li>
</ol></h1>
<div class='content'><p>Habilita la auditoría y el registro de actividades para monitorear y registrar el uso de PowerShell.</p>
</div><h2>Ejemplo de Habilitación de Registro</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBIYWJpbGl0YXIgZWwgcmVnaXN0cm8gZGUgdHJhbnNjcmlwY2nDs24KU3RhcnQtVHJhbnNjcmlwdCAtUGF0aCAiQzpcTG9nc1xQb3dlclNoZWxsVHJhbnNjcmlwdC5sb2ciCgojIEVqZWN1dGFyIGNvbWFuZG9zLi4uCgojIERldGVuZXIgZWwgcmVnaXN0cm8gZGUgdHJhbnNjcmlwY2nDs24KU3RvcC1UcmFuc2NyaXB0"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Habilitar el registro de transcripci&oacute;n
Start-Transcript -Path &quot;C:\Logs\PowerShellTranscript.log&quot;

# Ejecutar comandos...

# Detener el registro de transcripci&oacute;n
Stop-Transcript</pre></div><div class='content'></div><h1><ol start="6">
<li>Prácticas de Codificación Segura</li>
</ol></h1>
<div class='content'><p>Adopta prácticas de codificación segura para minimizar vulnerabilidades.</p>
</div><h2>Consejos de Codificación Segura</h2>
<div class='content'><ul>
<li><strong>Validar Entradas</strong>: Siempre valida las entradas del usuario para evitar inyecciones de comandos.</li>
<li><strong>Manejo de Errores</strong>: Implementa un manejo de errores robusto para evitar la exposición de información sensible.</li>
<li><strong>Principio de Mínimos Privilegios</strong>: Ejecuta scripts con los mínimos privilegios necesarios.</li>
</ul>
</div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio 1: Configuración de Política de Ejecución</h2>
<div class='content'><ol>
<li>Verifica la política de ejecución actual en tu sistema.</li>
<li>Cambia la política de ejecución a <code>RemoteSigned</code>.</li>
<li>Intenta ejecutar un script no firmado y observa el resultado.</li>
</ol>
</div><h2>Solución</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBWZXJpZmljYXIgbGEgcG9sw610aWNhIGRlIGVqZWN1Y2nDs24gYWN0dWFsCkdldC1FeGVjdXRpb25Qb2xpY3kKCiMgRXN0YWJsZWNlciBsYSBwb2zDrXRpY2EgZGUgZWplY3VjacOzbiBhIFJlbW90ZVNpZ25lZApTZXQtRXhlY3V0aW9uUG9saWN5IFJlbW90ZVNpZ25lZCAtU2NvcGUgQ3VycmVudFVzZXIKCiMgSW50ZW50YXIgZWplY3V0YXIgdW4gc2NyaXB0IG5vIGZpcm1hZG8KLlxtaS1zY3JpcHQtbm8tZmlybWFkby5wczE="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Verificar la pol&iacute;tica de ejecuci&oacute;n actual
Get-ExecutionPolicy

# Establecer la pol&iacute;tica de ejecuci&oacute;n a RemoteSigned
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser

# Intentar ejecutar un script no firmado
.\mi-script-no-firmado.ps1</pre></div><div class='content'></div><h2>Ejercicio 2: Firmar y Ejecutar un Script</h2>
<div class='content'><ol>
<li>Crea un certificado de firma de código (para pruebas).</li>
<li>Firma un script con el certificado.</li>
<li>Ejecuta el script firmado.</li>
</ol>
</div><h2>Solución</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhciB1biBjZXJ0aWZpY2FkbyBkZSBmaXJtYSBkZSBjw7NkaWdvIChwYXJhIHBydWViYXMpCiRjZXJ0ID0gTmV3LVNlbGZTaWduZWRDZXJ0aWZpY2F0ZSAtVHlwZSBDb2RlU2lnbmluZ0NlcnQgLVN1YmplY3QgIkNOPU1pQ2VydGlmaWNhZG8iCgojIEZpcm1hciBlbCBzY3JpcHQKU2V0LUF1dGhlbnRpY29kZVNpZ25hdHVyZSAtRmlsZVBhdGggLlxtaS1zY3JpcHQucHMxIC1DZXJ0aWZpY2F0ZSAkY2VydAoKIyBFamVjdXRhciBlbCBzY3JpcHQgZmlybWFkbwouXG1pLXNjcmlwdC5wczE="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Crear un certificado de firma de c&oacute;digo (para pruebas)
$cert = New-SelfSignedCertificate -Type CodeSigningCert -Subject &quot;CN=MiCertificado&quot;

# Firmar el script
Set-AuthenticodeSignature -FilePath .\mi-script.ps1 -Certificate $cert

# Ejecutar el script firmado
.\mi-script.ps1</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>En esta sección, hemos cubierto las mejores prácticas de seguridad en PowerShell, incluyendo la configuración de políticas de ejecución, el firmado de scripts, el uso de credenciales seguras, la implementación de RBAC, la auditoría y el registro de actividades, y las prácticas de codificación segura. Estas prácticas son esenciales para proteger tus scripts y el entorno en el que se ejecutan. Asegúrate de aplicarlas en tus proyectos para mantener un alto nivel de seguridad.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-02-performance-optimization' title="Optimización del Rendimiento">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-04-version-control-git' title="Control de Versiones con Git">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Publicidad</h1>
<p>Este espacio está destinado a publicidad.</p>
<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>¡Gracias por colaborar!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			









		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">El Proyecto</a> | 
<a href="/about">Sobre nosotros</a> | 
<a href="/contribute">Contribuir</a> | 
<a href="/donate">Donaciones</a> | 
<a href="/licence">Licencia</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
