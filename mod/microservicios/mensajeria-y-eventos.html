<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mensajería y Eventos en Microservicios</title>

    <link rel="alternate" href="https://campusempresa.com/mod/microservicios/mensajeria-y-eventos" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/microservicios/mensajeria-y-eventos" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/microservicios/mensajeria-y-eventos" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/microservicios/mensajeria-y-eventos" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/microservicios/mensajeria-y-eventos" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='apis-restful'>&#x25C4;APIs RESTful</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Mensajería y Eventos en Microservicios</a>
	</div>
	<div class='col-4 text-end'>
					<a href='patrones-de-implementacion'>Patrones de Implementación &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En el contexto de microservicios, la comunicación entre servicios es crucial para el correcto funcionamiento del sistema. Dos patrones comunes para esta comunicación son la mensajería y los eventos. Este tema abordará ambos conceptos, sus diferencias, ventajas, desventajas y cómo implementarlos en un sistema de microservicios.</p>
</div><h1>Mensajería</h1>
<div class='content'></div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Mensajería Asíncrona</strong>: Permite que los servicios se comuniquen sin esperar una respuesta inmediata. Esto mejora la escalabilidad y la resiliencia del sistema.</li>
<li><strong>Colas de Mensajes</strong>: Utilizadas para almacenar mensajes hasta que el servicio receptor esté listo para procesarlos.</li>
<li><strong>Brokers de Mensajes</strong>: Sistemas intermediarios que gestionan las colas de mensajes, como RabbitMQ, Apache Kafka y AWS SQS.</li>
</ul>
</div><h2>Ventajas</h2>
<div class='content'><ul>
<li><strong>Desacoplamiento</strong>: Los servicios no necesitan conocer la ubicación o la implementación de otros servicios.</li>
<li><strong>Escalabilidad</strong>: Los servicios pueden escalar independientemente.</li>
<li><strong>Resiliencia</strong>: Los mensajes pueden ser almacenados temporalmente si un servicio está inactivo.</li>
</ul>
</div><h2>Desventajas</h2>
<div class='content'><ul>
<li><strong>Complejidad</strong>: Introduce complejidad adicional en la gestión de mensajes y errores.</li>
<li><strong>Latencia</strong>: Puede haber una latencia adicional debido a la naturaleza asíncrona.</li>
</ul>
</div><h2>Ejemplo de Código</h2>
<div class='content'><p>A continuación, se muestra un ejemplo de cómo enviar y recibir mensajes utilizando RabbitMQ en Python.</p>
<h4>Enviar Mensaje</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHBpa2EKCiMgQ29uZXhpw7NuIGFsIGJyb2tlciBkZSBSYWJiaXRNUQpjb25uZWN0aW9uID0gcGlrYS5CbG9ja2luZ0Nvbm5lY3Rpb24ocGlrYS5Db25uZWN0aW9uUGFyYW1ldGVycygnbG9jYWxob3N0JykpCmNoYW5uZWwgPSBjb25uZWN0aW9uLmNoYW5uZWwoKQoKIyBEZWNsYXJhciB1bmEgY29sYQpjaGFubmVsLnF1ZXVlX2RlY2xhcmUocXVldWU9J2hlbGxvJykKCiMgRW52aWFyIHVuIG1lbnNhamUKY2hhbm5lbC5iYXNpY19wdWJsaXNoKGV4Y2hhbmdlPScnLCByb3V0aW5nX2tleT0naGVsbG8nLCBib2R5PSdIZWxsbyBXb3JsZCEnKQpwcmludCgiIFt4XSBTZW50ICdIZWxsbyBXb3JsZCEnIikKCiMgQ2VycmFyIGxhIGNvbmV4acOzbgpjb25uZWN0aW9uLmNsb3NlKCk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import pika

# Conexi&oacute;n al broker de RabbitMQ
connection = pika.BlockingConnection(pika.ConnectionParameters('localhost'))
channel = connection.channel()

# Declarar una cola
channel.queue_declare(queue='hello')

# Enviar un mensaje
channel.basic_publish(exchange='', routing_key='hello', body='Hello World!')
print(&quot; [x] Sent 'Hello World!'&quot;)

# Cerrar la conexi&oacute;n
connection.close()</pre></div><div class='content'><h4>Recibir Mensaje</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHBpa2EKCiMgQ29uZXhpw7NuIGFsIGJyb2tlciBkZSBSYWJiaXRNUQpjb25uZWN0aW9uID0gcGlrYS5CbG9ja2luZ0Nvbm5lY3Rpb24ocGlrYS5Db25uZWN0aW9uUGFyYW1ldGVycygnbG9jYWxob3N0JykpCmNoYW5uZWwgPSBjb25uZWN0aW9uLmNoYW5uZWwoKQoKIyBEZWNsYXJhciB1bmEgY29sYQpjaGFubmVsLnF1ZXVlX2RlY2xhcmUocXVldWU9J2hlbGxvJykKCiMgRGVmaW5pciBsYSBmdW5jacOzbiBkZSBjYWxsYmFjawpkZWYgY2FsbGJhY2soY2gsIG1ldGhvZCwgcHJvcGVydGllcywgYm9keSk6CiAgICBwcmludChmIiBbeF0gUmVjZWl2ZWQge2JvZHl9IikKCiMgQ29uZmlndXJhciBlbCBjb25zdW1pZG9yCmNoYW5uZWwuYmFzaWNfY29uc3VtZShxdWV1ZT0naGVsbG8nLCBvbl9tZXNzYWdlX2NhbGxiYWNrPWNhbGxiYWNrLCBhdXRvX2Fjaz1UcnVlKQoKcHJpbnQoJyBbKl0gV2FpdGluZyBmb3IgbWVzc2FnZXMuIFRvIGV4aXQgcHJlc3MgQ1RSTCtDJykKY2hhbm5lbC5zdGFydF9jb25zdW1pbmcoKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import pika

# Conexi&oacute;n al broker de RabbitMQ
connection = pika.BlockingConnection(pika.ConnectionParameters('localhost'))
channel = connection.channel()

# Declarar una cola
channel.queue_declare(queue='hello')

# Definir la funci&oacute;n de callback
def callback(ch, method, properties, body):
    print(f&quot; [x] Received {body}&quot;)

# Configurar el consumidor
channel.basic_consume(queue='hello', on_message_callback=callback, auto_ack=True)

print(' [*] Waiting for messages. To exit press CTRL+C')
channel.start_consuming()</pre></div><div class='content'></div><h1>Eventos</h1>
<div class='content'></div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Eventos</strong>: Representan un cambio de estado o una acción que ha ocurrido en el sistema.</li>
<li><strong>Publicadores y Suscriptores</strong>: Los servicios que generan eventos son publicadores, y los que los consumen son suscriptores.</li>
<li><strong>Event Sourcing</strong>: Un patrón donde los cambios de estado se almacenan como una secuencia de eventos.</li>
</ul>
</div><h2>Ventajas</h2>
<div class='content'><ul>
<li><strong>Desacoplamiento</strong>: Similar a la mensajería, los servicios no necesitan conocer la implementación de otros servicios.</li>
<li><strong>Auditabilidad</strong>: Los eventos pueden ser almacenados para auditoría y análisis histórico.</li>
<li><strong>Escalabilidad</strong>: Los servicios pueden escalar independientemente.</li>
</ul>
</div><h2>Desventajas</h2>
<div class='content'><ul>
<li><strong>Complejidad</strong>: La gestión de eventos y la consistencia eventual pueden ser complicadas.</li>
<li><strong>Latencia</strong>: Puede haber una latencia adicional debido a la naturaleza asíncrona.</li>
</ul>
</div><h2>Ejemplo de Código</h2>
<div class='content'><p>A continuación, se muestra un ejemplo de cómo publicar y suscribirse a eventos utilizando Apache Kafka en Python.</p>
<h4>Publicar Evento</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBrYWZrYSBpbXBvcnQgS2Fma2FQcm9kdWNlcgppbXBvcnQganNvbgoKcHJvZHVjZXIgPSBLYWZrYVByb2R1Y2VyKGJvb3RzdHJhcF9zZXJ2ZXJzPSdsb2NhbGhvc3Q6OTA5MicsCiAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZV9zZXJpYWxpemVyPWxhbWJkYSB2OiBqc29uLmR1bXBzKHYpLmVuY29kZSgndXRmLTgnKSkKCiMgUHVibGljYXIgdW4gZXZlbnRvCmV2ZW50ID0geydldmVudF90eXBlJzogJ3VzZXJfc2lnbnVwJywgJ3VzZXJfaWQnOiAnMTIzNDUnfQpwcm9kdWNlci5zZW5kKCdldmVudHMnLCBldmVudCkKcHJvZHVjZXIuZmx1c2goKQpwcmludCgiIFt4XSBFdmVudCBwdWJsaXNoZWQiKQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from kafka import KafkaProducer
import json

producer = KafkaProducer(bootstrap_servers='localhost:9092',
                         value_serializer=lambda v: json.dumps(v).encode('utf-8'))

# Publicar un evento
event = {'event_type': 'user_signup', 'user_id': '12345'}
producer.send('events', event)
producer.flush()
print(&quot; [x] Event published&quot;)</pre></div><div class='content'><h4>Suscribirse a Evento</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBrYWZrYSBpbXBvcnQgS2Fma2FDb25zdW1lcgppbXBvcnQganNvbgoKY29uc3VtZXIgPSBLYWZrYUNvbnN1bWVyKCdldmVudHMnLAogICAgICAgICAgICAgICAgICAgICAgICAgYm9vdHN0cmFwX3NlcnZlcnM9J2xvY2FsaG9zdDo5MDkyJywKICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlX2Rlc2VyaWFsaXplcj1sYW1iZGEgeDoganNvbi5sb2Fkcyh4LmRlY29kZSgndXRmLTgnKSkpCgojIFByb2Nlc2FyIGV2ZW50b3MKZm9yIG1lc3NhZ2UgaW4gY29uc3VtZXI6CiAgICBldmVudCA9IG1lc3NhZ2UudmFsdWUKICAgIHByaW50KGYiIFt4XSBFdmVudCByZWNlaXZlZDoge2V2ZW50fSIp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from kafka import KafkaConsumer
import json

consumer = KafkaConsumer('events',
                         bootstrap_servers='localhost:9092',
                         value_deserializer=lambda x: json.loads(x.decode('utf-8')))

# Procesar eventos
for message in consumer:
    event = message.value
    print(f&quot; [x] Event received: {event}&quot;)</pre></div><div class='content'></div><h1>Comparación entre Mensajería y Eventos</h1>
<div class='content'><table>
<thead>
<tr>
<th>Característica</th>
<th>Mensajería</th>
<th>Eventos</th>
</tr>
</thead>
<tbody>
<tr>
<td>Desacoplamiento</td>
<td>Alto</td>
<td>Alto</td>
</tr>
<tr>
<td>Escalabilidad</td>
<td>Alta</td>
<td>Alta</td>
</tr>
<tr>
<td>Resiliencia</td>
<td>Alta</td>
<td>Alta</td>
</tr>
<tr>
<td>Complejidad</td>
<td>Moderada</td>
<td>Alta</td>
</tr>
<tr>
<td>Latencia</td>
<td>Moderada</td>
<td>Moderada</td>
</tr>
<tr>
<td>Auditabilidad</td>
<td>Baja</td>
<td>Alta</td>
</tr>
</tbody>
</table>
</div><h1>Conclusión</h1>
<div class='content'><p>La mensajería y los eventos son patrones esenciales para la comunicación en sistemas de microservicios. Ambos ofrecen ventajas significativas en términos de desacoplamiento, escalabilidad y resiliencia, aunque también introducen complejidades adicionales. La elección entre mensajería y eventos dependerá de los requisitos específicos de tu sistema y de los trade-offs que estés dispuesto a aceptar.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='apis-restful'>&#x25C4;APIs RESTful</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Mensajería y Eventos en Microservicios</a>
	</div>
	<div class='col-4 text-end'>
					<a href='patrones-de-implementacion'>Patrones de Implementación &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
