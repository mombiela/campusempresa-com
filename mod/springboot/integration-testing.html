<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pruebas de Integración en Spring Boot</title>

    <link rel="alternate" href="https://campusempresa.com/mod/springboot/integration-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/springboot/integration-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/springboot/integration-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/springboot/integration-testing" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/springboot/integration-testing" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-with-junit-and-mockito'>&#x25C4;Pruebas Unitarias con JUnit y Mockito</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Pruebas de Integración en Spring Boot</a>
	</div>
	<div class='col-4 text-end'>
					<a href='testing-restful-web-services'>Pruebas de Servicios Web RESTful &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Las pruebas de integración son una parte crucial del ciclo de vida del desarrollo de software, especialmente en aplicaciones Spring Boot. Aseguran que las diferentes partes de la aplicación funcionen juntas como se espera. Este tema te guiará a través de los conceptos esenciales de las pruebas de integración en Spring Boot, desde niveles principiantes hasta avanzados.</p>
</div><h1>¿Qué son las Pruebas de Integración?</h1>
<div class='content'><p>Las pruebas de integración implican probar las interacciones entre diferentes módulos o componentes de una aplicación. A diferencia de las pruebas unitarias, que prueban componentes individuales en aislamiento, las pruebas de integración verifican que los componentes funcionen correctamente juntos.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Pruebas de Integración vs. Pruebas Unitarias</strong>: Las pruebas unitarias se centran en componentes individuales, mientras que las pruebas de integración se centran en la interacción entre componentes.</li>
<li><strong>Contexto de Spring</strong>: En Spring Boot, las pruebas de integración a menudo implican cargar el contexto de la aplicación Spring para probar las interacciones entre beans.</li>
<li><strong>Entorno de Prueba</strong>: Las pruebas de integración pueden requerir una configuración más compleja, incluyendo bases de datos, servicios externos y otras dependencias.</li>
</ul>
</div><h1>Configuración de Pruebas de Integración en Spring Boot</h1>
<div class='content'><p>Para configurar pruebas de integración en Spring Boot, necesitas incluir las dependencias necesarias y configurar tu entorno de prueba.</p>
</div><h2>Dependencias</h2>
<div class='content'><p>Agrega las siguientes dependencias a tu archivo <code>pom.xml</code> o <code>build.gradle</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSBQYXJhIE1hdmVuIC0tPgo8ZGVwZW5kZW5jeT4KICAgIDxncm91cElkPm9yZy5zcHJpbmdmcmFtZXdvcmsuYm9vdDwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPnNwcmluZy1ib290LXN0YXJ0ZXItdGVzdDwvYXJ0aWZhY3RJZD4KICAgIDxzY29wZT50ZXN0PC9zY29wZT4KPC9kZXBlbmRlbmN5Pg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- Para Maven --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUGFyYSBHcmFkbGUKdGVzdEltcGxlbWVudGF0aW9uICdvcmcuc3ByaW5nZnJhbWV3b3JrLmJvb3Q6c3ByaW5nLWJvb3Qtc3RhcnRlci10ZXN0Jw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Para Gradle
testImplementation 'org.springframework.boot:spring-boot-starter-test'</pre></div><div class='content'></div><h2>Configuración</h2>
<div class='content'><p>Spring Boot proporciona varias anotaciones para ayudar a configurar tus pruebas de integración:</p>
<ul>
<li><code>@SpringBootTest</code>: Carga el contexto completo de la aplicación.</li>
<li><code>@TestConfiguration</code>: Define beans o configuraciones adicionales para pruebas.</li>
<li><code>@MockBean</code>: Crea e inyecta mocks en el contexto de Spring.</li>
</ul>
</div><h1>Escribiendo Tu Primera Prueba de Integración</h1>
<div class='content'><p>Vamos a escribir una simple prueba de integración para una aplicación Spring Boot.</p>
</div><h2>Aplicación de Ejemplo</h2>
<div class='content'><p>Supongamos que tenemos un simple <code>UserService</code> que interactúa con un <code>UserRepository</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFNlcnZpY2UKcHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlIHsKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnk7CgogICAgcHVibGljIFVzZXIgZ2V0VXNlckJ5SWQoTG9uZyBpZCkgewogICAgICAgIHJldHVybiB1c2VyUmVwb3NpdG9yeS5maW5kQnlJZChpZCkub3JFbHNlKG51bGwpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Service
public class UserService {
    @Autowired
    private UserRepository userRepository;

    public User getUserById(Long id) {
        return userRepository.findById(id).orElse(null);
    }
}</pre></div><div class='content'></div><h2>Ejemplo de Prueba de Integración</h2>
<div class='content'><p>Aquí tienes cómo puedes escribir una prueba de integración para el <code>UserService</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFJ1bldpdGgoU3ByaW5nUnVubmVyLmNsYXNzKQpAU3ByaW5nQm9vdFRlc3QKcHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlSW50ZWdyYXRpb25UZXN0IHsKCiAgICBAQXV0b3dpcmVkCiAgICBwcml2YXRlIFVzZXJTZXJ2aWNlIHVzZXJTZXJ2aWNlOwoKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnk7CgogICAgQEJlZm9yZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTsKICAgICAgICB1c2VyLnNldElkKDFMKTsKICAgICAgICB1c2VyLnNldE5hbWUoIkpvaG4gRG9lIik7CiAgICAgICAgdXNlclJlcG9zaXRvcnkuc2F2ZSh1c2VyKTsKICAgIH0KCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdEdldFVzZXJCeUlkKCkgewogICAgICAgIFVzZXIgdXNlciA9IHVzZXJTZXJ2aWNlLmdldFVzZXJCeUlkKDFMKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHVzZXIpOwogICAgICAgIGFzc2VydEVxdWFscygiSm9obiBEb2UiLCB1c2VyLmdldE5hbWUoKSk7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@RunWith(SpringRunner.class)
@SpringBootTest
public class UserServiceIntegrationTest {

    @Autowired
    private UserService userService;

    @Autowired
    private UserRepository userRepository;

    @Before
    public void setUp() {
        User user = new User();
        user.setId(1L);
        user.setName(&quot;John Doe&quot;);
        userRepository.save(user);
    }

    @Test
    public void testGetUserById() {
        User user = userService.getUserById(1L);
        assertNotNull(user);
        assertEquals(&quot;John Doe&quot;, user.getName());
    }
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>Anotaciones</strong>:
<ul>
<li><code>@RunWith(SpringRunner.class)</code>: Integra el Spring TestContext Framework con JUnit.</li>
<li><code>@SpringBootTest</code>: Carga el contexto completo de la aplicación.</li>
</ul>
</li>
<li><strong>Método de Configuración</strong>: El método <code>setUp</code> inicializa los datos de prueba.</li>
<li><strong>Método de Prueba</strong>: El método <code>testGetUserById</code> verifica que el <code>UserService</code> recupere correctamente un usuario por ID.</li>
</ul>
</div><h1>Pruebas de Integración Avanzadas</h1>
<div class='content'><p>A medida que avances, puede que necesites probar escenarios más complejos, como interacciones con servicios externos o bases de datos.</p>
</div><h2>Mocking de Servicios Externos</h2>
<div class='content'><p>Usa <code>@MockBean</code> para simular servicios externos en tus pruebas de integración.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFJ1bldpdGgoU3ByaW5nUnVubmVyLmNsYXNzKQpAU3ByaW5nQm9vdFRlc3QKcHVibGljIGNsYXNzIEV4dGVybmFsU2VydmljZUludGVncmF0aW9uVGVzdCB7CgogICAgQE1vY2tCZWFuCiAgICBwcml2YXRlIEV4dGVybmFsU2VydmljZSBleHRlcm5hbFNlcnZpY2U7CgogICAgQEF1dG93aXJlZAogICAgcHJpdmF0ZSBNeVNlcnZpY2UgbXlTZXJ2aWNlOwoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0RXh0ZXJuYWxTZXJ2aWNlSW50ZXJhY3Rpb24oKSB7CiAgICAgICAgd2hlbihleHRlcm5hbFNlcnZpY2UuY2FsbEV4dGVybmFsQXBpKCkpLnRoZW5SZXR1cm4oIk1vY2sgUmVzcG9uc2UiKTsKCiAgICAgICAgU3RyaW5nIHJlc3BvbnNlID0gbXlTZXJ2aWNlLmNhbGxFeHRlcm5hbFNlcnZpY2UoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIk1vY2sgUmVzcG9uc2UiLCByZXNwb25zZSk7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@RunWith(SpringRunner.class)
@SpringBootTest
public class ExternalServiceIntegrationTest {

    @MockBean
    private ExternalService externalService;

    @Autowired
    private MyService myService;

    @Test
    public void testExternalServiceInteraction() {
        when(externalService.callExternalApi()).thenReturn(&quot;Mock Response&quot;);

        String response = myService.callExternalService();
        assertEquals(&quot;Mock Response&quot;, response);
    }
}</pre></div><div class='content'></div><h2>Pruebas con Bases de Datos</h2>
<div class='content'><p>Para pruebas de integración con bases de datos, puedes usar una base de datos en memoria como H2.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSBBZ3JlZ2EgbGEgZGVwZW5kZW5jaWEgZGUgSDIgZW4gcG9tLnhtbCAtLT4KPGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5jb20uaDJkYXRhYmFzZTwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPmgyPC9hcnRpZmFjdElkPgogICAgPHNjb3BlPnRlc3Q8L3Njb3BlPgo8L2RlcGVuZGVuY3k+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- Agrega la dependencia de H2 en pom.xml --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.h2database&lt;/groupId&gt;
    &lt;artifactId&gt;h2&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'><p>Configura tu aplicación para usar la base de datos H2 para pruebas:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBhcHBsaWNhdGlvbi10ZXN0LnltbApzcHJpbmc6CiAgZGF0YXNvdXJjZToKICAgIHVybDogamRiYzpoMjptZW06dGVzdGRiCiAgICBkcml2ZXJDbGFzc05hbWU6IG9yZy5oMi5Ecml2ZXIKICAgIHVzZXJuYW1lOiBzYQogICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgaDI6CiAgICBjb25zb2xlOgogICAgICBlbmFibGVkOiB0cnVlCiAganBhOgogICAgaGliZXJuYXRlOgogICAgICBkZGwtYXV0bzogdXBkYXRlCiAgICBzaG93LXNxbDogdHJ1ZQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># application-test.yml
spring:
  datasource:
    url: jdbc:h2:mem:testdb
    driverClassName: org.h2.Driver
    username: sa
    password: password
  h2:
    console:
      enabled: true
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Las pruebas de integración en Spring Boot son esenciales para asegurar que las diferentes partes de tu aplicación funcionen juntas sin problemas. Al comprender los conceptos clave, configurar tu entorno de prueba y escribir pruebas efectivas, puedes mejorar significativamente la fiabilidad y robustez de tu aplicación. A medida que progreses, puedes explorar escenarios más avanzados, como simular servicios externos y probar con bases de datos, para cubrir todos los aspectos de la funcionalidad de tu aplicación.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-with-junit-and-mockito'>&#x25C4;Pruebas Unitarias con JUnit y Mockito</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Pruebas de Integración en Spring Boot</a>
	</div>
	<div class='col-4 text-end'>
					<a href='testing-restful-web-services'>Pruebas de Servicios Web RESTful &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
