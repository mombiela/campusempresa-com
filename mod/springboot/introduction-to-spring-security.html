<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introducción a Spring Security</title>

    <link rel="alternate" href="https://campusempresa.com/mod/springboot/introduction-to-spring-security" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/springboot/introduction-to-spring-security" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/springboot/introduction-to-spring-security" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/springboot/introduction-to-spring-security" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/springboot/introduction-to-spring-security" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='pagination-and-sorting'>&#x25C4;Paginación y Ordenación</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Introducción a Spring Security</a>
	</div>
	<div class='col-4 text-end'>
					<a href='securing-restful-web-services'>Asegurando Servicios Web RESTful &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Spring Security es un marco de autenticación y control de acceso poderoso y altamente personalizable para aplicaciones Java. Es el estándar de facto para asegurar aplicaciones basadas en Spring. Esta sección te guiará a través de los conceptos básicos de Spring Security, desde la configuración hasta configuraciones avanzadas.</p>
</div><h1>¿Qué es Spring Security?</h1>
<div class='content'><p>Spring Security es un marco que se enfoca en proporcionar tanto autenticación como autorización a aplicaciones Java. Es parte del ecosistema más amplio de Spring Framework e integra perfectamente con Spring Boot.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Autenticación</strong>: Verificar la identidad de un usuario o sistema.</li>
<li><strong>Autorización</strong>: Determinar si un usuario autenticado tiene permiso para realizar una acción específica.</li>
<li><strong>Principal</strong>: El usuario actualmente autenticado.</li>
<li><strong>Autoridad Concedida</strong>: Un permiso o rol asignado a un principal.</li>
<li><strong>Contexto de Seguridad</strong>: Contiene la información de autenticación del usuario actual.</li>
</ul>
</div><h1>Configuración de Spring Security</h1>
<div class='content'><p>Para comenzar con Spring Security en una aplicación Spring Boot, necesitas agregar la dependencia de Spring Security a tu proyecto.</p>
</div><h2>Agregar Dependencias</h2>
<div class='content'><p>Agrega la siguiente dependencia a tu <code>pom.xml</code> si estás usando Maven:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcuc3ByaW5nZnJhbWV3b3JrLmJvb3Q8L2dyb3VwSWQ+CiAgICA8YXJ0aWZhY3RJZD5zcHJpbmctYm9vdC1zdGFydGVyLXNlY3VyaXR5PC9hcnRpZmFjdElkPgo8L2RlcGVuZGVuY3k+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
&lt;/dependency&gt;</pre></div><div class='content'><p>Para Gradle, agrega la siguiente línea a tu <code>build.gradle</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wbGVtZW50YXRpb24gJ29yZy5zcHJpbmdmcmFtZXdvcmsuYm9vdDpzcHJpbmctYm9vdC1zdGFydGVyLXNlY3VyaXR5Jw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>implementation 'org.springframework.boot:spring-boot-starter-security'</pre></div><div class='content'></div><h1>Configuración Básica</h1>
<div class='content'><p>Por defecto, Spring Security asegura todos los endpoints en tu aplicación. Para personalizar la configuración de seguridad, necesitas crear una clase de configuración.</p>
</div><h2>Creando una Clase de Configuración de Seguridad</h2>
<div class='content'><p>Crea una clase que extienda <code>WebSecurityConfigurerAdapter</code> y sobrescribe los métodos <code>configure</code> para personalizar la configuración de seguridad.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuY29udGV4dC5hbm5vdGF0aW9uLkNvbmZpZ3VyYXRpb247CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvbmZpZy5hbm5vdGF0aW9uLndlYi5idWlsZGVycy5IdHRwU2VjdXJpdHk7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvbmZpZy5hbm5vdGF0aW9uLndlYi5jb25maWd1cmF0aW9uLkVuYWJsZVdlYlNlY3VyaXR5OwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb25maWcuYW5ub3RhdGlvbi53ZWIuY29uZmlndXJhdGlvbi5XZWJTZWN1cml0eUNvbmZpZ3VyZXJBZGFwdGVyOwoKQENvbmZpZ3VyYXRpb24KQEVuYWJsZVdlYlNlY3VyaXR5CnB1YmxpYyBjbGFzcyBTZWN1cml0eUNvbmZpZyBleHRlbmRzIFdlYlNlY3VyaXR5Q29uZmlndXJlckFkYXB0ZXIgewoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgY29uZmlndXJlKEh0dHBTZWN1cml0eSBodHRwKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBodHRwCiAgICAgICAgICAgIC5hdXRob3JpemVSZXF1ZXN0cygpCiAgICAgICAgICAgICAgICAuYW50TWF0Y2hlcnMoIi9wdWJsaWMvKioiKS5wZXJtaXRBbGwoKSAvLyBQZXJtaXRpciBhY2Nlc28gYSBlbmRwb2ludHMgcMO6YmxpY29zCiAgICAgICAgICAgICAgICAuYW55UmVxdWVzdCgpLmF1dGhlbnRpY2F0ZWQoKSAvLyBSZXF1ZXJpciBhdXRlbnRpY2FjacOzbiBwYXJhIHRvZG9zIGxvcyBkZW3DoXMgZW5kcG9pbnRzCiAgICAgICAgICAgICAgICAuYW5kKCkKICAgICAgICAgICAgLmZvcm1Mb2dpbigpIC8vIEhhYmlsaXRhciBpbmljaW8gZGUgc2VzacOzbiBiYXNhZG8gZW4gZm9ybXVsYXJpb3MKICAgICAgICAgICAgICAgIC5sb2dpblBhZ2UoIi9sb2dpbiIpIC8vIFDDoWdpbmEgZGUgaW5pY2lvIGRlIHNlc2nDs24gcGVyc29uYWxpemFkYQogICAgICAgICAgICAgICAgLnBlcm1pdEFsbCgpCiAgICAgICAgICAgICAgICAuYW5kKCkKICAgICAgICAgICAgLmxvZ291dCgpIC8vIEhhYmlsaXRhciBjaWVycmUgZGUgc2VzacOzbgogICAgICAgICAgICAgICAgLnBlcm1pdEFsbCgpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;

@Configuration
@EnableWebSecurity
public class SecurityConfig extends WebSecurityConfigurerAdapter {

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http
            .authorizeRequests()
                .antMatchers(&quot;/public/**&quot;).permitAll() // Permitir acceso a endpoints p&uacute;blicos
                .anyRequest().authenticated() // Requerir autenticaci&oacute;n para todos los dem&aacute;s endpoints
                .and()
            .formLogin() // Habilitar inicio de sesi&oacute;n basado en formularios
                .loginPage(&quot;/login&quot;) // P&aacute;gina de inicio de sesi&oacute;n personalizada
                .permitAll()
                .and()
            .logout() // Habilitar cierre de sesi&oacute;n
                .permitAll();
    }
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>@Configuration</code> y <code>@EnableWebSecurity</code>: Estas anotaciones indican que esta clase es una clase de configuración y habilitan Spring Security.</li>
<li><code>authorizeRequests()</code>: Configura la autorización basada en URL.
<ul>
<li><code>antMatchers(&quot;/public/**&quot;).permitAll()</code>: Permite el acceso a todas las URLs bajo <code>/public/</code> sin autenticación.</li>
<li><code>anyRequest().authenticated()</code>: Requiere autenticación para cualquier otra solicitud.</li>
</ul>
</li>
<li><code>formLogin()</code>: Habilita el inicio de sesión basado en formularios.
<ul>
<li><code>loginPage(&quot;/login&quot;)</code>: Especifica una página de inicio de sesión personalizada.</li>
<li><code>permitAll()</code>: Permite a todos acceder a la página de inicio de sesión.</li>
</ul>
</li>
<li><code>logout()</code>: Habilita la funcionalidad de cierre de sesión.</li>
</ul>
</div><h1>Configuración Avanzada</h1>
<div class='content'><p>Spring Security proporciona varias características avanzadas como servicio de detalles de usuario personalizado, seguridad a nivel de método y más.</p>
</div><h2>Custom UserDetailsService</h2>
<div class='content'><p>Para usar un servicio de detalles de usuario personalizado, necesitas implementar la interfaz <code>UserDetailsService</code> y sobrescribir el método <code>loadUserByUsername</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29yZS51c2VyZGV0YWlscy5Vc2VyRGV0YWlsczsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29yZS51c2VyZGV0YWlscy5Vc2VyRGV0YWlsc1NlcnZpY2U7CmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUudXNlcmRldGFpbHMuVXNlcm5hbWVOb3RGb3VuZEV4Y2VwdGlvbjsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5TZXJ2aWNlOwoKQFNlcnZpY2UKcHVibGljIGNsYXNzIEN1c3RvbVVzZXJEZXRhaWxzU2VydmljZSBpbXBsZW1lbnRzIFVzZXJEZXRhaWxzU2VydmljZSB7CgogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgVXNlckRldGFpbHMgbG9hZFVzZXJCeVVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSkgdGhyb3dzIFVzZXJuYW1lTm90Rm91bmRFeGNlcHRpb24gewogICAgICAgIC8vIE9idGVuZXIgdXN1YXJpbyBkZSBsYSBiYXNlIGRlIGRhdG9zIG8gY3VhbHF1aWVyIG90cmEgZnVlbnRlCiAgICAgICAgLy8gUGFyYSBzaW1wbGljaWRhZCwgZXN0YW1vcyB1c2FuZG8gdW4gdXN1YXJpbyBjb2RpZmljYWRvCiAgICAgICAgaWYgKCJ1c2VyIi5lcXVhbHModXNlcm5hbWUpKSB7CiAgICAgICAgICAgIHJldHVybiBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUudXNlcmRldGFpbHMuVXNlcgogICAgICAgICAgICAgICAgLndpdGhVc2VybmFtZSgidXNlciIpCiAgICAgICAgICAgICAgICAucGFzc3dvcmQoIntub29wfXBhc3N3b3JkIikgLy8ge25vb3B9IGluZGljYSBzaW4gY29kaWZpY2FjacOzbiBkZSBjb250cmFzZcOxYQogICAgICAgICAgICAgICAgLnJvbGVzKCJVU0VSIikKICAgICAgICAgICAgICAgIC5idWlsZCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93IG5ldyBVc2VybmFtZU5vdEZvdW5kRXhjZXB0aW9uKCJVc3VhcmlvIG5vIGVuY29udHJhZG8iKTsKICAgICAgICB9CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.stereotype.Service;

@Service
public class CustomUserDetailsService implements UserDetailsService {

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        // Obtener usuario de la base de datos o cualquier otra fuente
        // Para simplicidad, estamos usando un usuario codificado
        if (&quot;user&quot;.equals(username)) {
            return org.springframework.security.core.userdetails.User
                .withUsername(&quot;user&quot;)
                .password(&quot;{noop}password&quot;) // {noop} indica sin codificaci&oacute;n de contrase&ntilde;a
                .roles(&quot;USER&quot;)
                .build();
        } else {
            throw new UsernameNotFoundException(&quot;Usuario no encontrado&quot;);
        }
    }
}</pre></div><div class='content'></div><h2>Seguridad a Nivel de Método</h2>
<div class='content'><p>Puedes asegurar métodos individuales usando anotaciones como <code>@PreAuthorize</code> y <code>@Secured</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuYWNjZXNzLnByZXBvc3QuUHJlQXV0aG9yaXplOwppbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLlNlcnZpY2U7CgpAU2VydmljZQpwdWJsaWMgY2xhc3MgU2FtcGxlU2VydmljZSB7CgogICAgQFByZUF1dGhvcml6ZSgiaGFzUm9sZSgnUk9MRV9VU0VSJykiKQogICAgcHVibGljIHZvaWQgc2VjdXJlZE1ldGhvZCgpIHsKICAgICAgICAvLyBMw7NnaWNhIGRlbCBtw6l0b2RvCiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.stereotype.Service;

@Service
public class SampleService {

    @PreAuthorize(&quot;hasRole('ROLE_USER')&quot;)
    public void securedMethod() {
        // L&oacute;gica del m&eacute;todo
    }
}</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><code>@PreAuthorize(&quot;hasRole('ROLE_USER')&quot;)</code>: Asegura que el método solo pueda ser accedido por usuarios con la autoridad <code>ROLE_USER</code>.</li>
</ul>
</div><h1>Resumen</h1>
<div class='content'><p>En esta sección, cubrimos los conceptos básicos de Spring Security, incluyendo:</p>
<ul>
<li>Qué es Spring Security y sus conceptos clave.</li>
<li>Cómo configurar Spring Security en una aplicación Spring Boot.</li>
<li>Configuraciones básicas y avanzadas, incluyendo servicio de detalles de usuario personalizado y seguridad a nivel de método.</li>
</ul>
<p>Spring Security es un marco integral que proporciona características de seguridad robustas para tus aplicaciones. Entender sus conceptos y configuraciones principales te ayudará a asegurar tus aplicaciones Spring Boot de manera efectiva.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='pagination-and-sorting'>&#x25C4;Paginación y Ordenación</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Introducción a Spring Security</a>
	</div>
	<div class='col-4 text-end'>
					<a href='securing-restful-web-services'>Asegurando Servicios Web RESTful &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
