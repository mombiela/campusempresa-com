<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkManager en Android Studio</title>

    <link rel="alternate" href="https://campusempresa.com/mod/androidstudio/workmanager" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/androidstudio/workmanager" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/androidstudio/workmanager" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/androidstudio/workmanager" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/androidstudio/workmanager" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='broadcast-receivers'>&#x25C4;Receptores de Difusión</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">WorkManager en Android Studio</a>
	</div>
	<div class='col-4 text-end'>
					<a href='jobscheduler'>JobScheduler &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a WorkManager</h1>
<div class='content'><p>WorkManager es una biblioteca de Android que simplifica el proceso de programación de tareas diferibles y asíncronas que se espera que se ejecuten incluso si la aplicación se cierra o el dispositivo se reinicia. Es parte de Android Jetpack y es adecuada para tareas que requieren ejecución garantizada.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Tareas Diferibles</strong>: Tareas que pueden retrasarse y no necesitan ejecutarse de inmediato.</li>
<li><strong>Ejecución Garantizada</strong>: Asegura que la tarea se ejecutará incluso si la aplicación se cierra o el dispositivo se reinicia.</li>
<li><strong>Tareas Asíncronas</strong>: Tareas que se ejecutan en un hilo de fondo, sin bloquear el hilo principal de la interfaz de usuario.</li>
</ul>
</div><h1>Configuración de WorkManager</h1>
<div class='content'><p>Para usar WorkManager, necesitas agregar las dependencias necesarias a tu archivo <code>build.gradle</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzIHsKICAgIGltcGxlbWVudGF0aW9uICJhbmRyb2lkeC53b3JrOndvcmstcnVudGltZToyLjcuMCIKfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies {
    implementation &quot;androidx.work:work-runtime:2.7.0&quot;
}</pre></div><div class='content'></div><h1>Creación de una Solicitud de Trabajo Simple</h1>
<div class='content'><p>Una WorkRequest define una tarea individual que será ejecutada por WorkManager. Hay dos tipos de WorkRequests:</p>
<ul>
<li><strong>OneTimeWorkRequest</strong>: Para tareas que deben ejecutarse solo una vez.</li>
<li><strong>PeriodicWorkRequest</strong>: Para tareas que deben ejecutarse periódicamente.</li>
</ul>
</div><h2>Ejemplo: OneTimeWorkRequest</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LndvcmsuT25lVGltZVdvcmtSZXF1ZXN0CmltcG9ydCBhbmRyb2lkeC53b3JrLldvcmtNYW5hZ2VyCmltcG9ydCBhbmRyb2lkeC53b3JrLldvcmtlcgppbXBvcnQgYW5kcm9pZHgud29yay5Xb3JrZXJQYXJhbWV0ZXJzCgpjbGFzcyBTaW1wbGVXb3JrZXIoYXBwQ29udGV4dDogQ29udGV4dCwgd29ya2VyUGFyYW1zOiBXb3JrZXJQYXJhbWV0ZXJzKSA6IFdvcmtlcihhcHBDb250ZXh0LCB3b3JrZXJQYXJhbXMpIHsKICAgIG92ZXJyaWRlIGZ1biBkb1dvcmsoKTogUmVzdWx0IHsKICAgICAgICAvLyBSZWFsaXphIGVsIHRyYWJham8gYXF1w60tLWVuIGVzdGUgY2Fzbywgc3ViZSBsYXMgaW3DoWdlbmVzLgogICAgICAgIHVwbG9hZEltYWdlcygpCiAgICAgICAgLy8gSW5kaWNhIHNpIGVsIHRyYWJham8gdGVybWluw7MgZXhpdG9zYW1lbnRlIGNvbiBlbCBSZXN1bHQKICAgICAgICByZXR1cm4gUmVzdWx0LnN1Y2Nlc3MoKQogICAgfQp9CgpmdW4gdXBsb2FkSW1hZ2VzKCkgewogICAgLy8gQ8OzZGlnbyBwYXJhIHN1YmlyIGltw6FnZW5lcwp9CgovLyBFbmNvbGEgZWwgdHJhYmFqbwp2YWwgdXBsb2FkV29ya1JlcXVlc3QgPSBPbmVUaW1lV29ya1JlcXVlc3QuQnVpbGRlcihTaW1wbGVXb3JrZXI6OmNsYXNzLmphdmEpLmJ1aWxkKCkKV29ya01hbmFnZXIuZ2V0SW5zdGFuY2UoY29udGV4dCkuZW5xdWV1ZSh1cGxvYWRXb3JrUmVxdWVzdCk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.work.OneTimeWorkRequest
import androidx.work.WorkManager
import androidx.work.Worker
import androidx.work.WorkerParameters

class SimpleWorker(appContext: Context, workerParams: WorkerParameters) : Worker(appContext, workerParams) {
    override fun doWork(): Result {
        // Realiza el trabajo aqu&iacute;--en este caso, sube las im&aacute;genes.
        uploadImages()
        // Indica si el trabajo termin&oacute; exitosamente con el Result
        return Result.success()
    }
}

fun uploadImages() {
    // C&oacute;digo para subir im&aacute;genes
}

// Encola el trabajo
val uploadWorkRequest = OneTimeWorkRequest.Builder(SimpleWorker::class.java).build()
WorkManager.getInstance(context).enqueue(uploadWorkRequest)</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>SimpleWorker</strong>: Una clase que extiende <code>Worker</code> donde se define el trabajo real.</li>
<li><strong>doWork()</strong>: El método donde se ejecuta la tarea.</li>
<li><strong>enqueue()</strong>: Método para programar el trabajo.</li>
</ul>
</div><h1>Agregando Restricciones</h1>
<div class='content'><p>Las restricciones especifican condiciones que deben cumplirse para que el trabajo se ejecute, como la disponibilidad de red o el estado de carga del dispositivo.</p>
</div><h2>Ejemplo: Agregando Restricciones</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LndvcmsuQ29uc3RyYWludHMKaW1wb3J0IGFuZHJvaWR4LndvcmsuTmV0d29ya1R5cGUKCnZhbCBjb25zdHJhaW50cyA9IENvbnN0cmFpbnRzLkJ1aWxkZXIoKQogICAgLnNldFJlcXVpcmVkTmV0d29ya1R5cGUoTmV0d29ya1R5cGUuQ09OTkVDVEVEKQogICAgLnNldFJlcXVpcmVzQ2hhcmdpbmcodHJ1ZSkKICAgIC5idWlsZCgpCgp2YWwgY29uc3RyYWluZWRXb3JrUmVxdWVzdCA9IE9uZVRpbWVXb3JrUmVxdWVzdC5CdWlsZGVyKFNpbXBsZVdvcmtlcjo6Y2xhc3MuamF2YSkKICAgIC5zZXRDb25zdHJhaW50cyhjb25zdHJhaW50cykKICAgIC5idWlsZCgpCgpXb3JrTWFuYWdlci5nZXRJbnN0YW5jZShjb250ZXh0KS5lbnF1ZXVlKGNvbnN0cmFpbmVkV29ya1JlcXVlc3Qp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.work.Constraints
import androidx.work.NetworkType

val constraints = Constraints.Builder()
    .setRequiredNetworkType(NetworkType.CONNECTED)
    .setRequiresCharging(true)
    .build()

val constrainedWorkRequest = OneTimeWorkRequest.Builder(SimpleWorker::class.java)
    .setConstraints(constraints)
    .build()

WorkManager.getInstance(context).enqueue(constrainedWorkRequest)</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>Constraints.Builder()</strong>: Utilizado para definir las restricciones.</li>
<li><strong>setRequiredNetworkType(NetworkType.CONNECTED)</strong>: Asegura que el dispositivo esté conectado a una red.</li>
<li><strong>setRequiresCharging(true)</strong>: Asegura que el dispositivo esté cargando.</li>
</ul>
</div><h1>Encadenando Solicitudes de Trabajo</h1>
<div class='content'><p>WorkManager permite encadenar múltiples solicitudes de trabajo para ejecutarlas en un orden especificado.</p>
</div><h2>Ejemplo: Encadenando Solicitudes de Trabajo</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFsIHdvcmtBID0gT25lVGltZVdvcmtSZXF1ZXN0LkJ1aWxkZXIoV29ya2VyQTo6Y2xhc3MuamF2YSkuYnVpbGQoKQp2YWwgd29ya0IgPSBPbmVUaW1lV29ya1JlcXVlc3QuQnVpbGRlcihXb3JrZXJCOjpjbGFzcy5qYXZhKS5idWlsZCgpCnZhbCB3b3JrQyA9IE9uZVRpbWVXb3JrUmVxdWVzdC5CdWlsZGVyKFdvcmtlckM6OmNsYXNzLmphdmEpLmJ1aWxkKCkKCldvcmtNYW5hZ2VyLmdldEluc3RhbmNlKGNvbnRleHQpCiAgICAuYmVnaW5XaXRoKHdvcmtBKQogICAgLnRoZW4od29ya0IpCiAgICAudGhlbih3b3JrQykKICAgIC5lbnF1ZXVlKCk="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>val workA = OneTimeWorkRequest.Builder(WorkerA::class.java).build()
val workB = OneTimeWorkRequest.Builder(WorkerB::class.java).build()
val workC = OneTimeWorkRequest.Builder(WorkerC::class.java).build()

WorkManager.getInstance(context)
    .beginWith(workA)
    .then(workB)
    .then(workC)
    .enqueue()</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>beginWith(workA)</strong>: Inicia la cadena con <code>workA</code>.</li>
<li><strong>then(workB)</strong>: Especifica que <code>workB</code> debe ejecutarse después de <code>workA</code>.</li>
<li><strong>then(workC)</strong>: Especifica que <code>workC</code> debe ejecutarse después de <code>workB</code>.</li>
</ul>
</div><h1>Observando el Estado del Trabajo</h1>
<div class='content'><p>Puedes observar el estado de una solicitud de trabajo para obtener actualizaciones sobre su progreso o finalización.</p>
</div><h2>Ejemplo: Observando el Estado del Trabajo</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFsIHdvcmtSZXF1ZXN0ID0gT25lVGltZVdvcmtSZXF1ZXN0LkJ1aWxkZXIoU2ltcGxlV29ya2VyOjpjbGFzcy5qYXZhKS5idWlsZCgpCldvcmtNYW5hZ2VyLmdldEluc3RhbmNlKGNvbnRleHQpLmVucXVldWUod29ya1JlcXVlc3QpCgpXb3JrTWFuYWdlci5nZXRJbnN0YW5jZShjb250ZXh0KS5nZXRXb3JrSW5mb0J5SWRMaXZlRGF0YSh3b3JrUmVxdWVzdC5pZCkKICAgIC5vYnNlcnZlKHRoaXMsIE9ic2VydmVyIHsgd29ya0luZm8gLT4KICAgICAgICBpZiAod29ya0luZm8gIT0gbnVsbCAmJiB3b3JrSW5mby5zdGF0ZSA9PSBXb3JrSW5mby5TdGF0ZS5TVUNDRUVERUQpIHsKICAgICAgICAgICAgLy8gVHJhYmFqbyBjb21wbGV0YWRvIGV4aXRvc2FtZW50ZQogICAgICAgIH0KICAgIH0p"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>val workRequest = OneTimeWorkRequest.Builder(SimpleWorker::class.java).build()
WorkManager.getInstance(context).enqueue(workRequest)

WorkManager.getInstance(context).getWorkInfoByIdLiveData(workRequest.id)
    .observe(this, Observer { workInfo -&gt;
        if (workInfo != null &amp;&amp; workInfo.state == WorkInfo.State.SUCCEEDED) {
            // Trabajo completado exitosamente
        }
    })</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>getWorkInfoByIdLiveData(workRequest.id)</strong>: Devuelve un objeto LiveData que puede ser observado para cambios en el estado del trabajo.</li>
<li><strong>Observer</strong>: Reacciona a los cambios en el estado del trabajo.</li>
</ul>
</div><h1>Características Avanzadas de WorkManager</h1>
<h2>Solicitudes de Trabajo Periódicas</h2>
<div class='content'><p>Para tareas que necesitan ejecutarse periódicamente, usa <code>PeriodicWorkRequest</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFsIHBlcmlvZGljV29ya1JlcXVlc3QgPSBQZXJpb2RpY1dvcmtSZXF1ZXN0LkJ1aWxkZXIoU2ltcGxlV29ya2VyOjpjbGFzcy5qYXZhLCAxLCBUaW1lVW5pdC5IT1VSUykuYnVpbGQoKQpXb3JrTWFuYWdlci5nZXRJbnN0YW5jZShjb250ZXh0KS5lbnF1ZXVlKHBlcmlvZGljV29ya1JlcXVlc3Qp"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>val periodicWorkRequest = PeriodicWorkRequest.Builder(SimpleWorker::class.java, 1, TimeUnit.HOURS).build()
WorkManager.getInstance(context).enqueue(periodicWorkRequest)</pre></div><div class='content'></div><h2>Explicación</h2>
<div class='content'><ul>
<li><strong>PeriodicWorkRequest.Builder</strong>: Programa el trabajo para ejecutarse periódicamente.</li>
<li><strong>1, TimeUnit.HOURS</strong>: Especifica el intervalo entre ejecuciones.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>WorkManager es una herramienta poderosa para gestionar tareas en segundo plano en aplicaciones Android. Proporciona una API simple y flexible para programar tareas, agregar restricciones, encadenar tareas y observar su estado. Al comprender y utilizar WorkManager, puedes asegurar que las tareas en segundo plano de tu aplicación se manejen de manera eficiente y confiable, incluso bajo condiciones desafiantes como la terminación de la aplicación o el reinicio del dispositivo.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='broadcast-receivers'>&#x25C4;Receptores de Difusión</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">WorkManager en Android Studio</a>
	</div>
	<div class='col-4 text-end'>
					<a href='jobscheduler'>JobScheduler &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
