<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escalares personalizados en GraphQL</title>

    <link rel="alternate" href="https://campusempresa.com/mod/graphql/custom-scalars" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/graphql/custom-scalars" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/graphql/custom-scalars" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/graphql/custom-scalars" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/graphql/custom-scalars" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='case-studies'>&#x25C4;Estudios de Caso</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Escalares personalizados en GraphQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='schema-federation'>Federación de Esquemas &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a los escalares</h1>
<div class='content'><p>En GraphQL, los escalares son los tipos de datos básicos que representan las hojas de la consulta. Los tipos escalares predeterminados proporcionados por GraphQL son:</p>
<ul>
<li><code>Int</code>: Un entero con signo de 32 bits.</li>
<li><code>Float</code>: Un valor de punto flotante de doble precisión con signo.</li>
<li><code>String</code>: Una secuencia de caracteres UTF-8.</li>
<li><code>Boolean</code>: Un valor verdadero o falso.</li>
<li><code>ID</code>: Un identificador único, a menudo utilizado para volver a obtener un objeto o como clave para una caché.</li>
</ul>
</div><h1>¿Por qué escalares personalizados?</h1>
<div class='content'><p>Aunque los tipos escalares predeterminados cubren muchos casos de uso, hay escenarios donde necesitas tipos más específicos. Por ejemplo:</p>
<ul>
<li>Fechas y horas.</li>
<li>Direcciones de correo electrónico.</li>
<li>URLs.</li>
<li>Lógica de validación personalizada.</li>
</ul>
<p>Los escalares personalizados te permiten definir tus propios tipos de datos con lógica específica de validación y serialización.</p>
</div><h1>Definiendo escalares personalizados</h1>
<div class='content'><p>Para definir un escalar personalizado, necesitas:</p>
<ol>
<li>Definir el escalar en tu esquema de GraphQL.</li>
<li>Implementar el comportamiento del escalar en el código de tu servidor.</li>
</ol>
</div><h2>Definición del esquema</h2>
<div class='content'><p>En tu esquema de GraphQL, declaras un escalar personalizado usando la palabra clave <code>scalar</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2NhbGFyIERhdGU="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>scalar Date</pre></div><div class='content'></div><h2>Implementación de escalares personalizados</h2>
<div class='content'><p>La implementación de un escalar personalizado implica definir cómo debe ser analizado y serializado el escalar. Esto típicamente incluye:</p>
<ul>
<li>Analizar valores de entrada de las consultas.</li>
<li>Serializar valores de salida para las respuestas.</li>
<li>Analizar valores de las variables.</li>
</ul>
<p>Aquí tienes un ejemplo de un escalar personalizado <code>Date</code> en JavaScript usando Apollo Server:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBHcmFwaFFMU2NhbGFyVHlwZSwgS2luZCB9ID0gcmVxdWlyZSgnZ3JhcGhxbCcpOwoKY29uc3QgRGF0ZVNjYWxhciA9IG5ldyBHcmFwaFFMU2NhbGFyVHlwZSh7CiAgbmFtZTogJ0RhdGUnLAogIGRlc2NyaXB0aW9uOiAnVW4gZXNjYWxhciBwZXJzb25hbGl6YWRvIHBhcmEgbWFuZWphciB2YWxvcmVzIGRlIGZlY2hhJywKICBzZXJpYWxpemUodmFsdWUpIHsKICAgIC8vIENvbnZlcnRpciBEYXRlIHNhbGllbnRlIGEgY2FkZW5hIElTTyBwYXJhIEpTT04KICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIERhdGUgPyB2YWx1ZS50b0lTT1N0cmluZygpIDogbnVsbDsKICB9LAogIHBhcnNlVmFsdWUodmFsdWUpIHsKICAgIC8vIENvbnZlcnRpciBjYWRlbmEgSVNPIGVudHJhbnRlIGEgRGF0ZQogICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyBuZXcgRGF0ZSh2YWx1ZSkgOiBudWxsOwogIH0sCiAgcGFyc2VMaXRlcmFsKGFzdCkgewogICAgLy8gQ29udmVydGlyIGNhZGVuYSBBU1QgY29kaWZpY2FkYSBhIERhdGUKICAgIHJldHVybiBhc3Qua2luZCA9PT0gS2luZC5TVFJJTkcgPyBuZXcgRGF0ZShhc3QudmFsdWUpIDogbnVsbDsKICB9Cn0pOwoKbW9kdWxlLmV4cG9ydHMgPSBEYXRlU2NhbGFyOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { GraphQLScalarType, Kind } = require('graphql');

const DateScalar = new GraphQLScalarType({
  name: 'Date',
  description: 'Un escalar personalizado para manejar valores de fecha',
  serialize(value) {
    // Convertir Date saliente a cadena ISO para JSON
    return value instanceof Date ? value.toISOString() : null;
  },
  parseValue(value) {
    // Convertir cadena ISO entrante a Date
    return typeof value === 'string' ? new Date(value) : null;
  },
  parseLiteral(ast) {
    // Convertir cadena AST codificada a Date
    return ast.kind === Kind.STRING ? new Date(ast.value) : null;
  }
});

module.exports = DateScalar;</pre></div><div class='content'></div><h2>Usando escalares personalizados en resolutores</h2>
<div class='content'><p>Después de definir e implementar el escalar personalizado, necesitas incluirlo en la configuración de tu servidor GraphQL.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBBcG9sbG9TZXJ2ZXIsIGdxbCB9ID0gcmVxdWlyZSgnYXBvbGxvLXNlcnZlcicpOwpjb25zdCBEYXRlU2NhbGFyID0gcmVxdWlyZSgnLi9EYXRlU2NhbGFyJyk7Cgpjb25zdCB0eXBlRGVmcyA9IGdxbGAKICBzY2FsYXIgRGF0ZQoKICB0eXBlIEV2ZW50IHsKICAgIGlkOiBJRCEKICAgIG5hbWU6IFN0cmluZyEKICAgIGRhdGU6IERhdGUhCiAgfQoKICB0eXBlIFF1ZXJ5IHsKICAgIGV2ZW50czogW0V2ZW50IV0hCiAgfQpgOwoKY29uc3QgcmVzb2x2ZXJzID0gewogIERhdGU6IERhdGVTY2FsYXIsCiAgUXVlcnk6IHsKICAgIGV2ZW50czogKCkgPT4gWwogICAgICB7IGlkOiAnMScsIG5hbWU6ICdHcmFwaFFMIE1lZXR1cCcsIGRhdGU6IG5ldyBEYXRlKCkgfSwKICAgICAgeyBpZDogJzInLCBuYW1lOiAnQXBvbGxvIFdvcmtzaG9wJywgZGF0ZTogbmV3IERhdGUoKSB9CiAgICBdCiAgfQp9OwoKY29uc3Qgc2VydmVyID0gbmV3IEFwb2xsb1NlcnZlcih7IHR5cGVEZWZzLCByZXNvbHZlcnMgfSk7CgpzZXJ2ZXIubGlzdGVuKCkudGhlbigoeyB1cmwgfSkgPT4gewogIGNvbnNvbGUubG9nKGDwn5qAIFNlcnZlciByZWFkeSBhdCAke3VybH1gKTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { ApolloServer, gql } = require('apollo-server');
const DateScalar = require('./DateScalar');

const typeDefs = gql`
  scalar Date

  type Event {
    id: ID!
    name: String!
    date: Date!
  }

  type Query {
    events: [Event!]!
  }
`;

const resolvers = {
  Date: DateScalar,
  Query: {
    events: () =&gt; [
      { id: '1', name: 'GraphQL Meetup', date: new Date() },
      { id: '2', name: 'Apollo Workshop', date: new Date() }
    ]
  }
};

const server = new ApolloServer({ typeDefs, resolvers });

server.listen().then(({ url }) =&gt; {
  console.log(`🚀 Server ready at ${url}`);
});</pre></div><div class='content'></div><h1>Casos de uso comunes para escalares personalizados</h1>
<div class='content'><ul>
<li><strong>Fecha/Hora</strong>: Manejo de valores de fecha y hora en un formato estandarizado.</li>
<li><strong>Correo electrónico</strong>: Validación de direcciones de correo electrónico.</li>
<li><strong>URL</strong>: Asegurarse de que una cadena sea una URL válida.</li>
<li><strong>JSON</strong>: Permitir objetos JSON arbitrarios como entrada/salida.</li>
</ul>
</div><h1>Ejemplo: Escalar personalizado de correo electrónico</h1>
<div class='content'><p>Aquí tienes un ejemplo de un escalar personalizado <code>Email</code>:</p>
</div><h2>Definición del esquema</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2NhbGFyIEVtYWls"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>scalar Email</pre></div><div class='content'></div><h2>Implementación</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBHcmFwaFFMU2NhbGFyVHlwZSwgS2luZCB9ID0gcmVxdWlyZSgnZ3JhcGhxbCcpOwpjb25zdCB7IGlzRW1haWwgfSA9IHJlcXVpcmUoJ3ZhbGlkYXRvcicpOwoKY29uc3QgRW1haWxTY2FsYXIgPSBuZXcgR3JhcGhRTFNjYWxhclR5cGUoewogIG5hbWU6ICdFbWFpbCcsCiAgZGVzY3JpcHRpb246ICdVbiBlc2NhbGFyIHBlcnNvbmFsaXphZG8gcGFyYSBtYW5lamFyIGRpcmVjY2lvbmVzIGRlIGNvcnJlbyBlbGVjdHLDs25pY28nLAogIHNlcmlhbGl6ZSh2YWx1ZSkgewogICAgcmV0dXJuIHZhbHVlOwogIH0sCiAgcGFyc2VWYWx1ZSh2YWx1ZSkgewogICAgaWYgKCFpc0VtYWlsKHZhbHVlKSkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIkRpcmVjY2nDs24gZGUgY29ycmVvIGVsZWN0csOzbmljbyBubyB2w6FsaWRhIik7CiAgICB9CiAgICByZXR1cm4gdmFsdWU7CiAgfSwKICBwYXJzZUxpdGVyYWwoYXN0KSB7CiAgICBpZiAoYXN0LmtpbmQgIT09IEtpbmQuU1RSSU5HIHx8ICFpc0VtYWlsKGFzdC52YWx1ZSkpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJEaXJlY2Npw7NuIGRlIGNvcnJlbyBlbGVjdHLDs25pY28gbm8gdsOhbGlkYSIpOwogICAgfQogICAgcmV0dXJuIGFzdC52YWx1ZTsKICB9Cn0pOwoKbW9kdWxlLmV4cG9ydHMgPSBFbWFpbFNjYWxhcjs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { GraphQLScalarType, Kind } = require('graphql');
const { isEmail } = require('validator');

const EmailScalar = new GraphQLScalarType({
  name: 'Email',
  description: 'Un escalar personalizado para manejar direcciones de correo electr&oacute;nico',
  serialize(value) {
    return value;
  },
  parseValue(value) {
    if (!isEmail(value)) {
      throw new Error(&quot;Direcci&oacute;n de correo electr&oacute;nico no v&aacute;lida&quot;);
    }
    return value;
  },
  parseLiteral(ast) {
    if (ast.kind !== Kind.STRING || !isEmail(ast.value)) {
      throw new Error(&quot;Direcci&oacute;n de correo electr&oacute;nico no v&aacute;lida&quot;);
    }
    return ast.value;
  }
});

module.exports = EmailScalar;</pre></div><div class='content'></div><h2>Usando el escalar de correo electrónico</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBBcG9sbG9TZXJ2ZXIsIGdxbCB9ID0gcmVxdWlyZSgnYXBvbGxvLXNlcnZlcicpOwpjb25zdCBFbWFpbFNjYWxhciA9IHJlcXVpcmUoJy4vRW1haWxTY2FsYXInKTsKCmNvbnN0IHR5cGVEZWZzID0gZ3FsYAogIHNjYWxhciBFbWFpbAoKICB0eXBlIFVzZXIgewogICAgaWQ6IElEIQogICAgbmFtZTogU3RyaW5nIQogICAgZW1haWw6IEVtYWlsIQogIH0KCiAgdHlwZSBRdWVyeSB7CiAgICB1c2VyczogW1VzZXIhXSEKICB9CmA7Cgpjb25zdCByZXNvbHZlcnMgPSB7CiAgRW1haWw6IEVtYWlsU2NhbGFyLAogIFF1ZXJ5OiB7CiAgICB1c2VyczogKCkgPT4gWwogICAgICB7IGlkOiAnMScsIG5hbWU6ICdBbGljZScsIGVtYWlsOiAnYWxpY2VAZXhhbXBsZS5jb20nIH0sCiAgICAgIHsgaWQ6ICcyJywgbmFtZTogJ0JvYicsIGVtYWlsOiAnYm9iQGV4YW1wbGUuY29tJyB9CiAgICBdCiAgfQp9OwoKY29uc3Qgc2VydmVyID0gbmV3IEFwb2xsb1NlcnZlcih7IHR5cGVEZWZzLCByZXNvbHZlcnMgfSk7CgpzZXJ2ZXIubGlzdGVuKCkudGhlbigoeyB1cmwgfSkgPT4gewogIGNvbnNvbGUubG9nKGDwn5qAIFNlcnZlciByZWFkeSBhdCAke3VybH1gKTsKfSk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { ApolloServer, gql } = require('apollo-server');
const EmailScalar = require('./EmailScalar');

const typeDefs = gql`
  scalar Email

  type User {
    id: ID!
    name: String!
    email: Email!
  }

  type Query {
    users: [User!]!
  }
`;

const resolvers = {
  Email: EmailScalar,
  Query: {
    users: () =&gt; [
      { id: '1', name: 'Alice', email: 'alice@example.com' },
      { id: '2', name: 'Bob', email: 'bob@example.com' }
    ]
  }
};

const server = new ApolloServer({ typeDefs, resolvers });

server.listen().then(({ url }) =&gt; {
  console.log(`🚀 Server ready at ${url}`);
});</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Los escalares personalizados en GraphQL proporcionan una forma poderosa de extender los tipos básicos para adaptarse a las necesidades específicas de tu aplicación. Al definir e implementar escalares personalizados, puedes asegurarte de que tus datos sean validados y serializados correctamente, lo que lleva a aplicaciones más robustas y mantenibles. Ya sea que necesites manejar fechas, correos electrónicos u otro tipo de datos especializado, los escalares personalizados ofrecen la flexibilidad para hacerlo de manera efectiva.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='case-studies'>&#x25C4;Estudios de Caso</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Escalares personalizados en GraphQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='schema-federation'>Federación de Esquemas &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
