<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proveedores y Bloques de Conexión</title>

    <link rel="alternate" href="https://campusempresa.com/mod/terraform/provisioners-and-connection-blocks" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/terraform/provisioners-and-connection-blocks" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/terraform/provisioners-and-connection-blocks" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/terraform/provisioners-and-connection-blocks" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/terraform/provisioners-and-connection-blocks" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='modules-reusable-configurations'>&#x25C4;Módulos: Configuraciones Reutilizables</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proveedores y Bloques de Conexión</a>
	</div>
	<div class='col-4 text-end'>
					<a href='data-sources'>Fuentes de Datos &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Los proveedores y los bloques de conexión son componentes esenciales en Terraform que te permiten ejecutar scripts o comandos en tus recursos y gestionar cómo Terraform se conecta a ellos. Este tema cubrirá los conceptos básicos de los proveedores, cómo usar los bloques de conexión y escenarios de uso avanzado.</p>
</div><h1>Proveedores</h1>
<div class='content'><p>Los proveedores en Terraform se utilizan para ejecutar scripts o comandos en una máquina local o remota como parte del proceso de creación o destrucción de recursos. Son útiles para la configuración inicial, la gestión de configuraciones y otras tareas posteriores al despliegue.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li>
<p><strong>Tipos de Proveedores</strong>:</p>
<ul>
<li><strong><code>local-exec</code></strong>: Ejecuta un comando en la máquina que ejecuta Terraform.</li>
<li><strong><code>remote-exec</code></strong>: Ejecuta un comando en un recurso remoto.</li>
<li><strong><code>file</code></strong>: Copia archivos o directorios a un recurso remoto.</li>
</ul>
</li>
<li>
<p><strong>Ganchos de Ciclo de Vida</strong>:</p>
<ul>
<li><strong><code>creation-time</code></strong>: Se ejecuta durante la creación del recurso.</li>
<li><strong><code>destroy-time</code></strong>: Se ejecuta durante la destrucción del recurso.</li>
</ul>
</li>
</ul>
</div><h2>Ejemplos</h2>
<div class='content'><h4>Proveedor <code>local-exec</code></h4>
<p>El proveedor <code>local-exec</code> ejecuta un comando localmente en la máquina donde se ejecuta Terraform.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbWkgICAgICAgICAgID0gImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIKICBpbnN0YW5jZV90eXBlID0gInQyLm1pY3JvIgoKICBwcm92aXNpb25lciAibG9jYWwtZXhlYyIgewogICAgY29tbWFuZCA9ICJlY2hvICR7YXdzX2luc3RhbmNlLmV4YW1wbGUucHVibGljX2lwfSA+IGlwX2FkZHJlc3MudHh0IgogIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t2.micro&quot;

  provisioner &quot;local-exec&quot; {
    command = &quot;echo ${aws_instance.example.public_ip} &gt; ip_address.txt&quot;
  }
}</pre></div><div class='content'><p>En este ejemplo, después de que se crea la instancia de AWS, la dirección IP pública de la instancia se escribe en un archivo llamado <code>ip_address.txt</code> en la máquina local.</p>
<h4>Proveedor <code>remote-exec</code></h4>
<p>El proveedor <code>remote-exec</code> ejecuta comandos en el recurso remoto.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbWkgICAgICAgICAgID0gImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIKICBpbnN0YW5jZV90eXBlID0gInQyLm1pY3JvIgoKICBjb25uZWN0aW9uIHsKICAgIHR5cGUgICAgID0gInNzaCIKICAgIHVzZXIgICAgID0gInVidW50dSIKICAgIHByaXZhdGVfa2V5ID0gZmlsZSgifi8uc3NoL2lkX3JzYSIpCiAgICBob3N0ICAgICA9IHNlbGYucHVibGljX2lwCiAgfQoKICBwcm92aXNpb25lciAicmVtb3RlLWV4ZWMiIHsKICAgIGlubGluZSA9IFsKICAgICAgInN1ZG8gYXB0LWdldCB1cGRhdGUiLAogICAgICAic3VkbyBhcHQtZ2V0IGluc3RhbGwgLXkgbmdpbngiCiAgICBdCiAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t2.micro&quot;

  connection {
    type     = &quot;ssh&quot;
    user     = &quot;ubuntu&quot;
    private_key = file(&quot;~/.ssh/id_rsa&quot;)
    host     = self.public_ip
  }

  provisioner &quot;remote-exec&quot; {
    inline = [
      &quot;sudo apt-get update&quot;,
      &quot;sudo apt-get install -y nginx&quot;
    ]
  }
}</pre></div><div class='content'><p>En este ejemplo, después de que se crea la instancia de AWS, el proveedor <code>remote-exec</code> se conecta a la instancia a través de SSH e instala Nginx.</p>
</div><h1>Bloques de Conexión</h1>
<div class='content'><p>Los bloques de conexión definen cómo Terraform se conecta al recurso remoto. Se utilizan junto con los proveedores para especificar detalles de conexión como el tipo de conexión, las credenciales de usuario y la información del host.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li>
<p><strong>Tipos de Conexión</strong>:</p>
<ul>
<li><strong><code>ssh</code></strong>: Se conecta a través de SSH.</li>
<li><strong><code>winrm</code></strong>: Se conecta a través de Windows Remote Management.</li>
</ul>
</li>
<li>
<p><strong>Atributos de Conexión</strong>:</p>
<ul>
<li><strong><code>type</code></strong>: El tipo de conexión (por ejemplo, <code>ssh</code> o <code>winrm</code>).</li>
<li><strong><code>user</code></strong>: El nombre de usuario para la conexión.</li>
<li><strong><code>password</code></strong>: La contraseña para la conexión (si aplica).</li>
<li><strong><code>private_key</code></strong>: La clave privada para conexiones SSH.</li>
<li><strong><code>host</code></strong>: El nombre del host o la dirección IP del recurso remoto.</li>
</ul>
</li>
</ul>
</div><h2>Ejemplo</h2>
<div class='content'><h4>Bloque de Conexión SSH</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbWkgICAgICAgICAgID0gImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIKICBpbnN0YW5jZV90eXBlID0gInQyLm1pY3JvIgoKICBjb25uZWN0aW9uIHsKICAgIHR5cGUgICAgID0gInNzaCIKICAgIHVzZXIgICAgID0gInVidW50dSIKICAgIHByaXZhdGVfa2V5ID0gZmlsZSgifi8uc3NoL2lkX3JzYSIpCiAgICBob3N0ICAgICA9IHNlbGYucHVibGljX2lwCiAgfQoKICBwcm92aXNpb25lciAicmVtb3RlLWV4ZWMiIHsKICAgIGlubGluZSA9IFsKICAgICAgInN1ZG8gYXB0LWdldCB1cGRhdGUiLAogICAgICAic3VkbyBhcHQtZ2V0IGluc3RhbGwgLXkgbmdpbngiCiAgICBdCiAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t2.micro&quot;

  connection {
    type     = &quot;ssh&quot;
    user     = &quot;ubuntu&quot;
    private_key = file(&quot;~/.ssh/id_rsa&quot;)
    host     = self.public_ip
  }

  provisioner &quot;remote-exec&quot; {
    inline = [
      &quot;sudo apt-get update&quot;,
      &quot;sudo apt-get install -y nginx&quot;
    ]
  }
}</pre></div><div class='content'><p>En este ejemplo, el bloque de conexión especifica que Terraform debe conectarse a la instancia de AWS usando SSH con el usuario y la clave privada proporcionados.</p>
</div><h1>Uso Avanzado</h1>
<div class='content'></div><h2>Múltiples Proveedores</h2>
<div class='content'><p>Puedes usar múltiples proveedores dentro de un solo recurso para realizar una serie de tareas.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbWkgICAgICAgICAgID0gImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIKICBpbnN0YW5jZV90eXBlID0gInQyLm1pY3JvIgoKICBjb25uZWN0aW9uIHsKICAgIHR5cGUgICAgID0gInNzaCIKICAgIHVzZXIgICAgID0gInVidW50dSIKICAgIHByaXZhdGVfa2V5ID0gZmlsZSgifi8uc3NoL2lkX3JzYSIpCiAgICBob3N0ICAgICA9IHNlbGYucHVibGljX2lwCiAgfQoKICBwcm92aXNpb25lciAicmVtb3RlLWV4ZWMiIHsKICAgIGlubGluZSA9IFsKICAgICAgInN1ZG8gYXB0LWdldCB1cGRhdGUiLAogICAgICAic3VkbyBhcHQtZ2V0IGluc3RhbGwgLXkgbmdpbngiCiAgICBdCiAgfQoKICBwcm92aXNpb25lciAiZmlsZSIgewogICAgc291cmNlICAgICAgPSAiaW5kZXguaHRtbCIKICAgIGRlc3RpbmF0aW9uID0gIi92YXIvd3d3L2h0bWwvaW5kZXguaHRtbCIKICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t2.micro&quot;

  connection {
    type     = &quot;ssh&quot;
    user     = &quot;ubuntu&quot;
    private_key = file(&quot;~/.ssh/id_rsa&quot;)
    host     = self.public_ip
  }

  provisioner &quot;remote-exec&quot; {
    inline = [
      &quot;sudo apt-get update&quot;,
      &quot;sudo apt-get install -y nginx&quot;
    ]
  }

  provisioner &quot;file&quot; {
    source      = &quot;index.html&quot;
    destination = &quot;/var/www/html/index.html&quot;
  }
}</pre></div><div class='content'><p>En este ejemplo, el primer proveedor instala Nginx, y el segundo proveedor copia un archivo <code>index.html</code> al directorio raíz del servidor web.</p>
</div><h2>Manejo de Errores</h2>
<div class='content'><p>Puedes controlar el comportamiento de los proveedores en caso de errores usando el atributo <code>on_failure</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbWkgICAgICAgICAgID0gImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIKICBpbnN0YW5jZV90eXBlID0gInQyLm1pY3JvIgoKICBjb25uZWN0aW9uIHsKICAgIHR5cGUgICAgID0gInNzaCIKICAgIHVzZXIgICAgID0gInVidW50dSIKICAgIHByaXZhdGVfa2V5ID0gZmlsZSgifi8uc3NoL2lkX3JzYSIpCiAgICBob3N0ICAgICA9IHNlbGYucHVibGljX2lwCiAgfQoKICBwcm92aXNpb25lciAicmVtb3RlLWV4ZWMiIHsKICAgIGlubGluZSA9IFsKICAgICAgInN1ZG8gYXB0LWdldCB1cGRhdGUiLAogICAgICAic3VkbyBhcHQtZ2V0IGluc3RhbGwgLXkgbmdpbngiCiAgICBdCiAgICBvbl9mYWlsdXJlID0gImNvbnRpbnVlIgogIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t2.micro&quot;

  connection {
    type     = &quot;ssh&quot;
    user     = &quot;ubuntu&quot;
    private_key = file(&quot;~/.ssh/id_rsa&quot;)
    host     = self.public_ip
  }

  provisioner &quot;remote-exec&quot; {
    inline = [
      &quot;sudo apt-get update&quot;,
      &quot;sudo apt-get install -y nginx&quot;
    ]
    on_failure = &quot;continue&quot;
  }
}</pre></div><div class='content'><p>En este ejemplo, si el proveedor <code>remote-exec</code> falla, Terraform continuará con los siguientes pasos en lugar de detenerse.</p>
</div><h1>Resumen</h1>
<div class='content'><p>Los proveedores y los bloques de conexión son herramientas poderosas en Terraform que te permiten ejecutar scripts y comandos en tus recursos, tanto localmente como de forma remota. Al comprender cómo usar estos componentes de manera efectiva, puedes automatizar tareas complejas de despliegue y configuración, asegurando que tu infraestructura esté configurada exactamente como se necesita. Recuerda manejar los errores de manera adecuada y usar múltiples proveedores cuando sea necesario para realizar una serie de tareas.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='modules-reusable-configurations'>&#x25C4;Módulos: Configuraciones Reutilizables</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Proveedores y Bloques de Conexión</a>
	</div>
	<div class='col-4 text-end'>
					<a href='data-sources'>Fuentes de Datos &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
