<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multihilo y Programación Paralela</title>

    <link rel="alternate" href="https://campusempresa.com/mod/delphi/05-02-multithreading-parallel-programming" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/delphi/05-02-multithreading-parallel-programming" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/delphi/05-02-multithreading-parallel-programming" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/delphi/05-02-multithreading-parallel-programming" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/delphi/05-02-multithreading-parallel-programming" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-generics-collections' title="Genéricos y Colecciones">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Multihilo y Programación Paralela</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-component-based-development' title="Desarrollo Basado en Componentes">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>En este módulo, exploraremos el concepto de multihilo y programación paralela en Delphi. La capacidad de ejecutar múltiples hilos de ejecución simultáneamente puede mejorar significativamente el rendimiento de las aplicaciones, especialmente en sistemas con múltiples núcleos de CPU. Aprenderemos cómo crear y gestionar hilos en Delphi, así como técnicas para sincronizar y comunicar entre hilos.</p>
</div><h1>Conceptos Clave</h1>
<div class='content'><ol>
<li><strong>Hilo (Thread)</strong>: Un hilo es la unidad más pequeña de procesamiento que puede ser gestionada de manera independiente por un sistema operativo.</li>
<li><strong>Multihilo (Multithreading)</strong>: La capacidad de un programa para ejecutar múltiples hilos simultáneamente.</li>
<li><strong>Programación Paralela</strong>: Técnica de programación que permite la ejecución de operaciones simultáneas para mejorar el rendimiento.</li>
<li><strong>Sincronización</strong>: Mecanismos para coordinar la ejecución de hilos y evitar condiciones de carrera.</li>
</ol>
</div><h1>Creación de Hilos en Delphi</h1>
<div class='content'></div><h2>Clase TThread</h2>
<div class='content'><p>En Delphi, la clase <code>TThread</code> proporciona una manera sencilla de crear y gestionar hilos. A continuación, se muestra un ejemplo básico de cómo crear un hilo en Delphi.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHlwZQogIFRNeVRocmVhZCA9IGNsYXNzKFRUaHJlYWQpCiAgcHJvdGVjdGVkCiAgICBwcm9jZWR1cmUgRXhlY3V0ZTsgb3ZlcnJpZGU7CiAgZW5kOwoKcHJvY2VkdXJlIFRNeVRocmVhZC5FeGVjdXRlOwpiZWdpbgogIC8vIEPDs2RpZ28gcXVlIHNlIGVqZWN1dGFyw6EgZW4gZWwgaGlsbwogIHdoaWxlIG5vdCBUZXJtaW5hdGVkIGRvCiAgYmVnaW4KICAgIC8vIFJlYWxpemFyIGFsZ3VuYSB0YXJlYQogICAgU2xlZXAoMTAwMCk7IC8vIFNpbXVsYXIgdHJhYmFqbwogIGVuZDsKZW5kOwoKcHJvY2VkdXJlIFRGb3JtMS5CdXR0b24xQ2xpY2soU2VuZGVyOiBUT2JqZWN0KTsKdmFyCiAgTXlUaHJlYWQ6IFRNeVRocmVhZDsKYmVnaW4KICBNeVRocmVhZCA6PSBUTXlUaHJlYWQuQ3JlYXRlKFRydWUpOyAvLyBDcmVhciBlbCBoaWxvIHN1c3BlbmRpZG8KICBNeVRocmVhZC5GcmVlT25UZXJtaW5hdGUgOj0gVHJ1ZTsgICAvLyBMaWJlcmFyIGF1dG9tw6F0aWNhbWVudGUgYWwgZmluYWxpemFyCiAgTXlUaHJlYWQuU3RhcnQ7ICAgICAgICAgICAgICAgICAgICAgLy8gSW5pY2lhciBlbCBoaWxvCmVuZDs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>type
  TMyThread = class(TThread)
  protected
    procedure Execute; override;
  end;

procedure TMyThread.Execute;
begin
  // C&oacute;digo que se ejecutar&aacute; en el hilo
  while not Terminated do
  begin
    // Realizar alguna tarea
    Sleep(1000); // Simular trabajo
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  MyThread: TMyThread;
begin
  MyThread := TMyThread.Create(True); // Crear el hilo suspendido
  MyThread.FreeOnTerminate := True;   // Liberar autom&aacute;ticamente al finalizar
  MyThread.Start;                     // Iniciar el hilo
end;</pre></div><div class='content'></div><h2>Explicación del Código</h2>
<div class='content'><ul>
<li><strong>Definición de la Clase TMyThread</strong>: Se define una clase <code>TMyThread</code> que hereda de <code>TThread</code>. El método <code>Execute</code> se sobrescribe para definir el código que se ejecutará en el hilo.</li>
<li><strong>Método Execute</strong>: Contiene un bucle que se ejecuta mientras el hilo no esté terminado (<code>Terminated</code>). Dentro del bucle, se puede colocar el código que realiza la tarea deseada.</li>
<li><strong>Creación e Inicio del Hilo</strong>: En el evento <code>Button1Click</code>, se crea una instancia de <code>TMyThread</code> y se inicia el hilo con el método <code>Start</code>.</li>
</ul>
</div><h1>Sincronización de Hilos</h1>
<div class='content'></div><h2>Uso de TEvent</h2>
<div class='content'><p>Para sincronizar hilos, Delphi proporciona varias clases, como <code>TEvent</code>, <code>TCriticalSection</code>, y <code>TMonitor</code>. A continuación, se muestra un ejemplo de uso de <code>TEvent</code> para sincronizar hilos.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgRXZlbnQ6IFRFdmVudDsKCnR5cGUKICBUV29ya2VyVGhyZWFkID0gY2xhc3MoVFRocmVhZCkKICBwcm90ZWN0ZWQKICAgIHByb2NlZHVyZSBFeGVjdXRlOyBvdmVycmlkZTsKICBlbmQ7Cgpwcm9jZWR1cmUgVFdvcmtlclRocmVhZC5FeGVjdXRlOwpiZWdpbgogIHdoaWxlIG5vdCBUZXJtaW5hdGVkIGRvCiAgYmVnaW4KICAgIEV2ZW50LldhaXRGb3IoSU5GSU5JVEUpOyAvLyBFc3BlcmFyIGhhc3RhIHF1ZSBzZSBzZcOxYWxlIGVsIGV2ZW50bwogICAgLy8gUmVhbGl6YXIgYWxndW5hIHRhcmVhCiAgICBTbGVlcCgxMDAwKTsgLy8gU2ltdWxhciB0cmFiYWpvCiAgZW5kOwplbmQ7Cgpwcm9jZWR1cmUgVEZvcm0xLkJ1dHRvbjJDbGljayhTZW5kZXI6IFRPYmplY3QpOwpiZWdpbgogIEV2ZW50LlNldEV2ZW50OyAvLyBTZcOxYWxhciBlbCBldmVudG8gcGFyYSBkZXNwZXJ0YXIgZWwgaGlsbwplbmQ7Cgpwcm9jZWR1cmUgVEZvcm0xLkZvcm1DcmVhdGUoU2VuZGVyOiBUT2JqZWN0KTsKYmVnaW4KICBFdmVudCA6PSBURXZlbnQuQ3JlYXRlKG5pbCwgVHJ1ZSwgRmFsc2UsICcnKTsKICBUV29ya2VyVGhyZWFkLkNyZWF0ZShGYWxzZSk7IC8vIENyZWFyIHkgZWplY3V0YXIgZWwgaGlsbwplbmQ7Cgpwcm9jZWR1cmUgVEZvcm0xLkZvcm1EZXN0cm95KFNlbmRlcjogVE9iamVjdCk7CmJlZ2luCiAgRXZlbnQuRnJlZTsKZW5kOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  Event: TEvent;

type
  TWorkerThread = class(TThread)
  protected
    procedure Execute; override;
  end;

procedure TWorkerThread.Execute;
begin
  while not Terminated do
  begin
    Event.WaitFor(INFINITE); // Esperar hasta que se se&ntilde;ale el evento
    // Realizar alguna tarea
    Sleep(1000); // Simular trabajo
  end;
end;

procedure TForm1.Button2Click(Sender: TObject);
begin
  Event.SetEvent; // Se&ntilde;alar el evento para despertar el hilo
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  Event := TEvent.Create(nil, True, False, '');
  TWorkerThread.Create(False); // Crear y ejecutar el hilo
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  Event.Free;
end;</pre></div><div class='content'></div><h2>Explicación del Código</h2>
<div class='content'><ul>
<li><strong>Creación del Evento</strong>: En el evento <code>FormCreate</code>, se crea una instancia de <code>TEvent</code>.</li>
<li><strong>Uso del Evento en el Hilo</strong>: En el método <code>Execute</code> del hilo, se llama a <code>Event.WaitFor</code> para esperar hasta que el evento sea señalado.</li>
<li><strong>Señalización del Evento</strong>: En el evento <code>Button2Click</code>, se llama a <code>Event.SetEvent</code> para señalar el evento y despertar el hilo.</li>
</ul>
</div><h1>Ejercicio Práctico</h1>
<div class='content'></div><h2>Ejercicio 1: Crear un Hilo que Imprima Números</h2>
<div class='content'><p><strong>Objetivo</strong>: Crear un hilo que imprima números del 1 al 10 en la consola.</p>
<p><strong>Instrucciones</strong>:</p>
<ol>
<li>Definir una clase que herede de <code>TThread</code>.</li>
<li>Sobrescribir el método <code>Execute</code> para imprimir números del 1 al 10.</li>
<li>Crear e iniciar el hilo desde un botón en un formulario.</li>
</ol>
<p><strong>Solución</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHlwZQogIFROdW1iZXJUaHJlYWQgPSBjbGFzcyhUVGhyZWFkKQogIHByb3RlY3RlZAogICAgcHJvY2VkdXJlIEV4ZWN1dGU7IG92ZXJyaWRlOwogIGVuZDsKCnByb2NlZHVyZSBUTnVtYmVyVGhyZWFkLkV4ZWN1dGU7CnZhcgogIGk6IEludGVnZXI7CmJlZ2luCiAgZm9yIGkgOj0gMSB0byAxMCBkbwogIGJlZ2luCiAgICBXcml0ZUxuKGkpOwogICAgU2xlZXAoNTAwKTsgLy8gUGF1c2EgZGUgbWVkaW8gc2VndW5kbyBlbnRyZSBuw7ptZXJvcwogIGVuZDsKZW5kOwoKcHJvY2VkdXJlIFRGb3JtMS5CdXR0b24zQ2xpY2soU2VuZGVyOiBUT2JqZWN0KTsKYmVnaW4KICBUTnVtYmVyVGhyZWFkLkNyZWF0ZShGYWxzZSk7IC8vIENyZWFyIHkgZWplY3V0YXIgZWwgaGlsbwplbmQ7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>type
  TNumberThread = class(TThread)
  protected
    procedure Execute; override;
  end;

procedure TNumberThread.Execute;
var
  i: Integer;
begin
  for i := 1 to 10 do
  begin
    WriteLn(i);
    Sleep(500); // Pausa de medio segundo entre n&uacute;meros
  end;
end;

procedure TForm1.Button3Click(Sender: TObject);
begin
  TNumberThread.Create(False); // Crear y ejecutar el hilo
end;</pre></div><div class='content'></div><h2>Ejercicio 2: Sincronizar Dos Hilos</h2>
<div class='content'><p><strong>Objetivo</strong>: Crear dos hilos que se alternen para imprimir mensajes en la consola.</p>
<p><strong>Instrucciones</strong>:</p>
<ol>
<li>Definir dos clases de hilos que hereden de <code>TThread</code>.</li>
<li>Utilizar <code>TEvent</code> para sincronizar la ejecución de los hilos.</li>
<li>Crear e iniciar ambos hilos desde un botón en un formulario.</li>
</ol>
<p><strong>Solución</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgRXZlbnQxLCBFdmVudDI6IFRFdmVudDsKCnR5cGUKICBUVGhyZWFkMSA9IGNsYXNzKFRUaHJlYWQpCiAgcHJvdGVjdGVkCiAgICBwcm9jZWR1cmUgRXhlY3V0ZTsgb3ZlcnJpZGU7CiAgZW5kOwoKICBUVGhyZWFkMiA9IGNsYXNzKFRUaHJlYWQpCiAgcHJvdGVjdGVkCiAgICBwcm9jZWR1cmUgRXhlY3V0ZTsgb3ZlcnJpZGU7CiAgZW5kOwoKcHJvY2VkdXJlIFRUaHJlYWQxLkV4ZWN1dGU7CmJlZ2luCiAgd2hpbGUgbm90IFRlcm1pbmF0ZWQgZG8KICBiZWdpbgogICAgRXZlbnQxLldhaXRGb3IoSU5GSU5JVEUpOwogICAgV3JpdGVMbignSGlsbyAxJyk7CiAgICBFdmVudDEuUmVzZXRFdmVudDsKICAgIEV2ZW50Mi5TZXRFdmVudDsKICBlbmQ7CmVuZDsKCnByb2NlZHVyZSBUVGhyZWFkMi5FeGVjdXRlOwpiZWdpbgogIHdoaWxlIG5vdCBUZXJtaW5hdGVkIGRvCiAgYmVnaW4KICAgIEV2ZW50Mi5XYWl0Rm9yKElORklOSVRFKTsKICAgIFdyaXRlTG4oJ0hpbG8gMicpOwogICAgRXZlbnQyLlJlc2V0RXZlbnQ7CiAgICBFdmVudDEuU2V0RXZlbnQ7CiAgZW5kOwplbmQ7Cgpwcm9jZWR1cmUgVEZvcm0xLkJ1dHRvbjRDbGljayhTZW5kZXI6IFRPYmplY3QpOwpiZWdpbgogIEV2ZW50MSA6PSBURXZlbnQuQ3JlYXRlKG5pbCwgVHJ1ZSwgRmFsc2UsICcnKTsKICBFdmVudDIgOj0gVEV2ZW50LkNyZWF0ZShuaWwsIFRydWUsIEZhbHNlLCAnJyk7CiAgVFRocmVhZDEuQ3JlYXRlKEZhbHNlKTsKICBUVGhyZWFkMi5DcmVhdGUoRmFsc2UpOwogIEV2ZW50MS5TZXRFdmVudDsgLy8gSW5pY2lhciBlbCBwcmltZXIgaGlsbwplbmQ7Cgpwcm9jZWR1cmUgVEZvcm0xLkZvcm1EZXN0cm95KFNlbmRlcjogVE9iamVjdCk7CmJlZ2luCiAgRXZlbnQxLkZyZWU7CiAgRXZlbnQyLkZyZWU7CmVuZDs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  Event1, Event2: TEvent;

type
  TThread1 = class(TThread)
  protected
    procedure Execute; override;
  end;

  TThread2 = class(TThread)
  protected
    procedure Execute; override;
  end;

procedure TThread1.Execute;
begin
  while not Terminated do
  begin
    Event1.WaitFor(INFINITE);
    WriteLn('Hilo 1');
    Event1.ResetEvent;
    Event2.SetEvent;
  end;
end;

procedure TThread2.Execute;
begin
  while not Terminated do
  begin
    Event2.WaitFor(INFINITE);
    WriteLn('Hilo 2');
    Event2.ResetEvent;
    Event1.SetEvent;
  end;
end;

procedure TForm1.Button4Click(Sender: TObject);
begin
  Event1 := TEvent.Create(nil, True, False, '');
  Event2 := TEvent.Create(nil, True, False, '');
  TThread1.Create(False);
  TThread2.Create(False);
  Event1.SetEvent; // Iniciar el primer hilo
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  Event1.Free;
  Event2.Free;
end;</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>En este módulo, hemos aprendido los conceptos básicos de multihilo y programación paralela en Delphi. Hemos visto cómo crear y gestionar hilos utilizando la clase <code>TThread</code>, así como técnicas para sincronizar hilos utilizando <code>TEvent</code>. Estos conocimientos son fundamentales para desarrollar aplicaciones eficientes y de alto rendimiento en Delphi.</p>
<p>En el próximo módulo, exploraremos el desarrollo basado en componentes, donde aprenderemos a crear y utilizar componentes personalizados en Delphi.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-generics-collections' title="Genéricos y Colecciones">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-component-based-development' title="Desarrollo Basado en Componentes">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
