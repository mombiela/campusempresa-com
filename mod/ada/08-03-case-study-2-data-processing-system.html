<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudio de Caso 2: Sistema de Procesamiento de Datos</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ada/08-03-case-study-2-data-processing-system" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ada/08-03-case-study-2-data-processing-system" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ada/08-03-case-study-2-data-processing-system" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/ada/08-03-case-study-2-data-processing-system" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/ada/08-03-case-study-2-data-processing-system" class="px-2">CA</a>
								</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Contenido del curso</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Competencias técnicas</a>
				<a href="/all/conocimientos">Conocimientos</a>
				<a href="/all/soft_skills">Competencias sociales</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-02-case-study-1-real-time-application' title="Estudio de Caso 1: Aplicación en Tiempo Real">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Estudio de Caso 2: Sistema de Procesamiento de Datos</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-04-case-study-3-embedded-systems' title="Estudio de Caso 3: Sistemas Embebidos">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>En este estudio de caso, desarrollaremos un sistema de procesamiento de datos en Ada. Este sistema leerá datos de un archivo, procesará la información y generará un informe basado en los datos procesados. Este ejercicio integrará varios conceptos aprendidos en los módulos anteriores, como manejo de archivos, estructuras de control, subprogramas y tipos de datos avanzados.</p>
</div><h1><p>Objetivos del Estudio de Caso</p>
</h1>
<div class='content'><ol>
<li><strong>Lectura de datos desde un archivo</strong>: Aprender a manejar archivos en Ada para leer datos.</li>
<li><strong>Procesamiento de datos</strong>: Utilizar estructuras de control y subprogramas para procesar la información.</li>
<li><strong>Generación de informes</strong>: Escribir los resultados procesados en un archivo de salida.</li>
<li><strong>Aplicación de mejores prácticas</strong>: Implementar un código limpio y eficiente siguiendo las mejores prácticas de programación en Ada.</li>
</ol>
</div><h1><p>Paso 1: Definición del Problema</p>
</h1>
<div class='content'></div><h2><p>Requisitos</p>
</h2>
<div class='content'><ul>
<li>Leer un archivo de entrada que contiene datos de ventas.</li>
<li>Procesar los datos para calcular el total de ventas por producto.</li>
<li>Generar un informe que muestre el total de ventas por producto en un archivo de salida.</li>
</ul>
</div><h2><p>Estructura del Archivo de Entrada</p>
</h2>
<div class='content'><p>El archivo de entrada <code>ventas.txt</code> tiene el siguiente formato:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UHJvZHVjdG8xLCAxMApQcm9kdWN0bzIsIDUKUHJvZHVjdG8xLCA3ClByb2R1Y3RvMywgMTIKUHJvZHVjdG8yLCAz"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Producto1, 10
Producto2, 5
Producto1, 7
Producto3, 12
Producto2, 3</pre></div><div class='content'></div><h2><p>Estructura del Archivo de Salida</p>
</h2>
<div class='content'><p>El archivo de salida <code>informe.txt</code> debe tener el siguiente formato:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UHJvZHVjdG8xOiAxNwpQcm9kdWN0bzI6IDgKUHJvZHVjdG8zOiAxMg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Producto1: 17
Producto2: 8
Producto3: 12</pre></div><div class='content'></div><h1><p>Paso 2: Diseño del Sistema</p>
</h1>
<div class='content'></div><h2><p>Estructura del Programa</p>
</h2>
<div class='content'><ol>
<li><strong>Lectura de Datos</strong>: Leer los datos del archivo de entrada y almacenarlos en una estructura adecuada.</li>
<li><strong>Procesamiento de Datos</strong>: Calcular el total de ventas por producto.</li>
<li><strong>Generación del Informe</strong>: Escribir los resultados en un archivo de salida.</li>
</ol>
</div><h2><p>Diagrama de Flujo</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ky0tLS0tLS0tLS0tLS0tLS0tLS0rCnwgTGVlciBhcmNoaXZvICAgICAgfAp8IGRlIGVudHJhZGEgICAgICAgIHwKKy0tLS0tLS0tLS0tLS0tLS0tLS0rCiAgICAgICAgfAogICAgICAgIHYKKy0tLS0tLS0tLS0tLS0tLS0tLS0rCnwgUHJvY2VzYXIgZGF0b3MgICAgfAp8IChjYWxjdWxhciB0b3RhbGVzKXwKKy0tLS0tLS0tLS0tLS0tLS0tLS0rCiAgICAgICAgfAogICAgICAgIHYKKy0tLS0tLS0tLS0tLS0tLS0tLS0rCnwgR2VuZXJhciBpbmZvcm1lICAgfAp8IGVuIGFyY2hpdm8gc2FsaWRhIHwKKy0tLS0tLS0tLS0tLS0tLS0tLS0r"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>+-------------------+
| Leer archivo      |
| de entrada        |
+-------------------+
        |
        v
+-------------------+
| Procesar datos    |
| (calcular totales)|
+-------------------+
        |
        v
+-------------------+
| Generar informe   |
| en archivo salida |
+-------------------+</pre></div><div class='content'></div><h1><p>Paso 3: Implementación</p>
</h1>
<div class='content'></div><h2><p>Lectura de Datos</p>
</h2>
<div class='content'><h4>Código</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("d2l0aCBBZGEuVGV4dF9JTzsgdXNlIEFkYS5UZXh0X0lPOwp3aXRoIEFkYS5TdHJpbmdzLlVuYm91bmRlZDsgdXNlIEFkYS5TdHJpbmdzLlVuYm91bmRlZDsKd2l0aCBBZGEuU3RyaW5ncy5VbmJvdW5kZWQuVGV4dF9JTzsgdXNlIEFkYS5TdHJpbmdzLlVuYm91bmRlZC5UZXh0X0lPOwoKcHJvY2VkdXJlIExlZXJfRGF0b3MgaXMKICAgdHlwZSBQcm9kdWN0b19WZW50YSBpcyByZWNvcmQKICAgICAgUHJvZHVjdG8gOiBVbmJvdW5kZWRfU3RyaW5nOwogICAgICBDYW50aWRhZCA6IEludGVnZXI7CiAgIGVuZCByZWNvcmQ7CgogICB0eXBlIFZlbnRhc19BcnJheSBpcyBhcnJheSAoTmF0dXJhbCByYW5nZSA8Pikgb2YgUHJvZHVjdG9fVmVudGE7CiAgIFZlbnRhcyA6IFZlbnRhc19BcnJheSgxIC4uIDEwMCk7IC0tIEFzdW1pbW9zIHVuIG3DoXhpbW8gZGUgMTAwIHJlZ2lzdHJvcwogICBMaW5lYSA6IFVuYm91bmRlZF9TdHJpbmc7CiAgIEluZGV4IDogTmF0dXJhbCA6PSAxOwoKICAgQXJjaGl2byA6IEZpbGVfVHlwZTsKYmVnaW4KICAgT3BlbiAoQXJjaGl2bywgSW5fRmlsZSwgInZlbnRhcy50eHQiKTsKCiAgIHdoaWxlIG5vdCBFbmRfT2ZfRmlsZShBcmNoaXZvKSBsb29wCiAgICAgIEdldF9MaW5lKEFyY2hpdm8sIExpbmVhKTsKICAgICAgZGVjbGFyZQogICAgICAgICBQcm9kdWN0byA6IFVuYm91bmRlZF9TdHJpbmc7CiAgICAgICAgIENhbnRpZGFkIDogSW50ZWdlcjsKICAgICAgICAgQ29tYV9Qb3MgOiBOYXR1cmFsOwogICAgICBiZWdpbgogICAgICAgICBDb21hX1BvcyA6PSBJbmRleChMaW5lYSwgJywnKTsKICAgICAgICAgUHJvZHVjdG8gOj0gVG9fVW5ib3VuZGVkX1N0cmluZyhMaW5lYSgxIC4uIENvbWFfUG9zIC0gMSkpOwogICAgICAgICBDYW50aWRhZCA6PSBJbnRlZ2VyJ1ZhbHVlKExpbmVhKENvbWFfUG9zICsgMSAuLiBMZW5ndGgoTGluZWEpKSk7CiAgICAgICAgIFZlbnRhcyhJbmRleCkgOj0gKFByb2R1Y3RvLCBDYW50aWRhZCk7CiAgICAgICAgIEluZGV4IDo9IEluZGV4ICsgMTsKICAgICAgZW5kOwogICBlbmQgbG9vcDsKCiAgIENsb3NlKEFyY2hpdm8pOwplbmQgTGVlcl9EYXRvczs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>with Ada.Text_IO; use Ada.Text_IO;
with Ada.Strings.Unbounded; use Ada.Strings.Unbounded;
with Ada.Strings.Unbounded.Text_IO; use Ada.Strings.Unbounded.Text_IO;

procedure Leer_Datos is
   type Producto_Venta is record
      Producto : Unbounded_String;
      Cantidad : Integer;
   end record;

   type Ventas_Array is array (Natural range &lt;&gt;) of Producto_Venta;
   Ventas : Ventas_Array(1 .. 100); -- Asumimos un m&aacute;ximo de 100 registros
   Linea : Unbounded_String;
   Index : Natural := 1;

   Archivo : File_Type;
begin
   Open (Archivo, In_File, &quot;ventas.txt&quot;);

   while not End_Of_File(Archivo) loop
      Get_Line(Archivo, Linea);
      declare
         Producto : Unbounded_String;
         Cantidad : Integer;
         Coma_Pos : Natural;
      begin
         Coma_Pos := Index(Linea, ',');
         Producto := To_Unbounded_String(Linea(1 .. Coma_Pos - 1));
         Cantidad := Integer'Value(Linea(Coma_Pos + 1 .. Length(Linea)));
         Ventas(Index) := (Producto, Cantidad);
         Index := Index + 1;
      end;
   end loop;

   Close(Archivo);
end Leer_Datos;</pre></div><div class='content'><h4>Explicación</h4>
<ul>
<li><strong>Lectura del archivo</strong>: Utilizamos <code>Ada.Text_IO</code> para abrir y leer el archivo <code>ventas.txt</code>.</li>
<li><strong>Almacenamiento de datos</strong>: Los datos se almacenan en un array de registros <code>Ventas_Array</code>.</li>
<li><strong>Procesamiento de cada línea</strong>: Cada línea se divide en producto y cantidad utilizando la posición de la coma.</li>
</ul>
</div><h2><p>Procesamiento de Datos</p>
</h2>
<div class='content'><h4>Código</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvY2VkdXJlIFByb2Nlc2FyX0RhdG9zIGlzCiAgIHR5cGUgUHJvZHVjdG9fVG90YWwgaXMgcmVjb3JkCiAgICAgIFByb2R1Y3RvIDogVW5ib3VuZGVkX1N0cmluZzsKICAgICAgVG90YWwgICAgOiBJbnRlZ2VyIDo9IDA7CiAgIGVuZCByZWNvcmQ7CgogICB0eXBlIFRvdGFsZXNfQXJyYXkgaXMgYXJyYXkgKE5hdHVyYWwgcmFuZ2UgPD4pIG9mIFByb2R1Y3RvX1RvdGFsOwogICBUb3RhbGVzIDogVG90YWxlc19BcnJheSgxIC4uIDEwMCk7IC0tIEFzdW1pbW9zIHVuIG3DoXhpbW8gZGUgMTAwIHByb2R1Y3RvcwogICBUb3RhbF9JbmRleCA6IE5hdHVyYWwgOj0gMTsKCiAgIGZ1bmN0aW9uIEJ1c2Nhcl9Qcm9kdWN0byAoUHJvZHVjdG8gOiBVbmJvdW5kZWRfU3RyaW5nKSByZXR1cm4gTmF0dXJhbCBpcwogICBiZWdpbgogICAgICBmb3IgSSBpbiBUb3RhbGVzJ1JhbmdlIGxvb3AKICAgICAgICAgaWYgVG90YWxlcyhJKS5Qcm9kdWN0byA9IFByb2R1Y3RvIHRoZW4KICAgICAgICAgICAgcmV0dXJuIEk7CiAgICAgICAgIGVuZCBpZjsKICAgICAgZW5kIGxvb3A7CiAgICAgIHJldHVybiAwOwogICBlbmQgQnVzY2FyX1Byb2R1Y3RvOwoKYmVnaW4KICAgZm9yIEkgaW4gVmVudGFzJ1JhbmdlIGxvb3AKICAgICAgZGVjbGFyZQogICAgICAgICBQcm9kdWN0byA6IFVuYm91bmRlZF9TdHJpbmcgOj0gVmVudGFzKEkpLlByb2R1Y3RvOwogICAgICAgICBDYW50aWRhZCA6IEludGVnZXIgOj0gVmVudGFzKEkpLkNhbnRpZGFkOwogICAgICAgICBQb3MgICAgICA6IE5hdHVyYWw7CiAgICAgIGJlZ2luCiAgICAgICAgIFBvcyA6PSBCdXNjYXJfUHJvZHVjdG8oUHJvZHVjdG8pOwogICAgICAgICBpZiBQb3MgPSAwIHRoZW4KICAgICAgICAgICAgVG90YWxlcyhUb3RhbF9JbmRleCkgOj0gKFByb2R1Y3RvLCBDYW50aWRhZCk7CiAgICAgICAgICAgIFRvdGFsX0luZGV4IDo9IFRvdGFsX0luZGV4ICsgMTsKICAgICAgICAgZWxzZQogICAgICAgICAgICBUb3RhbGVzKFBvcykuVG90YWwgOj0gVG90YWxlcyhQb3MpLlRvdGFsICsgQ2FudGlkYWQ7CiAgICAgICAgIGVuZCBpZjsKICAgICAgZW5kOwogICBlbmQgbG9vcDsKZW5kIFByb2Nlc2FyX0RhdG9zOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>procedure Procesar_Datos is
   type Producto_Total is record
      Producto : Unbounded_String;
      Total    : Integer := 0;
   end record;

   type Totales_Array is array (Natural range &lt;&gt;) of Producto_Total;
   Totales : Totales_Array(1 .. 100); -- Asumimos un m&aacute;ximo de 100 productos
   Total_Index : Natural := 1;

   function Buscar_Producto (Producto : Unbounded_String) return Natural is
   begin
      for I in Totales'Range loop
         if Totales(I).Producto = Producto then
            return I;
         end if;
      end loop;
      return 0;
   end Buscar_Producto;

begin
   for I in Ventas'Range loop
      declare
         Producto : Unbounded_String := Ventas(I).Producto;
         Cantidad : Integer := Ventas(I).Cantidad;
         Pos      : Natural;
      begin
         Pos := Buscar_Producto(Producto);
         if Pos = 0 then
            Totales(Total_Index) := (Producto, Cantidad);
            Total_Index := Total_Index + 1;
         else
            Totales(Pos).Total := Totales(Pos).Total + Cantidad;
         end if;
      end;
   end loop;
end Procesar_Datos;</pre></div><div class='content'><h4>Explicación</h4>
<ul>
<li><strong>Estructura de Totales</strong>: Utilizamos un array de registros <code>Totales_Array</code> para almacenar el total de ventas por producto.</li>
<li><strong>Búsqueda de Producto</strong>: La función <code>Buscar_Producto</code> busca un producto en el array de totales.</li>
<li><strong>Actualización de Totales</strong>: Si el producto ya existe, se actualiza su total; de lo contrario, se añade un nuevo registro.</li>
</ul>
</div><h2><p>Generación del Informe</p>
</h2>
<div class='content'><h4>Código</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvY2VkdXJlIEdlbmVyYXJfSW5mb3JtZSBpcwogICBBcmNoaXZvIDogRmlsZV9UeXBlOwpiZWdpbgogICBDcmVhdGUgKEFyY2hpdm8sIE91dF9GaWxlLCAiaW5mb3JtZS50eHQiKTsKCiAgIGZvciBJIGluIFRvdGFsZXMnUmFuZ2UgbG9vcAogICAgICBpZiBUb3RhbGVzKEkpLlByb2R1Y3RvIC89IE51bGxfVW5ib3VuZGVkX1N0cmluZyB0aGVuCiAgICAgICAgIFB1dF9MaW5lKEFyY2hpdm8sIFRvX1N0cmluZyhUb3RhbGVzKEkpLlByb2R1Y3RvKSAmICI6ICIgJiBJbnRlZ2VyJ0ltYWdlKFRvdGFsZXMoSSkuVG90YWwpKTsKICAgICAgZW5kIGlmOwogICBlbmQgbG9vcDsKCiAgIENsb3NlKEFyY2hpdm8pOwplbmQgR2VuZXJhcl9JbmZvcm1lOw=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>procedure Generar_Informe is
   Archivo : File_Type;
begin
   Create (Archivo, Out_File, &quot;informe.txt&quot;);

   for I in Totales'Range loop
      if Totales(I).Producto /= Null_Unbounded_String then
         Put_Line(Archivo, To_String(Totales(I).Producto) &amp; &quot;: &quot; &amp; Integer'Image(Totales(I).Total));
      end if;
   end loop;

   Close(Archivo);
end Generar_Informe;</pre></div><div class='content'><h4>Explicación</h4>
<ul>
<li><strong>Creación del archivo de salida</strong>: Utilizamos <code>Ada.Text_IO</code> para crear y escribir en el archivo <code>informe.txt</code>.</li>
<li><strong>Escritura de datos</strong>: Iteramos sobre el array de totales y escribimos cada producto y su total en el archivo.</li>
</ul>
</div><h1><p>Paso 4: Ejecución del Programa</p>
</h1>
<div class='content'></div><h2><p>Código Completo</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("d2l0aCBBZGEuVGV4dF9JTzsgdXNlIEFkYS5UZXh0X0lPOwp3aXRoIEFkYS5TdHJpbmdzLlVuYm91bmRlZDsgdXNlIEFkYS5TdHJpbmdzLlVuYm91bmRlZDsKd2l0aCBBZGEuU3RyaW5ncy5VbmJvdW5kZWQuVGV4dF9JTzsgdXNlIEFkYS5TdHJpbmdzLlVuYm91bmRlZC5UZXh0X0lPOwoKcHJvY2VkdXJlIFNpc3RlbWFfUHJvY2VzYW1pZW50b19EYXRvcyBpcwogICB0eXBlIFByb2R1Y3RvX1ZlbnRhIGlzIHJlY29yZAogICAgICBQcm9kdWN0byA6IFVuYm91bmRlZF9TdHJpbmc7CiAgICAgIENhbnRpZGFkIDogSW50ZWdlcjsKICAgZW5kIHJlY29yZDsKCiAgIHR5cGUgVmVudGFzX0FycmF5IGlzIGFycmF5IChOYXR1cmFsIHJhbmdlIDw+KSBvZiBQcm9kdWN0b19WZW50YTsKICAgVmVudGFzIDogVmVudGFzX0FycmF5KDEgLi4gMTAwKTsgLS0gQXN1bWltb3MgdW4gbcOheGltbyBkZSAxMDAgcmVnaXN0cm9zCiAgIExpbmVhIDogVW5ib3VuZGVkX1N0cmluZzsKICAgSW5kZXggOiBOYXR1cmFsIDo9IDE7CgogICBBcmNoaXZvIDogRmlsZV9UeXBlOwoKICAgcHJvY2VkdXJlIExlZXJfRGF0b3MgaXMKICAgYmVnaW4KICAgICAgT3BlbiAoQXJjaGl2bywgSW5fRmlsZSwgInZlbnRhcy50eHQiKTsKCiAgICAgIHdoaWxlIG5vdCBFbmRfT2ZfRmlsZShBcmNoaXZvKSBsb29wCiAgICAgICAgIEdldF9MaW5lKEFyY2hpdm8sIExpbmVhKTsKICAgICAgICAgZGVjbGFyZQogICAgICAgICAgICBQcm9kdWN0byA6IFVuYm91bmRlZF9TdHJpbmc7CiAgICAgICAgICAgIENhbnRpZGFkIDogSW50ZWdlcjsKICAgICAgICAgICAgQ29tYV9Qb3MgOiBOYXR1cmFsOwogICAgICAgICBiZWdpbgogICAgICAgICAgICBDb21hX1BvcyA6PSBJbmRleChMaW5lYSwgJywnKTsKICAgICAgICAgICAgUHJvZHVjdG8gOj0gVG9fVW5ib3VuZGVkX1N0cmluZyhMaW5lYSgxIC4uIENvbWFfUG9zIC0gMSkpOwogICAgICAgICAgICBDYW50aWRhZCA6PSBJbnRlZ2VyJ1ZhbHVlKExpbmVhKENvbWFfUG9zICsgMSAuLiBMZW5ndGgoTGluZWEpKSk7CiAgICAgICAgICAgIFZlbnRhcyhJbmRleCkgOj0gKFByb2R1Y3RvLCBDYW50aWRhZCk7CiAgICAgICAgICAgIEluZGV4IDo9IEluZGV4ICsgMTsKICAgICAgICAgZW5kOwogICAgICBlbmQgbG9vcDsKCiAgICAgIENsb3NlKEFyY2hpdm8pOwogICBlbmQgTGVlcl9EYXRvczsKCiAgIHByb2NlZHVyZSBQcm9jZXNhcl9EYXRvcyBpcwogICAgICB0eXBlIFByb2R1Y3RvX1RvdGFsIGlzIHJlY29yZAogICAgICAgICBQcm9kdWN0byA6IFVuYm91bmRlZF9TdHJpbmc7CiAgICAgICAgIFRvdGFsICAgIDogSW50ZWdlciA6PSAwOwogICAgICBlbmQgcmVjb3JkOwoKICAgICAgdHlwZSBUb3RhbGVzX0FycmF5IGlzIGFycmF5IChOYXR1cmFsIHJhbmdlIDw+KSBvZiBQcm9kdWN0b19Ub3RhbDsKICAgICAgVG90YWxlcyA6IFRvdGFsZXNfQXJyYXkoMSAuLiAxMDApOyAtLSBBc3VtaW1vcyB1biBtw6F4aW1vIGRlIDEwMCBwcm9kdWN0b3MKICAgICAgVG90YWxfSW5kZXggOiBOYXR1cmFsIDo9IDE7CgogICAgICBmdW5jdGlvbiBCdXNjYXJfUHJvZHVjdG8gKFByb2R1Y3RvIDogVW5ib3VuZGVkX1N0cmluZykgcmV0dXJuIE5hdHVyYWwgaXMKICAgICAgYmVnaW4KICAgICAgICAgZm9yIEkgaW4gVG90YWxlcydSYW5nZSBsb29wCiAgICAgICAgICAgIGlmIFRvdGFsZXMoSSkuUHJvZHVjdG8gPSBQcm9kdWN0byB0aGVuCiAgICAgICAgICAgICAgIHJldHVybiBJOwogICAgICAgICAgICBlbmQgaWY7CiAgICAgICAgIGVuZCBsb29wOwogICAgICAgICByZXR1cm4gMDsKICAgICAgZW5kIEJ1c2Nhcl9Qcm9kdWN0bzsKCiAgIGJlZ2luCiAgICAgIGZvciBJIGluIFZlbnRhcydSYW5nZSBsb29wCiAgICAgICAgIGRlY2xhcmUKICAgICAgICAgICAgUHJvZHVjdG8gOiBVbmJvdW5kZWRfU3RyaW5nIDo9IFZlbnRhcyhJKS5Qcm9kdWN0bzsKICAgICAgICAgICAgQ2FudGlkYWQgOiBJbnRlZ2VyIDo9IFZlbnRhcyhJKS5DYW50aWRhZDsKICAgICAgICAgICAgUG9zICAgICAgOiBOYXR1cmFsOwogICAgICAgICBiZWdpbgogICAgICAgICAgICBQb3MgOj0gQnVzY2FyX1Byb2R1Y3RvKFByb2R1Y3RvKTsKICAgICAgICAgICAgaWYgUG9zID0gMCB0aGVuCiAgICAgICAgICAgICAgIFRvdGFsZXMoVG90YWxfSW5kZXgpIDo9IChQcm9kdWN0bywgQ2FudGlkYWQpOwogICAgICAgICAgICAgICBUb3RhbF9JbmRleCA6PSBUb3RhbF9JbmRleCArIDE7CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgVG90YWxlcyhQb3MpLlRvdGFsIDo9IFRvdGFsZXMoUG9zKS5Ub3RhbCArIENhbnRpZGFkOwogICAgICAgICAgICBlbmQgaWY7CiAgICAgICAgIGVuZDsKICAgICAgZW5kIGxvb3A7CiAgIGVuZCBQcm9jZXNhcl9EYXRvczsKCiAgIHByb2NlZHVyZSBHZW5lcmFyX0luZm9ybWUgaXMKICAgICAgQXJjaGl2byA6IEZpbGVfVHlwZTsKICAgYmVnaW4KICAgICAgQ3JlYXRlIChBcmNoaXZvLCBPdXRfRmlsZSwgImluZm9ybWUudHh0Iik7CgogICAgICBmb3IgSSBpbiBUb3RhbGVzJ1JhbmdlIGxvb3AKICAgICAgICAgaWYgVG90YWxlcyhJKS5Qcm9kdWN0byAvPSBOdWxsX1VuYm91bmRlZF9TdHJpbmcgdGhlbgogICAgICAgICAgICBQdXRfTGluZShBcmNoaXZvLCBUb19TdHJpbmcoVG90YWxlcyhJKS5Qcm9kdWN0bykgJiAiOiAiICYgSW50ZWdlcidJbWFnZShUb3RhbGVzKEkpLlRvdGFsKSk7CiAgICAgICAgIGVuZCBpZjsKICAgICAgZW5kIGxvb3A7CgogICAgICBDbG9zZShBcmNoaXZvKTsKICAgZW5kIEdlbmVyYXJfSW5mb3JtZTsKCmJlZ2luCiAgIExlZXJfRGF0b3M7CiAgIFByb2Nlc2FyX0RhdG9zOwogICBHZW5lcmFyX0luZm9ybWU7CmVuZCBTaXN0ZW1hX1Byb2Nlc2FtaWVudG9fRGF0b3M7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>with Ada.Text_IO; use Ada.Text_IO;
with Ada.Strings.Unbounded; use Ada.Strings.Unbounded;
with Ada.Strings.Unbounded.Text_IO; use Ada.Strings.Unbounded.Text_IO;

procedure Sistema_Procesamiento_Datos is
   type Producto_Venta is record
      Producto : Unbounded_String;
      Cantidad : Integer;
   end record;

   type Ventas_Array is array (Natural range &lt;&gt;) of Producto_Venta;
   Ventas : Ventas_Array(1 .. 100); -- Asumimos un m&aacute;ximo de 100 registros
   Linea : Unbounded_String;
   Index : Natural := 1;

   Archivo : File_Type;

   procedure Leer_Datos is
   begin
      Open (Archivo, In_File, &quot;ventas.txt&quot;);

      while not End_Of_File(Archivo) loop
         Get_Line(Archivo, Linea);
         declare
            Producto : Unbounded_String;
            Cantidad : Integer;
            Coma_Pos : Natural;
         begin
            Coma_Pos := Index(Linea, ',');
            Producto := To_Unbounded_String(Linea(1 .. Coma_Pos - 1));
            Cantidad := Integer'Value(Linea(Coma_Pos + 1 .. Length(Linea)));
            Ventas(Index) := (Producto, Cantidad);
            Index := Index + 1;
         end;
      end loop;

      Close(Archivo);
   end Leer_Datos;

   procedure Procesar_Datos is
      type Producto_Total is record
         Producto : Unbounded_String;
         Total    : Integer := 0;
      end record;

      type Totales_Array is array (Natural range &lt;&gt;) of Producto_Total;
      Totales : Totales_Array(1 .. 100); -- Asumimos un m&aacute;ximo de 100 productos
      Total_Index : Natural := 1;

      function Buscar_Producto (Producto : Unbounded_String) return Natural is
      begin
         for I in Totales'Range loop
            if Totales(I).Producto = Producto then
               return I;
            end if;
         end loop;
         return 0;
      end Buscar_Producto;

   begin
      for I in Ventas'Range loop
         declare
            Producto : Unbounded_String := Ventas(I).Producto;
            Cantidad : Integer := Ventas(I).Cantidad;
            Pos      : Natural;
         begin
            Pos := Buscar_Producto(Producto);
            if Pos = 0 then
               Totales(Total_Index) := (Producto, Cantidad);
               Total_Index := Total_Index + 1;
            else
               Totales(Pos).Total := Totales(Pos).Total + Cantidad;
            end if;
         end;
      end loop;
   end Procesar_Datos;

   procedure Generar_Informe is
      Archivo : File_Type;
   begin
      Create (Archivo, Out_File, &quot;informe.txt&quot;);

      for I in Totales'Range loop
         if Totales(I).Producto /= Null_Unbounded_String then
            Put_Line(Archivo, To_String(Totales(I).Producto) &amp; &quot;: &quot; &amp; Integer'Image(Totales(I).Total));
         end if;
      end loop;

      Close(Archivo);
   end Generar_Informe;

begin
   Leer_Datos;
   Procesar_Datos;
   Generar_Informe;
end Sistema_Procesamiento_Datos;</pre></div><div class='content'></div><h2><p>Ejecución</p>
</h2>
<div class='content'><ol>
<li><strong>Compilación</strong>: Compila el programa utilizando el compilador de Ada.
<pre><code class="language-sh">gnatmake sistema_procesamiento_datos.adb
</code></pre>
</li>
<li><strong>Ejecución</strong>: Ejecuta el programa.
<pre><code class="language-sh">./sistema_procesamiento_datos
</code></pre>
</li>
</ol>
</div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En este estudio de caso, hemos desarrollado un sistema de procesamiento de datos en Ada que lee datos de un archivo, los procesa y genera un informe. Este ejercicio ha integrado varios conceptos clave de Ada, como el manejo de archivos, estructuras de control, subprogramas y tipos de datos avanzados. Al completar este estudio de caso, deberías tener una comprensión más profunda de cómo aplicar estos conceptos en un proyecto real.</p>
</div><h2><p>Resumen de Conceptos Aprendidos</p>
</h2>
<div class='content'><ul>
<li><strong>Manejo de Archivos</strong>: Lectura y escritura de archivos en Ada.</li>
<li><strong>Estructuras de Control</strong>: Uso de bucles y condicionales para procesar datos.</li>
<li><strong>Subprogramas</strong>: Modularización del código mediante procedimientos y funciones.</li>
<li><strong>Tipos de Datos Avanzados</strong>: Uso de registros y arrays para almacenar y manipular datos.</li>
</ul>
</div><h2><p>Preparación para el Siguiente Tema</p>
</h2>
<div class='content'><p>En el próximo estudio de caso, aplicaremos estos conceptos en un contexto de sistemas embebidos, lo que nos permitirá explorar las capacidades de Ada en entornos de tiempo real y sistemas con recursos limitados.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-02-case-study-1-real-time-application' title="Estudio de Caso 1: Aplicación en Tiempo Real">
				<span class="d-none d-md-inline">&#x25C4; Anterior</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-04-case-study-3-embedded-systems' title="Estudio de Caso 3: Sistemas Embebidos">
				<span class="d-none d-md-inline">Siguiente &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Usamos cookies para mejorar tu experiencia de uso y ofrecer contenidos adaptados a tus intereses.
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
