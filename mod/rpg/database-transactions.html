<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transacciones de Base de Datos</title>

    <link rel="alternate" href="https://campusempresa.com/mod/rpg/database-transactions" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/rpg/database-transactions" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/rpg/database-transactions" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body  class="test" >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/rpg/database-transactions" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/rpg/database-transactions" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
									<div class="assert">
						<p><b>Atención!</b> Ha habido un error en la generación del curso y puede contener errores de traducción.Estamos trabajando para solucinarlo por lo que se deben usar los contenidos con cuidado.Se puede consultar el contenido correcto en otro idioma en el siguiente enlace:<br>
						<a href="https://enterprisecampus.net/mod/rpg/database-transactions">https://enterprisecampus.net/mod/rpg/database-transactions</a></p>
					</div>
								<div class='row navigation'>
	<div class='col-4'>
					<a href='dynamic-sql'>&#x25C4;SQL Dinámico</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Transacciones de Base de Datos</a>
	</div>
	<div class='col-4 text-end'>
					<a href='ile-concepts'>Conceptos y Arquitectura de ILE &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introducción a las Transacciones de Base de Datos</h1>
<div class='content'><p>Las transacciones de base de datos son un concepto fundamental en los sistemas de gestión de bases de datos relacionales (RDBMS). Aseguran que una serie de operaciones de base de datos se ejecuten de manera confiable y consistente. En RPG (Report Program Generator), entender y gestionar transacciones es crucial para mantener la integridad y consistencia de los datos.</p>
</div><h2>Conceptos Clave</h2>
<div class='content'><ul>
<li><strong>Transacción</strong>: Una secuencia de una o más operaciones SQL ejecutadas como una sola unidad.</li>
<li><strong>Propiedades ACID</strong>: Las transacciones deben adherirse a las siguientes propiedades:
<ul>
<li><strong>Atomicidad</strong>: Asegura que todas las operaciones dentro de una transacción se completen; si no, la transacción se aborta.</li>
<li><strong>Consistencia</strong>: Asegura que una transacción lleve la base de datos de un estado válido a otro.</li>
<li><strong>Aislamiento</strong>: Asegura que las transacciones se ejecuten de manera aislada unas de otras.</li>
<li><strong>Durabilidad</strong>: Asegura que una vez que una transacción se confirma, permanece así, incluso en caso de una falla del sistema.</li>
</ul>
</li>
</ul>
</div><h1>Operaciones Básicas de Transacción en RPG</h1>
<div class='content'><p>En RPG, puedes gestionar transacciones usando sentencias SQL. Las operaciones básicas incluyen <code>BEGIN TRANSACTION</code>, <code>COMMIT</code> y <code>ROLLBACK</code>.</p>
</div><h2>Ejemplo: Control Básico de Transacciones</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pY2lhciB1bmEgdHJhbnNhY2Npw7NuCmV4ZWMgc3FsCiAgYmVnaW4gdHJhbnNhY3Rpb247CgovLyBJbnNlcnRhciB1biByZWdpc3RybyBlbiBsYSB0YWJsYSBDVVNUT01FUgpleGVjIHNxbAogIGluc2VydCBpbnRvIENVU1RPTUVSIChJRCwgTkFNRSwgQkFMQU5DRSkKICB2YWx1ZXMgKDEsICdKb2huIERvZScsIDEwMC4wMCk7CgovLyBDb25maXJtYXIgbGEgdHJhbnNhY2Npw7NuCmV4ZWMgc3FsCiAgY29tbWl0Ow=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Iniciar una transacci&oacute;n
exec sql
  begin transaction;

// Insertar un registro en la tabla CUSTOMER
exec sql
  insert into CUSTOMER (ID, NAME, BALANCE)
  values (1, 'John Doe', 100.00);

// Confirmar la transacci&oacute;n
exec sql
  commit;</pre></div><div class='content'><p>Explicación:</p>
<ul>
<li><code>BEGIN TRANSACTION</code>: Inicia una nueva transacción.</li>
<li><code>INSERT INTO</code>: Añade un nuevo registro a la tabla <code>CUSTOMER</code>.</li>
<li><code>COMMIT</code>: Guarda todos los cambios realizados durante la transacción.</li>
</ul>
</div><h2>Manejo de Errores con ROLLBACK</h2>
<div class='content'><p>Si ocurre un error durante una transacción, puedes usar <code>ROLLBACK</code> para deshacer todos los cambios realizados durante la transacción.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pY2lhciB1bmEgdHJhbnNhY2Npw7NuCmV4ZWMgc3FsCiAgYmVnaW4gdHJhbnNhY3Rpb247Cgp0cnk7CiAgLy8gSW5zZXJ0YXIgdW4gcmVnaXN0cm8gZW4gbGEgdGFibGEgQ1VTVE9NRVIKICBleGVjIHNxbAogICAgaW5zZXJ0IGludG8gQ1VTVE9NRVIgKElELCBOQU1FLCBCQUxBTkNFKQogICAgdmFsdWVzICgyLCAnSmFuZSBTbWl0aCcsIDIwMC4wMCk7CgogIC8vIFNpbXVsYXIgdW4gZXJyb3IKICBpZiAlZXJyb3I7CiAgICAvLyBEZXNoYWNlciBsYSB0cmFuc2FjY2nDs24gc2kgb2N1cnJlIHVuIGVycm9yCiAgICBleGVjIHNxbAogICAgICByb2xsYmFjazsKICAgIGRzcGx5ICdUcmFuc2FjY2nDs24gZGVzaGVjaGEgZGViaWRvIGEgdW4gZXJyb3InOwogIGVsc2U7CiAgICAvLyBDb25maXJtYXIgbGEgdHJhbnNhY2Npw7NuIHNpIG5vIGhheSBlcnJvcmVzCiAgICBleGVjIHNxbAogICAgICBjb21taXQ7CiAgICBkc3BseSAnVHJhbnNhY2Npw7NuIGNvbmZpcm1hZGEgZXhpdG9zYW1lbnRlJzsKICBlbmRpZjsKb24tZXJyb3I7CiAgLy8gRGVzaGFjZXIgbGEgdHJhbnNhY2Npw7NuIGVuIGNhc28gZGUgdW4gZXJyb3IgaW5lc3BlcmFkbwogIGV4ZWMgc3FsCiAgICByb2xsYmFjazsKICBkc3BseSAnVHJhbnNhY2Npw7NuIGRlc2hlY2hhIGRlYmlkbyBhIHVuIGVycm9yIGluZXNwZXJhZG8nOwplbmR0cnk7"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Iniciar una transacci&oacute;n
exec sql
  begin transaction;

try;
  // Insertar un registro en la tabla CUSTOMER
  exec sql
    insert into CUSTOMER (ID, NAME, BALANCE)
    values (2, 'Jane Smith', 200.00);

  // Simular un error
  if %error;
    // Deshacer la transacci&oacute;n si ocurre un error
    exec sql
      rollback;
    dsply 'Transacci&oacute;n deshecha debido a un error';
  else;
    // Confirmar la transacci&oacute;n si no hay errores
    exec sql
      commit;
    dsply 'Transacci&oacute;n confirmada exitosamente';
  endif;
on-error;
  // Deshacer la transacci&oacute;n en caso de un error inesperado
  exec sql
    rollback;
  dsply 'Transacci&oacute;n deshecha debido a un error inesperado';
endtry;</pre></div><div class='content'><p>Explicación:</p>
<ul>
<li><code>ROLLBACK</code>: Deshace todos los cambios realizados durante la transacción si ocurre un error.</li>
<li><code>try</code> y <code>on-error</code>: Constructos de RPG para manejar excepciones.</li>
</ul>
</div><h1>Gestión Avanzada de Transacciones</h1>
<div class='content'><p>La gestión avanzada de transacciones implica manejar escenarios complejos como transacciones anidadas y puntos de guardado.</p>
</div><h2>Puntos de Guardado</h2>
<div class='content'><p>Los puntos de guardado te permiten establecer puntos intermedios dentro de una transacción a los que puedes retroceder sin afectar toda la transacción.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pY2lhciB1bmEgdHJhbnNhY2Npw7NuCmV4ZWMgc3FsCiAgYmVnaW4gdHJhbnNhY3Rpb247Cgp0cnk7CiAgLy8gSW5zZXJ0YXIgdW4gcmVnaXN0cm8gZW4gbGEgdGFibGEgQ1VTVE9NRVIKICBleGVjIHNxbAogICAgaW5zZXJ0IGludG8gQ1VTVE9NRVIgKElELCBOQU1FLCBCQUxBTkNFKQogICAgdmFsdWVzICgzLCAnQWxpY2UgQnJvd24nLCAzMDAuMDApOwoKICAvLyBFc3RhYmxlY2VyIHVuIHB1bnRvIGRlIGd1YXJkYWRvCiAgZXhlYyBzcWwKICAgIHNhdmVwb2ludCBzcDE7CgogIC8vIEluc2VydGFyIG90cm8gcmVnaXN0cm8KICBleGVjIHNxbAogICAgaW5zZXJ0IGludG8gQ1VTVE9NRVIgKElELCBOQU1FLCBCQUxBTkNFKQogICAgdmFsdWVzICg0LCAnQm9iIFdoaXRlJywgNDAwLjAwKTsKCiAgLy8gU2ltdWxhciB1biBlcnJvcgogIGlmICVlcnJvcjsKICAgIC8vIERlc2hhY2VyIGhhc3RhIGVsIHB1bnRvIGRlIGd1YXJkYWRvCiAgICBleGVjIHNxbAogICAgICByb2xsYmFjayB0byBzYXZlcG9pbnQgc3AxOwogICAgZHNwbHkgJ0Rlc2hlY2hvIGhhc3RhIGVsIHB1bnRvIGRlIGd1YXJkYWRvIHNwMSc7CiAgZWxzZTsKICAgIC8vIENvbmZpcm1hciBsYSB0cmFuc2FjY2nDs24gc2kgbm8gaGF5IGVycm9yZXMKICAgIGV4ZWMgc3FsCiAgICAgIGNvbW1pdDsKICAgIGRzcGx5ICdUcmFuc2FjY2nDs24gY29uZmlybWFkYSBleGl0b3NhbWVudGUnOwogIGVuZGlmOwpvbi1lcnJvcjsKICAvLyBEZXNoYWNlciBsYSB0cmFuc2FjY2nDs24gZW4gY2FzbyBkZSB1biBlcnJvciBpbmVzcGVyYWRvCiAgZXhlYyBzcWwKICAgIHJvbGxiYWNrOwogIGRzcGx5ICdUcmFuc2FjY2nDs24gZGVzaGVjaGEgZGViaWRvIGEgdW4gZXJyb3IgaW5lc3BlcmFkbyc7CmVuZHRyeTs="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Iniciar una transacci&oacute;n
exec sql
  begin transaction;

try;
  // Insertar un registro en la tabla CUSTOMER
  exec sql
    insert into CUSTOMER (ID, NAME, BALANCE)
    values (3, 'Alice Brown', 300.00);

  // Establecer un punto de guardado
  exec sql
    savepoint sp1;

  // Insertar otro registro
  exec sql
    insert into CUSTOMER (ID, NAME, BALANCE)
    values (4, 'Bob White', 400.00);

  // Simular un error
  if %error;
    // Deshacer hasta el punto de guardado
    exec sql
      rollback to savepoint sp1;
    dsply 'Deshecho hasta el punto de guardado sp1';
  else;
    // Confirmar la transacci&oacute;n si no hay errores
    exec sql
      commit;
    dsply 'Transacci&oacute;n confirmada exitosamente';
  endif;
on-error;
  // Deshacer la transacci&oacute;n en caso de un error inesperado
  exec sql
    rollback;
  dsply 'Transacci&oacute;n deshecha debido a un error inesperado';
endtry;</pre></div><div class='content'><p>Explicación:</p>
<ul>
<li><code>SAVEPOINT sp1</code>: Establece un punto de guardado llamado <code>sp1</code>.</li>
<li><code>ROLLBACK TO SAVEPOINT sp1</code>: Deshace la transacción hasta el punto de guardado <code>sp1</code>.</li>
</ul>
</div><h1>Conclusión</h1>
<div class='content'><p>Entender y gestionar transacciones de base de datos en RPG es esencial para asegurar la integridad y consistencia de los datos. Usando operaciones básicas de transacción como <code>BEGIN TRANSACTION</code>, <code>COMMIT</code> y <code>ROLLBACK</code>, así como técnicas avanzadas como puntos de guardado, puedes manejar escenarios complejos de manipulación de datos de manera efectiva. Siempre asegúrate de que tus transacciones se adhieran a las propiedades ACID para mantener un estado de base de datos confiable y consistente.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='dynamic-sql'>&#x25C4;SQL Dinámico</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Transacciones de Base de Datos</a>
	</div>
	<div class='col-4 text-end'>
					<a href='ile-concepts'>Conceptos y Arquitectura de ILE &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
