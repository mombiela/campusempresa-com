<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lectura y Escritura de Archivos</title>

    <link rel="alternate" href="https://campusempresa.com/mod/php/06-01-reading-writing-files" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/php/06-01-reading-writing-files" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/php/06-01-reading-writing-files" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/php/06-01-reading-writing-files" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/php/06-01-reading-writing-files" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-form-security' title="Seguridad en Formularios">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Lectura y Escritura de Archivos</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-file-handling-functions' title="Funciones de Manejo de Archivos">Siguiente &#x25BA;</a>
			</div>
</div>
<div class='content'><p>En este tema, aprenderás cómo manejar archivos en PHP, incluyendo cómo leer y escribir datos en archivos. Trabajar con archivos es una habilidad esencial para cualquier programador, ya que permite almacenar y recuperar datos de manera persistente.</p>
</div><h1><p>Conceptos Clave</p>
</h1>
<div class='content'><ol>
<li><strong>Apertura de Archivos</strong>: Antes de leer o escribir en un archivo, debes abrirlo utilizando la función <code>fopen()</code>.</li>
<li><strong>Lectura de Archivos</strong>: PHP proporciona varias funciones para leer archivos, como <code>fread()</code>, <code>fgets()</code>, y <code>file_get_contents()</code>.</li>
<li><strong>Escritura en Archivos</strong>: Para escribir datos en un archivo, puedes usar funciones como <code>fwrite()</code> y <code>file_put_contents()</code>.</li>
<li><strong>Cierre de Archivos</strong>: Es importante cerrar los archivos después de usarlos con <code>fclose()</code> para liberar recursos.</li>
</ol>
</div><h1><p>Apertura de Archivos</p>
</h1>
<div class='content'><p>Para abrir un archivo en PHP, utilizamos la función <code>fopen()</code>. Esta función requiere dos parámetros: el nombre del archivo y el modo en el que deseas abrirlo.</p>
</div><h2><p>Modos de Apertura</p>
</h2>
<div class='content'><table>
<thead>
<tr>
<th>Modo</th>
<th>Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>r</code></td>
<td>Abre el archivo para lectura. El puntero del archivo comienza al principio del archivo.</td>
</tr>
<tr>
<td><code>w</code></td>
<td>Abre el archivo para escritura. Si el archivo no existe, intenta crearlo. Si existe, trunca el archivo a cero.</td>
</tr>
<tr>
<td><code>a</code></td>
<td>Abre el archivo para escritura. Si el archivo no existe, intenta crearlo. Si existe, el puntero del archivo está al final del archivo.</td>
</tr>
<tr>
<td><code>r+</code></td>
<td>Abre el archivo para lectura y escritura. El puntero del archivo comienza al principio del archivo.</td>
</tr>
<tr>
<td><code>w+</code></td>
<td>Abre el archivo para lectura y escritura. Si el archivo no existe, intenta crearlo. Si existe, trunca el archivo a cero.</td>
</tr>
<tr>
<td><code>a+</code></td>
<td>Abre el archivo para lectura y escritura. Si el archivo no existe, intenta crearlo. Si existe, el puntero del archivo está al final del archivo.</td>
</tr>
</tbody>
</table>
</div><h2><p>Ejemplo de Apertura de Archivo</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGZpbGVuYW1lID0gImV4YW1wbGUudHh0IjsKJGZpbGUgPSBmb3BlbigkZmlsZW5hbWUsICJyIik7CgppZiAoJGZpbGUpIHsKICAgIGVjaG8gIkFyY2hpdm8gYWJpZXJ0byBleGl0b3NhbWVudGUuIjsKfSBlbHNlIHsKICAgIGVjaG8gIk5vIHNlIHB1ZG8gYWJyaXIgZWwgYXJjaGl2by4iOwp9Cj8+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$filename = &quot;example.txt&quot;;
$file = fopen($filename, &quot;r&quot;);

if ($file) {
    echo &quot;Archivo abierto exitosamente.&quot;;
} else {
    echo &quot;No se pudo abrir el archivo.&quot;;
}
?&gt;</pre></div><div class='content'></div><h1><p>Lectura de Archivos</p>
</h1>
<div class='content'></div><h2><p>Leer Todo el Contenido del Archivo</p>
</h2>
<div class='content'><p>Para leer todo el contenido de un archivo de una sola vez, puedes usar <code>file_get_contents()</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGZpbGVuYW1lID0gImV4YW1wbGUudHh0IjsKJGNvbnRlbnQgPSBmaWxlX2dldF9jb250ZW50cygkZmlsZW5hbWUpOwoKaWYgKCRjb250ZW50ICE9PSBmYWxzZSkgewogICAgZWNobyAkY29udGVudDsKfSBlbHNlIHsKICAgIGVjaG8gIk5vIHNlIHB1ZG8gbGVlciBlbCBhcmNoaXZvLiI7Cn0KPz4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$filename = &quot;example.txt&quot;;
$content = file_get_contents($filename);

if ($content !== false) {
    echo $content;
} else {
    echo &quot;No se pudo leer el archivo.&quot;;
}
?&gt;</pre></div><div class='content'></div><h2><p>Leer Archivo Línea por Línea</p>
</h2>
<div class='content'><p>Para leer un archivo línea por línea, puedes usar <code>fgets()</code> en un bucle.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGZpbGVuYW1lID0gImV4YW1wbGUudHh0IjsKJGZpbGUgPSBmb3BlbigkZmlsZW5hbWUsICJyIik7CgppZiAoJGZpbGUpIHsKICAgIHdoaWxlICgoJGxpbmUgPSBmZ2V0cygkZmlsZSkpICE9PSBmYWxzZSkgewogICAgICAgIGVjaG8gJGxpbmUgLiAiPGJyPiI7CiAgICB9CiAgICBmY2xvc2UoJGZpbGUpOwp9IGVsc2UgewogICAgZWNobyAiTm8gc2UgcHVkbyBhYnJpciBlbCBhcmNoaXZvLiI7Cn0KPz4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$filename = &quot;example.txt&quot;;
$file = fopen($filename, &quot;r&quot;);

if ($file) {
    while (($line = fgets($file)) !== false) {
        echo $line . &quot;&lt;br&gt;&quot;;
    }
    fclose($file);
} else {
    echo &quot;No se pudo abrir el archivo.&quot;;
}
?&gt;</pre></div><div class='content'></div><h1><p>Escritura en Archivos</p>
</h1>
<div class='content'></div><h2><p>Escribir Datos en un Archivo</p>
</h2>
<div class='content'><p>Para escribir datos en un archivo, puedes usar <code>fwrite()</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGZpbGVuYW1lID0gImV4YW1wbGUudHh0IjsKJGZpbGUgPSBmb3BlbigkZmlsZW5hbWUsICJ3Iik7CgppZiAoJGZpbGUpIHsKICAgICR0ZXh0ID0gIkhvbGEsIE11bmRvISI7CiAgICBmd3JpdGUoJGZpbGUsICR0ZXh0KTsKICAgIGZjbG9zZSgkZmlsZSk7CiAgICBlY2hvICJEYXRvcyBlc2NyaXRvcyBleGl0b3NhbWVudGUuIjsKfSBlbHNlIHsKICAgIGVjaG8gIk5vIHNlIHB1ZG8gYWJyaXIgZWwgYXJjaGl2by4iOwp9Cj8+"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$filename = &quot;example.txt&quot;;
$file = fopen($filename, &quot;w&quot;);

if ($file) {
    $text = &quot;Hola, Mundo!&quot;;
    fwrite($file, $text);
    fclose($file);
    echo &quot;Datos escritos exitosamente.&quot;;
} else {
    echo &quot;No se pudo abrir el archivo.&quot;;
}
?&gt;</pre></div><div class='content'></div><h2><p>Añadir Datos a un Archivo</p>
</h2>
<div class='content'><p>Para añadir datos al final de un archivo, usa el modo <code>a</code> con <code>fopen()</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGZpbGVuYW1lID0gImV4YW1wbGUudHh0IjsKJGZpbGUgPSBmb3BlbigkZmlsZW5hbWUsICJhIik7CgppZiAoJGZpbGUpIHsKICAgICR0ZXh0ID0gIlxuQcOxYWRpZW5kbyB1bmEgbnVldmEgbMOtbmVhLiI7CiAgICBmd3JpdGUoJGZpbGUsICR0ZXh0KTsKICAgIGZjbG9zZSgkZmlsZSk7CiAgICBlY2hvICJEYXRvcyBhw7FhZGlkb3MgZXhpdG9zYW1lbnRlLiI7Cn0gZWxzZSB7CiAgICBlY2hvICJObyBzZSBwdWRvIGFicmlyIGVsIGFyY2hpdm8uIjsKfQo/Pg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$filename = &quot;example.txt&quot;;
$file = fopen($filename, &quot;a&quot;);

if ($file) {
    $text = &quot;\nA&ntilde;adiendo una nueva l&iacute;nea.&quot;;
    fwrite($file, $text);
    fclose($file);
    echo &quot;Datos a&ntilde;adidos exitosamente.&quot;;
} else {
    echo &quot;No se pudo abrir el archivo.&quot;;
}
?&gt;</pre></div><div class='content'></div><h1><p>Cierre de Archivos</p>
</h1>
<div class='content'><p>Es importante cerrar los archivos después de usarlos para liberar recursos del sistema.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGZpbGVuYW1lID0gImV4YW1wbGUudHh0IjsKJGZpbGUgPSBmb3BlbigkZmlsZW5hbWUsICJyIik7CgovLyBSZWFsaXphIG9wZXJhY2lvbmVzIGRlIGxlY3R1cmEvZXNjcml0dXJhCgpmY2xvc2UoJGZpbGUpOwo/Pg=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$filename = &quot;example.txt&quot;;
$file = fopen($filename, &quot;r&quot;);

// Realiza operaciones de lectura/escritura

fclose($file);
?&gt;</pre></div><div class='content'></div><h1><p>Ejercicio Práctico</p>
</h1>
<div class='content'></div><h2><p>Ejercicio 1: Leer y Mostrar Contenido de un Archivo</p>
</h2>
<div class='content'><ol>
<li>Crea un archivo llamado <code>data.txt</code> y escribe algunas líneas de texto en él.</li>
<li>Escribe un script PHP que abra <code>data.txt</code>, lea su contenido y lo muestre en el navegador.</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGZpbGVuYW1lID0gImRhdGEudHh0IjsKJGZpbGUgPSBmb3BlbigkZmlsZW5hbWUsICJyIik7CgppZiAoJGZpbGUpIHsKICAgIHdoaWxlICgoJGxpbmUgPSBmZ2V0cygkZmlsZSkpICE9PSBmYWxzZSkgewogICAgICAgIGVjaG8gJGxpbmUgLiAiPGJyPiI7CiAgICB9CiAgICBmY2xvc2UoJGZpbGUpOwp9IGVsc2UgewogICAgZWNobyAiTm8gc2UgcHVkbyBhYnJpciBlbCBhcmNoaXZvLiI7Cn0KPz4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$filename = &quot;data.txt&quot;;
$file = fopen($filename, &quot;r&quot;);

if ($file) {
    while (($line = fgets($file)) !== false) {
        echo $line . &quot;&lt;br&gt;&quot;;
    }
    fclose($file);
} else {
    echo &quot;No se pudo abrir el archivo.&quot;;
}
?&gt;</pre></div><div class='content'></div><h2><p>Ejercicio 2: Escribir y Añadir Datos a un Archivo</p>
</h2>
<div class='content'><ol>
<li>Escribe un script PHP que cree un archivo llamado <code>log.txt</code> y escriba la cadena &quot;Inicio del Log&quot;.</li>
<li>Luego, modifica el script para que añada la fecha y hora actuales al final del archivo cada vez que se ejecute.</li>
</ol>
</div><h2><p>Solución</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGZpbGVuYW1lID0gImxvZy50eHQiOwokZmlsZSA9IGZvcGVuKCRmaWxlbmFtZSwgInciKTsKCmlmICgkZmlsZSkgewogICAgJHRleHQgPSAiSW5pY2lvIGRlbCBMb2dcbiI7CiAgICBmd3JpdGUoJGZpbGUsICR0ZXh0KTsKICAgIGZjbG9zZSgkZmlsZSk7CiAgICBlY2hvICJMb2cgaW5pY2lhbGl6YWRvLiI7Cn0gZWxzZSB7CiAgICBlY2hvICJObyBzZSBwdWRvIGFicmlyIGVsIGFyY2hpdm8uIjsKfQoKLy8gQcOxYWRpciBmZWNoYSB5IGhvcmEgYWN0dWFsZXMKJGZpbGUgPSBmb3BlbigkZmlsZW5hbWUsICJhIik7CgppZiAoJGZpbGUpIHsKICAgICRkYXRlID0gZGF0ZSgiWS1tLWQgSDppOnMiKTsKICAgIGZ3cml0ZSgkZmlsZSwgIkxvZyBlbnRyeSBhdDogIiAuICRkYXRlIC4gIlxuIik7CiAgICBmY2xvc2UoJGZpbGUpOwogICAgZWNobyAiRmVjaGEgeSBob3JhIGHDsWFkaWRhcy4iOwp9IGVsc2UgewogICAgZWNobyAiTm8gc2UgcHVkbyBhYnJpciBlbCBhcmNoaXZvLiI7Cn0KPz4="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$filename = &quot;log.txt&quot;;
$file = fopen($filename, &quot;w&quot;);

if ($file) {
    $text = &quot;Inicio del Log\n&quot;;
    fwrite($file, $text);
    fclose($file);
    echo &quot;Log inicializado.&quot;;
} else {
    echo &quot;No se pudo abrir el archivo.&quot;;
}

// A&ntilde;adir fecha y hora actuales
$file = fopen($filename, &quot;a&quot;);

if ($file) {
    $date = date(&quot;Y-m-d H:i:s&quot;);
    fwrite($file, &quot;Log entry at: &quot; . $date . &quot;\n&quot;);
    fclose($file);
    echo &quot;Fecha y hora a&ntilde;adidas.&quot;;
} else {
    echo &quot;No se pudo abrir el archivo.&quot;;
}
?&gt;</pre></div><div class='content'></div><h1><p>Conclusión</p>
</h1>
<div class='content'><p>En esta sección, has aprendido cómo abrir, leer, escribir y cerrar archivos en PHP. Estas habilidades son fundamentales para manejar datos de manera persistente en tus aplicaciones. En el próximo tema, exploraremos las funciones de manejo de archivos en mayor detalle.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-form-security' title="Seguridad en Formularios">&#x25C4;Anterior</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-file-handling-functions' title="Funciones de Manejo de Archivos">Siguiente &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
