<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pruebas y Despliegue</title>

    <link rel="alternate" href="https://campusempresa.com/mod/php/testing-and-deployment" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/php/testing-and-deployment" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/php/testing-and-deployment" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Construyendo la sociedad de hoy y del mañana</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
										<a href="https://enterprisecampus.net/mod/php/testing-and-deployment" class="px-2">EN</a></b>
				|
				<b class="px-2">ES</b>
				|
				<a href="https://campusempresa.cat/mod/php/testing-and-deployment" class="px-2">CA</a>
								</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">El Proyecto</a>
				<a href="/about">Sobre nosotros</a>
				<a href="/contribute">Contribuir</a>
				<a href="/donate">Donaciones</a>
				<a href="/licence">Licencia</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='implementing-features'>&#x25C4;Implementación de Funcionalidades</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Pruebas y Despliegue</a>
	</div>
	<div class='col-4 text-end'>
			</div>
</div>
<div class='content'></div><h1>Introducción</h1>
<div class='content'><p>Las pruebas y el despliegue son aspectos cruciales del desarrollo de software. Esta sección te guiará a través de los conceptos básicos de las pruebas de tus aplicaciones PHP y su despliegue en un entorno de producción. Al final de esta sección, tendrás una comprensión sólida de cómo asegurar que tu código PHP sea confiable y cómo desplegarlo de manera eficiente.</p>
</div><h1>Pruebas en PHP</h1>
<div class='content'></div><h2>Por qué las Pruebas son Importantes</h2>
<div class='content'><ul>
<li><strong>Asegura la Calidad del Código</strong>: Ayuda a detectar errores y fallos temprano.</li>
<li><strong>Facilita la Refactorización</strong>: Hace más fácil cambiar el código sin romper la funcionalidad.</li>
<li><strong>Automatiza la Verificación</strong>: Ahorra tiempo al automatizar verificaciones repetitivas.</li>
</ul>
</div><h2>Tipos de Pruebas</h2>
<div class='content'><ul>
<li><strong>Pruebas Unitarias</strong>: Prueban componentes o funciones individuales.</li>
<li><strong>Pruebas de Integración</strong>: Prueban cómo diferentes partes de la aplicación funcionan juntas.</li>
<li><strong>Pruebas Funcionales</strong>: Prueban la aplicación desde la perspectiva del usuario.</li>
</ul>
</div><h2>Configuración de PHPUnit</h2>
<div class='content'><p>PHPUnit es el marco de pruebas más utilizado para PHP.</p>
<h4>Instalación</h4>
<p>Puedes instalar PHPUnit usando Composer:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29tcG9zZXIgcmVxdWlyZSAtLWRldiBwaHB1bml0L3BocHVuaXQ="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>composer require --dev phpunit/phpunit</pre></div><div class='content'><h4>Uso Básico</h4>
<p>Crea un archivo de prueba, por ejemplo, <code>CalculatorTest.php</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKdXNlIFBIUFVuaXRcRnJhbWV3b3JrXFRlc3RDYXNlOwoKY2xhc3MgQ2FsY3VsYXRvclRlc3QgZXh0ZW5kcyBUZXN0Q2FzZSB7CiAgICBwdWJsaWMgZnVuY3Rpb24gdGVzdEFkZGl0aW9uKCkgewogICAgICAgICRjYWxjdWxhdG9yID0gbmV3IENhbGN1bGF0b3IoKTsKICAgICAgICAkcmVzdWx0ID0gJGNhbGN1bGF0b3ItPmFkZCgyLCAzKTsKICAgICAgICAkdGhpcy0+YXNzZXJ0RXF1YWxzKDUsICRyZXN1bHQpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
use PHPUnit\Framework\TestCase;

class CalculatorTest extends TestCase {
    public function testAddition() {
        $calculator = new Calculator();
        $result = $calculator-&gt;add(2, 3);
        $this-&gt;assertEquals(5, $result);
    }
}</pre></div><div class='content'><p>Ejecuta la prueba:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmVuZG9yL2Jpbi9waHB1bml0IENhbGN1bGF0b3JUZXN0LnBocA=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>vendor/bin/phpunit CalculatorTest.php</pre></div><div class='content'></div><h2>Escribiendo Pruebas Unitarias</h2>
<div class='content'><ul>
<li><strong>Preparar</strong>: Configura las condiciones para la prueba.</li>
<li><strong>Actuar</strong>: Ejecuta el código que se está probando.</li>
<li><strong>Afirmar</strong>: Verifica que el resultado sea el esperado.</li>
</ul>
<p>Ejemplo:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKdXNlIFBIUFVuaXRcRnJhbWV3b3JrXFRlc3RDYXNlOwoKY2xhc3MgU3RyaW5nVXRpbHNUZXN0IGV4dGVuZHMgVGVzdENhc2UgewogICAgcHVibGljIGZ1bmN0aW9uIHRlc3RTdHJpbmdSZXZlcnNhbCgpIHsKICAgICAgICAkc3RyaW5nVXRpbHMgPSBuZXcgU3RyaW5nVXRpbHMoKTsKICAgICAgICAkcmVzdWx0ID0gJHN0cmluZ1V0aWxzLT5yZXZlcnNlKCJoZWxsbyIpOwogICAgICAgICR0aGlzLT5hc3NlcnRFcXVhbHMoIm9sbGVoIiwgJHJlc3VsdCk7CiAgICB9Cn0="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
use PHPUnit\Framework\TestCase;

class StringUtilsTest extends TestCase {
    public function testStringReversal() {
        $stringUtils = new StringUtils();
        $result = $stringUtils-&gt;reverse(&quot;hello&quot;);
        $this-&gt;assertEquals(&quot;olleh&quot;, $result);
    }
}</pre></div><div class='content'></div><h2>Mocking y Stubbing</h2>
<div class='content'><p>Los mocks y stubs se utilizan para simular objetos en las pruebas.</p>
<p>Ejemplo usando Mockery:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKdXNlIFBIUFVuaXRcRnJhbWV3b3JrXFRlc3RDYXNlOwp1c2UgTW9ja2VyeSBhcyBtOwoKY2xhc3MgVXNlclNlcnZpY2VUZXN0IGV4dGVuZHMgVGVzdENhc2UgewogICAgcHVibGljIGZ1bmN0aW9uIHRlYXJEb3duKCk6IHZvaWQgewogICAgICAgIG06OmNsb3NlKCk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHRlc3RVc2VyQ3JlYXRpb24oKSB7CiAgICAgICAgJHVzZXJSZXBvID0gbTo6bW9jaygnVXNlclJlcG9zaXRvcnknKTsKICAgICAgICAkdXNlclJlcG8tPnNob3VsZFJlY2VpdmUoJ3NhdmUnKS0+b25jZSgpLT5hbmRSZXR1cm4odHJ1ZSk7CgogICAgICAgICR1c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZSgkdXNlclJlcG8pOwogICAgICAgICRyZXN1bHQgPSAkdXNlclNlcnZpY2UtPmNyZWF0ZVVzZXIoJ0pvaG4gRG9lJyk7CgogICAgICAgICR0aGlzLT5hc3NlcnRUcnVlKCRyZXN1bHQpOwogICAgfQp9"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
use PHPUnit\Framework\TestCase;
use Mockery as m;

class UserServiceTest extends TestCase {
    public function tearDown(): void {
        m::close();
    }

    public function testUserCreation() {
        $userRepo = m::mock('UserRepository');
        $userRepo-&gt;shouldReceive('save')-&gt;once()-&gt;andReturn(true);

        $userService = new UserService($userRepo);
        $result = $userService-&gt;createUser('John Doe');

        $this-&gt;assertTrue($result);
    }
}</pre></div><div class='content'></div><h1>Despliegue</h1>
<div class='content'></div><h2>Preparación para el Despliegue</h2>
<div class='content'><ul>
<li><strong>Revisión de Código</strong>: Asegúrate de que todo el código haya sido revisado.</li>
<li><strong>Pruebas</strong>: Ejecuta todas las pruebas y asegúrate de que pasen.</li>
<li><strong>Configuración del Entorno</strong>: Configura las variables de entorno y configuraciones.</li>
</ul>
</div><h2>Estrategias de Despliegue</h2>
<div class='content'><ul>
<li><strong>Despliegue Manual</strong>: Copia los archivos manualmente al servidor.</li>
<li><strong>Despliegue Automatizado</strong>: Usa herramientas como GitHub Actions, Jenkins o GitLab CI/CD.</li>
</ul>
</div><h2>Uso de Composer para el Despliegue</h2>
<div class='content'><p>Composer puede ayudar a gestionar dependencias y autoloading.</p>
<h4>Ejemplo <code>composer.json</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICAgInJlcXVpcmUiOiB7CiAgICAgICAgIm1vbm9sb2cvbW9ub2xvZyI6ICJeMi4wIgogICAgfSwKICAgICJhdXRvbG9hZCI6IHsKICAgICAgICAicHNyLTQiOiB7CiAgICAgICAgICAgICJBcHBcXCI6ICJzcmMvIgogICAgICAgIH0KICAgIH0KfQ=="))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
    &quot;require&quot;: {
        &quot;monolog/monolog&quot;: &quot;^2.0&quot;
    },
    &quot;autoload&quot;: {
        &quot;psr-4&quot;: {
            &quot;App\\&quot;: &quot;src/&quot;
        }
    }
}</pre></div><div class='content'><h4>Pasos de Despliegue</h4>
<ol>
<li><strong>Instalar Dependencias</strong>: Ejecuta <code>composer install</code> en el servidor.</li>
<li><strong>Configurar Autoloading</strong>: Asegúrate de que el autoloading esté configurado correctamente.</li>
<li><strong>Variables de Entorno</strong>: Usa archivos <code>.env</code> o variables de entorno del servidor.</li>
</ol>
</div><h2>Integración Continua y Despliegue Continuo (CI/CD)</h2>
<div class='content'><p>CI/CD automatiza el proceso de pruebas y despliegue de código.</p>
<h4>Ejemplo de Workflow de GitHub Actions</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmFtZTogQ0kvQ0QgUGlwZWxpbmUKCm9uOgogIHB1c2g6CiAgICBicmFuY2hlczoKICAgICAgLSBtYWluCgpqb2JzOgogIGJ1aWxkOgogICAgcnVucy1vbjogdWJ1bnR1LWxhdGVzdAoKICAgIHN0ZXBzOgogICAgLSB1c2VzOiBhY3Rpb25zL2NoZWNrb3V0QHYyCiAgICAtIG5hbWU6IFNldCB1cCBQSFAKICAgICAgdXNlczogc2hpdmFtbWF0aHVyL3NldHVwLXBocEB2MgogICAgICB3aXRoOgogICAgICAgIHBocC12ZXJzaW9uOiAnNy40JwogICAgLSBuYW1lOiBJbnN0YWxsIGRlcGVuZGVuY2llcwogICAgICBydW46IGNvbXBvc2VyIGluc3RhbGwKICAgIC0gbmFtZTogUnVuIHRlc3RzCiAgICAgIHJ1bjogdmVuZG9yL2Jpbi9waHB1bml0CiAgICAtIG5hbWU6IERlcGxveSB0byBTZXJ2ZXIKICAgICAgcnVuOiB8CiAgICAgICAgcnN5bmMgLWF2eiAtLWV4Y2x1ZGUgJ3ZlbmRvcicgLiB1c2VyQHNlcnZlcjovcGF0aC90by9wcm9qZWN0CiAgICAgICAgc3NoIHVzZXJAc2VydmVyICdjZCAvcGF0aC90by9wcm9qZWN0ICYmIGNvbXBvc2VyIGluc3RhbGwgLS1uby1kZXYn"))));alert("¡Copiado!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>name: CI/CD Pipeline

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Set up PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '7.4'
    - name: Install dependencies
      run: composer install
    - name: Run tests
      run: vendor/bin/phpunit
    - name: Deploy to Server
      run: |
        rsync -avz --exclude 'vendor' . user@server:/path/to/project
        ssh user@server 'cd /path/to/project &amp;&amp; composer install --no-dev'</pre></div><div class='content'></div><h1>Conclusión</h1>
<div class='content'><p>Las pruebas y el despliegue son prácticas esenciales en el desarrollo de PHP. Al escribir pruebas, aseguras que tu código sea confiable y mantenible. Las estrategias de despliegue, ya sean manuales o automatizadas, te ayudan a entregar tu aplicación a los usuarios de manera eficiente. Implementar pipelines de CI/CD agiliza aún más el proceso, permitiendo la integración y el despliegue continuos. Con estas habilidades, estás bien equipado para desarrollar, probar y desplegar aplicaciones PHP robustas.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='implementing-features'>&#x25C4;Implementación de Funcionalidades</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Pruebas y Despliegue</a>
	</div>
	<div class='col-4 text-end'>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Publicidad</h1>
			<p>Este espacio está destinado a publicidad.</p>
			<p>Si quieres ser patrocinador, contáctanos para incluir enlaces en esta zona: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>¡Gracias por colaborar!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. Todos los derechos reservados</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Aceptar</a>
    <a href="/cookies">Mas información</a>
</div>	

	</div>    
</body>
</html>
